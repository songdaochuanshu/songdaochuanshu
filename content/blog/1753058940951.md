---
layout: post
title: 'æœ€æ–°ç ”å‘flutter3.27+bitsdojo_window+getxå®¢æˆ·ç«¯ä»¿å¾®ä¿¡èŠå¤©Exeåº”ç”¨'
date: "2025-07-21T00:49:00Z"
---
æœ€æ–°ç ”å‘flutter3.27+bitsdojo\_window+getxå®¢æˆ·ç«¯ä»¿å¾®ä¿¡èŠå¤©Exeåº”ç”¨
==================================================

2025è·¨å¹³å°Flutter3+Dart3+Getxä»¿å¾®ä¿¡**ç”µè„‘ç«¯Exe**èŠå¤©ç³»ç»Ÿ_Flutter3-WinChat_ã€‚

**flutter3\_winchat**ï¼šåŸºäºæœ€æ–°è·¨å¹³å°æ¡†æ¶flutter3.27+dart3.6+getx+bitsdojo\_window+media\_kit+system\_trayæ­å»ºæ¡Œé¢å®¢æˆ·ç«¯ä»¿å¾®ä¿¡èŠå¤©exeå®ä¾‹ã€‚æ•´åˆäº†èŠå¤©åŠŸèƒ½ã€è”ç³»äººã€æ”¶è—ã€æœ‹å‹åœˆã€å°è§†é¢‘ã€æˆ‘çš„ç­‰æ¨¡å—ã€‚

### æŠ€æœ¯æ ˆ

*   å¼€å‘å·¥å…·ï¼šVscode
*   æŠ€æœ¯æ¡†æ¶ï¼šFlutter3.27.1+Dart3.6.0
*   çª—å£ç®¡ç†ï¼šbitsdojo\_window: ^0.1.6
*   æ‰˜ç›˜å›¾æ ‡ï¼šsystem\_tray: ^2.0.3
*   è·¯ç”±/çŠ¶æ€ç®¡ç†ï¼šget: ^4.7.2
*   æœ¬åœ°å­˜å‚¨ï¼šget\_storage: ^2.1.1
*   å›¾ç‰‡é¢„è§ˆï¼šphoto\_view: ^0.15.0
*   ç½‘å€é¢„è§ˆï¼šurl\_launcher: ^6.3.1
*   è§†é¢‘ç»„ä»¶ï¼šmedia\_kit: ^1.2.0
*   æ–‡ä»¶é€‰æ‹©å™¨ï¼šfile\_picker: ^10.2.0
*   å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼šfleather: ^1.22.0

### é¡¹ç›®æ¡†æ¶ç»“æ„

> ### _flutter3-winchatç”µè„‘ç«¯èŠå¤©é¡¹ç›®å·²ç»æ›´æ–°åˆ°æˆ‘çš„åŸåˆ›ä½œå“é›†ã€‚_
> 
> [Flutter3.27+bitsdojo\_windowä»¿å¾®ä¿¡å®¢æˆ·ç«¯èŠå¤©Exe](https://mall.bilibili.com/neul-next/detailuniversal/detail.html?isMerchant=1&page=detailuniversal_detail&saleType=10&itemsId=12773091&loadingShow=1&noTitleBar=1&msource=merchant_share)

### é¡¹ç›®å…¥å£é…ç½®main.dart

import 'dart:io';
import 'package:flutter/material.dart';
import 'package:bitsdojo\_window/bitsdojo\_window.dart';
import 'package:get/get.dart';
import 'package:get\_storage/get\_storage.dart';
import 'package:media\_kit/media\_kit.dart';
import 'package:system\_tray/system\_tray.dart';

import 'utils/common.dart';

// å…¬å…±å¸ƒå±€æ¨¡æ¿
import 'layouts/index.dart';

// è·¯ç”±ç®¡ç†
import 'router/index.dart';

void main() async {
  // åˆå§‹åŒ–get\_storageå­˜å‚¨ç±»
  await GetStorage.init();

  // åˆå§‹åŒ–media\_kitè§†é¢‘å¥—ä»¶
  WidgetsFlutterBinding.ensureInitialized();
  MediaKit.ensureInitialized();

  initSystemTray();

  runApp(const MyApp());

  // åˆå§‹åŒ–bitsdojo\_windowçª—å£
  doWhenWindowReady(() {
    appWindow.size \= const Size(850, 620);
    appWindow.minSize \= const Size(700, 500);
    appWindow.alignment \= Alignment.center;
    appWindow.title \= 'Flutter3-WinChat';
    appWindow.show();
  });
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return GetMaterialApp(
      title: 'FLUTTER3 WINCHAT',
      debugShowCheckedModeBanner: false,
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Color(0xFF07C160)),
        useMaterial3: true,
        // ä¿®æ­£windowsç«¯å­—ä½“ç²—ç»†ä¸ä¸€è‡´
        fontFamily: Platform.isWindows ? 'Microsoft YaHei' : null,
      ),
      home: const Layout(),
      // åˆå§‹è·¯ç”±
      initialRoute: Common.isLogin() ? '/index' :'/login',
      // è·¯ç”±é¡µé¢
      getPages: routes,
    );
  }
}

// åˆ›å»ºç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡
Future<void\> initSystemTray() async {
  String trayIco \= 'assets/images/tray.ico';
  SystemTray systemTray \= SystemTray();

  // åˆå§‹åŒ–ç³»ç»Ÿæ‰˜ç›˜
  await systemTray.initSystemTray(
    title: 'system-tray',
    iconPath: trayIco,
  );

  // å³é”®èœå•
  final Menu menu = Menu();
  await menu.buildFrom(\[
    MenuItemLabel(label: 'æ‰“å¼€ä¸»ç•Œé¢', onClicked: (menuItem) => appWindow.show()),
    MenuItemLabel(label: 'éšè—çª—å£', onClicked: (menuItem) => appWindow.hide()),
    MenuItemLabel(label: 'è®¾ç½®ä¸­å¿ƒ', onClicked: (menuItem) => Get.toNamed('/setting')),
    MenuItemLabel(label: 'å…³äº', onClicked: (menuItem) => {}),
    MenuItemLabel(label: 'é€€å‡º', onClicked: (menuItem) => appWindow.close()),
  \]);
  await systemTray.setContextMenu(menu);

  // å³é”®äº‹ä»¶
  systemTray.registerSystemTrayEventHandler((eventName) {
    debugPrint('eventName: $eventName');
    if (eventName == kSystemTrayEventClick) {
      Platform.isWindows ? appWindow.show() : systemTray.popUpContextMenu();
    } else if (eventName == kSystemTrayEventRightClick) {
      Platform.isWindows ? systemTray.popUpContextMenu() : appWindow.show();
    }
  });
}

ä½¿ç”¨Â bitsdojo\_windowÂ æ’ä»¶è¿›è¡Œçª—å£ç®¡ç†ã€‚æ”¯æŒæ— è¾¹æ¡†çª—å£ï¼Œçª—å£å°ºå¯¸å¤§å°ï¼Œè‡ªå®šä¹‰ç³»ç»Ÿæ“ä½œæŒ‰é’®(æœ€å¤§åŒ–/æœ€å°åŒ–/å…³é—­)ã€‚

[https://pub-web.flutter-io.cn/packages/bitsdojo\_window](https://pub-web.flutter-io.cn/packages/bitsdojo_window)

ä½¿ç”¨Â system\_trayÂ æ’ä»¶ç®¡ç†ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡ã€‚

[https://pub-web.flutter-io.cn/packages/system\_tray](https://pub-web.flutter-io.cn/packages/system_tray)

### flutter3å…¬å…±å¸ƒå±€

é¡¹ç›®æ•´ä½“å¸ƒå±€åˆ†ä¸º**èœå•æ +ä¾§è¾¹æ +å³ä¾§ä¸»åŒºåŸŸ**ä¸‰ä¸ªæ¨¡å—ã€‚

class Layout extends StatefulWidget {
  const Layout({
    super.key,
    this.activitybar = const Activitybar(),
    this.sidebar,
    this.child,
    this.showSidebar = true,
  });

  final Widget? activitybar; // å·¦ä¾§èœå•æ 
  final Widget? sidebar; // ä¾§è¾¹æ 
  final Widget? child; // å³ä¾§å†…å®¹åŒºåŸŸ
  final bool showSidebar; // æ˜¯å¦æ˜¾ç¤ºä¾§è¾¹æ 
  @override
  State<Layout> createState() => \_LayoutState();
}

class \_LayoutState extends State<Layout> {
  // ç½®é¡¶çª—å£
  bool winTopMost = false;
  
  @override
  void initState() {
    super.initState();
  }

  @override
  void dispose() {
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.grey\[100\],
      body: Flex(
        direction: Axis.horizontal,
        children: \[
          // å·¦ä¾§èœå•æ 
          MoveWindow(
            child: widget.activitybar
          ),
          // ä¾§è¾¹æ 
          Visibility(
            visible: widget.showSidebar,
            child: SizedBox(
              // ...
            ),
          ),
          // ä¸»ä½“å®¹å™¨
          Expanded(
            child: Column(
              children: \[
                // å¯¼èˆªæ 
                WindowTitleBarBox(
                  child: Row(
                    children: \[
                      Expanded(
                        child: MoveWindow(),
                      ),
                      // å³ä¸Šè§’æ“ä½œæŒ‰é’®ç»„
                      Winbtn(
                        // ...
                      ),
                    \],
                  ),
                ),
                // å†…å®¹åŒºåŸŸ
                Expanded(
                  child: Container(
                    child: widget.child,
                  ),
                ),
              \],
            ),
          ),
        \],
      ),
    );
  }
}

### flutter3è·¯ç”±é…ç½®

import 'package:flutter/material.dart';
import 'package:get/get.dart';

import '../utils/common.dart';

/\* å¼•å…¥è·¯ç”±é¡µé¢ \*/
import '../views/auth/login.dart';
import '../views/auth/register.dart';
// é¦–é¡µ
import '../views/index/index.dart';
// é€šè®¯å½•
import '../views/contact/index.dart';
import '../views/contact/addfriends.dart';
import '../views/contact/newfriends.dart';
import '../views/contact/uinfo.dart';
// æ”¶è—
import '../views/favor/index.dart';
import '../views/favor/write.dart';
// æˆ‘çš„
import '../views/my/index.dart';
import '../views/my/setting.dart';
import '../views/my/recharge.dart';
import '../views/my/wallet.dart';
// æœ‹å‹åœˆ
import '../views/fzone/index.dart';
import '../views/fzone/publish.dart';
// çŸ­è§†é¢‘
import '../views/fvideo/index.dart';
// èŠå¤©
import '../views/chat/group-chat/chat.dart';

// è·¯ç”±åœ°å€é›†åˆ
final Map<String, Widget> routeMap = {
  '/index': const Index(),
  '/contact': const Contact(),
  '/addfriends': const AddFriends(),
  '/newfriends': const NewFriends(),
  '/uinfo': const Uinfo(),
  '/favor': const Favor(),
  '/writefavor': const WriteFavor(),
  '/my': const My(),
  '/setting': const Setting(),
  '/recharge': const Recharge(),
  '/wallet': const Wallet(),
  '/fzone': const Fzone(),
  '/publish': const PublishFzone(),
  '/fvideo': const Fvideo(),
  '/chat': const Chat(),
};

final List<GetPage> patchRoute = routeMap.entries.map((e) => GetPage(
  name: e.key, // è·¯ç”±åç§°
  page: () => e.value, // è·¯ç”±é¡µé¢
  transition: Transition.noTransition, // è·³è½¬è·¯ç”±åŠ¨ç”»
  middlewares: \[AuthMiddleware()\], // è·¯ç”±ä¸­é—´ä»¶
)).toList();

final List<GetPage> routes = \[
  GetPage(name: '/login', page: () => const Login()),
  GetPage(name: '/register', page: () => const Register()),
  ...patchRoute,
\];

// è·¯ç”±æ‹¦æˆª
class AuthMiddleware extends GetMiddleware {
  @override
  RouteSettings? redirect(String? route) {
    return Common.isLogin() ? null : const RouteSettings(name: '/login');
  }
}

### flutter3+bitsdojo\_windowè‡ªå®šä¹‰æ— è¾¹æ¡†çª—å£

Widget build(BuildContext context){
  return Row(
    children: \[
      Container(
        child: widget.leading,
      ),
      Visibility(
        visible: widget.minimizable,
        child: MouseRegion(
          cursor: SystemMouseCursors.click,
          child: SizedBox(
            width: 32.0,
            height: 36.0,
            child: MinimizeWindowButton(colors: buttonColors, onPressed: handleMinimize,),
          )
        ),
      ),
      Visibility(
        visible: widget.maximizable,
        child: MouseRegion(
          cursor: SystemMouseCursors.click,
          child: SizedBox(
            width: 32.0,
            height: 36.0,
            child: isMaximized ?
            RestoreWindowButton(colors: buttonColors, onPressed: handleMaxRestore,)
            :
            MaximizeWindowButton(colors: buttonColors, onPressed: handleMaxRestore,),
          ),
        ),
      ),
      Visibility(
        visible: widget.closable,
        child: MouseRegion(
          cursor: SystemMouseCursors.click,
          child: SizedBox(
            width: 32.0,
            height: 36.0,
            child: CloseWindowButton(colors: closeButtonColors, onPressed: handleExit,),
          ),
        ),
      ),
      Container(
        child: widget.trailing,
      ),
    \],
  );
}

// ç›‘å¬çª—å£å°ºå¯¸å˜åŒ–
@override
void didChangeMetrics() {
  super.didChangeMetrics();
  WidgetsBinding.instance.addPostFrameCallback((\_) {
    setState(() {
      isMaximized \= appWindow.isMaximized;
    });
  });
}

// æœ€å°åŒ–
void handleMinimize() {
  appWindow.minimize();
}
// è®¾ç½®æœ€å¤§åŒ–/æ¢å¤
void handleMaxRestore() {
  appWindow.maximizeOrRestore();
}
// å…³é—­
void handleExit() {
  showDialog(
    context: context,
    builder: (context) {
      return AlertDialog(
        content: const Text('æ˜¯å¦æœ€å°åŒ–è‡³æ‰˜ç›˜ï¼Œä¸é€€å‡ºç¨‹åºï¼Ÿ', style: TextStyle(fontSize: 16.0),),
        backgroundColor: Colors.white,
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(5.0)),
        elevation: 3.0,
        actionsPadding: const EdgeInsets.all(15.0),
        actions: \[
          TextButton(
            onPressed: () {
              Get.back();
              appWindow.hide();
            },
            child: const Text('æœ€å°åŒ–è‡³æ‰˜ç›˜', style: TextStyle(color: Colors.blue),)
          ),
          TextButton(
            onPressed: () {
              Get.back();
              appWindow.close();
            },
            child: const Text('é€€å‡ºç³»ç»Ÿ', style: TextStyle(color: Colors.red),)
          ),
        \],
      );
    }
  );
}

### flutter3å°è§†é¢‘æ¨¡å—

ä½¿ç”¨media\_kitè§†é¢‘å¥—ä»¶å®ç°ç±»ä¼¼æŠ–éŸ³çŸ­è§†é¢‘ï¼Œæ”¯æŒç‚¹å‡»æš‚åœ/æ’­æ”¾ã€ä¸Šä¸‹æ»‘åŠ¨åˆ‡æ¢åŠŸèƒ½ã€‚

åº•éƒ¨miniæ’­æ”¾è¿›åº¦æ¡æ”¯æŒæ‹–æ‹½ã€ç‚¹å‡»æ’­æ”¾ä½ç½®åŠŸèƒ½ã€‚

// miniæ’­æ”¾è¿›åº¦æ¡
Positioned(
  bottom: 10.0,
  left: 6.0,
  right: 6.0,
  child: Visibility(
    visible: videoIndex \== index && position > Duration.zero,
    child: Listener(
      child: SliderTheme(
        data: SliderThemeData(
          trackHeight: sliderDraging ? 6.0 : 2.0,
          thumbShape: RoundSliderThumbShape(enabledThumbRadius: 4.0), // è°ƒæ•´æ»‘å—çš„å¤§å°
          // trackShape: RectangularSliderTrackShape(), // ä½¿ç”¨çŸ©å½¢è½¨é“å½¢çŠ¶
          overlayShape: RoundSliderOverlayShape(overlayRadius: 0), // å»æ‰Slideré»˜è®¤ä¸Šä¸‹è¾¹è·é—´éš™
          inactiveTrackColor: Colors.white24, // è®¾ç½®éæ´»åŠ¨è¿›åº¦æ¡çš„é¢œè‰²
          activeTrackColor: Colors.white, // è®¾ç½®æ´»åŠ¨è¿›åº¦æ¡çš„é¢œè‰²
          thumbColor: Colors.white, // è®¾ç½®æ»‘å—çš„é¢œè‰²
          overlayColor: Colors.transparent, // è®¾ç½®æ»‘å—è¦†ç›–å±‚çš„é¢œè‰²
        ),
        child: Slider(
          value: sliderValue,
          onChanged: (value) async {
            // debugPrint('å½“å‰è§†é¢‘æ’­æ”¾æ—¶é—´$value');
            setState(() {
              sliderValue \= value;
            });
            // è·³è½¬æ’­æ”¾æ—¶é—´
            await player.seek(duration \* value.clamp(0.0, 1.0));
          },
          onChangeEnd: (value) async {
            setState(() {
              sliderDraging \= false;
            });
            // ç»§ç»­æ’­æ”¾
            if(!player.state.playing) {
              await player.play();
            }
          },
        ),
      ),
      onPointerMove: (e) {
        setState(() {
          sliderDraging \= true;
        });
      },
    ),
  ),
)

### flutter3èŠå¤©æ¨¡æ¿

èŠå¤©ç¼–è¾‘æ¡†æ”¯æŒå¤šè¡Œæ–‡æœ¬ã€è¶…è¿‡é«˜åº¦å‡ºç°æ»šåŠ¨æ¡ã€å…‰æ ‡ä½ç½®æ’å…¥emoè¡¨æƒ…ï¼Œæ”¯æŒé“¾æ¥ã€‚

ä¼˜åŒ–äº†ç±»ä¼¼å¾®ä¿¡**æŒ‰ä½è¯´è¯ã€å·¦æ»‘å–æ¶ˆã€å³æ»‘è½¬æ–‡å­—**åŠŸèƒ½ã€‚

ç»¼ä¸Šå°±æ˜¯flutter3å®æˆ˜ä»¿å¾®ä¿¡å®¢æˆ·ç«¯èŠå¤©ç³»ç»Ÿçš„ä¸€äº›çŸ¥è¯†åˆ†äº«ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼ğŸ’ª

**é™„ä¸Šå‡ ä¸ªæœ€æ–°å®ä¾‹é¡¹ç›®**

> [æœ€æ–°ç‰ˆFlutter3.32+Dart3.8è·¨å¹³å°ä»¿å¾®ä¿¡appèŠå¤©ç•Œé¢|æœ‹å‹åœˆ](https://www.cnblogs.com/xiaoyan2017/p/18978176)
> 
> [æœ€æ–°ç‰ˆuniapp+vue3+uv-uiè·¨ä¸‰ç«¯çŸ­è§†é¢‘+ç›´æ’­+èŠå¤©ã€H5+å°ç¨‹åº+Appç«¯ã€‘](https://www.cnblogs.com/xiaoyan2017/p/18962574)
> 
> [Uniapp-DeepSeekè·¨ä¸‰ç«¯AIåŠ©æ‰‹|uniapp+vue3+deepseek-v3æµå¼aièŠå¤©æ¨¡æ¿](https://www.cnblogs.com/xiaoyan2017/p/18853514)
> 
> [vue3-webseekç½‘é¡µç‰ˆAIé—®ç­”|Vite6+DeepSeek+Arcoæµå¼aièŠå¤©æ‰“å­—æ•ˆæœ](https://www.cnblogs.com/xiaoyan2017/p/18795796)
> 
> [Electron35-DeepSeekæ¡Œé¢ç«¯AIç³»ç»Ÿ|vue3.5+electron+arcoå®¢æˆ·ç«¯aiæ¨¡æ¿](https://www.cnblogs.com/xiaoyan2017/p/18830611)
> 
> [flutter3-dymallä»¿æŠ–éŸ³ç›´æ’­å•†åŸ|Flutter3.27çŸ­è§†é¢‘+ç›´æ’­+èŠå¤©Appå®ä¾‹](https://www.cnblogs.com/xiaoyan2017/p/18700875)
> 
> [tauri2.0-adminæ¡Œé¢ç«¯åå°ç³»ç»Ÿ|Tauri2+Vite5+ElementPlusç®¡ç†åå°EXEç¨‹åº](https://www.cnblogs.com/xiaoyan2017/p/18467237)
> 
> [Tauri2.0+Vite5èŠå¤©å®¤|vue3+tauri2+element-plusä»¿å¾®ä¿¡|taurièŠå¤©åº”ç”¨](https://www.cnblogs.com/xiaoyan2017/p/18437155)
> 
> [Electron32-ViteOSæ¡Œé¢ç‰ˆosç³»ç»Ÿ|vue3+electron+arcoå®¢æˆ·ç«¯OSç®¡ç†æ¨¡æ¿](https://www.cnblogs.com/xiaoyan2017/p/18396212)
> 
> [uniapp+vue3èŠå¤©å®¤|uni-app+vite4+uv-uiè·¨ç«¯ä»¿å¾®ä¿¡appèŠå¤©è¯­éŸ³/æœ‹å‹åœˆ](https://www.cnblogs.com/xiaoyan2017/p/18165578)

æœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œæœªç»åšä¸»å…è®¸ä¸å¾—è½¬è½½ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµ QQï¼ˆ282310962ï¼‰ wxï¼ˆxy190310ï¼‰