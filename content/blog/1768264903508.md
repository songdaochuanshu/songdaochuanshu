---
layout: post
title: '并发，并行与异步'
date: "2026-01-13T00:41:43Z"
---
并发，并行与异步
========

在我上一篇题为《为什么异步在IO操作下才有意义》的文章发布后，收到了很多同学的反馈与探讨。在深入交流后，我发现一个普遍的困惑点浮现出来，其根源在于混淆了“并发”、“并行”与“异步”，特别是下意识地将异步等同于利用多核CPU进行并行处理。

为了彻底澄清这些基础但至关重要的概念，我们深入剖析理论原则并且同时抛开我们日常使用的现代框架（如.NET）中的具体实现（这往往会误导），以辨析并发（Concurrency）、**并行（parallel）和异步（Asynchronous）**这三个核心概念。

核心概念解析
------

### 什么是并发（Concurrency）？

![](https://static.xbaby.xyz/blog/concurrency.jpg)

*   定义： 并发是指一个系统有能力在一段时间内处理多个任务。这些任务的执行在宏观上是重叠的，但在微观上是通过任务的交替执行实现的。
    
*   精髓： Go语言之父 Rob Pike 对此有非常精辟的论述：“Concurrency is about dealing with lots of things at once.”（并发是关于处理多件事情的能力）。这里的关键词是“dealing with”（处理），它强调的是一种程序结构，使其能够应对和管理多个任务流。
    
*   举例说明： 一个餐厅突然来了三个客人，但餐厅只有一个服务员。从服务员的角度来看，他需要同时服务这些客人。当然这是宏观上的同时，因为服务员执行事件的速度是在是太慢了。
    

### 什么是并行（parallel）？

![](https://static.xbaby.xyz/blog/%E5%B9%B6%E8%A1%8C.jpg)

*   定义： 并行是指系统能够在同一物理时刻真正地同时执行多个任务。
    
*   前提： 并行必须依赖于多核CPU。在多核处理器上，每个核心可以在完全相同的时刻独立地执行一个不同的任务指令，实现物理意义上的“同时”。
    
*   精髓： 同样引用 Rob Pike 的论述进行对比：“parallel is about doing lots of things at once.”（并行是关于完成多件事情的能力）。这里的关键词是“doing”（完成），强调的是物理上的同时执行，是真正意义上的“一起做”。
    
*   举例： 还是餐厅的例子，一个餐厅突然来了三个客人，餐厅这次有3个服务员，每个服务员正好服务一位客人。这就是并行。
    

### 什么是异步（Asynchronous）？

![](https://static.xbaby.xyz/blog/async.jpg)

*   定义： 异步是一种编程模型或模式，其核心思想是非阻塞（Non-blocking）。它描述的是一种调用行为，尤其在处理耗时的I/O操作时（如网络请求、数据库查询、文件读写）显得至关重要。
    
*   机制： 当一个线程发起一个异步I/O操作时（例如，在.NET中调用 await client.GetStringAsync(...)），它并不会原地阻塞等待。实际发生的过程是：
    

1.  该线程向操作系统发出I/O请求，然后立即返回。
2.  这个宝贵的线程被释放回线程池，可以立即去处理其他的工作，比如响应另一个用户的请求。CPU完全没有被闲置。
3.  I/O操作由硬件（如网卡、磁盘控制器）独立完成。
4.  当操作完成后，硬件会向CPU发送一个中断信号。
5.  操作系统捕获这个中断，并将一个完成事件排入队列。
6.  线程池中的某个可用线程会取出这个事件，并从之前 await 的地方继续执行后续代码。

*   目的： 异步的主要目标是避免在等待I/O密集型操作时浪费昂贵的线程资源，从而用少量的线程实现极高的系统吞吐量和可伸缩性（例如，处理成千上万的并发网络连接）。它关注的是调用方的线程是否被阻塞，而非任务是否在多核上同时运行。
    
*   误区澄清： “Asynchronous is not Concurrency.”（异步不是并发）。这是一个极其重要的区分。异步是一种允许代码以非线性（多任务角度）顺序正确执行的属性，它能够用来实现并发，但其本身并非并发。异步可以在单线程上实现（一个线程发起请求后去做别的事），而并行则必须是多个线程在多个CPU核心上同时执行。
    
*   举例： 还是餐厅的例子，一个餐厅同时来了三个客人，三个服务员每人一个客人。服务员在下完单后有两个选择：
    

1.  同步：在后厨门口傻等，直到出餐后送到客人桌上。
2.  异步：下单后马上去接待其他客人或者处理其他事情，等后厨对讲机里通知菜烧好了才去取餐送餐。

_！！！这里请大家注意 ！！！：_

> 异步模型我们强调的是这个服务员被释放出来了，他更加灵活的调度，他可以做更多的事来提高餐厅的运行效率。至于后厨做菜这件事是一个厨师来做，还是十个厨师来做那是如何更快的做菜的问题。这跟异步还是同步没有关系。同步模式下做菜这件事也可以请十个厨师来做而加快出餐的速度。

三者的关系与区别
--------

为了更直观地理解它们，我们可以通过一个表格来对比：

维度

并发 (Concurrency)

并行 (parallel)

异步 (Asynchronous)

**核心思想**

交替执行（逻辑上同时）

同时执行（物理上同时）

非阻塞与回调/续延

**CPU要求**

单核即可

必须多核

与核心数无直接关系

**处理方式**

OS调度器时间分片

多核物理执行

发起I/O后释放线程

**解决问题**

应对逻辑上需要同时处理多任务的场景

提升计算密集型任务的执行效率

避免I/O密集型任务阻塞，提升系统吞吐量

总结
--

总而言之，并发、并行和异步是从不同维度描述任务执行方式的概念。并发是一种程序设计结构，使其能够逻辑上处理多个任务；并行是利用硬件（多核CPU）在物理上同时执行多个任务的计算能力；而异步是一种编程范式，通过非阻塞IO调用来极致地提高系统资源的利用率。

关注我的公众号一起玩转技术
-------------

![](https://static.xbaby.xyz/qrcode.jpg)

QQ群：1022985150 VX：kklldog 一起探讨学习.NET技术  
作者：[Agile.Zhou(kklldog)](http://www.cnblogs.com/kklldog)  
出处：[http://www.cnblogs.com/kklldog/](http://www.cnblogs.com/kklldog/)  
本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。