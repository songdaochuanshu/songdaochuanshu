---
layout: post
title: 'ã€æ¸²æŸ“ç®¡çº¿ã€‘UnityURP[æ¸²æŸ“é¡ºåº]ä¸[å±‚çº§]'
date: "2025-08-31T00:43:37Z"
---
ã€æ¸²æŸ“ç®¡çº¿ã€‘UnityURP\[æ¸²æŸ“é¡ºåº\]ä¸\[å±‚çº§\]
=============================

![ã€æ¸²æŸ“ç®¡çº¿ã€‘UnityURP[æ¸²æŸ“é¡ºåº]ä¸[å±‚çº§]](https://img2024.cnblogs.com/blog/3685400/202508/3685400-20250830114352886-1396998834.png) Unityæ¸²æŸ“ç®¡çº¿æ¼”è¿›ï¼šä»Built-inåˆ°URPçš„æ¸²æŸ“é¡ºåºå¯¹æ¯” Unityæ¸²æŸ“ç³»ç»Ÿç»å†äº†Built-inç®¡çº¿åˆ°å¯ç¼–ç¨‹æ¸²æŸ“ç®¡çº¿(SRP)çš„æ¼”è¿›ã€‚Built-inç®¡çº¿é€šè¿‡æ‘„åƒæœºæ·±åº¦ã€æè´¨RenderQueueå’Œç‰©ä½“è·ç¦»å†³å®šæ¸²æŸ“é¡ºåºï¼Œè€ŒURP(å‰èº«LWRP)åœ¨ç»§æ‰¿è¿™äº›ç‰¹æ€§çš„åŒæ—¶ï¼Œå¼•å…¥äº†Priorityå±æ€§ã€SortingLayeråˆ†å±‚ç­‰æ›´çµæ´»çš„æ§åˆ¶æœºåˆ¶ã€‚URPå°†æ¸²æŸ“é˜Ÿåˆ—åˆ†ä¸ºä¸é€æ˜(0-2500)å’Œé€æ˜(2501-5000)åŒºé—´ï¼Œæ”¯æŒå¤šæ‘„åƒæœºåä½œ(base-overlayæ¨¡å¼)å’ŒåŠ¨æ€å‚æ•°è°ƒæ•´ï¼Œé€šè¿‡ç²¾ç»†æ§åˆ¶æ¸²æŸ“é¡ºåº

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

**ä»‹ç»ä¸å†å²å‘å±•**
===========

Unityçš„æ¸²æŸ“é¡ºåºç³»ç»Ÿç»å†äº†ä»Built-inç®¡çº¿åˆ°å¯ç¼–ç¨‹æ¸²æŸ“ç®¡çº¿(SRP)çš„æ¼”è¿›ã€‚åœ¨ä¼ ç»ŸBuilt-inç®¡çº¿ä¸­ï¼Œæ¸²æŸ“é¡ºåºä¸»è¦ç”±æ‘„åƒæœºæ·±åº¦å’Œæè´¨RenderQueueå†³å®šï¼Œè€ŒURP(Universal Render Pipeline)ä½œä¸ºSRPçš„ä¸€ç§å®ç°ï¼Œæä¾›äº†æ›´çµæ´»å¯æ§çš„æ¸²æŸ“é¡ºåºç®¡ç†æœºåˆ¶ã€‚

URPçš„å‰èº«æ˜¯LWRP(è½»é‡çº§æ¸²æŸ“ç®¡çº¿)ï¼Œåœ¨Unity 2019ä¸­æˆä¸ºé»˜è®¤ç®¡çº¿å¹¶æ›´åä¸ºURPï¼Œå®ƒæ›¿ä»£äº†åŸæ¥çš„Built-inç®¡çº¿ï¼Œå¼•å…¥äº†å…¨æ–°çš„æ¸²æŸ“æ¶æ„ã€‚URPçš„æ¸²æŸ“ä¸»å…¥å£åœ¨UniversalRenderPipelineç±»ï¼Œå®ƒç»§æ‰¿è‡ªRenderPipelineï¼Œæ˜¯æ•´ä¸ªæ¸²æŸ“æµç¨‹çš„å…³é”®ç±».

**å†…ç½®ç®¡çº¿ä¸URPæ¸²æŸ“é¡ºåºå¯¹æ¯”**
==================

**å†…ç½®ç®¡çº¿æ¸²æŸ“é¡ºåº**
------------

### å†…ç½®ç®¡çº¿ä¸»è¦ä¾èµ–ä»¥ä¸‹å› ç´ å†³å®šæ¸²æŸ“é¡ºåºï¼š

*   æ‘„åƒæœºDepthå€¼ï¼šæ·±åº¦å°çš„å…ˆæ¸²æŸ“
*   æè´¨RenderQueueï¼šæ•°å€¼å°çš„å…ˆæ¸²æŸ“
*   ç‰©ä½“ä¸æ‘„åƒæœºçš„è·ç¦»ï¼šè¿‘çš„ç‰©ä½“å…ˆæ¸²æŸ“(ä¸é€æ˜ç‰©ä½“)æˆ–åæ¸²æŸ“(é€æ˜ç‰©ä½“)

### å†…ç½®ç®¡çº¿å°†æ¸²æŸ“é˜Ÿåˆ—åˆ†ä¸ºï¼š

*   Opaqueé˜Ÿåˆ—(RenderQueue<2500)ï¼šä¸é€æ˜ç‰©ä½“
*   Transparenté˜Ÿåˆ—(RenderQueueâ‰¥2500)ï¼šé€æ˜ç‰©ä½“

**URPæ¸²æŸ“é¡ºåº**
-----------

URPåœ¨ç»§æ‰¿å†…ç½®ç®¡çº¿éƒ¨åˆ†ç‰¹æ€§çš„åŸºç¡€ä¸Šï¼Œå¼•å…¥äº†æ›´å¤šæ§åˆ¶ç»´åº¦ï¼š

### â€Œ**åŸºç¡€æ’åºè§„åˆ™**â€Œï¼š

*   Camera Depthä»ä¸ºæœ€é«˜ä¼˜å…ˆçº§
*   æ–°å¢Priorityå±æ€§æ§åˆ¶æè´¨æ¸²æŸ“é¡ºåº(å€¼è¶Šå°æ¸²æŸ“è¶Šæ™š)
*   æ”¯æŒåŸºäºSorting Layerå’ŒOrder in Layerçš„åˆ†å±‚æ¸²æŸ“

### â€Œ**å¤šæ‘„åƒæœºå…±å­˜æœºåˆ¶**â€Œï¼š

*   é‡‡ç”¨base-overlayæ¨¡å¼ï¼Œç”±baseæ‘„åƒæœºä¸å¤šä¸ªoverlayæ‘„åƒæœºç»„æˆ
*   overlayæ‘„åƒæœºæŒ‰Stack Listä¸­çš„é¡ºåºç»˜åˆ¶

### â€Œ**æ¸²æŸ“é˜Ÿåˆ—å¤„ç†**â€Œï¼š

*   å½“RenderQueueåˆ†åˆ«åœ¨\[0-2500\]å’Œ\[2501-5000\]æ—¶ï¼ŒæŒ‰RenderQueueç»˜åˆ¶ï¼Œæ— è§†SortingLayer/OrderInLayer
    
    *   Unity Shaderä¸­çš„æ¸²æŸ“é¡ºåºå±‚ä¸»è¦é€šè¿‡æ¸²æŸ“é˜Ÿåˆ—ï¼ˆRenderQueueï¼‰å®ç°ï¼Œæ¯ä¸ªé˜Ÿåˆ—å¯¹åº”ä¸€ä¸ªç´¢å¼•å·æ¥æ§åˆ¶ç‰©ä½“çš„æ¸²æŸ“ä¼˜å…ˆçº§ï¼Œç´¢å¼•å€¼è¶Šå°è¶Šä¼˜å…ˆæ¸²æŸ“ã€‚â€Œ
    
    SubShaderä¸­Tags{ â€œQueueâ€ = â€œ**Transparent**â€}
    
    ä»¥ä¸‹æ˜¯Unityä¸­ä¸»è¦çš„æ¸²æŸ“é¡ºåºå±‚åŠå…¶ç´¢å¼•å·åˆ—è¡¨ï¼š
    
    *   Background: 1000ï¼ˆæœ€æ—©æ¸²æŸ“ï¼Œç”¨äºå¤©ç©ºç›’ç­‰èƒŒæ™¯ç‰©ä½“ï¼‰â€Œ
    *   Geometry: 2000ï¼ˆç”¨äºå¤§å¤šæ•°ä¸é€æ˜ç‰©ä½“ï¼Œå¦‚é»˜è®¤ç€è‰²å™¨ï¼‰â€Œ
    *   AlphaTest: 2450ï¼ˆç”¨äºéœ€è¦Alphaæµ‹è¯•çš„ç‰©ä½“ï¼Œå¦‚é€æ˜è£å‰ªæ¤è¢«ï¼‰â€Œ
    *   Transparent: 3000ï¼ˆç”¨äºåŠé€æ˜ç‰©ä½“ï¼Œå¦‚ç²’å­æˆ–é€æ˜æè´¨ï¼‰â€Œ
    *   Overlay: 4000ï¼ˆæœ€åæ¸²æŸ“ï¼Œç”¨äºå±å¹•ç‰¹æ•ˆå¦‚å…‰æ™•æˆ–GUIï¼‰â€Œ
    
    è¿™äº›ç´¢å¼•å€¼çš„é¡ºåºç¡®ä¿äº†æ¸²æŸ“æ•ˆç‡ï¼Œå…¶ä¸­ä¸é€æ˜é˜Ÿåˆ—ï¼ˆå€¼ < 2500ï¼‰é€šå¸¸ä»å‰å‘åæ¸²æŸ“ï¼Œè€ŒåŠé€æ˜é˜Ÿåˆ—ï¼ˆå€¼ > 2500ï¼‰ä»åå‘å‰æ¸²æŸ“ä»¥é¿å…è§†è§‰é”™è¯¯ã€‚
    
    â€œTransparent+1â€ä½¿ç”¨+1æ–¹å¼æ˜ç¡®è¡¨ç¤ºå±‚çº§è¢«ä¼˜å…ˆæ¸²æŸ“ã€‚
    
*   åŒé˜Ÿåˆ—èŒƒå›´å†…æ—¶ï¼ŒSortingLayerå’ŒOrderInLayerç”Ÿæ•ˆ
    

**æ¸²æŸ“é¡ºåºè§£å†³çš„é—®é¢˜**
=============

â€Œ**è§†è§‰æ­£ç¡®æ€§**â€Œ
-----------

*   ç¡®ä¿é€æ˜ç‰©ä½“åœ¨ä¸é€æ˜ç‰©ä½“ä¹‹åæ¸²æŸ“ï¼Œå®ç°æ­£ç¡®çš„æ··åˆæ•ˆæœ

â€Œ**æ€§èƒ½ä¼˜åŒ–**â€Œ
----------

*   é€šè¿‡åˆç†æ’åºå‡å°‘overdraw(è¿‡åº¦ç»˜åˆ¶)ï¼Œæé«˜æ¸²æŸ“æ•ˆç‡

â€Œ**è‰ºæœ¯æ§åˆ¶**â€Œ
----------

*   å…è®¸ç¾æœ¯å¸ˆé€šè¿‡å±‚çº§è®¾ç½®æ§åˆ¶åœºæ™¯å…ƒç´ çš„æ˜¾ç¤ºä¼˜å…ˆçº§

â€Œ**å¤šæ‘„åƒæœºåä½œ**â€Œ
------------

*   æ”¯æŒUIæ‘„åƒæœºä¸åœºæ™¯æ‘„åƒæœºçš„åˆ†å±‚æ¸²æŸ“

â€Œ**å¹³å°é€‚é…**â€Œ
----------

*   åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå¯é€šè¿‡è°ƒæ•´æ¸²æŸ“é¡ºåºä¼˜åŒ–æ€§èƒ½

**URPæ¸²æŸ“é¡ºåºçš„ä½¿ç”¨æ–¹æ³•**
================

**åŸºç¡€è®¾ç½®**
--------

*   â€Œ**é€šè¿‡æè´¨Priorityå±æ€§**â€Œï¼š
    
        csharp
        material.renderQueue = 2001;// è®¾ç½®æ¸²æŸ“é˜Ÿåˆ—
        material.priority = -1;// è®¾ç½®ä¼˜å…ˆçº§(URPç‰¹æœ‰)
        
    
    å€¼è¶Šå°æ¸²æŸ“è¶Šæ™š
    
*   â€Œ**é€šè¿‡Sorting Layerå’ŒOrder in Layer**â€Œï¼š
    
    *   åœ¨Tags and Layersä¸­å®šä¹‰Sorting Layer
    *   è®¾ç½®Rendererçš„Sorting Layerå’ŒOrder in Layer

**é«˜çº§æ§åˆ¶**
--------

*   â€Œ**ä½¿ç”¨RenderObjectsç‰¹æ€§**â€Œï¼š
    
    åœ¨URP Assetä¸­æ·»åŠ Renderer Featureï¼Œé€šè¿‡Filter Settingsæ§åˆ¶ç‰¹å®šå¯¹è±¡çš„æ¸²æŸ“é¡ºåº
    
*   â€Œ**å¤šPassæ¸²æŸ“**â€Œï¼š
    
    *   ä½¿ç”¨UniversalForward Passè¿›è¡Œä¸»å…‰ç…§æ¸²æŸ“
    *   ä½¿ç”¨SRPDefaultUnlit Passè¿›è¡Œæ— å…‰ç…§æ¸²æŸ“
*   â€Œ**åŠ¨æ€ä¿®æ”¹URPè®¾ç½®**â€Œï¼š
    
        csharp
        var pipelineAsset = GraphicsSettings.renderPipelineAsset as UniversalRenderPipelineAsset;
        pipelineAsset.supportsHDR = false;
        pipelineAsset.msaaSampleCount = 4;
        
    
    å¯åŠ¨æ€è°ƒæ•´ç®¡çº¿å‚æ•°å½±å“æ•´ä½“æ¸²æŸ“é¡ºåº
    

**é€æ˜ç‰©ä½“å¤„ç†**
----------

*   â€Œ**ç€è‰²å™¨ä¸­è®¾ç½®**â€Œï¼š
    
        shader
        Tags { "RenderType"="Transparent" "Queue"="Transparent" }
        Blend SrcAlpha OneMinusSrcAlpha
        
    
    ç¡®ä¿é€æ˜ç‰©ä½“æ­£ç¡®æ··åˆ
    
*   â€Œ**é¿å…æ·±åº¦å†²çª**â€Œï¼š
    
    é€šè¿‡è°ƒæ•´ç‰©ä½“ä½ç½®æˆ–ä½¿ç”¨Offsetå› å­è§£å†³é€æ˜ç‰©ä½“é—´çš„æ·±åº¦é—®é¢˜
    

URPçš„æ¸²æŸ“é¡ºåºç³»ç»Ÿç›¸æ¯”å†…ç½®ç®¡çº¿æä¾›äº†æ›´ç²¾ç»†çš„æ§åˆ¶èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚çµæ´»è°ƒæ•´æ¸²æŸ“é¡ºåºï¼Œåœ¨ä¿è¯è§†è§‰æ•ˆæœçš„åŒæ—¶ä¼˜åŒ–æ€§èƒ½

* * *

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

ï¼ˆæ¬¢è¿_ç‚¹èµç•™è¨€_æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰