---
layout: post
title: 'ä½¿ç”¨FastApiæ„å»ºpythonåç«¯ï¼Œå¹¶éƒ¨ç½²åœ¨å…è´¹æœåŠ¡å™¨Render/Replitä¸Š'
date: "2025-08-21T00:39:25Z"
---
ä½¿ç”¨FastApiæ„å»ºpythonåç«¯ï¼Œå¹¶éƒ¨ç½²åœ¨å…è´¹æœåŠ¡å™¨Render/Replitä¸Š
===========================================

æœ¬æ–‡ä»…ä½œæœ¬äººåˆå­¦åç«¯æ•™ç¨‹ç¬”è®°ï¼Œå®ç°äº†ä½¿ç”¨pythonå†™ä¸€ä¸ªç®€å•çš„æŸ¥è¯¢ã€å¸¦å‚æ•°æŸ¥è¯¢ã€ä¸Šä¼ å›¾ç‰‡å¹¶è¿”å›å›¾ç‰‡å‚æ•°ã€æ¨¡æ‹Ÿç™»å½•çš„apiã€‚å®ç°å¥½ä¹‹åå¯ä»¥åœ¨æœ¬åœ°æµ‹è¯•ï¼Œäº¦æˆ–éƒ¨ç½²åœ¨å…è´¹æœåŠ¡å™¨æ¯”å¦‚Render/Replitã€‚  
æœ¬æ–‡å…± 940 å­—ï¼Œé˜…è¯»æ—¶é—´å¤§çº¦5åˆ†é’Ÿï¼Œä¸Šæ‰‹æ“ä½œæ—¶é—´çº¦30-60åˆ†é’Ÿã€‚  
æœ¬æ–‡çš„æ’°å†™ç¦»ä¸å¼€ChatGPT 4oçš„å¸®åŠ©ï¼Œæˆ‘ä¹Ÿæ˜¯ä»0åç«¯åŸºç¡€å¼€å§‹çš„ã€‚

1.ä½¿ç”¨FastApiç¼–å†™api
================

ğŸš€ ä¸ºä»€ä¹ˆç”¨ FastAPI æ›´åˆé€‚ï¼Ÿ

    å†™æ¥å£æ›´å¿«ï¼Œæ›´å¼ºç±»å‹ï¼Œæ›´ç°ä»£åŒ–
    
    æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€é¢å¤–å·¥å…·
    
    æ€§èƒ½è¶…é«˜ï¼Œç”Ÿäº§çº§åˆ«éƒ¨ç½²æ²¡å‹åŠ›
    
    æœªæ¥ä½ è¦å¯¹æ¥å‰ç«¯ã€ç§»åŠ¨ç«¯ã€åˆ«çš„ç³»ç»Ÿï¼Œç›´æ¥/docs å°±èƒ½ç”¨ï¼
    

é¦–å…ˆæˆ‘ä»¬å…ˆç”¨FastApiå†™

1.  æœ€ç®€å•çš„æŸ¥è¯¢ï¼Œä¸å¸¦ä»»ä½•å‚æ•°ã€‚æ¯”å¦‚get-timeï¼Œå‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿”å›æœåŠ¡å™¨çš„æ—¶é—´ã€‚
2.  å¸¦å‚æ•°çš„æŸ¥è¯¢ï¼Œå¸¦ä¸€ä¸ªå‚æ•°ä¼ å…¥ã€‚æ¯”å¦‚get-temperatureï¼Œéœ€è¦ä¼ å…¥cityå‚æ•°ã€‚
3.  å¸¦æœ‰é™„ä»¶çš„postæäº¤ï¼Œæ¯”å¦‚get-image-infoï¼Œéœ€è¦ä¼ å…¥æœ¬åœ°çš„å›¾ç‰‡ï¼Œè¿”å›æœåŠ¡å™¨å¤„ç†åçš„æ•°æ®ã€‚
4.  æ¨¡æ‹Ÿç™»å½•ï¼Œæ¯”å¦‚loginï¼Œè¾“å…¥ç”¨æˆ·åå¯†ç ï¼Œè¿”å›ç™»é™†çš„ä¿¡æ¯ã€‚

    from fastapi import FastAPI, Query, File, UploadFile, Form, HTTPException
    from fastapi.middleware.cors import CORSMiddleware
    import random
    from datetime import datetime
    from PIL import Image
    import io
    from pydantic import BaseModel
    import uvicorn
    
    app = FastAPI()
    
    if __name__ == '__main__':
        uvicorn.run("main:app", host="0.0.0.0", port=5000, reload=True)
    
    # å¯é€‰ï¼šå…è®¸è·¨åŸŸï¼ˆå‰ç«¯è®¿é—®ç”¨ï¼‰
    app.add_middleware(
        CORSMiddleware,
        allow_origins=["*"],  # æˆ–æŒ‡å®šä½ çš„å‰ç«¯åŸŸå
        allow_credentials=True,
        allow_methods=["*"],
        allow_headers=["*"],
    )
    
    @app.get("/get-time")
    def get_temperature():
        timestamp = datetime.now().isoformat()
        return{
            "timestamp": timestamp
        }
    
    @app.get("/get-temperature")
    def get_temperature(city: str = Query(..., description="åŸå¸‚åç§°")):
        temperature = round(random.uniform(32, 36.5), 2)
        timestamp = datetime.now().isoformat()
        return{
            "city": city,
            "temperature": temperature,
            "timestamp": timestamp
        }
    
    @app.post("/get-image-info")
    async def get_image_info(file: UploadFile = File(...)):
        contents = await file.read()
    
        try:
            # ä½¿ç”¨ PIL è§£æå›¾ç‰‡å°ºå¯¸
            image = Image.open(io.BytesIO(contents))
            width, height = image.size
    
            return {
                "filename": file.filename,
                "width": width,
                "height": height
            }
        except Exception as e:
            return {
                "error": "æ— æ³•è¯†åˆ«å›¾ç‰‡",
                "detail": str(e)
            }
        
    
        
    # æ¨¡æ‹Ÿæ•°æ®åº“ä¸­çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆå®é™…åº”æŸ¥æ•°æ®åº“ï¼‰
    fake_user_db = {
        "vincent": {
            "username": "vincent",
            "password": "123456",  # å®é™…åº”åŠ å¯†å­˜å‚¨
            "full_name": "Vincent Wang"
        }
    }
    
    # ç™»å½•è¿”å›æ¨¡å‹
    class LoginResponse(BaseModel):
        message: str
        token: str = None
        full_name: str = None
    
    @app.post("/login", response_model=LoginResponse)
    async def login(username: str = Form(...), password: str = Form(...)):
        user = fake_user_db.get(username)
        if not user or user["password"] != password:
            raise HTTPException(status_code=401, detail="ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯")
    
        # æ¨¡æ‹Ÿç”Ÿæˆ tokenï¼ˆå®é™…åº”ç”¨ JWT ç­‰ï¼‰
        token = f"token-{username}"
    
        return {
            "message": "ç™»å½•æˆåŠŸ",
            "token": token,
            "full_name": user["full_name"]
        }
    

2\. ä¸Šä¼ ä»£ç åˆ°Github
===============

åœ¨Githubä¸Šæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œä¸Šä¼ åˆšæ‰çš„ä»£ç ã€‚  
![image](https://img2024.cnblogs.com/blog/298986/202508/298986-20250820205744363-427933813.png)

3.  æ³¨å†Œä½¿ç”¨replitå…è´¹æœåŠ¡å™¨  
    ç™»å½•https://replit.com/æ³¨å†Œè´¦å·ï¼Œç‚¹å‡»å·¦ä¸Šè§’Import code or design,  
    ![image](https://img2024.cnblogs.com/blog/298986/202508/298986-20250820205557184-1302289960.png)  
    é€‰æ‹©Githubæº  
    ![image](https://img2024.cnblogs.com/blog/298986/202508/298986-20250820205906871-1124374268.png)

![image](https://img2024.cnblogs.com/blog/298986/202508/298986-20250820205901608-1059713732.png)  
é€‰æ‹©åç‚¹å‡»å¯¼å…¥å³å¯ã€‚

![image](https://img2024.cnblogs.com/blog/298986/202508/298986-20250820210022892-554524500.png)

Replitä¼šè‡ªåŠ¨è¯†åˆ«å¯åŠ¨å‘½ä»¤ï¼Œç¡®è®¤ã€‚  
ç„¶åç‚¹å‡»æœ€ä¸Šé¢çš„Runå³å¯è¿è¡Œã€‚

4\. æµ‹è¯•API
=========

éƒ¨ç½²å¥½è¿è¡Œä¹‹åå³å¯æµ‹è¯•apiã€‚åœ¨åœ°å€æ è¾“å…¥api  
![image](https://img2024.cnblogs.com/blog/298986/202508/298986-20250820210320379-192532904.png)  
è¿™ä¸ªé¢æ¿æ— æ³•æµ‹è¯•æ¯”å¦‚ä¸Šä¼ é™„ä»¶çš„postï¼Œé‚£ä¹ˆå¯ä»¥ç”¨postmanæµ‹è¯•ã€‚  
è¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸€ä¸ªä¸´æ—¶çš„å¤–ç½‘åœ°å€ã€‚ç‚¹å‡»åœ°å€æ å·¦ä¾§çš„å¤åˆ¶åœ°å€æŒ‰é’®  
![image](https://img2024.cnblogs.com/blog/298986/202508/298986-20250820210456903-1635822516.png)  
åœ¨å¼¹å‡ºçš„ç•Œé¢copy devæ¥å£åœ°å€ã€‚

æ‰“å¼€ Postmanï¼Œæ–°å»ºä¸€ä¸ªè¯·æ±‚ã€‚  
è¯·æ±‚æ–¹æ³•é€‰æ‹©ï¼šPOST  
è¯·æ±‚ URL å¡«å†™ï¼š  
[https://9a094bdd-2c2b-4380-b7b5-b296f117cd48-00-3b1dquurmhoxv.janeway.replit.dev/](https://9a094bdd-2c2b-4380-b7b5-b296f117cd48-00-3b1dquurmhoxv.janeway.replit.dev/)

åˆ‡æ¢åˆ° Body æ ‡ç­¾é¡µï¼Œé€‰æ‹© form-dataã€‚  
åœ¨ä¸‹é¢çš„è¡¨æ ¼é‡Œæ·»åŠ ä¸€ä¸ªå‚æ•°ï¼š  
Keyï¼šfileï¼ˆå¿…é¡»å’Œä½  FastAPI é‡Œå‡½æ•°å‚æ•°åä¸€è‡´ï¼‰  
Typeï¼šé€‰æ‹© File  
Valueï¼šé€‰æ‹©ä¸€å¼ æœ¬åœ°å›¾ç‰‡æ–‡ä»¶  
![image](https://img2024.cnblogs.com/blog/298986/202508/298986-20250820211101273-149707166.png)

5\. render.comä¹Ÿå¯ä»¥
=================

[https://render.com/](https://render.com/)

![](https://images.cnblogs.com/cnblogs_com/hupo376787/1091131/t_414.png?a=1617704323336)  
  

ä½œè€…ï¼š[çŒ«å”Vincent](http://www.cnblogs.com/hupo376787/)

ã€€ã€€ã€€ã€€

æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚