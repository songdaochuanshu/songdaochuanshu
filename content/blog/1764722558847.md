---
layout: post
title: 'Apipost 自动化测试实战：用 IF 控制器实现“增删改查”依赖链'
date: "2025-12-03T00:42:38Z"
---
Apipost 自动化测试实战：用 IF 控制器实现“增删改查”依赖链
===================================

在日常的API测试中，我们经常遇到后一个请求依赖于前一个请求结果的情况。比如，删除一条数据前，必须先成功创建它；或者，当查询结果为空时，我们可能希望跳过后续的更新操作。在这种场景下，简单的线性测试脚本就无法满足需求了。  
Apipost的自动化测试功能提供了很便捷的条件判断功能，允许我们根据前一个请求的响应结果，动态地决定后续测试的执行流程。今天将通过一个完整的“公寓管理”（增删改查）案例，手把手带你掌握如何在Apipost中使用条件判断，构建一个自动化测试集。

**一、 测试场景与接口说明**

假设我们正在测试一个简单的公寓管理模块，包含四个核心接口：

1. 新增公寓 (Create) - \`POST /api/apartment-api/apartment\`

2. 查询公寓 (Read) - \`GET /api/apartment-api/apartment/{Id}\`

3. 编辑公寓 (Update) - \`PUT /api/apartment-api/apartment/{Id}\`

4. 删除公寓 (Delete) - \`DELETE /api/apartment-api/apartment/{Id}\`

自动化测试目标：创建一个测试集，按“增->查->改->删”的顺序执行。关键在于，每一步都依赖于上一步的成功执行。例如，只有成功创建公寓后，才能用返回的Id去查询、更新和删除

**二、 在ApiPost中配置条件判断**

步骤1：创建自动化测试集并添加接口

在Apipost-自动化测试中创建一个名为“公寓管理自动化测试”的测试集。

将上述四个接口及登录接口导入到测试集中。

步骤2：提取新增公寓接口的响应数据id，并为后续接口设置环境变量

步骤3：添加条件判断控制器

1、在新增公寓接口后面添加条件判断控制器

2、设置判断条件

{id} 是一个变量，它来自于前面新增公寓后返回的id 。

这个条件判断会检查 {id} 的值。

3、在控制器添加子步骤：将查询、编辑、删除公寓接口添加到控制器里面

解释：

4、{id} 不为空的执行情况展示

5、{id} 为空的执行情况展示

**三、总结**

‍以上就是IF控制器在自动化测试中的完整使用案例；将条件判断与环境变量、数据提取等功能结合，你就能在Apipost中设计出非常强大和智能的自动化测试套件，能够极大地提升API测试的质量和效率。