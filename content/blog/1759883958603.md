---
layout: post
title: '在 Windows10 下面将 neo4j-community-5.26.0 配置为系统服务'
date: "2025-10-08T00:39:18Z"
---
在 Windows10 下面将 neo4j-community-5.26.0 配置为系统服务
----------------------------------------------

📋 环境信息
-------

*   **操作系统**：Windows 10
*   **Neo4j 版本**：Community 5.26.0
*   **安装位置**：`d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0`
*   **下载来源**：[https://we-yun.com/doc/neo4j/5.26.0/neo4j-community-5.26.0-windows.zip](https://we-yun.com/doc/neo4j/5.26.0/neo4j-community-5.26.0-windows.zip)

* * *

✅ neo4j-community-5.26.0 服务配置结果
-------------------------------

    服务名称：    neo4j
    显示名称：    Neo4j Graph Database - neo4j
    状态:        Running (运行中)
    启动类型：    Automatic (自动)
    访问:        http://localhost:7474
    

* * *

📝 完整配置步骤
---------

### 步骤 1：下载并解压 Neo4j

1.  **下载 Neo4j 压缩包**
    
        下载地址：https://we-yun.com/doc/neo4j/5.26.0/neo4j-community-5.26.0-windows.zip
        文件大小：约 150-200 MB
        
    
2.  **解压到指定目录**
    
        解压位置：d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0
        
    
3.  **验证目录结构**
    
        neo4j-community-5.26.0/
        ├── bin/              # 可执行文件和脚本
        ├── certificates/     # SSL 证书
        ├── conf/             # 配置文件
        ├── data/             # 数据库文件
        ├── import/           # 数据导入目录
        ├── labs/             # 实验性功能
        ├── lib/              # Java 库文件
        ├── licenses/         # 许可证文件
        ├── logs/             # 日志文件
        ├── plugins/          # 插件目录
        ├── products/         # 产品信息
        └── run/              # 运行时文件
        
    

* * *

### 步骤 2：配置 Neo4j

1.  **编辑配置文件**
    
        文件位置：d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\conf\neo4j.conf
        
    
2.  **基本配置项**
    
        # 网络绑定（允许远程访问）
        server.default_listen_address=0.0.0.0
        
        # Bolt 协议端口（Python 驱动连接用）
        server.bolt.listen_address=:7687
        
        # HTTP 端口（浏览器访问用）
        server.http.listen_address=:7474
        
        # 内存设置
        server.memory.heap.initial_size=512m
        server.memory.heap.max_size=1G
        server.memory.pagecache.size=512m
        
        # 安全设置
        server.bolt.tls_level=DISABLED
        server.http.enabled=true
        
    
3.  **配置说明**
    
    *   `0.0.0.0`：允许所有网络接口访问
    *   `7687`：Bolt 协议端口（客户端连接）
    *   `7474`：HTTP 端口（浏览器访问）
    *   内存设置根据系统资源调整
    *   `tls_level=DISABLED`：开发环境可禁用 TLS

* * *

### 步骤 3：设置初始密码

1.  **打开 PowerShell 或 CMD（以管理员身份）**
    
        # 右键点击"开始"菜单 -> Windows PowerShell (管理员)
        
    
2.  **进入 Neo4j bin 目录**
    
        cd d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\bin
        
    
3.  **设置初始密码**
    
        # 方式 1：使用 neo4j-admin 工具
        .\neo4j-admin.bat dbms set-initial-password ne123456
        
        # 或方式 2：如果服务已安装，可以通过浏览器首次登录时设置
        # 访问 http://localhost:7474
        # 默认用户名：neo4j
        # 默认密码：neo4j
        # 首次登录会要求修改密码
        
    

* * *

### 步骤 4：安装 Windows 服务

1.  **以管理员身份打开 PowerShell**
    
        # 右键"开始"菜单 -> Windows PowerShell (管理员)
        
    
2.  **进入 Neo4j bin 目录**
    
        cd d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\bin
        
    
3.  **安装服务**
    
        # 执行安装命令
        .\neo4j.bat install-service
        
    
4.  **预期输出**
    
        Neo4j service installed
        
    
5.  **验证服务安装**
    
        Get-Service -Name neo4j
        
    
    **输出示例**：
    
        Status   Name               DisplayName
        ------   ----               -----------
        Stopped  neo4j              Neo4j Graph Database - neo4j
        
    

* * *

### 步骤 5：配置服务启动类型

1.  **设置为自动启动**
    
        Set-Service -Name neo4j -StartupType Automatic
        
    
2.  **验证启动类型**
    
        Get-Service -Name neo4j | Select-Object Name, StartType, Status
        
    

* * *

### 步骤 6：启动服务

**方式 1：使用 PowerShell**

    Start-Service -Name neo4j
    

**方式 2：使用 neo4j.bat 脚本**

    cd d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\bin
    .\neo4j.bat start
    

**方式 3：使用 Windows 服务管理器**

    1. 按 Win + R
    2. 输入：services.msc
    3. 找到 "Neo4j Graph Database - neo4j"
    4. 右键 -> 启动
    

**方式 4：使用 net 命令**

    net start neo4j
    

* * *

### 步骤 7：验证服务运行

1.  **检查服务状态**
    
        Get-Service -Name neo4j
        
    
    **预期输出**：
    
        Status   Name               DisplayName
        ------   ----               -----------
        Running  neo4j              Neo4j Graph Database - neo4j
        
    
2.  **查看详细信息**
    
        Get-Service -Name neo4j | Format-List *
        
    
3.  **检查进程**
    
        Get-Process -Name java | Where-Object {$_.CommandLine -like "*neo4j*"}
        
    
4.  **检查端口监听**
    
        netstat -ano | findstr "7474"
        netstat -ano | findstr "7687"
        
    
5.  **访问 Web 界面**
    
        浏览器访问：http://localhost:7474
        用户名：neo4j
        密码：ne123456（或你设置的密码）
        
    
6.  **测试 Bolt 连接**
    
        # 使用 Python 测试
        python -c "from neo4j import GraphDatabase; driver = GraphDatabase.driver('bolt://localhost:7687', auth=('neo4j', 'ne123456')); driver.verify_connectivity(); print('✓ Connection successful')"
        
    

* * *

🔧 服务管理命令
---------

### 常用 PowerShell 命令

    # 查看服务状态
    Get-Service -Name neo4j
    
    # 启动服务
    Start-Service -Name neo4j
    
    # 停止服务
    Stop-Service -Name neo4j
    
    # 重启服务
    Restart-Service -Name neo4j
    
    # 查看服务详细信息
    Get-Service -Name neo4j | Format-List *
    
    # 查看服务启动类型
    Get-Service -Name neo4j | Select-Object Name, StartType, Status
    
    # 设置为自动启动
    Set-Service -Name neo4j -StartupType Automatic
    
    # 设置为手动启动
    Set-Service -Name neo4j -StartupType Manual
    
    # 设置为禁用
    Set-Service -Name neo4j -StartupType Disabled
    

### 使用 neo4j.bat 脚本

    cd d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\bin
    
    # 安装服务
    .\neo4j.bat install-service
    
    # 卸载服务
    .\neo4j.bat uninstall-service
    
    # 启动服务
    .\neo4j.bat start
    
    # 停止服务
    .\neo4j.bat stop
    
    # 重启服务
    .\neo4j.bat restart
    
    # 查看状态
    .\neo4j.bat status
    
    # 查看版本
    .\neo4j.bat version
    

### 使用 CMD 命令

    REM 启动服务
    net start neo4j
    
    REM 停止服务
    net stop neo4j
    
    REM 查看服务
    sc query neo4j
    
    REM 查看服务配置
    sc qc neo4j
    

* * *

📂 重要目录和文件
----------

### 配置文件

    d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\conf\neo4j.conf
    

*   主配置文件
*   包含网络、内存、安全等设置

### 数据目录

    d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\data\
    ├── databases/          # 数据库文件
    ├── dbms/               # DBMS 系统数据
    └── transactions/       # 事务日志
    

### 日志目录

    d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\logs\
    ├── neo4j.log          # 主日志文件
    ├── debug.log          # 调试日志
    ├── query.log          # 查询日志（需配置启用）
    └── security.log       # 安全日志
    

### 插件目录

    d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\plugins\
    

*   用于放置 Neo4j 插件（如 APOC）

### 导入目录

    d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\import\
    

*   用于 CSV 等数据导入

* * *

🔍 故障排查
-------

### 问题 1：服务无法启动

**可能原因**：

1.  端口被占用（7474 或 7687）
2.  Java 环境未配置
3.  权限不足
4.  配置文件错误

**解决步骤**：

1.  **检查端口占用**
    
        netstat -ano | findstr "7474"
        netstat -ano | findstr "7687"
        
    
2.  **检查 Java 环境**
    
        java -version
        
    
    要求：Java 17 或更高版本
    
3.  **查看日志文件**
    
        Get-Content d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\logs\neo4j.log -Tail 50
        
    
4.  **验证配置文件**
    
        # 检查配置文件语法
        type d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\conf\neo4j.conf
        
    

* * *

### 问题 2：无法连接到 Neo4j

**检查步骤**：

1.  **确认服务运行**
    
        Get-Service -Name neo4j
        
    
2.  **测试端口**
    
        Test-NetConnection -ComputerName localhost -Port 7474
        Test-NetConnection -ComputerName localhost -Port 7687
        
    
3.  **检查防火墙**
    
        # 添加防火墙规则（如需要）
        New-NetFirewallRule -DisplayName "Neo4j HTTP" -Direction Inbound -Protocol TCP -LocalPort 7474 -Action Allow
        New-NetFirewallRule -DisplayName "Neo4j Bolt" -Direction Inbound -Protocol TCP -LocalPort 7687 -Action Allow
        
    
4.  **验证认证信息**
    
        默认用户名：neo4j
        密码：首次设置的密码
        
    

* * *

### 问题 3：服务频繁崩溃

**可能原因**：

1.  内存不足
2.  磁盘空间不足
3.  数据库损坏

**解决步骤**：

1.  **调整内存设置**  
    编辑 `conf\neo4j.conf`：
    
        # 减小内存占用
        server.memory.heap.initial_size=256m
        server.memory.heap.max_size=512m
        server.memory.pagecache.size=256m
        
    
2.  **检查磁盘空间**
    
        Get-PSDrive D | Select-Object Free, Used
        
    
3.  **检查数据库一致性**
    
        cd d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\bin
        .\neo4j-admin.bat check database neo4j
        
    

* * *

🔐 安全配置
-------

### 1\. 修改默认密码

    # 方式 1：使用 neo4j-admin
    cd d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\bin
    .\neo4j-admin.bat dbms set-initial-password <新密码>
    
    # 方式 2：通过 Cypher 查询（服务运行时）
    # 访问 http://localhost:7474
    # 执行：
    # ALTER CURRENT USER SET PASSWORD FROM '旧密码' TO '新密码'
    

### 2\. 限制网络访问

编辑 `conf\neo4j.conf`：

    # 仅允许本地访问
    server.default_listen_address=127.0.0.1
    
    # 或仅允许特定 IP
    server.default_listen_address=192.168.1.100
    

### 3\. 启用 TLS

    # 启用 Bolt TLS
    server.bolt.tls_level=REQUIRED
    
    # 启用 HTTPS
    server.https.enabled=true
    server.https.listen_address=:7473
    
    # 配置证书
    dbms.ssl.policy.bolt.enabled=true
    dbms.ssl.policy.bolt.base_directory=certificates/bolt
    

* * *

📊 性能优化
-------

### 1\. 内存配置建议

**小型系统（< 4GB RAM）**

    server.memory.heap.initial_size=256m
    server.memory.heap.max_size=512m
    server.memory.pagecache.size=256m
    

**中型系统（4-8GB RAM）**

    server.memory.heap.initial_size=512m
    server.memory.heap.max_size=1G
    server.memory.pagecache.size=512m
    

**大型系统（> 8GB RAM）**

    server.memory.heap.initial_size=1G
    server.memory.heap.max_size=2G
    server.memory.pagecache.size=1G
    

### 2\. 查询性能优化

    # 启用查询日志
    dbms.logs.query.enabled=true
    dbms.logs.query.threshold=1s
    
    # 增加事务超时
    db.transaction.timeout=60s
    
    # 并发配置
    dbms.threads.worker_count=8
    

* * *

🔄 备份和恢复
--------

### 在线备份（需要企业版）

Community 版本不支持在线备份，需要停止服务后进行冷备份。

### 冷备份步骤

1.  **停止 Neo4j 服务**
    
        Stop-Service -Name neo4j
        
    
2.  **备份数据目录**
    
        $backupPath = "D:\Backups\Neo4j\backup_$(Get-Date -Format 'yyyyMMdd_HHmmss')"
        Copy-Item -Path "d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\data" -Destination $backupPath -Recurse
        
    
3.  **启动服务**
    
        Start-Service -Name neo4j
        
    

### 恢复步骤

1.  **停止服务**
    
        Stop-Service -Name neo4j
        
    
2.  **恢复数据**
    
        # 删除当前数据
        Remove-Item -Path "d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\data\*" -Recurse -Force
        
        # 恢复备份
        Copy-Item -Path "$backupPath\*" -Destination "d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\data" -Recurse
        
    
3.  **启动服务**
    
        Start-Service -Name neo4j
        
    

* * *

📝 卸载服务
-------

### 完整卸载步骤

1.  **停止服务**
    
        Stop-Service -Name neo4j
        
    
2.  **卸载服务**
    
        cd d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0\bin
        .\neo4j.bat uninstall-service
        
    
3.  **验证卸载**
    
        Get-Service -Name neo4j
        # 应该返回错误：找不到服务
        
    
4.  **清理数据（可选）**
    
        # 备份重要数据后
        Remove-Item -Path "d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0" -Recurse -Force
        
    

* * *

✅ 验证清单
------

*    Neo4j 已解压到正确目录
*    配置文件已正确配置
*    初始密码已设置
*    Windows 服务已安装
*    服务启动类型设置为"自动"
*    服务状态为"Running"
*    可以访问 Web 界面（[http://localhost:7474](http://localhost:7474)）
*    Bolt 连接正常（端口 7687）
*    日志文件正常生成
*    可以执行 Cypher 查询

* * *

📖 参考资源
-------

### 官方文档

*   Neo4j 5.x 官方文档：[https://neo4j.com/docs/operations-manual/5/](https://neo4j.com/docs/operations-manual/5/)
*   Windows 安装指南：[https://neo4j.com/docs/operations-manual/5/installation/windows/](https://neo4j.com/docs/operations-manual/5/installation/windows/)

### 常用链接

*   Neo4j 浏览器：[http://localhost:7474](http://localhost:7474)
*   Bolt 端口：bolt://localhost:7687
*   Neo4j 下载：[https://we-yun.com/doc/neo4j/5.26.0/](https://we-yun.com/doc/neo4j/5.26.0/)

### 推荐工具

*   Neo4j Desktop：图形化管理工具
*   Neo4j Browser：Web 界面（内置）
*   Cypher Shell：命令行工具（内置）

* * *

🎉 总结
-----

Neo4j Community 5.26.0 已成功配置为 Windows 系统服务！

**关键信息**：

*   📁 安装路径：`d:\WinUser.dat\CursorMcp\neo4j-community-5.26.0`
*   🌐 Web 界面：[http://localhost:7474](http://localhost:7474)
*   🔌 Bolt 端口：bolt://localhost:7687
*   👤 默认用户：neo4j
*   🔑 密码：ne123456（或自定义密码）
*   🚀 启动类型：Automatic（自动启动）

posted on 2025-10-06 15:28  [patton88](https://www.cnblogs.com/ybmj)  阅读(126)  评论(0)    [收藏](javascript:void\(0\))  [举报](javascript:void\(0\))