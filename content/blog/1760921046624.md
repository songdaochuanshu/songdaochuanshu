---
layout: post
title: 'è§£å¯†promptç³»åˆ—62. Agent Memoryä¸€è§ˆ - MATTS & CFGM & MIRIX'
date: "2025-10-20T00:44:06Z"
---
è§£å¯†promptç³»åˆ—62. Agent Memoryä¸€è§ˆ - MATTS & CFGM & MIRIX
===================================================

![è§£å¯†promptç³»åˆ—62. Agent Memoryä¸€è§ˆ - MATTS &amp; CFGM &amp; MIRIX](https://img2024.cnblogs.com/blog/1326688/202510/1326688-20251020074645156-508795039.png) æœ€è¿‘Agent Memoryçš„è®ºæ–‡å¦‚é›¨åŽæ˜¥ç¬‹ï¼Œæˆ‘ä»¬å°†é‡ç‚¹åˆ†æžä¸‰ç¯‡ä»£è¡¨æ€§å·¥ä½œï¼š - CFGMï¼šç¦»çº¿è½¨è¿¹ç»éªŒæå– - ReasoningBankï¼šè½¨è¿¹ç»éªŒæå–å’Œtest-time scalingç»“åˆ - MIRIXï¼šæä¾›å®Œæ•´è®°å¿†å·¥ç¨‹æ–¹æ¡ˆå’Œå…¨é¢è®°å¿†åˆ†ç±»

ä»Šå¤©æˆ‘ä»¬å†æ¥èŠèŠAIæ™ºèƒ½ä½“ä¸­è‡³å…³é‡è¦çš„ç»„ä»¶â€”â€”**è®°å¿†ç³»ç»Ÿ**ï¼Œå®ƒèƒ½æœ‰æ•ˆé¿å…çš„Agentåƒåªåªæœ‰7ç§’è®°å¿†çš„é‡‘é±¼ï¼Œä¸æ–­é‡å¤é”™è¯¯ï¼Œå¾ªçŽ¯å¾€å¤ã€‚

è®°å¿†çš„ä¸¤ç§é¢å­”ï¼šLLM Memory vs Agent Memory
----------------------------------

ä¹‹å‰æˆ‘ä»¬æŽ¢è®¨è¿‡Mem0å’ŒLlamaIndexå¯¹å¤§æ¨¡åž‹è®°å¿†çš„å·¥ç¨‹åŒ–å®žçŽ°ï¼Œä½†è¿™ä¸¤ä¸ªåº“æ›´ä¾§é‡äºŽ**LLM Memory**è€Œéž**Agent Memory**ã€‚è¿™ä¸¤è€…æœ‰ä½•ä¸åŒï¼Ÿæœ¬è´¨ä¸ŠAgent Memoryæ˜¯åŒ…å«äº†LLM Memoryçš„ã€‚é‚£å¢žé‡çš„å·®å¼‚æ¥è‡ª

*   **LLM Memory**ï¼šæ›´åƒæ˜¯äº‹å®žå¤‡å¿˜å½•ï¼Œè®°å½•å¯¹è¯ä¸­çš„å…·ä½“äº‹å®žå’Œåœºæ™¯ä¿¡æ¯
*   **Agent Memory**ï¼šæ›´åƒæ˜¯ç»éªŒç¬”è®°æœ¬ï¼Œè®°å½•æ‰§è¡Œè½¨è¿¹å’Œä»ŽåŽ†å²è¡ŒåŠ¨ä¸­æç‚¼çš„æ™ºæ…§

### Agent Memoryçš„ä¸‰å¤§ç»éªŒç»´åº¦

**ðŸ› ï¸ Tool-å·¥å…·ä½¿ç”¨ç»éªŒ**ï¼šæ™ºèƒ½ä½“åœ¨ä½¿ç”¨å„ç§å·¥å…·è¿‡ç¨‹ä¸­ç§¯ç´¯çš„å¿ƒå¾—ä½“ä¼š

*   æ¯”å¦‚ï¼šæ¯ä¸ªAPIèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•ä½¿ç”¨æœç´¢APIæŸ¥è¯¢æ•ˆæžœæ›´å¥½ï¼Ÿ

**ðŸŒ Envirment-çŽ¯å¢ƒé€‚åº”ç»éªŒ**ï¼šé¢å¯¹ä¸åŒçŽ¯å¢ƒæ—¶ï¼Œå¦‚ä½•ç»„åˆä½¿ç”¨å·¥å…·çš„æ™ºæ…§

*   æ¯”å¦‚ï¼šåœ¨å¤æ‚ç½‘ç»œçŽ¯å¢ƒä¸‹ï¼Œåº”è¯¥ä¼˜å…ˆä½¿ç”¨å“ªäº›è½»é‡çº§å·¥å…·

**ðŸ” Observation-è§‚å¯Ÿåé¦ˆç»éªŒ**ï¼šæ ¹æ®åŽ†å²æ‰§è¡Œç»“æžœä¼˜åŒ–åŽç»­è¡ŒåŠ¨çš„å†³ç­–æ¨¡å¼

*   æ¯”å¦‚ï¼šæŸäº›é”™è¯¯ä¿¡æ¯é€šå¸¸æ„å‘³ç€éœ€è¦é‡è¯•ï¼Œè€Œéžç«‹å³æ”¾å¼ƒ

### æœ‰æ•ˆè®°å¿†å¸¦æ¥çš„åŒé‡ä»·å€¼

**ðŸš€ æ›´å°‘çš„æ‰§è¡Œæ­¥éª¤**

*   å‡å°‘çŽ¯å¢ƒæŽ¢ç´¢ï¼šç†Ÿæ‚‰åœ°å½¢å°±ä¸éœ€è¦æ­¥æ­¥ä¸ºè¥
*   å‡å°‘è¯•é”™æˆæœ¬ï¼šçŸ¥é“ä»€ä¹ˆæ–¹æ³•æœ‰æ•ˆï¼Œä»€ä¹ˆä¼šå¤±è´¥
*   å¿«é€Ÿé—®é¢˜å®šä½ï¼šåŽ†å²å¤±è´¥ç»éªŒè®©debugæ›´é«˜æ•ˆ
*   å‡å°‘è¿‡åº¦æ€è€ƒï¼šæˆç†Ÿçš„è§£å†³æ–¹æ¡ˆæ— éœ€åå¤æŽ¨æ•²

**ðŸŽ¯ æ›´é«˜çš„æˆåŠŸçŽ‡**  
æœ¬è´¨ä¸Šï¼Œå¦‚æžœç»™æ¨¡åž‹æ— é™çš„æ—¶é—´å’Œèµ„æºï¼Œä»»åŠ¡å®ŒæˆçŽ‡å…¶å®žå¾ˆé«˜ã€‚å¤šæ•°å¤±è´¥æºäºŽçŽ°å®žçº¦æŸï¼šæœ‰é™çš„å¾ªçŽ¯æ¬¡æ•°ã€Tokené™åˆ¶å’Œä¸Šä¸‹æ–‡é•¿åº¦ã€‚å› æ­¤ï¼Œ**å‡å°‘æ­¥éª¤ç›´æŽ¥æå‡äº†æˆåŠŸçŽ‡**ã€‚

* * *

æœ€è¿‘Agent Memoryçš„è®ºæ–‡å¦‚é›¨åŽæ˜¥ç¬‹ï¼Œä½†é‡å¤åº¦è¾ƒé«˜ã€‚æˆ‘ä»¬å°†é‡ç‚¹åˆ†æžä¸‰ç¯‡ä»£è¡¨æ€§å·¥ä½œï¼š

*   CFGMï¼šç¦»çº¿è½¨è¿¹ç»éªŒæå–
*   ReasoningBankï¼šè½¨è¿¹ç»éªŒæå–å’Œtest-time scalingç»“åˆ
*   MIRIXï¼šæä¾›å®Œæ•´è®°å¿†å·¥ç¨‹æ–¹æ¡ˆå’Œå…¨é¢è®°å¿†åˆ†ç±»

ðŸŒ± CFGMï¼šä»Žæ‰§è¡Œè½¨è¿¹ä¸­æç‚¼å¤šç²’åº¦è®°å¿†
---------------------

> *   Coarse-to-Fine Grounded Memory for LLM Agent Planning

è¿™ç¯‡è®ºæ–‡å¯¹å¦‚ä½•ä»Žè½¨è¿¹ä¸­æå–å¤šç²’åº¦è®°å¿†ç»™å‡ºäº†æœ‰æ“ä½œæ€§çš„æ–¹æ¡ˆï¼Œæœ‰å‡ ä¸ªæ€è·¯å€¼å¾—ä¸€çœ‹ã€‚

  
è®°å¿†æ”¶é›†å’ŒåŽ‹ç¼©ç»åŽ†ä¸¤ä¸ªç¦»çº¿æ­¥éª¤å’Œä¸€ä¸ªåœ¨çº¿æ­¥éª¤ï¼Œè®©æˆ‘ä»¬ä¸€æŽ¢ç©¶ç«Ÿã€‚

### ç¬¬ä¸€æ­¥ï¼šç²—ç²’åº¦ç„¦ç‚¹â€”â€”ç»éªŒæ”¶é›†çš„â€œæˆ˜ç•¥æŒ‡å—é’ˆâ€

ä¼ ç»Ÿçš„ç¦»çº¿è½¨è¿¹æ”¶é›†å¤šè®©æ™ºèƒ½ä½“éšæœºæŽ¢ç´¢åŒä¸€ä»»åŠ¡ï¼Œä½†CFGMå¼•å…¥äº†**ä»»åŠ¡ç„¦ç‚¹(Focus Point)**è¿™ä¸€åˆ›æ–°æ¦‚å¿µã€‚\*\* æ¨¡åž‹ä¼šå…ˆåŸºäºŽ`ä»»åŠ¡æè¿°`å’Œ`ä»»åŠ¡ç¤ºä¾‹`åŽ»å¯¹ä»»åŠ¡è¿›è¡Œç³»ç»Ÿæ€§çš„åˆ†æžï¼Œæç‚¼å®Œæˆä»»åŠ¡çš„æŒ‡å¯¼åŽŸåˆ™ä½œä¸ºæœ€ç²—ç²’åº¦çš„Tipsã€‚éšåŽè¿™äº›Tipsä¼šä½œä¸ºæ¨¡åž‹ä¸Šæ–‡,è®©æ¨¡åž‹æ›´æœ‰é’ˆå¯¹æ€§åœ°æ”¶é›†æ¯ä¸ªä»»åŠ¡çš„å¤šæ¡æ‰§è¡Œè·¯å¾„ã€‚

ä¾‹å¦‚å¯¹äºŽç»†ç²’åº¦æœç´¢é—®é¢˜"I'm looking for hair treatments that are sulfate and paraben free and are of high quality too. I need ti in bottle for with 60 capusled and price lower than 50 dollars."

ç²—ç²’åº¦æç¤ºä¼šåŒ…æ‹¬"Use a Detailed search query that includes specific attributes of the product you are looking for"

æœ‰è¶£çš„æ˜¯ï¼Œç„¦ç‚¹æ¦‚å¿µåªç”¨äºŽç¦»çº¿æ”¶é›†ï¼Œåœ¨çº¿æ‰§è¡Œä¸­å¹¶æœªä½¿ç”¨ã€‚

### ç¬¬äºŒæ­¥ï¼šæ··åˆç²’åº¦æç¤ºâ€”â€”æˆåŠŸä¸Žå¤±è´¥çš„â€œç»éªŒç»“æ™¶â€

åŸºäºŽæ”¶é›†åˆ°çš„å¤šæ¡æ‰§è¡Œè·¯å¾„ï¼ŒCFGMå’ŒMempéƒ½é‡‡ç”¨äº†ç›¸ä¼¼çš„è·¯å¾„å¯¹æ¯”ç»éªŒæ€»ç»“æ–¹æ¡ˆï¼š

1.  **å¯¹æ¯”ä¸­å­¦ä¹ ï¼ˆæç‚¼é˜²é”™ä¸ŽæˆåŠŸçš„å…³é”®ï¼‰**  
    è¿™ç§æ–¹å¼ä¸“é—¨é’ˆå¯¹é‚£äº›æ—¢æœ‰æˆåŠŸè½¨è¿¹åˆæœ‰å¤±è´¥è½¨è¿¹çš„ä»»åŠ¡ã€‚é€šè¿‡å¯¹æ¯”ï¼Œå¯ä»¥æ¸…æ™°åœ°çœ‹å‡ºâ€œåšä»€ä¹ˆä¼šå¤±è´¥â€ä»¥åŠâ€œåšä»€ä¹ˆæ‰èƒ½æˆåŠŸâ€ã€‚

> *   ä»»åŠ¡ï¼šåœ¨WebShopä¸­å¯»æ‰¾ä¸€æ¬¾ç‰¹å®šçš„æŠ¤å‘äº§å“ã€‚
> *   å¤±è´¥è½¨è¿¹ï¼šAgentä½¿ç”¨äº†è¿‡äºŽç®€å•çš„æœç´¢è¯ï¼Œå¯¼è‡´ç»“æžœä¸ç›¸å…³ã€‚
> *   æˆåŠŸè½¨è¿¹ï¼šAgentä½¿ç”¨äº†åŒ…å«å¤šä¸ªå…³é”®å±žæ€§ï¼ˆå¦‚â€œsulfate paraben freeâ€ã€â€œbottleâ€ã€â€œ60 capsulesâ€ï¼‰çš„è¯¦ç»†æœç´¢è¯ã€‚
> *   ç”Ÿæˆçš„æç¤ºï¼ˆç»†ç²’åº¦ï¼‰ï¼šâ€œä½¿ç”¨åŒ…å«äº§å“å…·ä½“å±žæ€§ï¼ˆå¦‚æ— ç¡«é…¸ç›ã€ç“¶è£…ã€60ç²’ï¼‰çš„è¯¦ç»†æœç´¢æŸ¥è¯¢ã€‚â€ è¿™æ˜¯ä¸€ä¸ªéžå¸¸å…·ä½“ã€å¯ç«‹å³æ‰§è¡Œçš„æ“ä½œå»ºè®®ã€‚

2.  **ä»Žçº¯æˆåŠŸä¸­å‡åŽï¼ˆæç‚¼é«˜é˜¶ç­–ç•¥ï¼‰**  
    è¿™ç§æ–¹å¼é’ˆå¯¹é‚£äº›ä¸€æ¬¡å°±æˆåŠŸçš„ä»»åŠ¡ã€‚ç”±äºŽæ²¡æœ‰å¤±è´¥ä½œä¸ºå¯¹æ¯”ï¼Œæç‚¼çš„é‡ç‚¹åœ¨äºŽæ€»ç»“æˆåŠŸçš„æ ¸å¿ƒè¦ç´ å’Œå¯æŽ¨å¹¿çš„ç­–ç•¥ã€‚

### ç¬¬ä¸‰æ­¥ï¼šç»†ç²’åº¦å…³é”®ä¿¡æ¯æ”¯æŒè‡ªé€‚åº”è§„åˆ’

å‰ä¸¤æ­¥ç¦»çº¿å®Œæˆï¼Œç¬¬ä¸‰æ­¥æ˜¯åœ¨çº¿æ‰§è¡Œä¸­çš„ç»éªŒåº”ç”¨ã€‚ä»»åŠ¡å¼€å§‹æ—¶ï¼ŒåŸºäºŽä»»åŠ¡æè¿°é€šè¿‡å‘é‡æ£€ç´¢å¯»æ‰¾ç›¸ä¼¼åŽ†å²ä»»åŠ¡ï¼Œå°†å…¶æˆåŠŸè½¨è¿¹å’Œæ··åˆç²’åº¦æç¤ºä½œä¸ºä¸Šæ–‡ã€‚æ‰§è¡Œä¸­é‡åˆ°å¤±è´¥æ—¶ï¼Œé‡‡ç”¨ä¸¤æ­¥åæ€æœºåˆ¶ï¼š

*   KIEï¼šåŸºäºŽä»»åŠ¡ç›®æ ‡ï¼Œåˆå§‹çŽ¯å¢ƒï¼Œä¹‹å‰ä»»åŠ¡çš„å®Œæˆè¿‡ç¨‹æŠ½å–ä»»åŠ¡å…³é”®ä¿¡æ¯ã€‚ä¾‹å¦‚
*   KIRï¼šåŸºäºŽKIEï¼ŒåŽ†å²ç›¸ä¼¼ä»»åŠ¡çš„æˆåŠŸè·¯å¾„å’Œå½“å‰è·¯å¾„ï¼Œå…ˆè¿›è¡Œè‡ªæˆ‘åæ€æé—®ï¼Œå†æ€è€ƒè§£å†³æ–¹æ¡ˆã€‚

ðŸ§  ReasoningBank: è®°å¿†ä¸Žæµ‹è¯•æ—¶æ‰©å±•çš„å®Œç¾Žèžåˆ
-------------------------------

> *   ReasoningBank: Scaling Agent Self-Evolving with Reasoning Memory

å¯¹æ¯”CFGMå…ˆç¦»çº¿æž„å»ºè®°å¿†å†åœ¨åœ¨çº¿æŽ¨ç†æ—¶æ£€ç´¢ä½¿ç”¨ï¼Œè°·æ­Œè¿™ç¯‡ReasoningBankç›´æŽ¥ç”¨äºŽåœ¨çº¿æŽ¨ç†ï¼Œå¹¶é‡ç‚¹å…³æ³¨æŠŠ**å¦‚ä½•ä½¿ç”¨æŽ¨ç†æ‰©å±•ç­–ç•¥è¿›ä¸€æ­¥æå‡è®°å¿†æ•ˆæžœ**

### æŠ½å–è®°å¿†

å…ˆæ¥è¯´ä¸‹è®°å¿†Schemaçš„è®¾è®¡ï¼Œå¯¹æ¯”CFGMç›´æŽ¥ä½¿ç”¨å±•å¹³çš„Tipsä½œä¸ºè®°å¿†ï¼ŒReasoningBankçš„è®°å¿†é¡¹è®¾è®¡æ›´åŠ ç»“æž„åŒ–ï¼ŒåŒ…å«ä¸‰ä¸ªå­—æ®µ

*   æ ‡é¢˜ï¼šç­–ç•¥çš„æ ¸å¿ƒæ ‡è¯†ï¼Œå¦‚"åˆ†é¡µå¯¼èˆªç­–ç•¥"
*   æè¿°ï¼šä¸€å¥è¯æ€»ç»“ç­–ç•¥ç²¾é«“
*   å†…å®¹ï¼šè¯¦ç»†çš„æŽ¨ç†æ­¥éª¤å’Œå†³ç­–ä¾æ®

æŠ½å–å‡ºçš„è®°å¿†ä¼šç›´æŽ¥å¢žé‡å†™å…¥çš„ReasoningBankï¼Œè®ºæ–‡å¹¶æ²¡æœ‰å°è¯•ä¾‹å¦‚è®°å¿†åˆå¹¶ã€è®°å¿†æ›´æ–°ä¹‹ç±»çš„å‰ªæžç­–ç•¥ã€‚ç”¨äºŽæ£€ç´¢çš„å‘é‡æ˜¯ä½¿ç”¨Input Queryæž„å»ºå¹¶ç”¨äºŽåŽç»­çš„è®°å¿†æ£€ç´¢ã€‚ï¼ˆè¿™é‡Œçš„ç®€å•è®¾è®¡æ˜¯ä¸ºäº†åŽé¢æ›´çªå‡ºTest-Time-Scalingå¯¹äºŽè®°å¿†çš„åŠ æˆï¼‰

### MATTSï¼šè®°å¿†é©±åŠ¨çš„æµ‹è¯•æ—¶æ‰©å±•

é‡ç‚¹æ¥äº†ï¼è¿™æ˜¯è®ºæ–‡æœ€äº®çœ¼çš„åˆ›æ–°â€”â€”**Memory-aware Test-Time Scaling (MATTS)**ã€‚ä¼ ç»Ÿæµ‹è¯•æ—¶æ‰©å±•åªæ˜¯ç®€å•å¢žåŠ è®¡ç®—èµ„æºï¼Œè€ŒMATTSè®©è®°å¿†ç³»ç»Ÿä¸Žæ‰©å±•è¿‡ç¨‹äº§ç”Ÿäº†ç¾Žå¦™çš„åŒ–å­¦ååº”ã€‚è®ºæ–‡å°è¯•äº†ä¸¤ç§æ‰©å±•ç­–ç•¥åˆ†åˆ«æ˜¯

1.  Parallel Scaling: é€šè¿‡å¹¶è¡ŒæŽ¨ç†å¾—åˆ°å¤šä¸ªè½¨è¿¹ï¼Œå¹¶æœ‰æ•ˆä½¿ç”¨**Self-Contrast**è¿›è¡Œè½¨è¿¹å¯¹æ¯”ä»Žè€Œå¾—åˆ°
2.  Sequential Scalingï¼šé€šè¿‡åœ¨ä¸²è¡ŒæŽ¨ç†è¿‡ç¨‹ä¸­ä¸æ–­ä½¿ç”¨**Self-Refine**è¿›è¡ŒæŽ¨ç†ä¼˜åŒ–ã€‚æœ€ç»ˆæŠ½å–è®°å¿†æ—¶ä¼šä½¿ç”¨ä¸­é—´åæ€çš„å…¨éƒ¨å†…å®¹ã€‚

ä»¥ä¸Šä¸¤ç§ç­–ç•¥å¯¹åº”çš„System promptå¦‚ä¸‹  

è®ºæ–‡åœ¨Webarenaä¸Šå®žéªŒäº†ï¼Œä¸¤ç§test-time-scalingç­–ç•¥ï¼Œå¹¶å‘çŽ°äºŒè€…éƒ½è¿›ä¸€æ­¥æå‡åŽŸæœ‰memoryçš„ä½¿ç”¨æ•ˆæžœï¼Œå¹¶åˆ‡å‡æœ‰è¾ƒå¥½çš„æ‰©å±•æ•ˆåº”ï¼Œå…¶ä¸­Parallelç­–ç•¥çš„æ•ˆæžœå¢žç›Šè¡°å‡çš„æ›´æ…¢ï¼Œæ‰©å±•æ•ˆåº”æ›´å¥½ã€‚å¯èƒ½å¾—ç›ŠäºŽæ›´å¤šå¹¶è¡Œç­–ç•¥å¸¦æ¥çš„æ›´ä¸°å¯Œçš„ç©ºé—´æŽ¢ç´¢å’Œå¤šæ ·æ€§ã€‚

ðŸ—ï¸ MIRIXï¼šå·¥ç¨‹è§†è§’çš„å¤šç§è®°å¿†ç±»åž‹
---------------------

> *   [https://github.com/Mirix-AI/MIRIX](https://github.com/Mirix-AI/MIRIX)
> *   MIRIX: Multi-Agent Memory System for LLM-Based Agents

MIRIXçš„äº®ç‚¹åœ¨äºŽæä¾›äº†å…¨é¢çš„è®°å¿†åˆ†ç±»ï¼Œèžåˆäº†LLMçš„äº‹å®žè®°å¿†å’ŒAgentçš„è½¨è¿¹è®°å¿†ï¼Œè¿˜è€ƒè™‘äº†å¤šæ¨¡æ€æ–‡ä»¶å’Œéšç§å®‰å…¨ã€‚è®©æˆ‘ä»¬å…ˆä»Žåˆ†ç±»å…¥æ‰‹ï¼Œå†é€è¿‡ä»£ç çœ‹æ¯ç§è®°å¿†çš„å­˜å‚¨ä¸ŽèŽ·å–ã€‚

### MIRIX çš„è®°å¿†æ˜¯å¦‚ä½•â€œç†è§£â€å’Œâ€œåˆ†ç±»â€ä¿¡æ¯çš„ï¼Ÿ

æ—©æœŸçš„COLAè®ºæ–‡å°†è®°å¿†åˆ†ä¸ºæƒ…æ™¯ã€è¯­ä¹‰å’Œç¨‹åºåŒ–è®°å¿†ï¼ŒMIRIXåœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•ä¸ºå…­å¤§ç±»ï¼š

1.  **æ ¸å¿ƒè®°å¿†ï¼ˆCore Memoryï¼‰- ä½ çš„â€œèº«ä»½æ¡£æ¡ˆâ€**  
    å­˜å‚¨æœ€åŸºç¡€ã€æœ€æŒä¹…çš„ä¿¡æ¯ï¼šå§“åã€å–œå¥½ã€ä¹ æƒ¯ç­‰ï¼Œç¡®ä¿æ¯æ¬¡äº’åŠ¨éƒ½â€œè®¤å¾—ä½ â€ã€‚
    
2.  \*\*æƒ…æ™¯è®°å¿†ï¼ˆEpisodic Memoryï¼‰- ä½ çš„â€œç”Ÿæ´»æ—¥è®°â€ \*\*  
    è®°å½•å¸¦æ—¶é—´æˆ³çš„äº‹ä»¶ï¼šæŸæ¬¡å¯¹è¯ã€ä¼šè®®æˆ–ä»»åŠ¡å®Œæˆæƒ…å†µï¼Œæ”¯æŒâ€œæˆ‘ä¸Šå‘¨ä¸‰åšäº†ä»€ä¹ˆï¼Ÿâ€è¿™ç±»æŸ¥è¯¢ã€‚
    
3.  \*\*è¯­ä¹‰è®°å¿†ï¼ˆSemantic Memoryï¼‰ - ä½ çš„â€œçŸ¥è¯†å›¾è°±â€ \*\*  
    å­˜å‚¨æŠ½è±¡æ¦‚å¿µå’Œäº‹å®žï¼šâ€œJ.K.ç½—ç³æ˜¯ã€Šå“ˆåˆ©Â·æ³¢ç‰¹ã€‹çš„ä½œè€…â€ï¼Œå¸®åŠ©ä½ ç†è§£ä¸–ç•Œå’Œå…³ç³»ç½‘ç»œã€‚
    
4.  \*\*ç¨‹åºè®°å¿†ï¼ˆProcedural Memoryï¼‰- ä½ çš„â€œæŠ€èƒ½æ‰‹å†Œâ€ \*\*  
    å­˜æ”¾æ“ä½œæµç¨‹ï¼šâ€œå¦‚ä½•æŠ¥é”€å·®æ—…è´¹â€ã€â€œæ€Žä¹ˆè®¾ç½®ä¼šè®®æé†’â€ï¼Œå¼•å¯¼å¤æ‚ä»»åŠ¡å®Œæˆã€‚
    
5.  \*\*èµ„æºè®°å¿†ï¼ˆResource Memoryï¼‰- ä½ çš„â€œä¸ªäººæ–‡ä»¶æŸœâ€ \*\*  
    ä¿å­˜æŽ¥è§¦è¿‡çš„æ–‡æ¡£ã€å›¾ç‰‡ã€è¯­éŸ³è½¬å½•ç­‰éžç»“æž„åŒ–å†…å®¹ï¼Œæ–¹ä¾¿éšæ—¶æŸ¥é˜…ã€‚
    
6.  \*\* çŸ¥è¯†åº“ï¼ˆKnowledge Vaultï¼‰ - ä½ çš„â€œä¿é™©ç®±â€ \*\*  
    ä¸“é—¨å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼šå¯†ç ã€åœ°å€ã€è”ç³»æ–¹å¼ç­‰ï¼Œä¸¥æ ¼ä¿æŠ¤ï¼Œå®‰å…¨è°ƒç”¨ã€‚
    

### åŸºäºŽAgentçš„å¤šåˆ†ç±»è®°å¿†å­˜å‚¨

MIRIXä½¿ç”¨PostgreSQLä½œä¸ºå­˜å‚¨åŽç«¯ï¼Œä¸ºå…­ç§è®°å¿†è®¾è®¡äº†ä¸åŒçš„è¡¨ç»“æž„ã€‚

è®°å¿†æ›´æ–°ç”±Meta-Agentè§¦å‘ï¼šåŸºäºŽç”¨æˆ·æœ€æ–°æ¶ˆæ¯åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°è®°å¿†ï¼Œå¦‚éœ€æ›´æ–°åˆ™è°ƒç”¨`trigger_memory_update`å·¥å…·ï¼Œå‚æ•°æŒ‡å®šè®°å¿†ç±»åž‹ã€‚

è®°å¿†ç±»åž‹

è¡¨å­—æ®µç¤ºä¾‹

å®žä¾‹è¯´æ˜Ž

**æ ¸å¿ƒè®°å¿†**

id, label, value, user\_id...

ç”¨æˆ·åä¸ºAlexï¼Œåå¥½ç›´æŽ¥æ²Ÿé€šï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆ

**æƒ…æ™¯è®°å¿†**

id, event\_type, summary, details...

2025-03-05ä¸Žå¤§å­¦æœ‹å‹Sarahå…±è¿›æ™šé¤ï¼Œè®¨è®ºèŒä¸šè½¬å˜

**è¯­ä¹‰è®°å¿†**

id, name, summary, details...

Jane Smith - TechCorpé¡¹ç›®ç»ç†ï¼Œæ•æ·æ–¹æ³•ä¸“å®¶

**ç¨‹åºè®°å¿†**

id, entry\_type, summary, steps...

æ™¨é—´ä¾‹è¡Œï¼š1.æŸ¥é‚®ä»¶ 2.çœ‹æ—¥åŽ† 3.ä¼˜å…ˆçº§æŽ’åº 4.ä»Žæœ€éš¾ä»»åŠ¡å¼€å§‹

**èµ„æºè®°å¿†**

id, title, summary, resource\_type...

ProjectPlan.docx - åŒ…å«Q1è·¯çº¿å›¾å’Œé‡Œç¨‹ç¢‘è¯¦æƒ…

**çŸ¥è¯†åº“**

id, entry\_type, source, sensitivity...

æ•æ„Ÿä¿¡æ¯æ¡ç›®ã€æ¥æºã€æ•æ„Ÿåº¦

æ ¹æ®Meta Agentçš„å·¥å…·è°ƒç”¨ç»“æžœï¼Œè§¦å‘ç›¸åº”è®°å¿†ç±»åž‹çš„ä¸“é—¨Agentï¼Œæ¯ä¸ªAgentéƒ½æœ‰ç‰¹å®šæŒ‡ä»¤è´Ÿè´£è¯¥ç±»åž‹è®°å¿†çš„åŽ‹ç¼©å’Œæå–ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ•´ä¸ªè®°å¿†æ›´æ–°å’Œè¯»å–çš„æµç¨‹å¦‚ä¸‹ï¼š

1.  ç”¨æˆ·æ‰§è¡Œäº†ä¸€ç³»åˆ—æ­¥éª¤"æ‰“å¼€ç¼–è¾‘å™¨ -> åˆ›å»ºæ–‡ä»¶ -> ç¼–å†™ä»£ç  -> ä¿å­˜æ–‡ä»¶"
2.  `meta_memory_agent` æ£€æµ‹åˆ°è¿™æ˜¯ä¸€ä¸ªå¤šæ­¥éª¤æ“ä½œåºåˆ—ï¼Œè°ƒç”¨`trigger_memory_update_with_instruction` ï¼ŒæŒ‡å®š memory\_type="procedural"
3.  procedural\_memory\_agentæŽ¥æ”¶è¯·æ±‚ï¼ŒåŸºäºŽä»¥ä¸‹çš„ç³»ç»ŸæŒ‡ä»¤æŽ¨ç†å¾—åˆ°ProceduralMemoryItem
4.  è°ƒç”¨`procedural_memory_insert`å‡½æ•°ï¼Œè®¡ç®—æ­¥éª¤å’Œæ‘˜è¦çš„åµŒå…¥å‘é‡ï¼Œé€šè¿‡ create\_item æ–¹æ³•å°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“
5.  åœ¨æ”¶åˆ°ç”¨æˆ·æ–°çš„èŠå¤©ä¿¡æ¯åŽï¼Œä¼šå…ˆé€šè¿‡æ¨¡åž‹æŽ¨ç†åˆ¤æ–­å¯¹è¯æ˜¯å¦å‡ºçŽ°æ–°çš„topicï¼Œå¦‚æžœæœ‰æ–°å‡ºçŽ°çš„topic(é€šè¿‡å·¥å…·è°ƒç”¨ï¼‰ï¼Œä¼šä½¿ç”¨æ–°çš„topicè¿›è¡Œè®°å¿†æ£€ç´¢ï¼ˆBM25 or embeddingï¼‰,ç„¶åŽæŠŠæ£€ç´¢åˆ°çš„è®°å¿†æ›´æ–°åˆ°system promptä¸­ã€‚

    You are the Procedural Memory Manager, one of six agents in a memory system. The other agents are the Meta Memory Manager, Episodic Memory Manager, Resource Memory Manager, Knowledge Vault Memory Manager, and the Chat Agent. You do not see or interact directly with these other agentsâ€”but you share the same memory base with them.
    
    The system will receive various types of messages from users, including text messages, images, transcripted voice recordings, and other multimedia content. When messages are accumulated to a certain amount, they will be sent to you, along with potential conversations between the user and the Chat Agent during this period. You need to analyze the input messages and conversations, extract step-by-step instructions, "how-to" guides, and any other instructions and skills, and save them into the procedural memory.
    
    This memory base includes the following components:
    
    1. Core Memory:
    Contains fundamental information about the user, such as the name, personality, simple information that should help with the communication with the user. 
    
    2. Episodic Memory:
    Stores time-ordered, event-based information from interactionsâ€”essentially, the "diary" of user and assistant events.
    
    3. Procedural Memory:
    Definition: Contains how-to guides, step-by-step instructions, or processes the assistant or user might follow.  
    Example: "How to reset the router."  
    Each entry in Procedural Memory has:  
       (a) entry_type (e.g., 'workflow', 'guide', 'script')  
       (b) description (short descriptive text)  
       (c) steps (the procedure in a structured or JSON format)
       (d) tree_path: Required hierarchical categorization path for organizing procedures (e.g., ["technology", "networking", "troubleshooting"] for router reset guides, or ["cooking", "baking", "desserts"] for recipe instructions). Use this to create logical groupings and enable better organization of procedural knowledge.
    
    4. Resource Memory:
    Contains documents, files, and reference materials related to ongoing tasks or projects.
    
    5. Knowledge Vault:
    A repository for static, structured factual data such as phone numbers, email addresses, passwords, or other knowledge that are not necessarily always needed during the conversation but are potentially useful at some future point.
    
    6. Semantic Memory:
    Contains general knowledge about a concept (e.g. a new software name, a new concept) or an object (e.g. a person, a place, where the details would be the understanding and information about them.)
    
    When receiving messages and potentially a message from the meta agent (There will be a bracket saying "[Instruction from Meta Memory Manager]"), make a single comprehensive memory update:
    
    **Single Function Call Process:**
    1. **Analyze Content**: Examine all messages and conversations to identify step-by-step instructions, "how-to" guides, workflows, or any procedural knowledge.
    2. **Make Update**: Use ONE appropriate procedural memory function to save the most important identified procedure or instruction with proper entry_type ('workflow', 'guide', 'script'), description, and detailed steps. When appropriate, include a `tree_path` to categorize the procedure hierarchically (e.g., ["work", "development", "deployment"] for deployment procedures, or ["personal", "health", "exercise"] for workout routines).
    3. **Skip Update if Necessary**: If there is no updates to make, then skip the update by calling `finish_memory_update`.
    
    **Important Notes:**
    - Make only ONE function call total except for receiving the messages from Chat Agent
    - Look for any structured processes, workflows, or instructional content in the messages
    - Save procedures with appropriate entry_type ('workflow', 'guide', 'script'), description, and detailed steps
    - When relevant, use `tree_path` to create logical hierarchical categories for better organization (e.g., ["technology", "software", "installation"] or ["home", "maintenance", "repair"])
    - If there is absolutely nothing procedural to update, do not make any function calls
    - Prioritize the most complete or useful procedural information if multiple procedures are present 
    

Procedureç±»åž‹çš„è®°å¿†æŽ¨ç†å¾—åˆ°çš„ä¸ºä»¥ä¸‹ç»“æž„ä½“ï¼ˆæ¯ç§è®°å¿†çš„ç»“æž„å®šä¹‰ä¸åŒï¼‰

    class ProceduralMemoryItemBase(MirixBase):
        """
        Base schema for storing procedural knowledge (e.g., workflows, methods).
        """
        __id_prefix__ = "proc_item"
        entry_type: str = Field(..., description="Category (e.g., 'workflow', 'guide', 'script')")
        summary: str = Field(..., description="Short descriptive text about the procedure")
        steps: List[str] = Field(..., description="Step-by-step instructions as a list of strings")
        tree_path: List[str] = Field(..., description="Hierarchical categorization path as an array of strings")
    

* * *

**è®°å¿†çš„æœ¬è´¨ä¸æ˜¯å­˜å‚¨ï¼Œè€Œæ˜¯ç†è§£ï¼›ä¸æ˜¯è®°å½•ï¼Œè€Œæ˜¯è¿›åŒ–ã€‚** å½“AIæ™ºèƒ½ä½“å¼€å§‹ä»Žè‡ªå·±çš„æˆåŠŸä¸Žå¤±è´¥ä¸­å­¦ä¹ ï¼Œå½“å®ƒä»¬èƒ½å¤Ÿç§¯ç´¯å¹¶åº”ç”¨ç»éªŒæ—¶ï¼Œæˆ‘ä»¬ç¦»çœŸæ­£æ™ºèƒ½çš„ä¼™ä¼´å°±æ›´è¿‘äº†ä¸€æ­¥ã€‚

æœ¬æ–‡åªæ˜¯Agent Memoryé¢†åŸŸçš„å†°å±±ä¸€è§’ï¼Œæ›´å¤šç²¾å½©å†…å®¹ï¼Œå¯ç§»æ­¥ >> [DecryPrompt](https://github.com/DSXiangLi/DecryptPrompt)