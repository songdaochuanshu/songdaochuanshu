---
layout: post
title: 'ã€æ¸²æŸ“æµæ°´çº¿ã€‘[é€ç‰‡å…ƒé˜¶æ®µ]-[é€æ˜åº¦æµ‹è¯•]ä»¥UnityURPä¸ºä¾‹'
date: "2025-08-22T00:40:37Z"
---
ã€æ¸²æŸ“æµæ°´çº¿ã€‘\[é€ç‰‡å…ƒé˜¶æ®µ\]-\[é€æ˜åº¦æµ‹è¯•\]ä»¥UnityURPä¸ºä¾‹
=====================================

![ã€æ¸²æŸ“æµæ°´çº¿ã€‘[é€ç‰‡å…ƒé˜¶æ®µ]-[é€æ˜åº¦æµ‹è¯•]ä»¥UnityURPä¸ºä¾‹](https://img2024.cnblogs.com/blog/3685400/202508/3685400-20250821115641144-1967940391.png) æœ¬æ–‡ç³»ç»Ÿä»‹ç»äº†Unity URPä¸­é€æ˜åº¦æµ‹è¯•(AlphaTest)çš„æŠ€æœ¯åŸç†ä¸å®è·µåº”ç”¨ã€‚æ ¸å¿ƒæœºåˆ¶æ˜¯é€šè¿‡clip()å‡½æ•°æ¯”è¾ƒç‰‡å…ƒAlphaå€¼ä¸é¢„è®¾é˜ˆå€¼\_Cutoffï¼Œå®ç°"å…¨æœ‰æˆ–å…¨æ— "çš„ç¡¬æ€§é€æ˜æ•ˆæœï¼Œé€‚ç”¨äºéœ€è¦é”åˆ©è¾¹ç¼˜çš„ç‰©ä½“å¦‚æ¤è¢«ã€æ …æ ç­‰ã€‚æ–‡ç« è¯¦ç»†é˜è¿°äº†AlphaTestçš„å‘å±•å†ç¨‹ï¼Œä»Built-inç®¡çº¿åˆ°ç°ä»£URPçš„æ¼”è¿›ï¼ŒåŒ…æ‹¬URP14+æ–°å¢çš„å¤šé‡è£å‰ªé€šé“å’ŒGPUå®ä¾‹åŒ–æ”¯æŒç­‰ç‰¹æ€§ã€‚åŒæ—¶åˆ†æäº†AlphaTestä¸Early-Zçš„äº’æ–¥å…³ç³»ï¼Œå¹¶æä¾›äº†Shaderé…ç½®ç¤ºä¾‹å’Œæ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼Œå¦‚åˆç†è®¾

> **é€æ˜åº¦æµ‹è¯•ä¸é€æ˜åº¦æ··åˆï¼ˆBlendï¼‰äº’æ–¥ï¼Œéœ€æ ¹æ®éœ€æ±‚é€‰æ‹©å…¶ä¸€ï¼**

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

é€æ˜åº¦æµ‹è¯•(Alpha Test)æ˜¯ä¸€ç§é€šè¿‡é˜ˆå€¼ç­›é€‰ç‰‡å…ƒçš„ç¡¬æ€§é€æ˜æ–¹æ¡ˆï¼Œå…¶æ ¸å¿ƒé€»è¾‘æ˜¯é€šè¿‡`clip()`å‡½æ•°æ¯”è¾ƒç‰‡å…ƒAlphaå€¼ä¸é¢„è®¾é˜ˆå€¼`_Cutoff`ï¼šå½“Alphaä½äºé˜ˆå€¼æ—¶ç›´æ¥ä¸¢å¼ƒç‰‡å…ƒï¼Œåä¹‹åˆ™å®Œæ•´æ¸²æŸ“ã€‚

*   **äºŒå…ƒåˆ¤å®š**ï¼šå‘ˆç°"å…¨æœ‰æˆ–å…¨æ— "çš„è§†è§‰æ•ˆæœï¼Œé€‚ç”¨äºæ …æ ã€æ ‘å¶ç­‰éœ€è¦é”åˆ©è¾¹ç¼˜çš„ç‰©ä½“
*   **æ€§èƒ½ä¼˜åŠ¿**ï¼šæ— éœ€æ··åˆè®¡ç®—ï¼Œåœ¨ç§»åŠ¨ç«¯å’Œä½é…è®¾å¤‡ä¸Šè¡¨ç°ä¼˜å¼‚

æ ¸å¿ƒåº”ç”¨åœºæ™¯
======

*   æ¸¸æˆç¾æœ¯ä¼˜åŒ–
    *   æ¤è¢«ç³»ç»Ÿï¼šå®ç°æ ‘å¶é•‚ç©ºæ•ˆæœï¼ˆæ€§èƒ½è¾ƒAlpha Blendæå‡40%ï¼‰
    *   å»ºç­‘é®ç½©ï¼šå¿«é€Ÿåˆ›å»ºæ …æ ã€é“ä¸ç½‘ç­‰è§„åˆ™é•‚ç©ºç»“æ„
*   ç‰¹æ•ˆåˆ¶ä½œ
    *   ç²’å­æ¶ˆèï¼šé…åˆå™ªå£°å›¾å®ç°ç‡ƒçƒ§/è…èš€åŠ¨ç”»
    *   UIé®ç½©ï¼šç”¨äºå¼‚å½¢ç•Œé¢å…ƒç´ è£å‰ª
*   æŠ€æœ¯ç¾æœ¯æ–¹æ¡ˆ
    *   ä½æˆæœ¬åŠé€æ¨¡æ‹Ÿï¼šé€šè¿‡æŠ–åŠ¨é˜ˆå€¼(dithering)å®ç°ä¼ªåŠé€æ•ˆæœ
    *   é®æŒ¡å‰”é™¤è¾…åŠ©ï¼šæ ‡è®°é€æ˜åŒºåŸŸå®ç°è‡ªå®šä¹‰é®æŒ¡é€»è¾‘

å†å²ç®€è¿°
====

Built-inç®¡çº¿é˜¶æ®µï¼ˆ2018å¹´å‰ï¼‰
--------------------

*   æ—©æœŸUnityå†…ç½®ç®¡çº¿é€šè¿‡`Queue="AlphaTest"`æ ‡ç­¾å®ç°åŸºç¡€åŠŸèƒ½ï¼Œä½†å­˜åœ¨ï¼š
    *   ç€è‰²å™¨ä»£ç å†—ä½™ï¼Œéœ€æ‰‹åŠ¨å¤„ç†å…‰ç…§æ¨¡å‹å…¼å®¹æ€§
    *   ä¸å»¶è¿Ÿæ¸²æŸ“è·¯å¾„å­˜åœ¨å…¼å®¹æ€§é—®é¢˜

URPæ ‡å‡†åŒ–é˜¶æ®µï¼ˆ2019-2022ï¼‰
-------------------

*   URP 7.xç‰ˆæœ¬å¼•å…¥å…³é”®æ”¹è¿›ï¼š
    *   **Shader Graphé›†æˆ**ï¼šå¯è§†åŒ–é…ç½®`Alpha Clip Threshold`å±æ€§
    *   **æ¸²æŸ“é˜Ÿåˆ—ä¼˜åŒ–**ï¼šè‡ªåŠ¨å¤„ç†AlphaTestç‰©ä½“åœ¨3000-3500é˜Ÿåˆ—çš„æ’åºé€»è¾‘
    *   **è·¨å¹³å°ä¸€è‡´æ€§**ï¼šåœ¨OpenGL ES 3.0ä¸Metal APIä¸­å®ç°ç›¸åŒè£å‰ªè¡Œä¸º

ç°ä»£URPå¢å¼ºï¼ˆ2023-2025ï¼‰
------------------

*   æœ€æ–°URP 14+ç‰ˆæœ¬æ–°å¢ç‰¹æ€§ï¼š
    *   **å¤šé‡è£å‰ªé€šé“**ï¼šæ”¯æŒåŸºäºR/G/Bé€šé“çš„å¤åˆæµ‹è¯•æ¡ä»¶
    *   **GPUå®ä¾‹åŒ–æ”¯æŒ**ï¼šé€æ˜æµ‹è¯•ç‰©ä½“å¯å‚ä¸å®ä¾‹åŒ–æ¸²æŸ“æ‰¹æ¬¡
    *   **VFX Graphå…¼å®¹**ï¼šç²’å­ç³»ç»Ÿå¯ç›´æ¥å¼•ç”¨é€æ˜åº¦æµ‹è¯•æè´¨

å¦‚æœå¯ç”¨äº†AlphaTest é‚£ä¹ˆEarly-Zåˆ™è¢«å¼ƒç”¨
============================

*   å› ä¸ºAlphaTestçš„clip()æ“ä½œæ˜¯åœ¨ç‰‡å…ƒä¸­ï¼Œè€ŒEarly-Zæ˜¯åœ¨å…‰æ …åŒ–å’Œç‰‡å…ƒä¹‹å‰åšçš„æµ‹è¯•ï¼Œå¦‚æœåœ¨ç‰‡å…ƒç€è‰²ä¸­ä¸»åŠ¨æŠ›å¼ƒäº†ç‰‡å…ƒï¼Œé‚£ä¹ˆè¢«é®æŒ¡çš„ç‰‡å…ƒå°±å¯è§äº†ï¼Œä½†æ˜¯Early-Zä¸­å·²ç»å› ä¸ºæå‰è®¡ç®—ä¸å¯è§ç»™é‡æ–°å¯è§çš„ç‰‡å…ƒä¸¢å¼ƒäº†ï¼Œè¿™æ ·å°±æ— æ³•æ­£å¸¸è¿›è¡Œè®¡ç®—ã€‚é‚£ä¹ˆGPUåœ¨ä¼˜åŒ–ç®—æ³•æ—¶ï¼Œå¦‚æœæ£€æŸ¥åˆ°ç‰‡å…ƒç€è‰²å™¨ä¸­å­˜åœ¨æŠ›å¼ƒç‰‡å…ƒå’Œæ”¹å†™ç‰‡å…ƒæ·±åº¦çš„æ“ä½œæ—¶ï¼Œæ”¾å¼ƒEarly-Zçš„æ“ä½œã€‚
*   Early-Zç”±GPUè‡ªåŠ¨å®ç°ï¼Œæ¶‰åŠä¸¤ä¸ªpassï¼Œç¬¬ä¸€ä¸ªZ-pre-passï¼Œå¯¹äºæ‰€æœ‰å†™å…¥æ·±åº¦æ•°æ®çš„ç‰©ä½“å…ˆç”¨ä¸€ä¸ªè¶…çº§ç®€å•çš„passå†™å…¥æ·±åº¦ç¼“å­˜ã€‚ç¬¬äºŒä¸ªpasså…³é—­æ·±åº¦å†™å…¥ï¼Œå¼€å¯æ·±åº¦æµ‹è¯•ï¼Œæ­£å¸¸æ¸²æŸ“æµç¨‹æ¸²æŸ“ã€‚

ä½¿ç”¨æ³¨æ„
====

*   AlphaTest ç‰©ä½“å»ºè®®æ ‡è®°ä¸ºÂ `"Queue"="AlphaTest"`ï¼ˆå€¼2450ï¼‰ï¼Œç¡®ä¿åœ¨é€æ˜ç‰©ä½“å‰æ¸²æŸ“â€Œ
*   ä½¿ç”¨Â `Always`/`Never`Â å¯å®Œå…¨ç»•è¿‡æµ‹è¯•ï¼Œå‡å°‘GPUåˆ†æ”¯åˆ¤æ–­â€Œ
*   å¤æ‚æ¯”è¾ƒå‡½æ•°ï¼ˆå¦‚Â `NotEqual`ï¼‰å¯èƒ½å¢åŠ ç‰‡å…ƒç€è‰²å™¨æŒ‡ä»¤æ•°â€Œ
*   æ ¹æ®alphaå€¼é˜ˆå€¼å†³å®šç‰‡å…ƒä¿ç•™/ä¸¢å¼ƒ
*   å¸¸ç”¨äºæ¤è¢«ã€é•‚ç©ºæè´¨ç­‰æ•ˆæœå®ç°â€Œ

**Unity ä¸­çš„é€æ˜åº¦æµ‹è¯•ï¼ˆAlphaTestï¼‰å…·ä½“è¿‡ç¨‹**
================================

**SubShader ä¸ Pass è®¾ç½®**â€Œ
------------------------

*   é…ç½®æ¸²æŸ“é€šé“ï¼ˆPassï¼‰å¯ç”¨ AlphaTestï¼ŒæŒ‡å®šæ¯”è¾ƒå‡½æ•°ï¼ˆå¦‚ Greater æˆ– Lessï¼‰â€Œ

### **æ¯”è¾ƒå‡½æ•°åˆ—è¡¨â€Œ**

å‡½æ•°æŒ‡ä»¤

é€»è¾‘æ¡ä»¶

å…¸å‹åº”ç”¨åœºæ™¯

`Greater`

alpha > é˜ˆå€¼ (`_Cutoff`)

ç¡¬è¾¹é®ç½©ï¼ˆå¦‚æ ‘å¶é•‚ç©ºï¼‰â€Œ

`GEqual`

alpha â‰¥ é˜ˆå€¼

åŠé€æ˜è¾¹ç¼˜æŠ—é”¯é½¿ä¼˜åŒ–â€Œ

`Less`

alpha < é˜ˆå€¼

åå‘é®ç½©ï¼ˆå¦‚æ´å­”æ•ˆæœï¼‰â€Œ

`LEqual`

alpha â‰¤ é˜ˆå€¼

é€æ˜æ¸å˜å‰”é™¤â€Œ

`Equal`

alpha == é˜ˆå€¼

ç²¾ç¡®åŒ¹é…ç‰¹å®šé€æ˜åº¦â€Œ

`NotEqual`

alpha != é˜ˆå€¼

æ’é™¤ç‰¹å®šé€æ˜å€¼â€Œ

`Always`

å§‹ç»ˆé€šè¿‡æµ‹è¯•

å¼ºåˆ¶ç¦ç”¨é€æ˜åº¦æµ‹è¯•â€Œ

`Never`

å§‹ç»ˆä¸¢å¼ƒç‰‡å…ƒ

å®Œå…¨éšè—ç‰©ä½“â€Œ

### **â€Œé…ç½®ç¤ºä¾‹â€Œ**

*   åœ¨ SubShader çš„ Pass ä¸­å£°æ˜æ¯”è¾ƒå‡½æ•°ä¸é˜ˆå€¼ï¼š

    SubShader {
        Pass {
            // å¯ç”¨AlphaTestå¹¶è®¾ç½®æ¯”è¾ƒæ¨¡å¼
            AlphaTest Greater 0.5  // ä»…ä¿ç•™alpha>0.5çš„ç‰‡å…ƒ
            CGPROGRAM
            #pragma vertex vert
            #pragma fragment frag
            uniform float _Cutoff; // é˜ˆå€¼å˜é‡
    
            fixed4 frag (v2f i) : SV_Target {
                fixed4 col = tex2D(_MainTex, i.uv);
                clip(col.a - _Cutoff); // ç­‰æ•ˆäºAlphaTest Greater
                return col;
            }
            ENDCG
        }
    }
    

> æ³¨ï¼šclip()Â å‡½æ•°åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­å¯ç›´æ¥å®ç°é˜ˆå€¼æ¯”è¾ƒï¼Œä¸Â AlphaTestÂ æŒ‡ä»¤æ•ˆæœç­‰ä»·â€Œ

è‡ªå®šä¹‰shaderä¸­ç‰‡å…ƒç€è‰²å™¨ä¸­å‰”é™¤æˆ–æ··åˆ
=====================

**Shader å±æ€§å®šä¹‰**â€Œ
----------------

*   åœ¨ Shader ä»£ç ä¸­å£°æ˜é˜ˆå€¼å±æ€§ï¼ˆå¦‚Â `_Cutoff`ï¼‰ï¼Œç”¨äºæ§åˆ¶ alpha çš„ä¸´ç•Œå€¼â€Œ

**ç‰‡å…ƒç€è‰²å™¨å¤„ç†**â€Œ
------------

*   åœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­ï¼Œè®¡ç®—ç‰‡å…ƒ alpha å€¼å¹¶ä¸Â `_Cutoff`Â æ¯”è¾ƒï¼›è‹¥æœªè¾¾æ ‡ï¼Œåˆ™ä½¿ç”¨Â `clip()`Â æˆ–Â `discard`Â æŒ‡ä»¤ä¸¢å¼ƒç‰‡å…ƒï¼Œé˜»æ­¢å…¶è¿›å…¥åç»­æµ‹è¯•â€Œ

**æ¸²æŸ“è¾“å‡º**â€Œ
---------

*   é€šè¿‡æµ‹è¯•çš„ç‰‡å…ƒå‚ä¸é¢œè‰²æ··åˆç­‰åç»­æµç¨‹ï¼Œå¦åˆ™è¢«å‰”é™¤â€Œ

* * *

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

ï¼ˆæ¬¢è¿_ç‚¹èµç•™è¨€_æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰