---
layout: post
title: 'æ–‡ç”Ÿå›¾ï¼šä»‹ç»ä¸€ä¸ªæ–‡å­—ç”Ÿæˆå›¾ç‰‡çš„å¼€æºå·¥å…·'
date: "2025-07-11T00:44:06Z"
---
æ–‡ç”Ÿå›¾ï¼šä»‹ç»ä¸€ä¸ªæ–‡å­—ç”Ÿæˆå›¾ç‰‡çš„å¼€æºå·¥å…·
===================

ä¹‹å‰ä»‹ç»è¿‡éŸ³é¢‘å¤„ç†ï¼Œå›¾ç‰‡ç”Ÿæˆè§†é¢‘ï¼Œå›¾ç‰‡+éŸ³é¢‘å¯¹å˜´ï¼Œè§†é¢‘+éŸ³é¢‘å¯¹å˜´ã€‚

ä»Šå¤©ä»‹ç»ä¸€ä¸ªæ–‡å­—ç”Ÿæˆå›¾ç‰‡çš„å¼€æºé¡¹ç›®ï¼Œæˆ‘å·²ç»åœ¨æœ¬åœ°æ­å»ºå®Œæˆäº†ä½¿ç”¨äº†ã€‚

ä¸€ï¼šä¸‹è½½æºä»£ç 
-------

åœ°å€ï¼š[https://github.com/AUTOMATIC1111/stable-diffusion-webui](https://github.com/AUTOMATIC1111/stable-diffusion-webui)

ç›´æ¥ä¸‹è½½ï¼Œè§£å‹å°±è¡Œã€‚

äºŒï¼šç¯å¢ƒæ­å»º
------

ä½¿ç”¨Anacondaç¯å¢ƒä¸­æ­å»ºï¼š

#è¿›å…¥åŠ å‹åŒ…
cd stable\-diffusion-webui

#åˆ›å»ºç¯å¢ƒ
conda create \--name stable-diff python=3.10

#æ¿€æ´»ç¯å¢ƒï¼š
conda activate stable\-diff

#é¦–æ¬¡è¿è¡Œï¼ˆä¼šä¸‹è½½æ¨¡å‹ï¼‰ï¼š
python launch.py  
  
#è¿è¡Œä¸­å¦‚æœæœ‰æŠ¥é”™ï¼Œå·®ä»€ä¹ˆå°±å®‰è£…ä»€ä¹ˆ  
pip install ...

ä¸‰ï¼šè¿è¡ŒÂ 
-----

è¿è¡Œï¼š
python  webui.py

å››ï¼šæ·»åŠ v2æ–°æ¨¡å‹
---------

è¿™é‡Œé»˜è®¤ä¸‹è½½çš„æ˜¯v1-5-pruned-emaonlyã€‚æŸ¥äº†ä¸‹æœ€æ–°çš„æœ‰v2ç‰ˆæœ¬ï¼Œä¸‹é¢å°±é…ç½®ä¸ªv2ç‰ˆæœ¬ã€‚

ï¼ˆ1ï¼‰ï¼šæ¨¡å‹ä¸‹è½½ï¼š[https://huggingface.co/stabilityai/stable-diffusion-2-1/tree/main](https://huggingface.co/stabilityai/stable-diffusion-2-1/tree/main)

ä¸‹è½½ æ–‡ä»¶**v2-1\_768-ema-pruned.safetensors æœ‰ç‚¹å¤§5Gã€‚æ”¾åˆ°æ–‡ä»¶å¤¹\\stable-diffusion-webui\\models\\Stable-diffusion ä¸­ã€‚**

ç„¶åé‡å¯æœåŠ¡ï¼Œåˆ·æ–°æ¨¡æ¿ï¼Œé‡æ–°ç”Ÿæˆã€‚å›¾ç‰‡ç”Ÿæˆäº†ï¼Œä½†æ˜¯å›¾åƒä¸å¯¹ã€‚

**æ³¨æ„å¦‚æœæœ‰æŠ¥é”™ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸‹ï¼š**

   modules.devices.NansException: A tensor with NaNs was produced in Unet. This could be either because there's not enough precision to represent the picture, or because your video card does not support half type. Try setting the "Upcast cross attention layer to float32" option in Settings > Stable Diffusion or using the --no-half commandline argument to fix this. Use --disable-nan-check commandline argument to disable this check.

ï¼ˆ2ï¼‰ï¼šè§£ç å™¨ä¸‹è½½ï¼Œè¿™é‡Œä½¿ç”¨ç¤¾åŒºå¼€æºçš„è§£ç å™¨

[https://huggingface.co/stabilityai/sd-vae-ft-mse-original/resolve/main/vae-ft-mse-840000-ema-pruned.safetensors](https://huggingface.co/stabilityai/sd-vae-ft-mse-original/resolve/main/vae-ft-mse-840000-ema-pruned.safetensors)ã€‚

Â ä¸‹è½½åå­˜æ”¾åœ¨æ–‡ä»¶å¤¹Â **\\stable-diffusion-webui\\models\\VAE ã€‚**

**ï¼ˆ3ï¼‰ï¼šé…ç½®ï¼š**

1.  å›åˆ° Web UI ç•Œé¢ï¼Œè¿›å…¥Â **Settings (è®¾ç½®)**Â æ ‡ç­¾é¡µã€‚
    
2.  åœ¨å·¦ä¾§èœå•ï¼Œç‚¹å‡»Â **Stable Diffusion**Â å­èœå•ã€‚ï¼ˆå°±æ˜¯ä½ ä¹‹å‰æ‰¾åˆ° "Upcast" é€‰é¡¹çš„é‚£ä¸ªåœ°æ–¹ï¼‰ã€‚
    
3.  åœ¨å³ä¾§çš„é€‰é¡¹ä¸­ï¼Œæ‰¾åˆ°ä¸€ä¸ªå«åšÂ **SD VAE**Â çš„ä¸‹æ‹‰èœå•ã€‚
    
4.  ç‚¹å‡»è¿™ä¸ªä¸‹æ‹‰èœå•ï¼Œé€‰æ‹©ä½ åˆšåˆšæ”¾è¿›å»çš„é‚£ä¸ª VAE æ–‡ä»¶ï¼ˆæ¯”å¦‚Â vae-ft-mse-840000-ema-pruned.safetensorsï¼‰ã€‚
    
    *   å¦‚æœèœå•é‡Œæ²¡çœ‹åˆ°ï¼Œå¯ä»¥ç‚¹å‡»ä¸‹æ‹‰èœå•æ—è¾¹çš„å°å°çš„**åˆ·æ–°æŒ‰é’® ğŸ”„**ã€‚
        
5.  **éå¸¸é‡è¦**ï¼šæ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨ï¼Œç‚¹å‡»æ©™è‰²çš„Â Â **(åº”ç”¨è®¾ç½®)**ï¼Œç„¶åç‚¹å‡»Â Â **(é‡è½½ç•Œé¢)ã€‚**  
    

**ï¼ˆ4ï¼‰ï¼šé‡æ–°å¯åŠ¨ï¼Œæ³¨æ„æ˜¯åœ¨cmdçš„**Â conda ç¯å¢ƒä¸­é‡æ–°å¯åŠ¨æœåŠ¡ã€‚

é€‰æ‹©v2æ—¶ï¼Œæœ‰ä¸€äº›å‚æ•°å¯ä»¥é€‚å½“çš„ä¿®æ”¹ä¸€äº›ï¼Œç„¶åä½¿ç”¨ç›¸åŒçš„æç¤ºè¯ï¼Œé‡æ–°ç‚¹å‡»ç”Ÿæˆã€‚

**æå®šï¼Œæ”¶å·¥ã€‚**

**æœ€åä¸€å¥ï¼šå¦‚æœä½ çš„ç”µè„‘è¿˜ä¸é”™ï¼ŒGPU16Gæˆ–è€…æ›´å¤§ï¼Œå¯ä»¥è¯•è¯•ï¼š**stable-diffusion-xlï¼Œç”»è´¨æ›´é«˜ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ä½¿ç”¨sd\_xlæ¨¡å‹æ˜¯ä¸éœ€è¦é…ç½®VAEçš„ï¼Œåœ¨è®¾ç½®é‡Œé¢å°†VAEè®¾ç½®ä¸ºNONE,ä¸ç„¶åè€Œä¼šé™ä½ç”»è´¨ï¼‰ã€‚****

[**https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0**](https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0)