---
layout: post
title: 'ã€å…‰ç…§ã€‘[æ¼«åå°„]UnityURPå…°ä¼¯ç‰¹èƒ½é‡å®ˆæ’å—?'
date: "2025-09-20T00:37:00Z"
---
ã€å…‰ç…§ã€‘\[æ¼«åå°„\]UnityURPå…°ä¼¯ç‰¹èƒ½é‡å®ˆæ’å—?
============================

![ã€å…‰ç…§ã€‘[æ¼«åå°„]UnityURPå…°ä¼¯ç‰¹èƒ½é‡å®ˆæ’å—?](https://img2024.cnblogs.com/blog/3685400/202509/3685400-20250919112346107-1656119224.png) æœ¬æ–‡æ¢è®¨äº†Unity URPæ¸²æŸ“ç®¡çº¿ä¸­å…°ä¼¯ç‰¹æ¼«åå°„æ¨¡å‹çš„èƒ½é‡å®ˆæ’æ€§é—®é¢˜ã€‚ä¼ ç»Ÿå…°ä¼¯ç‰¹æ¨¡å‹å› ç¼ºä¹å½’ä¸€åŒ–å› å­ä¼šå¯¼è‡´åå°„ç‡è¶…æ ‡ï¼ŒURPé€šè¿‡å¼•å…¥1/Ï€å› å­ä¿®æ­£å®ç°äº†èƒ½é‡å®ˆæ’ã€‚æ–‡ç« åˆ†æäº†ä¿®æ­£æ¨¡å‹ä¸PBRå·¥ä½œæµçš„å…¼å®¹æ€§ï¼ŒæŒ‡å‡ºå…¶åœ¨æè´¨å‚æ•°ã€HDRç®¡çº¿å’ŒåæœŸå¤„ç†æ–¹é¢å®Œå…¨å…¼å®¹ï¼Œä½†åœ¨é‡‘å±åº¦å¤„ç†ã€è²æ¶…å°”æ•ˆåº”å’Œå…¨å±€å…‰ç…§æ–¹é¢å­˜åœ¨å±€é™ã€‚å»ºè®®ç§»åŠ¨ç«¯é¡¹ç›®ä½¿ç”¨ä¼˜åŒ–ç‰ˆå…°ä¼¯ç‰¹ï¼ŒPC/ä¸»æœºé¡¹ç›®é‡‡ç”¨å®Œæ•´PBRæ¨¡å‹ï¼Œé£æ ¼åŒ–æ¸²æŸ“å¯è‡ªå®šä¹‰å¢å¼ºæ•ˆæœã€‚URPæ”¯æŒé€šè¿‡æ¡ä»¶ç¼–è¯‘å®ç°ä¸åŒæ¨¡å‹çš„çµæ´»åˆ‡æ¢ï¼Œå¼€å‘è€…å¯æ ¹æ®é¡¹ç›®éœ€æ±‚åœ¨ç‰©ç†å‡†ç¡®æ€§å’Œæ€§èƒ½ä¹‹é—´å–å¾—å¹³è¡¡ã€‚

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

**å…°ä¼¯ç‰¹æ¼«åå°„çš„èƒ½é‡å®ˆæ’æ€§**
================

**â€Œèƒ½é‡å®ˆæ’åŸºæœ¬åŸç†â€Œ**
--------------

åœ¨ç‰©ç†æ­£ç¡®çš„æ¸²æŸ“ä¸­ï¼Œèƒ½é‡å®ˆæ’è¦æ±‚ï¼š

1.  è¡¨é¢åå°„çš„å…‰èƒ½æ€»é‡ â‰¤ å…¥å°„å…‰èƒ½
2.  æ¼«åå°„+é«˜å…‰åå°„ â‰¤ 1.0
3.  æ²¡æœ‰èƒ½é‡å‡­ç©ºäº§ç”Ÿæˆ–æ¶ˆå¤±

**â€Œç»å…¸å…°ä¼¯ç‰¹æ¨¡å‹çš„èƒ½é‡å®ˆæ’é—®é¢˜â€Œ**
====================

ä¼ ç»Ÿå…°ä¼¯ç‰¹æ¼«åå°„å…¬å¼ï¼š
-----------

$æ¼«åå°„ = è¡¨é¢åç…§ç‡ Ã— max(0, NÂ·L)$

â€Œ**ä¸å®ˆæ’çš„åŸå› **â€Œï¼š
-------------

*   â€Œ**ç¼ºä¹å½’ä¸€åŒ–å› å­**â€Œï¼š
    *   åŠçƒç§¯åˆ†ç»“æœåº”ä¸ºÏ€ï¼Œä½†å…°ä¼¯ç‰¹æ¨¡å‹ç›´æ¥ä½¿ç”¨NÂ·L
    *   æ­£ç¡®å…¬å¼åº”ä¸ºï¼š$æ¼«åå°„ = è¡¨é¢åç…§ç‡ / Ï€ Ã— max(0, NÂ·L)$
*   â€Œ**åå°„ç‡è¶…æ ‡**â€Œï¼š
    *   å½“åç…§ç‡(albedo)è®¾ä¸º1.0æ—¶ï¼Œåå°„ç‡å¯èƒ½è¶…è¿‡100%
    *   ä¾‹å¦‚ï¼šNÂ·L=1æ—¶åå°„ç‡ä¸º100%ï¼Œä½†å®é™…åº”æœ‰å¸æ”¶æŸå¤±
*   â€Œ**æ’å®šåå°„ç‡**â€Œï¼š
    *   å¯¹æ‰€æœ‰å…¥å°„è§’ä½¿ç”¨ç›¸åŒåå°„ç‡
    *   ç°å®ä¸­è²æ¶…å°”æ•ˆåº”å¯¼è‡´æ å°„è§’åå°„ç‡å¢åŠ 

**â€ŒURPä¸­çš„ä¿®æ­£æ–¹æ¡ˆâ€Œ**
===============

Unity URPé‡‡ç”¨æ”¹è¿›çš„å…°ä¼¯ç‰¹æ¨¡å‹ï¼š

    hlsl
    // URPå®é™…å®ç°ï¼ˆLighting.hlslï¼‰
    half diffuseTerm = saturate(dot(normal, lightDir));
    half3 diffuse = albedo * lightColor * diffuseTerm * INV_PI;
    

å…¶ä¸­ï¼š

*   `INV_PI â‰ˆ 0.31831`Â (1/Ï€)
*   é€šè¿‡é™¤ä»¥Ï€å®ç°èƒ½é‡å½’ä¸€åŒ–

**PBRå·¥ä½œæµå…¼å®¹æ€§åˆ†æ**
===============

**â€Œå…¼å®¹æ€§ç±»å‹â€Œ**
-----------

å…¼å®¹ç»´åº¦

æ”¯æŒæƒ…å†µ

è¯´æ˜

æ•°æ®è¾“å…¥

âœ… å®Œå…¨å…¼å®¹

ä½¿ç”¨ç›¸åŒçš„albedoè´´å›¾è¾“å…¥

å…‰ç…§è®¡ç®—

âš ï¸ éƒ¨åˆ†å…¼å®¹

ç¼ºä¹ç‰©ç†åå°„ç‰¹æ€§

æè´¨å·¥ä½œæµ

âœ… å®Œå…¨å…¼å®¹

æ”¯æŒæ ‡å‡†æè´¨å‚æ•°

åæœŸå¤„ç†

âœ… å®Œå…¨å…¼å®¹

å…¼å®¹HDR/Bloomç­‰æ•ˆæœ

å…¨å±€å…‰ç…§

âš ï¸ æœ‰é™å…¼å®¹

éœ€è¦ç‰¹æ®Šå¤„ç†

**â€Œå®Œå…¨å…¼å®¹çš„æ–¹é¢â€Œ**
-------------

*   â€Œ**æè´¨å‚æ•°ç»Ÿä¸€**â€Œï¼š
    *   ä½¿ç”¨ç›¸åŒçš„albedoçº¹ç†å’Œé¢œè‰²å‚æ•°
    *   æ”¯æŒç›¸åŒçš„æ³•çº¿è´´å›¾æ ¼å¼
*   â€Œ**HDRç®¡çº¿æ•´åˆ**â€Œï¼š
    *   æ”¯æŒçº¿æ€§é¢œè‰²ç©ºé—´
    *   å…¼å®¹HDRæ¸²æŸ“å’Œè‡ªåŠ¨æ›å…‰
*   â€Œ**åæœŸå¤„ç†ååŒ**â€Œï¼š
    *   ä¸Bloomæ•ˆæœæ— ç¼é…åˆ
    *   æ”¯æŒå±å¹•ç©ºé—´ç¯å¢ƒå…‰é®è”½(SSAO)

**â€Œæœ‰é™å…¼å®¹çš„æ–¹é¢â€Œ**
-------------

*   â€Œ**èƒ½é‡å®ˆæ’ç¼ºå£**â€Œï¼š
    
    graph LR A\[å…¥å°„å…‰èƒ½é‡\] --> B\[ç»éªŒæ¨¡å‹\] B --> C\[æ¼«åå°„è¾“å‡º\] C --> D{èƒ½é‡æ€»å’Œ} D --> |100%| E\[è¿åå®ˆæ’\] D --> |ç‰©ç†æ¨¡å‹<90%| F\[æ­£ç¡®å®ˆæ’\]
    
*   â€Œ**é‡‘å±åº¦å·¥ä½œæµé—®é¢˜**â€Œï¼š
    
    *   é‡‘å±è¡¨é¢åº”æ— æ¼«åå°„ï¼Œä½†å…°ä¼¯ç‰¹æ¨¡å‹æ— æ³•æ­£ç¡®å¤„ç†
    *   éœ€è¦é¢å¤–ä»£ç å±è”½é‡‘å±è¡¨é¢çš„æ¼«åå°„
*   â€Œ**è²æ¶…å°”æ•ˆåº”ç¼ºå¤±**â€Œï¼š
    
    *   æ å°„è§’åå°„ç‡æ— å¢å¼º
    *   å½±å“è¾¹ç¼˜å…‰ç…§çš„çœŸå®æ€§
*   â€Œ**å…¨å±€å…‰ç…§ä¸ä¸€è‡´**â€Œï¼š
    
    *   ä¸åŸºäºç‰©ç†çš„GIç³»ç»Ÿé…åˆæ—¶å¯èƒ½å‡ºç°èƒ½é‡ä¸åŒ¹é…
    *   éœ€è¦æ‰‹åŠ¨è°ƒæ•´é—´æ¥å…‰ç…§å¼ºåº¦

### **â€ŒURPä¸­çš„å…¼å®¹æ€§å®ç°â€Œ**

*   URPé‡‡ç”¨æ··åˆæ–¹æ¡ˆå®ç°å…¼å®¹ï¼š

    hlsl
    // URPçš„BRDFå¤„ç†ï¼ˆBRDF.hlslï¼‰
    half3 BRDF_lambert(half3 albedo)
    {
        return albedo * INV_PI;
    }
    
    #if defined(_PBR_ENABLED)
        // ç‰©ç†æ­£ç¡®çš„æ¼«åå°„è®¡ç®—
        half3 diffuse = BRDF_lambert(albedo) * saturate(NdotL);
    #else
        // ä¼ ç»Ÿå…°ä¼¯ç‰¹è®¡ç®—
        half3 diffuse = albedo * saturate(NdotL);
    #endif
    

**ç»“è®ºä¸å»ºè®®**
=========

### **â€Œèƒ½é‡å®ˆæ’ç»“è®ºâ€Œ**

*   â€Œ**åŸå§‹å…°ä¼¯ç‰¹æ¨¡å‹ä¸å®ˆæ’**â€Œï¼šç¼ºä¹å½’ä¸€åŒ–å› å­ï¼Œåå°„ç‡å¯èƒ½è¶…æ ‡
*   â€Œ**ä¿®æ­£ç‰ˆå¯åŸºæœ¬å®ˆæ’**â€Œï¼šé€šè¿‡æ·»åŠ 1/Ï€å› å­å®ç°èƒ½é‡å¹³è¡¡
*   â€Œ**URPå®ç°éƒ¨åˆ†å®ˆæ’**â€Œï¼šåœ¨æ ‡å‡†ç€è‰²å™¨ä¸­å·²åŒ…å«ä¿®æ­£å› å­

### **â€ŒPBRå…¼å®¹æ€§ç»“è®ºâ€Œ**

*   âœ… â€Œ**ç¾æœ¯å·¥ä½œæµå…¼å®¹**â€Œï¼šå¯ä½¿ç”¨ç›¸åŒæè´¨å’Œçº¹ç†
*   ï¸ â€Œ**ç‰©ç†ç²¾åº¦å±€é™**â€Œï¼šæ— æ³•å®Œå…¨åŒ¹é…ç‰©ç†åå°„ç‰¹æ€§
*   ï¸ â€Œ**å·¥ç¨‹å®ç”¨æ–¹æ¡ˆ**â€Œï¼šé€‚åˆé£æ ¼åŒ–/æ€§èƒ½ä¼˜å…ˆé¡¹ç›®

### **â€Œå®é™…å¼€å‘å»ºè®®â€Œ**

*   â€Œ**ç§»åŠ¨ç«¯é¡¹ç›®**â€Œï¼š
    
        hlsl
        // ä½¿ç”¨ä¼˜åŒ–ç‰ˆå…°ä¼¯ç‰¹ï¼ˆåŒ…å«èƒ½é‡ä¿®æ­£ï¼‰
        half3 diffuse = albedo * saturate(NdotL) * 0.31831;
        
    
*   â€Œ**PC/ä¸»æœºé¡¹ç›®**â€Œï¼š
    
        hlsl
        // ä½¿ç”¨å®Œæ•´PBRæ¼«åå°„ï¼ˆDisneyæ¨¡å‹ï¼‰
        half3 diffuse = albedo * (1 / PI) * (1 - metallic) * saturate(NdotL);
        
    
*   â€Œ**é£æ ¼åŒ–æ¸²æŸ“**â€Œï¼š
    
        hlsl
        // è‰ºæœ¯å¯¼å‘çš„å¢å¼ºç‰ˆ
        half3 diffuse = albedo * pow(saturate(NdotL), _RampPower) * _Intensity;
        
    

åœ¨URPä¸­ï¼Œç»éªŒæ¨¡å‹ä¸PBRå·¥ä½œæµå¯é€šè¿‡æ¡ä»¶ç¼–è¯‘å®ç°æ— ç¼åˆ‡æ¢ï¼Œå¼€å‘è€…å¯æ ¹æ®ç›®æ ‡å¹³å°å’Œè‰ºæœ¯éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„æ¨¡å‹ï¼Œåœ¨ç‰©ç†å‡†ç¡®æ€§å’Œæ€§èƒ½ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚

* * *

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

ï¼ˆæ¬¢è¿_ç‚¹èµç•™è¨€_æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰