---
layout: post
title: '利用python开发的一款日志自动查找复制小工具'
date: "2025-09-11T00:39:40Z"
---
利用python开发的一款日志自动查找复制小工具
========================

一、背景  
公司主polarion服务器的同步相关日志保存在了服务器指定目录，一般等于1KB的就是无数据的单纯记录日志(无同步），如果大于1KB，则是有同步的记录相关数据。因和对端备polarion服务器同步在每天的02:00、10:00、14:00、18:00，目前每次执行大概需要45分钟左右。需要手动去拉取这个时间段大于1KB的日志并提交给外部工程师分析。因日志量还是比较大，通过人工去筛选复制出来容易遗漏且费劲。于是想到能不能自己开发一款小工具来实现呢？

二、说干就干，因为最近在学习python，第一时间想到了用python来实现。

1、先安装python打包环境（因为我的电脑上安装了python，但服务器没有安装python环境，所以想到直接打包成.exe可执行文件）  
pip install pyinstaller

2、准备好python相关代码文件（代码略）

代码主要功能：查找并自动复制指定目录中想要的文件到桌面 （添加判断条件：1、生成日期为今天2:00-20:00 2、log文件大小>1KB）

![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910160201431-1383793423.png)

3、进行预打包  
将代码文件放到指定目录（这里实例为D盘根目录下）  
![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910160610681-421851565.png)

执行命令 pyinstaller -F "auto\_file\_copy v1.1.py"进行预打包

执行成功后，在D盘dist目录下生成auto\_file\_copy v1.1.exe文件，但此时exe文件图片默认是python格式，也没有作者和版本信息。  
![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910161408087-758602054.png)  
![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910161438042-1080198503.png)

4、这时，就需要利用到预打包生成的auto\_file\_copy v1.1.spec 文件  
![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910161018810-670747973.png)

用记事本打开，修改.spec的代码，调用D盘目录下的app.ico 和 version\_info.txt 文件：  
app.ico 打包后的应用程序图标用  
version\_info.txt 打包后应用程序显示作者、版本及详细信息用

![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910162437975-1241834208.png)

5、用.spec文件重新打包  
pyinstaller "auto\_file\_copy v1.1.spec"  
![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910162717528-1812630596.png)

打包后的程序已经有了自定义的图标  
![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910162659974-685540797.png)

打包后的程序已经显示显示作者、版本及详细信息  
![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910162811070-241307597.png)

6、放到服务器运行

![image](https://img2024.cnblogs.com/blog/3622183/202509/3622183-20250910163012185-1456825419.png)

已经筛选出4条符合条件的log日志文件，并自动复制到了桌面。

总结：  
这款小工具对我来说还是挺实用，特别是在几百条日志中需要手动去找出大于1KB的有用日志，大大提高了效率以及遗漏日志的风险。虽然我知道有集中的elk日志管理平台，但是对于没有这样的平台，但又想要去自动筛选出自己想要的日志，还是挺实用。