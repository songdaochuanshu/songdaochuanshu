---
layout: post
title: 'AMD显卡也能畅玩AI画图！ROCm+ComfyUI部署全指南'
date: "2026-02-09T01:00:32Z"
---
AMD显卡也能畅玩AI画图！ROCm+ComfyUI部署全指南
===============================

前言
--

在上一篇文章中，我们已经在 Windows + AMD显卡 + ROCm 环境下，成功用 PyTorch 训练了一个简单的 CNN 模型（详情可戳：[训练MNIST数字识别模型](https://blog.deali.cn/p/train-mnist-digit-recognition-model)）。不过那个任务相对基础，甚至普通CPU都能快速跑完，很难发挥出AMD显卡的性能优势。

所以今天，我们来挑战一些真正需要GPU算力支撑的场景——AI画图！如今开源炼丹圈里，除了大模型微调，最热门的就是AI图像生成了😄。如果大模型玩腻了，不妨试试AI画图放松一下。

目前AI画图的主流工具中，ComfyUI 绝对是佼佼者。比起我之前介绍过的 SD WebUI（详情可戳：[AI绘画Stable Diffusion入门](https://blog.deali.cn/p/ai-drawing-stablediffusion)），ComfyUI 最大的优势就是支持可视化的工作流配置，灵活度拉满。

我有段时间没关注开源AI画图工具了，这次重新上手ComfyUI，直接被惊艳到，没想到现在的工具链已经完善到这个程度，部署门槛大幅降低，功能却更强大了。接下来，就带大家一步步在 ROCm 环境下搭建 ComfyUI，实现从部署到出图的全流程。

StabilityMatrix
---------------

对于想快速上手的同学，我推荐用 StabilityMatrix 这个工具来部署 ComfyUI，省去手动配置环境的繁琐步骤。下面就详细说下操作流程。

### 添加package

打开 StabilityMatrix 后，直接在包管理界面搜索并添加 ComfyUI 包即可。对于新手来说，这个方式最省心，能快速完成基础部署。

不过这里提一句：如果是有一定技术基础的同学，我更推荐直接去 GitHub 克隆 ComfyUI 官方项目（[官方地址](https://github.com/comfyanonymous/ComfyUI)），后续自定义配置和功能扩展会更灵活。

![](https://blog.deali.cn/media/blog/39fc8d785272f423/abaaa905c50a0c8f.jpg)

### 设置选项

进入高级选项设置界面，核心是要选择 ROCm 环境，这样才能让 ComfyUI 正确调用 AMD 显卡的算力。（其实后面的环境还要自己卸载内置的 PyTorch 然后安装我们自己编译的 PyTorch）

这里要吐槽一下模型共享功能：这部分设置比较繁琐，而且对于大多数用户来说，后续大概率只会用 ComfyUI 这一个UI工具，基本用不上模型共享。这也是我推荐有基础的同学直接克隆 GitHub 项目的原因之一，能避开这些不必要的配置麻烦。

![](https://blog.deali.cn/media/blog/39fc8d785272f423/fc7b1edfd93c804d.jpg)

### 设置参数

为了让 ComfyUI 在 AMD 显卡 + ROCm 环境下稳定运行，避免出现显存不足、性能拉胯等问题，我整理了一套最优启动参数，直接对照着打钩：

*   \--normalvram：常规显存模式，适配多数中端AMD显卡（如RX 6650 XT）
*   \--preview-method auto：自动选择预览方式，平衡预览速度和资源占用
*   \--use-pytorch-cross-attention：使用PyTorch交叉注意力机制，提升生成效率
*   \--fp16-vae：VAE采用FP16精度，减少显存占用的同时保证画质
*   \--disable-xformers：禁用xformers（ROCm环境对xformers支持不完善，禁用后更稳定）

![](https://blog.deali.cn/media/blog/39fc8d785272f423/33e14576f1687b2d.jpg)

启动
--

一切就绪，启动！

虽然报错了有点小尴尬，但是日志中的 `Device: cuda:0 AMD Radeon RX 6650 XT : native` 这一行非常迷人

证明之前手工编译的 PyTorch 已经完美识别并驱动了显卡，`gfx1032` 架构也识别正确

![](https://blog.deali.cn/media/blog/39fc8d785272f423/40bc011bbaad4e41.jpg)

目前的报错 `ModuleNotFoundError: No module named 'torchsde'` 还是因为缺乏依赖

手动进入环境里补全一下依赖

    cd D:\Softwares\StabilityMatrix\Data\Packages\ComfyUI
    .\venv\Scripts\activate
    pip install -r requirements.txt
    

这次完美启动了！

![](https://blog.deali.cn/media/blog/39fc8d785272f423/ea5ca4125183b86f.jpg)

Comfy-UI
--------

ComfyUI 启动成功后，在浏览器中访问日志提示的地址（默认是 [http://127.0.0.1:8188](http://127.0.0.1:8188)），就能进入 ComfyUI 的操作界面。

好家伙，第一眼我不禁感叹，现在的工具链已经如此完善了！

![](https://blog.deali.cn/media/blog/39fc8d785272f423/b3ffda145d807e21.jpg)

可视化的工作流界面清晰明了，每个功能模块都能直观看到，操作逻辑也很顺畅。

几年前我第一次玩AI画图时，界面还是这样的：

![](https://blog.deali.cn/media/blog/39fc8d785272f423/b4425b8ba675160e.jpg)

相比之下简直降维打击啊！

从早期繁琐的参数配置界面，到如今直观的可视化工作流，能明显感受到开源社区的进步——让AI画图的门槛越来越低，同时灵活度却越来越高。

工作流
---

ComfyUI 和传统的 AI 画图工具最大的区别，就是它是“工作流驱动”的——所有的生成逻辑都通过工作流来定义，你可以像搭积木一样，自由组合不同的功能模块，实现从提示词到最终图像的全流程定制。

对于新手来说，不用急着自己搭建工作流，ComfyUI 内置了丰富的模板库，直接选用现成的模板就能快速上手。我这次用的是模板库中 SD1.5 模型的「图像生成」基础模板，适合入门尝试。

![](https://blog.deali.cn/media/blog/39fc8d785272f423/1cd95279e36a1a7d.jpg)

加载模板后，工作流的初始形态就出来了，包含了提示词输入、模型选择、采样器配置、图像输出等核心模块，后续可以根据自己的需求调整参数或添加模块：

![](https://blog.deali.cn/media/blog/39fc8d785272f423/6b3dd039726ad0b4.jpg)

开始AI画图
------

工作流加载完成后，不用做太多调整，直接使用模板内置的提示词就能开始生成。点击界面右上角的「运行」按钮，ComfyUI 就会调用 AMD 显卡的算力开始画图。

从任务管理器中能清晰看到，AMD 显卡的利用率直接拉满——这才是真正发挥出了 GPU 的性能优势！相比之前的 CNN 训练任务，AI 画图对算力的需求更高，也更能体现出 ROCm 环境搭建的价值。

![](https://blog.deali.cn/media/blog/39fc8d785272f423/68cce8f920e8eda8.jpg)

输出效果
----

使用内置模板的提示词：beautiful scenery nature glass bottle landscape, purple galaxy bottle （美丽的自然风景玻璃瓶景观，紫色银河瓶）

等待几十秒后，生成的图像效果超出预期——色彩搭配和谐，细节丰富，玻璃瓶的质感和银河的梦幻感都表现得不错，对于第一次上手的新手来说，这个结果已经很让人满意了。

![](https://blog.deali.cn/media/blog/39fc8d785272f423/f7e88f6badce0f82.jpg)

小结
--

本次我们成功在 Windows + AMD 显卡 + ROCm 环境下，通过 StabilityMatrix 快速部署了 ComfyUI，并完成了第一次 AI 画图。整个流程下来，最大的感受就是：如今 AMD 显卡的 AI 生态已经越来越完善，曾经“N卡专属”的 AI 画图场景，A卡用户通过 ROCm 也能轻松实现，而且体验并不逊色。

总结一下核心要点：一是用 StabilityMatrix 能快速部署 ComfyUI，新手友好；二是针对 ROCm 环境的启动参数要配置正确，避免出现稳定性或性能问题；三是 ComfyUI 的可视化工作流非常灵活，新手可以从模板入手，后续再逐步探索自定义工作流。

后续大家可以尝试更换不同的模型、调整提示词和采样参数，进一步提升生成效果。如果在部署或使用过程中遇到问题，欢迎在评论区交流～

微信公众号：「程序设计实验室」 专注于互联网热门新技术探索与团队敏捷开发实践，包括架构设计、机器学习与数据分析算法、移动端开发、Linux、Web前后端开发等，欢迎一起探讨技术，分享学习实践经验。