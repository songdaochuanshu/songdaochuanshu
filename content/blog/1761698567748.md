---
layout: post
title: 'å¼€å‘è€…å¿…çœ‹çš„ 15 ä¸ªå›°æƒ‘çš„ Git æœ¯è¯­ï¼ˆä»¥åŠå®ƒä»¬çš„çœŸæ­£å«ä¹‰ï¼‰'
date: "2025-10-29T00:42:47Z"
---
å¼€å‘è€…å¿…çœ‹çš„ 15 ä¸ªå›°æƒ‘çš„ Git æœ¯è¯­ï¼ˆä»¥åŠå®ƒä»¬çš„çœŸæ­£å«ä¹‰ï¼‰
================================

PHP å¼€å‘è€…å¿…çœ‹çš„ 15 ä¸ªå›°æƒ‘çš„ Git æœ¯è¯­ï¼ˆä»¥åŠå®ƒä»¬çš„çœŸæ­£å«ä¹‰ï¼‰
====================================

åšäº†å¤šå¹´å¼€å‘, è‡ª 2015 å¹´å¼€å§‹ä½¿ç”¨ Git, æˆ‘å®¡è¿‡æ•°ç™¾ä¸ª Pull Request,æ”¶æ‹¾è¿‡æ— æ•°æ··ä¹±çš„ä»£ç ä»“åº“,ä¹Ÿå¸¦è¿‡ä¸å°‘åœ¨ Git å‘½ä»¤é‡Œæ‰“è½¬çš„æ–°äººã€‚

è€å®è¯´,æˆ‘å®Œå…¨ç†è§£ä»–ä»¬çš„å›°æƒ‘ã€‚Git ç¡®å®å¼ºå¤§,ä½†å®ƒçš„æœ¯è¯­ç³»ç»Ÿå°±åƒä¸€ä¸ªè¿·å®«â€”â€”å¾ˆå¤šè¯çœ‹ç€ç›¸ä¼¼,å®é™…ç”¨æ³•å´å¤©å·®åœ°åˆ«ã€‚

ä»Šå¤©å°±æ¥èŠèŠè¿™äº›è¿è€æ‰‹éƒ½å¯èƒ½ææ··çš„ Git æœ¯è¯­ã€‚å¦‚æœä½ æ˜¯æ–°æ‰‹,è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å°‘èµ°å¾ˆå¤šå¼¯è·¯ã€‚

[åŸæ–‡ å¼€å‘è€…å¿…çœ‹çš„ 15 ä¸ªå›°æƒ‘çš„ Git æœ¯è¯­ï¼ˆä»¥åŠå®ƒä»¬çš„çœŸæ­£å«ä¹‰ï¼‰](https://catchadmin.com/post/2025-10/git-confusing-terms)

HEAD vs head vs Detached HEAD
-----------------------------

### å¼€å‘è€…å¸¸çŠ¯çš„é”™è¯¯ï¼š

æŠŠ HEAD å½“æˆåˆä¸€ä¸ªåˆ†æ”¯åã€‚

### å®ƒçš„çœŸå®èº«ä»½ï¼š

**HEAD æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä½ å½“å‰æ‰€åœ¨çš„ commit** â€”â€” é€šå¸¸æ˜¯ä½ æ‰€åœ¨åˆ†æ”¯çš„æœ€æ–°æäº¤ã€‚

æ¯æ¬¡ä½ æäº¤ä»£ç ï¼ŒHEAD å°±ä¼šç§»åŠ¨åˆ°é‚£ä¸ªæ–° commit ä¸Šã€‚

    # æŸ¥çœ‹ HEAD æŒ‡å‘å“ªé‡Œ
    git log --oneline --decorate -n 3
    
    # --oneline æŠŠæ¯ä¸ª commit å‹ç¼©æˆä¸€è¡Œæ˜¾ç¤ºï¼š
    # commit hash çš„å‰ 7 ä¸ªå­—ç¬¦ + commit ä¿¡æ¯
    
    # --decorate
    # åœ¨ commit æ—è¾¹æ˜¾ç¤ºåˆ†æ”¯å’Œæ ‡ç­¾å¼•ç”¨
    # è¿™æ ·ä½ å°±èƒ½çœ‹åˆ° HEADã€mainã€origin/main æˆ– v1.0.0 è¿™äº›æŒ‡é’ˆå½“å‰åœ¨å“ª
    
    # -n 3
    # åªæ˜¾ç¤ºæœ€è¿‘ 3 ä¸ª commit
    

ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š

    a3c4d5e (HEAD -> main, origin/main) Add user API
    

å¦‚æœä½ ç›´æ¥ checkout åˆ°æŸä¸ªæ—§ commitï¼š

    git checkout a3c4d5e
    

ä½ ä¼šçœ‹åˆ°è¿™æ ·çš„æç¤ºï¼š`You are in 'detached HEAD' state.`

è¿™åªæ˜¯è¯´ä½ ç°åœ¨ä¸åœ¨ä»»ä½•åˆ†æ”¯ä¸Šâ€”â€”ä½ åœ¨æŸ¥çœ‹å†å²å¿«ç…§ã€‚æ²¡ä»€ä¹ˆåäº‹å‘ç”Ÿã€‚

å¦‚æœä½ æƒ³ä¿å­˜åœ¨è¿™é‡Œåšçš„å·¥ä½œï¼š

    git switch -c hotfix/legacy-bug
    

è‡³äº **head**ï¼ˆå°å†™ï¼‰ï¼Œå®ƒä¸æ˜¯ Git çš„å…³é”®å­—â€”â€”é€šå¸¸åªæ˜¯éæ­£å¼ç”¨æ³•æˆ–å¤æ•°å½¢å¼ï¼Œæ¯”å¦‚"åˆ†æ”¯çš„ heads"ã€‚

Git æŠŠåˆ†æ”¯çš„æœ€æ–°æäº¤å­˜åœ¨ `.git/refs/heads/` ä¸‹ï¼Œæ‰€ä»¥ä½ å¯èƒ½ä¼šåœ¨å†…éƒ¨å¼•ç”¨ä¸­çœ‹åˆ°è¿™ä¸ªè¯ã€‚

æ¯”å¦‚ï¼š

    .git/refs/heads/main
    .git/refs/heads/feature/login
    

æ‰€ä»¥å½“ä½ çœ‹åˆ°"æ‰€æœ‰ heads"æ—¶ï¼Œæ„æ€æ˜¯"æ¯ä¸ªåˆ†æ”¯çš„æœ€æ–° commit"ï¼Œè€Œä¸æ˜¯é‚£ä¸ªç‰¹æ®Šçš„ HEAD æŒ‡é’ˆã€‚

### åç¼€çš„å«ä¹‰ï¼š

Git æä¾›äº†ä¸€äº›æ–¹å¼è®©ä½ ä» HEAD å¼€å§‹å¾€å›è¿½æº¯å†å²ã€‚

**HEAD~1**

è¡¨ç¤º"HEAD ä¹‹å‰çš„ä¸€ä¸ª commit"ã€‚

HEAD~2 è¡¨ç¤º"ä¹‹å‰çš„ä¸¤ä¸ª commit"ï¼Œä»¥æ­¤ç±»æ¨ã€‚

    git show HEAD~1
    

æ˜¾ç¤ºä½ å½“å‰ commit çš„ä¸Šä¸€ä¸ªã€‚

**HEAD^1 å’Œ HEAD^2**

è¿™äº›æ˜¯çˆ¶æŒ‡é’ˆã€‚å®ƒä»¬åœ¨å¤„ç† merge commit æ—¶æœ€æœ‰ç”¨ã€‚

ä¸€ä¸ª merge commit æœ‰ä¸¤ä¸ªçˆ¶èŠ‚ç‚¹â€”â€”ä¸€ä¸ªæ¥è‡ªä½ æ‰€åœ¨çš„åˆ†æ”¯ï¼Œå¦ä¸€ä¸ªæ¥è‡ªä½ åˆå¹¶è¿›æ¥çš„åˆ†æ”¯ã€‚

    git diff HEAD^1 HEAD^2
    

å¯¹æ¯”åˆå¹¶æ—¶ä¸¤è¾¹å„è‡ªè´¡çŒ®äº†ä»€ä¹ˆã€‚

^1 è¡¨ç¤º"ç¬¬ä¸€ä¸ªçˆ¶èŠ‚ç‚¹"ï¼Œ^2 è¡¨ç¤º"ç¬¬äºŒä¸ªçˆ¶èŠ‚ç‚¹"ã€‚

### ç»éªŒæ³•åˆ™ï¼š

*   ç”¨ `~` çº¿æ€§åœ°å¾€å›èµ°
*   ç”¨ `^` å¤„ç† merge commit çš„çˆ¶èŠ‚ç‚¹

### å¦‚ä¸‹å›¾æ¼”ç¤º

æŠŠ feature åˆå¹¶åˆ° main åï¼Œmerge commit (M) æœ‰ä¸¤ä¸ªçˆ¶èŠ‚ç‚¹ï¼š

*   HEAD^1 â†’ commit Cï¼ˆåˆå¹¶å‰çš„ mainï¼‰
*   HEAD^2 â†’ commit Eï¼ˆfeature åˆ†æ”¯çš„æœ«ç«¯ï¼‰

ä¸€æ—¦ä½ æŠŠ HEAD æƒ³è±¡æˆ"ä½ åœ¨è¿™é‡Œ"ï¼ŒGit çš„å¯¼èˆªæ¨¡å‹å°±ç¬é—´æ¸…æ™°äº†ã€‚

Commit vs Changeset
-------------------

å¾ˆå¤šå¼€å‘è€…ä»¥ä¸º commit å°±æ˜¯ diffâ€”â€”å…¶å®ä¸æ˜¯ã€‚

*   **commit** = ä»“åº“çš„å®Œæ•´å¿«ç…§ + å…ƒæ•°æ® + çˆ¶èŠ‚ç‚¹é“¾æ¥
*   **changeset** = ä¸¤ä¸ª commit ä¹‹é—´çš„å·®å¼‚

    git show HEAD          # æ˜¾ç¤º commit åŠå…¶ diffï¼ˆchangeset è§†å›¾ï¼‰
    git diff HEAD~1 HEAD   # åªæ˜¾ç¤ºä¸¤ä¸ª commit ä¹‹é—´çš„åŸå§‹ diff
    git add -p             # é€‰æ‹©æ€§æš‚å­˜å˜æ›´ï¼ˆæ„å»ºä½ çš„ changesetï¼‰
    git commit -m "Fix NPE in user lookup"
    

ç†è§£è¿™ä¸ªåŒºåˆ«èƒ½å¸®ä½ æ‰“é€ **åŸå­åŒ– commit**â€”â€”æ¯ä¸ª commit åªåŒ…å«ä¸€ä¸ªé€»è¾‘å˜æ›´â€”â€”è€Œä¸æ˜¯ä¸€è‚¡è„‘å…¨æ‰”è¿›å»ã€‚

Branch â‰  Copy
-------------

åˆ›å»ºåˆ†æ”¯ä¸ä¼šå…‹éš†ä»£ç åº“ã€‚

å®ƒåªæ˜¯åˆ›å»ºä¸€ä¸ªæŒ‡å‘ commit çš„æ–°æŒ‡é’ˆã€‚

    git branch feature/login
    git switch feature/login
    

ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªä» main åˆ†å‰å‡ºå»çš„è½»é‡çº§æŒ‡é’ˆã€‚æ²¡æœ‰é¢å¤–æ–‡ä»¶ï¼Œæ²¡æœ‰å¤åˆ¶ã€‚

Tags
----

Tags æ ‡è®°ç‰¹å®šçš„ commitâ€”â€”é€šå¸¸ç”¨äºå‘å¸ƒç‰ˆæœ¬ï¼Œè€Œä¸”ä¸ä¼šç§»åŠ¨ã€‚

    git tag v1.0.0
    git push origin v1.0.0
    

å’Œåˆ†æ”¯ä¸åŒï¼Œtags æ˜¯ä¸å¯å˜çš„ã€‚ä¸€æ—¦è®¾ç½®ï¼Œå®ƒä»¬æ°¸è¿œæŒ‡å‘åŒä¸€ä¸ª commitã€‚

Fast-Forward Merge
------------------

`Fast-forward` ä¸æ˜¯ä»€ä¹ˆç‰¹æ®Šæ“ä½œâ€”â€”å®ƒåªæ˜¯æ²¡æœ‰åˆ†å‰çš„åˆå¹¶ã€‚

### æ— åˆ†å‰ -> å¯ä»¥ Fast-forward

`main` ä» `B` ä¹‹åå°±æ²¡åŠ¨è¿‡ã€‚

    git switch main
    git merge --ff-only feature
    

ç»“æœï¼š

  
æ²¡æœ‰åˆ›å»º merge commit -> Git åªæ˜¯æŠŠ main çš„æŒ‡é’ˆå¾€å‰ç§»äº†ã€‚

### åˆ†æ”¯å·²åˆ†å‰ -> æ— æ³• Fast-forward

ä¸¤è¾¹éƒ½åœ¨ `B` ä¹‹åæœ‰äº†æ–°æäº¤ã€‚

    git switch main
    git merge feature
    

ç°åœ¨ Git å¿…é¡»åˆ›å»ºä¸€ä¸ª merge commit æ¥åˆå¹¶ `E` å’Œ `D`ã€‚

å¦‚æœä½ åšæŒè¦ fast-forwardï¼š

    git merge --ff-only feature
    # error: Not possible to fast-forward
    

### è§„åˆ™ï¼š

å¦‚æœåŒæ–¹åœ¨åˆ†å‰åéƒ½æœ‰æ–° commitï¼Œå°±æ— æ³• fast-forwardã€‚

Squash
------

Squash åœ¨åˆå¹¶å‰æŠŠå¤šä¸ª commit å‹æ‰æˆä¸€ä¸ªâ€”â€”é€‚åˆæ¸…ç†æ··ä¹±çš„ feature åˆ†æ”¯å†å²ã€‚

    git merge --squash feature/login
    git commit -m "Add login feature"
    

ä½ çš„åˆ†æ”¯å†å²ä¿æŒå¹²å‡€ï¼ŒåŒæ—¶åœ¨ PR é‡Œä¸ä¼šä¸¢å¤±å·¥ä½œä¸Šä¸‹æ–‡ã€‚

origin vs upstream
------------------

è¿™ä¸ªæŒºæœ‰æ„æ€çš„â€¦â€¦æˆ‘å‡ å¤©å‰åœ¨å¤„ç†ä¸€ä¸ª fork é¡¹ç›®æ—¶æ‰ææ¸…æ¥šåŒºåˆ«ã€‚ä¹‹å‰æˆ‘ä¸€ç›´ä»¥ä¸ºå®ƒä¿©æ˜¯ä¸€å›äº‹ ğŸ˜ƒ

**origin** æ˜¯ä½ å…‹éš†ä»“åº“æ—¶é»˜è®¤çš„è¿œç¨‹ä»“åº“åç§°ã€‚

å¦‚æœä½  fork äº†ä¸€ä¸ªä»“åº“ï¼ŒåŸå§‹ä»“åº“å«åš **upstream**ã€‚

    git remote -v
    

ä½ å¯èƒ½ä¼šçœ‹åˆ°ï¼š

    origin   git@github.com:yourname/project.git
    upstream git@github.com:org/project.git
    

ç”¨ upstream ä»åŸå§‹æºæ‹‰å–å˜æ›´ï¼š

    git fetch upstream
    

Remote-Tracking Branches
------------------------

**origin/main** å’Œ **main** ä¸æ˜¯ä¸€å›äº‹ã€‚

*   `main` = ä½ çš„æœ¬åœ°åˆ†æ”¯
*   `origin/main` = Git å¯¹è¿œç¨‹ main çš„æœ€åå·²çŸ¥å¿«ç…§

    git fetch
    git diff main origin/main
    

è¿™èƒ½å‘Šè¯‰ä½ ä¸Šæ¸¸æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œè€Œä¸ç”¨ç«‹å³åˆå¹¶ã€‚

Fetch vs Pull
-------------

`git fetch` åªæ›´æ–°ä½ å¯¹è¿œç¨‹ä»“åº“çš„æœ¬åœ°è®¤çŸ¥ã€‚

`git pull` åšäº†è¿™ä¸ªï¼Œç„¶åè‡ªåŠ¨åˆå¹¶ï¼ˆæˆ– rebaseï¼‰ã€‚

    git fetch origin
    git merge origin/main
    

è¿™æ¯”ç›²ç›® `git pull` æ›´å®‰å…¨ã€æ›´æ˜ç¡®ã€‚

The Staging Area (Index)
------------------------

æš‚å­˜åŒºæ˜¯ Git çš„"å€™è½¦å®¤"ã€‚

ä½ å†³å®šå“ªäº›å˜æ›´è¿›å…¥ä¸‹ä¸€ä¸ª commitã€‚

    git add src/App.java
    git status
    git commit -m "Fix null check"
    

ä½ å¯ä»¥æš‚å­˜ç‰¹å®šçš„ä»£ç å—ï¼š

    git add -p
    

å°±åƒåœ¨ç»“è´¦å‰å¾€è´­ç‰©è½¦é‡Œæ”¾ä¸œè¥¿ã€‚

Working Directory
-----------------

ä½ çš„å·¥ä½œç›®å½•å°±æ˜¯ä½ æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶â€”â€”ä¸æ˜¯ä»“åº“æœ¬èº«ã€‚

çœŸæ­£çš„ä»“åº“åœ¨ `.git/` é‡Œã€‚

    git status
    # "working tree clean" æ„æ€æ˜¯ä½ çš„æ–‡ä»¶å’Œ HEAD ä¸€è‡´
    

Tracked vs Untracked Files
--------------------------

ä½ æ·»åŠ è¿‡ä¸€æ¬¡çš„æ–‡ä»¶æ˜¯"å·²è·Ÿè¸ª"çš„ã€‚

æ–°æ–‡ä»¶åœ¨ä½ æš‚å­˜å®ƒä»¬ä¹‹å‰ä¸ä¼šè¢«è·Ÿè¸ªã€‚

    git status
    # Untracked files: (use "git add <file>")
    

æäº¤å‰ä¸€å®šè¦æ£€æŸ¥è¿™ä¸ªâ€”â€”æœªè·Ÿè¸ªçš„æ–‡ä»¶ä¸ä¼šå‡ºç°åœ¨ commit é‡Œã€‚

Dirty Tree
----------

"Dirty tree" åªæ˜¯è¯´ä½ çš„å·¥ä½œç›®å½•æœ‰æœªæäº¤çš„å˜æ›´ã€‚

    git status
    # modified: src/App.java
    

åˆ‡æ¢åˆ†æ”¯å‰å…ˆæäº¤æˆ– stash å®ƒä»¬ï¼Œé¿å…å†²çªã€‚

Reset vs Revert
---------------

Git é‡Œæœ€å®¹æ˜“è¢«è¯¯è§£çš„ä¸¤ä¸ªå‘½ä»¤ã€‚

*   **reset** ç§»åŠ¨ HEADï¼Œå¯èƒ½ä¼šä¸¢å¼ƒ commitï¼ˆå±é™©ï¼‰
*   **revert** åˆ›å»ºä¸€ä¸ªæ–° commit æ¥æ’¤é”€ä¹‹å‰çš„å˜æ›´ï¼ˆå®‰å…¨ï¼‰

    git reset --hard HEAD~1   # åˆ é™¤æœ€åä¸€ä¸ª commit
    git revert HEAD           # é€šè¿‡æ·»åŠ æ–° commit å®‰å…¨åœ°æ’¤é”€
    

å¦‚æœä½ åœ¨å…±äº«åˆ†æ”¯ä¸Šå·¥ä½œï¼Œæ°¸è¿œç”¨ `revert`ã€‚

æ€»ç»“
--

ä»æœ¬è´¨ä¸Šè®²ï¼ŒGit å°±æ˜¯ä¸€ä¸ªç”± `commit` å’Œ `æŒ‡é’ˆ` ç»„æˆçš„å›¾ã€‚

ä¸€æ—¦ä½ ç†è§£äº† `HEAD`ã€`åˆ†æ”¯` å’Œ `å¿«ç…§` çš„å·¥ä½œåŸç†ï¼Œå…¶ä»–ä¸€åˆ‡éƒ½ä¼šå˜å¾—åˆä¹é€»è¾‘ã€‚