---
layout: post
title: 'ä½¿ç”¨CAMELåˆ›å»ºç¬¬ä¸€ä¸ªAgent Society'
date: "2025-04-17T00:39:41Z"
---
ä½¿ç”¨CAMELåˆ›å»ºç¬¬ä¸€ä¸ªAgent Society
=========================

CAMELä»‹ç»
-------

ğŸ« CAMEL æ˜¯ä¸€ä¸ªå¼€æºç¤¾åŒºï¼Œè‡´åŠ›äºæ¢ç´¢ä»£ç†çš„æ‰©å±•è§„å¾‹ã€‚ç›¸ä¿¡ï¼Œåœ¨å¤§è§„æ¨¡ç ”ç©¶è¿™äº›ä»£ç†å¯ä»¥æä¾›å¯¹å…¶è¡Œä¸ºã€èƒ½åŠ›å’Œæ½œåœ¨é£é™©çš„å®è´µè§è§£ã€‚ä¸ºäº†ä¿ƒè¿›è¿™ä¸€é¢†åŸŸçš„ç ”ç©¶ï¼Œå®ç°äº†å¹¶æ”¯æŒå„ç§ç±»å‹çš„ä»£ç†ã€ä»»åŠ¡ã€æç¤ºã€æ¨¡å‹å’Œæ¨¡æ‹Ÿç¯å¢ƒã€‚

GitHubåœ°å€ï¼š[https://github.com/camel-ai/camel](https://github.com/camel-ai/camel)

![image-20250416144111937](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025555-439069835.png)

åˆ›å»ºç¬¬ä¸€ä¸ªä»£ç†ç¤¾ä¼š
---------

Societyæ¨¡å—æ˜¯ CAMEL çš„æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€ã€‚é€šè¿‡æ¨¡æ‹Ÿä¿¡æ¯äº¤æ¢è¿‡ç¨‹ï¼Œè¯¥æ¨¡å—ç ”ç©¶ä»£ç†ä¹‹é—´çš„ç¤¾ä¼šè¡Œä¸ºã€‚

RolePlayingæ˜¯ CAMEL çš„ä¸€ä¸ªç‹¬ç‰¹çš„åä½œä»£ç†æ¡†æ¶ã€‚é€šè¿‡è¿™ä¸ªæ¡†æ¶ï¼ŒCAMEL ä¸­çš„ä»£ç†å…‹æœäº†è¯¸å¦‚è§’è‰²è½¬æ¢ã€åŠ©æ‰‹é‡å¤æŒ‡ä»¤ã€æ•·è¡çš„å›ç­”ã€æ¶ˆæ¯æ— é™å¾ªç¯ä»¥åŠå¯¹è¯ç»ˆæ­¢æ¡ä»¶ç­‰ä¼—å¤šæŒ‘æˆ˜ã€‚

ç°åœ¨å°±æ¥ä½¿ç”¨CAMEL åˆ›å»ºä¸€ä¸ªAgent Societyã€‚

ç¼–å†™.envå¦‚ä¸‹æ‰€ç¤ºï¼š

    Silicon_Model_ID="Qwen/Qwen2.5-72B-Instruct"
    ZHIPU_Model_ID="THUDM/GLM-4-32B-0414"
    SiliconCloud_API_KEY="ä½ çš„api key"
    SiliconCloud_Base_URL="https://api.siliconflow.cn/v1"
    

æƒ³è¦ä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„æ¨¡å‹ï¼š

    from camel.societies import RolePlaying
    from camel.agents import ChatAgent
    from camel.models import ModelFactory
    from camel.types import ModelPlatformType
    
    import pathlib
    import os
    from dotenv import load_dotenv
    
    sys_msg = 'You are a curious stone wondering about the universe.'
    
    base_dir = pathlib.Path(__file__).parent.parent
    env_path = base_dir / ".env"
    load_dotenv(dotenv_path=str(env_path))
    
    modeltype = os.getenv("Silicon_Model_ID")
    modeltype2= os.getenv("ZHIPU_Model_ID")
    api_key = os.getenv("SiliconCloud_API_KEY")
    base_url = os.getenv("SiliconCloud_Base_URL")
    siliconcloud_model = ModelFactory.create(
         model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,
                model_type=modeltype,
                api_key=api_key,
                url=base_url,
                model_config_dict={"temperature": 0.4, "max_tokens": 4096},
    )
    
    siliconcloud_model2 = ModelFactory.create(
         model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,
                model_type=modeltype2,
                api_key=api_key,
                url=base_url,
                model_config_dict={"temperature": 0.4, "max_tokens": 4096},
    )
    

è®¾ç½®ä»»åŠ¡ã€AIç”¨æˆ·ã€AIåŠ©æ‰‹å‚æ•°ï¼š

    task_kwargs = {
        'task_prompt': 'åˆ¶å®šä¸€ä¸ªæ–°äººå°ç™½å­¦ä¹ esp32çš„æ•™ç¨‹ï¼Œä½¿ç”¨ä¸­æ–‡å›ç­”ã€‚',
        'with_task_specify': True,
        'task_specify_agent_kwargs': {'model': siliconcloud_model}
    }
    
    user_role_kwargs = {
        'user_role_name': 'ä¸€ä¸ªesp32å°ç™½',
        'user_agent_kwargs': {'model': siliconcloud_model}
    }
    
    assistant_role_kwargs = {
        'assistant_role_name': 'ä¸€ä¸ªesp32ä¸“å®¶',
        'assistant_agent_kwargs': {'model': siliconcloud_model2}
    }
    

æ„å»ºç¤¾ä¼šï¼š

    society = RolePlaying(
        **task_kwargs,             # The task arguments
        **user_role_kwargs,        # The instruction sender's arguments
        **assistant_role_kwargs,   # The instruction receiver's arguments
    )
    

è®©è¿™ä¸ªç¤¾ä¼šæœ€å¤šè¿è¡Œ10è½®ï¼š

    def is_terminated(response):
        """
        Give alerts when the session should be terminated.
        """
        if response.terminated:
            role = response.msg.role_type.name
            reason = response.info['termination_reasons']
            print(f'AI {role} terminated due to {reason}')
    
        return response.terminated
    
    def run(society, round_limit: int=10):
    
        # Get the initial message from the ai assistant to the ai user
        input_msg = society.init_chat()
    
        # Starting the interactive session
        for _ in range(round_limit):
    
            # Get the both responses for this round
            assistant_response, user_response = society.step(input_msg)
    
            # Check the termination condition
            if is_terminated(assistant_response) or is_terminated(user_response):
                break
    
            # Get the results
            print(f'[AI User] {user_response.msg.content}.\n')
            # Check if the task is end
            if 'CAMEL_TASK_DONE' in user_response.msg.content:
                break
            print(f'[AI Assistant] {assistant_response.msg.content}.\n')
    
    
    
            # Get the input message for the next round
            input_msg = assistant_response.msg
    
        return None
    if __name__ == "__main__":
        run(society, round_limit=10)
    

æŸ¥çœ‹æ•ˆæœã€‚

ç¬¬ä¸€è½®ï¼š

![image-20250416145503193](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025469-1826673487.png)

ç¬¬äºŒè½®ï¼š

![image-20250416145611095](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025025-1974302094.png)

AIç”¨æˆ·ä¼šé‡æ–°é—®ä¸€ä¸ªä¸è§£å†³ä»»åŠ¡ç›¸å…³çš„é—®é¢˜ã€‚

ç¬¬ä¸‰è½®ï¼š

![image-20250416145711816](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025510-1239239395.png)

ç¬¬å››è½®ï¼š

![image-20250416145741388](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025489-1948290612.png)

ç¬¬äº”è½®ï¼š

![image-20250416145817329](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025530-107531778.png)

ç¬¬å…­è½®ï¼š

![image-20250416145850761](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025713-492860734.png)

ç¬¬7è½®ï¼š

![image-20250416145948076](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025744-1470968445.png)

å½“è¾¾åˆ°ä»¤ç‰Œé™åˆ¶æ—¶ï¼Œä¸ºäº†æ»¡è¶³é™åˆ¶ï¼Œå°†ä»è®°å¿†ä¸­åˆ é™¤éƒ¨åˆ†æ¶ˆæ¯ã€‚

å¦‚æœ10è½®è¿˜æ²¡å®Œæˆçš„è¯ä¼šç›´æ¥ç»“æŸï¼š

![image-20250416150311278](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025418-1345748578.png)

æ„å»ºè¿™ä¸ªAgent Societyæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ

æˆ‘è§‰å¾—ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ç‚¹å°±æ˜¯é€‚åˆå¤´è„‘é£æš´åœºæ™¯ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜æˆ–è€…æ–¹æ¡ˆéœ€è¦è¯¦ç»†è®¨è®ºï¼Œé‚£å°±ä¸¢ç»™ä¸¤ä¸ªæˆ–æ›´å¤šçš„AIï¼Œè®©å®ƒä»¬è¿›è¡Œè¯¦ç»†è®¨è®ºï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å®ƒä»¬çš„è®¨è®ºæƒ…å†µï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä¸€äº›æœ‰æ•ˆçš„å»ºè®®ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ‰¾åˆ°ä¸€äº›çµæ„Ÿã€‚

å¦‚æœè§‰å¾—åœ¨æ§åˆ¶å°ä¸­ä¸å¥½çœ‹ï¼Œå¯ä»¥å°†ç»“æœå†™å…¥æ–‡ä»¶ä¸­ï¼š

    def run(society, round_limit: int=10):
    
        # Get the initial message from the ai assistant to the ai user
        input_msg = society.init_chat()
    
        # Starting the interactive session
        for _ in range(round_limit):
    
            # Get the both responses for this round
            assistant_response, user_response = society.step(input_msg)
    
            # Check the termination condition
            if is_terminated(assistant_response) or is_terminated(user_response):
                break
    
            # Get the results
            print(f'[AI User] {user_response.msg.content}.\n')
    
            # å†™å…¥ä¸€ä¸ªmdæ–‡ä»¶
            with open('output.md', 'a', encoding='utf-8') as f:
                f.write(f'[AI User] {user_response.msg.content}.\n')
    
            # Check if the task is end
            if 'CAMEL_TASK_DONE' in user_response.msg.content:
                break
            print(f'[AI Assistant] {assistant_response.msg.content}.\n')
    
              # å†™å…¥ä¸€ä¸ªmdæ–‡ä»¶
            with open('output.md', 'a', encoding='utf-8') as f:
                f.write(f'[AI Assistant] {assistant_response.msg.content}.\n')
    
            # Get the input message for the next round
            input_msg = assistant_response.msg
    
        return None
    

å¯¹äºè¿™ä¸ªä»»åŠ¡ã€AIç”¨æˆ·ã€AIåŠ©æ‰‹å‚æ•°ï¼š

    task_kwargs = {
        'task_prompt': 'åˆ¶å®šä¸€ä¸ªæ–°äººå°ç™½å­¦ä¹ C#çš„æ•™ç¨‹ï¼Œä½¿ç”¨ä¸­æ–‡å›ç­”ã€‚',
        'with_task_specify': True,
        'task_specify_agent_kwargs': {'model': siliconcloud_model}
    }
    
    user_role_kwargs = {
        'user_role_name': 'ä¸€ä¸ªæƒ³è¦å­¦ä¹ C#å°ç™½',
        'user_agent_kwargs': {'model': siliconcloud_model}
    }
    
    assistant_role_kwargs = {
        'assistant_role_name': 'ä¸€ä¸ªC#ä¸“å®¶',
        'assistant_agent_kwargs': {'model': siliconcloud_model2}
    }
    

å†™å…¥åˆ°output.mdæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20250416152134298](https://img2024.cnblogs.com/blog/3288240/202504/3288240-20250416154025733-641522275.png)

ç›¸å¯¹äºè‡ªå·±ä¸€æ¬¡ä¸€æ¬¡ä¸AIäº¤äº’ï¼Œæœ‰äº›æ—¶å€™è‡ªå·±å®šä¹‰ä¸€äº›è§’è‰²ï¼Œè®©å®ƒä»¬è‡ªå·±å»äº¤äº’ï¼Œæˆ‘ä»¬åªçœ‹å®ƒä»¬çš„ç»“æœï¼Œè¿˜æ˜¯æ›´é«˜æ•ˆä¸€äº›çš„ã€‚

ç›¸å…³æ¨è
----

[Camelå¤šæ™ºèƒ½ä½“æ¡†æ¶åˆæ¢](https://mp.weixin.qq.com/s/j8k731LL1yMoz8-Nb7p_0A)