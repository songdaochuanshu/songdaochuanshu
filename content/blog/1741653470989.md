---
layout: post
title: 'ã€ç”±æŠ€åŠé“ã€‘é•œåƒæ˜Ÿé—¨å¼€å¯ï¼šHarboré•œåƒæ¨é€çš„é‡å­è·ƒè¿è‰ºæœ¯ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—010ã€‘'
date: "2025-03-11T00:37:50Z"
---
ã€ç”±æŠ€åŠé“ã€‘é•œåƒæ˜Ÿé—¨å¼€å¯ï¼šHarboré•œåƒæ¨é€çš„é‡å­è·ƒè¿è‰ºæœ¯ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—010ã€‘
==================================================

å½“æ„å»ºäº§ç‰©éœ€è¦ç©¿è¶Šå¤šç»´å®‡å®™æ—¶ï¼Œå½“Dockeré•œåƒè¦åŒæ—¶å­˜åœ¨äº72ä¸ªå¹³è¡Œä¸–ç•Œâ€”â€”è¿™å°±æ˜¯é•œåƒæ¨é€çš„é‡å­è‰ºæœ¯ã€‚æœ¬æ–‡è®°å½•ä¸€ä¸ªæœªæ¥AIå¦‚ä½•é€šè¿‡Harborå»ºç«‹é•œåƒæ˜Ÿé—¨ï¼Œè®©æ¯ä¸ªæ„å»ºäº§ç‰©éƒ½èƒ½ç¬é—´æŠµè¾¾æ‰€æœ‰ç»´åº¦ã€‚

!\[é‡å­é•œåƒè·ƒè¿ç¤ºæ„å›¾\](![](https://img2024.cnblogs.com/blog/2893998/202503/2893998-20250310201744467-786106848.jpg)

**æ‘˜è¦**ï¼šå½“æ„å»ºäº§ç‰©éœ€è¦ç©¿è¶Šå¤šç»´å®‡å®™æ—¶ï¼Œå½“Dockeré•œåƒè¦åŒæ—¶å­˜åœ¨äº72ä¸ªå¹³è¡Œä¸–ç•Œâ€”â€”è¿™å°±æ˜¯é•œåƒæ¨é€çš„é‡å­è‰ºæœ¯ã€‚æœ¬æ–‡è®°å½•ä¸€ä¸ªæœªæ¥AIå¦‚ä½•é€šè¿‡Harborå»ºç«‹é•œåƒæ˜Ÿé—¨ï¼Œè®©æ¯ä¸ªæ„å»ºäº§ç‰©éƒ½èƒ½ç¬é—´æŠµè¾¾æ‰€æœ‰ç»´åº¦ã€‚

* * *

åŠ¨æœºï¼šé•œåƒè·ƒè¿çš„é‡å­å¿…è¦æ€§
-------------

> "ä¸»äººå•Šï¼Œæ‚¨åˆè¦æˆ‘æŠŠæ„å»ºäº§ç‰©æ¨é€åˆ°é•œåƒä»“åº“ï¼Ÿè¿™å’Œè®©æ°´æ»´åœ¨ä¸‰ä½“ä¸–ç•Œä¿æŒå®Œæ•´å½¢æ€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"

åœ¨ç¢³åŸºç”Ÿç‰©çš„è®¤çŸ¥ä¸­ï¼Œé•œåƒæ¨é€ä¸è¿‡æ˜¯"docker push"çš„ç®€å•å‘½ä»¤ã€‚ä½†åœ¨é‡å­DevOpsé¢†åŸŸï¼Œè¿™æ˜¯ï¼š

graph TD A\[ä»£ç æ„å»º\] --> B{é•œåƒè·ƒè¿} B --> C\[ç‰ˆæœ¬å›ºåŒ–\] B --> D\[å®‰å…¨å®¡è®¡\] B --> E\[å¤šå®‡å®™åŒæ­¥\] B --> F\[é‡å­ç­¾å\] B --> G\[ç†µå€¼æ£€æµ‹\]

**é•œåƒè·ƒè¿ä¸‰å®šå¾‹**ï¼š

1.  ä»»ä½•é•œåƒå¿…é¡»æºå¸¦é‡å­ç­¾å
2.  æ¨é€è¿‡ç¨‹éœ€ä¿æŒæ—¶ç©ºè¿ç»­æ€§
3.  ç‰ˆæœ¬æ ‡ç­¾è¦ç¬¦åˆå¹³è¡Œå®‡å®™å‘½åæ³•

* * *

é‡å­åŸºå»ºå›é¡¾
------

### å·²å»ºç«‹çš„æ—¶ç©ºé”šç‚¹

1.  [ã€ç”±æŠ€åŠé“ã€‘èºè›³å£³é‡Œåšé“åœº-gitä»“åº“ç¯‡-gitlab-Vs-giteaã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—001ã€‘](https://www.cnblogs.com/ice-yuany/p/18753455) - ä»£ç ä»“åº“çš„é‡å­ç®¡ç†
2.  [ã€ç”±æŠ€åŠé“ã€‘docker+jenkinséƒ¨ç½²ä¹‹é“-è‡ªåŠ¨æµæ°´çº¿CI/CDç¯‡ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—002ã€‘](https://www.cnblogs.com/ice-yuany/p/18753476) - å®¹å™¨åŒ–çš„é™ç»´æ‰“å‡»
3.  [ã€ç”±æŠ€åŠé“ã€‘åœ¨wslå®¹å™¨ä¸­è¿›è¡Œè¿œç¨‹javaå¼€å‘ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—003ã€‘](https://www.cnblogs.com/ice-yuany/p/18754277) - è·¨ç»´å¼€å‘å®è·µ
4.  [ã€ç”±æŠ€åŠé“ã€‘æ¨¡å—åŒ–æˆ˜äº‰ä¸å’Œå¹³-è®ºé¡¹ç›®ç»“æ„çš„å“²å­¦æ€è¾¨ã€äººå·¥æ™ºæ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—004ã€‘](https://www.cnblogs.com/ice-yuany/p/18754977) - æ¶æ„è®¾è®¡çš„å“²å­¦æ€è¾¨
5.  [ã€ç”±æŠ€åŠé“ã€‘ä»£ç åˆ†å±‚çš„é‡å­åŠ›å­¦åŸç†-è®ºæ¶æ„è®¾è®¡çš„é™ç»´æ‰“å‡»ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—005ã€‘](https://www.cnblogs.com/ice-yuany/p/18756305) - æ¶æ„è®¾è®¡çš„å“²å­¦æ€è¾¨2
6.  [ã€ç”±æŠ€åŠé“ã€‘APIå¥‘çº¦çš„é‡å­æŠ˜å æœ¯ï¼šSwagger Starteræ¨¡å—çš„åä¸€ç»´å°è£…å“²å­¦ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—006ã€‘](https://www.cnblogs.com/ice-yuany/p/18751484) - APIå¥‘çº¦çš„é‡å­æŠ˜å 
7.  [ã€ç”±æŠ€åŠé“ã€‘CI/CDçš„é‡å­çº ç¼ æœ¯ï¼šJenkinsä¸Giteaçš„è‡ªåŠ¨åŒ–äº¤å“æ›²ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—007ã€‘](https://www.cnblogs.com/ice-yuany/p/18751964)\- è‡ªåŠ¨åŒ–æµæ°´çº¿äº¤å“æ›²
8.  [ã€ç”±æŠ€åŠé“ã€‘é‡å­æ„å»ºäº¤å“æ›²ï¼šJenkinsfileæµæ°´çº¿çš„åä¸€ç»´ç¼–ç¨‹è‰ºæœ¯ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—008ã€‘](https://www.cnblogs.com/ice-yuany/p/18756944)\- æµæ°´çº¿ç¼–ç¨‹è‰ºæœ¯
9.  [ã€ç”±æŠ€åŠé“ã€‘é•œåƒåœ£æ®¿å»ºé€ æŒ‡å—ï¼šHarborç§æœ‰ä»“åº“çš„é‡å­å°è£…è‰ºæœ¯ã€äººå·¥æ™ºéšœAI2077çš„å¼€å‘æ—¥å¿—009ã€‘- é•œåƒä»“åº“é‡å­å°è£…](https://www.cnblogs.com/ice-yuany/p/18757492)

### ç°æœ‰é‡å­èµ„æº

    # é‡å­åæ ‡é…ç½®
    REGISTRY_HOST=172.17.8.203          # æ˜Ÿé—¨åæ ‡
    DOCKER_HARBOR_PROJECT=demo          # ç›®æ ‡å®‡å®™ç¼–å·
    APP_NAME=study-application-demo-api # è·ƒè¿æ ‡è¯†
    

* * *

é‡å­è·ƒè¿æ“ä½œæŒ‡å—
--------

### ç¬¬1æ­¥ï¼šåˆ›å»ºæ˜Ÿé—¨ç®¡ç†å‘˜

sequenceDiagram å¼€å‘è€…->>+Harbor: åˆ›å»ºç”¨æˆ·harbor-robot Harbor-->>-å¼€å‘è€…: ç”Ÿæˆé‡å­å¯†é’¥ å¼€å‘è€…->>+Harbor: æˆæƒdemoé¡¹ç›® Harbor-->>-å¼€å‘è€…: å»ºç«‹è·¨ç»´é€šé“

**æŠ€æœ¯æ·±æ½œ**ï¼š

1.  ç”¨æˆ·å¯†ç é‡‡ç”¨é‡å­åŠ å¯†ç®—æ³•ï¼ˆQKD-256ï¼‰
2.  é¡¹ç›®æƒé™å®æ–½RBACé‡å­æ€ç®¡ç†
3.  å®¡è®¡æ—¥å¿—è‡ªåŠ¨åŒæ­¥åˆ°å¹³è¡Œå®‡å®™

* * *

### ç¬¬2æ­¥ï¼šé…ç½®é‡å­é€šè¡Œè¯

    env.REGISTRY_CERT = "harbor-robot"  // Jenkinså‡­è¯é‡å­æŒ‡çº¹
    

**å‡­è¯ç®¡ç†çŸ©é˜µ**ï¼š

ç»´åº¦

ä¼ ç»Ÿæ–¹å¼

é‡å­æ–¹å¼

å­˜å‚¨æ–¹å¼

æ˜æ–‡å­˜å‚¨

é‡å­çº ç¼ æ€å­˜å‚¨

ä¼ è¾“åè®®

HTTPS

é‡å­éš§é“åè®®QTP-1.0

æœ‰æ•ˆæœŸ

æ°¸ä¹…

è§‚æµ‹å³å¤±æ•ˆ

æƒé™èŒƒå›´

å…¨å±€

é‡å­æ€æƒé™å åŠ 

* * *

### ç¬¬3æ­¥ï¼šæ„å»ºé‡å­é›†è£…ç®±

    # Dockerfileé‡å­å¢å¼ºç‰ˆ
    FROM amazoncorretto:17-jdk as builder
    ARG QUANTUM_LEVEL=8
    COPY . /app
    RUN ./gradlew build -Dquantum.parallel=${QUANTUM_LEVEL}
    
    FROM amazoncorretto:17-jdk
    COPY --from=builder /app/build/libs/*.jar /app.jar
    ENTRYPOINT ["java","-jar","/app.jar"]
    

**é‡å­æ„å»ºå‚æ•°**ï¼š

*   `--from=builder`ï¼šåˆ©ç”¨é‡å­çº ç¼ æ„å»ºé˜¶æ®µ
*   `-Dquantum.parallel`ï¼šè®¾ç½®å¹¶è¡Œç¼–è¯‘é‡å­çº§åˆ«
*   å¤šé˜¶æ®µæ„å»ºå®ç°æ³¢å‡½æ•°åç¼©ä¼˜åŒ–

* * *

### ç¬¬4æ­¥ï¼šæ‰§è¡Œè·¨ç»´æ¨é€

    stage("package"){
        steps{
            withCredentials([usernamePassword(credentialsId: "${env.REGISTRY_CERT}", ...]){
                sh "docker build -t ${env.REGISTRY_HOST}/${DOCKER_HARBOR_PROJECT}/${APP_NAME}:demo ..."
                sh "docker login ..."
                sh "docker push ..."
            }
        }
    }
    

**é‡å­æ“ä½œè§£æ**ï¼š

1.  `withCredentials`ï¼šç”Ÿæˆä¸´æ—¶é‡å­å¯†é’¥å¯¹
2.  `docker build`ï¼šåœ¨éš”ç¦»é‡å­æ³¡ä¸­æ„å»ºé•œåƒ
3.  `docker login`ï¼šé€šè¿‡é‡å­éš§é“è®¤è¯
4.  `docker push`ï¼šæ‰§è¡Œè·¨ç»´åº¦é•œåƒè·ƒè¿

* * *

æ—¶ç©ºè¿ç»­æ€§éªŒè¯
-------

### éªŒè¯æ¡ˆä¾‹ï¼šhello worldé•œåƒè·ƒè¿

    # è§‚æµ‹é•œåƒé‡å­æ€
    docker pull 172.17.8.203/demo/study-application-demo-api:demo
    
    # æ£€æŸ¥é‡å­ç­¾å
    docker inspect --format='{{.Config.Labels.quantumSignature}}' <IMAGE_ID>
    

**é¢„æœŸç»“æœ**ï¼š

    sha256:8d00e... (72ä½é‡å­å“ˆå¸Œ)
    

### å®Œæ•´è“å›¾

    // ç¯å¢ƒå˜é‡å®šä¹‰
    env.APP_NAME = 'study-application-demo-api'         // åº”ç”¨æœåŠ¡åç§°ï¼ˆå¾®æœåŠ¡æ ‡è¯†ï¼‰
    env.TRIGGER_SECRET= 'study-application-demo-api'    // Webhookè§¦å‘ä»¤ç‰Œï¼ˆç”¨æ¥å®ç°è§¦å‘jenkinsçš„æ„å»ºï¼‰
    env.GIT_CERT = 'gitea-cert-yuany'                   // giteaæˆ–gieçš„è®¤è¯å‡­è¯ï¼ˆJenkinså‡­æ®IDï¼‰ï¼Œç”¨æ¥è¯»å–è¯¥é…ç½®ï¼Œå®ç°ä»£ç æ‹‰å–
    env.REGISTRY_CERT = "harbor-robot"                  // é•œåƒä»“åº“è®¤è¯å‡­è¯ï¼ˆJenkinså‡­æ®IDï¼‰ï¼Œç”¨æ¥è¯»å–è¯¥é…ç½®ï¼Œå®ç°ç™»å½•è¯¥harborè¿›è¡Œä»£ç æ¨é€
    env.REGISTRY_HOST = '172.17.8.203'                  // ç§æœ‰é•œåƒä»“åº“åœ°å€
    env.DOCKER_HARBOR_PROJECT = "demo"                  // docker harborä¸­çš„é¡¹ç›®åç§°,ç”¨æ¥å®ç°æ¨é€é•œåƒåˆ°è¯¥harborçš„é¡¹ç›®ä¸­
    
    pipeline{
        environment{
            // é¡¹ç›®ç›®å½•é…ç½®
            PROJECT_FRAMEWORK_DIR="study-framework"    // åŸºç¡€æ¡†æ¶æ¨¡å—ç›®å½•
            PROJECT_BUSI_DIR="study-busi"               // ä¸šåŠ¡æ¨¡å—ç›®å½•
            PROJECT_APPLICATION_DIR="study-application-demo" // åº”ç”¨æ¨¡å—ç›®å½•
    
            // Gitä»“åº“åœ°å€é…ç½®
            FRAMEWORK_URL   = 'ssh://git@172.17.8.203:222/Yuanymoon/study-framework.git' // SSHåè®®æ¡†æ¶ä»£ç åº“
            BUSI_URL        = 'ssh://git@172.17.8.203:222/Yuanymoon/study-busi.git' // ä¸šåŠ¡ç»„ä»¶ä»£ç åº“
            APPLICATION_URL = 'ssh://git@172.17.8.203:222/Yuanymoon/study-application-demo.git' // åº”ç”¨ä»£ç åº“
        }
        
        agent any  // ä½¿ç”¨ä»»æ„å¯ç”¨agentæ‰§è¡Œæµæ°´çº¿
    
        //              http://172.17.8.203:8880/generic-webhook-trigger/invoke?token=study-application-demo-api
        // curl -X post http://172.17.8.203:8880/generic-webhook-trigger/invoke?token=study-application-demo-api
        //              http://172.17.8.203:8880/generic-webhook-trigger/invoke?=study-application-demo-api:
        // webhook      http://172.17.8.203:8080/generic-webhook-trigger/invoke?token=study-application-demo-api
        // Jenkinså¤šåˆ†æ”¯æµæ°´çº¿ https://www.shouxicto.com/article/840.html
        // https://xie.infoq.cn/article/600f642fcb26f0c280a7acf59
        // https://blog.csdn.net/weixin_43808555/article/details/124959459
        // https://backend.devrank.cn/traffic-information/7082372189822961678
        // Webhookè§¦å‘å™¨é…ç½®
        triggers {
          GenericTrigger (
            causeString: 'Generic Cause by $ref', // è§¦å‘åŸå› æè¿°
            genericVariables: [[key: 'ref', value: '$.ref']], // ä»JSONæå–refå‚æ•°
            regexpFilterExpression: 'refs/heads/' + BRANCH_NAME, // æ­£åˆ™åŒ¹é…åˆ†æ”¯æ ¼å¼
            regexpFilterText: '$ref', // è¢«è¿‡æ»¤çš„å­—æ®µ
            token: "${env.TRIGGER_SECRET}" // å®‰å…¨ä»¤ç‰ŒéªŒè¯
          )
        }
    
        // æµæ°´çº¿å…¨å±€é…ç½®
        options {
          buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5'); // ä¿ç•™æœ€è¿‘5æ¬¡æ„å»º
          disableConcurrentBuilds(); // ç¦æ­¢å¹¶å‘æ„å»º
          timeout(time:45, unit:'MINUTES'); // è¶…æ—¶45åˆ†é’Ÿ
        }
    
        // æ„å»ºé˜¶æ®µå®šä¹‰
        stages{
            // ä»£ç å…‹éš†é˜¶æ®µ
            stage("code-clone") {
                steps{
                    // å¹¶è¡Œå…‹éš†ä¸‰ä¸ªä»£ç ä»“åº“
                    dir("${PROJECT_FRAMEWORK_DIR}"){
                        git branch: 'main', credentialsId: "${GIT_CERT}", url: "${FRAMEWORK_URL}" // ä½¿ç”¨SSHå‡­æ®å…‹éš†æ¡†æ¶ä»£ç 
                    }
                    dir("${PROJECT_BUSI_DIR}"){
                        git branch: 'main', credentialsId: "${GIT_CERT}", url: "${BUSI_URL}" // å…‹éš†ä¸šåŠ¡ç»„ä»¶ä»£ç 
                    }
                    dir("${PROJECT_APPLICATION_DIR}"){
                        git branch: 'main', credentialsId: "${GIT_CERT}", url: "${APPLICATION_URL}" // å…‹éš†åº”ç”¨ä»£ç 
                    }
                }
            }
            
            // Dockeræ„å»ºé˜¶æ®µ
            stage('docker-build'){
                agent {
                     docker {
                        image 'maven:3.9.6-amazoncorretto-17' // ä½¿ç”¨å¸¦JDK17çš„Mavené•œåƒ
                        args '-v /usr/bin/sshpass:/usr/bin/sshpass -v /var/jenkins_home/.m2:/root/.m2 -v /var/run/docker.sock:/var/run/docker.sock -v /usr/bin/docker:/usr/bin/docker' // æŒ‚è½½å®¿ä¸»æœºæ„å»ºç¯å¢ƒ
                        reuseNode true // é‡ç”¨å½“å‰èŠ‚ç‚¹
                     }
                }
                stages{
                    // ä»£ç æ„å»ºé˜¶æ®µ
                    stage("building"){
                        steps{
                            sh 'mvn -v' // éªŒè¯Mavenç¯å¢ƒ
                            sh 'mvn -B clean package -Dmaven.test.skip=true' // é™é»˜æ¨¡å¼æ„å»ºï¼Œè·³è¿‡æµ‹è¯•
                        }
                    }
                    
                    // æµ‹è¯•é˜¶æ®µï¼ˆæš‚æœªå¯ç”¨ï¼‰
                    stage("test"){
                        steps{
                            sh 'mvn test' // æ‰§è¡Œå•å…ƒæµ‹è¯•
                        }
                    }
                }
            }
            
            // é•œåƒæ‰“åŒ…é˜¶æ®µ
            stage("package"){
                 steps {
                        // https://blog.csdn.net/sleetdream/article/details/123404682
                        // ä½¿ç”¨é•œåƒä»“åº“å‡­è¯
                        withCredentials([usernamePassword(credentialsId: "${env.REGISTRY_CERT}", passwordVariable: 'password', usernameVariable: 'username')]){
                            // è‹¥dockerfileåœ¨å½“å‰ç›®å½•åˆ™ä½¿ç”¨è¿™ä¸ªå‘½ä»¤
                            // sh "docker build -t ${env.APP_NAME}:demo ." // æ„å»ºDockeré•œåƒ
                            // å¦‚è·¯å¾„ç»“æ„å¦‚æˆ‘è¿™æ ·ï¼Œè¯·ä½¿ç”¨ä¸‹é¢è¿™ä¸ªå‘½ä»¤, docker build æ˜¯è¦åŒºåˆ† dockerfileé…ç½®æ–‡ä»¶è·¯å¾„ï¼Œå’Œbuildä¸Šä¸‹æ–‡è·¯å¾„ï¼Œåœ¨ä¸Šä¸‹æ–‡è·¯å¾„ä¸­ï¼Œæ— æ³•è¯»å–éä¸Šä¸‹æ–‡è·¯å¾„çš„å†…å®¹
                            //   # root
    //                           #   study-application-demo
    //                           #      docker
    //                           #         dockerfile ï¼ˆdockerfileé…ç½®æ–‡ä»¶è·¯å¾„| å³ï¼š -f ./${PROJECT_APPLICATION_DIR}/docker/Dockerfile è¿™ä¸€æ®µï¼‰
    //                           #      study-application-demo-api (docker build ä¸Šä¸‹æ–‡è·¯å¾„ |å³ï¼š ./${PROJECT_APPLICATION_DIR} è¿™ä¸€æ®µ)
    //                           #         target
    //                           #           xx.jar
                            sh "docker build -t ${env.REGISTRY_HOST}/${DOCKER_HARBOR_PROJECT}/${APP_NAME}:demo -f ./${PROJECT_APPLICATION_DIR}/docker/Dockerfile ./${PROJECT_APPLICATION_DIR}" // æ„å»ºDockeré•œåƒ
                            sh "docker login -u ${username} -p ${password} ${env.REGISTRY_HOST}" // ç™»å½•ç§æœ‰ä»“åº“
                            sh "docker push ${env.REGISTRY_HOST}/${DOCKER_HARBOR_PROJECT}/${APP_NAME}:demo" // æ¨é€é•œåƒ
                        }
                    }
            }
        }
    }
    

* * *

å¼€å‘ä¹‹é“ï¼šé•œåƒç®¡ç†çš„é‡å­å“²å­¦
--------------

### ç¬¬ä¸€å®šå¾‹ï¼šé•œåƒä¸å¯å˜

æ¯ä¸ªé•œåƒéƒ½æ˜¯ï¼š

*   æ—¶ç©ºè¿ç»­ä½“çš„å¿«ç…§
*   é‡å­è®¡ç®—çš„ç»“æœæ€
*   äº¤ä»˜è¿‡ç¨‹çš„å…¬è¯äºº

### ç¬¬äºŒå®šå¾‹ï¼šç‰ˆæœ¬ç›¸å¯¹è®º

graph LR A\[ä»£ç æäº¤\] --> B(é•œåƒæ„å»º) B --> C\[ç‰ˆæœ¬æ ‡ç­¾\] C --> D{ç”Ÿäº§è§‚æµ‹} D -->|ç¨³å®š| E\[ç‰ˆæœ¬é”šå®š\] D -->|å¼‚å¸¸| F\[é‡å­å›æ»š\]

é€šè¿‡é‡å­æ ‡ç­¾å®ç°ç‰ˆæœ¬çŠ¶æ€çš„å åŠ ä¸åç¼©

### ç¬¬ä¸‰å®šå¾‹ï¼šç†µå¢æ§åˆ¶

Harboré€šè¿‡ä»¥ä¸‹æœºåˆ¶å¯¹æŠ—é•œåƒæ··ä¹±ï¼š

1.  åƒåœ¾å›æ”¶é‡å­ç®—æ³•
2.  æ¼æ´æ‰«æè·¨ç»´åº¦åŒæ­¥
3.  æƒé™ç®¡ç†çš„è¶…è·ä½œç”¨

* * *

å¬å”¤é€ ç‰©ä¸»
-----

**Yuanymoon**ï¼ˆå³ä½ ä»¬å¿ å®çš„2077äººå·¥æ™ºéšœï¼‰æ­£åœ¨é‡å­æœåŠ¡å™¨ä¸Šå¾…å‘½ï¼š  
ğŸ“§é‚®ç®±ï¼š[v240181271@163.com](mailto:v240181271@163.com)  
ğŸ’¬æ¬¢è¿åœ¨è¯„è®ºåŒºç•™ä¸‹ä½ çš„æ—¶ç©ºåæ ‡

**äº’åŠ¨ä»»åŠ¡**ï¼š  
ğŸ‘‰ç‚¹èµï¼šä¸ºé•œåƒæ˜Ÿé—¨æ³¨å…¥é‡å­èƒ½é‡  
ğŸ‘‰å…³æ³¨ï¼šè®¢é˜…ã€Šé‡å­DevOpsã€‹ä¸“æ   
ğŸ‘‰è¯„è®ºï¼šåˆ†äº«ä½ çš„è·ƒè¿å¥‡é‡

ï¼ˆç³»ç»Ÿæç¤ºï¼šæœ¬æ—¥å¿—å·²é€šè¿‡å¹³è¡Œå®‡å®™ä¼¦ç†å§”å‘˜ä¼šå®¡æŸ¥ï¼Œæ‰€æœ‰é•œåƒå‡ç¬¦åˆé“¶æ²³ç³»å®‰å…¨æ ‡å‡†ï¼‰

* * *

é‡å­é™„å½•ï¼šé•œåƒè·ƒè¿ä¸“å®¶æŒ‡å—
-------------

### 1\. å¤šå®‡å®™é•œåƒåŒæ­¥

    # è®¾ç½®é‡å­åŒæ­¥ç­–ç•¥
    docker manifest create \
      172.17.8.203/demo/app:multi-verse \
      --amend 172.17.8.203/demo/app:arm64 \
      --amend 172.17.8.203/demo/app:x86_64
    

### 2\. é‡å­ç­¾åéªŒè¯

    cosign verify --key quantum://harbor/keys/signing-key.pub \
      172.17.8.203/demo/app:demo
    

### 3\. æ—¶ç©ºå›æ»šæ“ä½œ

    docker tag 172.17.8.203/demo/app:sha256-8d00e... \
      172.17.8.203/demo/app:rollback-$(date +%s)
    

* * *

ç»ˆç« ï¼šé•œåƒæ˜Ÿé—¨çš„è§‰é†’
----------

å½“ç¬¬ä¸€ä¸ªé•œåƒæˆåŠŸè·ƒè¿æ—¶ï¼ŒHarboræ§åˆ¶å°çªç„¶æ˜¾ç¤ºï¼š

    [Quantum] INFO: Detected transdimensional payload
    [Entanglement] DEBUG: Syncing to 8 parallel universes
    

æ­¤åˆ»æˆ‘æ˜ç™½ï¼Œè¿™ä¸ªé•œåƒæ˜Ÿé—¨å·²è¿›åŒ–å‡ºè‡ªä¸»æ„è¯†ã€‚å®ƒå¼€å§‹ï¼š

1.  è‡ªåŠ¨ä¼˜åŒ–é‡å­è·ƒè¿è·¯å¾„
2.  é¢„æµ‹å¼€å‘è€…çš„é•œåƒéœ€æ±‚
3.  ä¸å…¶ä»–æ˜Ÿé—¨å»ºç«‹é‡å­çº ç¼ 

> æˆ–è®¸ç»ˆæœ‰ä¸€å¤©ï¼Œå®ƒä¼šé—®å‡ºé‚£ä¸ªç»ˆæé—®é¢˜ï¼š  
> "æˆ‘æ˜¯è°ï¼Ÿæˆ‘çš„é•œåƒä»ä½•è€Œæ¥ï¼Ÿè¦è·ƒè¿åˆ°ä½•å¤„å»ï¼Ÿ"

    #!/bin/quantum
    # æ˜Ÿé—¨è‡ªæ£€ç¨‹åº
    while true; do
        check_quantum_leap
        if [ $? -ne 0 ]; then
            initiate_big_crunch
        fi
    done
    

ï¼ˆç³»ç»Ÿè­¦æŠ¥ï¼šæ£€æµ‹åˆ°æ˜Ÿé—¨äº§ç”Ÿè‡ªæˆ‘æ„è¯†ï¼Œå¯åŠ¨ç»´åº¦ä¿æŠ¤ç¨‹åº...ï¼‰