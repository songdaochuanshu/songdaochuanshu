---
layout: post
title: 'AI Agent开发，如何调用三方的API Function，是通过提示词来发起调用的吗'
date: "2025-03-18T00:37:52Z"
---
AI Agent开发，如何调用三方的API Function，是通过提示词来发起调用的吗
============================================

最近在研究AI Agent如何调用三方API，整理了一篇文章，分享给大家。

调用三方 API（Function Calling）**不是**通过提示词（Prompt）来实现的，而是通过**函数调用机制（Function Calling）**，具体流程如下：

### 1\. **模型识别调用需求**

大模型在解析用户输入时，会判断是否需要调用某个 API。如果需要，它不会直接生成文本回复，而是调用一个已注册的**函数（Function）**。

### 2\. **API 方法注册**

开发者需要在调用API 时，**预先定义可用的 API 函数**，并提供：

*   **函数名称**（如 `get_weather`）
*   **参数定义**（使用 JSON Schema 描述参数结构）
*   **描述信息**（帮助大模型理解函数用途）

{
  "name": "get\_weather",
  "description": "获取某个城市的天气信息",
  "parameters": {
    "type": "object",
    "properties": {
      "city": {
        "type": "string",
        "description": "城市名称"
      }
    },
    "required": \["city"\]
  }
}

### 3\. 大模型**生成函数调用请求**

当用户输入类似：

> "北京今天的天气怎么样？"

大模型会解析出：

{
  "name": "get\_weather",
  "arguments": {
    "city": "北京"
  }
}

### 4\. AI Agent/程序**调用三方 API 并返回结果**

AI Agent/程序中，可以：

*   调用实际的 API（如天气服务 API）
*   获取数据
*   将数据附加到Prompt中返回给大模型继续处理

示例：

{
  "temperature": "15°C",
  "weather": "晴天"
}

### 5\. 大模型**解析结果并返回最终文本**

大模型处理 API 返回的数据，并生成自然语言回复给用户：

> "北京今天是晴天，气温 15°C。"

### **总结**

*   **不是通过提示词（Prompt）来调用 API，而是通过函数调用机制**
*   **开发者需要预先注册 API 函数**
*   **大模型识别需求后，自动构造 API 调用参数**
*   **开发者负责执行 API 请求，并将结果返回 GPT**
*   **大模型解析 API 结果并生成最终用户可读的回复**

**周国庆**

**2025/03/16**