---
layout: post
title: 'SpringBoot进阶教程(八十八)获取图片的宽高'
date: "2025-11-27T00:41:57Z"
---
SpringBoot进阶教程(八十八)获取图片的宽高
==========================

> 最近在做图片处理，这里介绍一下Java中常见的获取图片宽高尺寸的方法。

v使用BufferedImage(推荐)
--------------------

适用于常见图片格式，如果是处理本地文件系统中的图片文件，可以使用 Java 的ImageIO类结合BufferedImage来获取宽高，示例代码如下：

    /\*\*
     \* 使用BufferedImage（适用于常见图片格式）
     \* 如果是处理本地文件系统中的图片文件，可以使用 Java 的ImageIO类结合BufferedImage来获取宽高。
     \* @param imagePath 图片path
     \* @return key是宽，value是高
     \*/
    public static ImmutablePair<Integer, Integer> bufferedImageMeasure(String imagePath){
        try {
            // 读取图片文件，将其转换为BufferedImage对象
            File imageFile = new File(imagePath);
            BufferedImage image \= ImageIO.read(imageFile);
            // 获取图片的宽度和高度
            int width = image.getWidth();
            int height = image.getHeight();

            return new ImmutablePair<>(width, height);
        } catch (IOException e) {
            log.error("error", e);
        }

        return new ImmutablePair<>(0, 0);
    }

上述代码中：

*   首先通过ImageIO.read()方法读取指定路径的图片文件，将其转换为BufferedImage对象。
*   然后利用BufferedImage的getWidth()和getHeight()方法分别获取图片的宽度和高度，并进行输出。

v使用Image类(推荐)
-------------

使用Image类的getWidth()和getHeight()方法（更通用一些情况）。这种方式可以用于处理不仅仅是本地文件的图片资源，比如网络图片等（不过需要先获取图片的输入流等额外操作），示例代码片段如下：

    /\*\*
     \* 用于处理不仅仅是本地文件的图片资源，比如网络图片等（不过需要先获取图片的输入流等额外操作）
     \* @param imageUrl 图片url
     \* @return key是宽，value是高
     \*/
    public static ImmutablePair<Integer, Integer> imageMeasure(String imageUrl){
        try {
            URL url \= new URL(imageUrl);
            ImageIcon icon \= new ImageIcon(url);
            Image image \= icon.getImage();

            // 获取宽度和高度
            int width = image.getWidth(null);
            int height = image.getHeight(null);

            return new ImmutablePair<>(width, height);
        } catch (IOException e) {
            e.printStackTrace();
        }

        return new ImmutablePair<>(0, 0);
    }

这段代码先通过URL对象指定图片的来源（这里假设是网络图片，若是本地文件可以通过FileInputStream等构建相应的输入流再转换为Image对象），然后借助ImageIcon获取Image对象，进而调用其getWidth()和getHeight()方法获取宽高信息。

v更底层的字节流方式(未验证)
---------------

对于处理一些特定格式（如 PNG、JPEG 等）更底层的字节流方式（相对复杂且特定场景）以处理 JPEG 格式图片为例，通过解析 JPEG 文件头信息来获取宽高，示例代码如下：

    /\*\*
     \*
     \* @param imagePath 图片地址
     \* @return key是宽，value是高
     \*/
    public static ImmutablePair<Integer, Integer> fileInputStreamMeasure(String imagePath){
        try {
            FileInputStream fis \= new FileInputStream(imagePath);
            byte\[\] header = new byte\[16\];
            fis.read(header);

            if (header\[0\] == (byte) 0xFF && header\[1\] == (byte) 0xD8 && header\[2\] == (byte) 0xFF &&
                    (header\[3\] & 0xF0) == 0xE0) {
                // 解析宽度
                int width = ((header\[7\] << 8) & 0xFF00) | (header\[8\] & 0xFF);
                // 解析高度
                int height = ((header\[9\] << 8) & 0xFF00) | (header\[10\] & 0xFF);

                return new ImmutablePair<>(width, height);
            }
            fis.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return new ImmutablePair<>(0, 0);
    }

这种方式是直接读取图片文件的字节流，通过解析特定格式（这里以 JPEG 为例）的文件头中记录宽高的字节位置来获取相应信息，不过这种方式对不同格式要按照其各自规范去解析，通用性不如前面利用 Java 标准库中图像相关类的方法，一般用于对性能等有特殊要求且明确图片格式的场景。

v完整代码
-----

import lombok.extern.slf4j.Slf4j;
import org.apache.commons.lang3.tuple.ImmutablePair;

import javax.imageio.ImageIO;
import javax.swing.\*;
import java.awt.\*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.net.URL;
import java.io.FileInputStream;

@Slf4j
public class ImageHelper {
    /\*\*
     \* 使用BufferedImage（适用于常见图片格式）
     \* 如果是处理本地文件系统中的图片文件，可以使用 Java 的ImageIO类结合BufferedImage来获取宽高。
     \* @param imagePath 图片path
     \* @return key是宽，value是高
     \*/
    public static ImmutablePair<Integer, Integer> bufferedImageMeasure(String imagePath){
        try {
            // 读取图片文件，将其转换为BufferedImage对象
            File imageFile = new File(imagePath);
            BufferedImage image \= ImageIO.read(imageFile);
            // 获取图片的宽度和高度
            int width = image.getWidth();
            int height = image.getHeight();

            return new ImmutablePair<>(width, height);
        } catch (IOException e) {
            log.error("error", e);
        }

        return new ImmutablePair<>(0, 0);
    }

    /\*\*
     \* 用于处理不仅仅是本地文件的图片资源，比如网络图片等（不过需要先获取图片的输入流等额外操作）
     \* @param imageUrl 图片url
     \* @return key是宽，value是高
     \*/
    public static ImmutablePair<Integer, Integer> imageMeasure(String imageUrl){
        try {
            URL url \= new URL(imageUrl);
            ImageIcon icon \= new ImageIcon(url);
            Image image \= icon.getImage();

            // 获取宽度和高度
            int width = image.getWidth(null);
            int height = image.getHeight(null);

            return new ImmutablePair<>(width, height);
        } catch (IOException e) {
            e.printStackTrace();
        }

        return new ImmutablePair<>(0, 0);
    }

    /\*\*
     \*
     \* @param imagePath 图片地址
     \* @return key是宽，value是高
     \*/
    public static ImmutablePair<Integer, Integer> fileInputStreamMeasure(String imagePath){
        try {
            FileInputStream fis \= new FileInputStream(imagePath);
            byte\[\] header = new byte\[16\];
            fis.read(header);

            if (header\[0\] == (byte) 0xFF && header\[1\] == (byte) 0xD8 && header\[2\] == (byte) 0xFF &&
                    (header\[3\] & 0xF0) == 0xE0) {
                // 解析宽度
                int width = ((header\[7\] << 8) & 0xFF00) | (header\[8\] & 0xFF);
                // 解析高度
                int height = ((header\[9\] << 8) & 0xFF00) | (header\[10\] & 0xFF);

                return new ImmutablePair<>(width, height);
            }
            fis.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return new ImmutablePair<>(0, 0);
    }
}

v源码地址
-----

[https://github.com/toutouge/javademosecond](https://github.com/toutouge/javademosecond "请叫我头头哥")

  
作　　者：**[请叫我头头哥](http://www.cnblogs.com/toutou/ "请叫我头头哥")**  
出　　处：[http://www.cnblogs.com/toutou/](http://www.cnblogs.com/toutou/ "请叫我头头哥")  
关于作者：专注于基础平台的项目开发。如有问题或建议，请多多赐教！  
版权声明：本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文链接。  
特此声明：所有评论和私信都会在第一时间回复。也欢迎园子的大大们指正错误，共同进步。或者[直接私信](http://msg.cnblogs.com/msg/send/请叫我头头哥 "请叫我头头哥")我  
声援博主：如果您觉得文章对您有帮助，可以点击文章右下角**【推荐】**一下。您的鼓励是作者坚持原创和持续写作的最大动力！  

#comment\_body\_3242240 { display: none }