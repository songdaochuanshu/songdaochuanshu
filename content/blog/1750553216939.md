---
layout: post
title: 'ã€å¥½ç”¨æ¨èã€‘å…è´¹åœ¨çº¿å›¾ç‰‡å‹ç¼©å·¥å…·,é™„æºç '
date: "2025-06-22T00:46:56Z"
---
ã€å¥½ç”¨æ¨èã€‘å…è´¹åœ¨çº¿å›¾ç‰‡å‹ç¼©å·¥å…·,é™„æºç 
====================

è¿™ç¯‡æ–‡ç« ä»‹ç»äº†ä½œè€…è‡ªåˆ¶çš„å…è´¹åœ¨çº¿å›¾ç‰‡å‹ç¼©å·¥å…· ï¼Œè¯¥å·¥å…·æ”¯æŒJPEGã€PNGã€GIFã€WebPå’ŒBMPæ ¼å¼ï¼Œç”¨æˆ·é€šè¿‡æ»‘å—å¯è‡ªç”±è°ƒæ•´å‹ç¼©è´¨é‡ï¼ˆ0%-100%ï¼‰ï¼Œé»˜è®¤è®¾ç½®ä¸º30%ä»¥å¹³è¡¡æ–‡ä»¶å¤§å°ä¸ç”»è´¨ï¼Œå‹ç¼©è¿‡ç¨‹å®Œå…¨åœ¨æµè§ˆå™¨ç«¯å®Œæˆï¼Œæ— éœ€æ‹…å¿ƒéšç§æ³„éœ²ï¼Œå·¥å…·é‡‡ç”¨å‰ç«¯Fetch APIä¸åç«¯ASP.NET Coreç»“åˆçš„æŠ€æœ¯æ¶æ„ï¼Œå“åº”è¿…é€Ÿä¸”æ“ä½œç®€å•ï¼Œä¸Šä¼ å›¾ç‰‡åå¯å®æ—¶é¢„è§ˆå‹ç¼©æ•ˆæœå¹¶ç›´æ¥ä¸‹è½½ï¼Œæºç å·²å…¬å¼€ä¾›å¼€å‘è€…å‚è€ƒï¼Œç‰¹åˆ«é€‚åˆéœ€è¦é¢‘ç¹å¤„ç†å›¾ç‰‡å‹ç¼©çš„ä¸ªäººæˆ–å°å›¢é˜Ÿä½¿ç”¨ï¼Œé¿å…äº†ä¾èµ–ç¬¬ä¸‰æ–¹VIPè½¯ä»¶æˆ–æ±‚åŠ©ä»–äººçš„éº»çƒ¦ã€‚

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç å†œåˆšå­ã€‚å‰å‡ å¤©å¡«å†™å¤‡æ¡ˆèµ„æ–™æ—¶éœ€è¦ä¸Šä¼ è¥ä¸šæ‰§ç…§ï¼Œè¦æ±‚2MBä»¥å†…ï¼Œè€æ¿å‘ç»™æˆ‘çš„æ–‡ä»¶æœ‰åå‡ MBï¼Œæ— æ³•ä¸Šä¼ ï¼Œç”¨ç½‘ä¸Šçš„åœ¨çº¿å·¥å…·ï¼Œåˆæ‹…å¿ƒå®‰å…¨æ€§ã€‚ä»¥å‰ä¹Ÿç»å¸¸é‡åˆ°éœ€è¦å›¾ç‰‡å¤ªå¤§çš„é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ‰¾åˆ«äººç”¨vipåŠå…¬è½¯ä»¶å¤„ç†çš„ï¼Œæ¯æ¬¡éƒ½è¦éº»çƒ¦åˆ«äººï¼Œäºæ˜¯æˆ‘å°±æƒ³ç€è‡ªå·±åšä¸€ä¸ªï¼Œä½¿ç”¨æ–¹ä¾¿è¿˜å®‰å…¨ã€‚æ¥ä¸‹æ¥æˆ‘ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹æˆ‘çš„å›¾ç‰‡å‹ç¼©å·¥å…·ï¼Œæºç åœ¨ç»“å°¾ã€‚

![å…è´¹åœ¨çº¿å›¾ç‰‡å‹ç¼©å·¥å…·](https://images.codeobservatory.cn/hexo/202506/21/2025062109254401.png)

ä½¿ç”¨è¯´æ˜
----

*   ä¸Šä¼ å›¾ç‰‡åï¼Œé€šè¿‡æ»‘å—è°ƒæ•´å‹ç¼©è´¨é‡ï¼ˆ0%-100%ï¼‰
*   ç‚¹å‡»"ä¸Šä¼ å¹¶å‹ç¼©å›¾ç‰‡"æŒ‰é’®è¿›è¡Œå¤„ç†
*   å‹ç¼©å®Œæˆåï¼Œå³ä¾§ä¼šæ˜¾ç¤ºå‹ç¼©åçš„å›¾ç‰‡
*   ç‚¹å‡»"ä¸‹è½½å‹ç¼©å›¾ç‰‡"æŒ‰é’®ä¿å­˜ç»“æœ

> å…ˆä½“éªŒä¸€ä¸‹å§ï¼[ğŸ‘‰å‹ç¼©å›¾ç‰‡](https://www.codeobservatory.cn/tools/image-compress.html)

æ”¯æŒæ ¼å¼
----

*   JPEG (.jpg, .jpeg)
*   PNG (.png)
*   GIF (.gif)
*   WebP (.webp)
*   BMP (.bmp)

è‡ªå®šä¹‰å‹ç¼©è´¨é‡
-------

*   ä½¿ç”¨æ»‘å—è‡ªç”±è°ƒæ•´å‹ç¼©è´¨é‡ï¼ˆ0%-100%ï¼‰
*   0% - æœ€é«˜å‹ç¼©ï¼ˆæœ€å°æ–‡ä»¶å°ºå¯¸ï¼Œæœ€ä½è´¨é‡ï¼‰
*   100% - æœ€ä½å‹ç¼©ï¼ˆæœ€å¤§æ–‡ä»¶å°ºå¯¸ï¼Œæœ€é«˜è´¨é‡ï¼‰
*   é»˜è®¤å€¼è®¾ç½®ä¸º30% - è‰¯å¥½å¹³è¡¡ç‚¹
*   å®æ—¶æ˜¾ç¤ºå‹ç¼©è´¨é‡ç™¾åˆ†æ¯”

æŠ€æœ¯å®ç°
----

*   å‰ç«¯ä½¿ç”¨Fetch APIå‘é€multipart/form-dataè¯·æ±‚
*   åç«¯ä½¿ç”¨ASP.NET Coreå¤„ç†æ–‡ä»¶ä¸Šä¼ 
*   ä½¿ç”¨ImageServiceè¿›è¡Œå›¾ç‰‡å‹ç¼©å¤„ç†
*   å“åº”çŠ¶æ€ç ï¼š200ï¼ˆæˆåŠŸï¼‰ã€400ï¼ˆé”™è¯¯è¯·æ±‚ï¼‰

æºç å¦‚ä¸‹
----

è¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å¹²ï¼

    <div class="container">
            <header>
                <h1><i class="fas fa-file-image"></i> å…è´¹åœ¨çº¿å›¾ç‰‡å‹ç¼©å·¥å…·</h1>
                <p>ä¿æŒç”»è´¨æ¸…æ™°ï¼Œå¿«é€Ÿç¼©å°JPG/PNG/GIF/WebPæ–‡ä»¶ï¼Œè‡ªå®šä¹‰å‹ç¼©å¤§å°ï¼Œå‹ç¼©åå¯ç›´æ¥ä¸‹è½½</p>
            </header>
    
            <div class="content">
                <div class="upload-section">
                    <h2 class="section-title"><i class="fas fa-cloud-upload-alt"></i> ä¸Šä¼ å›¾ç‰‡</h2>
                    <a href="/" class="browse-btn refresh" target="_blank" title="ç å†œè§‚æµ‹ç«™">é¦–é¡µ</a>
                    <button class="browse-btn refresh" onclick="window.location.reload();">åˆ·æ–°</button>
                    <div class="upload-area" id="uploadArea">
                        <i class="fas fa-images"></i>
                        <h3>æ‹–æ”¾å›¾ç‰‡åˆ°æ­¤å¤„</h3>
                        <p>æ”¯æŒ JPG, PNG, GIF, WEBP æ ¼å¼</p>
                        <button class="browse-btn">é€‰æ‹©å›¾ç‰‡</button>
                        <input type="file" id="fileInput" class="file-input" accept="image/*">
                    </div>
    
                    <div class="preview-container">
                        <div class="preview-title"><i class="fas fa-eye"></i> å›¾ç‰‡é¢„è§ˆ</div>
                        <div class="image-preview" id="imagePreview">
                            <img id="previewImage" src="" alt="é¢„è§ˆå›¾">
                        </div>
    
                        <div class="compression-control">
                            <div class="quality-label">
                                <span>å‹ç¼©è´¨é‡:</span>
                                <span class="quality-value" id="qualityValue">30%</span>
                            </div>
                            <div class="slider-container">
                                <input type="range" min="0" max="100" value="30" class="quality-slider" id="qualitySlider">
                            </div>
                            <div class="slider-ticks">
                                <span>0%</span>
                                <span>25%</span>
                                <span>50%</span>
                                <span>75%</span>
                                <span>100%</span>
                            </div>
                        </div>
    
                        <div class="progress-container" id="progressContainer">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
    
                        <button class="upload-btn" id="uploadBtn" disabled="">ä¸Šä¼ å¹¶å‹ç¼©å›¾ç‰‡</button>
    
                        <div class="api-info">
                        </div>
                    </div>
                </div>
    
                <div class="result-section">
                    <h2 class="section-title"><i class="fas fa-download"></i> å‹ç¼©ç»“æœ</h2>
    
                    <div class="result-container">
                        <div class="result-content">
                            <div class="result-placeholder" id="resultPlaceholder">
                                <i class="fas fa-cloud-download-alt"></i>
                                <p>å›¾ç‰‡å‹ç¼©åå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</p>
                                <p>æ‚¨å¯ä»¥ç›´æ¥ä¸‹è½½å‹ç¼©åçš„å›¾ç‰‡</p>
                            </div>
    
                            <img id="compressedImage" class="compressed-image" src="" alt="å‹ç¼©åçš„å›¾ç‰‡">
                            <a id="downloadLink" class="download-btn">
                                <i class="fas fa-download"></i> ä¸‹è½½å‹ç¼©å›¾ç‰‡
                            </a>
                        </div>
    
                        <div class="response-area">
                            <h3 class="response-title"><i class="fas fa-comment-alt"></i> å¤„ç†çŠ¶æ€</h3>
                            <div class="response-content" id="responseContent">
                                ç­‰å¾…ä¸Šä¼ å›¾ç‰‡...
                            </div>
                        </div>
                    </div>
    
                    <div class="info-card">
                        <h4><i class="fas fa-info-circle"></i> ä½¿ç”¨è¯´æ˜</h4>
                        <ul>
                            <li>ä¸Šä¼ å›¾ç‰‡åï¼Œé€šè¿‡æ»‘å—è°ƒæ•´å‹ç¼©è´¨é‡ï¼ˆ0%-100%ï¼‰</li>
                            <li>ç‚¹å‡»"ä¸Šä¼ å¹¶å‹ç¼©å›¾ç‰‡"æŒ‰é’®è¿›è¡Œå¤„ç†</li>
                            <li>å‹ç¼©å®Œæˆåï¼Œå³ä¾§ä¼šæ˜¾ç¤ºå‹ç¼©åçš„å›¾ç‰‡</li>
                            <li>ç‚¹å‡»"ä¸‹è½½å‹ç¼©å›¾ç‰‡"æŒ‰é’®ä¿å­˜ç»“æœ</li>
                        </ul>
                    </div>
                </div>
            </div>
    
            <footer>
                <p>å…è´¹åœ¨çº¿å›¾ç‰‡å‹ç¼©å·¥å…· Â© 2025 | <a href="https://www.codeobservatory.cn" target="_blank" title="ç å†œè§‚æµ‹ç«™">ç å†œè§‚æµ‹ç«™</a></p>
            </footer>
        </div>
    

         * {
             margin: 0;
             padding: 0;
             box-sizing: border-box;
             font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
         }
    
         body {
             background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
             min-height: 100vh;
             display: flex;
             justify-content: center;
             align-items: center;
             padding: 20px;
         }
    
         .container {
             width: 100%;
             max-width: 1200px;
             background-color: rgba(255, 255, 255, 0.97);
             border-radius: 20px;
             box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
             overflow: hidden;
             display: flex;
             flex-direction: column;
         }
    
         header {
             background: linear-gradient(to right, #1a2980, #26d0ce);
             color: white;
             padding: 30px 40px;
             text-align: center;
             position: relative;
             overflow: hidden;
         }
    
             header::before {
                 content: "";
                 position: absolute;
                 top: -50%;
                 left: -50%;
                 width: 200%;
                 height: 200%;
                 background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
                 transform: rotate(30deg);
             }
    
             header h1 {
                 font-size: 2.5rem;
                 margin-bottom: 10px;
                 display: flex;
                 align-items: center;
                 justify-content: center;
                 gap: 15px;
                 position: relative;
                 text-shadow: 0 2px 4px rgba(0,0,0,0.2);
             }
    
             header p {
                 font-size: 1.2rem;
                 opacity: 0.9;
                 max-width: 700px;
                 margin: 15px auto 0;
                 position: relative;
             }
    
         .content {
             display: flex;
             padding: 0;
             flex-wrap: wrap;
         }
    
         .upload-section {
             flex: 1;
             min-width: 350px;
             padding: 40px;
             border-right: 1px solid #eee;
             position: relative;
         }
    
         .result-section {
             flex: 1;
             min-width: 350px;
             padding: 40px;
             background-color: #f9f9ff;
             display: flex;
             flex-direction: column;
         }
    
         .section-title {
             font-size: 1.6rem;
             color: #333;
             margin-bottom: 25px;
             display: flex;
             align-items: center;
             gap: 10px;
             position: relative;
             padding-bottom: 10px;
         }
    
             .section-title::after {
                 content: "";
                 position: absolute;
                 bottom: 0;
                 left: 0;
                 width: 50px;
                 height: 3px;
                 background: linear-gradient(to right, #1a2980, #26d0ce);
                 border-radius: 3px;
             }
    
             .section-title i {
                 color: #1a2980;
             }
    
         .upload-area {
             border: 3px dashed #1a2980;
             border-radius: 15px;
             padding: 40px 20px;
             text-align: center;
             cursor: pointer;
             transition: all 0.3s;
             background-color: #f0f4ff;
             margin-bottom: 25px;
             position: relative;
             overflow: hidden;
         }
    
             .upload-area:hover, .upload-area.dragover {
                 background-color: #e6ebff;
                 transform: translateY(-5px);
                 box-shadow: 0 10px 25px rgba(26, 41, 128, 0.2);
             }
    
             .upload-area i {
                 font-size: 4.5rem;
                 color: #1a2980;
                 margin-bottom: 20px;
                 opacity: 0.8;
             }
    
             .upload-area h3 {
                 font-size: 1.5rem;
                 color: #444;
                 margin-bottom: 15px;
             }
    
             .upload-area p {
                 color: #666;
                 margin-bottom: 20px;
                 font-size: 1.05rem;
             }
    
         .browse-btn {
             background: linear-gradient(to right, #1a2980 0%, #26d0ce 100%);
             color: white;
             border: none;
             padding: 13px 35px;
             font-size: 1.1rem;
             border-radius: 50px;
             cursor: pointer;
             transition: all 0.3s;
             font-weight: 600;
             box-shadow: 0 5px 15px rgba(26, 41, 128, 0.3);
             position: relative;
             overflow: hidden;
         }
    
             .browse-btn:hover {
                 transform: translateY(-3px);
                 box-shadow: 0 8px 20px rgba(26, 41, 128, 0.4);
             }
    
             .browse-btn:active {
                 transform: translateY(1px);
             }
    
             .browse-btn.refresh {
                 position: absolute;
                 top: 40px;
                 right: 40px;
                 padding: 7px 25px;
             }
    
         .file-input {
             display: none;
         }
    
         .preview-container {
             margin-top: 30px;
             text-align: center;
         }
    
         .preview-title {
             font-size: 1.3rem;
             margin-bottom: 20px;
             color: #555;
             display: flex;
             align-items: center;
             justify-content: center;
             gap: 10px;
         }
    
         .image-preview {
             width: 100%;
             max-height: 220px;
             border-radius: 12px;
             overflow: hidden;
             box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
             display: none;
             margin: 0 auto 25px;
             border: 1px solid #eee;
         }
    
             .image-preview img {
                 width: 100%;
                 height: 100%;
                 object-fit: contain;
                 background: #f8f8f8;
             }
    
         .compression-control {
             background: white;
             border-radius: 12px;
             padding: 20px;
             margin-bottom: 25px;
             box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
         }
    
         .quality-label {
             display: flex;
             justify-content: space-between;
             margin-bottom: 15px;
             font-size: 1.1rem;
             color: #444;
         }
    
         .quality-value {
             font-weight: 700;
             color: #1a2980;
             font-size: 1.2rem;
             min-width: 45px;
             text-align: right;
         }
    
         .slider-container {
             position: relative;
             height: 40px;
         }
    
         .quality-slider {
             width: 100%;
             height: 10px;
             -webkit-appearance: none;
             background: linear-gradient(to right, #ff416c, #ff4b2b, #ff9500, #ffcc00, #a8e063, #56ab2f);
             outline: none;
             border-radius: 5px;
         }
    
             .quality-slider::-webkit-slider-thumb {
                 -webkit-appearance: none;
                 width: 25px;
                 height: 25px;
                 border-radius: 50%;
                 background: #1a2980;
                 cursor: pointer;
                 box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                 border: 3px solid white;
             }
    
             .quality-slider::-moz-range-thumb {
                 width: 25px;
                 height: 25px;
                 border-radius: 50%;
                 background: #1a2980;
                 cursor: pointer;
                 box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                 border: 3px solid white;
             }
    
         .slider-ticks {
             display: flex;
             justify-content: space-between;
             padding: 0 12px;
             font-size: 0.85rem;
             color: #777;
             margin-top: 5px;
         }
    
         .upload-btn {
             width: 100%;
             padding: 16px;
             background: linear-gradient(to right, #00c853 0%, #64dd17 100%);
             color: white;
             border: none;
             border-radius: 12px;
             font-size: 1.2rem;
             font-weight: 600;
             cursor: pointer;
             transition: all 0.3s;
             box-shadow: 0 6px 18px rgba(0, 200, 83, 0.3);
             display: block;
             position: relative;
             overflow: hidden;
         }
    
             .upload-btn:hover {
                 transform: translateY(-3px);
                 box-shadow: 0 9px 22px rgba(0, 200, 83, 0.4);
             }
    
             .upload-btn:disabled {
                 background: #cccccc;
                 cursor: not-allowed;
                 transform: none;
                 box-shadow: none;
             }
    
         .progress-container {
             height: 10px;
             background-color: #e0e0e0;
             border-radius: 5px;
             margin: 20px 0;
             overflow: hidden;
             display: none;
         }
    
         .progress-bar {
             height: 100%;
             background: linear-gradient(to right, #1a2980 0%, #26d0ce 100%);
             width: 0%;
             transition: width 0.4s ease;
         }
    
         .comparison-container {
             display: flex;
             justify-content: space-around;
             margin: 25px 0;
             gap: 20px;
         }
    
         .comparison-item {
             text-align: center;
             flex: 1;
             background: white;
             padding: 20px 15px;
             border-radius: 12px;
             box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
         }
    
             .comparison-item h4 {
                 margin-bottom: 12px;
                 color: #555;
                 font-size: 1.15rem;
             }
    
         .size-info {
             font-weight: 700;
             font-size: 1.3rem;
             color: #1a2980;
         }
    
         .api-info {
             background: #e3f2fd;
             padding: 15px;
             border-radius: 10px;
             margin-top: 20px;
             font-family: monospace;
             font-size: 0.95rem;
             color: #1a2980;
         }
    
         footer {
             text-align: center;
             padding: 25px;
             color: #666;
             background-color: #f5f5f5;
             border-top: 1px solid #eee;
             font-size: 1.05rem;
         }
    
         .result-container {
             background: white;
             border-radius: 15px;
             padding: 25px;
             box-shadow: 0 7px 20px rgba(0, 0, 0, 0.07);
             min-height: 180px;
             border: 1px solid #f0f0f0;
             flex-grow: 1;
             display: flex;
             flex-direction: column;
         }
    
         .result-content {
             flex-grow: 1;
             display: flex;
             flex-direction: column;
             justify-content: center;
             align-items: center;
         }
    
         .compressed-image {
             max-width: 100%;
             max-height: 250px;
             border-radius: 12px;
             box-shadow: 0 5px 15px rgba(0,0,0,0.1);
             margin-bottom: 25px;
             border: 1px solid #eee;
             display: none;
         }
    
         .download-btn {
             display: inline-block;
             background: linear-gradient(to right, #1a2980 0%, #26d0ce 100%);
             color: white;
             padding: 14px 30px;
             font-size: 1.1rem;
             font-weight: 600;
             border-radius: 50px;
             text-decoration: none;
             transition: all 0.3s;
             box-shadow: 0 5px 15px rgba(26, 41, 128, 0.3);
             display: none;
             align-items: center;
             gap: 10px;
         }
    
             .download-btn:hover {
                 transform: translateY(-3px);
                 box-shadow: 0 8px 20px rgba(26, 41, 128, 0.4);
             }
    
         .info-card {
             background: white;
             border-radius: 15px;
             padding: 25px;
             box-shadow: 0 7px 20px rgba(0, 0, 0, 0.07);
             margin-bottom: 30px;
             border: 1px solid #f0f0f0;
         }
    
             .info-card h4 {
                 color: #1a2980;
                 margin-bottom: 20px;
                 font-size: 1.3rem;
                 display: flex;
                 align-items: center;
                 gap: 12px;
             }
    
             .info-card ul {
                 list-style-type: none;
                 padding-left: 5px;
             }
    
             .info-card li {
                 margin-bottom: 14px;
                 padding-left: 32px;
                 position: relative;
                 font-size: 1.05rem;
                 color: #555;
                 line-height: 1.5;
             }
    
                 .info-card li:before {
                     content: "â€¢";
                     color: #1a2980;
                     font-size: 2rem;
                     position: absolute;
                     left: 0;
                     top: -8px;
                 }
    
         .response-area {
             background: white;
             border-radius: 15px;
             padding: 25px;
             box-shadow: 0 7px 20px rgba(0, 0, 0, 0.07);
             min-height: 100px;
             border: 1px solid #f0f0f0;
             margin-top: 20px;
         }
    
         .response-title {
             color: #1a2980;
             margin-bottom: 15px;
             font-size: 1.3rem;
             display: flex;
             align-items: center;
             gap: 12px;
         }
    
         .response-content {
             font-size: 1.1rem;
             line-height: 1.6;
             color: #555;
             min-height: 60px;
             display: flex;
             align-items: center;
             justify-content: center;
             padding: 15px;
             text-align: center;
         }
    
         @media (max-width: 768px) {
             body {
             padding:20px 0;
             }
             header {
                 padding: 30px 20px;
             }
             .content {
                 flex-direction: column;
             }
    
             .upload-section {
                 border-right: none;
                 border-bottom: 1px solid #eee;
                 padding:20px;
             }
             .result-section {
             padding:20px;
             }
             header h1 {
                 font-size: 2rem;
             }
    
             header p {
                 font-size: 1rem;
             }
             .browse-btn.refresh {
             top:20px;
             right:20px;
             }
             a.browse-btn.refresh {
             right:130px;
             }
         }
    
         .success-message {
             color: #00c853;
             font-weight: 600;
         }
    
         .error-message {
             color: #f44336;
             font-weight: 600;
         }
    
         .result-placeholder {
             text-align: center;
             color: #777;
             font-size: 1.1rem;
             padding: 40px 20px;
         }
    
             .result-placeholder i {
                 font-size: 4rem;
                 color: #e0e0e0;
                 margin-bottom: 20px;
             }
    

     document.addEventListener('DOMContentLoaded', function () {
         const uploadArea = document.getElementById('uploadArea');
         const fileInput = document.getElementById('fileInput');
         const uploadBtn = document.getElementById('uploadBtn');
         const imagePreview = document.getElementById('imagePreview');
         const previewImage = document.getElementById('previewImage');
         const responseContent = document.getElementById('responseContent');
         const progressContainer = document.getElementById('progressContainer');
         const progressBar = document.getElementById('progressBar');
         const originalSize = document.getElementById('originalSize');
         const compressedSize = document.getElementById('compressedSize');
         const qualitySlider = document.getElementById('qualitySlider');
         const qualityValue = document.getElementById('qualityValue');
         const compressedImage = document.getElementById('compressedImage');
         const downloadLink = document.getElementById('downloadLink');
         const resultPlaceholder = document.getElementById('resultPlaceholder');
    
         // å‹ç¼©è´¨é‡æ»‘å—äº‹ä»¶
         qualitySlider.addEventListener('input', function () {
             qualityValue.textContent = this.value + '%';
         });
    
         // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©
         uploadArea.addEventListener('click', () => {
             fileInput.click();
         });
    
         // æ‹–æ”¾åŠŸèƒ½
         ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
             uploadArea.addEventListener(eventName, preventDefaults, false);
         });
    
         function preventDefaults(e) {
             e.preventDefault();
             e.stopPropagation();
         }
    
         ['dragenter', 'dragover'].forEach(eventName => {
             uploadArea.addEventListener(eventName, highlight, false);
         });
    
         ['dragleave', 'drop'].forEach(eventName => {
             uploadArea.addEventListener(eventName, unhighlight, false);
         });
    
         function highlight() {
             uploadArea.classList.add('dragover');
         }
    
         function unhighlight() {
             uploadArea.classList.remove('dragover');
         }
    
         // å¤„ç†æ–‡ä»¶æ”¾ç½®
         uploadArea.addEventListener('drop', handleDrop, false);
    
         function handleDrop(e) {
             const dt = e.dataTransfer;
             const files = dt.files;
             if (files.length) {
                 handleFiles(files);
             }
         }
    
         // å¤„ç†æ–‡ä»¶é€‰æ‹©
         fileInput.addEventListener('change', function () {
             if (this.files.length) {
                 handleFiles(this.files);
             }
         });
    
         // å¤„ç†é€‰ä¸­çš„æ–‡ä»¶
         function handleFiles(files) {
             const file = files[0];
             if (!file.type.match('image.*')) {
                 responseContent.innerHTML = '<span class="error-message">é”™è¯¯ï¼šè¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼ˆJPG, PNG, GIF, WEBPï¼‰</span>';
                 return;
             }
    
             // é‡ç½®ç»“æœåŒºåŸŸ
             compressedImage.style.display = 'none';
             downloadLink.style.display = 'none';
             resultPlaceholder.style.display = 'block';
    
             // æ˜¾ç¤ºé¢„è§ˆ
             const reader = new FileReader();
             reader.onload = function (e) {
                 previewImage.src = e.target.result;
                 imagePreview.style.display = 'block';
                 uploadBtn.style.display = 'block';
                 uploadBtn.disabled = false;
             };
             reader.readAsDataURL(file);
    
             // æ›´æ–°å“åº”å†…å®¹
             responseContent.innerHTML = '<span class="success-message">å›¾ç‰‡å·²é€‰æ‹©ï¼Œç‚¹å‡»"ä¸Šä¼ å¹¶å‹ç¼©å›¾ç‰‡"æŒ‰é’®å¼€å§‹å¤„ç†...</span>';
         }
    
         // ä¸Šä¼ æŒ‰é’®ç‚¹å‡»äº‹ä»¶
         uploadBtn.addEventListener('click', function () {
             if (!fileInput.files.length) return;
    
             const file = fileInput.files[0];
             const quality = parseInt(qualitySlider.value);
             const formData = new FormData();
             formData.append('imageFile', file);
             formData.append('compressionQuality', quality);
    
             // æ˜¾ç¤ºè¿›åº¦æ¡
             progressContainer.style.display = 'block';
             progressBar.style.width = '0%';
    
             // ç¦ç”¨ä¸Šä¼ æŒ‰é’®
             uploadBtn.disabled = true;
             uploadBtn.textContent = 'å¤„ç†ä¸­...';
             uploadBtn.style.background = 'linear-gradient(to right, #ff9800 0%, #ff5722 100%)';
    
             // æ›´æ–°å“åº”å†…å®¹
             responseContent.innerHTML = '<span class="success-message">æ­£åœ¨ä¸Šä¼ å¹¶å‹ç¼©å›¾ç‰‡ï¼Œè¯·ç¨å€™...</span>';
    
             // æ¨¡æ‹Ÿè¿›åº¦æ›´æ–°
             const progressInterval = setInterval(() => {
                 const currentWidth = parseInt(progressBar.style.width) || 0;
                 if (currentWidth < 90) {
                     progressBar.style.width = (currentWidth + 10) + '%';
                 }
             }, 300);
    
             // å‘é€è¯·æ±‚åˆ°API
             fetch('/api/yourapiname', {
                 method: 'POST',
                 body: formData
             })
                 .then(response => {
                     debugger
                     clearInterval(progressInterval);
                     progressBar.style.width = '100%';
    
                     if (response.ok) {
                         return response.blob();
                     } else if (response.status === 400) {
                         return response.text().then(text => {
                             throw new Error(text || 'æ— æ•ˆè¯·æ±‚');
                         });
                     } else {
                         throw new Error(`è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç : ${response.status}`);
                     }
                 })
                 .then(blob => {
                     // åˆ›å»ºå‹ç¼©å›¾ç‰‡çš„URL
                     const compressedUrl = URL.createObjectURL(blob);
    
                     // æ˜¾ç¤ºå‹ç¼©åçš„å›¾ç‰‡
                     compressedImage.src = compressedUrl;
                     compressedImage.style.display = 'block';
    
                     // è®¾ç½®ä¸‹è½½é“¾æ¥
                     downloadLink.href = compressedUrl;
                     downloadLink.download = `compressed_${fileInput.files[0].name}`;
                     downloadLink.style.display = 'inline-block';
    
                     // éšè—å ä½ç¬¦
                     resultPlaceholder.style.display = 'none';
    
                     // æ›´æ–°UI
                     setTimeout(() => {
                         responseContent.innerHTML = '<span class="success-message">å›¾ç‰‡å‹ç¼©æˆåŠŸï¼å¯ä¸‹è½½å‹ç¼©åçš„å›¾ç‰‡</span>';
                         uploadBtn.textContent = 'ä¸Šä¼ æˆåŠŸï¼';
                         uploadBtn.style.background = 'linear-gradient(to right, #00c853 0%, #64dd17 100%)';
                     }, 500);
                 })
                 .catch(error => {
                     clearInterval(progressInterval);
                     progressBar.style.backgroundColor = '#f44336';
                     responseContent.innerHTML = `<span class="error-message">é”™è¯¯: ${error.message}</span>`;
                     uploadBtn.textContent = 'ä¸Šä¼ å¤±è´¥ï¼Œé‡è¯•';
                     uploadBtn.disabled = false;
                     uploadBtn.style.background = 'linear-gradient(to right, #f44336 0%, #e91e63 100%)';
                 });
         });
     });
    

* * *

ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºä½œè€…åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚  
ä½œè€…: ç å†œåˆšå­  
åŸæ–‡é“¾æ¥: [https://www.codeobservatory.cn/archives/fb2da740.html](https://www.codeobservatory.cn/archives/fb2da740.html)