---
layout: post
title: '一天一个Python库：packaging - 处理Python包和版本信息'
date: "2026-01-27T00:49:27Z"
---
一天一个Python库：packaging - 处理Python包和版本信息
======================================

packaging - 处理Python包和版本信息
==========================

一、什么是packaging？
---------------

**packaging** 是一个用于处理 Python 包、版本和各种依赖规范的 Python 库。  
它可以帮助你：

*   解析、比较和操作各种 PEP 440 兼容的版本字符串。
*   处理环境标记（PEP 508）。
*   解析和标准化依赖规范（PEP 503）。

二、应用场景
------

**packaging** 广泛应用于以下实际场景：

*   **场景1**: 工具开发者需要解析用户输入的 Python 包版本，以确保兼容性。
*   **场景2**: 构建系统需要比较不同库的版本，以决定是否进行升级或安装。
*   **场景3**: 自动化脚本需要根据当前的 Python 环境，解析和应用特定的依赖条件。

三、如何安装
------

1.  使用 pip 安装

    pip install packaging
    
    # 如果安装慢的话，推荐使用国内镜像源
    pip install packaging -i https://www.python64.cn/pypi/simple/
    

2.  使用 [PythonRun](https://www.min2k.com/tools/python-run/) 在线运行代码（无需本地安装）

四、示例代码
------

`packaging` 库可以让你轻松地比较两个版本字符串，判断它们的大小关系。

    from packaging.version import Version
    
    # 定义两个版本字符串
    version_str_1 = "2.1.0"
    version_str_2 = "2.0.5"
    
    # 将版本字符串转换为 Version 对象
    version_1 = Version(version_str_1)
    version_2 = Version(version_str_2)
    
    # 比较两个版本
    if version_1 > version_2:
        print(f"{version_str_1} is newer than {version_str_2}")
    elif version_1 < version_2:
        print(f"{version_str_1} is older than {version_str_2}")
    else:
        print(f"{version_str_1} is the same as {version_str_2}")
    
    # 另一个示例：比较一个开发版本和一个发布版本
    dev_version_str = "1.0.0.dev1"
    release_version_str = "1.0.0"
    
    dev_version = Version(dev_version_str)
    release_version = Version(release_version_str)
    
    # 按照 PEP 440 规范，开发版本通常被认为比对应的发行版本要旧
    if dev_version < release_version:
        print(f"{dev_version_str} is older than {release_version_str} (as expected for dev builds)")
    else:
        print(f"{dev_version_str} is not older than {release_version_str}")
    
    

使用 [PythonRun](https://www.min2k.com/tools/python-run/?code=from%20packaging.version%20import%20Version%0A%0A%23%20%E5%AE%9A%E4%B9%89%E4%B8%A4%E4%B8%AA%E7%89%88%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%0Aversion_str_1%20%3D%20%222.1.0%22%0Aversion_str_2%20%3D%20%222.0.5%22%0A%0A%23%20%E5%B0%86%E7%89%88%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E4%B8%BA%20Version%20%E5%AF%B9%E8%B1%A1%0Aversion_1%20%3D%20Version%28version_str_1%29%0Aversion_2%20%3D%20Version%28version_str_2%29%0A%0A%23%20%E6%AF%94%E8%BE%83%E4%B8%A4%E4%B8%AA%E7%89%88%E6%9C%AC%0Aif%20version_1%20%3E%20version_2%3A%0A%20%20%20%20print%28f%22%7Bversion_str_1%7D%20is%20newer%20than%20%7Bversion_str_2%7D%22%29%0Aelif%20version_1%20%3C%20version_2%3A%0A%20%20%20%20print%28f%22%7Bversion_str_1%7D%20is%20older%20than%20%7Bversion_str_2%7D%22%29%0Aelse%3A%0A%20%20%20%20print%28f%22%7Bversion_str_1%7D%20is%20the%20same%20as%20%7Bversion_str_2%7D%22%29%0A%0A%23%20%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%A4%BA%E4%BE%8B%EF%BC%9A%E6%AF%94%E8%BE%83%E4%B8%80%E4%B8%AA%E5%BC%80%E5%8F%91%E7%89%88%E6%9C%AC%E5%92%8C%E4%B8%80%E4%B8%AA%E5%8F%91%E5%B8%83%E7%89%88%E6%9C%AC%0Adev_version_str%20%3D%20%221.0.0.dev1%22%0Arelease_version_str%20%3D%20%221.0.0%22%0A%0Adev_version%20%3D%20Version%28dev_version_str%29%0Arelease_version%20%3D%20Version%28release_version_str%29%0A%0A%23%20%E6%8C%89%E7%85%A7%20PEP%20440%20%E8%A7%84%E8%8C%83%EF%BC%8C%E5%BC%80%E5%8F%91%E7%89%88%E6%9C%AC%E9%80%9A%E5%B8%B8%E8%A2%AB%E8%AE%A4%E4%B8%BA%E6%AF%94%E5%AF%B9%E5%BA%94%E7%9A%84%E5%8F%91%E8%A1%8C%E7%89%88%E6%9C%AC%E8%A6%81%E6%97%A7%0Aif%20dev_version%20%3C%20release_version%3A%0A%20%20%20%20print%28f%22%7Bdev_version_str%7D%20is%20older%20than%20%7Brelease_version_str%7D%20%28as%20expected%20for%20dev%20builds%29%22%29%0Aelse%3A%0A%20%20%20%20print%28f%22%7Bdev_version_str%7D%20is%20not%20older%20than%20%7Brelease_version_str%7D%22%29%0A) 在线运行这段代码，结果如下：

    2.1.0 is newer than 2.0.5
    1.0.0.dev1 is older than 1.0.0 (as expected for dev builds)
    

使用 [MermaidGo](https://www.min2k.com/tools/mermaid/?code=flowchart%20TB%0A%20%20A%5B%E5%BC%80%E5%A7%8B%5D%20--%3E%20B%7B%E5%AE%9A%E4%B9%89%E7%89%88%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%3A%20%222.1.0%22%2C%20%222.0.5%22%7D%3B%0A%20%20B%20--%3E%20C%5B%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E4%B8%BAVersion%E5%AF%B9%E8%B1%A1%5D%3B%0A%20%20C%20--%3E%20D%7Bversion_1%20%3E%20version_2%3F%7D%3B%0A%20%20D%20--%20%E6%98%AF%20--%3E%20E%5B%E6%89%93%E5%8D%B0%20%222.1.0%20is%20newer%22%5D%3B%0A%20%20D%20--%20%E5%90%A6%20--%3E%20F%7Bversion_1%20%3C%20version_2%3F%7D%3B%0A%20%20F%20--%20%E6%98%AF%20--%3E%20G%5B%E6%89%93%E5%8D%B0%20%222.1.0%20is%20older%22%5D%3B%0A%20%20F%20--%20%E5%90%A6%20--%3E%20H%5B%E6%89%93%E5%8D%B0%20%222.1.0%20is%20the%20same%22%5D%3B%0A%20%20E%20--%3E%20I%5B%E5%AE%9A%E4%B9%89%E7%89%88%E6%9C%AC%E5%AD%97%E7%AC%A6%E4%B8%B2%3A%20%221.0.0.dev1%22%2C%20%221.0.0%22%5D%3B%0A%20%20G%20--%3E%20I%3B%0A%20%20H%20--%3E%20I%3B%0A%20%20I%20--%3E%20J%5B%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%8D%A2%E4%B8%BAVersion%E5%AF%B9%E8%B1%A1%5D%3B%0A%20%20J%20--%3E%20K%7Bdev_version%20%3C%20release_version%3F%7D%3B%0A%20%20K%20--%20%E6%98%AF%20--%3E%20L%5B%E6%89%93%E5%8D%B0%20%22dev1%20is%20older%22%5D%3B%0A%20%20K%20--%20%E5%90%A6%20--%3E%20M%5B%E6%89%93%E5%8D%B0%20%22dev1%20is%20not%20older%22%5D%3B%0A%20%20L%20--%3E%20N%5B%E7%BB%93%E6%9D%9F%5D%3B%0A%20%20M%20--%3E%20N%3B) 绘制示例代码的流程图，结果如下：

五、学习资源
------

1.  开源项目：[packaging](https://github.com/pypa/packaging)
2.  中文自述：[REMDME](https://www.python64.cn/readme/packaging/)
3.  在线运行：[PythonRun](https://www.min2k.com/tools/python-run/)

> 如果这篇文章对你有帮助，欢迎点赞、收藏、转发！  
> 学习过程中有任何问题，欢迎在评论区留言交流～