---
layout: post
title: 'ESP32S3 OTA升级'
date: "2025-05-11T00:44:32Z"
---
ESP32S3 OTA升级
=============

ESP32S3 OTA升级
=============

学习自b站视频【ESP-IDF-OTA远程升级简单介绍-宋工】[https://www.bilibili.com/video/BV1X1zbYGEix?vd\_source=a9a2fcd65fa0817628dc9bf362927b6e，乐鑫例程](https://www.bilibili.com/video/BV1X1zbYGEix?vd_source=a9a2fcd65fa0817628dc9bf362927b6e%EF%BC%8C%E4%B9%90%E9%91%AB%E4%BE%8B%E7%A8%8B)

选择idf例程
-------

选择原生OTA升级

![image-20250510143604147](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194740606-67884072.png)

配置wifi
------

更改为自己wifi的名称和密码

![image-20250510150443372](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194741109-1169376351.png)

修改升级的固件地址（URL）：

![image-20250510153540775](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194741442-1916877820.png)

![image-20250510155838951](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194741837-1247747026.png)

添加终端打印当前固件版本（main函数中）

        const esp_app_desc_t *desc = esp_app_get_description();//获取并打印当前固件的版本信息
        ESP_LOGI(TAG, "version: %s", desc->version);
    

制作OTA升级固件
---------

修改CMakeLists，编译固件

路径：

D:\\Esp\_ALL\_Project\\native\_ota\_example\\CMakeLists.txt

![image-20250510193336555](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194742226-1093918693.png)

固件生成路径：

工程目录 -> build文件夹下 -> 工程名字.bin

![image-20250510193525929](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194742577-713810032.png)

上传需要更新的固件
---------

选择巴法云作为固件更新云服务器

[巴法开放平台\_巴法云\_巴法物联网云平台](https://cloud.bemfa.com/tcp/ota.html?did=OTALX&v=1)

![image-20250510193020571](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194742901-1948219107.png)

![image-20250510193052853](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194743301-1880051127.png)

运行程序，OTA升级
----------

### 1、固件版本相同，不升级

![image-20250510161328843](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194743716-1619792190.png)

### 2、固件版本落后，更新固件

![image-20250510162136190](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194744312-1208913573.png)

### 运行新的固件

![image-20250510162339015](https://img2023.cnblogs.com/blog/3281938/202505/3281938-20250510194744695-807258322.png)