---
layout: post
title: '.NET+AI | MEAI | .NET å¹³å°çš„ AI åº•åº§ ï¼ˆ1ï¼‰'
date: "2025-11-14T00:42:57Z"
---
.NET+AI | MEAI | .NET å¹³å°çš„ AI åº•åº§ ï¼ˆ1ï¼‰
===================================

.NET å¹³å° AI ç”Ÿæ€å‘å±•æ—¶é—´çº¿
==================

![](https://img2024.cnblogs.com/blog/577140/202511/577140-20251114081809423-1838646635.png)

ä»æä¾›AIæœåŠ¡ç»Ÿä¸€æŠ½è±¡æ¥å£çš„Microsoft.Extensions.AIï¼Œåˆ°å®ç°å¤æ‚AIå·¥ä½œæµç¼–æ’çš„Semantic Kernel (SK)ï¼Œå†åˆ°æ•´åˆå¤šæ–¹ä¼˜åŠ¿ã€ä¸“æ³¨äºæ™ºèƒ½ä½“ï¼ˆAgentï¼‰åä½œçš„Microsoft Agent Framework (MAF)ï¼Œå¾®è½¯å·²ç»ç³»ç»Ÿæ€§åœ°æ„å»ºäº†ä¸€æ¡ä»åŸºç¡€æœåŠ¡é›†æˆåˆ°é«˜çº§æ™ºèƒ½ä½“ç¼–æ’çš„å®Œæ•´æŠ€æœ¯æ ˆã€‚è€Œå³å°†å‘å¸ƒçš„.NET 10ï¼Œæ›´æ˜¯ä¸€ä¸ªä»åº•å±‚æ€§èƒ½ã€ç¡¬ä»¶æ”¯æŒåˆ°å·¥å…·é“¾éƒ½ä¸ºAIæ·±åº¦ä¼˜åŒ–çš„â€œAI Readyâ€å¹³å°ï¼Œæ—¨åœ¨ä¸ºæ™ºèƒ½åº”ç”¨æä¾›åšå®çš„åŸºçŸ³ã€‚

![dotnet-ai-timeline](https://img2024.cnblogs.com/blog/577140/202511/577140-20251109162806077-173756262.png)

è€Œä½œä¸ºä¸€å.NET å¼€å‘è€…å¦‚ä½•æŠ“ä½å¹³å°æœºé‡ï¼Œåœ¨AIæµªæ½®ä¸­æ¿€æµå‹‡è¿›å‘¢ï¼Ÿé¢å¯¹è¯¸å¦‚æç¤ºå·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰ã€æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ã€å·¥ä½œæµï¼ˆWorkflowï¼‰ã€æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ã€ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼ˆContextual Engineering)ç­‰å±‚å‡ºä¸ç©·çš„æŠ€æœ¯æ¦‚å¿µï¼Œæ˜¯ä¸æ˜¯ä¸€æ—¶é—´ä¸çŸ¥å¦‚ä½•ç€æ‰‹ï¼Ÿ

æ²¡å…³ç³»ï¼Œä»ä»Šå¤©èµ·ï¼Œæˆ‘ä»¬å°†æ­£å¼å¼€å¯`[.NET+AI]`ç³»åˆ—æ–‡ç« çš„æ¨é€ã€‚æœ¬ç³»åˆ—æ—¨åœ¨é™ªä¼´å¤§å®¶ç”±æµ…å…¥æ·±åœ°å¼€å¯æ™ºèƒ½ä½“å¼€å‘ä¹‹æ—…ã€‚å†…å®¹å°†åŸºäº `ã€Š.NET+AI|æ™ºèƒ½ä½“å¼€å‘è¿›é˜¶ã€‹`è¯¾ç¨‹è¯¾ä»¶æ”¹å†™è€Œæˆï¼ŒåŠ›æ±‚ç®€çŸ­ã€æ¥åœ°æ°”ã€é‡å®æ“ï¼Œå¸Œæœ›ä¸å„ä½åŒè¡Œè€…ä¸€èµ·ï¼Œæ‹¥æŠ±è¿™ä¸ªæ™ºèƒ½å˜é©çš„æ—¶ä»£ã€‚

ä»€ä¹ˆæ˜¯ Microsoft.Extensions.AIï¼Ÿ
----------------------------

**Microsoft.Extensions.AI (MEAI)** æ˜¯å¾®è½¯ä¸º .NET ç”Ÿæ€ç³»ç»Ÿæ‰“é€ çš„ AI åŠŸèƒ½åŸºç¡€æŠ½è±¡å±‚ã€‚å®ƒé€šè¿‡æä¾›ç»Ÿä¸€çš„æ¥å£æ ‡å‡†ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°åœ¨ä¸åŒ AI æœåŠ¡ä¹‹é—´åˆ‡æ¢ï¼Œè€Œæ— éœ€é‡å†™ä»£ç ã€‚

![Image](https://img2024.cnblogs.com/blog/577140/202511/577140-20251113220940733-904604068.png)

### æ ¸å¿ƒä»·å€¼

> â
> 
> ä¸€æ¬¡ç¼–å†™ï¼Œå¤šå¤„è¿è¡Œ â€”â€” æ— è®ºæ˜¯ OpenAIã€Azure OpenAI è¿˜æ˜¯æœ¬åœ° Ollamaï¼Œåªéœ€åˆ‡æ¢é…ç½®å³å¯ã€‚

ä¸¤å¤§æ ¸å¿ƒæ¥å£
------

### 1ï¸âƒ£ IChatClient - èŠå¤©æœåŠ¡æŠ½è±¡

ç”¨äºä¸å¤§è¯­è¨€æ¨¡å‹ (LLM) è¿›è¡Œå¯¹è¯äº¤äº’ï¼Œæ”¯æŒï¼š

*   âœ… **å¤šæ¨¡æ€å†…å®¹**ï¼šæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘
    
*   âœ… **æµå¼å“åº”**ï¼šé€æ­¥è¾“å‡ºï¼Œæå‡ä½“éªŒ
    
*   âœ… **å·¥å…·è°ƒç”¨**ï¼šæ”¯æŒå‡½æ•°è°ƒç”¨èƒ½åŠ›
    

**ä¸‰ä¸ªå…³é”®æ–¹æ³•ï¼š**

    // å®Œæ•´å“åº”
    Task<ChatResponse>Â GetResponseAsync(...)
    
    // æµå¼å“åº” Â 
    IAsyncEnumerable<ChatResponseUpdate>Â GetStreamingResponseAsync(...)
    
    // è·å–å…ƒæ•°æ®
    object?Â GetService(Type serviceType, ...)
    
    

### 2ï¸âƒ£ IEmbeddingGenerator - å‘é‡åµŒå…¥ç”Ÿæˆå™¨

å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºï¼Œæ”¯æŒè¯­ä¹‰æœç´¢å’Œç›¸ä¼¼åº¦åŒ¹é…ï¼š

    // æ‰¹é‡ç”Ÿæˆ
    Task<GeneratedEmbeddings<TEmbedding>> GenerateAsync(...)
    
    // å•æ¡ç”Ÿæˆ
    Task<Embedding<T>> GenerateAsync(TInputÂ value, ...)
    
    // ç›´æ¥è·å–å‘é‡
    Task<ReadOnlyMemory<T>> GenerateVectorAsync(...)
    
    

**æ ¸å¿ƒä¼˜åŠ¿ä¸€è§ˆ**

![image](https://img2024.cnblogs.com/blog/577140/202511/577140-20251113221152700-147006800.png)

### å®‰è£…ä¾èµ–

    dotnet add package Microsoft.Extensions.AI
    dotnet add package Microsoft.Extensions.AI.OpenAI
    
    

### ç¤ºä¾‹ 1ï¼šä½¿ç”¨ IChatClient

    usingÂ Microsoft.Extensions.AI;
    usingÂ OpenAI;
    usingÂ System.ClientModel;
    
    // æ­¥éª¤ 1ï¼šåˆ›å»ºå®¢æˆ·ç«¯
    varÂ clientOptions =Â newÂ OpenAIClientOptionsÂ 
    {Â 
    Â  Â Â // å¯æ›¿æ¢ä¸ºä»»æ„å…¼å®¹OpenAI æ ¼å¼çš„AI æä¾›å•†
    Â  Â  Endpoint =Â newÂ Uri("https://api.openai.com/v1")Â 
    };
    varÂ aiClient =Â newÂ OpenAIClient(newÂ ApiKeyCredential("your-api-key"), clientOptions);
    
    // æ­¥éª¤ 2ï¼šè·å– IChatClient
    IChatClient chatClient = aiClient.GetChatClient("gpt-4").AsIChatClient();
    
    // æ­¥éª¤ 3ï¼šå‘é€æ¶ˆæ¯ï¼ˆéæµå¼ï¼‰
    varÂ response =Â awaitÂ chatClient.GetResponseAsync("ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±");
    Console.WriteLine(response.Messages[0].Text);
    
    // æ­¥éª¤ 4ï¼šæµå¼å“åº”
    awaitforeachÂ (varÂ chunkÂ inÂ chatClient.GetStreamingResponseAsync("è®²ä¸ªç¬‘è¯"))
    {
    Â  Â  Console.Write(chunk);
    }
    
    // æ­¥éª¤ 5ï¼šè·å–å…ƒæ•°æ®
    varÂ metadata = chatClient.GetRequiredService<ChatClientMetadata>();
    Console.WriteLine($"æ¨¡å‹:Â {metadata.DefaultModelId}");
    
    

### ç¤ºä¾‹ 2ï¼šä½¿ç”¨ IEmbeddingGenerator

    usingÂ Microsoft.Extensions.AI;
    usingÂ Azure.AI.OpenAI;
    
    // æ­¥éª¤ 1ï¼šåˆ›å»ºå®¢æˆ·ç«¯
    varÂ azureClient =Â newÂ AzureOpenAIClient(
    Â  Â Â newÂ Uri("https://your-resource.openai.azure.com/"),
    Â  Â Â newÂ ApiKeyCredential("your-api-key")
    );
    
    // æ­¥éª¤ 2ï¼šè·å–åµŒå…¥ç”Ÿæˆå™¨
    varÂ embeddingClient = azureClient.GetEmbeddingClient("text-embedding-3-small");
    IEmbeddingGenerator<string, Embedding<float>> generator =Â 
    Â  Â  embeddingClient.AsIEmbeddingGenerator();
    
    // æ­¥éª¤ 3ï¼šç”ŸæˆåµŒå…¥å‘é‡
    varÂ documents =Â new[]
    {
    Â  Â Â "Microsoft.Extensions.AI ç»Ÿä¸€äº† .NET çš„ AI æŠ½è±¡",
    Â  Â Â "å‘é‡åµŒå…¥ç”¨äºè¯­ä¹‰æœç´¢å’Œç›¸ä¼¼åº¦åŒ¹é…"
    };
    
    varÂ embeddings =Â awaitÂ generator.GenerateAsync(documents);
    Console.WriteLine($"ç”Ÿæˆäº†Â {embeddings.Count}Â ä¸ªå‘é‡");
    Console.WriteLine($"å‘é‡ç»´åº¦:Â {embeddings[0].Dimensions}");
    
    // æ­¥éª¤ 4ï¼šè·å–å•ä¸ªå‘é‡
    varÂ vector =Â awaitÂ generator.GenerateVectorAsync("æµ‹è¯•æ–‡æœ¬");
    Console.WriteLine($"å‘é‡é•¿åº¦:Â {vector.Length}");
    
    

ä¸ç”Ÿæ€ç³»ç»Ÿçš„é›†æˆ
--------

MEAI ä¸æ˜¯å­¤ç«‹å­˜åœ¨çš„ï¼Œå®ƒä¸ .NET AI ç”Ÿæ€æ·±åº¦é›†æˆï¼š

![Image](https://img2024.cnblogs.com/blog/577140/202511/577140-20251113220940839-1779608371.png)

### ğŸ”— Semantic Kernel

    // åœ¨ Semantic Kernel ä¸­ä½¿ç”¨ IChatClient
    varÂ kernel = Kernel.CreateBuilder()
    Â  Â  .AddAIChatClient(chatClient)
    Â  Â  .Build();
    
    

### ğŸ¤– Microsoft Agent Framework

    // åœ¨ Agent Framework ä¸­ä½¿ç”¨
    varÂ agent =Â newÂ ChatAgent(chatClient)
    Â  Â  .WithMemory()
    Â  Â  .WithTools(weatherTool, calculatorTool);
    
    

å°ç»“
--

Microsoft.Extensions.AI ä¸º .NET å¼€å‘è€…å¸¦æ¥äº†ï¼š

*   ğŸ¯ **ç»Ÿä¸€æ ‡å‡†**ï¼šå‘Šåˆ«å„å®¶ SDK çš„å·®å¼‚
    
*   ğŸš€ **å¿«é€Ÿåˆ‡æ¢**ï¼šæä¾›å•†åˆ‡æ¢åªéœ€æ”¹é…ç½®
    
*   ğŸ”§ **æ˜“äºæ‰©å±•**ï¼šä¸­é—´ä»¶æ¨¡å¼æ”¯æŒè‡ªå®šä¹‰åŠŸèƒ½
    
*   ğŸ§ª **ç®€åŒ–æµ‹è¯•**ï¼šç»Ÿä¸€æŠ½è±¡ä¾¿äº Mock
    

ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†ä»‹ç»MEAIçš„å…·ä½“ç”¨æ³•ï¼Œæ•¬è¯·æœŸå¾…ï¼

![](https://img2024.cnblogs.com/blog/577140/202511/577140-20251108225851786-472777635.png)

> **ğŸ‘†é¢å‘.NETå¼€å‘è€…çš„AI Agent å¼€å‘è¯¾ç¨‹ã€.NET+AI | æ™ºèƒ½ä½“å¼€å‘è¿›é˜¶ã€‘å·²ä¸Šçº¿ï¼Œæ¬¢è¿æ‰«ç åŠ å…¥å­¦ä¹ ã€‚ğŸ‘†**

![](https://files.cnblogs.com/files/sheng-jie/scan-follow.bmp)

> **å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€å‘ AI è€Œè¡Œã€ï¼Œæˆ‘ä»¬å¾®ä¿¡ä¸è§ä¸æ•£ã€‚  
> é˜…ç½¢æ­¤æ–‡ï¼Œå¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡ä¸é”™å¹¶æœ‰æ‰€æ”¶è·ï¼Œè¯·ã€æ‰“èµã€‘æˆ–ã€æ¨èã€‘ï¼Œä¹Ÿå¯ã€è¯„è®ºã€‘ç•™ä¸‹æ‚¨çš„é—®é¢˜æˆ–å»ºè®®ä¸æˆ‘äº¤æµã€‚ ä½ çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­åˆ›ä½œå’Œåˆ†äº«çš„ä¸ç«­åŠ¨åŠ›ï¼**

ä½œè€…ï¼š[ã€åœ£æ°ã€](http://www.jianshu.com/u/39ec0e6b1844)

å‡ºå¤„ï¼š[http://www.cnblogs.com/sheng-jie/](http://www.cnblogs.com/sheng-jie/)

æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡é“¾æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚