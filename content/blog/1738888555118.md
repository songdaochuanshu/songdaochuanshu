---
layout: post
title: 'ThreeJs-13效果合成与后期处理'
date: "2025-02-07T00:35:55Z"
---
ThreeJs-13效果合成与后期处理
===================

一.合成效果原理与设置
===========

什么是效果合成，就是可以把一些效果经过后期处理再放出来

原来的物体是直接通过render渲染出来，而现在则是经过一条render通道，可以处理也可以叠加处理后再放出来

![image-20241228200144882](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153340450-1573346947.png)

首先正常加载模型

![image-20241228200708400](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153339994-2030432468.png)

首先导入效果合成器以及一些自带的效果

![image-20241228200742594](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153339452-641812425.png)

创建合成效果渲染器，跟之前渲染器差不多，**但是要注意注意添加渲染通道这个效果**

![image-20241228200832690](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153339064-1471349502.png)

然后不再是渲染render而是用合成效果render

![image-20241228200914816](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153338681-973447895.png)

此时就能看到基本的render一样的效果，然后就可以开始一些其他的效果有哪些效果可以在这个目录查看，实现效果可以上**threejs官网查看**

![image-20241228201026206](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153338203-571031334.png)

![image-20241228201043344](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153337680-443954250.png)

![image-20241228201053234](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153337228-1183293946.png)

二.实现抗锯齿，点效果，发光，屏幕闪动等特效
======================

什么是抗锯齿，一个物体在边缘处很容易出现锯齿感

![image-20241228202248255](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153336591-1117278642.png)

而开启抗锯齿就是会把一些有锯齿感的地方经过计算，变得模糊看起来顺滑

![image-20241228202339597](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153336189-1083134307.png)

![image-20241228202348630](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153335873-58834089.png)

**发光效果**

![image-20241228202505293](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153335470-658299101.png)

![image-20241228202517239](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153334965-1245047009.png)

当然通过官网的例子的gui也可以去调节一些参数

三.使用shaderpass实现自定义合成效果
=======================

首先导入

![image-20241228202950511](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153334404-554685363.png)

首先使用的默认的

![image-20241228203033067](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153333855-1204997174.png)

添加到通道

![image-20241228203048301](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153333378-1741462726.png)

会发现此时整个页面都是黄色，因为这个后期效果是对整个场景渲染

![image-20241228203115339](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153332943-1259881545.png)

**那如果只是想对当前这个效果合成器，所有效果一起叠加使用**

首先正常设置uv，在片段着色器这边我们当前这个通道所有的效果都是默认传了一个纹理进来，并且名字如下，把他作为颜色即可

![image-20241228203531369](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153156298-520291930.png)

**但是要注意一下，这个默认值要先设置在外面**

![image-20241228203717241](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153155941-794293395.png)

静态效果，可以去设置一些颜色，比如整个色调偏蓝一点

![image-20241228203916708](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153155565-712550009.png)

![image-20241228203940310](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153155216-603038317.png)

![image-20241228204004695](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153154710-1462659398.png)

四.使用法向纹理合成特色渲染镜头
================

有一张法向纹理图案

想实现的效果，头盔周围都是六边形网格，中间部分可以反射

![image-20241228204237030](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153154124-576608243.png)

加载纹理

![image-20241228204332941](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153153634-859226937.png)

在刚才自定义特效定义法向纹理默认值

![image-20241228204509127](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153153164-1343998647.png)

值传进来

![image-20241228204532490](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153152820-551875338.png)

然后片段着色器拿到传进来的值

这是光线角度，参数是光线打进来的位置，normalize只是让他变成单向量

统一设置光线dot函数即可，由于normalcolor是一个四维向量所以只取xyz，加上光线形成思维向量

而clamp函数，设置一个区间，小于0就是0，大于1就是1

![image-20241228205302300](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153152316-511601323.png)

![image-20241228205631101](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153151517-1469235553.png)

五.运用时间打造水底波浪动态渲染效果
==================

形成波浪效果首先得用sin函数，变的是uv

![image-20241228205914137](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153150831-448352515.png)

![image-20241228210018519](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153150192-1699003572.png)

然后加上时间

![image-20241228210049115](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153149534-440380582.png)

![GIF](https://img2023.cnblogs.com/blog/2680817/202502/2680817-20250206153143294-211818947.gif)