---
layout: post
title: 'æ—¶åŒºè½¬æ¢å·¥å…·+PWAç¦»çº¿ç½‘é¡µ'
date: "2025-04-10T00:38:53Z"
---
æ—¶åŒºè½¬æ¢å·¥å…·+PWAç¦»çº¿ç½‘é¡µ
==============

![æ—¶åŒºè½¬æ¢å·¥å…·+PWAç¦»çº¿ç½‘é¡µ](https://img2024.cnblogs.com/blog/3373677/202504/3373677-20250409135124424-1301859887.png) æœ¬é¡¹ç›®å¯¹æ¯”å¹¶é€‰ç”¨ Luxon å®ç°å¤šæ—¶åŒºè½¬æ¢ï¼Œæ”¯æŒå„æ—¶åŒºæ—¶é—´äº’è½¬ã€‚ æä¾› NodeJS ä¸ Python è„šæœ¬ã€ç½‘é¡µå°å·¥å…·åŠ PWA åº”ç”¨ï¼ŒåŠŸèƒ½å®Œæ•´ã€ç»“æ„æ¸…æ™°ã€‚ é€‚ç”¨äºå¿«é€Ÿä½¿ç”¨ã€ç³»ç»Ÿé›†æˆæˆ–ç¦»çº¿è®¿é—®ï¼Œå…·å¤‡è‰¯å¥½æ‰©å±•æ€§ã€‚

æ—¶åŒºè½¬æ¢å·¥å…·+PWAç¦»çº¿ç½‘é¡µ
==============

**ä¸€ã€æ—¶åŒºè½¬æ¢å·¥å…·å¯¹æ¯”**
--------------

**å·¥å…·**

**è¯´æ˜**

Date

åŸç”Ÿ JS APIï¼Œæœ‰é™çš„æ—¶åŒºæ”¯æŒï¼Œæ— æ³•æŒ‡å®šæ—¶åŒºï¼Œä»…ä½¿ç”¨æœ¬åœ°æ—¶åŒºã€‚

Intl.DateTimeFormat

åŸç”Ÿæ ¼å¼åŒ–æ˜¾ç¤ºï¼Œå¯æŒ‡å®šæ—¶åŒºï¼Œä½†ä¸èƒ½ä¿®æ”¹æ—¶åŒºé€»è¾‘ã€‚

luxon

å¼ºçƒˆæ¨èï¼Œç°ä»£ã€è½»é‡ã€åŠŸèƒ½å¼ºï¼ŒåŸç”Ÿæ”¯æŒæ—¶åŒºã€æ—¶é—´æˆ³ã€æ ¼å¼åŒ–ç­‰ã€‚

dayjs + timezone æ’ä»¶

ç±»ä¼¼ momentï¼Œæ›´ç°ä»£ï¼Œä½†æ—¶åŒºæ”¯æŒéœ€æ’ä»¶ã€‚

moment-timezone

åŠŸèƒ½å…¨é¢ä½†ä½“ç§¯å¤§ï¼Œmoment å®˜æ–¹å·²ä¸æ¨èç”¨äºæ–°é¡¹ç›®ã€‚

äºŒã€**Luxon ä½¿ç”¨ç¤ºä¾‹**
----------------

### 1\. ç¾å›½æ—¶é—´ -> ä¸­å›½æ—¶é—´

    import { DateTime } from 'luxon'
    
    const usTime = DateTime.fromISO('2025-04-01T11:11:00', { zone: 'America/Los_Angeles' })
    
    const timestamp = usTime.toMillis()
    
    const cnTime = usTime.setZone('Asia/Shanghai')
    
    console.log('ç¾å›½æ—¶é—´ï¼š', usTime.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ'))
    console.log('æ—¶é—´æˆ³ï¼š', timestamp)
    console.log('å¯¹åº”çš„ä¸­å›½æ—¶é—´ï¼š', cnTime.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ'))
    

    ç¾å›½æ—¶é—´ï¼š2025-04-01 11:11:00 GMT-7
    æ—¶é—´æˆ³ï¼š1743521460000
    å¯¹åº”çš„ä¸­å›½æ—¶é—´ï¼š2025-04-02 02:11:00 GMT+8
    

### 2\. ä¸­å›½æ—¶é—´ -> ç¾å›½æ—¶é—´

    const cn = DateTime.fromISO('2025-04-01T11:11:00', { zone: 'Asia/Shanghai' })
    
    const us = cn.setZone('America/Los_Angeles')
    
    console.log('ä¸­å›½æ—¶é—´ï¼š', cn.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ'))
    console.log('å¯¹åº”çš„ç¾å›½æ—¶é—´ï¼š', us.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ'))
    console.log('æ—¶é—´æˆ³ï¼ˆUTCï¼‰ï¼š', cn.toMillis())
    

### 3\. è½¬æ¢é€»è¾‘æ€»ç»“

**åœºæ™¯**

**æ–¹æ³•**

æŒ‡å®šæ—¶åŒºçš„æ—¶é—´ â†’ æ—¶é—´æˆ³

DateTime.fromISO(...).toMillis()

æ—¶é—´æˆ³ â†’ æŒ‡å®šæ—¶åŒºæ—¶é—´

DateTime.fromMillis(...).setZone(...)

ä¸åŒæ—¶åŒºä¹‹é—´è½¬æ¢

.setZone(...)

æ—¶é—´æ ¼å¼åŒ–

.toFormat('yyyy-MM-dd HH:mm:ss') ç­‰

### 4\. å¸¸ç”¨æ—¶åŒº ID è¡¨

åç§°

IANA æ—¶åŒº ID

åŒ—äº¬/ä¸Šæµ·ï¼ˆAsia/Shanghaiï¼‰

Asia/Shanghai

é¦™æ¸¯ï¼ˆAsia/Hong\_Kongï¼‰

Asia/Hong\_Kong

æ—¥æœ¬ï¼ˆAsia/Tokyoï¼‰

Asia/Tokyo

éŸ©å›½ï¼ˆAsia/Seoulï¼‰

Asia/Seoul

æ–°åŠ å¡ï¼ˆAsia/Singaporeï¼‰

Asia/Singapore

å°åº¦ï¼ˆAsia/Kolkataï¼‰

Asia/Kolkata

ç¾å›½è¥¿éƒ¨ - æ´›æ‰çŸ¶ï¼ˆAmerica/Los\_Angelesï¼‰

America/Los\_Angeles

ç¾å›½ä¸­éƒ¨ - èŠåŠ å“¥ï¼ˆAmerica/Chicagoï¼‰

America/Chicago

ç¾å›½ä¸œéƒ¨ - çº½çº¦ï¼ˆAmerica/New\_Yorkï¼‰

America/New\_York

è‹±å›½ï¼ˆEurope/Londonï¼‰

Europe/London

å¾·å›½ï¼ˆEurope/Berlinï¼‰

Europe/Berlin

æ³•å›½ï¼ˆEurope/Parisï¼‰

Europe/Paris

æ¾³å¤§åˆ©äºš - æ‚‰å°¼ï¼ˆAustralia/Sydneyï¼‰

Australia/Sydney

æ–°è¥¿å…°ï¼ˆPacific/Aucklandï¼‰

Pacific/Auckland

å¤å¨å¤·ï¼ˆPacific/Honoluluï¼‰

Pacific/Honolulu

UTCï¼ˆåè°ƒä¸–ç•Œæ—¶ï¼‰

UTC

ä¸‰ã€æ—¶åŒºè½¬æ¢è„šæœ¬
--------

### 1\. NodeJS è„šæœ¬ï¼ˆä½¿ç”¨ luxonï¼‰

    const { DateTime } = require('luxon')
    
    function convertTime({
      timeStr = '2025-04-01 11:11:00',
      fromZone = 'America/Los_Angeles',
      toZone = 'Asia/Shanghai'
    }) {
      const fromTime = DateTime.fromFormat(timeStr, 'yyyy-MM-dd HH:mm:ss', { zone: fromZone })
    
      const toTime = fromTime.setZone(toZone)
    
      console.log(`åŸå§‹æ—¶é—´ (${fromZone}):`, fromTime.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ'))
      console.log(`æ—¶é—´æˆ³ï¼ˆUTC æ¯«ç§’ï¼‰:`, fromTime.toMillis())
      console.log(`è½¬æ¢å (${toZone}):`, toTime.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ'))
    }
    
    // ä¿®æ”¹è¿™é‡Œçš„å‚æ•°å³å¯
    convertTime({
      timeStr: '2025-04-01 11:11:00',
      fromZone: 'America/Los_Angeles',
      toZone: 'Asia/Shanghai'
    })
    

### 2\. Python è„šæœ¬ï¼ˆä½¿ç”¨ pytzï¼‰

    pip install pytz
    

    from datetime import datetime
    import pytz
    
    def convert_time(time_str='2025-04-01 11:11:00', from_zone='America/Los_Angeles', to_zone='Asia/Shanghai'):
        from_tz = pytz.timezone(from_zone)
        to_tz = pytz.timezone(to_zone)
    
        naive_dt = datetime.strptime(time_str, '%Y-%m-%d %H:%M:%S')
        from_dt = from_tz.localize(naive_dt)
    
        to_dt = from_dt.astimezone(to_tz)
    
        print(f'åŸå§‹æ—¶é—´ ({from_zone}): {from_dt.strftime("%Y-%m-%d %H:%M:%S %Z%z")}')
        print(f'æ—¶é—´æˆ³ï¼ˆUTC ç§’ï¼‰: {int(from_dt.timestamp())}')
        print(f'è½¬æ¢å ({to_zone}): {to_dt.strftime("%Y-%m-%d %H:%M:%S %Z%z")}')
    
    # ä¿®æ”¹å‚æ•°å³å¯
    convert_time(
        time_str='2025-04-01 11:11:00',
        from_zone='America/Los_Angeles',
        to_zone='Asia/Shanghai'
    )
    

å››ã€ç½‘é¡µå°å·¥å…·
-------

ä½¿ç”¨ Luxon + HTML åŸç”Ÿæ§ä»¶åˆ¶ä½œçš„å°å·¥å…·ï¼Œæ”¯æŒï¼š

*   è¾“å…¥æ—¶é—´
*   åŸå§‹/ç›®æ ‡æ—¶åŒºé€‰æ‹©
*   æ—¶é—´æˆ³æ˜¾ç¤º
*   ä¸€é”®å¤åˆ¶

### 1\. ä»£ç å±•ç¤º

    <!DOCTYPE html>
    <html lang="zh">
    <head>
      <meta charset="UTF-8" />
      <title>ğŸŒ æ—¶åŒºæ—¶é—´è½¬æ¢å·¥å…·</title>
      <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
      <style>
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          padding: 2rem;
          max-width: 700px;
          margin: auto;
          background: #f8f9fa;
        }
        h2 {
          text-align: center;
          margin-bottom: 2rem;
        }
        label {
          font-weight: bold;
          margin-top: 1rem;
          display: block;
        }
        input, select, button {
          width: 100%;
          padding: 0.6rem;
          margin: 0.4rem 0 1rem;
          border: 1px solid #ccc;
          border-radius: 5px;
          font-size: 1rem;
        }
        button {
          background: #007bff;
          color: white;
          cursor: pointer;
          border: none;
          transition: background 0.3s;
        }
        button:hover {
          background: #0056b3;
        }
        .result {
          background: #fff;
          border-left: 5px solid #007bff;
          padding: 1rem;
          margin-top: 1rem;
          border-radius: 5px;
          white-space: pre-wrap;
          font-size: 0.95rem;
        }
        .error {
          color: red;
          margin-top: 1rem;
        }
        .copy-btn {
          margin-top: 0.5rem;
          background: #28a745;
        }
        .copy-btn:hover {
          background: #1e7e34;
        }
        table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 2rem;
          background: #fff;
        }
        th, td {
          border: 1px solid #ddd;
          padding: 0.6rem;
          text-align: left;
        }
        th {
          background-color: #007bff;
          color: white;
        }
      </style>
    </head>
    <body>
      <h2>ğŸ•’ æ—¶åŒºè½¬æ¢å°å·¥å…·</h2>
    
      <label for="inputDate">é€‰æ‹©æ—¶é—´</label>
      <input type="datetime-local" id="inputDate" />
    
      <label for="fromZone">åŸå§‹æ—¶åŒº</label>
      <select id="fromZone"></select>
    
      <label for="toZone">ç›®æ ‡æ—¶åŒº</label>
      <select id="toZone"></select>
    
      <button onclick="convertTime()">è½¬æ¢æ—¶é—´</button>
    
      <div class="result" id="output">ğŸ‘‡ è½¬æ¢ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º</div>
      <button class="copy-btn" onclick="copyResult()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
      <div class="error" id="error"></div>
    
      <script>
        const { DateTime } = luxon
    
        const timezones = [
          { label: 'åŒ—äº¬ï¼ˆAsia/Shanghaiï¼‰', value: 'Asia/Shanghai' },
          { label: 'é¦™æ¸¯ï¼ˆAsia/Hong_Kongï¼‰', value: 'Asia/Hong_Kong' },
          { label: 'æ—¥æœ¬ï¼ˆAsia/Tokyoï¼‰', value: 'Asia/Tokyo' },
          { label: 'éŸ©å›½ï¼ˆAsia/Seoulï¼‰', value: 'Asia/Seoul' },
          { label: 'æ–°åŠ å¡ï¼ˆAsia/Singaporeï¼‰', value: 'Asia/Singapore' },
          { label: 'å°åº¦ï¼ˆAsia/Kolkataï¼‰', value: 'Asia/Kolkata' },
          { label: 'ç¾å›½è¥¿éƒ¨ - æ´›æ‰çŸ¶ï¼ˆAmerica/Los_Angelesï¼‰', value: 'America/Los_Angeles' },
          { label: 'ç¾å›½ä¸­éƒ¨ - èŠåŠ å“¥ï¼ˆAmerica/Chicagoï¼‰', value: 'America/Chicago' },
          { label: 'ç¾å›½ä¸œéƒ¨ - çº½çº¦ï¼ˆAmerica/New_Yorkï¼‰', value: 'America/New_York' },
          { label: 'è‹±å›½ï¼ˆEurope/Londonï¼‰', value: 'Europe/London' },
          { label: 'å¾·å›½ï¼ˆEurope/Berlinï¼‰', value: 'Europe/Berlin' },
          { label: 'æ³•å›½ï¼ˆEurope/Parisï¼‰', value: 'Europe/Paris' },
          { label: 'æ¾³å¤§åˆ©äºš - æ‚‰å°¼ï¼ˆAustralia/Sydneyï¼‰', value: 'Australia/Sydney' },
          { label: 'æ–°è¥¿å…°ï¼ˆPacific/Aucklandï¼‰', value: 'Pacific/Auckland' },
          { label: 'å¤å¨å¤·ï¼ˆPacific/Honoluluï¼‰', value: 'Pacific/Honolulu' },
          { label: 'UTCï¼ˆåè°ƒä¸–ç•Œæ—¶ï¼‰', value: 'UTC' },
        ]
    
        function renderTimezoneOptions() {
          const fromSelect = document.getElementById('fromZone')
          const toSelect = document.getElementById('toZone')
          const tableBody = document.getElementById('timezoneTable')
    
          timezones.forEach(({ label, value }) => {
            const opt1 = new Option(label, value)
            const opt2 = new Option(label, value)
            fromSelect.appendChild(opt1)
            toSelect.appendChild(opt2)
          })
    
          fromSelect.value = 'Asia/Shanghai'
          toSelect.value = 'America/Los_Angeles'
        }
    
        document.addEventListener('DOMContentLoaded', () => {
          renderTimezoneOptions()
          const now = new Date()
          const local = now.toISOString().slice(0, 16)
          document.getElementById('inputDate').value = local
        })
    
        function convertTime() {
          const input = document.getElementById('inputDate').value
          const fromZone = document.getElementById('fromZone').value
          const toZone = document.getElementById('toZone').value
          const output = document.getElementById('output')
          const error = document.getElementById('error')
    
          error.textContent = ''
    
          if (!input) {
            error.textContent = 'âŒ è¯·é€‰æ‹©ä¸€ä¸ªæ—¶é—´'
            return
          }
    
          try {
            const dt = DateTime.fromISO(input, { zone: fromZone })
            const toTime = dt.setZone(toZone)
    
            const result = `
    ğŸŒ åŸå§‹æ—¶é—´ï¼ˆ${fromZone}ï¼‰:
        ${dt.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ')}
    
    ğŸ•— æ—¶é—´æˆ³ï¼ˆUTC æ¯«ç§’ï¼‰:
        ${dt.toMillis()}
    
    â¡ï¸ è½¬æ¢åæ—¶é—´ï¼ˆ${toZone}ï¼‰:
        ${toTime.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ')}
                `.trim()
    
            output.textContent = result
          }
          catch (e) {
            error.textContent = 'âŒ è½¬æ¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥'
          }
        }
    
        function copyResult() {
          const result = document.getElementById('output').textContent
          if (!result || result.includes('å°†åœ¨è¿™é‡Œæ˜¾ç¤º'))
            return
          navigator.clipboard.writeText(result).then(() => {
            alert('âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼')
          })
        }
      </script>
    </body>
    </html>
    

### 2\. ç¤ºä¾‹æˆªå›¾

![](https://cdn.nlark.com/yuque/0/2025/png/340359/1743581698484-c5b6aef3-aba1-4f5f-9742-10959f558f46.png)

äº”ã€PWA åº”ç”¨æ”¯æŒ
----------

### 1\. PWA ç»“æ„

    .
    â”œâ”€â”€ icons
    â”‚   â”œâ”€â”€ time_192.png
    â”‚   â””â”€â”€ time_512.png
    â”œâ”€â”€ index.html
    â”œâ”€â”€ luxon.min.js
    â”œâ”€â”€ manifest.json
    â””â”€â”€ service-worker.js
    

### 2\. manifest.json

ç”¨äºå®šä¹‰åç§°ã€å›¾æ ‡ã€å¯åŠ¨æ–¹å¼ç­‰ï¼š

    {
      "name": "æ—¶åŒºæ—¶é—´è½¬æ¢å·¥å…·",
      "short_name": "æ—¶åŒºè½¬æ¢",
      "start_url": "./index.html",
      "display": "standalone",
      "background_color": "#ffffff",
      "theme_color": "#007bff",
      "description": "æ”¯æŒå¤šæ—¶åŒºæ—¶é—´äº’è½¬ã€æ—¶é—´æˆ³ç”Ÿæˆçš„è½»é‡å·¥å…·",
      "icons": [
        {
          "src": "icons/time_192.png",
          "sizes": "192x192",
          "type": "image/png"
        },
        {
          "src": "icons/time_512.png",
          "sizes": "512x512",
          "type": "image/png"
        }
      ]
    }
    

### 3\. service-worker.js

å®ç°æ ¸å¿ƒç¼“å­˜åŠŸèƒ½ï¼Œæ”¯æŒç¦»çº¿è®¿é—®ï¼š

    const CACHE_NAME = 'timezone-converter-0.0.1'
    const urlsToCache = [
      './',
      './index.html',
      './manifest.json',
      './service-worker.js',
      './icons/time_192.png',
      './icons/time_512.png',
      './luxon.min.js'
    ]
    
    // å®‰è£…æ—¶é¢„ç¼“å­˜æ ¸å¿ƒèµ„æº
    self.addEventListener('install', event => {
      self.skipWaiting()
      event.waitUntil(
        caches.open(CACHE_NAME)
          .then(cache => cache.addAll(urlsToCache))
      )
    })
    
    // æ¿€æ´»æ—¶æ¸…é™¤æ—§ç¼“å­˜
    self.addEventListener('activate', event => {
      event.waitUntil(
        caches.keys().then(keys =>
          Promise.all(keys.filter(k => k !== CACHE_NAME).map(k => caches.delete(k)))
        )
      )
      self.clients.claim()
    })
    
    // æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œä¼˜å…ˆä»ç¼“å­˜è¯»å–ï¼Œå¤±è´¥åˆ™ç½‘ç»œè¯·æ±‚
    self.addEventListener('fetch', event => {
      const request = event.request
    
      event.respondWith(
        caches.match(request).then(cachedResponse => {
          if (cachedResponse) return cachedResponse
    
          return fetch(request)
            .then(networkResponse => {
              if (
                networkResponse &&
                networkResponse.status === 200 &&
                request.url.startsWith(self.location.origin)
              ) {
                const cloned = networkResponse.clone()
                caches.open(CACHE_NAME).then(cache => {
                  cache.put(request, cloned)
                })
              }
              return networkResponse
            })
            .catch(() => {
              if (request.headers.get('accept')?.includes('text/html')) {
                return caches.match('./index.html')
              }
            })
        })
      )
    })
    

### 4\. html æ–‡ä»¶

æ•´åˆ Luxon + PWA æ³¨å†Œé€»è¾‘

    <!DOCTYPE html>
    <html lang="zh">
    <head>
      <meta charset="UTF-8" />
      <title>ğŸŒ æ—¶åŒºæ—¶é—´è½¬æ¢å·¥å…·1</title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <meta name="theme-color" content="#007bff" />
    
      <link rel="manifest" href="manifest.json" />
      <link rel="icon" href="icons/time_192.png" />
      <link rel="apple-touch-icon" href="icons/time_512.png" />
    
      <script src="./luxon.min.js"></script>
    
      <style>
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          padding: 2rem;
          max-width: 700px;
          margin: auto;
          background: #f8f9fa;
        }
        h2 {
          text-align: center;
          margin-bottom: 2rem;
        }
        label {
          font-weight: bold;
          margin-top: 1rem;
          display: block;
        }
        input, select, button {
          width: 100%;
          padding: 0.6rem;
          margin: 0.4rem 0 1rem;
          border: 1px solid #ccc;
          border-radius: 5px;
          font-size: 1rem;
        }
        button {
          background: #007bff;
          color: white;
          cursor: pointer;
          border: none;
          transition: background 0.3s;
        }
        button:hover {
          background: #0056b3;
        }
        .result {
          background: #fff;
          border-left: 5px solid #007bff;
          padding: 1rem;
          margin-top: 1rem;
          border-radius: 5px;
          white-space: pre-wrap;
          font-size: 0.95rem;
        }
        .error {
          color: red;
          margin-top: 1rem;
        }
        .copy-btn {
          margin-top: 0.5rem;
          background: #28a745;
        }
        .copy-btn:hover {
          background: #1e7e34;
        }
        table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 2rem;
          background: #fff;
        }
        th, td {
          border: 1px solid #ddd;
          padding: 0.6rem;
          text-align: left;
        }
        th {
          background-color: #007bff;
          color: white;
        }
      </style>
    </head>
    <body>
      <h2>ğŸ•’ æ—¶åŒºè½¬æ¢å°å·¥å…·</h2>
    
      <label for="inputDate">é€‰æ‹©æ—¶é—´</label>
      <input type="datetime-local" id="inputDate" />
    
      <label for="fromZone">åŸå§‹æ—¶åŒº</label>
      <select id="fromZone"></select>
    
      <label for="toZone">ç›®æ ‡æ—¶åŒº</label>
      <select id="toZone"></select>
    
      <button onclick="convertTime()">è½¬æ¢æ—¶é—´</button>
    
      <div class="result" id="output">ğŸ‘‡ è½¬æ¢ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º</div>
      <button class="copy-btn" onclick="copyResult()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
      <div class="error" id="error"></div>
    
      <script>
        const { DateTime } = luxon
    
        const timezones = [
          { label: 'åŒ—äº¬ï¼ˆAsia/Shanghaiï¼‰', value: 'Asia/Shanghai' },
          { label: 'é¦™æ¸¯ï¼ˆAsia/Hong_Kongï¼‰', value: 'Asia/Hong_Kong' },
          { label: 'æ—¥æœ¬ï¼ˆAsia/Tokyoï¼‰', value: 'Asia/Tokyo' },
          { label: 'éŸ©å›½ï¼ˆAsia/Seoulï¼‰', value: 'Asia/Seoul' },
          { label: 'æ–°åŠ å¡ï¼ˆAsia/Singaporeï¼‰', value: 'Asia/Singapore' },
          { label: 'å°åº¦ï¼ˆAsia/Kolkataï¼‰', value: 'Asia/Kolkata' },
          { label: 'ç¾å›½è¥¿éƒ¨ - æ´›æ‰çŸ¶ï¼ˆAmerica/Los_Angelesï¼‰', value: 'America/Los_Angeles' },
          { label: 'ç¾å›½ä¸­éƒ¨ - èŠåŠ å“¥ï¼ˆAmerica/Chicagoï¼‰', value: 'America/Chicago' },
          { label: 'ç¾å›½ä¸œéƒ¨ - çº½çº¦ï¼ˆAmerica/New_Yorkï¼‰', value: 'America/New_York' },
          { label: 'è‹±å›½ï¼ˆEurope/Londonï¼‰', value: 'Europe/London' },
          { label: 'å¾·å›½ï¼ˆEurope/Berlinï¼‰', value: 'Europe/Berlin' },
          { label: 'æ³•å›½ï¼ˆEurope/Parisï¼‰', value: 'Europe/Paris' },
          { label: 'æ¾³å¤§åˆ©äºš - æ‚‰å°¼ï¼ˆAustralia/Sydneyï¼‰', value: 'Australia/Sydney' },
          { label: 'æ–°è¥¿å…°ï¼ˆPacific/Aucklandï¼‰', value: 'Pacific/Auckland' },
          { label: 'å¤å¨å¤·ï¼ˆPacific/Honoluluï¼‰', value: 'Pacific/Honolulu' },
          { label: 'UTCï¼ˆåè°ƒä¸–ç•Œæ—¶ï¼‰', value: 'UTC' }
        ]
    
        function renderTimezoneOptions() {
          const fromSelect = document.getElementById('fromZone')
          const toSelect = document.getElementById('toZone')
    
          timezones.forEach(({ label, value }) => {
            const opt1 = new Option(label, value)
            const opt2 = new Option(label, value)
            fromSelect.appendChild(opt1)
            toSelect.appendChild(opt2)
    
          })
    
          fromSelect.value = 'Asia/Shanghai'
          toSelect.value = 'America/Los_Angeles'
        }
    
        function convertTime() {
          const input = document.getElementById('inputDate').value
          const fromZone = document.getElementById('fromZone').value
          const toZone = document.getElementById('toZone').value
          const output = document.getElementById('output')
          const error = document.getElementById('error')
    
          error.textContent = ''
    
          if (!input) {
            error.textContent = 'âŒ è¯·é€‰æ‹©ä¸€ä¸ªæ—¶é—´'
            return
          }
    
          try {
            const dt = DateTime.fromISO(input, { zone: fromZone })
            const toTime = dt.setZone(toZone)
    
            const result = `
    ğŸŒ åŸå§‹æ—¶é—´ï¼ˆ${fromZone}ï¼‰:
    ${dt.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ')}
    
    ğŸ•— æ—¶é—´æˆ³ï¼ˆUTC æ¯«ç§’ï¼‰:
    ${dt.toMillis()}
    
    â¡ï¸ è½¬æ¢åæ—¶é—´ï¼ˆ${toZone}ï¼‰:
    ${toTime.toFormat('yyyy-MM-dd HH:mm:ss ZZZZ')}
            `.trim()
    
            output.textContent = result
          } catch (e) {
            error.textContent = 'âŒ è½¬æ¢å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥'
          }
        }
    
        function copyResult() {
          const result = document.getElementById('output').textContent
          if (!result || result.includes('å°†åœ¨è¿™é‡Œæ˜¾ç¤º')) return
          navigator.clipboard.writeText(result).then(() => {
            alert('âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼')
          })
        }
    
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
          renderTimezoneOptions()
          const now = new Date()
          const local = now.toISOString().slice(0, 16)
          document.getElementById('inputDate').value = local
        })
    
        // æ³¨å†Œ PWA service worker
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('service-worker.js')
              .then(() => console.log('âœ… Service Worker æ³¨å†ŒæˆåŠŸ'))
              .catch(err => console.log('âŒ æ³¨å†Œå¤±è´¥:', err))
          })
        }
      </script>
    </body>
    </html>
    

### 5\. Live server å¯åŠ¨

å¯åŠ¨å®Œæˆå®‰è£…åˆ°æœ¬åœ°å³å¯

å…­ã€æ€»ç»“
----

æœ¬é¡¹ç›®å¯¹æ¯”å¹¶é€‰ç”¨ Luxon å®ç°å¤šæ—¶åŒºè½¬æ¢ï¼Œæ”¯æŒå„æ—¶åŒºæ—¶é—´äº’è½¬ã€‚  
æä¾› NodeJS ä¸ Python è„šæœ¬ã€ç½‘é¡µå°å·¥å…·åŠ PWA åº”ç”¨ï¼ŒåŠŸèƒ½å®Œæ•´ã€ç»“æ„æ¸…æ™°ã€‚  
é€‚ç”¨äºå¿«é€Ÿä½¿ç”¨ã€ç³»ç»Ÿé›†æˆæˆ–ç¦»çº¿è®¿é—®ï¼Œå…·å¤‡è‰¯å¥½æ‰©å±•æ€§ã€‚