---
layout: post
title: 'TensorRT-YOLOï¼šçµæ´»æ˜“ç”¨çš„ YOLO éƒ¨ç½²å·¥å…·'
date: "2024-12-28T10:59:36Z"
---
TensorRT-YOLOï¼šçµæ´»æ˜“ç”¨çš„ YOLO éƒ¨ç½²å·¥å…·
=============================

ğŸš€TensorRT-YOLO æ˜¯ä¸€æ¬¾ä¸“ä¸º NVIDIA è®¾å¤‡è®¾è®¡çš„**æ˜“ç”¨çµæ´»**ã€**æè‡´é«˜æ•ˆ**çš„**YOLOç³»åˆ—**æ¨ç†éƒ¨ç½²å·¥å…·ã€‚é¡¹ç›®ä¸ä»…é›†æˆäº† TensorRT æ’ä»¶ä»¥å¢å¼ºåå¤„ç†æ•ˆæœï¼Œè¿˜ä½¿ç”¨äº† CUDA æ ¸å‡½æ•°ä»¥åŠ CUDA å›¾æ¥åŠ é€Ÿæ¨ç†ã€‚TensorRT-YOLO æä¾›äº† C++ å’Œ Python æ¨ç†çš„æ”¯æŒï¼Œæ—¨åœ¨æä¾›ğŸ“¦**å¼€ç®±å³ç”¨**çš„éƒ¨ç½²ä½“éªŒã€‚åŒ…æ‹¬ [ç›®æ ‡æ£€æµ‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/detect/)ã€[å®ä¾‹åˆ†å‰²](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/segment/)ã€[å›¾åƒåˆ†ç±»](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/classify/)ã€[å§¿æ€è¯†åˆ«](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/pose/)ã€[æ—‹è½¬ç›®æ ‡æ£€æµ‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/obb/)ã€[è§†é¢‘åˆ†æ](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/VideoPipe)ç­‰ä»»åŠ¡åœºæ™¯ï¼Œæ»¡è¶³å¼€å‘è€…**å¤šåœºæ™¯**çš„éƒ¨ç½²éœ€æ±‚ã€‚

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227162348754-2136545424.gif)

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227162628475-1060794910.jpg)

Detect

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227162646310-238494647.jpg)

Segment

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227162717862-1594112552.jpg)

Pose

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227162742389-458578113.png)

OBB

é¡¹ç›®åœ°å€ï¼šTensorRT-YOLO GitHub:[https://github.com/laugh12321/TensorRT-YOLO](https://github.com/laugh12321/TensorRT-YOLO)

âœ¨ ä¸»è¦ç‰¹æ€§
------

*   **å¤šæ ·åŒ–çš„YOLOæ”¯æŒ**ï¼šå…¨é¢å…¼å®¹YOLOv3è‡³YOLOv11ä»¥åŠPP-YOLOEå’ŒPP-YOLOE+ï¼Œæ»¡è¶³ä¸åŒç‰ˆæœ¬éœ€æ±‚ã€‚
*   **å¤šåœºæ™¯åº”ç”¨**ï¼šæä¾›[Detect](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/detect/)ã€[Segment](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/segment/)ã€[Classify](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/classify/)ã€[Pose](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/pose/)ã€[OBB](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/obb/)ç­‰å¤šæ ·åŒ–åœºæ™¯çš„ç¤ºä¾‹ä»£ç ã€‚
*   **æ¨¡å‹ä¼˜åŒ–ä¸æ¨ç†åŠ é€Ÿ**ï¼š
    *   **ONNXæ”¯æŒ**ï¼šæ”¯æŒONNXæ¨¡å‹çš„é™æ€å’ŒåŠ¨æ€å¯¼å‡ºï¼ŒåŒ…æ‹¬TensorRTè‡ªå®šä¹‰æ’ä»¶æ”¯æŒï¼Œç®€åŒ–æ¨¡å‹éƒ¨ç½²æµç¨‹ã€‚
    *   **TensorRTé›†æˆ**ï¼šé›†æˆTensorRTæ’ä»¶ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰æ’ä»¶ï¼ŒåŠ é€ŸDetect, Segment, Pose, OBBç­‰åœºæ™¯çš„åå¤„ç†ï¼Œæå‡æ¨ç†æ•ˆç‡ã€‚
    *   **CUDAåŠ é€Ÿ**ï¼šåˆ©ç”¨CUDAæ ¸å‡½æ•°ä¼˜åŒ–å‰å¤„ç†ï¼ŒCUDAå›¾æŠ€æœ¯åŠ é€Ÿæ¨ç†æµç¨‹ï¼Œå®ç°é«˜æ€§èƒ½è®¡ç®—ã€‚
*   **è¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒC++å’ŒPythonï¼ˆé€šè¿‡Pybind11æ˜ å°„ï¼Œæå‡Pythonæ¨ç†é€Ÿåº¦ï¼‰ï¼Œæ»¡è¶³ä¸åŒç¼–ç¨‹è¯­è¨€éœ€æ±‚ã€‚
*   **éƒ¨ç½²ä¾¿æ·æ€§**ï¼š
    *   **åŠ¨æ€åº“ç¼–è¯‘**ï¼šæä¾›åŠ¨æ€åº“ç¼–è¯‘æ”¯æŒï¼Œæ–¹ä¾¿è°ƒç”¨å’Œéƒ¨ç½²ã€‚
    *   **æ— ç¬¬ä¸‰æ–¹ä¾èµ–**ï¼šå…¨éƒ¨åŠŸèƒ½ä½¿ç”¨æ ‡å‡†åº“å®ç°ï¼Œæ— éœ€é¢å¤–ä¾èµ–ï¼Œç®€åŒ–éƒ¨ç½²æµç¨‹ã€‚
*   **å¿«é€Ÿå¼€å‘ä¸éƒ¨ç½²**ï¼š
    *   **CLIå·¥å…·**ï¼šæä¾›å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰å·¥å…·ï¼Œå®ç°å¿«é€Ÿæ¨¡å‹å¯¼å‡ºå’Œæ¨ç†ã€‚
    *   **è·¨å¹³å°æ”¯æŒ**ï¼šæ”¯æŒWindowsã€Linuxã€ARMã€x86ç­‰å¤šç§è®¾å¤‡ï¼Œé€‚åº”ä¸åŒç¡¬ä»¶ç¯å¢ƒã€‚
    *   **Dockeréƒ¨ç½²**ï¼šæ”¯æŒDockerä¸€é”®éƒ¨ç½²ï¼Œç®€åŒ–ç¯å¢ƒé…ç½®å’Œéƒ¨ç½²æµç¨‹ã€‚
*   **TensorRTå…¼å®¹æ€§**ï¼šå…¼å®¹TensorRT 10.xç‰ˆæœ¬ï¼Œç¡®ä¿ä¸æœ€æ–°æŠ€æœ¯å…¼å®¹ã€‚

ğŸ”® æ–‡æ¡£æ•™ç¨‹
-------

*   **å®‰è£…æ–‡æ¡£**
    *   [ğŸ“¦ å¿«é€Ÿç¼–è¯‘å®‰è£…](https://github.com/laugh12321/TensorRT-YOLO/tree/main/docs/cn/build_and_install.md)
*   **å¿«é€Ÿå¼€å§‹**
    *   [âœ´ï¸ Python SDKå¿«é€Ÿä½¿ç”¨](#quick-start-python)
    *   [âœ´ï¸ C++ SDKå¿«é€Ÿä½¿ç”¨](#quick-start-cpp)
*   **ä½¿ç”¨ç¤ºä¾‹**
    *   [ç›®æ ‡æ£€æµ‹ ç¤ºä¾‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/detect/README.md)
    *   [å®ä¾‹åˆ†å‰² ç¤ºä¾‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/segment/README.md)
    *   [å›¾åƒåˆ†ç±» ç¤ºä¾‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/classify/README.md)
    *   [å§¿æ€è¯†åˆ« ç¤ºä¾‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/pose/README.md)
    *   [æ—‹è½¬ç›®æ ‡æ£€æµ‹ ç¤ºä¾‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/obb/README.md)
    *   [ğŸ“¹è§†é¢‘åˆ†æ ç¤ºä¾‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples/VideoPipe/README.md)
*   **APIæ–‡æ¡£**
    *   Python APIæ–‡æ¡£ï¼ˆâš ï¸ æœªå®ç°ï¼‰
    *   C++ APIæ–‡æ¡£ï¼ˆâš ï¸ æœªå®ç°ï¼‰
*   **å¸¸è§é—®é¢˜**
    *   âš ï¸ æ”¶é›†ä¸­ ...
*   **æ¨¡å‹æ”¯æŒåˆ—è¡¨**
    *   [ğŸ–¥ï¸ æ¨¡å‹æ”¯æŒåˆ—è¡¨](#support-models)

ğŸ’¨ å¿«é€Ÿå¼€å§‹
-------

### ğŸ”¸ å‰ç½®ä¾èµ–

*   æ¨è CUDA ç‰ˆæœ¬ >= 11.0.1 ï¼ˆCUDA æœ€ä½ç‰ˆæœ¬ 11.0.1ï¼‰
*   æ¨è TensorRT ç‰ˆæœ¬ >= 8.6.1 ï¼ˆTensorRT æœ€ä½ç‰ˆæœ¬ 8.6.1ï¼‰
*   OS: Linux x86\_64 (æ¨è) arm / Windows /

### ğŸ† å¿«é€Ÿå®‰è£…

*   å‚è€ƒ[ğŸ“¦ å¿«é€Ÿç¼–è¯‘å®‰è£…](https://github.com/laugh12321/TensorRT-YOLO/tree/main/docs/cn/build_and_install.md)æ–‡æ¡£

> åœ¨è¿›è¡Œæ¨ç†ä¹‹å‰ï¼Œè¯·å‚è€ƒ[ğŸ”§ CLI å¯¼å‡ºæ¨¡å‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/docs/cn/model_export.md)æ–‡æ¡£ï¼Œå¯¼å‡ºé€‚ç”¨äºè¯¥é¡¹ç›®æ¨ç†çš„ONNXæ¨¡å‹å¹¶æ„å»ºä¸ºTensorRTå¼•æ“ã€‚

### Python SDKå¿«é€Ÿå¼€å§‹

#### Python CLI æ¨ç†ç¤ºä¾‹

> ä½¿ç”¨ `--cudaGraph` é€‰é¡¹å¯ä»¥æ˜¾è‘—æå‡æ¨ç†é€Ÿåº¦ï¼Œä½†éœ€çŸ¥æ­¤åŠŸèƒ½ä»…é€‚ç”¨äºé™æ€æ¨¡å‹ã€‚
> 
> é€šè¿‡ `-m, --mode` å‚æ•°å¯ä»¥é€‰æ‹©ä¸åŒçš„æ¨¡å‹ç±»å‹ï¼Œå…¶ä¸­ `0` ä»£è¡¨æ£€æµ‹ï¼ˆDetectï¼‰ã€`1` ä»£è¡¨æ—‹è½¬è¾¹ç•Œæ¡†ï¼ˆOBBï¼‰ã€`2` ä»£è¡¨åˆ†å‰²ï¼ˆSegmentï¼‰ã€`3` ä»£è¡¨å§¿æ€ä¼°è®¡ï¼ˆPoseï¼‰ã€`4` ä»£è¡¨å›¾åƒåˆ†ç±»ï¼ˆClassifyï¼‰ã€‚

1.  ä½¿ç”¨ `tensorrt_yolo` åº“çš„ `trtyolo` å‘½ä»¤è¡Œå·¥å…·è¿›è¡Œæ¨ç†ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š
    
        trtyolo infer --help
        
    
2.  è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæ¨ç†ï¼š
    
        trtyolo infer -e models/yolo11n.engine -m 0 -i images -o output -l labels.txt --cudaGraph
        
    
    æ¨ç†ç»“æœå°†ä¿å­˜è‡³ `output` æ–‡ä»¶å¤¹ï¼Œå¹¶ç”Ÿæˆå¯è§†åŒ–ç»“æœã€‚
    

#### Python æ¨ç†ç¤ºä¾‹

> `DeployDet`ã€`DeployOBB`ã€`DeploySeg`ã€`DeployPose` å’Œ `DeployCls` åˆ†åˆ«å¯¹åº”äºæ£€æµ‹ï¼ˆDetectï¼‰ã€æ–¹å‘è¾¹ç•Œæ¡†ï¼ˆOBBï¼‰ã€åˆ†å‰²ï¼ˆSegmentï¼‰ã€å§¿æ€ä¼°è®¡ï¼ˆPoseï¼‰å’Œå›¾åƒåˆ†ç±»ï¼ˆClassifyï¼‰æ¨¡å‹ã€‚
> 
> å¯¹äºè¿™äº›æ¨¡å‹ï¼Œ`CG` ç‰ˆæœ¬åˆ©ç”¨ CUDA Graph æ¥è¿›ä¸€æ­¥åŠ é€Ÿæ¨ç†è¿‡ç¨‹ï¼Œä½†è¯·æ³¨æ„ï¼Œè¿™ä¸€åŠŸèƒ½ä»…é™äºé™æ€æ¨¡å‹ã€‚

    import cv2
    from tensorrt_yolo.infer import DeployDet, generate_labels, visualize
    
    # åˆå§‹åŒ–æ¨¡å‹
    model = DeployDet("yolo11n-with-plugin.engine")
    # åŠ è½½å›¾ç‰‡
    im = cv2.imread("test_image.jpg")
    # æ¨¡å‹é¢„æµ‹
    result = model.predict(cv2.cvtColor(im, cv2.COLOR_BGR2RGB))
    print(f"==> detect result: {result}")
    # å¯è§†åŒ–
    labels = generate_labels("labels.txt")
    vis_im = visualize(im, result, labels)
    cv2.imwrite("vis_image.jpg", vis_im)
    

### C++ SDKå¿«é€Ÿå¼€å§‹

> `DeployDet`ã€`DeployOBB`ã€`DeploySeg`ã€`DeployPose` å’Œ `DeployCls` åˆ†åˆ«å¯¹åº”äºæ£€æµ‹ï¼ˆDetectï¼‰ã€æ–¹å‘è¾¹ç•Œæ¡†ï¼ˆOBBï¼‰ã€åˆ†å‰²ï¼ˆSegmentï¼‰ã€å§¿æ€ä¼°è®¡ï¼ˆPoseï¼‰å’Œå›¾åƒåˆ†ç±»ï¼ˆClassifyï¼‰æ¨¡å‹ã€‚
> 
> å¯¹äºè¿™äº›æ¨¡å‹ï¼Œ`CG` ç‰ˆæœ¬åˆ©ç”¨ CUDA Graph æ¥è¿›ä¸€æ­¥åŠ é€Ÿæ¨ç†è¿‡ç¨‹ï¼Œä½†è¯·æ³¨æ„ï¼Œè¿™ä¸€åŠŸèƒ½ä»…é™äºé™æ€æ¨¡å‹ã€‚

    #include <opencv2/opencv.hpp>
    // ä¸ºäº†æ–¹ä¾¿è°ƒç”¨ï¼Œæ¨¡å—é™¤ä½¿ç”¨ CUDAã€TensorRT å…¶ä½™å‡ä½¿ç”¨æ ‡å‡†åº“å®ç°
    #include "deploy/vision/inference.hpp"
    #include "deploy/vision/result.hpp"
    
    int main() {
        // åˆå§‹åŒ–æ¨¡å‹
        auto model = deploy::DeployDet("yolo11n-with-plugin.engine");
        // åŠ è½½å›¾ç‰‡
        cv::Mat cvim = cv::imread("test_image.jpg");
        cv::cvtColor(cvim, cvim, cv::COLOR_BGR2RGB);
        deploy::Image im(cvim.data, cvim.cols, cvim.rows);
        // æ¨¡å‹é¢„æµ‹
        deploy::DetResult result = model.predict(im);
        // å¯è§†åŒ–ï¼ˆä»£ç çœç•¥ï¼‰
        // ...
        return 0;
    }
    

æ›´å¤šéƒ¨ç½²æ¡ˆä¾‹è¯·å‚è€ƒ[æ¨¡å‹éƒ¨ç½²ç¤ºä¾‹](https://github.com/laugh12321/TensorRT-YOLO/tree/main/examples) .

ğŸ–¥ï¸ æ¨¡å‹æ”¯æŒåˆ—è¡¨


------------

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227163305177-1675181700.jpg)

Detect

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227163256989-812254020.jpg)

Segment

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227163300205-880036640.jpg)

Pose

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227163302691-64967682.jpg)

OBB

ç¬¦å·è¯´æ˜: (1) âœ… : å·²ç»æ”¯æŒ; (2) â”: æ­£åœ¨è¿›è¡Œä¸­; (3) â : æš‚ä¸æ”¯æŒ; (4) ğŸŸ¢ : å¯¼å‡ºè‡ªè¡Œå®ç°ï¼Œå³å¯æ¨ç†.  

ä»»åŠ¡åœºæ™¯

æ¨¡å‹

CLI å¯¼å‡º

æ¨ç†éƒ¨ç½²

Detect

[ultralytics/yolov3](https://github.com/ultralytics/yolov3)

âœ…

âœ…

Detect

[ultralytics/yolov5](https://github.com/ultralytics/yolov5)

âœ…

âœ…

Detect

[meituan/YOLOv6](https://github.com/meituan/YOLOv6)

â å‚è€ƒ[å®˜æ–¹å¯¼å‡ºæ•™ç¨‹](https://github.com/meituan/YOLOv6/tree/main/deploy/ONNX#tensorrt-backend-tensorrt-version-800)

âœ…

Detect

[WongKinYiu/yolov7](https://github.com/WongKinYiu/yolov7)

â å‚è€ƒ[å®˜æ–¹å¯¼å‡ºæ•™ç¨‹](https://github.com/WongKinYiu/yolov7#export)

âœ…

Detect

[WongKinYiu/yolov9](https://github.com/WongKinYiu/yolov9)

â å‚è€ƒ[å®˜æ–¹å¯¼å‡ºæ•™ç¨‹](https://github.com/WongKinYiu/yolov9/issues/130#issue-2162045461)

âœ…

Detect

[THU-MIG/yolov10](https://github.com/THU-MIG/yolov10)

âœ…

âœ…

Detect

[ultralytics/ultralytics](https://github.com/ultralytics/ultralytics)

âœ…

âœ…

Detect

[PaddleDetection/PP-YOLOE+](https://github.com/PaddlePaddle/PaddleDetection)

âœ…

âœ…

Segment

[ultralytics/yolov3](https://github.com/ultralytics/yolov3)

âœ…

âœ…

Segment

[ultralytics/yolov5](https://github.com/ultralytics/yolov5)

âœ…

âœ…

Segment

[meituan/YOLOv6-seg](https://github.com/meituan/YOLOv6/tree/yolov6-seg)

â å‚è€ƒ[tensorrt\_yolo/export/head.py](https://github.com/laugh12321/TensorRT-YOLO/blob/main/tensorrt_yolo/export/head.py) è‡ªè¡Œå®ç°

ğŸŸ¢

Segment

[WongKinYiu/yolov7](https://github.com/WongKinYiu/yolov7)

â å‚è€ƒ[tensorrt\_yolo/export/head.py](https://github.com/laugh12321/TensorRT-YOLO/blob/main/tensorrt_yolo/export/head.py) è‡ªè¡Œå®ç°

ğŸŸ¢

Segment

[WongKinYiu/yolov9](https://github.com/WongKinYiu/yolov9)

â å‚è€ƒ[tensorrt\_yolo/export/head.py](https://github.com/laugh12321/TensorRT-YOLO/blob/main/tensorrt_yolo/export/head.py) è‡ªè¡Œå®ç°

ğŸŸ¢

Segment

[ultralytics/ultralytics](https://github.com/ultralytics/ultralytics)

âœ…

âœ…

Classify

[ultralytics/yolov3](https://github.com/ultralytics/yolov3)

âœ…

âœ…

Classify

[ultralytics/yolov5](https://github.com/ultralytics/yolov5)

âœ…

âœ…

Classify

[ultralytics/ultralytics](https://github.com/ultralytics/ultralytics)

âœ…

âœ…

Pose

[ultralytics/ultralytics](https://github.com/ultralytics/ultralytics)

âœ…

âœ…

OBB

[ultralytics/ultralytics](https://github.com/ultralytics/ultralytics)

âœ…

âœ…

â˜• è¯·ä½œè€…å–æ¯å’–å•¡
---------

å¼€æºä¸æ˜“ï¼Œå¦‚æœæœ¬é¡¹ç›®æœ‰å¸®åŠ©åˆ°ä½ çš„è¯ï¼Œå¯ä»¥è€ƒè™‘è¯·ä½œè€…å–æ¯å’–å•¡ï¼Œä½ çš„æ”¯æŒæ˜¯å¼€å‘è€…æŒç»­ç»´æŠ¤çš„æœ€å¤§åŠ¨åŠ›~

![](https://img2024.cnblogs.com/blog/2468833/202412/2468833-20241227163003466-291268855.png)