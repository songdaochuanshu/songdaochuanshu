---
layout: post
title: '每周读书与学习->认识性能测试工具JMeter'
date: "2025-09-02T00:40:23Z"
---
每周读书与学习->认识性能测试工具JMeter
=======================

**每周读书与学习是由清华大学出版社出版的《JMeter核心技术、性能测试与性能分析》一书的作者推出，分享作者多年的IT从业经历，希望对很多计算机科学技术IT类专业毕业生以及IT从业者有所帮助。**

**1、JMeter基本介绍**

Jmeter 是Apache 基金会下一个开源的由纯Java语言编写的性能测试工具，最初仅被设计用于 Web 应用测试，后来随着性能测试等其他测试类型的出现才被逐步扩展到了测试的其他领域中。通过访问网址[https://jmeter.apache.org/](https://jmeter.apache.org/) 即可进入到Jmeter的官方网站，如下图所示。

Jmeter的主要特点如下：

*   完全开源源代码，并且所有的功能都是免费的，用户也可以免费使用和修改源代码以满足特定的性能测试需求。
*   支持众多网络层/应用层的通信协议（比如TCP、HTTP、‌FTP、‌JDBC、SMTP、POP3、IMAP、JMS等），Jmeter 几乎可以支持对所有的应用系统做性能测试。
*   JMeter支持插件和扩展,可以扩展其功能和性能,以满足特定的性能测试需求。
*   JMeter完全可移植，‌且是由100%纯Java语言编写，‌因此可以在不同操作系统上都是兼容的。
*   支持定制性能测试场景，比如设置并发用户数、持续时间、循环次数和延迟时间等以模拟真实的使用场景。
*   支持聚合报告、图形结果、树形结果等测试结果收集和显示方式便于性能分析和调优。

Jmeter的源码是托管在Github中，通过访问Github网址：[https://github.com/apache/jmeter](https://github.com/apache/jmeter)即可进入到Jmeter的源码托管界面中，如下图所示，从图中可以看到Jmeter源码当前有超过18261次源码的提交记录，并且在开源社区拥有众多的代码贡献者，可见Jmeter 在开源社区中保持着相当大的活跃度，同时从中也可以看到性能测试的重要性以及在众多性能测试工具中，Jmeter以其开源免费、技术资料众多，社区庞大从而被广泛的性能测试爱好者所倾爱。同时在Jmeter的Github网址：[https://github.com/apache/jmeter/blob/master/CONTRIBUTING.md](https://github.com/apache/jmeter/blob/master/CONTRIBUTING.md) 中还有说明如何参与Jmeter的源码贡献，Jmeter 鼓励性能测试爱好者都可以参与Jmeter的源码贡献开发。

**2、JMeter的安装部署**

在前面已经提到Jmeter 是完全由Java 语言来实现的一款性能测试工具，而Java 语言又拥有着非常好的平台兼容性，所以Jmeter 可以在很多不同的操作系统上运行。

Jmeter的安装部署步骤如下：

1）、 从Java JDK 官方网站网址[https://www.oracle.com/java/technologies/downloads/#java11](https://www.oracle.com/java/technologies/downloads/#java11)中下载 Java JDK，Jmeter 安装时对JDK要求是不能低于JDK 8这个版本，通常建议选择JDK 11的版本进行下载，如下图所示，根据自己的操作系统类型选择对应的下载链接进行下载。**每周读书与学习是由清华大学出版社出版的《JMeter核心技术、性能测试与性能分析》一书的作者推出，分享作者多年的IT从业经历，希望对很多计算机科学技术IT类专业毕业生以及IT从业者有所帮助。**

 

2）、 将下载好的Java  JDK解压到操作系统下的一个文件夹中，如下图所示，此处以Windows 操作系统为例，如果是下载的后缀名为exe的安装执行文件，可以直接在Windows操作系统中双击下载好的安装文件，按照界面上的提示进行安装即可。

 

3）、 在操作系统中配置环境变量，此处还是以Windows 操作系统为例，新建一个JAVA\_HOME的变量，填入Java JDK安装或者解压后的文件夹的路径，然后编辑Path 变量增加%JAVA\_HOME%\\bin到Path变量中。

4）、 从Jmeter 官方网址[https://jmeter.apache.org/download\_jmeter.cgi中下载最新版本的Jmeter](https://jmeter.apache.org/download_jmeter.cgi%E4%B8%AD%E4%B8%8B%E8%BD%BD%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E7%9A%84Jmeter) 安装包，如下图所示，选择图中的Binaries 进行下载，下载格式包括后缀名为tgz和zip两种，tgz和zip 是两种不同的压缩格式，随意选择一种下载即可。

5）、 将下载好的Jmeter 安装包 解压到操作系统下的一个文件夹中，此处以Windows 操作系统为例，如下图所示。

6）、 双击上图文件夹中的jmeter.bat这个文件，即可启动Jmeter并且进入到Jmeter的运行界面

**3、JMeter的组成**

Jmeter 主要由如下主要组件组成，如下图所示，通常一个完整的性能测试需要由如下部分或者全部组件（在Jmeter中通常又称为元件）来串联完成性能测试脚本的编写，每个组件的介绍如下。

*   线程组(Threads Group)：主要控制整个性能测试的运行开始时间以及运行时长、线程数量（即并发用户数）等，通常情况下，每个性能测试场景都需要先在Jmeter界面上创建一个线程组，然后才能运行后续的性能测试脚本，因为性能压测通常都是需要模拟大量的用户来进行并发操作，那么就需要线程组来通过多个线程的方式来模拟产生大量的用户。
*   配置元件(Config Element)：主要用于完成性能测试中需要的一些配置信息以用来初始化变量或者参数的默认值、读取CSV文件数据、设置公共请求参数、赋予变量值等,以便后续取样器（Sampler）直接使用等，通常参数化也可以用配置元件来实现。
*   前置处理器(Pre Porcessors)：即预处理器，用于在实际取样器(Sampler)发出请求之前对即将发出的请求进行初始化的预处理。
*   取样器(Sampler)：通常用来模拟并发用户的操作，向待性能压测的对象发送请求以及接收相应的响应数据。取样器是Jmeter 性能压测的核心组件，通常情况下，如果需要完成一个性能测试场景，那么肯定是离不开取样器的。
*   逻辑控制器(Logic Controller)：通常用来控制采样器的执行顺序，同时也可以对Jmeter中的元件的执行逻辑进行控制，因为在做性能测试时，经常会遇到一些比较复杂的业务场景，那么就可以使用逻辑控制器来完成一些特定的比较复杂的业务逻辑处理。
*   后前置处理器(Post Porcessors)：用于在实际取样器(Sampler)发出请求之后对请求的响应结果进行后置处理。
*   断言(Assertions)：通常用于对取样器返回的结果做检查以判断返回的响应结果是否正确，用于判断某次性能测试的结果是否通过，等同于LoadRunner中的检查点功能。
*   监听器(Listener)：通常用来监听及展示JMeter取样器的执行结果,监听器支持以树、表及图形等形式展示当前正在压测的测试结果,也可以以文件方式保存测试结果,Jmeter支持XML、CSV等格式的来保存测试结果到指定的文件中，监听器通常是用于对性能测试的结果做统计分析以快速的发现性能压测中可能存在的性能问题。
*   定时器(Timer)：类似于LoadRunner中的思考时间（think time），用来设置线程的延迟和同步时间，通常是在每个取样器发出请求之前执行。

上面说的这些常见的组件，在启动了Jmeter后，可以通过如下图所示的方式来进行添加各个组件（元件）。**每周读书与学习是由清华大学出版社出版的《JMeter核心技术、性能测试与性能分析》一书的作者推出，分享作者多年的IT从业经历，希望对很多计算机科学技术IT类专业毕业生以及IT从业者有所帮助。**

Jmeter的默认界面展示的是英文效果，可以通过点击界面上的菜单Options-> Choose Lanuage来切换到中文显示，如下图所示。

切换完成后，就可以看到如下图所示的中文界面展示的效果了，中文界面通常更容易理解和操作Jmeter提供的菜单以及相关的功能。

为了方便大家学习Jmeter，在本书的后续讲解中，都将会使用中文的界面来对Jmeter进行深入讲解。

使用Jmeter 开始一个性能测试的主要步骤如下图所示，通常情况下线程组、取样器、断言、监听器是每个性能测试都必须有的元件，对于一些复杂的业务场景，可能需要用到更多的元件。

**4、JMeter的运行模式**

Jmeter 常用的运行模式主要包括GUI模式、命令行模式以及服务器模式，大多时候，直接运行jmeter.bat或者jmeter.sh时启动的就是GUI模式，jmeter.bat通常是在Windows 操作系统下自动GUI模式，而jmeter.sh通常用于在Linux或者UNIX操作系统下启动GUI模式。

_**1）、GUI模式**_

GUI 模式通常用于Jmeter性能测试脚本的编写，因为GUI模式会启动Jmeter的标准界面，Jmeter的使用者可以通过界面来进行操作，这样更直观和简单，在Windows操作系统中，GUI模式直接通过运行jmeter.bat这个批处理文件来启动，在jmeter.bat这个批处理文件中，定义了启动GUI模式的具体启动命令，主要包括Java JDK、JVM虚拟机参数以及需要运行的Jmeter的Jar包，启动的过程如下图所示。

**_2）、命令行模式_**

命令行模式通常是Jmeter 提供的用于做性能压测的模式，因为Jmeter是Java语言开发的，对于Java语言来说，GUI界面并不是其最擅长的，在高并发压测时，GUI界面通常容易卡死，所以在GUI模式中完成性能测试脚本编写后，建议在实际运行压测时，切换到命令行模式会更好，命令行模式顾名思义就是在Windows或者Linux/Unix操作系统中，直接通过运行jmeter命令来执行性能压测，命令行模式中支持的命令行参数如下：**每周读书与学习是由清华大学出版社出版的《JMeter核心技术、性能测试与性能分析》一书的作者推出，分享作者多年的IT从业经历，希望对很多计算机科学技术IT类专业毕业生以及IT从业者有所帮助。**

*   \-h, --help：输出命令行的所有帮助信息，如下图所示。

*   \-v, --version：输出Jmeter的版本信息。
*   \-p, --propfile <argument>：启动时指定jmeter的属性配置文件的路径。
*   \-q, --addprop <argument>：启动时添加额外的Jmeter的属性配置文件的路径。
*   \-t, --testfile <argument>：启动时指定要运行的Jmeter的测试计划的文件(.jmx)，在GUI模式下编写好的性能测试计划脚本，可以保存为.jmx后缀的文件。
*   \-l, --logfile <argument>：启动时指定Jmeter取样器日志的输出路径。
*   \-i, --jmeterlogconf <argument>：启动时指定Jmeter的日志配置文件的路径(默认会使用bin目录下log4j2.xml)。
*   \-j, --jmeterlogfile <argument>：启动时指定Jmeter日志的输出路径（默认会输出到bin目录下的jmeter.log中）。
*   \-n, --nongui：启动时以无GUI界面的模式运行，也就是启动时不会展示Jmeter的GUI界面。
*   \-s, --server：以Jmeter服务器的模式运行。
*   \-E, --proxyScheme <argument>：启动时增加设置代理服务器。
*   \-H, --proxyHost <argument>：启动时设置使用的代理服务器的IP或者域名。
*   \-P, --proxyPort <argument>：启动时设置使用的代理服务器的端口号。
*   \-N, --nonProxyHosts <argument>：启动时，设置哪些IP地址或者域名不需要走代理服务器进行代理。
*   \-u, --username <argument>：启动时，设置代理服务器的用户名。
*   \-a, --password <argument>：启动时，设置代理服务器的密码。
*   \-J, --jmeterproperty <argument>=<value>：启动时，以key-value的形式指定需要添加的Jmeter属性配置。
*   \-G, --globalproperty <argument>=<value>：启动时，以key-value的形式指定需要添加的Jmeter全局属性配置。
*   \-D, --systemproperty <argument>=<value>：启动时，以key-value的形式指定需要添加的系统属性配置。
*   \-S, --systemPropertyFile <argument>：启动时添加额外的系统属性配置文件的路径。
*   \-f, --forceDeleteResultFile：设置是否强制删除现有的已经存在的性能测试结果文件和web报告文件夹。
*   \-L, --loglevel <argument>=<value>：设置Jmeter中指定组件的日志输出级别，比如可以设置jmeter.util=DEBUG，因为jmeter.util是Jmeter中的一个组件名。
*   \-r, --runremote：启动时，设置需要启动的远程服务器的IP地址或者域名地址，这些需要启动的远程服务器地址需要被配置在Jmeter属性配置的remote\_hosts属性配置中。
*   \-R, --remotestart <argument>：启动时，设置需要启动的远程服务器的IP地址或者域名地址，如果使用了该参数，将会覆盖Jmeter属性配置的remote\_hosts属性配置中配置的需要远程启动的服务器地址。
*   \-d, --homedir <argument>：设置Jmeter运行时的主目录路径。
*   \-X, --remoteexit：设置测试结束时退出远程服务器，但是当前自己所在的GUI模式的界面不会退出。
*   \-g, --reportonly <argument>：设置性能测试时，仅通过测试结果文件来生成最终的测试报告仪表板。
*   \-e, --reportatendofloadtests：设置性能测试时，当负载测试结束后，生成测试报告仪表板。
*   \-o, --reportoutputfolder <argument>：设置性能测试时，生成的测试结果报告的输出文件夹路径。

_**3）、服务器模式**_

Jmeter的服务器模式通常用于Jmeter的分布式压测中，在性能测试中，当一台Jmeter压测机无法提供足够的并发用户时，就需要用多台压测机器同时来提供并发用户进行性能压测，如下图所示。

当出现这种场景时，就会用到Jmeter的服务器模式了，此时Jmeter 会存在多个工作节点，每个节点都会以服务器的模式启动，由于启动了多个服务器节点，那么肯定还需要一个Jmeter管理节点服务来管理这些工作节点，如下图所示。**每周读书与学习是由清华大学出版社出版的《JMeter核心技术、性能测试与性能分析》一书的作者推出，分享作者多年的IT从业经历，希望对很多计算机科学技术IT类专业毕业生以及IT从业者有所帮助。**

当需要进行分布式压测时，需要在每一台性能压测机中安装Jmeter，并且在每台性能压测机中修改Jmeter中的 jmeter.properties 属性配置文件，该文件位于Jmeter的bin目录中，在jmeter.properties 属性配置文件中，按照如下图所示的方式

*   设置remote\_hosts配置，在remote\_hosts中添加每一台Jmeter工作节点的IP地址，以逗号隔开。
*   设置server\_port，默认为1099，该端口用于当Jmeter以服务器模式启动时，会启动一个RMI服务端口，该端口用于启动RMI注册监听服务（即rmiregistry服务），RMI通讯时，会先连接到该端口上查找当前可用的Server端服务。
*   设置client.rmi.localport，该端口默认为0，表示让操作系统随机分配一个可用的端口，该端口用于和server\_port端口进行通信时，需要启动一个RMI本地服务通信端口，server\_port和client.rmi.localport都是用于RMI通信，如下图所示，RMI是Remote Method Invocation的简写，表示远程方法调用，是Java JDK在1.2版本中开始实现的一个基于Java语言实现的远程调用方法，RMI的出现，让Java语言有了分布式处理的能力。

在完成上述的设置后，如果Jmeter是部署在Windows操作系统中，可以运行jmeter-server.bat来启动Jmeter的服务器模式，如果Jmeter是部署在Liunx/Unix操作系统中，可以运行jmeter-server.sh来启动Jmeter的服务器模式。

在完成上述配置后，并且在每一台Jmeter的工作节点上以服务器模式运行Jmeter后，再在Jmeter的管理节点上以GUI模式启动Jmeter后，可以在Jmeter的GUI界面菜单的运行菜单下，看到远程启动，如下图所示，可以选择远程启动运行单台远程服务器来运行当前的性能测试计划，比如选择图中的server1\_ip来运行，也可以选择远程启动所有这个选项来在所有的远程服务器上来运行当前的性能测试计划。

**5、本次学习总结**

主要介绍Jmeter的基本信息、性能测试的发展历程、Jmeter的安装部署以及其主要的组成部分，通过本次的学习，建议读者们需要重点掌握：

*   如何在本地安装和部署Jmeter。
*   Jmeter的组成部分包含哪些？

通过完成本次的学习，读者们需要对Jmeter的相关概念有一个初步的了解和认识。

**出处**：本次学习的内容参考自**清华大学出版社出版的《JMeter核心技术、性能测试与性能分析》一书**

作者的原创文章，转载须注明出处。原创文章归作者所有，欢迎转载，但是保留版权。对于转载了博主的原创文章，不标注出处的，作者将依法追究版权，请尊重作者的成果。