---
layout: post
title: '一个昏暗的编程教室，电脑屏幕前坐着一位程序员（你），旁边站着一位好奇的朋友。'
date: "2026-02-03T00:58:39Z"
---
一个昏暗的编程教室，电脑屏幕前坐着一位程序员（你），旁边站着一位好奇的朋友。
======================================

可以先看视频：https://www.douyin.com/video/7602172380894563636

朋友：“嘿，伙计，你在干啥呢？这屏幕上一堆小球在动来动去的，是啥玩意儿？”

你（推了推眼镜）：“哦，这是冒泡排序的可视化程序。你知道冒泡排序吗？”

朋友：“听说过，但具体咋回事我不太清楚。”

你：“那我就给你讲讲。就像这些小球一样，它们一开始是乱序的，我们要把它们从小到大排好。”

朋友：“那怎么排呢？”

你：“很简单，就是两两比较，如果前面的比后面的大，就交换位置。就像这样——”

（你指着屏幕）

“你看，第一个红球和橙球比，发现红球大，于是它们交换位置；接着橙球和黄球比……”

朋友：“哦，有点像打牌时理牌的感觉。”

你：“对对对！就是这么个意思。每一轮下来，最大的那个数就会‘沉’到最后面，就像气泡往上冒一样，所以叫‘冒泡排序’。”

朋友：“那这些小球为啥会动啊？”

你：“因为我们用了C++精灵库，每个小球都是一个‘Sprite’对象，有颜色、大小、位置等属性。每次交换的时候，我们不仅换数据，还让它们的图像也跟着移动。”

朋友：“哇，还挺直观的。”

你：“是啊，而且你看上面还有文字提示，说现在是第几轮，最后还会显示‘演示完毕！’”

朋友：“那谁写的这个程序啊？”

你（得意地笑）：“我师祖——李兴球老师。他写了这个C++精灵库，方便我们做这种动画效果。”

朋友：“厉害啊！那我能不能也试试？”

你：“当然可以，代码都在这儿呢，你想改多少都行。”

* * *

#include "sprites.h"  //包含C++精灵库 
using namespace std;
Sprite rocket;      //建立角色叫rocket
struct Node{
   int value,x;  //值和坐标
   Sprite \*sp;
};
vector<Node \*> datas;
vector<string\> colors = {"red","orange","yellow","green",
                         "cyan","blue","purple","pink"};
void swap(int i,int j){   //交换两个节点
     Node \*a = datas\[i\];
     Node \*b = datas\[j\];   
     //交换a和b的x从标，并且到达自己的坐标    
     int tempx = a->x;
     a\->x = b->x;
     b\->x = tempx;
     a\->sp->go(a->x,0);
     b\->sp->go(b->x,0);
     //在datas中的位置也要交换
     Node \*temp ;   
     temp \= datas\[i\];
     datas\[i\] \= datas\[j\];
     datas\[j\] \= temp;     
}
int main(){        //主功能块 
   g\_screen->bgcolor("black");
   int n= randint(5,8);
   int x = 50\-100\*n/2;    //最左边节点坐标(起始)
   for(int i=0;i<n;i++){    //建立n个节点，放到datas中
      int v = randint(30,200);
      Node \*node = new Node;
      node\->value = v;
      node\->x = x;
      //按顺序选择索引为i的颜色，组合成角色的造型图片
      string s = "res/circle\_" + colors\[i\] + ".png";
      Sprite \*js = new Sprite(s); //新建角色，以s为造型
      js->scale(v/100.0);        //把角色缩小，要不然太大了
      js->penup();  js->go(x,0); js->speed(1); //定好起始位置
      node->sp = js;             //节点包含有角色指针
      datas.push\_back(node);      
      x \= x + 100;     //每个节点相差100个单位
   }
   Sprite pen{"blank"}; 
   pen.up().color(0).sety(300).write("冒泡排序算法可视化演示程序",50);
   pen.color(30).sety(230).write("作者：李兴球,采用C++精灵库",30);
   pen.color(60).sety(180).write("C++精灵库作者：李兴球",20);
   rocket.wait(1).color("yellow").penup().sety(130).hide();
   //真正的冒泡排序核心程序开始了
   for(int j=1;j<n;j++){  //排序的核心程序在这里
      string s = "第 " + to\_string(j) + " 轮";    
      //删除最早写的文字，然后写上新的文字，并且等待1秒  
      rocket.cleartxts(1).write(s,42).wait(1);
      for(int i=0;i<n-j;i++)   
         if(datas\[i\]->value > datas\[i+1\]->value ) //发现更大的，则交换
             swap(i,i+1);
      rocket.wait(1);
   }
   rocket.cleartxts(1).write("演示完毕！",42).done();     //完成了
   return 0;    //返回0
}