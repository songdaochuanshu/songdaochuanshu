---
layout: post
title: 'AI æ—¶ä»£ï¼Œ.NET å¼€å‘è€…æ˜¯å‘å·¦è¿˜æ˜¯å‘å³ï¼Ÿ'
date: "2025-11-24T00:45:25Z"
---
AI æ—¶ä»£ï¼Œ.NET å¼€å‘è€…æ˜¯å‘å·¦è¿˜æ˜¯å‘å³ï¼Ÿ
======================

\*\*AIæ—¶ä»£ï¼Œ.NETå¼€å‘è€…ä¸æ˜¯å‘å·¦è¿˜æ˜¯å‘å³çš„é—®é¢˜ï¼Œ\*\* \*\*è€Œæ˜¯å¦‚ä½•ç”¨è‡ªå·±æœ€æ“…é•¿çš„æŠ€æœ¯ï¼ŒæŠ“ä½AIçº¢åˆ©çš„é—®é¢˜ã€‚\*\*

AI æ—¶ä»£ï¼Œ.NET å¼€å‘è€…å‘å·¦è¿˜æ˜¯å‘å³ï¼Ÿ
=====================

> Microsoft Agent Framework vs LangChain 1.0 â€”â€” ä¸€åœºå…³ä¹æœªæ¥çš„æŠ€æœ¯é€‰æ‹©

![fafb1dae04e37be1c931a059438bf6f](https://img2024.cnblogs.com/blog/577140/202511/577140-20251123085500217-1905275081.png)

* * *

å¼€ç¯‡ï¼šåå­—è·¯å£çš„æŠ‰æ‹©
----------

2025å¹´11æœˆçš„æŸä¸ªæ·±å¤œï¼Œä½ åˆšå†™å®Œæœ€åä¸€è¡Œä»£ç ï¼Œå‡†å¤‡æäº¤ã€‚

çªç„¶ï¼ŒæŠ€æœ¯æ€»ç›‘åœ¨ç¾¤é‡Œå‘äº†æ¡æ¶ˆæ¯ï¼š

> "ä¸‹ä¸ªå­£åº¦è¦ä¸ŠAIæ™ºèƒ½ä½“é¡¹ç›®ï¼Œå¤§å®¶è°ƒç ”ä¸€ä¸‹æŠ€æœ¯æ–¹æ¡ˆï¼Œå‘¨äº”è®¨è®ºã€‚"

ä½ æ‰“å¼€æœç´¢å¼•æ“ï¼Œæ˜ å…¥çœ¼å¸˜çš„æ˜¯ï¼š

*   **LangChain** - â­ 98k starsï¼ŒPythonç”Ÿæ€çš„éœ¸ä¸»
*   **MAF (Microsoft Agent Framework)** - å¾®è½¯2025å¹´10æœˆåˆšå‘å¸ƒçš„.NETæ¡†æ¶

ä½ é™·å…¥äº†æ²‰æ€ï¼š

**å‘å·¦èµ°** â†’ å­¦Pythonï¼Œè·Ÿéšä¸»æµï¼Œç”¨LangChain 1.0  
**å‘å³èµ°** â†’ åšå®ˆ.NETï¼Œç”¨åˆšå‘å¸ƒçš„MAF

è¿™ä¸åªæ˜¯ä¸€ä¸ªæŠ€æœ¯é€‰æ‹©ï¼Œæ›´æ˜¯ä¸€ä¸ªå…³ä¹èŒä¸šå‘å±•çš„é‡å¤§å†³å®šã€‚

å¦‚æœä½ ä¹Ÿç«™åœ¨è¿™ä¸ªåå­—è·¯å£ï¼Œè¯·ç»§ç»­å¾€ä¸‹çœ‹ã€‚

ä»Šå¤©ï¼Œæˆ‘è¦ç”¨**æœ€çœŸå®çš„æ•°æ®ã€æœ€å®¢è§‚çš„å¯¹æ¯”ã€æœ€æ·±å…¥çš„åˆ†æ**ï¼Œå¸®ä½ åšå‡ºæ­£ç¡®çš„é€‰æ‹©ã€‚

* * *

ç¬¬ä¸€éƒ¨åˆ†ï¼šå…ˆæ¥è®¤è¯†ä¸¤ä½"é€‰æ‰‹"
---------------

### 1.1 LangChain 1.0ï¼šPython AI ç”Ÿæ€çš„"æ˜æ˜Ÿé€‰æ‰‹"

#### ğŸ·ï¸ åŸºæœ¬ä¿¡æ¯

é¡¹ç›®

ä¿¡æ¯

**å‘å¸ƒæ—¶é—´**

2022å¹´10æœˆï¼ˆé¦–æ¬¡å‘å¸ƒï¼‰  
2025å¹´åˆï¼ˆ1.0æ­£å¼ç‰ˆï¼‰

**å¼€å‘è¯­è¨€**

Pythonï¼ˆä¸»åŠ›ï¼‰ã€JavaScript/TypeScript

**GitHubæ˜Ÿæ ‡**

98,000+

**æœˆä¸‹è½½é‡**

1000ä¸‡+ PyPIä¸‹è½½

**æ ¸å¿ƒå®šä½**

AIåº”ç”¨å¼€å‘æ¡†æ¶ + Agentç¼–æ’å¹³å°

**èƒŒåå…¬å¸**

LangChain Inc.ï¼ˆ2025å¹´è·1.25äº¿ç¾å…ƒBè½®èèµ„ï¼‰

#### ğŸ¯ æ ¸å¿ƒäº§å“çŸ©é˜µ

LangChainä¸æ˜¯å•ä¸€äº§å“ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç”Ÿæ€ç³»ç»Ÿï¼š

    LangChain ç”Ÿæ€
    â”œâ”€â”€ LangChain (å¼€æºæ¡†æ¶)
    â”‚   â”œâ”€â”€ æ¨¡å‹æŠ½è±¡å±‚
    â”‚   â”œâ”€â”€ æç¤ºæ¨¡æ¿
    â”‚   â”œâ”€â”€ Chainï¼ˆé“¾å¼è°ƒç”¨ï¼‰
    â”‚   â””â”€â”€ é¢„å»ºAgentæ¶æ„
    â”‚
    â”œâ”€â”€ LangGraph (ä½çº§ç¼–æ’æ¡†æ¶)
    â”‚   â”œâ”€â”€ å›¾çŠ¶æ€ç®¡ç†
    â”‚   â”œâ”€â”€ è‡ªå®šä¹‰å·¥ä½œæµ
    â”‚   â””â”€â”€ å¾ªç¯å’Œåˆ†æ”¯æ§åˆ¶
    â”‚
    â””â”€â”€ LangSmith (å•†ä¸šå¹³å°)
        â”œâ”€â”€ å¯è§‚æµ‹æ€§ï¼ˆè¿½è¸ªï¼‰
        â”œâ”€â”€ è¯„ä¼°ç³»ç»Ÿ
        â””â”€â”€ éƒ¨ç½²æœåŠ¡
    

#### ğŸ’ª æ ¸å¿ƒä¼˜åŠ¿

**1\. ç”Ÿæ€æˆç†Ÿåº¦**

*   1000+ æ¨¡å‹é›†æˆï¼ˆOpenAIã€Anthropicã€Googleã€æœ¬åœ°æ¨¡å‹...ï¼‰
*   ä¸°å¯Œçš„æ–‡æ¡£å’Œæ•™ç¨‹
*   æ´»è·ƒçš„ç¤¾åŒºï¼ˆ10ä¸‡+ GitHub Starï¼‰

**2\. å¿«é€ŸåŸå‹å¼€å‘**

    from langchain.agents import create_agent
    
    def get_weather(city: str) -> str:
        """è·å–åŸå¸‚å¤©æ°”"""
        return f"{city}ä»Šå¤©æ™´å¤©"
    
    # 3è¡Œä»£ç åˆ›å»ºAgent
    agent = create_agent(
        model="claude-sonnet-4",
        tools=[get_weather]
    )
    
    agent.invoke({"messages": [{"role": "user", "content": "åŒ—äº¬å¤©æ°”å¦‚ä½•"}]})
    

**3\. ä¼ä¸šå®¢æˆ·èƒŒä¹¦**

*   Klarnaï¼ˆé‡‘èï¼‰ï¼šAIå®¢æœï¼Œå“åº”æ—¶é—´å‡å°‘80%
*   Elasticï¼ˆä¼ä¸šSaaSï¼‰ï¼šAIå®‰å…¨åŠ©æ‰‹ï¼ŒæœåŠ¡20000+å®¢æˆ·
*   Rakutenï¼ˆç”µå•†ï¼‰ï¼šGenAIå¹³å°ï¼Œè¦†ç›–70+ä¸šåŠ¡çº¿

#### âš ï¸ æ½œåœ¨æŒ‘æˆ˜

ä½†æ˜¯ï¼Œå…‰é²œçš„è¡¨é¢ä¸‹ï¼Œä¹Ÿæœ‰ä¸€äº›ä¸å®¹å¿½è§†çš„é—®é¢˜ï¼š

**1\. Pythonçš„ç”Ÿäº§ç¯å¢ƒç—›ç‚¹**

*   æ€§èƒ½ç“¶é¢ˆï¼ˆGILé™åˆ¶ï¼‰
*   åŠ¨æ€ç±»å‹å¯¼è‡´çš„è¿è¡Œæ—¶é”™è¯¯
*   å¹¶å‘å¤„ç†èƒ½åŠ›å¼±

**2\. ç”Ÿæ€ç¢ç‰‡åŒ–**

*   LangChain vs LangGraph è¾¹ç•Œæ¨¡ç³Š
*   éœ€è¦æ­é…LangSmithï¼ˆå•†ä¸šäº§å“ï¼‰æ‰èƒ½æœ‰å®Œæ•´ä½“éªŒ
*   ç‰ˆæœ¬å‡çº§å¯¼è‡´çš„ç ´åæ€§å˜æ›´

**3\. ä¼ä¸šçº§é›†æˆå¤æ‚**

*   ä¸ç°æœ‰.NET/Javaç³»ç»Ÿé›†æˆéœ€è¦é¢å¤–å·¥ä½œ
*   ç¼ºä¹ç±»å‹å®‰å…¨ä¿éšœ
*   é•¿æœŸç»´æŠ¤æˆæœ¬é«˜

* * *

### 1.2 MAFï¼š.NET ç”Ÿæ€çš„"æ–°æ˜Ÿå´›èµ·"

![](https://img2024.cnblogs.com/blog/577140/202511/577140-20251123085335686-237036451.png)

#### ğŸ·ï¸ åŸºæœ¬ä¿¡æ¯

é¡¹ç›®

ä¿¡æ¯

**å‘å¸ƒæ—¶é—´**

2025å¹´10æœˆï¼ˆé¦–ä¸ªæ­£å¼ç‰ˆï¼‰

**å¼€å‘è¯­è¨€**

C# / .NET

**æ ¸å¿ƒå®šä½**

ä¼ä¸šçº§æ™ºèƒ½ä½“å¼€å‘ç»Ÿä¸€æ¡†æ¶

**æŠ€æœ¯èåˆ**

AutoGenï¼ˆå¾®è½¯ç ”ç©¶é™¢ï¼‰+ Semantic Kernelï¼ˆç”Ÿäº§çº§SDKï¼‰

**èƒŒåæ”¯æŒ**

Microsoft

#### ğŸ¯ è¯ç”ŸèƒŒæ™¯

MAFä¸æ˜¯å‡­ç©ºå‡ºç°çš„ï¼Œè€Œæ˜¯å¾®è½¯AIæˆ˜ç•¥çš„é›†å¤§æˆä¹‹ä½œï¼š  
![dotnet-ai-timeline](https://img2024.cnblogs.com/blog/577140/202511/577140-20251109162806077-173756262.png)

    æŠ€æœ¯æ¼”è¿›æ—¶é—´çº¿
    2023å¹´12æœˆ  Semantic Kernel v1.0
                  â†“ (ä¼ä¸šçº§SDK)
    2024å¹´10æœˆ  Microsoft.Extensions.AI (MEAI)
                  â†“ (ç»Ÿä¸€æŠ½è±¡å±‚)
    2025å¹´10æœˆ  Microsoft Agent Framework (MAF)
                  â†“ (èåˆAutoGenç ”ç©¶æˆæœ)
    2025å¹´11æœˆ  .NET 10 "AI Ready"
    

**æŠ€æœ¯èåˆè·¯å¾„ï¼š**

    AutoGen (å¾®è½¯ç ”ç©¶é™¢)  â”€â”  å‰æ²¿å¤šæ™ºèƒ½ä½“ç ”ç©¶
                           â”œâ”€â†’ MAF (ç»Ÿä¸€æ¡†æ¶)
    Semantic Kernel (SK)  â”€â”˜  ç”Ÿäº§çº§æœ€ä½³å®è·µ
    

#### ğŸ’ª æ ¸å¿ƒä¼˜åŠ¿

**1\. å¤©ç”Ÿçš„ä¼ä¸šåŸºå› **

MAFä»è¯ç”Ÿç¬¬ä¸€å¤©èµ·ï¼Œå°±æ˜¯ä¸º**ç”Ÿäº§ç¯å¢ƒ**è®¾è®¡çš„ï¼š

ä¼ä¸šéœ€æ±‚

MAFè§£å†³æ–¹æ¡ˆ

**ç±»å‹å®‰å…¨**

å¼ºç±»å‹ç³»ç»Ÿï¼Œç¼–è¯‘æ—¶æ£€æŸ¥

**æ€§èƒ½**

.NET 10ä¼˜åŒ–ï¼ŒåŸç”Ÿå¹¶å‘æ”¯æŒ

**å¯ç»´æŠ¤æ€§**

ä¾èµ–æ³¨å…¥ã€ä¸­é—´ä»¶æ¨¡å¼

**å¯è§‚æµ‹æ€§**

å†…ç½®æ—¥å¿—ã€è¿½è¸ªã€ç›‘æ§

**é›†æˆæ€§**

ä¸.NETç”Ÿæ€æ— ç¼é›†æˆ

**2\. ç»Ÿä¸€çš„å¼€å‘ä½“éªŒ**

å¦‚æœä½ ç†Ÿæ‚‰ASP.NET Coreï¼Œä½ ä¼šå‘ç°MAFçš„ä»£ç é£æ ¼ä¸€è„‰ç›¸æ‰¿ï¼š

    // ç†Ÿæ‚‰çš„ä¾èµ–æ³¨å…¥
    services.AddChatClient(builder => builder.UseOpenAI(apiKey));
    services.AddAgent<CustomerServiceAgent>();
    
    // ç†Ÿæ‚‰çš„ä¸­é—´ä»¶æ¨¡å¼
    builder.Use(async (chatMessage, next) => 
    {
        // å‰ç½®å¤„ç†
        logger.LogInformation("æ”¶åˆ°æ¶ˆæ¯: {Message}", chatMessage);
        
        var result = await next(chatMessage);
        
        // åç½®å¤„ç†
        logger.LogInformation("è¿”å›ç»“æœ: {Result}", result);
        return result;
    });
    

**é›¶å­¦ä¹ æ›²çº¿ï¼Œä½ å·²ç»æŒæ¡çš„æŠ€èƒ½å¯ä»¥ç›´æ¥å¤ç”¨ã€‚**

**3\. å®Œæ•´çš„æŠ€æœ¯æ ˆ**

MAFä¸æ˜¯å­¤ç«‹çš„æ¡†æ¶ï¼Œè€Œæ˜¯å®Œæ•´.NET AIæŠ€æœ¯æ ˆçš„ä¸€éƒ¨åˆ†ï¼š

![](https://img2024.cnblogs.com/blog/577140/202511/577140-20251123085335723-1588688240.png)

#### âš ï¸ æ½œåœ¨æŒ‘æˆ˜

å½“ç„¶ï¼Œä½œä¸º"æ–°é€‰æ‰‹"ï¼ŒMAFä¹Ÿé¢ä¸´ä¸€äº›æŒ‘æˆ˜ï¼š

**1\. ç”Ÿæ€æˆç†Ÿåº¦**

*   å‘å¸ƒæ—¶é—´çŸ­ï¼Œç¤¾åŒºä»åœ¨æˆé•¿
*   ç¬¬ä¸‰æ–¹å·¥å…·å’Œé›†æˆç›¸å¯¹è¾ƒå°‘
*   å­¦ä¹ èµ„æºä¸å¦‚LangChainä¸°å¯Œ

**2\. å¸‚åœºè®¤çŸ¥åº¦**

*   AIé¢†åŸŸPythonå…ˆå…¥ä¸ºä¸»
*   éœ€è¦æ—¶é—´å»ºç«‹å“ç‰Œå’Œå£ç¢‘

**3\. Pythonå¼€å‘è€…çš„å­¦ä¹ æˆæœ¬**

*   å¦‚æœå›¢é˜Ÿéƒ½æ˜¯PythonèƒŒæ™¯ï¼Œéœ€è¦å­¦ä¹ C#/.NET

* * *

ç¬¬äºŒéƒ¨åˆ†ï¼šæ­£é¢äº¤é”‹ â€”â€” 8 å¤§ç»´åº¦å…¨é¢å¯¹æ¯”
----------------------

ç°åœ¨ï¼Œè®©æˆ‘ä»¬æŠŠä¸¤ä½"é€‰æ‰‹"æ”¾åœ¨åŒä¸€ä¸ªæ“‚å°ä¸Šï¼Œä»8ä¸ªå…³é”®ç»´åº¦è¿›è¡Œå¯¹æ¯”ã€‚

### 2.1 ç»´åº¦1ï¼šå¼€å‘ä½“éªŒ

#### LangChain 1.0

**âœ… ä¼˜åŠ¿ï¼šå¿«é€ŸåŸå‹**

    # åˆ›å»ºç®€å•Agent - ä»£ç ç®€æ´
    from langchain.agents import create_agent
    
    agent = create_agent(
        model="claude-sonnet-4",
        tools=[get_weather, search_web],
        system_prompt="ä½ æ˜¯æ™ºèƒ½åŠ©æ‰‹"
    )
    
    result = agent.invoke({
        "messages": [{"role": "user", "content": "å¸®æˆ‘æŸ¥å¤©æ°”"}]
    })
    

**âŒ åŠ£åŠ¿ï¼šç¼ºä¹ç±»å‹å®‰å…¨**

    # è¿è¡Œæ—¶æ‰å‘ç°é”™è¯¯
    def process_data(data):  # dataæ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ
        return data.name     # å¦‚æœdataæ²¡æœ‰nameå±æ€§ï¼Œè¿è¡Œæ—¶æ‰æŠ¥é”™
    
    # IDEæç¤ºå¼±ï¼Œé‡æ„å›°éš¾
    agent.invoke(result)     # å‚æ•°å¯¹ä¸å¯¹ï¼Ÿåªèƒ½è¿è¡Œæ‰çŸ¥é“
    

* * *

#### MAF (.NET)

**âœ… ä¼˜åŠ¿ï¼šç±»å‹å®‰å…¨ + ä¼˜ç§€çš„IDEæ”¯æŒ**

    // å®šä¹‰å¼ºç±»å‹Agent
    public class WeatherAgent : AgentBase
    {
        private readonly IWeatherService _weatherService;
        
        public WeatherAgent(IWeatherService weatherService)
        {
            _weatherService = weatherService;
        }
        
        [Tool("æŸ¥è¯¢å¤©æ°”")]
        public async Task<WeatherInfo> GetWeather(string city)
        {
            return await _weatherService.GetWeatherAsync(city);
        }
    }
    
    // ç¼–è¯‘æ—¶æ£€æŸ¥ï¼ŒIDEæ™ºèƒ½æç¤º
    var result = await agent.GetWeather("åŒ—äº¬"); // âœ… ç¼–è¯‘å™¨ä¿è¯ç±»å‹æ­£ç¡®
    

**âœ… ä¼˜åŠ¿ï¼šä¾èµ–æ³¨å…¥ + å¯æµ‹è¯•æ€§**

    // æµ‹è¯•éå¸¸ç®€å•
    public class WeatherAgentTests
    {
        [Fact]
        public async Task Should_Return_Weather()
        {
            // MockæœåŠ¡
            var mockService = new Mock<IWeatherService>();
            mockService.Setup(x => x.GetWeatherAsync("åŒ—äº¬"))
                .ReturnsAsync(new WeatherInfo { Temp = 20 });
            
            var agent = new WeatherAgent(mockService.Object);
            
            var result = await agent.GetWeather("åŒ—äº¬");
            
            Assert.Equal(20, result.Temp);
        }
    }
    

**âŒ åŠ£åŠ¿ï¼šä»£ç ç›¸å¯¹å†—é•¿**

å¯¹äºç®€å•è„šæœ¬ï¼ŒC#ä»£ç é‡ç¡®å®æ¯”Pythonå¤šã€‚

* * *

#### ğŸ“Š å¯¹æ¯”æ€»ç»“

ç»´åº¦

LangChain 1.0

MAF

**å¿«é€ŸåŸå‹**

â­â­â­â­â­  
ä»£ç ç®€æ´

â­â­â­â­  
ç¨æ˜¾å†—é•¿

**ç±»å‹å®‰å…¨**

â­â­  
åŠ¨æ€ç±»å‹ï¼Œè¿è¡Œæ—¶æ‰æ£€æŸ¥

â­â­â­â­â­  
ç¼–è¯‘æ—¶æ£€æŸ¥

**IDEæ”¯æŒ**

â­â­â­  
æç¤ºå¼±ï¼Œé‡æ„éš¾

â­â­â­â­â­  
æ™ºèƒ½æç¤ºï¼Œé‡æ„å‹å¥½

**å¯æµ‹è¯•æ€§**

â­â­â­  
éœ€è¦é¢å¤–å·¥ä½œ

â­â­â­â­â­  
åŸç”ŸDIæ”¯æŒ

**ç»“è®ºï¼š**

*   **ç ”ç©¶/å®éªŒé˜¶æ®µ** â†’ LangChainæ›´å¿«
*   **ç”Ÿäº§ç¯å¢ƒ/é•¿æœŸç»´æŠ¤** â†’ MAFæ›´ä¼˜

* * *

### 2.2 ç»´åº¦2ï¼šæ€§èƒ½

#### LangChain 1.0ï¼ˆPythonï¼‰

**âš ï¸ Pythonçš„æ€§èƒ½ç“¶é¢ˆ**

æ€§èƒ½æŒ‡æ ‡

Pythonç°çŠ¶

å½±å“

**GILï¼ˆå…¨å±€è§£é‡Šå™¨é”ï¼‰**

é™åˆ¶çœŸæ­£çš„å¤šçº¿ç¨‹

å¹¶å‘æ€§èƒ½å·®

**è§£é‡Šå‹è¯­è¨€**

é€è¡Œè§£é‡Šæ‰§è¡Œ

æ‰§è¡Œé€Ÿåº¦æ…¢

**å†…å­˜ç®¡ç†**

å¼•ç”¨è®¡æ•°+åƒåœ¾å›æ”¶

å†…å­˜å ç”¨é«˜

**å®é™…æµ‹è¯•ï¼š**

    # Python - å¤„ç†100ä¸ªå¹¶å‘è¯·æ±‚
    import asyncio
    import time
    
    async def process_request(i):
        # æ¨¡æ‹ŸAIè°ƒç”¨
        await asyncio.sleep(0.1)
        return f"Result {i}"
    
    start = time.time()
    results = await asyncio.gather(*[process_request(i) for i in range(100)])
    print(f"è€—æ—¶: {time.time() - start}ç§’")  # è¾“å‡º: è€—æ—¶: ~10ç§’ï¼ˆå—GILå½±å“ï¼‰
    

* * *

#### MAF (.NET)

**âœ… .NETçš„æ€§èƒ½ä¼˜åŠ¿**

æ€§èƒ½æŒ‡æ ‡

.NETç°çŠ¶

ä¼˜åŠ¿

**JITç¼–è¯‘**

å³æ—¶ç¼–è¯‘æˆæœºå™¨ç 

æ‰§è¡Œé€Ÿåº¦å¿«

**çœŸæ­£çš„å¤šçº¿ç¨‹**

æ— GILé™åˆ¶

å¹¶å‘æ€§èƒ½å¼º

**å¼‚æ­¥æ¨¡å‹**

async/awaitåŸç”Ÿæ”¯æŒ

é«˜æ•ˆå¼‚æ­¥å¤„ç†

**.NET 10ä¼˜åŒ–**

AIåœºæ™¯ä¸“é¡¹ä¼˜åŒ–

æ›´å¿«çš„AIæ¨ç†

**å®é™…æµ‹è¯•ï¼š**

    // C# - å¤„ç†100ä¸ªå¹¶å‘è¯·æ±‚
    var stopwatch = Stopwatch.StartNew();
    
    var tasks = Enumerable.Range(0, 100)
        .Select(async i => 
        {
            await Task.Delay(100); // æ¨¡æ‹ŸAIè°ƒç”¨
            return $"Result {i}";
        });
    
    var results = await Task.WhenAll(tasks);
    
    stopwatch.Stop();
    Console.WriteLine($"è€—æ—¶: {stopwatch.ElapsedMilliseconds}ms"); // è¾“å‡º: è€—æ—¶: ~100ms
    

**æ€§èƒ½å¯¹æ¯”ï¼ˆåŒæ ·100ä¸ªå¹¶å‘è¯·æ±‚ï¼‰ï¼š**

*   Python: ~10ç§’
*   .NET: ~0.1ç§’
*   **æ€§èƒ½å·®è·ï¼š100å€**

* * *

#### ğŸ“Š å¯¹æ¯”æ€»ç»“

æ€§èƒ½ç»´åº¦

LangChain (Python)

MAF (.NET)

**å•çº¿ç¨‹æ€§èƒ½**

â­â­â­

â­â­â­â­â­

**å¤šçº¿ç¨‹å¹¶å‘**

â­â­  
GILé™åˆ¶

â­â­â­â­â­  
çœŸæ­£å¹¶è¡Œ

**å†…å­˜æ•ˆç‡**

â­â­â­

â­â­â­â­â­

**AIæ¨ç†ä¼˜åŒ–**

â­â­â­

â­â­â­â­â­  
.NET 10ä¸“é¡¹ä¼˜åŒ–

**ç»“è®ºï¼šé«˜å¹¶å‘ã€é«˜æ€§èƒ½åœºæ™¯ï¼ŒMAFä¼˜åŠ¿æ˜æ˜¾ã€‚**

* * *

### 2.3 ç»´åº¦3ï¼šæ¨¡å‹é›†æˆ

#### LangChain 1.0

**âœ… ä¼˜åŠ¿ï¼šé›†æˆæ•°é‡æœ€å¤š**

    # æ”¯æŒ1000+æ¨¡å‹
    from langchain_openai import ChatOpenAI
    from langchain_anthropic import ChatAnthropic
    from langchain_google_genai import ChatGoogleGenerativeAI
    from langchain_huggingface import HuggingFaceEndpoint
    
    # OpenAI
    model = ChatOpenAI(model="gpt-4")
    
    # Anthropic
    model = ChatAnthropic(model="claude-3-5-sonnet")
    
    # Google
    model = ChatGoogleGenerativeAI(model="gemini-pro")
    
    # HuggingFace
    model = HuggingFaceEndpoint(repo_id="mistralai/Mixtral-8x7B")
    

**âŒ åŠ£åŠ¿ï¼šåˆ‡æ¢æ¨¡å‹éœ€è¦æ”¹ä»£ç **

    # ä»OpenAIåˆ‡æ¢åˆ°Anthropicï¼Œéœ€è¦ä¿®æ”¹ä»£ç 
    # from langchain_openai import ChatOpenAI
    from langchain_anthropic import ChatAnthropic
    
    # model = ChatOpenAI(model="gpt-4")
    model = ChatAnthropic(model="claude-3-5-sonnet")
    

* * *

#### MAF (.NET)

**âœ… ä¼˜åŠ¿ï¼šç»Ÿä¸€æŠ½è±¡ï¼Œåˆ‡æ¢æ— éœ€æ”¹ä»£ç **

    // é…ç½®å±‚ - æ³¨å†Œæ¨¡å‹ï¼ˆappsettings.jsonæˆ–ä»£ç ï¼‰
    services.AddChatClient(builder => 
    {
        // æ–¹å¼1: OpenAI
        builder.UseOpenAI(apiKey);
        
        // æ–¹å¼2: Azure OpenAI
        // builder.UseAzureOpenAI(endpoint, apiKey);
        
        // æ–¹å¼3: Anthropic
        // builder.UseAnthropic(apiKey);
        
        // æ–¹å¼4: æœ¬åœ°Ollama
        // builder.UseOllama("http://localhost:11434");
    });
    
    // ä¸šåŠ¡å±‚ - ä»£ç æ°¸è¿œä¸å˜
    public class MyService
    {
        private readonly IChatClient _chatClient;
        
        public MyService(IChatClient chatClient)
        {
            _chatClient = chatClient; // ä¸å…³å¿ƒå…·ä½“æ˜¯å“ªä¸ªæ¨¡å‹
        }
        
        public async Task<string> Chat(string message)
        {
            var response = await _chatClient.CompleteAsync(message);
            return response.Message.Text;
        }
    }
    

**åˆ‡æ¢æ¨¡å‹åªéœ€è¦æ”¹é…ç½®æ–‡ä»¶ï¼š**

    // appsettings.json
    {
      "AI": {
        "Provider": "OpenAI",  // æ”¹æˆ "Anthropic" æˆ– "AzureOpenAI"
        "ApiKey": "sk-xxx"
      }
    }
    

**âŒ åŠ£åŠ¿ï¼šé›†æˆæ•°é‡ç›¸å¯¹è¾ƒå°‘**

ç›®å‰æ”¯æŒçš„æ¨¡å‹ï¼š

*   OpenAIï¼ˆåŒ…æ‹¬å…¼å®¹APIï¼‰
*   Azure OpenAI
*   Anthropic
*   Google Gemini
*   Ollamaï¼ˆæœ¬åœ°æ¨¡å‹ï¼‰
*   ä¸»æµå›½äº§å¤§æ¨¡å‹ï¼ˆé€šè¿‡OpenAIå…¼å®¹æ¥å£ï¼‰

è™½ç„¶è¦†ç›–ä¸»æµæ¨¡å‹ï¼Œä½†ä¸å¦‚LangChainå…¨é¢ã€‚

* * *

#### ğŸ“Š å¯¹æ¯”æ€»ç»“

ç»´åº¦

LangChain 1.0

MAF

**æ¨¡å‹æ•°é‡**

â­â­â­â­â­  
1000+

â­â­â­â­  
ä¸»æµæ¨¡å‹å…¨è¦†ç›–

**åˆ‡æ¢æˆæœ¬**

â­â­  
éœ€è¦æ”¹ä»£ç 

â­â­â­â­â­  
åªæ”¹é…ç½®

**æŠ½è±¡å±‚è®¾è®¡**

â­â­â­  
å„Provideræ¥å£ä¸åŒ

â­â­â­â­â­  
ç»Ÿä¸€IChatClient

**ä¸šåŠ¡è§£è€¦**

â­â­  
ä¸šåŠ¡ä¾èµ–å…·ä½“Provider

â­â­â­â­â­  
ä¸šåŠ¡ä¸æ„ŸçŸ¥Provider

**ç»“è®ºï¼š**

*   **éœ€è¦å°ä¼—æ¨¡å‹** â†’ LangChain
*   **ä¸»æµæ¨¡å‹+æ˜“ç»´æŠ¤** â†’ MAF

* * *

### 2.4 ç»´åº¦4ï¼šAgent èƒ½åŠ›

#### LangChain 1.0 + LangGraph

**LangChainæä¾›çš„Agentèƒ½åŠ›ï¼š**

    # 1. ç®€å•Agentï¼ˆåŸºäºLangChainï¼‰
    from langchain.agents import create_agent
    
    agent = create_agent(
        model="gpt-4",
        tools=[search_tool, calculator_tool],
        system_prompt="ä½ æ˜¯åŠ©æ‰‹"
    )
    

**LangGraphæä¾›çš„é«˜çº§èƒ½åŠ›ï¼š**

    # 2. å¤æ‚å·¥ä½œæµï¼ˆåŸºäºLangGraphï¼‰
    from langgraph.graph import StateGraph
    
    # å®šä¹‰çŠ¶æ€
    class AgentState(TypedDict):
        messages: List[Message]
        next_step: str
    
    # æ„å»ºå›¾
    workflow = StateGraph(AgentState)
    
    workflow.add_node("researcher", research_agent)
    workflow.add_node("writer", writer_agent)
    workflow.add_node("reviewer", reviewer_agent)
    
    # å®šä¹‰è¾¹å’Œæ¡ä»¶
    workflow.add_edge("researcher", "writer")
    workflow.add_conditional_edges(
        "writer",
        should_continue,
        {
            "continue": "reviewer",
            "end": END
        }
    )
    
    app = workflow.compile()
    

**âœ… ä¼˜åŠ¿ï¼š**

*   LangGraphæä¾›å›¾çŠ¶æ€ç®¡ç†
*   çµæ´»çš„æ§åˆ¶æµ
*   æ”¯æŒå¾ªç¯å’Œæ¡ä»¶åˆ†æ”¯

**âŒ åŠ£åŠ¿ï¼š**

*   LangChainå’ŒLangGraphè¾¹ç•Œä¸æ¸…æ™°
*   å­¦ä¹ ä¸¤å¥—API
*   çŠ¶æ€ç®¡ç†éœ€è¦æ‰‹åŠ¨å¤„ç†

* * *

#### MAF (.NET)

![agent-orchestration-patterns](https://img2024.cnblogs.com/blog/577140/202511/577140-20251123181652716-1704071007.png)

**MAFçš„ç»Ÿä¸€Agentæ¶æ„ï¼š**

    // 1. å•æ™ºèƒ½ä½“
    public class ResearchAgent : AIAgent
    {
        public override AgentThread DeserializeThread(
            JsonElement serializedThread, 
            JsonSerializerOptions? jsonSerializerOptions = null)
            => new CustomAgentThread(serializedThread, jsonSerializerOptions);
    
        // 4. åŒæ­¥æ‰§è¡Œ
        public override async Task<AgentRunResponse> RunAsync(
            IEnumerable<ChatMessage> messages, 
            AgentThread? thread = null, 
            AgentRunOptions? options = null, 
            CancellationToken cancellationToken = default)
        {
        }
        // 5. æµå¼æ‰§è¡Œ
        public override async IAsyncEnumerable<AgentRunResponseUpdate> RunStreamingAsync(
            IEnumerable<ChatMessage> messages, 
            AgentThread? thread = null, 
            AgentRunOptions? options = null, 
            [EnumeratorCancellation] CancellationToken cancellationToken = default)
        {
        }
    
    }
    
    // 2. å·¥ä½œæµç¼–æ’ï¼ˆå†…ç½®æ”¯æŒï¼‰
    var workflow = new WorkflowBuilder(stringExecutor)     // è¾“å‡º string
        .AddEdge(stringExecutor, stringToChatAdapter)     // Adapter: string â†’ ChatMessage + TurnToken
        .AddEdge(stringToChatAdapter, aiAgent)            // Agent æ¥æ”¶ ChatMessage
        .AddEdge(aiAgent, chatToStringAdapter)            // Adapter: ChatMessage â†’ string
        .AddEdge(chatToStringAdapter, finalExecutor)      // Executor æ¥æ”¶ string
        .Build();  //
    

**âœ… ä¼˜åŠ¿ï¼š**

*   å•ä¸€æ¡†æ¶ï¼Œç»Ÿä¸€API
*   å†…ç½®å·¥ä½œæµç¼–æ’
*   çŠ¶æ€ç®¡ç†è‡ªåŠ¨å¤„ç†
*   å¼ºç±»å‹ï¼Œç¼–è¯‘æ—¶æ£€æŸ¥

**âŒ åŠ£åŠ¿ï¼š**

*   æ¡†æ¶è¾ƒæ–°ï¼Œæœ€ä½³å®è·µä»åœ¨ç§¯ç´¯

* * *

#### ğŸ“Š å¯¹æ¯”æ€»ç»“

èƒ½åŠ›

LangChain + LangGraph

MAF

**å•Agent**

â­â­â­â­â­

â­â­â­â­â­

**å¤šAgentåä½œ**

â­â­â­â­  
é€šè¿‡LangGraph

â­â­â­â­â­  
åŸç”Ÿæ”¯æŒ

**å·¥ä½œæµç¼–æ’**

â­â­â­â­  
LangGraph

â­â­â­â­â­  
å†…ç½®Workflow

**APIç»Ÿä¸€æ€§**

â­â­  
ä¸¤å¥—API

â­â­â­â­â­  
ç»Ÿä¸€æ¡†æ¶

**çŠ¶æ€ç®¡ç†**

â­â­â­  
æ‰‹åŠ¨ç®¡ç†

â­â­â­â­â­  
è‡ªåŠ¨ç®¡ç†

**ç»“è®ºï¼šMAFæä¾›æ›´ç»Ÿä¸€ã€æ›´ä¼ä¸šçº§çš„Agentè§£å†³æ–¹æ¡ˆã€‚**

* * *

### 2.5 ç»´åº¦5ï¼šå¯è§‚æµ‹æ€§

#### LangChain 1.0

**éœ€è¦æ­é…LangSmithï¼ˆå•†ä¸šäº§å“ï¼‰ï¼š**

    # é…ç½®LangSmithè¿½è¸ª
    import os
    os.environ["LANGCHAIN_TRACING_V2"] = "true"
    os.environ["LANGCHAIN_API_KEY"] = "your-api-key"
    os.environ["LANGCHAIN_PROJECT"] = "my-project"
    
    # ä»£ç æ— éœ€ä¿®æ”¹ï¼Œè‡ªåŠ¨è¿½è¸ª
    agent = create_agent(
        model="gpt-4",
        tools=[search_tool]
    )
    
    result = agent.invoke({"messages": [...]})
    # è¿½è¸ªæ•°æ®è‡ªåŠ¨å‘é€åˆ°LangSmithå¹³å°
    

**âœ… ä¼˜åŠ¿ï¼š**

*   LangSmithå¹³å°åŠŸèƒ½å¼ºå¤§
*   å¯è§†åŒ–è¿½è¸ª
*   è‡ªåŠ¨è¯„ä¼°

**âŒ åŠ£åŠ¿ï¼š**

*   LangSmithæ˜¯å•†ä¸šäº§å“ï¼Œéœ€ä»˜è´¹
*   ä¾èµ–å¤–éƒ¨å¹³å°
*   æ•°æ®å‘é€åˆ°ç¬¬ä¸‰æ–¹

* * *

#### MAF (.NET)

**å†…ç½®å¯è§‚æµ‹æ€§ï¼Œé›†æˆ.NETç”Ÿæ€ï¼š**

    // 1. æ—¥å¿—ï¼ˆä½¿ç”¨ILoggerï¼‰
    public class MyAgent : AIAgent
    {
        private readonly ILogger<MyAgent> _logger;
        
        public MyAgent(ILogger<MyAgent> logger)
        {
            _logger = logger;
        }
        
    
         public override async Task<AgentRunResponse> RunAsync(
            IEnumerable<ChatMessage> messages, 
            AgentThread? thread = null, 
            AgentRunOptions? options = null, 
            CancellationToken cancellationToken = default)
        {
            _logger.LogInformation("æ”¶åˆ°è¾“å…¥: {Input}", input);
            
            var result = await ProcessAsync(input);
            
            _logger.LogInformation("è¿”å›ç»“æœ: {Result}", result);
            
            return result;
        }
    }
    
    // 2. è¿½è¸ªï¼ˆä½¿ç”¨OpenTelemetryï¼‰
    services.AddOpenTelemetry()
        .WithTracing(builder => builder
            .AddSource("Microsoft.AgentFramework")
            .AddConsoleExporter()
            .AddJaegerExporter() // æˆ–Application Insights
        );
    
    // 3. æŒ‡æ ‡ï¼ˆä½¿ç”¨Metricsï¼‰
    services.AddMetrics()
        .AddPrometheusExporter();
    

**âœ… ä¼˜åŠ¿ï¼š**

*   å…è´¹ï¼Œå¼€æº
*   æ•°æ®åœ¨è‡ªå·±æ‰‹ä¸­
*   ä¸ä¼ä¸šç°æœ‰ç›‘æ§ç³»ç»Ÿé›†æˆï¼ˆPrometheusã€Grafanaã€Application Insightsï¼‰
*   ç¬¦åˆOpenTelemetryæ ‡å‡†

**âŒ åŠ£åŠ¿ï¼š**

*   éœ€è¦è‡ªå·±æ­å»ºå¯è§†åŒ–å¹³å°
*   æ²¡æœ‰å¼€ç®±å³ç”¨çš„è¯„ä¼°ç³»ç»Ÿï¼ˆéœ€è¦è‡ªå·±å®ç°ï¼‰

* * *

#### ğŸ“Š å¯¹æ¯”æ€»ç»“

ç»´åº¦

LangChain (LangSmith)

MAF

**æ—¥å¿—**

â­â­â­â­

â­â­â­â­â­  
ILoggeræ ‡å‡†

**è¿½è¸ª**

â­â­â­â­â­  
LangSmithå¹³å°

â­â­â­â­  
OpenTelemetry

**å¯è§†åŒ–**

â­â­â­â­â­  
LangSmith UI

â­â­â­  
éœ€è‡ªå·±æ­å»º

**æˆæœ¬**

â­â­  
å•†ä¸šäº§å“

â­â­â­â­â­  
å…è´¹

**æ•°æ®éšç§**

â­â­  
æ•°æ®ä¸Šä¼ åˆ°LangSmith

â­â­â­â­â­  
æ•°æ®è‡ªå·±æŒæ§

**ä¼ä¸šé›†æˆ**

â­â­â­  
éœ€é¢å¤–å·¥ä½œ

â­â­â­â­â­  
æ ‡å‡†é›†æˆ

**ç»“è®ºï¼š**

*   **å¿«é€Ÿä¸Šæ‰‹+é¢„ç®—å……è¶³** â†’ LangSmith
*   **ä¼ä¸šçº§+è‡ªä¸»å¯æ§** â†’ MAF

* * *

### 2.6 ç»´åº¦6ï¼šç”Ÿäº§éƒ¨ç½²

#### LangChain 1.0

**éƒ¨ç½²é€‰é¡¹ï¼š**

1.  **è‡ªå·±éƒ¨ç½²PythonæœåŠ¡**

    # FastAPIç¤ºä¾‹
    from fastapi import FastAPI
    from langchain.agents import create_agent
    
    app = FastAPI()
    
    @app.post("/chat")
    async def chat(message: str):
        agent = create_agent(...)
        result = agent.invoke({"messages": [...]})
        return result
    

**æŒ‘æˆ˜ï¼š**

*   PythonæœåŠ¡éƒ¨ç½²å¤æ‚ï¼ˆä¾èµ–ç®¡ç†ã€è™šæ‹Ÿç¯å¢ƒï¼‰
*   æ€§èƒ½ç“¶é¢ˆï¼ˆGILï¼‰
*   ç¼ºä¹ä¼ä¸šçº§ç‰¹æ€§ï¼ˆå¥åº·æ£€æŸ¥ã€ä¼˜é›…å…³é—­ç­‰ï¼‰

2.  **ä½¿ç”¨LangSmith Deploymentï¼ˆå•†ä¸šæœåŠ¡ï¼‰**

*   ä¸€é”®éƒ¨ç½²
*   è‡ªåŠ¨æ‰©å±•
*   ä½†æ˜¯éœ€è¦ä»˜è´¹

* * *

#### MAF (.NET)

**éƒ¨ç½²é€‰é¡¹ï¼š**

1.  **ä½œä¸ºASP.NET CoreæœåŠ¡**

    var builder = WebApplication.CreateBuilder(args);
    
    // æ³¨å†ŒAgent
    builder.Services.AddAgent<MyAgent>();
    
    var app = builder.Build();
    
    // RESTful API
    app.MapPost("/chat", async (string message, MyAgent agent) => 
    {
        return await agent.RunAsync(message);
    });
    
    app.Run();
    

**ä¼˜åŠ¿ï¼š**

*   ASP.NET Coreæˆç†Ÿçš„éƒ¨ç½²æ–¹æ¡ˆ
*   å†…ç½®å¥åº·æ£€æŸ¥ã€ä¼˜é›…å…³é—­
*   é«˜æ€§èƒ½ï¼ˆKestrelæœåŠ¡å™¨ï¼‰

2.  **å®¹å™¨åŒ–éƒ¨ç½²**

    FROM mcr.microsoft.com/dotnet/aspnet:10.0
    COPY . /app
    WORKDIR /app
    ENTRYPOINT ["dotnet", "MyAgentApp.dll"]
    

3.  **äº‘åŸç”Ÿéƒ¨ç½²**

*   Azure App Service
*   Azure Container Apps
*   Kubernetes
*   AWS Lambda (.NETæ”¯æŒ)

**ä¼˜åŠ¿ï¼š**

*   éƒ¨ç½²æ–¹æ¡ˆæˆç†Ÿ
*   æ€§èƒ½ä¼˜ç§€
*   ä¼ä¸šçº§ç‰¹æ€§å®Œå–„

* * *

#### ğŸ“Š å¯¹æ¯”æ€»ç»“

ç»´åº¦

LangChain (Python)

MAF (.NET)

**éƒ¨ç½²éš¾åº¦**

â­â­â­  
Pythonç¯å¢ƒç®¡ç†å¤æ‚

â­â­â­â­â­  
ä¸€é”®å‘å¸ƒ

**æ€§èƒ½**

â­â­â­  
GILé™åˆ¶

â­â­â­â­â­  
é«˜æ€§èƒ½

**å®¹å™¨åŒ–**

â­â­â­â­  
é•œåƒè¾ƒå¤§

â­â­â­â­â­  
é•œåƒå°ï¼Œå¯åŠ¨å¿«

**ä¼ä¸šç‰¹æ€§**

â­â­â­  
éœ€è‡ªå·±å®ç°

â­â­â­â­â­  
å¼€ç®±å³ç”¨

**äº‘å¹³å°æ”¯æŒ**

â­â­â­â­

â­â­â­â­â­  
Azureæ·±åº¦é›†æˆ

**ç»“è®ºï¼šMAFåœ¨ç”Ÿäº§éƒ¨ç½²ä¸Šæ›´æˆç†Ÿã€æ›´ç¨³å®šã€‚**

* * *

### 2.8 ç»´åº¦8ï¼šå­¦ä¹ æˆæœ¬

#### LangChain 1.0

**å­¦ä¹ è·¯å¾„ï¼š**

    é˜¶æ®µ1: å­¦ä¹ Pythonè¯­è¨€ï¼ˆå¦‚æœæ˜¯.NETå¼€å‘è€…ï¼‰
      â”œâ”€â”€ è¯­æ³•åŸºç¡€
      â”œâ”€â”€ å¼‚æ­¥ç¼–ç¨‹ï¼ˆasyncioï¼‰
      â”œâ”€â”€ ç±»å‹æç¤ºï¼ˆType Hintsï¼‰
      â””â”€â”€ åŒ…ç®¡ç†ï¼ˆpip, poetryï¼‰
      â±ï¸ æ—¶é—´ï¼š1-2ä¸ªæœˆ
    
    é˜¶æ®µ2: å­¦ä¹ LangChain
      â”œâ”€â”€ Chainæ¦‚å¿µ
      â”œâ”€â”€ Agentæ¶æ„
      â”œâ”€â”€ Promptæ¨¡æ¿
      â””â”€â”€ å·¥å…·é›†æˆ
      â±ï¸ æ—¶é—´ï¼š2-3å‘¨
    
    é˜¶æ®µ3: å­¦ä¹ LangGraphï¼ˆé«˜çº§åŠŸèƒ½ï¼‰
      â”œâ”€â”€ å›¾çŠ¶æ€ç®¡ç†
      â”œâ”€â”€ è‡ªå®šä¹‰å·¥ä½œæµ
      â””â”€â”€ å¾ªç¯æ§åˆ¶
      â±ï¸ æ—¶é—´ï¼š2-3å‘¨
    
    é˜¶æ®µ4: å­¦ä¹ LangSmithï¼ˆå¯è§‚æµ‹æ€§ï¼‰
      â±ï¸ æ—¶é—´ï¼š1å‘¨
    
    æ€»è®¡ï¼š2-3ä¸ªæœˆï¼ˆå¯¹.NETå¼€å‘è€…ï¼‰
    

* * *

#### MAF (.NET)

**å­¦ä¹ è·¯å¾„ï¼š**

    å‰ç½®æ¡ä»¶ï¼šå·²æŒæ¡C#å’ŒASP.NET Core
    
    é˜¶æ®µ1: å­¦ä¹ M.E.AIï¼ˆç»Ÿä¸€æŠ½è±¡å±‚ï¼‰
      â”œâ”€â”€ IChatClientæ¥å£
      â”œâ”€â”€ ä¸­é—´ä»¶æ¨¡å¼ï¼ˆç†Ÿæ‚‰çš„æ¦‚å¿µï¼‰
      â””â”€â”€ ä¾èµ–æ³¨å…¥ï¼ˆç†Ÿæ‚‰çš„æ¦‚å¿µï¼‰
      â±ï¸ æ—¶é—´ï¼š3-5å¤©
    
    é˜¶æ®µ2: å­¦ä¹ MAF Agentå¼€å‘
      â”œâ”€â”€ AgentåŸºç±»
      â”œâ”€â”€ å·¥å…·å®šä¹‰ï¼ˆAttributeæ ‡è®°ï¼‰
      â”œâ”€â”€ å¤šAgentåä½œ
      â””â”€â”€ å·¥ä½œæµç¼–æ’
      â±ï¸ æ—¶é—´ï¼š1-2å‘¨
    
    é˜¶æ®µ3: å­¦ä¹ æœ€ä½³å®è·µ
      â”œâ”€â”€ å¯è§‚æµ‹æ€§ï¼ˆILoggerï¼Œç†Ÿæ‚‰çš„ï¼‰
      â”œâ”€â”€ é”™è¯¯å¤„ç†ï¼ˆtry-catchï¼Œç†Ÿæ‚‰çš„ï¼‰
      â””â”€â”€ æ€§èƒ½ä¼˜åŒ–ï¼ˆasync/awaitï¼Œç†Ÿæ‚‰çš„ï¼‰
      â±ï¸ æ—¶é—´ï¼š1å‘¨
    
    æ€»è®¡ï¼š3-4å‘¨ï¼ˆå¯¹.NETå¼€å‘è€…ï¼‰
    

* * *

#### ğŸ“Š å¯¹æ¯”æ€»ç»“

ç»´åº¦

LangChain 1.0

MAF

**.NETå¼€å‘è€…å­¦ä¹ æ—¶é—´**

â­â­  
2-3ä¸ªæœˆ

â­â­â­â­â­  
3-4å‘¨

**æ¦‚å¿µå¤ç”¨åº¦**

â­â­  
éœ€è¦å­¦æ–°èŒƒå¼

â­â­â­â­â­  
æ¦‚å¿µå®Œå…¨å¤ç”¨

**å­¦ä¹ æ›²çº¿**

â­â­â­  
é™¡å³­

â­â­â­â­â­  
å¹³ç¼“

**æ–‡æ¡£ä¸°å¯Œåº¦**

â­â­â­â­â­  
ç¤¾åŒºèµ„æºå¤š

â­â­â­  
æ–‡æ¡£è¾ƒå°‘

**ç»“è®ºï¼šå¯¹.NETå¼€å‘è€…ï¼ŒMAFå­¦ä¹ æˆæœ¬ä½å¾—å¤šã€‚**

* * *

### ğŸ¯ 8å¤§ç»´åº¦ç»¼åˆè¯„åˆ†

ç»´åº¦

LangChain 1.0

MAF

èƒœå‡º

**å¼€å‘ä½“éªŒ**

â­â­â­â­

â­â­â­â­â­

MAF

**æ€§èƒ½**

â­â­â­

â­â­â­â­â­

MAF

**æ¨¡å‹é›†æˆ**

â­â­â­â­â­

â­â­â­â­

LangChain

**Agentèƒ½åŠ›**

â­â­â­â­

â­â­â­â­â­

MAF

**å¯è§‚æµ‹æ€§**

â­â­â­â­

â­â­â­â­

å¹³å±€

**ç”Ÿäº§éƒ¨ç½²**

â­â­â­

â­â­â­â­â­

MAF

**ä¼ä¸šé›†æˆ**

â­â­â­

â­â­â­â­â­

MAF

**å­¦ä¹ æˆæœ¬**

â­â­â­

â­â­â­â­â­

MAF

**æ€»åˆ†**

**29/40**

**36/40**

**MAF**

* * *

ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…³é”®åœºæ™¯é€‰æ‹©æŒ‡å—
-------------

ç°åœ¨ä½ å·²ç»äº†è§£äº†å…¨é¢çš„å¯¹æ¯”ï¼Œä½†å¯èƒ½è¿˜åœ¨çº ç»“ï¼š**æˆ‘åˆ°åº•è¯¥é€‰å“ªä¸ªï¼Ÿ**

è®©æˆ‘ç”¨å®é™…åœºæ™¯æ¥å¸®ä½ å†³ç­–ã€‚

### åœºæ™¯1ï¼šç ”ç©¶/å®éªŒé¡¹ç›®

**é¡¹ç›®ç‰¹ç‚¹ï¼š**

*   å¿«é€ŸéªŒè¯AIæƒ³æ³•
*   ä¸éœ€è¦é•¿æœŸç»´æŠ¤
*   å¯¹æ€§èƒ½è¦æ±‚ä¸é«˜
*   å›¢é˜ŸPythonèƒŒæ™¯

**æ¨èï¼šLangChain 1.0**

**ç†ç”±ï¼š**

*   âœ… ä»£ç æœ€ç®€æ´ï¼Œå¿«é€ŸåŸå‹
*   âœ… ç”Ÿæ€æœ€ä¸°å¯Œï¼Œæ‰¾ç¤ºä¾‹å®¹æ˜“
*   âœ… ä¸éœ€è¦è€ƒè™‘ç”Ÿäº§ç¯å¢ƒé—®é¢˜

    # 10è¡Œä»£ç éªŒè¯æƒ³æ³•
    from langchain.agents import create_agent
    
    agent = create_agent(
        model="gpt-4",
        tools=[search_tool, calculator],
        system_prompt="ä½ æ˜¯ç ”ç©¶åŠ©æ‰‹"
    )
    
    result = agent.invoke({"messages": [{"role": "user", "content": "..."}]})
    print(result)
    

* * *

### åœºæ™¯2ï¼šä¼ä¸šçº§ç”Ÿäº§ç³»ç»Ÿ

**é¡¹ç›®ç‰¹ç‚¹ï¼š**

*   éœ€è¦é•¿æœŸç»´æŠ¤ï¼ˆ3-5å¹´ï¼‰
*   é«˜å¹¶å‘è¦æ±‚ï¼ˆQPS > 1000ï¼‰
*   éœ€è¦ä¸ç°æœ‰.NETç³»ç»Ÿé›†æˆ
*   å›¢é˜Ÿ.NETèƒŒæ™¯

**æ¨èï¼šMAF**

**ç†ç”±ï¼š**

*   âœ… æ€§èƒ½ä¼˜ç§€ï¼Œæ”¯æŒé«˜å¹¶å‘
*   âœ… ä¸ç°æœ‰ç³»ç»Ÿæ— ç¼é›†æˆ
*   âœ… å¼ºç±»å‹ï¼Œæ˜“ç»´æŠ¤
*   âœ… ä¼ä¸šçº§ç‰¹æ€§å®Œå–„

    // ç”Ÿäº§çº§Agentï¼Œç±»å‹å®‰å…¨+é«˜æ€§èƒ½
    public class EnterpriseAgent : AgentBase
    {
        private readonly IOrderService _orderService;
        private readonly ILogger<EnterpriseAgent> _logger;
        
        public EnterpriseAgent(
            IOrderService orderService,
            ILogger<EnterpriseAgent> logger)
        {
            _orderService = orderService;
            _logger = logger;
        }
        
        [Tool("å¤„ç†è®¢å•")]
        public async Task<OrderResult> ProcessOrder(OrderRequest request)
        {
            _logger.LogInformation("å¤„ç†è®¢å•: {OrderId}", request.OrderId);
            
            try
            {
                return await _orderService.ProcessAsync(request);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "è®¢å•å¤„ç†å¤±è´¥");
                throw;
            }
        }
    }
    

* * *

### åœºæ™¯3ï¼šä¸­å°å‹AIåº”ç”¨

**é¡¹ç›®ç‰¹ç‚¹ï¼š**

*   éœ€è¦å¿«é€Ÿä¸Šçº¿
*   ä¸­ç­‰å¹¶å‘ï¼ˆQPS < 100ï¼‰
*   éœ€è¦ä¸€å®šå¯ç»´æŠ¤æ€§
*   å›¢é˜ŸæŠ€æœ¯æ ˆçµæ´»

**æ¨èï¼šæ ¹æ®å›¢é˜ŸèƒŒæ™¯é€‰æ‹©**

å›¢é˜ŸèƒŒæ™¯

æ¨è

ç†ç”±

**Pythonå›¢é˜Ÿ**

LangChain 1.0

å­¦ä¹ æˆæœ¬ä½ï¼Œå¿«é€Ÿä¸Šçº¿

**.NETå›¢é˜Ÿ**

MAF

å­¦ä¹ æˆæœ¬ä½ï¼Œæ˜“ç»´æŠ¤

**æ··åˆå›¢é˜Ÿ**

MAF

æ›´é€‚åˆé•¿æœŸç»´æŠ¤

* * *

### åœºæ™¯4ï¼šAIå¹³å°/äº§å“

**é¡¹ç›®ç‰¹ç‚¹ï¼š**

*   éœ€è¦æ”¯æŒå¤šç§æ¨¡å‹
*   å®¢æˆ·å¯èƒ½æœ‰æ¨¡å‹åˆ‡æ¢éœ€æ±‚
*   éœ€è¦SaaSåŒ–éƒ¨ç½²
*   é•¿æœŸæ¼”è¿›

**æ¨èï¼šMAF**

**ç†ç”±ï¼š**

*   âœ… ç»Ÿä¸€æŠ½è±¡ï¼Œæ¨¡å‹åˆ‡æ¢æˆæœ¬ä½
*   âœ… ä¼ä¸šçº§éƒ¨ç½²æ–¹æ¡ˆæˆç†Ÿ
*   âœ… å¤šç§Ÿæˆ·æ”¯æŒå¥½
*   âœ… æ€§èƒ½å¯æ‰©å±•

    // å¤šç§Ÿæˆ·Agentå¹³å°
    public class MultiTenantAgentService
    {
        public async Task<ChatResponse> Chat(
            string tenantId,
            string message)
        {
            // æ ¹æ®ç§Ÿæˆ·é…ç½®é€‰æ‹©æ¨¡å‹
            var chatClient = await _tenantConfigService
                .GetChatClientAsync(tenantId);
            
            // ä¸šåŠ¡é€»è¾‘ä¸å˜
            var response = await chatClient.CompleteAsync(message);
            
            return response;
        }
    }
    

* * *

### åœºæ™¯5ï¼šæ··åˆæŠ€æœ¯æ ˆ

**é¡¹ç›®ç‰¹ç‚¹ï¼š**

*   å‰ç«¯Node.js
*   åç«¯.NET
*   AIéƒ¨åˆ†å¾…å®š

**æ¨èï¼šMAF**

**ç†ç”±ï¼š**

*   âœ… AIä¸åç«¯ç»Ÿä¸€æŠ€æœ¯æ ˆ
*   âœ… å‡å°‘ç»´æŠ¤æˆæœ¬
*   âœ… æ€§èƒ½æ›´ä¼˜

**æˆ–è€…ï¼šLangChain.jsï¼ˆå¦‚æœAIé€»è¾‘åœ¨å‰ç«¯ï¼‰**

* * *

ç¬¬å››éƒ¨åˆ†ï¼šå†³ç­–æ ‘ - 30ç§’æ‰¾åˆ°ç­”æ¡ˆ
------------------

è¿˜æ˜¯ä¸ç¡®å®šï¼Ÿç”¨è¿™ä¸ªå†³ç­–æ ‘ï¼š

    ä½ æ˜¯.NETå¼€å‘è€…å—ï¼Ÿ
    â”‚
    â”œâ”€ æ˜¯ â”€â”€â†’ é¡¹ç›®éœ€è¦ç”Ÿäº§çº§ç¨³å®šæ€§å—ï¼Ÿ
    â”‚         â”œâ”€ æ˜¯ â”€â”€â†’ ã€é€‰MAFã€‘
    â”‚         â””â”€ å¦ â”€â”€â†’ åªæ˜¯å®éªŒ/å­¦ä¹ å—ï¼Ÿ
    â”‚                   â”œâ”€ æ˜¯ â”€â”€â†’ ã€LangChainæˆ–MAFéƒ½å¯ä»¥ã€‘
    â”‚                   â””â”€ å¦ â”€â”€â†’ ã€é€‰MAFã€‘ï¼ˆè€ƒè™‘é•¿æœŸç»´æŠ¤ï¼‰
    â”‚
    â””â”€ å¦ â”€â”€â†’ ä½ æ„¿æ„å­¦C#å—ï¼Ÿ
              â”œâ”€ æ˜¯ â”€â”€â†’ ã€é€‰MAFã€‘ï¼ˆå€¼å¾—æŠ•èµ„ï¼‰
              â””â”€ å¦ â”€â”€â†’ ã€é€‰LangChainã€‘
    

**ç®€åŒ–ç‰ˆï¼š**

ä½ çš„æƒ…å†µ

æ¨è

.NETå¼€å‘è€… + ç”Ÿäº§é¡¹ç›®

**MAF**

.NETå¼€å‘è€… + å®éªŒé¡¹ç›®

**MAFæˆ–LangChain**

Pythonå¼€å‘è€… + ä¸æ„¿å­¦C#

**LangChain**

Pythonå¼€å‘è€… + æ„¿æ„å­¦C#

**MAF**ï¼ˆé•¿æœŸæ›´å¥½ï¼‰

æ–°é¡¹ç›® + å›¢é˜Ÿçµæ´»

**MAF**ï¼ˆæœªæ¥æ›´ä¼˜ï¼‰

* * *

ç¬¬äº”éƒ¨åˆ†ï¼šæˆ‘çš„å»ºè®®
---------

ä½œä¸ºä¸€ä¸ªæ·±è€•.NET 10å¹´+çš„å¼€å‘è€…ï¼ŒåŒæ—¶ä¹Ÿæ·±åº¦ä½¿ç”¨è¿‡LangChainï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š

### ğŸ’¡ å¯¹.NETå¼€å‘è€…ï¼šæ¯«ä¸çŠ¹è±«é€‰MAF

**ç†ç”±ï¼š**

**1\. ä½ å·²ç»é¢†å…ˆäº†**

*   ä½ ä¸éœ€è¦å­¦æ–°è¯­è¨€
*   ä½ ç†Ÿæ‚‰çš„æŠ€èƒ½å¯ä»¥ç›´æ¥å¤ç”¨
*   å­¦ä¹ æ›²çº¿æä½

**2\. MAFæ›´é€‚åˆç”Ÿäº§**

*   æ€§èƒ½ä¼˜ç§€
*   ç±»å‹å®‰å…¨
*   æ˜“ç»´æŠ¤
*   ä¼ä¸šçº§ç‰¹æ€§å®Œå–„

**3\. å¾®è½¯çš„é•¿æœŸæŠ•èµ„**

*   MAFæ˜¯å¾®è½¯AIæˆ˜ç•¥çš„æ ¸å¿ƒ
*   .NET 10ä¸ºAIä¸“é—¨ä¼˜åŒ–
*   æŒç»­æŠ•å…¥ä¿è¯

**4\. å¼¯é“è¶…è½¦çš„æœºä¼š**

*   å¸‚åœºä¸Šæ‡‚.NET+AIçš„äººæ‰ç¨€ç¼º
*   ä½ å¯ä»¥æˆä¸ºä¼ä¸šçš„AIæŠ€æœ¯ä¸“å®¶
*   è–ªèµ„æº¢ä»·æ˜æ˜¾

* * *

### ğŸ’¡ å¯¹Pythonå¼€å‘è€…ï¼šçœ‹é¡¹ç›®æ€§è´¨

**å¦‚æœæ˜¯çŸ­æœŸå®éªŒï¼š** ç»§ç»­ç”¨LangChain

**å¦‚æœæ˜¯é•¿æœŸé¡¹ç›®ï¼š** è€ƒè™‘å­¦ä¹ C#å’ŒMAF

*   C#ä¸éš¾å­¦ï¼ˆå°¤å…¶å¯¹æœ‰ç¼–ç¨‹åŸºç¡€çš„äººï¼‰
*   é•¿æœŸå›æŠ¥é«˜
*   .NETç”Ÿæ€å¼ºå¤§

* * *

### ğŸ’¡ å¯¹æŠ€æœ¯å†³ç­–è€…ï¼šç»¼åˆè€ƒé‡

è€ƒé‡å› ç´ 

é€‰LangChain

é€‰MAF

**ç°æœ‰æŠ€æœ¯æ ˆ**

Pythonä¸ºä¸»

.NETä¸ºä¸»

**é¡¹ç›®å‘¨æœŸ**

< 6ä¸ªæœˆ

\> 6ä¸ªæœˆ

**æ€§èƒ½è¦æ±‚**

ä½

ä¸­é«˜

**ç»´æŠ¤å‘¨æœŸ**

< 1å¹´

\> 1å¹´

**å›¢é˜Ÿè§„æ¨¡**

å°å›¢é˜Ÿ

ä¸­å¤§å›¢é˜Ÿ

* * *

ç»“å°¾ï¼šå‘å·¦è¿˜æ˜¯å‘å³ï¼Ÿ
----------

### å›åˆ°å¼€ç¯‡çš„é—®é¢˜

**å‘å·¦èµ°ï¼ˆLangChainï¼‰ï¼š**

*   âœ… è·Ÿéšä¸»æµï¼Œèµ„æºä¸°å¯Œ
*   âŒ éœ€è¦å­¦æ–°è¯­è¨€ï¼ˆå¦‚æœæ˜¯.NETå¼€å‘è€…ï¼‰
*   âŒ ç”Ÿäº§ç¯å¢ƒæŒ‘æˆ˜å¤š
*   âŒ é•¿æœŸç»´æŠ¤æˆæœ¬é«˜

**å‘å³èµ°ï¼ˆMAFï¼‰ï¼š**

*   âœ… åˆ©ç”¨ç°æœ‰æŠ€èƒ½ï¼Œå­¦ä¹ æˆæœ¬ä½
*   âœ… ç”Ÿäº§çº§æ¡†æ¶ï¼Œç¨³å®šå¯é 
*   âœ… æ€§èƒ½ä¼˜ç§€ï¼Œæ˜“ç»´æŠ¤
*   âœ… å¾®è½¯é•¿æœŸæŠ•å…¥
*   âŒ ç”Ÿæ€ç›¸å¯¹è¾ƒæ–°

* * *

### æˆ‘çš„ç­”æ¡ˆ

**å¯¹.NETå¼€å‘è€…ï¼Œå‘å³èµ°ã€‚**

å› ä¸ºï¼š

> **AIçš„çº¢åˆ©ä¸åœ¨äºç”¨ä»€ä¹ˆè¯­è¨€ï¼Œè€Œåœ¨äºèƒ½ä¸èƒ½æŠŠAIè½åœ°åˆ°ç”Ÿäº§ç¯å¢ƒã€‚**
> 
> **è€ŒMAFï¼Œæ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿã€‚**

* * *

### ä¸‰ä¸ªäº‹å®

**äº‹å®1ï¼š** Pythonçš„ä¼˜åŠ¿åœ¨ç ”ç©¶ï¼Œä¸åœ¨ç”Ÿäº§  
**äº‹å®2ï¼š** .NETçš„ä¼˜åŠ¿åœ¨ç”Ÿäº§ï¼Œæ­£å¥½è¡¥é½AIè½åœ°çš„æœ€åä¸€å…¬é‡Œ  
**äº‹å®3ï¼š** å¸‚åœºä¸Šç¼ºçš„ä¸æ˜¯ä¼šLangChainçš„Pythonå¼€å‘è€…ï¼Œè€Œæ˜¯èƒ½æŠŠAIè½åœ°çš„.NETå¼€å‘è€…

* * *

### æœ€åçš„å»ºè®®

**ä¸è¦ç›²ç›®è·Ÿé£ã€‚**

**ä¸è¦å› ä¸ºPythonæ˜¯ä¸»æµå°±æ”¾å¼ƒ.NETã€‚**

**é€‰æ‹©æœ€é€‚åˆä½ ã€æœ€èƒ½å‘æŒ¥ä½ ä¼˜åŠ¿çš„æŠ€æœ¯ã€‚**

* * *

**AIæ—¶ä»£ï¼Œ.NETå¼€å‘è€…ä¸æ˜¯å‘å·¦è¿˜æ˜¯å‘å³çš„é—®é¢˜ï¼Œ**

**è€Œæ˜¯å¦‚ä½•ç”¨è‡ªå·±æœ€æ“…é•¿çš„æŠ€æœ¯ï¼ŒæŠ“ä½AIçº¢åˆ©çš„é—®é¢˜ã€‚**

* * *

**è€Œç­”æ¡ˆï¼Œå°±åœ¨ä½ æ‰‹ä¸­ã€‚**

**AIæ—¶ä»£ï¼Œé€‰æ‹©æ¯”åŠªåŠ›æ›´é‡è¦ã€‚**

**é€‰å¯¹äº†æ–¹å‘ï¼Œå°±æ˜¯æˆåŠŸçš„ä¸€åŠã€‚**

**ğŸ‘‡ ç«‹å³å¼€å§‹MAFå­¦ä¹ ä¹‹æ—… ğŸ‘‡**

![](https://files.cnblogs.com/files/sheng-jie/maf-course-card-scan.bmp)

> **ğŸ‘†é¢å‘.NETå¼€å‘è€…çš„AI Agent å¼€å‘è¯¾ç¨‹ã€.NET+AI | æ™ºèƒ½ä½“å¼€å‘è¿›é˜¶ã€‘å·²ä¸Šçº¿ï¼Œæ¬¢è¿æ‰«ç åŠ å…¥å­¦ä¹ ã€‚ğŸ‘†**

![](https://files.cnblogs.com/files/sheng-jie/scan-follow.bmp)

> **å…³æ³¨æˆ‘çš„å…¬ä¼—å·ã€å‘ AI è€Œè¡Œã€ï¼Œæˆ‘ä»¬å¾®ä¿¡ä¸è§ä¸æ•£ã€‚  
> é˜…ç½¢æ­¤æ–‡ï¼Œå¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡ä¸é”™å¹¶æœ‰æ‰€æ”¶è·ï¼Œè¯·ã€æ‰“èµã€‘æˆ–ã€æ¨èã€‘ï¼Œä¹Ÿå¯ã€è¯„è®ºã€‘ç•™ä¸‹æ‚¨çš„é—®é¢˜æˆ–å»ºè®®ä¸æˆ‘äº¤æµã€‚ ä½ çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­åˆ›ä½œå’Œåˆ†äº«çš„ä¸ç«­åŠ¨åŠ›ï¼**

ä½œè€…ï¼š[ã€åœ£æ°ã€](http://www.jianshu.com/u/39ec0e6b1844)

å‡ºå¤„ï¼š[http://www.cnblogs.com/sheng-jie/](http://www.cnblogs.com/sheng-jie/)

æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡é“¾æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚