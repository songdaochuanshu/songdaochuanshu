---
layout: post
title: 'ã€Azure Container Appã€‘æ„å»ºJavaåº”ç”¨é•œåƒæ—¶å€™é‡æ— æ³•ç¼–è¯‘é”™è¯¯ï¼šERROR [build 10/10] RUN ./mvnw.cmd dependency:go-offline -B -Dproduction package'
date: "2025-07-15T00:45:42Z"
---
ã€Azure Container Appã€‘æ„å»ºJavaåº”ç”¨é•œåƒæ—¶å€™é‡æ— æ³•ç¼–è¯‘é”™è¯¯ï¼šERROR \[build 10/10\] RUN ./mvnw.cmd dependency:go-offline -B -Dproduction package
===========================================================================================================================

é—®é¢˜æè¿°
====

éƒ¨ç½²Javaåº”ç”¨åˆ°Azure Container Appä¸­ï¼Œé¦–å…ˆéœ€è¦åœ¨æœ¬åœ°æ„å»ºé•œåƒæ–‡ä»¶åä¸Šä¼ åˆ°Azure Contaienr Registrierä¸­ã€‚

ä½†æ˜¯ï¼Œåœ¨ç¬¬ä¸€æ­¥æ„å»ºé•œåƒçš„æ—¶å€™ï¼Œå°±é‡è§é”™è¯¯ï¼š

> \=> ERROR \[build 9/9\] RUN ./mvnw.cmd dependency:go-offline -B -Dproduction package 0.6s  
> \------  
> \> \[build 9/9\] RUN ./mvnw.cmd dependency:go-offline -B -Dproduction package:  
> 0.523 /bin/sh: line 1: ./mvnw.cmd: No such file or directory

å°±å•ç‹¬ä»£ç è°ƒè¯•å¯ä»¥æ­£å¸¸è¿è¡Œã€‚è€Œä¸”ï¼Œé¡¹ç›®æ–‡ä»¶æ ¹ç›®å½•ï¼ˆä¸DockerfileåŒçº§ï¼‰ä¸­ï¼Œå·²ç»åŒ…å«äº† mvnw æ–‡ä»¶å’Œ mvnw.cmd, æ‰€ä»¥ï¼Œä¸åº”è¯¥æ˜¯æ–‡ä»¶æœ¬èº«ç¡®å®çš„åŸå› å¯¼è‡´çš„ã€‚

é¡¹ç›®ç›®å½•ç»“æ„
------

....>javademo> tree /a /f  
Folder PATH listing for volume Local Disk  
Volume serial number is 4CDB-764A  
C:.  
| .gitignore  
| CHANGELOG.md  
| CONTRIBUTING.md  
| Dockerfile  
| LICENSE.md  
| mvnw  
| mvnw.cmd  
| pom.xml

...

DockerFileå†…å®¹
------------

\# Build stage
FROM mcr.microsoft.com/openjdk/jdk:21\-mariner AS build
ENV JAR\_FILE=containerapps-albumapi-java-0.0.1\-SNAPSHOT.jar
WORKDIR /app
COPY mvnw\* /app/
COPY .mvn /app/.mvn
COPY pom.xml /app
COPY ./src /app/src
RUN ls -la /app
RUN chmod +x ./mvnw
RUN ./mvnw dependency:go-offline -B -Dproduction package

# Runtime stage
FROM mcr.microsoft.com/openjdk/jdk:21\-mariner
COPY --from=build /app/target/containerapps-albumapi-java-0.0.1\-SNAPSHOT.jar /usr/src/myapp/
EXPOSE 8080
CMD \["/usr/bin/java", "-jar", "/usr/src/myapp/containerapps-albumapi-java-0.0.1-SNAPSHOT.jar"\]

é—®é¢˜è§£ç­”
====

ä»¥å‰é‡è§é—®é¢˜ï¼Œå…¨ç½‘æœç´¢ã€‚å½“å‰ï¼Œé‡è§é—®é¢˜ï¼Œç¬¬ä¸€é—®AIå¤§æ¨¡å‹ã€‚

æˆ‘å¾—åˆ°çš„ç­”æ¡ˆæ˜¯ï¼š

> **æˆ‘çš„é—®é¢˜ï¼š**
> 
> _RUN ./mvnw dependency:go-offline -B -Dproduction package è¿™å¥è¯åœ¨dockerfileä¸­æ˜¯ä»€ä¹ˆç›®çš„å‘¢ï¼Ÿå¦‚æœé‡è§æŠ¥é”™â€œ0.288 /bin/sh: line 1: ./mvnw: cannot execute: required file not foundâ€ å¦‚ä½•æ¥è§£å†³å®ƒ_
> 
> **M365 Copilotçš„å›ç­”ï¼š**
> 
> è¿™æ¡å‘½ä»¤ï¼š
> 
>     RUN ./mvnw dependency:go-offline -B -Dproduction package
>     
> 
> åœ¨ Dockerfile ä¸­çš„ä½œç”¨æ˜¯ï¼š
> 
> ### ğŸ§© å‘½ä»¤ç›®çš„è§£é‡Šï¼š
> 
> 1.  **`./mvnw`**ï¼šä½¿ç”¨é¡¹ç›®è‡ªå¸¦çš„ Maven Wrapperï¼ˆmvnwï¼‰ï¼Œç¡®ä¿ä½¿ç”¨çš„æ˜¯é¡¹ç›®æŒ‡å®šç‰ˆæœ¬çš„ Mavenï¼Œè€Œä¸æ˜¯ç³»ç»Ÿå®‰è£…çš„ Mavenã€‚
> 2.  **`dependency:go-offline`**ï¼šæå‰ä¸‹è½½æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä»¥ä¾¿åç»­æ„å»ºè¿‡ç¨‹å¯ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä¸­è¿›è¡Œï¼Œæé«˜æ„å»ºé€Ÿåº¦å’Œç¨³å®šæ€§ã€‚
> 3.  **`-B`**ï¼šè¡¨ç¤º batch æ¨¡å¼ï¼Œé¿å… Maven äº¤äº’å¼æç¤ºï¼Œé€‚åˆè‡ªåŠ¨åŒ–æ„å»ºã€‚
> 4.  **`-Dproduction`**ï¼šä¼ é€’ä¸€ä¸ªåä¸º `production` çš„ç³»ç»Ÿå±æ€§ï¼Œå¯èƒ½ç”¨äºæ¿€æ´»æŸäº› profile æˆ–é…ç½®ã€‚
> 5.  **`package`**ï¼šæ‰§è¡Œ Maven çš„ `package` é˜¶æ®µï¼Œé€šå¸¸ä¼šç¼–è¯‘ä»£ç å¹¶æ‰“åŒ…æˆ JAR æˆ– WAR æ–‡ä»¶ã€‚
> 
> * * *
> 
> ### ğŸ›  æŠ¥é”™åˆ†æï¼š
> 
> é”™è¯¯ä¿¡æ¯ï¼š
> 
>     /bin/sh: line 1: ./mvnw: cannot execute: required file not found
>     
> 
> è¯´æ˜ Docker æ„å»ºè¿‡ç¨‹ä¸­æ‰¾ä¸åˆ° `./mvnw` æ–‡ä»¶ï¼Œå¯èƒ½åŸå› å¦‚ä¸‹ï¼š
> 
> #### âœ… è§£å†³æ–¹æ³•ï¼š
> 
> 1.  **ç¡®è®¤ `mvnw` æ–‡ä»¶æ˜¯å¦å­˜åœ¨äº Docker æ„å»ºä¸Šä¸‹æ–‡ä¸­**ï¼š
>     
>     *   `mvnw` å’Œ `mvnw.cmd` åº”è¯¥åœ¨é¡¹ç›®æ ¹ç›®å½•ã€‚
>     *   å¦‚æœä½ ç”¨çš„æ˜¯ `.dockerignore` æ–‡ä»¶ï¼Œç¡®ä¿æ²¡æœ‰æŠŠ `mvnw` å¿½ç•¥æ‰ã€‚
> 2.  **æ£€æŸ¥ Dockerfile çš„å·¥ä½œç›®å½•è®¾ç½®**ï¼š
>     
>     *   ç¡®ä¿ä½ åœ¨æ‰§è¡Œå‘½ä»¤å‰è®¾ç½®äº†æ­£ç¡®çš„å·¥ä½œç›®å½•ï¼Œä¾‹å¦‚ï¼š
>         
>             WORKDIR /app
>             COPY . /app
>             RUN chmod +x mvnw
>             RUN ./mvnw dependency:go-offline -B -Dproduction package
>             
>         
> 3.  **æ·»åŠ æ‰§è¡Œæƒé™**ï¼š
>     
>     *   æœ‰æ—¶ `mvnw` æ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œå¯ä»¥åŠ ä¸Šï¼š
>         
>             RUN chmod +x mvnw
>             
>         
> 
> * * *
> 
> å¦‚æœä½ èƒ½æä¾› Dockerfile çš„ç›¸å…³éƒ¨åˆ†ï¼Œæˆ‘å¯ä»¥å¸®ä½ æ›´å…·ä½“åœ°å®šä½é—®é¢˜å¹¶ä¼˜åŒ–å®ƒã€‚ä½ æƒ³æˆ‘å¸®ä½ æ£€æŸ¥ä¸€ä¸‹ Dockerfile å—ï¼Ÿ

å…¶å®ï¼Œæ ¹æ®ä»¥ä¸Šä¸‰ç‚¹æç¤ºï¼Œå¹¶æ²¡æœ‰å®šä½åˆ°é—®é¢˜ã€‚

è¿›ä¸€æ­¥æ€è€ƒï¼Œ mvnw æ˜¯ç”¨äºæ‰“åŒ…java åº”ç”¨ï¼Œè€Œmvnw å’Œ mvnw.batæ–‡ä»¶éƒ½æ˜¯åœ¨åˆ›å»ºé¡¹ç›®æ˜¯è‡ªåŠ¨ç”Ÿæˆã€‚

å¼€å§‹æ€€ç–‘æ˜¯æ–‡ä»¶å†…å®¹ç”±é—®é¢˜å¯¼è‡´ï¼Œæ‰€ä»¥å†³å®šåˆ é™¤å¹¶ç”Ÿæˆæ–°æ–‡ä»¶ã€‚

ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥é‡æ–°ç”Ÿæˆ mvnwæ–‡ä»¶æˆ–æ›´æ–°ï¼š

mvn -N io.takari:maven:wrapper

éšåï¼Œå†æ¬¡æ‰§è¡Œ docker build æŒ‡ä»¤ï¼ˆÂ docker build -t myalbum:v1 . ï¼‰æˆåŠŸã€‚é•œåƒæ­£å¸¸ç”Ÿæˆï¼

  
ä¸ºäº†æ‰¾åˆ°ä¹‹å‰çš„ mvnw æ–‡ä»¶ä¸ºä½•ä¼šå¤±è´¥ï¼Œåœ¨å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶åå‘ç°ï¼š**"é‡æ–°ç”Ÿæˆmvnwæ–‡ä»¶æ˜¯æœ€å¿«çš„è§£å†³ä¹‹é“"**

å‚è€ƒèµ„æ–™
====

What is the purpose of mvnw and mvnw.cmd files?Â [https://stackoverflow.com/questions/38723833/what-is-the-purpose-of-mvnw-and-mvnw-cmd-files](https://stackoverflow.com/questions/38723833/what-is-the-purpose-of-mvnw-and-mvnw-cmd-files)

> These files are fromÂ [Maven wrapper](https://github.com/takari/maven-wrapper). It works similarly to theÂ [Gradle wrapper](https://docs.gradle.org/current/userguide/gradle_wrapper.html).
> 
> This allows you to run the Maven project without having Maven installed and present on the path. It downloads the correct Maven version if it's not found (as far as I know by default in your user home directory).
> 
> TheÂ `mvnw`Â file is for Linux (bash) and theÂ `mvnw.cmd`Â is for the Windows environment.
> 
> * * *
> 
> To create or update all necessary Maven Wrapper files execute the following command:
> 
>     mvn -N io.takari:maven:wrapper
>     
> 
> To use a different version of maven you can specify the version as follows:
> 
>     mvn -N io.takari:maven:wrapper -Dmaven=3.3.3
>     
> 
> Both commands require maven onÂ `PATH`Â (add the path to mavenÂ `bin`Â toÂ `Path`Â on System Variables) if you already have mvnw in your project you can useÂ `./mvnw`Â instead ofÂ `mvn`Â in the commands.

å½“åœ¨å¤æ‚çš„ç¯å¢ƒä¸­é¢ä¸´é—®é¢˜ï¼Œæ ¼ç‰©ä¹‹é“éœ€ï¼šæµŠè€Œé™ä¹‹å¾æ¸…ï¼Œå®‰ä»¥åŠ¨ä¹‹å¾ç”Ÿã€‚ äº‘ä¸­ï¼Œæ°æ˜¯å¦‚æ­¤!