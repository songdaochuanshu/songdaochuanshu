---
layout: post
title: 'ä»Žæ–‡ä»¶åˆ°å—: æé«˜ Hugging Face å­˜å‚¨æ•ˆçŽ‡'
date: "2025-03-05T00:37:59Z"
---
ä»Žæ–‡ä»¶åˆ°å—: æé«˜ Hugging Face å­˜å‚¨æ•ˆçŽ‡
===========================

Hugging Face åœ¨ [Git LFS ä»“åº“](https://huggingface.co/docs/hub/en/repositories-getting-started#requirements) ä¸­å­˜å‚¨äº†è¶…è¿‡ [30 PB çš„æ¨¡åž‹ã€æ•°æ®é›†å’Œ Spaces](https://huggingface.co/spaces/xet-team/lfs-analysis)ã€‚ç”±äºŽ Git åœ¨æ–‡ä»¶çº§åˆ«è¿›è¡Œå­˜å‚¨å’Œç‰ˆæœ¬æŽ§åˆ¶ï¼Œä»»ä½•æ–‡ä»¶çš„ä¿®æ”¹éƒ½éœ€è¦é‡æ–°ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶ã€‚è¿™åœ¨ Hub ä¸Šä¼šäº§ç”Ÿé«˜æ˜‚çš„æˆæœ¬ï¼Œå› ä¸ºå¹³å‡æ¯ä¸ª Parquet å’Œ CSV æ–‡ä»¶å¤§å°åœ¨ 200-300 MB ä¹‹é—´ï¼ŒSafetensor æ–‡ä»¶çº¦ 1 GBï¼Œè€Œ GGUF æ–‡ä»¶ç”šè‡³å¯èƒ½è¶…è¿‡ 8 GBã€‚è®¾æƒ³ä¸€ä¸‹ï¼Œä»…ä»…ä¿®æ”¹ GGUF æ–‡ä»¶ä¸­çš„ä¸€è¡Œå…ƒæ•°æ®ï¼Œå°±éœ€è¦ç­‰å¾…æ•° GB å¤§å°çš„æ–‡ä»¶é‡æ–°ä¸Šä¼ ã€‚é™¤äº†è€—è´¹ç”¨æˆ·æ—¶é—´å’Œä¼ è¾“æˆæœ¬å¤–ï¼ŒGit LFS è¿˜éœ€è¦ä¿å­˜æ–‡ä»¶çš„ä¸¤ä¸ªå®Œæ•´ç‰ˆæœ¬ï¼Œè¿™è¿›ä¸€æ­¥å¢žåŠ äº†å­˜å‚¨å¼€é”€ã€‚

ä¸‹å›¾å±•ç¤ºäº† Hub ä¸Šå„ç±»ä»“åº“ (æ¨¡åž‹ã€æ•°æ®é›†å’Œ Spaces) ä¸­ LFS å­˜å‚¨å®¹é‡åœ¨ 2022 å¹´ 3 æœˆè‡³ 2024 å¹´ 9 æœˆæœŸé—´çš„å¢žé•¿è¶‹åŠ¿:

![](https://img-s2.andfun.cn/devrel/posts/2025/03/30b70b6161deb.png)

Hugging Face çš„ Xet å›¢é˜Ÿæ­£åœ¨é‡‡ç”¨ä¸€ç§åˆ›æ–°çš„å­˜å‚¨æ–¹æ¡ˆ: å°†æ–‡ä»¶åˆ†å—å­˜å‚¨ã€‚é€šè¿‡åªä¼ è¾“å‘ç”Ÿå˜åŒ–çš„æ•°æ®å—ï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾è‘—æå‡å­˜å‚¨æ•ˆçŽ‡å’Œè¿­ä»£é€Ÿåº¦ï¼ŒåŒæ—¶ç¡®ä¿ç”¨æˆ·èƒ½å¯é åœ°è®¿é—®ä¸æ–­æ¼”è¿›çš„æ•°æ®é›†å’Œæ¨¡åž‹ã€‚ä¸‹é¢è®©æˆ‘ä»¬è¯¦ç»†äº†è§£å…¶å·¥ä½œåŽŸç†ã€‚

åŸºäºŽå†…å®¹çš„åˆ†å—åŽŸç†
---------

æˆ‘ä»¬é‡‡ç”¨çš„åˆ†å—æ–¹æ³•ç§°ä¸ºåŸºäºŽå†…å®¹çš„åˆ†å— (Content-Defined Chunkingï¼ŒCDC)ã€‚ä¸Žå°†æ–‡ä»¶è§†ä¸ºä¸å¯åˆ†å‰²çš„æ•´ä½“ä¸åŒï¼ŒCDC æ ¹æ®æ–‡ä»¶å†…å®¹æœ¬èº«æ¥ç¡®å®šè¾¹ç•Œï¼Œå°†æ–‡ä»¶åˆ’åˆ†ä¸ºå¤§å°å¯å˜çš„æ•°æ®å—ã€‚ä¸ºäº†è®¡ç®—è¿™äº›å—çš„è¾¹ç•Œï¼Œæˆ‘ä»¬ä½¿ç”¨ [æ»šåŠ¨å“ˆå¸Œç®—æ³•](https://en.wikipedia.org/wiki/Rolling_hash) æ¥æ‰«ææ–‡ä»¶çš„å­—èŠ‚åºåˆ—ã€‚

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜Ž:

    transformerstransformerstransformers
    

è¿™é‡Œæˆ‘ä»¬ç”¨æ–‡æœ¬æ¥æ¼”ç¤ºï¼Œä½†å®žé™…ä¸Šè¿™ä¸ªè¿‡ç¨‹é€‚ç”¨äºŽä»»ä½•å­—èŠ‚åºåˆ—ã€‚

æ»šåŠ¨å“ˆå¸Œç®—æ³•é€šè¿‡åœ¨æ•°æ®ä¸Šæ»‘åŠ¨å›ºå®šå¤§å°çš„çª—å£æ¥è®¡ç®—å“ˆå¸Œå€¼ã€‚æ¯”å¦‚ï¼Œå½“çª—å£é•¿åº¦ä¸º 4 æ—¶ï¼Œç®—æ³•ä¼šä¾æ¬¡è®¡ç®— `tran` ã€ `rans` ã€ `ansf` ç­‰å­—ç¬¦åºåˆ—çš„å“ˆå¸Œå€¼ï¼Œç›´åˆ°å¤„ç†å®Œæ•´ä¸ªæ–‡ä»¶ã€‚

å½“æŸä¸ªä½ç½®çš„å“ˆå¸Œå€¼æ»¡è¶³é¢„è®¾æ¡ä»¶æ—¶ï¼Œå°±ä¼šåœ¨è¯¥å¤„è®¾ç½®å—çš„è¾¹ç•Œã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®¾ç½®å¦‚ä¸‹æ¡ä»¶:

    hash(data) % 2^12 == 0
    

å¦‚æžœåºåˆ— `mers` çš„å“ˆå¸Œå€¼æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆæ–‡ä»¶å°±ä¼šè¢«åˆ†æˆä¸‰ä¸ªå—:

    transformers | transformers | transformers
    

ç³»ç»Ÿä¼šè®¡ç®—è¿™äº›å—çš„å“ˆå¸Œå€¼ï¼Œå»ºç«‹å—å“ˆå¸Œå€¼åˆ°å®žé™…å†…å®¹çš„æ˜ å°„ï¼Œå¹¶æœ€ç»ˆå°†å®ƒä»¬å­˜å‚¨åœ¨åŸºäºŽå†…å®¹å¯»å€çš„å­˜å‚¨ç³»ç»Ÿ (Content-Addressed Storageï¼ŒCAS) ä¸­ã€‚ç”±äºŽè¿™ä¸‰ä¸ªå—å®Œå…¨ç›¸åŒï¼ŒCAS åªéœ€è¦å­˜å‚¨ä¸€ä¸ªå—çš„å®žé™…å†…å®¹ï¼Œä»Žè€Œè‡ªåŠ¨å®žçŽ°äº†æ•°æ®åŽ»é‡ã€‚ðŸª„

å¤„ç†æ’å…¥å’Œåˆ é™¤æ“ä½œ
---------

å½“æ–‡ä»¶å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒCDC çš„ä¼˜åŠ¿å°±ä½“çŽ°å‡ºæ¥äº†: å®ƒèƒ½å¤Ÿç²¾ç¡®å®šä½å˜åŒ–çš„éƒ¨åˆ†ï¼Œé«˜æ•ˆå¤„ç†æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå…·ä½“ç¤ºä¾‹ï¼Œåœ¨åŽŸæ–‡ä»¶ä¸­æ’å…¥ `super` åŽ:

    transformerstransformerssupertransformers
    

ä½¿ç”¨ç›¸åŒçš„è¾¹ç•Œæ¡ä»¶é‡æ–°åº”ç”¨æ»šåŠ¨å“ˆå¸Œç®—æ³•ï¼Œæ–°çš„åˆ†å—ç»“æžœå¦‚ä¸‹:

    transformers | transformers | supertransformers
    

å‰ä¸¤ä¸ªå—çš„å†…å®¹ç³»ç»Ÿä¸­å·²ç»å­˜åœ¨ï¼Œæ— éœ€é‡æ–°å­˜å‚¨ã€‚åªæœ‰ `supertransformers` æ˜¯æ–°çš„æ•°æ®å—ï¼Œå› æ­¤ä¿å­˜è¿™ä¸ªæ›´æ–°ç‰ˆæœ¬åªéœ€è¦ä¸Šä¼ å’Œå­˜å‚¨è¿™ä¸€ä¸ªæ–°å—å³å¯ã€‚

ä¸ºäº†éªŒè¯è¿™ç§ä¼˜åŒ–æ–¹æ¡ˆåœ¨å®žé™…åº”ç”¨ä¸­çš„æ•ˆæžœï¼Œæˆ‘ä»¬å°† XetHub ä¸ŠåŸºäºŽ CDC çš„å­˜å‚¨å®žçŽ°ä¸Ž Git LFS è¿›è¡Œäº†å¯¹æ¯”æµ‹è¯•ã€‚åœ¨ä¸‰ä¸ªè¿­ä»£å¼€å‘åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å‘çŽ°å­˜å‚¨å’Œä¼ è¾“æ€§èƒ½å§‹ç»ˆæå‡äº† 50%ã€‚å…¶ä¸­ä¸€ä¸ªå…¸åž‹æ¡ˆä¾‹æ˜¯ [CORD-19 æ•°æ®é›†](https://ai2-semanticscholar-cord-19.s3-us-west-2.amazonaws.com/historical_releases.html)â€”â€”è¿™æ˜¯ä¸€ä¸ªåœ¨ 2020 å¹´è‡³ 2022 å¹´é—´æŒç»­æ›´æ–°çš„ COVID-19 ç ”ç©¶è®ºæ–‡é›†åˆï¼Œå…±æœ‰ 50 æ¬¡å¢žé‡æ›´æ–°ã€‚ä¸‹è¡¨å¯¹æ¯”äº†ä¸¤ç§å­˜å‚¨æ–¹æ¡ˆçš„æ€§èƒ½æŒ‡æ ‡:

æŒ‡æ ‡

åŸºäºŽ Git LFS çš„ä»“åº“

åŸºäºŽ Xet çš„ä»“åº“

å¹³å‡ä¸‹è½½æ—¶é—´

51 åˆ†é’Ÿ

19 åˆ†é’Ÿ

å¹³å‡ä¸Šä¼ æ—¶é—´

47 åˆ†é’Ÿ

24 åˆ†é’Ÿ

å­˜å‚¨å ç”¨

8.9 GB

3.52 GB

é€šè¿‡åªä¼ è¾“å’Œä¿å­˜å˜åŒ–çš„æ•°æ®å—ï¼Œå†ç»“åˆæ”¹è¿›çš„åŽ‹ç¼©ç®—æ³•å’Œä¼˜åŒ–çš„ç½‘ç»œè¯·æ±‚ï¼ŒåŸºäºŽ Xet çš„ CDC æ–¹æ¡ˆæ˜¾è‘—ç¼©çŸ­äº†ä¸Šä¼ å’Œä¸‹è½½æ—¶é—´ï¼ŒåŒæ—¶å¤§å¹…é™ä½Žäº†å­˜å‚¨å¤šä¸ªç‰ˆæœ¬æ‰€éœ€çš„ç©ºé—´ã€‚æƒ³æ·±å…¥äº†è§£æµ‹è¯•ç»†èŠ‚ï¼Ÿè¯·æŸ¥çœ‹æˆ‘ä»¬çš„ [å®Œæ•´åŸºå‡†æµ‹è¯•æŠ¥å‘Š](https://xethub.com/blog/benchmarking-the-modern-development-experience)ã€‚

CDC æŠ€æœ¯å¯¹ Hub çš„å½±å“
---------------

é‚£ä¹ˆï¼ŒCDC å¦‚ä½•åº”ç”¨äºŽ Hugging Face Hub ä¸Šçš„å„ç±»æ–‡ä»¶å‘¢ï¼Ÿä¸ºäº†ç›´è§‚å±•ç¤º CDC åœ¨æ–‡ä»¶é›†åˆä¸Šçš„å­˜å‚¨èŠ‚çœæ½œåŠ›ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªç®€å•çš„ [é‡å¤æ•°æ®åˆ é™¤ä¼°ç®—å·¥å…·](https://github.com/huggingface/dedupe_estimator)ã€‚æˆ‘ä»¬ç”¨è¿™ä¸ªå·¥å…·åˆ†æžäº† [openai-community/gpt2](https://huggingface.co/openai-community/gpt2) ä»“åº“ä¸­ `model.safetensors` æ–‡ä»¶çš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå¾—åˆ°äº†ä»¥ä¸‹ç»“æžœ:

![](https://img-s2.andfun.cn/devrel/posts/2025/03/99e0750930b81.png)

å›¾ä¸­çš„ç»¿è‰²åŒºåŸŸè¡¨ç¤ºä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´å†…å®¹çš„é‡å éƒ¨åˆ†ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨å•ä¸ªæ–‡ä»¶å†…éƒ¨ä»¥åŠä¸åŒç‰ˆæœ¬ä¹‹é—´è¿›è¡Œæœ‰æ•ˆçš„æ•°æ®åŽ»é‡ã€‚

Git LFS å­˜å‚¨å ç”¨

Xet å­˜å‚¨å ç”¨

ç‰ˆæœ¬ 1

664 MB

509 MB

ç‰ˆæœ¬ 2

548 MB

136 MB

æ€»è®¡

1.2 GB

645 MB

åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œé‡‡ç”¨åŸºäºŽ Xet çš„å­˜å‚¨æ–¹æ¡ˆä¸ä»…å¤§å¤§ç¼©çŸ­äº†ç¬¬äºŒä¸ªç‰ˆæœ¬çš„ä¸Šä¼ å’Œä¸‹è½½æ—¶é—´ï¼Œè¿˜å°†æ€»å­˜å‚¨ç©ºé—´å‡å°‘äº† 53%ã€‚é€šè¿‡è¿›ä¸€æ­¥çš„åŽ‹ç¼©ä¼˜åŒ–ï¼Œæˆ‘ä»¬é¢„è®¡è¿˜èƒ½é¢å¤–èŠ‚çœ 10% çš„ç©ºé—´ã€‚

æˆ‘ä»¬å¯¹ Hub ä¸Šçš„ä»“åº“è¿›è¡Œçš„åˆæ­¥ç ”ç©¶æ˜¾ç¤ºï¼ŒCDC æŠ€æœ¯å¯¹æŸäº›ç±»åž‹çš„æ•°æ®ç‰¹åˆ«æœ‰æ•ˆã€‚ä¾‹å¦‚ï¼Œå¾®è°ƒæ¨¡åž‹é€šå¸¸åªä¿®æ”¹éƒ¨åˆ†å‚æ•°ï¼Œå¤§éƒ¨åˆ†æ¨¡åž‹æƒé‡åœ¨ä¸åŒç‰ˆæœ¬é—´ä¿æŒä¸å˜ï¼Œè¿™ä½¿å®ƒä»¬éžå¸¸é€‚åˆä½¿ç”¨æ•°æ®åŽ»é‡æŠ€æœ¯ã€‚åŒæ ·ï¼Œæ¨¡åž‹æ£€æŸ¥ç‚¹æ–‡ä»¶ä¹Ÿæ˜¯ç†æƒ³çš„åº”ç”¨åœºæ™¯ï¼Œå› ä¸ºç›¸é‚»æ£€æŸ¥ç‚¹ä¹‹é—´çš„å˜åŒ–å¾€å¾€å¾ˆå°ã€‚è¿™ä¸¤ç±»æ–‡ä»¶éƒ½å±•çŽ°å‡º 30-85% çš„åŽ»é‡æ¯”çŽ‡ã€‚è€ƒè™‘åˆ° PyTorch æ¨¡åž‹æ£€æŸ¥ç‚¹åœ¨ Hub ä¸Šå ç”¨äº†çº¦ 200 TB çš„å­˜å‚¨ç©ºé—´ï¼Œå¦‚æžœèƒ½è¾¾åˆ° 50% çš„åŽ»é‡çŽ‡ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³èŠ‚çœ 100 TB çš„å­˜å‚¨ç©ºé—´ï¼Œå¹¶åœ¨æœªæ¥æ¯æœˆå‡å°‘ 7-8 TB çš„å¢žé•¿ã€‚

é™¤äº†é™ä½Žå­˜å‚¨æˆæœ¬ï¼Œå—çº§æ•°æ®åŽ»é‡è¿˜èƒ½æ˜¾è‘—æå‡æ•°æ®ä¼ è¾“æ•ˆçŽ‡ï¼Œå› ä¸ºåªéœ€è¦ä¼ è¾“å®žé™…å‘ç”Ÿå˜åŒ–çš„æ•°æ®å—ã€‚è¿™å¯¹äºŽéœ€è¦é¢‘ç¹å¤„ç†å¤šä¸ªæ¨¡åž‹ç‰ˆæœ¬æˆ–æ•°æ®é›†ç‰ˆæœ¬çš„å›¢é˜Ÿæ¥è¯´å°¤å…¶é‡è¦ï¼Œå¯ä»¥å¤§å¤§å‡å°‘ç­‰å¾…æ—¶é—´ï¼Œæé«˜å·¥ä½œæ•ˆçŽ‡ã€‚

ç›®å‰ï¼Œæˆ‘ä»¬å›¢é˜Ÿæ­£åœ¨å¼€å‘ Hub çš„åŸºäºŽ Xet å­˜å‚¨çš„æ¦‚å¿µéªŒè¯ç³»ç»Ÿï¼Œè®¡åˆ’åœ¨ 2025 å¹´åˆæŽ¨å‡ºé¦–æ‰¹åŸºäºŽ Xet çš„ä»“åº“ã€‚æ¬¢è¿Ž [å…³æ³¨æˆ‘ä»¬çš„å›¢é˜Ÿ](https://huggingface.co/xet-team)ï¼Œäº†è§£æ›´å¤šæŠ€æœ¯è¿›å±•ã€‚æˆ‘ä»¬å°†æŒç»­åˆ†äº«åœ¨å…¨çƒåˆ†å¸ƒå¼ä»“åº“æ‰©å±• CDCã€ä¼˜åŒ–ç½‘ç»œæ€§èƒ½ã€ä¿æŠ¤æ•°æ®éšç§ä»¥åŠå¹¶è¡ŒåŒ–åˆ†å—ç®—æ³•ç­‰æ–¹é¢çš„ç ”ç©¶æˆæžœã€‚

* * *

> è‹±æ–‡åŽŸæ–‡: [https://huggingface.co/blog/from-files-to-chunks](https://huggingface.co/blog/from-files-to-chunks)
> 
> åŽŸæ–‡ä½œè€…: Jared Sulzdorf, Ann Huang
> 
> è¯‘è€…: smartisan