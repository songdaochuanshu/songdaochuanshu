---
layout: post
title: 'DeepSeek处理自有业务的案例：让AI给你写一份小众编辑器(EverEdit)的语法着色文件'
date: "2025-02-14T00:35:50Z"
---
DeepSeek处理自有业务的案例：让AI给你写一份小众编辑器(EverEdit)的语法着色文件
================================================

1 DeepSeek处理自有业务的案例：让AI给你写一份小众编辑器(EverEdit)的语法着色文件
==================================================

1.1 背景
------

  AI能力再强，如果不能在企业的`自有业务`上产生助益，那基本也是一无是处。将企业的`自有业务`上传到线上训练，那是脑子进水的做法，竞争对手不仅捡了大便宜，自己的企业可能没享受到AI红利就被干死了！  
  这也是为什么`DeepSeek`的本地模型及硬件设备会大热，但对中小企业，特别是小微企业来说，**硬件设备从几十万~几百万的成本**，是无法逾越的障碍！那中小微企业就要在AI的大潮中被时代淘汰吗？  
  肯定不是，也肯定不能！

**自有业务场景**：  
本文将以一个**小众**`文本编辑器`：`EverEdit`为切入点，训练AI认识`EverEdit`的语法着色规则，并生成一份新的编程语言(zig)的语法着色文件。

**🕮说明**：  
  因为EverEdit够小众，所以现成的各种线上线下AI模型都不认识，需要自己进行训练，这很符合中小微企业的自有业务特点。

1.2 准备步骤
--------

### 1.2.1 **AI平台账号准备**： [硅基流动注册](https://cloud.siliconflow.cn/i/46A7o0CE)

![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608238-1279186789.png)

### 1.2.2 [下载CherryStudio](https://docs.cherry-ai.com/cherrystudio/download)

注：`CherryStudio`工具的知识库支持训练本地素材

### 1.2.3 在`CherryStudio`中配置密钥

  配置`密钥`是为了能够让`CherryStudio`使用AI供应商(这里是`硅基流动`)的模型

1.  步骤1：在`siliconflow`网站登录后，拷贝自己的`密钥`，如下图所示：  
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608402-1388824880.png)
    
2.  步骤2：在`CherryStudio`中配置密钥，如下图所示：  
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608363-2064694606.png)
    

1.3 训练本地知识库(EverEdit的语法着色规则)
----------------------------

1.  **在`CherryStudio`中新建本地知识库，如下图所示：**  
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608275-458899797.png)  
    注：如果已经创建过`EverEdit`本地知识库，就不用重复创建了。
    
2.  **将`EverEdit`自带的语法文件丢给`CherryStudio`消化，如下图所示：**  
      知识库有两部分，一是`EverEdit`内置的语法着色文件，二是`EverEdit`的语法着色规则介绍文件(帮助文档)。  
      消化完成后，会出现绿色的“√”符号  
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608450-1586764441.png)
    

### 1.3.1 在`CherryStudio`中使用本地知识库(EverEdit)和`DeepSeek`在线模型生成`zig`语法着色文件

#### 1.3.1.1 **打开知识库开关，并选择本地知识库，如下图所示：**

1.  **在`CherryStudio`的导航栏选择“助手”按钮，切换到`助手`模式**  
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608229-58959292.png)
    
2.  **在界面的底部聊天窗口中选择`本地知识库`**  
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608423-1665840454.png)
    

#### 1.3.1.2 **提问让AI生成`zig`语法文件，并不断进行修正**：

1.  **让AI生成一份EverEdit编辑器的zig语法着色文件**  
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608438-777455777.png)  
    注：以上是和AI的对话记录，用户内容部分即本人在`CherryStudio`聊天窗口中输入的内容， 下同。
    
2.  **顺手让AI生成1份`Zig`源代码用于测试**
    
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608266-332133491.png)
    

    const std = @import("std"); // 导入标准库
    
    // 定义一个结构体
    const Point = struct {
        x: i32,
        y: i32,
    
        // 结构体方法
        pub fn move(self: *Point, dx: i32, dy: i32) void {
            self.x += dx;
            self.y += dy;
        }
    };
    
    // 定义一个枚举
    const Direction = enum {
        North,
        South,
        East,
        West,
    
        // 枚举方法
        pub fn opposite(self: Direction) Direction {
            return switch (self) {
                .North => .South,
                .South => .North,
                .East => .West,
                .West => .East,
            };
        }
    };
    
    // 定义一个联合体
    const Value = union(enum) {
        Int: i32,
        Float: f32,
        Bool: bool,
    
        // 联合体方法
        pub fn print(self: Value) void {
            switch (self) {
                .Int => |i| std.debug.print("Int: {}\n", .{i}),
                .Float => |f| std.debug.print("Float: {}\n", .{f}),
                .Bool => |b| std.debug.print("Bool: {}\n", .{b}),
            }
        }
    };
    
    // 主函数
    pub fn main() void {
        // 变量声明
        const a: i32 = 10;
        var b: i32 = 20;
        b += a;
    
        // 控制流
        if (b > 15) {
            std.debug.print("b is greater than 15\n", .{});
        } else {
            std.debug.print("b is less than or equal to 15\n", .{});
        }
    
        // 循环
        var i: u8 = 0;
        while (i < 5) : (i += 1) {
            std.debug.print("i = {}\n", .{i});
        }
    
        // 结构体使用
        var p = Point{ .x = 0, .y = 0 };
        p.move(5, 10);
        std.debug.print("Point: ({}, {})\n", .{ p.x, p.y });
    
        // 枚举使用
        const dir = Direction.North;
        const oppositeDir = dir.opposite();
        std.debug.print("Opposite of North is {}\n", .{oppositeDir});
    
        // 联合体使用
        const val = Value{ .Int = 42 };
        val.print();
    }

3.  将AI生成的`zig.mac`语法着色文件保存到`EverEdit`安装目录下的`syntax`目录
    
4.  参考[配置EverEdit语法着色](https://www.cnblogs.com/tyysoft/articles/18546959)对`zig`语法进行配置
    
5.  告诉AI哪里出了错误，如下所示：  
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608201-74124348.png)
    
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608437-839823684.png)
    
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608422-1373177340.png)
    
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608292-327553816.png)  
    注：后面还有一些错误调试，就不一一列举了。
    
6.  最终的着色结果  
    ![](https://img2024.cnblogs.com/blog/3366088/202502/3366088-20250213175608437-1175686548.png)  
    注：一般的编辑器都没有部署LSP，因此对库函数中的关键字是不识别的，如：std.debug
    

1.4 附录：AI生成的`EverEdit`规范的`zig`语言语法着色文件`zig.mac`
-----------------------------------------------

    '******************************************************************************
    ' @file    zig.mac
    ' @brief   Zig 语言语法着色文件
    ' @author  tyysoft & DeepSeek-V3 & CherryStudio
    ' @date    2025-2-13
    ' @version 1.0
    ' @note    本文件定义了 Zig 语言的语法着色规则，包括注释、字符串、关键字、数据类型等的着色
    '          通过包含 const.mac 文件获取颜色常量，并使用 Doxygen 风格注释进行说明。
    '******************************************************************************
    
    ' 包含颜色定义文件
    Include ".\const.mac"
    
    ' 创建 Zig 语法着色对象
    Dim zig
    Set zig = Parser.CreateParser()
    
    ' 设置最大解析字符数
    zig.SetParseMax(1000)
    
    ' 定义注释
    Dim regionLineComment, regionBlockComment
    Set regionLineComment = zig.CreateRegion(COLOR_COMMENT1, "+//+", "$", True)
    Set regionBlockComment = zig.CreateRegion(COLOR_COMMENT1, "+/*+", "+*/+", True)
    
    ' 定义字符串
    Dim regionString
    Set regionString = zig.CreateStringRegion(COLOR_STRING1, """", """", False)
    
    ' 定义关键字
    Dim itemKeyword
    Set itemKeyword = zig.CreateWord(COLOR_WORD1, "const var fn if else while for switch case break continue return struct enum union error defer try catch unreachable async await suspend resume using comptime noalias volatile align linksection export extern packed anytype undefined null true false and or xor not pub", True)
    
    ' 定义数据类型
    Dim itemDataType
    Set itemDataType = zig.CreateWord(COLOR_WORD2, "i8 i16 i32 i64 u8 u16 u32 u64 f16 f32 f64 bool void anyerror anytype anyframe", True)
    
    ' 定义函数
    Dim itemFunction
    Set itemFunction = zig.CreateItem(COLOR_FUNCTION, "\b[a-zA-Z_]\w*\s*\(", True)
    
    ' 定义数字
    Dim itemNumber
    Set itemNumber = zig.CreateItem(COLOR_NUMBER, "\b\d+(\.\d+)?\b", False)
    
    ' 定义操作符
    Dim itemOperator
    Set itemOperator = zig.CreateItem(COLOR_OPERATOR, "[+\-*/%&|^<>=!]+", False)
    
    ' 将定义的元素添加到语法着色对象
    zig.AddRegion regionLineComment
    zig.AddRegion regionBlockComment
    zig.AddRegion regionString
    zig.AddItem itemKeyword
    zig.AddItem itemDataType
    zig.AddItem itemFunction
    zig.AddItem itemNumber
    zig.AddItem itemOperator
    
    ' 设置代码折叠规则
    zig.FoldText "{", False, "}", False
    
    ' 设置括号匹配
    zig.SetPairs "(){}[]"
    
    ' 定义注释快捷键
    zig.CommentLine "//"
    zig.CommentBlock "/*", "*/"
    
    ' 添加自定义高亮（示例：高亮注释中的TODO）
    Dim itemTodo
    Set itemTodo = zig.CreateItem(COLOR_HIGHLIGHT1, "\bTODO\b", True)
    regionLineComment.AddItem itemTodo
    regionBlockComment.AddItem itemTodo

* * *

作者声明：本文用于记录和分享作者的学习心得，可能有部分文字或示例来源自豆包AI，由于本人水平有限，难免存在表达错误，欢迎留言交流和指教！  
Copyright © 2022~2025 All rights reserved.