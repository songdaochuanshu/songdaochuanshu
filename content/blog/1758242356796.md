---
layout: post
title: 'æ‹¥æŠ±æ–°ä¸€ä»£ Web 3D å¼•æ“ï¼ŒThree.js é¡¹ç›®å¿«é€Ÿå‡çº§ Galacean æŒ‡å—'
date: "2025-09-19T00:39:16Z"
---
æ‹¥æŠ±æ–°ä¸€ä»£ Web 3D å¼•æ“ï¼ŒThree.js é¡¹ç›®å¿«é€Ÿå‡çº§ Galacean æŒ‡å—
===========================================

æœ¬æ–‡ä»å¤šä¸ªç»´åº¦å¯¹æ¯” Galacean å’Œ Three.js ä¸¤æ¬¾Web3D å¼•æ“çš„å·®å¼‚ï¼Œå¹¶ä»‹ç»æ‹Ÿæˆ‘å½¢è±¡é¡¹ç›®ä»Three.js åˆ‡æ¢åˆ° Galacean ä»¥åå¸¦æ¥çš„æå‡ä»¥åŠé¡¹ç›®è¿ç§»çš„å¿ƒå¾—ï¼Œä¸ºå…¶ä»– Three.js é¡¹ç›®å‡çº§åˆ° Galacean æä¾›å‚è€ƒã€‚

> ä½œè€…ï¼š vivo äº’è”ç½‘å‰ç«¯å›¢é˜Ÿ- Su Ning
> 
> æœ¬æ–‡ä»å¤šä¸ªç»´åº¦å¯¹æ¯” Galacean å’Œ Three.js ä¸¤æ¬¾Web3D å¼•æ“çš„å·®å¼‚ï¼Œå¹¶ä»‹ç»æ‹Ÿæˆ‘å½¢è±¡é¡¹ç›®ä»Three.js åˆ‡æ¢åˆ° Galacean ä»¥åå¸¦æ¥çš„æå‡ä»¥åŠé¡¹ç›®è¿ç§»çš„å¿ƒå¾—ï¼Œä¸ºå…¶ä»– Three.js é¡¹ç›®å‡çº§åˆ° Galacean æä¾›å‚è€ƒã€‚

1åˆ†é’Ÿçœ‹å›¾æŒæ¡æ ¸å¿ƒè§‚ç‚¹ğŸ‘‡

ä¸€ã€èƒŒæ™¯
====

Web 3D æŠ€æœ¯çš„å‘å±•æ—¥æ–°æœˆå¼‚ï¼Œä¸ºæˆ‘ä»¬å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æ²‰æµ¸å¼ä½“éªŒã€‚ä»è™šæ‹Ÿå±•ç¤ºåˆ°æ¸¸æˆå¼€å‘ï¼Œä»å»ºç­‘å¯è§†åŒ–åˆ°æ•™è‚²æ¨¡æ‹Ÿï¼ŒWeb 3D æŠ€æœ¯çš„åº”ç”¨åœºæ™¯æ„ˆå‘å¹¿æ³›ã€‚è€Œåœ¨è¿™ä¸€é¢†åŸŸï¼ŒThree.js ä½œä¸ºä¸€æ¬¾å¹¿å—æ¬¢è¿çš„ JavaScript 3D åº“ï¼Œå‡­å€Ÿå…¶ç®€æ´æ˜“ç”¨çš„ API å’Œä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¸®åŠ©ä¼—å¤šå¼€å‘è€…å®ç°äº†ç²¾å½©çš„ 3D é¡¹ç›®ã€‚

ç„¶è€Œï¼Œéšç€é¡¹ç›®å¤æ‚åº¦çš„ä¸æ–­æå‡ï¼Œä»¥åŠç”¨æˆ·å¯¹æ€§èƒ½å’Œä½“éªŒè¦æ±‚çš„æ—¥ç›Šè‹›åˆ»ï¼ŒThree.js é€æ¸æ˜¾éœ²å‡ºä¸€äº›å±€é™æ€§ã€‚æ¯”å¦‚åœ¨å¤„ç†é‡è´Ÿè½½æ—¶ï¼Œå¾ˆå®¹æ˜“é‡åˆ°æ€§èƒ½ç“¶é¢ˆï¼Œå‡ºç°å¡é¡¿ã€æ‰å¸§ç­‰é—®é¢˜ã€‚è¿™å°±å¦‚åŒä¸€ä½ç»éªŒä¸°å¯Œçš„è½¦æ‰‹ï¼Œé©¾é©¶ç€ä¸€è¾†æ›¾ç»æ€§èƒ½å“è¶Šçš„èµ›è½¦ï¼Œä½†åœ¨é¢å¯¹æ„ˆå‘å¤æ‚çš„èµ›é“å’Œæ¿€çƒˆçš„ç«äº‰æ—¶ï¼Œå´å‘ç°è½¦è¾†çš„åŠ¨åŠ›å’Œæ“æ§æ€§æ¸æ¸åŠ›ä¸ä»å¿ƒã€‚

äºŒã€Galaceanï¼šæ–°ä¸€ä»£ Web 3D å¼•æ“
========================

2.1 ä¸šåŠ¡ç®€ä»‹
--------

æ‹Ÿæˆ‘å½¢è±¡æ˜¯ vivo è´¦å·ä¸­çš„ä¸€ä¸ª3Dæ•°å­—äººåŠŸèƒ½ï¼Œæä¾›ä¸€ç§ä»£è¡¨è‡ªç”±ã€ä¸ªæ€§ã€åˆ›æ–°å’Œæ—¶å°šçš„è™šæ‹Ÿå½¢è±¡ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ ç”ŸåŠ¨ã€ç›´è§‚ã€æœ‰è¶£çš„äº¤æµæ–¹å¼ã€‚é‡‡ç”¨ Native+H5æ··åˆçš„å¼€å‘æ–¹å¼ï¼Œå…¶ä¸­ 3D æ¸²æŸ“çš„éƒ¨åˆ†åŸºäº Three.js è¿›è¡Œå¼€å‘ã€‚

2.2 æŠ€æœ¯æŒ‘æˆ˜ä¸ç—›ç‚¹
-----------

*   **æ€§èƒ½ç“¶é¢ˆï¼š**äººç‰©æ¨¡å‹åŒ…å«å¤§é‡å½¢æ€é”®ä»¥å®ç°å¤šæ ·åŒ–é¢éƒ¨ç‰¹å¾ï¼Œå¯¼è‡´æ¨¡å‹åŠ è½½è§£æè€—æ—¶è¿‡é•¿ã€‚
    
*   **çº¿ç¨‹é˜»å¡ï¼š**å—é™äºJSå•çº¿ç¨‹ç‰¹æ€§ï¼Œæ¨¡å‹è§£æè¿‡ç¨‹ä¼šé€ æˆé¡µé¢çŸ­æš‚æ— å“åº”ã€‚
    
*   **å¤šæ¨¡å‹æ¸²æŸ“ï¼š**å¥—è£…åˆ‡æ¢ç­‰åœºæ™¯ä¸‹ï¼Œå¤šä¸ªæ¨¡å‹åŒæ—¶æ¸²æŸ“æ—¶æ€§èƒ½é—®é¢˜å°¤ä¸ºçªå‡ºã€‚
    
*   **é˜´å½±ä¼˜åŒ–ï¼š**Three.js çš„é˜´å½±æ¸²æŸ“æ€§èƒ½æ¶ˆè€—å¤§ï¼Œä¸å¾—ä¸é€šè¿‡å±€éƒ¨é˜´å½±å’Œé™åˆ¶æ•æ‰èŒƒå›´ç­‰æŠ˜ä¸­æ–¹æ¡ˆæ¥å¹³è¡¡ç”»è´¨ä¸æ€§èƒ½ã€‚
    

2.3 Galacean å¼•æ“æ ¸å¿ƒä¼˜åŠ¿
-------------------

Galacean æ˜¯ä¸€æ¬¾å¼€æºçš„ Web æ¸¸æˆå¼•æ“ï¼Œè‡´åŠ›äºæ‰“é€ ä¸€ä¸ªå¼€æ”¾ã€æ˜“ç”¨ã€é«˜æ•ˆçš„æ¸¸æˆå¼€å‘å·¥å…·ï¼Œå¯ä»¥é€šè¿‡åœ¨çº¿ç¼–è¾‘å™¨æˆ–è€…çº¯ä»£ç çš„å½¢å¼è¿›è¡Œä½¿ç”¨ã€‚

é’ˆå¯¹ç°å­˜çš„æŠ€æœ¯æŒ‘æˆ˜ä¸ç—›ç‚¹ï¼ŒGalaceanåšäº†æ·±åº¦ä¼˜åŒ–ï¼š

> *   **å¤šçº¿ç¨‹å¤„ç†ï¼š**é‡‡ç”¨Workeré¿å…ä¸»çº¿ç¨‹é˜»å¡ã€‚
>     
> *   **ç§»åŠ¨ç«¯é€‚é…ï¼š**å¯¹å¤§é‡å¸¸é‡è¿›è¡Œè¿‘ä¼¼å–å€¼ä¼˜åŒ–ï¼Œå®Œç¾é€‚é…ç§»åŠ¨ç«¯ã€‚
>     
> *   **æ€§èƒ½çªç ´ï¼š**ä¼˜åŒ–æ•°æ®ä¼ è¾“é“¾è·¯ï¼Œåˆ›æ–°ç¼“å­˜è®¾è®¡ï¼Œæ˜¾è‘—é™ä½é‡è´Ÿè½½åœºæ™¯ä¸‹çš„å¡é¡¿ç°è±¡ã€‚
>     

å¯¹æ¯”è§†é¢‘1ï¼šåŠ è½½é€Ÿåº¦

å¯¹æ¯”è§†é¢‘2ï¼šå¥—è£…åˆ‡æ¢

æ­¤å¤–ï¼ŒGalacean åŸºäº ECï¼ˆEntity-Componentï¼‰æ¶æ„è®¾è®¡ï¼Œè€Œé Three.js çš„é¢å‘å¯¹è±¡ï¼Œå¤§å¹…æå‡äº†å¼€å‘çš„çµæ´»æ€§ã€‚

è¿‘æœŸæˆ‘ä»¬å°†æ¸²æŸ“å¼•æ“ç”± Three.js åˆ‡æ¢ä¸º Galaceanã€‚è¿™ä¸€ä¸¾æªä¸ä»…è§£å†³äº†é¡µé¢å¡é¡¿é—®é¢˜ï¼Œè¿˜æå‡äº†æµè§ˆå™¨å…¼å®¹æ€§ï¼ˆå¯æ”¯æŒåˆ° chrome82ï¼‰ï¼Œå¸§ç‡è¡¨ç°æ›´å‡ºè‰²ï¼Œç”»é¢è´¨æ„Ÿä¹Ÿå¾—åˆ°æ˜¾è‘—æ”¹å–„ã€‚æ•´ä½“åˆ‡æ¢è¿‡ç¨‹è¾ƒä¸ºå¹³æ»‘ï¼Œä½†ä¹Ÿé‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚æ¥ä¸‹æ¥ï¼Œå°†ä¸å¤§å®¶åˆ†äº«æ­¤æ¬¡æ•´ä½“å‡çº§çš„ç›¸å…³ç»éªŒã€‚

ä¸‰ã€è°ƒä¼˜è¿‡ç¨‹
======

**ä»»åŠ¡æ‹†è§£ï¼š**

ä½œä¸ºä¸€ä¸ªæ•°å­—äººé¡¹ç›®ï¼Œæ¶‰åŠåˆ°å¼•æ“å‡çº§çš„æ¨¡å—å¤§è‡´æœ‰

**â‘ ç¯å¢ƒåˆå§‹åŒ–**ï¼ˆåœºæ™¯ã€ç›¸æœºã€å…‰çº¿ã€å¼•æ“è®¾ç½®ï¼‰

**â‘¡ æ¨¡å‹åŠ è½½**

*   éª¨æ¶è·å–
    
*   æè´¨è·å–
    
*   åŠ¨ç”»è·å–
    

**â‘¢å¦†å®¹ã€ç©¿æ­è¿˜åŸ**

*   å½¢æ€é”®ä¿®æ”¹
    
*   è´´å›¾ã€é¢œè‰²ä¿®æ”¹
    
*   æ¨¡å‹æ›¿æ¢
    
*   å¤´åƒï¼ˆé™æ€å¤´åƒã€åŠ¨æ€å¤´åƒï¼‰å¯¼å‡º
    
*   å£çº¸ï¼ˆé™æ€å£çº¸ã€åŠ¨æ€å£çº¸ã€è§†å·®å£çº¸ï¼‰å¯¼å‡º
    

ç»è¿‡æ¢³ç†ï¼Œå¯ä»¥å¤§è‡´åˆ†ä¸ºå››ç±»ï¼š

> *   åˆå§‹åŒ–
>     
> *   æ¨¡å‹åŠ è½½
>     
> *   ç´ ææ›¿æ¢
>     
> *   åŠ¨ç”»çŠ¶æ€
>     

æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹è¿™å‡ ä¸ªéƒ¨åˆ†è¿›è¡Œåˆ†åˆ«çš„å¤„ç†

3.1 åˆå§‹åŒ–
-------

æœ‰åˆ«äº Three.js çš„æ¸²æŸ“å™¨åˆ›å»ºï¼ŒGalacean çš„ engine åˆå§‹åŒ–æ˜¯å¼‚æ­¥æ–¹æ³•ï¼Œæ‰€ä»¥åç»­ç”¨åˆ°ç”¨åˆ°engineçš„åœ°æ–¹éœ€è¦è€ƒè™‘åŠ è½½çš„æ—¶åºï¼Œä»¥åŠengineå­˜åœ¨çŠ¶æ€çš„åˆ¤æ–­ã€‚å¦å¤–ï¼ŒThree.js ä¸­ renderer çš„æ¸²æŸ“è¡Œä¸ºéœ€è¦æ‰‹åŠ¨è°ƒç”¨ï¼Œä¸€èˆ¬æ˜¯ä½¿ç”¨requestAnimationFrameå¾ªç¯è°ƒç”¨ï¼Œè€ŒGalaceanåˆ™ä¸éœ€è¦ï¼Œå¼•æ“å¼€å§‹æ¸²æŸ“åªéœ€è¦è°ƒç”¨ä¸€æ¬¡ engine.run å³å¯ã€‚

    constÂ renderer=newÂ THREE.WebGLRenderer({
    Â Â alpha:Â true,
    Â Â antialias:Â true,
    })
    document.body.appendChild(renderer.domElement)
    constÂ scene =Â newÂ THREE.Scene()
    constÂ camera =Â newÂ THREE.PerspectiveCamera(15,Â window.innerWidth/window.innerHeight,Â 0.1,Â 100)
    requestAnimationFrame(functionÂ render() {
    Â  renderer.render(scene, camera)
    Â Â requestAnimationFrame(render)
    })

    constÂ engine =Â awaitÂ WebGLEngine.create({
    Â  canvas,
    Â Â physics:Â newÂ LitePhysics()
    })
    engine.run()

åœ¨ Three.js ä¸­ï¼Œå°ºå¯¸å•ä½ç»Ÿä¸€ä»¥ç±³ä¸ºåŸºå‡†ï¼Œæ— éœ€é¢å¤–è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚ä¸è¿‡åœ¨è§’åº¦å•ä½çš„ä½¿ç”¨ä¸Šå­˜åœ¨å·®å¼‚ï¼šThree.js é‡Œï¼Œä»…ç›¸æœºçš„ fovï¼ˆè§†åœºè§’ï¼‰é‡‡ç”¨è§’åº¦å•ä½ï¼Œå…¶ä»–æ¶‰åŠè§’åº¦çš„å‚æ•°å‡ä»¥å¼§åº¦è®¡é‡ï¼›è€Œ Galacean åˆ™é‡‡ç”¨æ›´ä¸ºç»Ÿä¸€çš„è®¾å®šï¼Œæ‰€æœ‰è§’åº¦ç›¸å…³å•ä½å‡ä¸ºè§’åº¦ã€‚

    /** Three.js */
    camera.fov =Â 15
    item.rotation.y =Â 15Â * Math.PI/180
    
    /** Galacean */
    camera.fieldOfView =Â 15
    item.rotation.y =Â 15

åœ¨Three.jsä¸­é¢œè‰²çš„è®¾ç½®æ›´åŠ çµæ´»ï¼Œå¯ä»¥ä½¿ç”¨16è¿›åˆ¶æˆ–è€…RGBå€¼æ¥è¿›è¡Œèµ‹å€¼ï¼Œä½†æ˜¯åœ¨Galaceanä¸­åªèƒ½é€šè¿‡RGBæ¥è¿›è¡Œèµ‹å€¼ï¼Œä¸”æœ‰åˆ«äº0-255çš„å–å€¼èŒƒå›´ï¼ŒGalaceanä¸­çš„é¢œè‰²èŒƒå›´æ˜¯0-1ã€‚ä»Galacean1.5ç‰ˆæœ¬å¼€å§‹ï¼Œé»˜è®¤çš„è‰²å½©ç©ºé—´æ”¹ä¸ºçº¿æ€§ï¼Œåœ¨ä»£ç ä¸­éœ€è¦æ‰‹åŠ¨è½¬æ¢ä¸€ä¸‹ã€‚

    /** Three.js */
    directLight.color=0xffffff
    directLight.intensity=0.9
    
    /** Galacean */
    constÂ color =Â newÂ Color(0.9,Â 0.9,Â 0.9,Â 1)
    color.toLinear(color)
    directLight.color = color

3.2 æ¨¡å‹åŠ è½½
--------

å¯¹äºåŒ…å«å¤§é‡å½¢æ€é”®å’ŒåŠ¨ç”»çš„æ¨¡å‹ï¼Œå°†æ¨¡å‹æ‰“æˆzipåŒ…å¯ä»¥æœ‰æ•ˆçš„å‹ç¼©æ¨¡å‹çš„ä½“ç§¯ï¼Œä¸è®ºæ˜¯Three.jsè¿˜æ˜¯Galaceanéƒ½ä¸æ”¯æŒåŠ è½½zipåŒ…ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªè¡Œæ‰©å±•æ¨¡å‹åŠ è½½çš„é“¾è·¯ï¼Œå°†zipä¸‹è½½åè§£å‹å‡ºçš„æ¨¡å‹è·å–ObjectUrlå†æ”¾åˆ°å„è‡ªçš„åŠ è½½å™¨ä¸­åŠ è½½ï¼Œè¿™æ ·åŠ è½½è¿›åº¦çš„è·å–ä¹Ÿå¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ï¼Œä¸éœ€è¦è¿›è¡Œé¢å¤–çš„æ”¹é€ ã€‚

    exportclassModelLoader {
    Â Â engine:Â WebGLEngine
    Â Â constructor(engine: WebGLEngine){
    Â  Â Â this.engineÂ = engine
    Â  }
    Â Â asyncÂ load(src:Â string) {
    Â  Â Â constÂ url =Â awaitÂ fileLoader(src)
    Â  Â  returnthis.engine.resourceManager.load<GLTFResource>({
    Â  Â  Â  url,
    Â  Â  Â Â type:Â AssetType.GLTF
    Â  Â  })
    Â  }
    }

Three.js è§£æ glTF æ¨¡å‹è¾“å‡ºçš„æ•°æ®ç»“æ„è¾ƒä¸ºç®€å•ï¼Œä¸»è¦ä½¿ç”¨æ¨¡å‹çš„åœºæ™¯å’ŒåŠ¨ç”»ç‰‡æ®µã€‚ç”±äºåç»­éœ€é’ˆå¯¹ç‰¹å®šæè´¨è¿›è¡Œæ›¿æ¢ï¼Œæ‰€ä»¥è¦æ ¹æ®èŠ‚ç‚¹åè·å–ç‰¹å®šèŠ‚ç‚¹ï¼Œå†å–å‡ºèŠ‚ç‚¹ä¸­çš„æè´¨ä¿¡æ¯ï¼Œæ¨¡å‹çš„éª¨æ¶ä¹Ÿé€šè¿‡è¿™ç§æ–¹å¼è·å–ã€‚è€Œ Galacean è¾“å‡ºçš„æ•°æ®æ›´ä¸ºå…¨é¢ï¼Œé™¤åŠ¨ç”»ç‰‡æ®µå’Œå®ä½“ä¿¡æ¯å¤–ï¼Œæ¨¡å‹ä¸­ä½¿ç”¨çš„æè´¨ã€è´´å›¾ã€è’™çš®å’Œç½‘æ ¼ä¿¡æ¯ä¹Ÿä¼šåˆ†é—¨åˆ«ç±»å±•ç¤ºï¼Œéœ€è¦å¯¹åº”å†…å®¹æ—¶ç›´æ¥è·å–å³å¯ï¼Œç›¸æ¯” Three.js æ›´åŠ æ–¹ä¾¿ã€‚

3.3 ç´ ææ›¿æ¢
--------

ç´ ææ›¿æ¢å¦‚ä¸Šæ–‡æ€»ç»“åˆ†ä¸ºå››ç§ï¼Œåˆ†åˆ«æ˜¯é¢œè‰²ã€è´´å›¾ã€å½¢æ€é”®å’Œæ¨¡å‹çš„æ›¿æ¢ï¼Œé¢œè‰²è®¾ç½®æˆ‘ä»¬åœ¨åˆå§‹åŒ–ä¸­å·²ç»è®²è§£ï¼Œè€Œæ¨¡å‹åŠ è½½å’Œå±•ç¤ºä¹Ÿæ²¡æœ‰ç‰¹åˆ«çš„å†…å®¹ï¼Œæ— éæ˜¯èŠ‚ç‚¹/å®ä½“çš„æ·»åŠ å’Œç§»é™¤ï¼Œè¿™é‡Œæˆ‘ä»¬è®²ä¸‹è´´å›¾å’Œå½¢æ€é”®ä¿®æ”¹çš„ä¸€äº›tipsã€‚

åœ¨Three.jsä¸­ä¿®æ”¹æè´¨è´´å›¾mapå¯ä»¥ç›´æ¥ç›´æ¥ä½¿ç”¨canvasæˆ–è€…imageï¼Œä¿®æ”¹åéœ€è¦å°†æè´¨needsUpdateå±æ€§è®¾ç½®ä¸ºtrueã€‚è€Œåœ¨Galaceanéœ€è¦å…ˆå°†å›¾ç‰‡åŠ è½½ä¸ºtextureï¼Œå†è¿›è¡Œèµ‹å€¼ã€‚

    /** Three.js */
    material.map=canvas
    material.needsUpdate =Â true
    
    /** Galacean */
    constÂ texture: Texture2D = await engine.resourceManager.load({
    Â  url,
    Â Â type: AssetType.Texture2D
    })
    material.baseTexture = texture

åœ¨Three.jsä¸­ä¿®æ”¹å½¢æ€é”®ï¼Œå¯ä»¥å…ˆé€šè¿‡ç½‘æ ¼ä¸­çš„morphTargetDictionaryå±æ€§è·å–åˆ°éœ€è¦ä¿®æ”¹çš„å½¢æ€é”®çš„ç´¢å¼•ï¼Œç„¶åä¿®æ”¹morphTargetInfluencesä¸­å¯¹åº”ç´¢å¼•çš„å€¼å³å¯ã€‚

åœ¨Galaceanä¸­ç½‘æ ¼æ¸²æŸ“å™¨ä¸­æ²¡æœ‰å­˜å‚¨å½¢æ€é”®çš„ç´¢å¼•ä¿¡æ¯ï¼Œè€Œæ˜¯å­˜å‚¨åœ¨MeshRendererä¸‹çš„meshå±æ€§ä¸‹çš„blendShapeså±æ€§ä¸­ï¼Œé€šè¿‡è·å–å¯¹åº”åç§°çš„å½¢æ€é”®åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ï¼Œä¿®æ”¹ç½‘æ ¼æ¸²æŸ“å™¨ä¸­blendShapeWeightså±æ€§å¯¹åº”ä¸‹æ ‡çš„å€¼ã€‚

    /** Three.js */
    constÂ index = morphTargetDictionary[keyName]
    
    ifÂ (index !==Â undefined) {
    Â  mesh.morphTargetInfluences[index] = value
    }
    
    /** Galacean */
    constÂ blendShapes = skinMeshRenderer.mesh.blendShapes
    constÂ index = blendShapes.findIndex(i=>i.name===keyName)
    ifÂ (index > -1){
    Â  skinMeshRenderer.blendShapeWeights[index] = value
    }

3.4 åŠ¨ç”»
------

ç›¸è¾ƒäºThree.jsçš„AnimationMixerå’ŒAnimationClipï¼ŒGalaceanæ‹¥æœ‰æ›´åŠ å®Œå–„çš„é¢å‘ç»„ä»¶çš„åŠ¨ç”»ç³»ç»Ÿï¼Œæ”¯æŒ çŠ¶æ€æœºã€æ··åˆåŠ¨ç”»ã€æ—¶é•¿å‹ç¼©ç­‰ï¼Œä¸åŒåŠ¨ç”»ä¹‹é—´çš„åˆ‡æ¢ä¸æ’­æ”¾æ›´åŠ ç®€å•æ˜“ç»´æŠ¤ã€‚

    /** Three.js æ’­æ”¾åŠ¨ç”»ç‰‡æ®µ */
    constÂ mixer =Â newÂ THREE.AnimationMixer(scene)
    constÂ action=mixer.clipAction(avatarClip)
    action.play()
    ticker.addEvent(delta => {
    Â  mixer.update(delta)
    })
    
    /** Galacean æ·»åŠ çŠ¶æ€æœºï¼Œæ’­æ”¾å®Œæˆå›åˆ°å¾…æœºçŠ¶æ€ */
    constÂ animationState = animator.findAnimatorState('action')
    constÂ idleStatle = animator.findAnimatorState('idle')
    constÂ transition =Â newÂ AnimatorStateTransition()
    transition.duration =Â 1
    transition.offset =Â 0
    transition.exitTime =Â 1
    transition.destinationState = idleStatle
    animationState.addTransition(transition)
    animator.play('action')

å››ã€ç»“è¯­
====

Galacean çš„å‡ºç°ï¼Œæ— ç–‘ä¸º Web 3D å¼€å‘é¢†åŸŸå¸¦æ¥äº†æ–°çš„æ´»åŠ›ã€‚å®ƒä¸ä»…è§£å†³äº† Three.js ç­‰ä¼ ç»ŸæŠ€æœ¯åœ¨æ€§èƒ½å’ŒåŠŸèƒ½ä¸Šçš„è¯¸å¤šç—›ç‚¹ï¼Œè¿˜ä»¥å…¶å“è¶Šçš„æ€§èƒ½ã€ä¸°å¯Œçš„åŠŸèƒ½å’Œæ˜“ç”¨æ€§ï¼Œä¸ºå¼€å‘è€…æ‰“å¼€äº†ä¸€æ‰‡é€šå¾€æ›´å¹¿é˜”åˆ›æ„ç©ºé—´çš„å¤§é—¨ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGalaceanä¸åŒç‰ˆæœ¬ä¹‹é—´çš„APIå·®å¼‚è¾ƒå¤§ï¼Œéœ€è¦è¿›è¡Œç”„åˆ«ï¼ŒåŒæ—¶å¼€å‘æ–‡æ¡£åŠç›¸å…³çš„æ¡ˆä¾‹ä¹Ÿéœ€è¦è¿›ä¸€æ­¥å®Œå–„ã€‚

å¯¹äºå…¨æ–°çš„é¡¹ç›®ï¼ŒGalaceanæä¾›ç¼–ç æˆ–åœ¨çº¿ç¼–è¾‘å™¨ä¸¤ç§æ–¹å¼ä¿éšœåˆ›æ„çš„é«˜æ•ˆè½åœ°ï¼Œè¯¦ç»†çš„æ–‡æ¡£å’Œæ¡ˆä¾‹ä¹Ÿä¾¿äºæ¥è§¦ Web3D å¼€å‘çš„æ–°äººå¿«é€Ÿä¸Šæ‰‹ã€‚

å¯¹äºå­˜é‡çš„é¡¹ç›®ï¼ŒGalaceançš„è¿ç§»æˆæœ¬ä¸é«˜ï¼Œä¸”æ•´ä¸ªè¿‡ç¨‹å¹³æ»‘å¯æ§ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæå‡ç°æœ‰é¡¹ç›®çš„ç”»é¢è¡¨ç°å’Œæ€§èƒ½ã€‚ä¸ºæœªæ¥å¤æ‚åº¦æ›´é«˜çš„éœ€æ±‚æä¾›æ€§èƒ½ä¿éšœã€‚

åˆ†äº« vivo äº’è”ç½‘æŠ€æœ¯å¹²è´§ä¸æ²™é¾™æ´»åŠ¨ï¼Œæ¨èæœ€æ–°è¡Œä¸šåŠ¨æ€ä¸çƒ­é—¨ä¼šè®®ã€‚