---
layout: post
title: '分析基于ASP.NET Core Kernel的gRPC服务在不同.NET版本的不同部署方式的不同线程池下的性能表现'
date: "2025-01-06T00:38:15Z"
---
分析基于ASP.NET Core Kernel的gRPC服务在不同.NET版本的不同部署方式的不同线程池下的性能表现
==========================================================

分析基于ASP.NET Core Kernel的gRPC服务在不同.NET版本的不同部署方式的不同线程池下的性能表现
==========================================================

使用默认的 gRPC 项目模板创建，垃圾回收器类型为 ServerGC(Server garbage collection)。

使用 ghz 工具在不同的`请求总数`、`连接数`、`并发数`的参数下，进行压力测试，接口为 `/greet.Greeter/SayHello`。

ghz工具和gRPC服务都是在同一台电脑上运行。

**操作系统**：Windows 11 24H2

**电脑硬件配置**

*   主板：ASUS TUF-GAMING-B660M-PLUS-D4
*   处理器：Intel i7-12700K
*   内存条：Kingston Fury DDR4 3200MHz 64GB(32GBx2套条)
*   固态硬盘：Samsung SSD 980 PRO 2TB

由于 9 份实验数据篇幅较长，因此放在最后，先写分析和总结。

**实验数据列表**

*   [.NET 6.0-Runtime-DefaultThreadPool](#net-60-runtime-defaultthreadpool)
*   [.NET 8.0-Runtime-PortableThreadPool](#net-80-runtime-portablethreadpool)
*   [.NET 8.0-Runtime-WindowsThreadPool](#net-80-runtime-windowsthreadpool)
*   [.NET 8.0-NativeAOT-PortableThreadPool](#net-80-nativeaot-portablethreadpool)
*   [.NET 8.0-NativeAOT-WindowsThreadPool](#net-80-nativeaot-windowsthreadpool)
*   [.NET 9.0-Runtime-PortableThreadPool](#net-90-runtime-protablethreadpool)
*   [.NET 9.0-Runtime-WindowsThreadPool](#net-90-runtime-windowsthreadpool)
*   [.NET 9.0-NativeAOT-PortableThreadPool](#net-90-nativeaot-protablethreadpool)
*   [.NET 9.0-NativeAOT-WindowsThreadPool](#net-90-nativeaot-windowsthreadpool)

PS：.NET 7.0 不是LTS，且生命周期已结束，因此不在本文的实验范围。

而 .NET 6.0 虽然生命周期也刚结束不久，但用户较多，因此纳入实验范围。

由于时间关系，本次实验仅在 Windows 平台进行，如各位看官需要 Linux 平台的实验数据，请留言，我将根据留言人数多少决定是否抽空继续实验。

需要注意的是，WindowsThreadPool 仅限于 Windows 平台。

* * *

> **免责声明**
> 
> *   本文所有测试均基于当前特定环境、硬件、系统、网络等条件下所得，结果仅能代表在这些条件下的相对表现。
> *   实验数据会存在不可避免的测试误差（包括但不限于系统负载、网络波动、工具采样、环境差异等）。在不同的环境、不同硬件上，性能数据可能会有较大差异。
> *   本文结论仅供参考，不构成对任一产品或技术的绝对保证。实际生产环境中的选择应结合自身业务场景和更多实测数据来综合评估。

* * *

**目录**

*   [一、性能探查器-异步活动 关于greet.Greeter/SayHello接口执行耗时计数汇总](#%E4%B8%80%E6%80%A7%E8%83%BD%E6%8E%A2%E6%9F%A5%E5%99%A8-%E5%BC%82%E6%AD%A5%E6%B4%BB%E5%8A%A8-%E5%85%B3%E4%BA%8Egreetgreetersayhello%E6%8E%A5%E5%8F%A3%E6%89%A7%E8%A1%8C%E8%80%97%E6%97%B6%E8%AE%A1%E6%95%B0%E6%B1%87%E6%80%BB)
*   [二、测试结果综合分析](#%E4%BA%8C%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C%E7%BB%BC%E5%90%88%E5%88%86%E6%9E%90)
*   [三、建议](#%E4%B8%89%E5%BB%BA%E8%AE%AE)
*   [四、结语](#%E5%9B%9B%E7%BB%93%E8%AF%AD)

**一、性能探查器-异步活动 关于greet.Greeter/SayHello接口执行耗时计数汇总**
---------------------------------------------------

发布方式

线程池

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

.NET 6.0-Runtime

DefaultThreadPool

POST /greet.Greeter/SayHello

2099400

6,899.47

254,194.78

0.93(平均)

.NET 8.0-Runtime

PortableThreadPool

POST /greet.Greeter/SayHello

2099400

24,632.85

282,396.70

0.22(平均)

.NET 8.0-Runtime

WindowsThreadPool

POST /greet.Greeter/SayHello

2099400

27,946.85

316,615.52

0.29(平均)

.NET 8.0-NativeAOT

PortableThreadPool

POST /greet.Greeter/SayHello

2099400

14,734.67

270,186.24

0.20(平均)

.NET 8.0-NativeAOT

WindowsThreadPool

POST /greet.Greeter/SayHello

2099400

18,136.84

276,546.40

0.24(平均)

.NET 9.0-Runtime

PortableThreadPool

POST /greet.Greeter/SayHello

2099400

17,256.75

276,514.64

0.21(平均)

.NET 9.0-Runtime

WindowsThreadPool

POST /greet.Greeter/SayHello

2099400

9,874.09

267,376.96

0.23(平均)

.NET 9.0-NativeAOT

PortableThreadPool

POST /greet.Greeter/SayHello

2099400

18,121.15

282,418.47

0.18(平均)

.NET 9.0-NativeAOT

WindowsThreadPool

POST /greet.Greeter/SayHello

2099400

8,990.53

253,278.75

0.19(平均)

**二、测试结果综合分析**
--------------

1.  **gRPC接口在不同调用次数、不同并发数、不同连接数的耗时表现**
    
    *   纵观所有版本与线程池，**在调用次数(TotalCalls)较小**（如100~1000）时，无论是RPS还是Latency，都表现相对优异。
    *   **并发数(Concurrency)与连接数(Connections)上升**后，RPS上升但平均Latency有所增长，某些配置出现**极端慢请求**(Slowest)。
    *   连接数和并发数越大，.NET版本、线程池、NativeAOT vs Runtime 的差异越明显，某些高负载下配置延迟变大或RPS受限。
2.  **gRPC接口在不同线程池下的表现**
    
    *   **WindowsThreadPool**在极高并发场景下有不错的尾延迟控制，但有时平均延迟略高。
    *   **PortableThreadPool**在中高并发场景下稳定，平均延迟较低，但在极端并发下尾部延迟可能拉高。
    *   **DefaultThreadPool on the .NET 6.0**在低并发时也表现良好，但在高负载场景略逊于 .NET 8.0/.NET 9.0。
3.  **.NET不同版本的不同线程池以及不同部署方式的执行性能表现**
    
    *   **NativeAOT**在 .NET 8/.NET 9 下普遍能获得更好的高并发表现（更低延迟/更高 RPS）。
    *   .NET 6.0 稳定但不及 .NET 8.0/.NET 9.0 在高并发下的改进。
    *   .NET 9.0 在某些压力测试场景下，RPS 高于 .NET 8.0 或 .NET 6.0 ，尾延迟控制更佳。
4.  **.NET不同版本的不同线程池以及不同部署方式的内存性能表现**
    
    *   **NativeAOT**的内存使用往往优于对应 Runtime 版本，因减少 JIT 和 Reflection 等其他动态功能。
    *   **PortableThreadPool** vs **WindowsThreadPool** 在高并发、大连接数时的GC触发与Allocation Rate各有差异，但总体差距不算极端。

**三、建议**
--------

1.  **低连接数、低并发数时，使用哪种线程池和哪种部署方式？**
    
    *   建议在 `.NET 8.0+` 或 `.NET 9.0+` 上使用 **PortableThreadPool** 即可；Runtime 与 NativeAOT 二选一，视项目对软件体积、启动速度的要求而定。
2.  **高连接数、高并发数时，使用哪种线程池和哪种部署方式？**
    
    *   建议在 `.NET 9.0` 或 `.NET 8.0` 中，结合 **NativeAOT** + **WindowsThreadPool** 获取更高吞吐与更好的延迟表现；若对 NativeAOT 有限制，则可使用 Runtime + WindowsThreadPool。
3.  **哪种线程池和哪种部署方式更适合 gRPC服务？**
    
    *   **Windows 环境 & 追求极高并发**：建议 **WindowsThreadPool + NativeAOT**。
    *   **跨平台或容器**：建议 **PortableThreadPool + NativeAOT**，在没有动态特性需求的前提下，可获得更好性能和包体积。

.NET 6.0-Runtime-DefaultThreadPool
----------------------------------

### ghz 运行结果

TotalCalls

Connections

Concurrency

RPS

TotalRequests

LatencyAvg

Fastest

Slowest

LatencyP0

LatencyP25

LatencyP50

LatencyP75

LatencyP90

LatencyP95

LatencyP99

ErrorCount

100

2

10

980.9364804391456

100

9484620

0

85485800

0

518600

676700

2127400

5909100

84942500

84942500

0

1000

2

10

13747.934372860476

1000

507132

0

9650500

System.Object\[\]

0

522800

564400

1008700

1120500

4095100

0

10000

2

10

19145.446810694033

10000

361839

0

17023700

System.Object\[\]

0

0

655800

1001699

1007499

1506300

0

100000

2

10

22305.88167064362

100000

303645

0

19320800

System.Object\[\]

0

0

542400

1001100

1005700

1506800

0

100

2

100

6807.305600370318

100

6641587

517100

12655600

0

4593000

7153800

8324300

10392600

10392600

12655600

0

1000

2

100

16823.631145251868

1000

3127358

0

13814700

0

1078300

2330600

4388600

7071300

8579500

12477300

0

10000

2

100

33413.54812453096

10000

1618590

0

14170800

0

669200

1218300

1905400

3297800

4761600

7224800

0

100000

2

100

36310.657134296125

100000

1425090

0

20742700

0

651400

1091200

1812000

2785200

3640100

5640800

0

1000

2

500

21888.974742312046

1000

11236570

507700

41694400

0

4375300

9066300

13378200

26729800

31138000

38037900

0

10000

2

500

33845.57482647374

10000

9283925

0

56246700

0

4550400

8177400

11235000

17621200

23507300

38435100

0

100000

2

500

36823.307739784264

100000

9126701

0

79235400

0

4682900

8171200

11977000

17143300

21033000

28442200

0

10000

2

2500

34509.56898583624

10000

51133874

506799

111304400

0

39109100

52786600

66901000

76843500

85133500

91590900

0

100000

2

2500

30219.676194356394

100000

73303285

6340000

245844600

0

56582100

70121700

89098400

107664700

116183600

132964300

0

10000

2

5000

30094.774463741214

10000

95802681

0

186469000

0

52893900

113638900

136986400

151195200

156701700

161105800

0

100000

2

5000

32434.0727199155

100000

138006455

335000

347489000

0

116910700

138976600

161813000

181325400

199166300

227715600

0

100

20

100

6554.540330086651

100

2774018

0

8476500

0

1394700

2736500

3894200

4698500

5835100

8038099

0

1000

20

100

20026.194262094818

1000

2309505

0

17987900

0

599000

1010300

3301900

5417000

7210800

12537200

0

10000

20

100

29243.40013013313

10000

1597918

0

22326200

0

528100

1001600

1782600

4119500

6287300

9439800

0

100000

20

100

25466.322100537625

100000

1672161

0

72254500

0

581900

1008700

2001700

3055300

4888800

11753800

0

1000

20

500

15682.043432987493

1000

5828696

0

47519100

0

678900

2607600

9349700

16126399

20744500

29151900

0

10000

20

500

30973.82959190121

10000

8615289

0

60666400

0

1704000

6745100

13629400

18750400

22812700

33614100

0

100000

20

500

33892.29982877271

100000

7547793

0

81464900

0

1896500

5234500

11463300

17411000

21467700

32169200

0

10000

20

2500

26202.429489262246

10000

39913378

0

270933100

0

8121200

29570600

58917200

92447100

119433500

173433900

0

100000

20

2500

34908.68672996892

100000

45122978

0

343058000

0

17672400

35261100

63365099

98630500

117578800

170135900

0

10000

20

5000

31025.405153009542

10000

37137079

0

191286800

0

11777700

30449300

57067600

81014800

95178100

130140800

0

100000

20

5000

26858.82616884441

100000

119377925

0

1113362800

0

39969000

85955000

173932500

270862000

329961200

485886900

0

100

100

100

9189.149452326692

100

1299603

0

5900200

System.Object\[\]

0

671300

2065700

3570500

3711600

5900200

0

1000

100

100

21263.430514298594

1000

1457248

0

8033800

0

543500

1110300

2009899

2791500

4258800

7022500

0

10000

100

100

21224.536923053412

10000

2340328

0

21376600

0

786500

2001000

3000000

5048600

7224300

11336700

0

100000

100

100

26569.634361976725

100000

1851080

0

29836500

0

537900

1446800

2183200

3850500

5904700

10358700

0

1000

100

500

20131.580006925262

1000

6112320

0

23110700

0

1011299

3857200

11175300

14927300

16480100

19547300

0

10000

100

500

28343.60269298238

10000

9345864

0

78897000

0

3022400

7774600

13245500

19228200

24533300

36365800

0

100000

100

500

30537.421671131695

100000

8678613

0

90635400

0

2700400

6611100

12644000

18750000

23766200

35703100

0

10000

100

2500

29728.221625081347

10000

37424785

0

204281400

0

19287000

35066800

52720100

72609700

85108100

108768900

0

100000

100

2500

32815.98710883015

100000

47314004

0

328420400

0

23280100

40953300

64607600

91904600

111460400

158114100

0

10000

100

5000

23992.811753598624

10000

74131492

0

345145500

0

24932400

62954600

112179800

162327800

188277200

239239600

0

100000

100

5000

32128.74734447871

100000

96682217

0

592672400

0

42400000

79887600

130777600

198140900

246105700

348103700

0

1000

200

500

21736.484254090807

1000

6058572

0

30483400

0

1747100

4073700

8659400

14688900

17522800

24659800

0

10000

200

500

27323.904946692426

10000

8939643

0

70837400

0

3499900

6549100

12578900

18816700

24605600

36726100

0

100000

200

500

27838.0672987504

100000

9729622

0

107043100

0

3674600

7358900

13052800

21179400

27097300

40933700

0

10000

200

2500

26858.991369668893

10000

42143393

0

191887100

0

21302700

37852400

58952100

81158400

92492400

120923400

0

100000

200

2500

31494.93314239845

100000

49286084

0

334283200

0

23218300

42562500

68128800

97782900

120087000

161146100

0

10000

200

5000

22776.345398722704

10000

53432015

0

260195899

0

20069700

46124000

76903400

112171500

131647500

173993700

0

100000

200

5000

31555.342311564513

100000

92130330

0

616224800

0

38913400

76587600

127269799

187404300

234999000

330519000

0

1000

500

500

1912.9068800756593

1000

84397685

0

500861499

0

1947500

5997100

11521500

475290200

481772300

491733500

0

10000

500

500

18769.043540802584

10000

16123120

0

502874100

0

3996800

7513200

11165100

16518200

20418600

478763000

0

100000

500

500

21236.968465225524

100000

16078334

0

560563400

0

8211800

14007800

20227800

27504200

33858400

54975700

0

10000

500

2500

18553.51938926267

10000

70172934

0

498934600

0

13714400

25357000

41367000

341814500

441976000

480256300

0

100000

500

2500

28746.38151329404

100000

58412567

0

1105378600

0

21829800

43888100

77499600

113399900

139524600

462295100

0

10000

500

5000

18331.637656850075

10000

111798599

0

519327100

0

15862000

33245700

94564100

420409000

465812400

500700400

0

100000

500

5000

23859.59999714639

100000

136435355

0

1179034900

0

59652000

118366600

187816600

262923100

324276700

536564100

0

### 性能探查器结果

#### GC 信息

名称

最小值

最大值

平均

Allocation Rate

0 B

282.50 MiB

35.97 MiB

GC Committed Bytes

0 B

443 MiB

372.21 MiB

GC Fragmentation

0%

87.50%

27.77%

GC Heap Size

3 MiB

365 MiB

88.55 MiB

Gen 0 GC Count

0

2

0.43

Gen 0 Size

0 B

150.27 MiB

7.40 MiB

Gen 1 GC Count

0

2

0.36

Gen 1 Size

0 B

51.08 MiB

2.51 MiB

Gen 2 GC Count

0

2

0.34

Gen 2 Size

0 B

32.12 MiB

2.38 MiB

IL Bytes Jitted

39.45 KiB

308.82 KiB

288.12 KiB

LOH Size

0 B

66.34 MiB

52.65 MiB

POH Size

0 B

6.62 MiB

5.27 MiB

#### 异步活动

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

994.21

\[不完整\]

\[不完整\]

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

994.21

\[不完整\]

\[不完整\]

Async: <RunAsync>d\_\_4

1

996.64

\[不完整\]

\[不完整\]

Async: <DoReceive>d\_\_28

6109

6,867.94

254,236.97

1,691.47(平均)

Async: <DoSend>d\_\_29

5930

6,869.51

254,236.95

1,677.15(平均)

Async: <ReadInputAsync>d\_\_116

5960

6,875.79

254,218.39

1,683.05(平均)

Async: <ExecuteAsync>d\_\_6

6023

6,882.95

255,323.60

1,670.12(平均)

Async: <ProcessDataWrites>d\_\_48

83840

6,884.81

254,218.41

979.92(平均)

POST /greet.Greeter/SayHello

2099400

6,899.47

254,194.78

0.93(平均)

GET /gc

51

6,983.90

255,321.56

14.64(平均)

Async: <DisposeAsync>d\_\_27

1

94,325.60

94,325.63

0.03

.NET 8.0-Runtime-PortableThreadPool
-----------------------------------

### ghz 运行结果

TotalCalls

Connections

Concurrency

RPS

TotalRequests

LatencyAvg

Fastest

Slowest

LatencyP0

LatencyP25

LatencyP50

LatencyP75

LatencyP90

LatencyP95

LatencyP99

ErrorCount

100

2

10

991.4300784022905

100

9533721

0

85514500

0

530700

551200

2182400

3876100

85514500

85514500

0

1000

2

10

10057.518950880083

1000

718850

0

6194800

0

530200

548800

728400

1177900

1596500

2711500

0

10000

2

10

14692.82086733191

10000

499594

0

4660600

0

525000

535800

560600

755400

1071800

1579600

0

100000

2

10

19001.61848185581

100000

360990

0

10495200

0

0

326100

540200

778200

1002800

1549700

0

100

2

100

4043.3937012012925

100

6494620

0

23670500

0

2199400

3382100

11656600

14890200

21499400

23670500

0

1000

2

100

18989.060402302235

1000

2825141

0

13027500

0

1213700

2059699

3455000

6133600

8785300

11376300

0

10000

2

100

29024.812731908256

10000

1931110

0

15897399

0

945300

1564800

2278100

3907899

5628600

8121200

0

100000

2

100

30805.418130873863

100000

1885572

0

18838000

0

1015099

1673300

2394600

3395500

4278400

6685900

0

1000

2

500

21999.39281675826

1000

9901041

0

36002800

0

4974600

7492300

11355800

23420100

26478200

32448100

0

10000

2

500

29033.231146037444

10000

11937464

0

76230400

0

6515700

9871800

15437700

22318000

27486200

41474700

0

100000

2

500

31910.400700497117

100000

10744462

0

75901300

0

5495700

9475400

14143400

19997100

24896500

33766100

0

10000

2

2500

28991.717356268487

10000

65067364

3117400

153736000

0

47693700

58304400

81754000

110449900

116631200

124138900

0

100000

2

2500

32953.32221224615

100000

67823454

2507600

170035600

0

55147800

67398900

79795500

94014100

101930100

115166800

0

10000

2

5000

27123.682636638943

10000

97330084

584400

229340600

0

71456000

95251400

134376200

152531300

159198000

175826700

0

100000

2

5000

30075.389678553336

100000

152624013

595400

384429800

0

124304000

150005800

177949500

212931900

233031300

266943100

0

100

20

100

6117.330397014743

100

5255448

0

12585300

0

2310200

4823000

8033600

10236200

10742100

11911200

0

1000

20

100

17672.71544807403

1000

2770949

0

16850700

0

968500

1785200

3816900

6382100

7945300

13259500

0

10000

20

100

24734.756835079028

10000

2217077

0

21275700

0

643800

1591200

2674600

5429500

7289100

10733200

0

100000

20

100

25173.704223223693

100000

1945509

0

99387200

0

718000

1516800

2431100

3508500

4658500

11818300

0

1000

20

500

17996.94052011158

1000

4235246

0

27828100

0

1601200

2924600

6185600

9206200

11567300

17890700

0

10000

20

500

27546.600584208307

10000

10200569

0

55560500

0

2616000

9478400

15012000

21297700

26949900

35229200

0

100000

20

500

29972.490948082937

100000

10204018

0

86917100

0

3009900

8606000

15308300

21351000

25919800

38405000

0

10000

20

2500

27546.130126816875

10000

44244853

0

181589900

0

22981000

41510300

61619100

81247600

95874600

123415200

0

100000

20

2500

29738.2858364336

100000

54999947

0

298843400

0

23828200

46237600

77161100

111472800

137776200

193969200

0

10000

20

5000

26844.81602442234

10000

52862345

0

229786100

0

26733100

48498400

74878300

102815900

119178100

149359400

0

100000

20

5000

28656.862046095364

100000

116930756

0

645734300

0

63004599

102589900

156265300

219955000

257665500

343672300

0

100

100

100

8063.085581590362

100

2854507

903900

7657800

0

1863600

2390600

3523800

5298300

5828700

6258000

0

1000

100

100

17797.489486133087

1000

3157506

0

10694200

0

1725400

2470100

4251500

6916800

8289200

9301400

0

10000

100

100

21361.186041404813

10000

2745052

0

17843400

0

1192000

2304000

3378400

5696000

7373200

10076100

0

100000

100

100

21170.13160327631

100000

2830932

0

35577000

0

1341900

2244200

3490400

5247800

7540100

12462000

0

1000

100

500

17602.16295378376

1000

8843901

0

34973100

0

3356700

8056700

13717700

17310400

19959100

26217000

0

10000

100

500

24257.560960463572

10000

13691835

0

73757800

0

5535000

12580400

19427100

27440100

32733400

42803100

0

100000

100

500

25213.737482986715

100000

12441181

0

111611400

0

4638500

10524300

18013400

24947800

30638300

46290300

0

10000

100

2500

25796.75868886426

10000

44182423

0

269001800

0

12886500

32392800

65629000

103146600

127591800

168048700

0

100000

100

2500

28064.58772994334

100000

56659485

0

344886500

0

29517900

49846800

76945200

108117600

129853300

181503400

0

10000

100

5000

20317.15485064961

10000

78833561

0

314297600

0

42314900

74670400

111161000

141412200

160582300

205631000

0

100000

100

5000

21309.119808906635

100000

148757968

0

992061900

0

77697800

130508999

196706900

279595700

341148700

474728700

0

1000

200

500

18277.65958224581

1000

10442973

0

31000200

0

3602900

8871500

17191000

20960700

22970600

25172300

0

10000

200

500

21940.22692337902

10000

15178010

0

80802400

0

7660100

13878600

20300700

27628000

34646500

51182100

0

100000

200

500

23584.9101103604

100000

13054857

0

101689000

0

5662100

10946300

17661700

26612600

32564400

48763400

0

10000

200

2500

19943.436425609685

10000

56954146

0

277175100

0

24302300

46296400

82067300

117731900

142473900

193106500

0

100000

200

2500

26882.772616046477

100000

58798054

0

401435500

0

28941200

50386700

80371300

115029300

138016700

190991300

0

10000

200

5000

24087.8764272669

10000

50584299

0

245317800

0

22344700

42363500

70887700

101040700

122060300

165745100

0

100000

200

5000

27428.9929886831

100000

111632601

0

725695100

0

58615700

100803100

151180300

210045800

249484700

333896600

0

1000

500

500

1909.1099481237554

1000

74003236

0

497487300

0

2774400

7237000

11396800

475811100

482692000

487671500

0

10000

500

500

18867.511578991856

10000

18297914

0

504897900

0

5607500

9360500

13090500

18300400

21537100

475330700

0

100000

500

500

18442.198553504597

100000

17679466

0

529939300

0

8837100

16143000

22277700

29127200

35151900

51791800

0

10000

500

2500

18644.899864768544

10000

60873013

0

499126300

0

8897100

20881700

36942100

289244200

373423300

459534500

0

100000

500

2500

24478.505033074376

100000

71202543

0

773968100

0

30984100

54320100

92969000

136012100

167637900

501491000

0

10000

500

5000

18164.403472815968

10000

106051849

0

517379100

0

23813600

47357100

108464300

327545300

448782700

492402800

0

100000

500

5000

25495.50124231929

100000

132891191

0

973201900

0

54442800

104397000

178027300

270137900

348764100

602879800

0

### 性能探查器结果

#### GC 信息

名称

最小值

最大值

平均

Allocation Rate

0 B

279.21 MiB

42.53 MiB

GC Committed Bytes

0 B

491.18 MiB

357.33 MiB

GC Fragmentation

0%

54.78%

6.83%

GC Heap Size

3.83 MiB

481.12 MiB

81.64 MiB

Gen 0 GC Count

0

2

0.41

Gen 0 Size

0 B

24.60 MiB

1.58 MiB

Gen 1 GC Count

0

2

0.34

Gen 1 Size

0 B

52.09 MiB

2.25 MiB

Gen 2 GC Count

0

2

0.30

Gen 2 Size

0 B

29.29 MiB

2.60 MiB

IL Bytes Jitted

53.88 KiB

637.67 KiB

565.54 KiB

LOH Size

0 B

8.85 MiB

7.06 MiB

POH Size

0 B

36 MiB

27.34 MiB

#### 异步活动

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.ConnectionDispatcher<T>.MoveNext()

1

859.95

\[不完整\]

\[不完整\]

\[任务范围\]Microsoft.WebTools.ApiEndpointDiscovery.ApplicationEndpointWriter.WriteEndpointsAsync()

1

929.01

929.10

0.09

Microsoft.WebTools.ApiEndpointDiscovery.HostingStartup.Configure.AnonymousMethod\_\_1()

1

930.74

933.03

2.29

Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync()

1

932.79

\[不完整\]

\[不完整\]

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()

5907

24,593.98

283,473.00

1,897.84(平均)

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoSend()

5879

24,595.26

283,473.00

1,898.01(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2Connection.CopyPipeAsync()

5785

24,605.09

282,420.75

1,909.00(平均)

\[任务范围\]Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2FrameWriter..ctor(BaseConnectionContext, Http2Connection, int, ITimeoutControl, MinDataRate, string, MemoryPool, ServiceContext)

1

24,607.28

24,608.59

1.31

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.KestrelConnection<T>.MoveNext()

5839

24,612.21

283,473.04

1,892.35(平均)

POST /greet.Greeter/SayHello

2099400

24,632.85

282,396.70

0.22(平均)

GET /gc

51

24,738.00

283,468.89

13.45(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2FrameWriter.ctor(PipeWriter, BaseConnectionContext, Http2Connection, int, ITimeoutControl, MinDataRate, string, MemoryPool<byte>, ServiceContext)

12

27,786.81

96,199.19

4.23(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2FrameWriter.WriteToOutputPipe()

1753

99,274.60

279,002.74

2.20(平均)

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.AcceptAsync()

1

150,162.85

150,162.88

0.03

Task.Unwrap

4

234,123.98

258,446.05

1,596.08(平均)

.NET 8.0-Runtime-WindowsThreadPool
----------------------------------

### ghz 运行结果

TotalCalls

Connections

Concurrency

RPS

TotalRequests

LatencyAvg

Fastest

Slowest

LatencyP0

LatencyP25

LatencyP50

LatencyP75

LatencyP90

LatencyP95

LatencyP99

ErrorCount

100

2

10

952.7520719975686

100

9998031

0

91093500

0

568800

863800

1526000

3776700

91093500

91093500

0

1000

2

10

12164.917351551514

1000

607819

0

5670500

0

518299

547600

649900

1047100

1163100

2459900

0

10000

2

10

17477.27124567678

10000

412318

0

5971300

0

0

522499

546600

999399

1008900

1505600

0

100000

2

10

20788.67233559902

100000

340800

0

3200100

0

0

0

559200

1001200

1006000

1505300

0

100

2

100

5400.99702405064

100

8166895

0

17490200

0

5922900

7629800

8705200

12687400

13722200

17490200

0

1000

2

100

20069.843053827317

1000

2386117

0

11080200

0

999399

1840300

2999400

6007600

7537800

9706600

0

10000

2

100

27937.783673270973

10000

2017427

0

18109500

0

1039900

1580500

2436000

3632600

5325600

9063200

0

100000

2

100

26821.100417180758

100000

2213566

0

19172300

0

1276300

1954500

2740400

3901500

4953300

7315700

0

1000

2

500

21828.008390686427

1000

8660457

0

36709500

0

3035600

7906200

11368000

16019200

23737400

33036000

0

10000

2

500

25743.45820111922

10000

13058777

0

60819000

0

8280900

12370400

16957600

21731900

25484200

31124700

0

100000

2

500

31357.26438222097

100000

13371829

345300

49189400

0

9529800

12525500

16219999

21047100

24072200

30384000

0

10000

2

2500

17992.164412398397

10000

103708168

4962500

229928300

0

73464500

110377200

134196299

156258600

162366400

174342700

0

100000

2

2500

32739.613537673045

100000

68578883

1084400

189177500

0

55211700

66019900

78925800

93720200

105294300

129893000

0

10000

2

5000

30186.19144746712

10000

75009900

921500

196858100

0

46068500

70563300

108643300

125351999

129913300

170825400

0

100000

2

5000

24746.943325614513

100000

184126302

505300

354648800

0

156158100

180231200

216725500

245559900

264151000

290895300

0

100

20

100

7075.438323404134

100

2513595

0

9505800

0

530600

1576600

3650900

6500300

7369000

8213500

0

1000

20

100

21075.57067376492

1000

2019488

0

12710900

0

596000

1449700

2721300

4928400

6041100

8722400

0

10000

20

100

24619.754053580957

10000

3547703

0

23897000

0

1060600

1769500

5514200

8915200

11009500

14599200

0

100000

20

100

30407.607594202695

100000

1763048

0

37056100

0

615400

1096800

2187400

3631600

5215300

10310900

0

1000

20

500

22149.326328239727

1000

5411676

0

26416000

0

797400

2109000

8818600

17341100

19681800

22396400

0

10000

20

500

29811.919580558213

10000

7812720

0

58081400

0

1574400

5404000

11533700

19263000

24900900

31295600

0

100000

20

500

33045.374835504255

100000

7692987

0

88185200

0

1688000

4449900

10826100

19216100

26051800

38674400

0

10000

20

2500

28980.971094379427

10000

33286271

0

267643299

0

3039300

11236500

31376400

114074600

137736400

240644300

0

100000

20

2500

30910.618792877278

100000

52241314

0

400997500

0

14917600

39463500

74031700

117367200

147143900

223655700

0

10000

20

5000

30330.465587812007

10000

30724091

0

174303000

0

5414200

21006700

44623600

78751000

96117500

133657400

0

100000

20

5000

31761.9449846269

100000

105866701

0

972796500

0

26414000

74350700

164038300

249428400

301054800

401096300

0

100

100

100

8934.474563550917

100

1116798

0

3367000

0

526700

768600

1611600

2123000

2779300

3367000

0

1000

100

100

19430.832067090778

1000

2063049

0

14522800

0

948700

1128800

2527600

4667700

6138900

11239200

0

10000

100

100

22426.960435926285

10000

2616359

0

20169100

0

1002499

2001100

3360700

5772400

7466000

11444400

0

100000

100

100

24179.205438425575

100000

2526030

0

31167300

0

1001900

1999299

3078400

5332400

7466400

11375700

0

1000

100

500

18986.42850090755

1000

7479076

0

35393700

0

1058100

3985500

13310400

19744000

21770400

27008300

0

10000

100

500

27747.77164582855

10000

9995317

0

67277300

0

3495500

7879600

13903600

21538200

27545300

38671400

0

100000

100

500

29093.254324588608

100000

8983071

0

117197500

0

2011100

5565500

12897700

21412700

28735800

43995300

0

10000

100

2500

29019.85160989078

10000

39676907

0

213155700

0

12861400

31058100

57473500

88414100

108560500

145404400

0

100000

100

2500

31072.80731627892

100000

48580083

0

382488200

0

13884400

37221800

70735500

108978900

134572000

195760300

0

10000

100

5000

28598.924394453523

10000

55536868

0

282369900

0

17709500

47084000

82199200

120383900

148060800

183952300

0

100000

100

5000

30445.33178378773

100000

100950169

0

771903900

0

34537700

72489200

144664000

235603100

284551300

389156100

0

1000

200

500

19503.366281020106

1000

7694771

0

29133300

0

1998799

4579200

13050300

18063400

21064200

24751200

0

10000

200

500

20998.17336889864

10000

13340157

0

105521200

0

4633200

10669100

19068100

28466700

35319300

49825700

0

100000

200

500

25038.255324353697

100000

10899366

0

142225600

0

3527600

7570100

14665800

24673100

32552400

50713400

0

10000

200

2500

25113.550920486985

10000

45175772

0

274565800

0

12404000

34703100

69607100

101014600

117995900

168763700

0

100000

200

2500

27442.04870480665

100000

54435873

0

441531400

0

14699000

39228100

76519100

125247500

162971900

237599200

0

10000

200

5000

24330.82328450056

10000

59113539

0

300387300

0

20044400

48434500

85369100

123949300

157561300

215582200

0

100000

200

5000

21423.934982984898

100000

145077183

0

1375753000

0

56882800

103689600

194957900

320466300

417048600

622861500

0

1000

500

500

1898.6248260385005

1000

59095261

0

501229900

0

1001600

2260700

8124899

458487100

476946500

485598400

0

10000

500

500

19125.91873741395

10000

17161820

0

490275900

0

5002900

9225500

13765500

19911700

26742100

473167800

0

100000

500

500

17944.473160586076

100000

18540905

0

673620500

0

7109300

14496800

23362500

34766200

45568900

77741600

0

10000

500

2500

9696.789160386055

10000

80905019

0

989123800

0

10250600

24178800

53234000

391715400

466148700

877440700

0

100000

500

2500

20414.70346969525

100000

77004980

0

1025375200

0

23082400

54966400

103095700

170179700

216684600

427215100

0

10000

500

5000

9685.320076583763

10000

91627545

0

993639100

0

9962100

29457400

82558300

290817900

480529000

692897800

0

100000

500

5000

25563.63207266452

100000

131595755

0

1195043600

0

43415100

90212700

170052300

294182400

407457300

664871800

0

### 性能探查器结果

#### GC 信息

名称

最小值

最大值

平均

Allocation Rate

0 B

344.58 MiB

26.97 MiB

GC Committed Bytes

0 B

489.48 MiB

395.10 MiB

GC Fragmentation

0%

52.77%

4.95%

GC Heap Size

3.81 MiB

477.76 MiB

84.49 MiB

Gen 0 GC Count

0

2

0.26

Gen 0 Size

0 B

23.29 MiB

1.57 MiB

Gen 1 GC Count

0

2

0.22

Gen 1 Size

0 B

52.04 MiB

2.14 MiB

Gen 2 GC Count

0

2

0.19

Gen 2 Size

0 B

28.38 MiB

2.47 MiB

IL Bytes Jitted

53.94 KiB

629.38 KiB

580.85 KiB

LOH Size

0 B

7.72 MiB

6.29 MiB

POH Size

0 B

33.96 MiB

28.40 MiB

#### 异步活动

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.ConnectionDispatcher<T>.MoveNext()

1

1,272.50

\[不完整\]

\[不完整\]

\[任务范围\]Microsoft.WebTools.ApiEndpointDiscovery.ApplicationEndpointWriter.WriteEndpointsAsync()

1

1,338.16

1,338.24

0.08

Microsoft.WebTools.ApiEndpointDiscovery.HostingStartup.Configure.AnonymousMethod\_\_1()

1

1,339.92

1,344.00

4.08

Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync()

1

1,343.36

\[不完整\]

\[不完整\]

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()

5968

27,903.48

317,693.03

2,182.60(平均)

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoSend()

5938

27,905.28

317,693.03

2,185.01(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2Connection.CopyPipeAsync()

5870

27,915.82

316,637.92

2,211.47(平均)

\[任务范围\]Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2FrameWriter..ctor(PipeWriter, BaseConnectionContext, Http2Connection, int, ITimeoutControl, MinDataRate, string, MemoryPool, ServiceContext)

1

27,918.09

27,919.64

1.55

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.KestrelConnection<T>.MoveNext()

5948

27,923.56

317,693.11

2,188.61(平均)

POST /greet.Greeter/SayHello

2099400

27,946.85

316,615.52

0.29(平均)

GET /gc

51

28,020.89

317,690.69

13.44(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2FrameWriter.ctor(PipeWriter, BaseConnectionContext, Http2Connection, int, ITimeoutControl, MinDataRate, string, MemoryPool<byte>, ServiceContext)

12

31,077.91

102,951.90

0.01(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2FrameWriter.WriteToOutputPipe()

1537

106,029.50

316,635.47

127.03(平均)

Task.Unwrap

32

165,211.45

316,635.72

1,728.56(平均)

.NET 8.0-NativeAOT-PortableThreadPool
-------------------------------------

### ghz 运行结果

TotalCalls

Connections

Concurrency

RPS

TotalRequests

LatencyAvg

Fastest

Slowest

LatencyP0

LatencyP25

LatencyP50

LatencyP75

LatencyP90

LatencyP95

LatencyP99

ErrorCount

100

2

10

7093.104084209332

100

865469

0

5805600

0

0

528500

731400

1846500

5295400

5805600

0

1000

2

10

16717.935000668716

1000

378152

0

2930100

0

0

519799

544400

653700

1045600

1905400

0

10000

2

10

19177.70231565002

10000

351378

0

4096200

0

0

517699

533800

998500

1007000

1507000

0

100000

2

10

21258.51605523915

100000

322549

0

72540900

0

0

0

532700

999399

1003000

1504500

0

100

2

100

8881.546810192463

100

4468854

1050000

9500800

0

1670100

4775500

7130100

7855600

8368900

9500800

0

1000

2

100

20151.33653739584

1000

2999886

0

15830700

0

1453100

2186300

3897400

5401400

8918900

14082300

0

10000

2

100

28884.64541353714

10000

2057845

0

14813200

0

1079100

1702200

2429300

4075299

5310100

8455600

0

100000

2

100

28813.750567198676

100000

2115340

0

19052200

0

1228500

1901700

2618000

3633700

4573000

6922100

0

1000

2

500

21561.993966954087

1000

9758000

0

38159600

0

5944000

7993200

13800100

17851900

19508900

23496100

0

10000

2

500

34675.218037771025

10000

10505183

0

37052700

0

6488200

9938100

13862700

17765600

20331100

26025900

0

100000

2

500

36973.97723416089

100000

9544097

0

61475900

0

5208300

8621400

12443200

17231000

20581400

28901900

0

10000

2

2500

35098.08862828948

10000

48294325

0

131072500

0

34614700

48879400

64116200

84561200

92665300

97551000

0

100000

2

2500

37163.63012555212

100000

58636701

508000

186424600

0

44626100

55886200

69828900

82458100

95430500

128427999

0

10000

2

5000

33459.59870564888

10000

76786968

605400

202338800

0

37221600

84926800

103614100

138745800

146582700

158763400

0

100000

2

5000

35161.31872385229

100000

130216171

661200

271046900

0

109652300

130319300

147622100

169155000

184705400

220595300

0

100

20

100

7857.619926924135

100

3253656

504899

8845800

0

1975499

2486900

4472800

6035500

7029400

7870600

0

1000

20

100

18702.180861310237

1000

2621154

0

21588700

0

862000

1514500

2999700

6561300

9176800

14563300

0

10000

20

100

28289.015290495656

10000

1973488

0

27914300

0

684100

1343300

2190100

4422600

5806100

12596700

0

100000

20

100

32079.51819643303

100000

1598752

0

29929400

0

659300

1072900

1964099

2680000

3943300

10513400

0

1000

20

500

19585.87623293091

1000

5283367

0

39088900

0

997099

2200700

8288100

14578900

18950000

25624200

0

10000

20

500

32691.704153154096

10000

7990468

0

56949000

0

1852700

5219500

11452500

17814900

25786200

41615300

0

100000

20

500

34905.95846107169

100000

8427892

0

73967100

0

2396600

6054600

11695400

18726600

25759400

38726400

0

10000

20

2500

31580.05100809839

10000

39403685

0

210860500

0

9971700

29613200

58304400

89990000

113593200

148382400

0

100000

20

2500

35922.129874808146

100000

45480093

0

510042800

0

13325600

28120500

63366200

111424500

137599000

212657200

0

10000

20

5000

31682.596147966597

10000

54405506

0

278082100

0

10459700

40132100

88694500

127259700

151221000

199391500

0

100000

20

5000

28436.2087117624

100000

110753266

0

1313863400

0

28018200

64059599

158635500

276063500

362659900

561001300

0

100

100

100

9429.870056390622

100

2532320

933600

7060700

0

1643300

1999599

3272000

4392500

4916000

6035800

0

1000

100

100

21507.3189406355

1000

2539928

0

8058200

0

1533200

2280900

3282600

4941800

5462000

6424500

0

10000

100

100

20447.14219494755

10000

2881066

0

45127500

0

1077400

2076999

3265100

5294700

6853700

16901100

0

100000

100

100

26088.019098099616

100000

2236209

0

40726800

0

1004799

1877100

2626100

4057400

5816700

10230900

0

1000

100

500

24305.58931331849

1000

6479589

0

27675400

0

1759300

4978700

10773400

12963600

14945500

20785400

0

10000

100

500

29852.617626776602

10000

10397239

0

51497200

0

4349600

9405100

14041200

19821700

26365600

36981700

0

100000

100

500

31896.11867933355

100000

9743960

0

74952600

0

3729200

8042499

13579500

19571700

25484400

37281000

0

10000

100

2500

30046.812934552032

10000

35195857

0

280641400

0

4771000

14471300

52186300

95850600

122772100

201808200

0

100000

100

2500

33641.559544652075

100000

45743004

0

314384300

0

20643700

37859300

62358100

93004600

115491600

159626600

0

10000

100

5000

25642.958725606495

10000

46305337

0

287352600

0

10636800

29596600

64629700

121549600

151056800

194120500

0

100000

100

5000

33074.75708740779

100000

94079515

0

685852900

0

33731900

70589500

133137299

209632700

250695800

371585400

0

1000

200

500

19041.308214039538

1000

4913279

0

18390300

0

1543600

3715100

8227099

10437700

11730600

14990600

0

10000

200

500

22196.30187414475

10000

14240714

0

85261000

0

5244100

12615300

19931700

27577400

34723200

56227000

0

100000

200

500

28936.482973050006

100000

10404708

0

122804600

0

4087699

8448000

13981900

21126700

27138200

43033200

0

10000

200

2500

29041.41828993674

10000

43304835

0

198025000

0

20359500

39487900

60023800

83785800

98913400

129127600

0

100000

200

2500

32506.245506214724

100000

47964334

0

337678500

0

21820300

38219000

63842700

98784200

123965400

184997700

0

10000

200

5000

29191.761851271476

10000

47766798

0

246001400

0

21150800

40560900

65211400

94814700

120271500

157102700

0

100000

200

5000

32564.983179697716

100000

92548539

0

806489000

0

40664000

75480700

124153600

189789600

241382400

344136600

0

1000

500

500

1887.13391725031

1000

84258814

0

499672000

0

3260700

6507100

24020900

478253300

489207800

495989200

0

10000

500

500

18952.843997435302

10000

16871162

0

505318900

0

5000100

8731000

12213500

15681700

19361400

475937300

0

100000

500

500

18518.900556578148

100000

18718920

0

549366100

0

9030500

16164800

23098400

31638300

40109500

69823900

0

10000

500

2500

9806.35969884277

10000

75893938

0

988131600

0

10898400

20741800

41373500

405547900

455167000

498767600

0

100000

500

2500

29642.62407772533

100000

59154348

0

1217739300

0

21440900

40377700

73689300

118924000

157069500

484059100

0

10000

500

5000

9839.621064385265

10000

93418358

0

969847800

0

11097900

31423100

80010000

370342800

426736700

490987800

0

100000

500

5000

30776.932578235654

100000

110161774

0

1048581599

0

34160900

75894300

145109800

241109200

313541900

623580400

0

### 性能探查器结果

#### GC 信息

名称

最小值

最大值

平均

Allocation Rate

0 B

1.22 GiB

32.86 MiB

GC Committed Bytes

6.91 MiB

182.16 MiB

111.55 MiB

GC Fragmentation

3.49%

58.66%

12.11%

GC Heap Size

5.19 MiB

156.47 MiB

49.67 MiB

Gen 0 GC Count

0

19

1.37

Gen 0 Size

856.84 KiB

26.55 MiB

2.54 MiB

Gen 1 GC Count

0

5

0.47

Gen 1 Size

0 B

56.41 MiB

3.15 MiB

Gen 2 GC Count

0

2

0.32

Gen 2 Size

1.59 MiB

24.78 MiB

5.26 MiB

IL Bytes Jitted

0 B

0 B

0 B

LOH Size

850.49 KiB

12.34 MiB

10 MiB

POH Size

128.68 KiB

31.48 MiB

24.93 MiB

#### 异步活动

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

1,037.04

\[不完整\]

\[不完整\]

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

1,037.04

\[不完整\]

\[不完整\]

Async: <RunAsync>d\_\_4

1

1,037.57

\[不完整\]

\[不完整\]

Async: <DoReceive>d\_\_27

5902

14,732.66

271,126.63

1,847.45(平均)

Async: <DoSend>d\_\_28

5593

14,732.67

271,126.63

1,863.24(平均)

Async: <CopyPipeAsync>d\_\_139

5737

14,733.21

270,204.84

1,873.97(平均)

Async: <ExecuteAsync>d\_\_8

5938

14,733.58

271,126.67

1,852.59(平均)

POST /greet.Greeter/SayHello

2099400

14,734.67

270,186.24

0.20(平均)

GET /gc

51

14,780.76

271,124.76

9.57(平均)

Task: WriteToOutputPipe

1963

17,827.12

267,472.37

6.85(平均)

Async: <WriteToOutputPipe>d\_\_34

1076

24,648.45

270,204.86

1,732.49(平均)

Task.Unwrap

4

255,281.52

270,199.97

2,499.72(平均)

.NET 8.0-NativeAOT-WindowsThreadPool
------------------------------------

### ghz 运行结果

TotalCalls

Connections

Concurrency

RPS

TotalRequests

LatencyAvg

Fastest

Slowest

LatencyP0

LatencyP25

LatencyP50

LatencyP75

LatencyP90

LatencyP95

LatencyP99

ErrorCount

100

2

10

6712.085109239185

100

974887

0

6095200

0

0

521400

1004700

1875200

5589200

6095200

0

1000

2

10

13775.375964448509

1000

452030

0

8341200

0

0

523900

622800

733300

1094000

5286500

0

10000

2

10

17252.31370779135

10000

407990

0

5308100

0

0

521100

586600

1001800

1042400

1513400

0

100000

2

10

20439.718018555748

100000

347032

0

21252300

0

0

0

534800

1000100

1003400

1505500

0

100

2

100

6438.611062821528

100

4993118

0

13711200

0

2657100

4038000

6734500

10624900

12142800

12666600

0

1000

2

100

23244.24588693069

1000

2164505

0

11912300

0

746500

1557600

2814700

4773500

5563100

10076100

0

10000

2

100

33188.03611123833

10000

1737310

0

10685200

0

804200

1317800

2077100

3225900

5139800

7468900

0

100000

2

100

34563.66142543305

100000

1724928

0

34656900

0

1008599

1492600

2137900

3017900

3823500

5840000

0

1000

2

500

20309.352050432182

1000

12180069

0

45524600

0

5436500

10515700

16423900

24159100

31046400

39601300

0

10000

2

500

27902.354037903115

10000

12804024

0

53063900

0

6936200

11739700

16641000

23079700

29274100

37823800

0

100000

2

500

36297.570824999864

100000

9492466

0

65274600

0

4918000

8330199

12234100

17689800

22383100

30810900

0

10000

2

2500

35160.84151145207

10000

46191696

918100

164864000

0

25482400

35715600

50636900

124179400

137901600

144867400

0

100000

2

2500

36241.534022954154

100000

60250757

1336800

214023600

0

43445700

57007500

73977500

88844900

102602500

134619200

0

10000

2

5000

25310.169803398192

10000

122313694

614600

257083899

0

83967200

123392700

154030700

219236000

225457800

235102400

0

100000

2

5000

33613.8894204552

100000

135411932

503000

278876300

0

116095700

131734400

156980500

184161400

196736900

220424300

0

100

20

100

5860.221985208799

100

3769154

0

11253300

0

1006299

2509300

5589700

8838600

9843700

10688200

0

1000

20

100

18604.616549550607

1000

2706487

0

23392700

0

618100

1479700

3858800

7354400

9891600

12359500

0

10000

20

100

26186.977111534525

10000

2126836

0

15044600

0

652000

1352900

2764200

5108900

6981300

10359700

0

100000

20

100

30322.36310665952

100000

1734990

0

42297500

0

655000

1125700

2168100

3543500

5021600

9725900

0

1000

20

500

18080.207416139478

1000

5937891

0

26474900

0

983800

2981000

8845400

17687800

20451200

22912600

0

10000

20

500

30205.63087329614

10000

8386551

0

60861700

0

2056600

5703400

12003300

19404700

25703900

37201600

0

100000

20

500

33374.61439387712

100000

7702346

0

131534099

0

1686200

4308600

10656000

18857300

26052900

42688400

0

10000

20

2500

30059.873255550407

10000

32790430

0

184485600

0

10190600

25338500

47233400

74062100

88650100

132724900

0

100000

20

2500

33940.099728910245

100000

45280112

0

596233800

0

7874799

27572600

64149100

116982500

153569800

217549400

0

10000

20

5000

29996.943311476563

10000

30725053

0

222481300

0

2589900

9307800

42271700

100772400

119534000

169840100

0

100000

20

5000

32622.695752975207

100000

99064286

0

1063599000

0

20215900

57359000

165426400

250402400

297059600

429921800

0

100

100

100

8792.754770069463

100

1439848

0

4128100

0

518000

1026500

2348100

3304000

3350500

3666100

0

1000

100

100

15342.082411529884

1000

2872899

0

15473600

0

1011699

2009400

3953600

6377600

7633500

11095200

0

10000

100

100

20019.855692876194

10000

3229967

0

45552400

0

1054400

2065600

3717700

6340700

8313100

17186300

0

100000

100

100

22530.05486789322

100000

2793189

0

32594300

0

1006500

2004900

3389200

5782600

8309700

13498400

0

1000

100

500

18431.005374481167

1000

4656397

0

27602800

0

1054300

2602700

7762500

11061900

13886200

17894600

0

10000

100

500

27122.85132771782

10000

9558462

0

74754000

0

2069200

6712700

13489900

21938300

29959200

45716200

0

100000

100

500

28572.137976797196

100000

9096031

0

110270900

0

2001000

5362400

12938500

22161700

30233700

45208600

0

10000

100

2500

23452.223599128327

10000

51628137

0

263522099

0

6206200

37122800

85235600

130015799

147805100

192532100

0

100000

100

2500

31783.94646261203

100000

48883102

0

499396800

0

11338600

34168300

68774800

117081600

150679700

222550800

0

10000

100

5000

28070.325146997275

10000

43111404

0

271286100

0

8524800

27986100

61810000

107748300

138946000

199133000

0

100000

100

5000

30887.149352092623

100000

99027421

0

805991600

0

26188200

66737200

139588400

243453500

310250800

436801300

0

1000

200

500

17782.772761059998

1000

5920824

0

36561800

0

1540500

4669100

8066400

12649000

15698799

28985700

0

10000

200

500

24604.876440461736

10000

11269962

0

60272500

0

3996900

8549200

16363099

23763900

31132400

42780300

0

100000

200

500

25970.485218781472

100000

11249852

0

105408700

0

3875000

7852899

15353000

25554600

33640800

49401900

0

10000

200

2500

27607.31030533961

10000

46629693

0

275249700

0

25708100

43455400

62876299

87059900

102505500

133879599

0

100000

200

2500

30151.589831521058

100000

51299051

0

484732500

0

18303400

40765100

70905400

108168400

137201600

209457700

0

10000

200

5000

21894.2991404955

10000

57565874

0

291513700

0

24038500

45577400

80264900

120777500

157296900

211778500

0

100000

200

5000

29886.97820773052

100000

102471772

0

855548400

0

35244100

74274100

146176500

232502000

287152400

414782500

0

1000

500

500

1877.2626881838517

1000

88413314

0

506230500

0

2053000

8787600

19094800

477499100

484172300

499234300

0

10000

500

500

18836.971474608985

10000

17665868

0

492158800

0

3484200

7897100

12923900

22209900

30149600

469392700

0

100000

500

500

20271.79901046457

100000

17027497

0

643830000

0

7668800

13926000

21282200

30495000

39097100

63156300

0

10000

500

2500

18281.996876703655

10000

77503428

0

518569700

0

10066000

25620100

60391500

397730400

463017200

502346500

0

100000

500

2500

25639.93035579557

100000

67273447

0

855350700

0

28332400

50932700

84969300

129994900

163716200

501483400

0

10000

500

5000

9565.819871594174

10000

199515589

0

1021371500

0

44564100

89135000

359459600

491823500

551220000

963359900

0

100000

500

5000

29238.66578471155

100000

151221177

0

1372252800

0

109123300

138732400

161249700

187095600

206239000

992842000

0

### 性能探查器结果

#### GC 信息

名称

最小值

最大值

平均

Allocation Rate

0 B

916.24 MiB

36.33 MiB

GC Committed Bytes

6.91 MiB

199.52 MiB

111.33 MiB

GC Fragmentation

1.34%

52.81%

8.44%

GC Heap Size

5.16 MiB

174.14 MiB

51 MiB

Gen 0 GC Count

0

7

1.22

Gen 0 Size

850.79 KiB

23.31 MiB

3.02 MiB

Gen 1 GC Count

0

5

0.51

Gen 1 Size

0 B

66.95 MiB

3.94 MiB

Gen 2 GC Count

0

2

0.36

Gen 2 Size

1.62 MiB

32.80 MiB

6.91 MiB

IL Bytes Jitted

0 B

0 B

0 B

LOH Size

848.52 KiB

10.96 MiB

7.35 MiB

POH Size

128.29 KiB

33.36 MiB

24.14 MiB

#### 异步活动

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

1,146.94

\[不完整\]

\[不完整\]

Async: <RunAsync>d\_\_4

1

1,147.43

\[不完整\]

\[不完整\]

Async: <DoReceive>d\_\_27

6014

18,134.72

276,587.21

2,076.99(平均)

Async: <DoSend>d\_\_28

5703

18,134.74

276,587.21

2,086.92(平均)

Async: <CopyPipeAsync>d\_\_139

5809

18,135.19

276,578.85

2,105.14(平均)

Task: WriteToOutputPipe

1556

18,135.29

274,289.96

81.96(平均)

Async: <WriteToOutputPipe>d\_\_34

873

18,135.34

276,587.03

1,850.57(平均)

Async: <ExecuteAsync>d\_\_8

5972

18,135.83

278,166.49

2,076.42(平均)

POST /greet.Greeter/SayHello

2099400

18,136.84

276,546.40

0.24(平均)

GET /gc

51

18,160.81

278,165.41

7.83(平均)

Task.Unwrap

31

145,634.68

254,230.56

1,747.76(平均)

Async: <AcceptAsync>d\_\_10

1

200,200.26

200,200.31

0.05

Async: <AcceptAsync>d\_\_10

1

273,233.09

273,240.03

6.94

.NET 9.0-Runtime-ProtableThreadPool
-----------------------------------

### ghz 运行结果

TotalCalls

Connections

Concurrency

RPS

TotalRequests

LatencyAvg

Fastest

Slowest

LatencyP0

LatencyP25

LatencyP50

LatencyP75

LatencyP90

LatencyP95

LatencyP99

ErrorCount

100

2

10

815.2736629104292

100

11848865

0

111402600

0

516700

576400

1613000

4473100

110884600

111402600

0

1000

2

10

13249.17457642389

1000

497858

0

5151900

0

0

520399

574400

1006900

1211100

2103500

0

10000

2

10

18410.17464075766

10000

380310

0

3897700

0

0

522299

533900

610300

1008100

1495100

0

100000

2

10

22092.287659701007

100000

311149

0

25597900

0

0

0

533600

1000000

1003999

1506200

0

100

2

100

7881.338566542141

100

6238083

925700

11115000

0

4923400

6298900

7550100

9659700

10585400

11115000

0

1000

2

100

19873.011456791104

1000

2774082

0

15524300

0

733100

1533400

3475400

7018400

9654200

14252200

0

10000

2

100

29741.23637293726

10000

1880248

0

17558000

0

1008400

1562600

2279800

3578600

4781600

7750200

0

100000

2

100

30760.41909225388

100000

1918777

0

16515400

0

1029100

1702300

2427100

3348700

4247400

6437400

0

1000

2

500

24400.480201450366

1000

8716442

1126900

23308500

0

4392400

8341299

11768400

15172300

16784000

22077000

0

10000

2

500

36818.946146032045

10000

8847775

0

31650699

0

5114400

7788100

11294200

16000600

19926400

26624800

0

100000

2

500

38879.06522907953

100000

9192696

0

88539700

0

4833400

8172000

11800200

16451799

20616200

31513200

0

10000

2

2500

28367.13655882805

10000

59283091

624900

191797500

0

40143600

56242900

76741700

102488100

114719000

134806400

0

100000

2

2500

37818.776356850714

100000

58592022

0

243678100

0

45726300

56839600

68976000

83181300

93553200

120141100

0

10000

2

5000

29150.76249649462

10000

100348184

1007099

231993400

0

49588000

104397700

128319600

186329900

190940600

198920300

0

100000

2

5000

31104.951777682207

100000

145668844

0

322245900

0

122558000

145105600

170409800

194686900

208524000

227630300

0

100

20

100

8147.900693386348

100

2458413

506500

8771700

0

1195600

1711600

2818900

5641600

7060100

8771700

0

1000

20

100

19576.482380187033

1000

2400650

0

12202600

0

994000

1831600

3582400

5438900

6375100

8341800

0

10000

20

100

25943.278135549997

10000

2049396

0

30993800

0

670800

1186800

2194800

4406200

5971500

14500000

0

100000

20

100

30049.342823877374

100000

1606280

0

49571300

0

697400

1075700

2013099

2899100

3862200

9370400

0

1000

20

500

20730.716287709172

1000

6375692

0

31320700

0

2198300

4508700

8436100

15623100

19393200

25182400

0

10000

20

500

30400.680975253847

10000

8622565

0

52890200

0

2288600

6692100

12630200

19085900

23912000

33436599

0

100000

20

500

32341.475267390422

100000

9033488

0

86998900

0

2460400

6315100

12199000

20804900

28252700

42469400

0

10000

20

2500

30066.60655349796

10000

27681100

0

231266700

0

2862400

11587100

38786800

83538600

106381200

144204200

0

100000

20

2500

25397.709720889583

100000

63960058

0

847170600

0

12718700

36592100

89338700

163047300

211617900

334628200

0

10000

20

5000

29140.195227651948

10000

59346358

0

285636100

0

9304300

38390600

89007700

158560100

202349100

239216100

0

100000

20

5000

32058.48185199798

100000

103373649

0

970445800

0

19147400

57518300

168586500

259769600

321819300

459967400

0

100

100

100

9394.699510536155

100

1808388

0

5485100

0

1457800

1809100

1809100

2467600

3498900

4742100

0

1000

100

100

19656.676488452686

1000

1921524

0

18046700

0

773400

1011200

2009599

4359000

6376200

12252500

0

10000

100

100

24538.33575117735

10000

2408389

0

17170400

0

1041500

2011000

2930700

4818500

5930700

8456100

0

100000

100

100

26425.214897775113

100000

2219087

0

38726000

0

1005400

1971900

2675100

4044899

5665900

9540400

0

1000

100

500

22158.406012905056

1000

3420281

0

24689500

0

1293600

2176600

4201700

8077000

10596600

17768500

0

10000

100

500

27655.341435610895

10000

11607922

0

72466100

0

4001300

10008100

16076100

24185500

31696000

43276600

0

100000

100

500

29898.791395175675

100000

9648830

0

84037700

0

2941400

7034800

13271400

21439500

28773200

43394900

0

10000

100

2500

28713.898732970505

10000

34296719

0

244425600

0

4067999

23302100

55603200

83878400

102662200

140263800

0

100000

100

2500

32130.585898342102

100000

48082539

0

517601100

0

12457700

29729500

66208100

121251600

148675400

236321500

0

10000

100

5000

22372.095374927238

10000

46280362

0

348751000

0

9785300

23980800

64604200

131046600

162674800

220952400

0

100000

100

5000

23945.342361525585

100000

124885023

0

1507228200

0

36457000

70736500

164902200

330111300

400826700

600017600

0

1000

200

500

20338.845160371795

1000

5328073

0

21015200

0

1626000

3418500

9011700

12832600

14422800

15020100

0

10000

200

500

26532.46897624734

10000

12220688

0

62090600

0

5260000

10967500

16494600

23512400

30345200

45814100

0

100000

200

500

28161.753905021444

100000

10710098

0

146654900

0

3995500

8489800

14249300

22147800

29019200

46567400

0

10000

200

2500

27895.784695870392

10000

39278426

0

229935600

0

9880600

25906900

51803500

99223400

138922900

173383700

0

100000

200

2500

24075.36166008286

100000

63972926

0

682171900

0

22648600

48222500

87873800

141285000

179148300

261699000

0

10000

200

5000

21357.198721472658

10000

61905828

0

408165600

0

14850800

38191700

83491800

165018900

197503900

257286499

0

100000

200

5000

29041.62661221323

100000

107417511

0

795662500

0

39621300

80388100

148000900

239402900

302844900

423498600

0

1000

500

500

1953.0658739823307

1000

15723990

0

489755100

0

1811000

6333800

11361600

17631300

21039000

468643400

0

10000

500

500

19195.445918846646

10000

18371048

0

501748600

0

8793600

13752800

19498000

27191100

39414400

69616200

0

100000

500

500

21026.463591679534

100000

16615525

0

555707100

0

8665000

14629700

21120600

28393600

35036900

59901400

0

10000

500

2500

18523.705155962187

10000

67107880

0

493496100

0

13354900

26929300

65898399

154064000

412525700

468472000

0

100000

500

2500

26025.383180825458

100000

63548998

0

828961600

0

25843400

48273400

84049900

119259300

151960600

458400000

0

10000

500

5000

18130.761956149665

10000

101216055

0

527777199

0

11905500

39487900

133357300

348334100

447466600

507586000

0

100000

500

5000

27524.81782080017

100000

119977958

0

1191204300

0

41530600

88540700

170275400

262084600

326402300

513494499

0

### 性能探查器结果

#### GC 信息

名称

最小值

最大值

平均

Allocation Rate

0 B

827.45 MiB

33.98 MiB

GC Committed Bytes

4.07 MiB

191.55 MiB

110.78 MiB

GC Fragmentation

2.58%

70.67%

11.54%

GC Heap Size

1.45 MiB

156.13 MiB

47.79 MiB

Gen 0 GC Count

0

10

1.37

Gen 0 Size

0 B

35.96 MiB

2.23 MiB

Gen 1 GC Count

0

8

0.53

Gen 1 Size

0 B

57.41 MiB

3.78 MiB

Gen 2 GC Count

0

3

0.38

Gen 2 Size

0 B

35.06 MiB

4.75 MiB

IL Bytes Jitted

39.35 KiB

657.45 KiB

594.55 KiB

LOH Size

0 B

9.35 MiB

6.60 MiB

POH Size

23.95 KiB

31.76 MiB

24.60 MiB

#### 异步活动

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

961.28

\[不完整\]

\[不完整\]

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

961.28

\[不完整\]

\[不完整\]

Async: <RunAsync>d\_\_4

1

972.92

\[不完整\]

\[不完整\]

Async: <DoReceive>d\_\_27

6

17,215.08

20,532.06

65.95(平均)

Async: <DoSend>d\_\_28

5

17,216.40

20,532.05

63.82(平均)

Async: <CopyPipeAsync>d\_\_152

4

17,225.95

20,507.48

91.05(平均)

Task: WriteToOutputPipe

2009

17,228.11

273,410.69

1.38(平均)

Async: <WriteToOutputPipe>d\_\_36

1

17,229.02

17,334.48

105.46

Async: <ExecuteAsync>d\_\_8

18

17,233.71

38,953.57

590.39(平均)

POST /greet.Greeter/SayHello

2099400

17,256.75

276,514.64

0.21(平均)

GET /gc

51

17,390.54

277,491.86

7.96(平均)

Async: <WriteToOutputPipe>d\_\_36

1

20,432.91

20,507.61

74.70

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()

5906

23,569.50

277,493.78

1,938.87(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2Connection.CopyPipeAsync()

5738

23,569.69

276,538.77

1,945.87(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2FrameWriter.WriteToOutputPipe()

1011

23,569.75

276,538.74

1,825.73(平均)

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoSend()

5577

23,570.22

277,493.76

1,944.11(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.KestrelConnection<T>.MoveNext()

5932

42,000.63

277,493.84

1,929.29(平均)

Task.Unwrap

1

221,749.85

225,921.04

4,171.19

.NET 9.0-Runtime-WindowsThreadPool
----------------------------------

### ghz 运行结果

TotalCalls

Connections

Concurrency

RPS

TotalRequests

LatencyAvg

Fastest

Slowest

LatencyP0

LatencyP25

LatencyP50

LatencyP75

LatencyP90

LatencyP95

LatencyP99

ErrorCount

100

2

10

789.2647367565322

100

12226771

0

112973000

0

505500

556600

1471100

6747900

112973000

112973000

0

1000

2

10

13983.843067719557

1000

510694

0

6756600

0

504499

526900

559300

672900

1052700

2115600

0

10000

2

10

18669.666757650175

10000

377519

0

2534100

0

0

523900

536100

584900

777300

1170200

0

100000

2

10

22558.739460951703

100000

305857

0

17255300

0

0

0

533000

1000100

1003500

1505900

0

100

2

100

7303.321550641232

100

4633213

549500

9934800

0

1555400

3721100

7120600

7827100

8930600

9934800

0

1000

2

100

16617.837919579633

1000

3436261

0

15730500

0

1078300

2093700

4754600

9237100

10966300

13444600

0

10000

2

100

30435.303978685548

10000

1942734

0

13562000

0

1005800

1557000

2356000

3934600

5181400

7302000

0

100000

2

100

38913.92783956877

100000

1547716

0

18972000

0

922500

1359400

1932000

2735100

3412100

5229000

0

1000

2

500

23975.583266001904

1000

7120694

0

24817800

0

4242800

6267700

9406700

13443600

14306200

17506400

0

10000

2

500

36362.45954221845

10000

9834881

0

60313300

0

5146400

7842800

12493600

18859600

23688600

40488200

0

100000

2

500

35170.69870004525

100000

9862136

0

82326500

0

4947200

8328600

12667800

18545700

23507900

34265100

0

10000

2

2500

31935.83197153623

10000

56579902

571300

228529100

0

35077300

45252800

54482300

139196100

167939500

187557500

0

100000

2

2500

35203.533984206784

100000

63431955

1062800

171719900

0

49080900

59807800

76710700

90421100

98337700

126098500

0

10000

2

5000

34376.67693727185

10000

90489427

0

217322900

0

55028100

92498800

116218400

160338200

168379300

181917500

0

100000

2

5000

35965.88635679059

100000

124327105

0

286887400

0

101288500

124043500

147884100

170146600

185037000

217968900

0

100

20

100

6289.782876695096

100

2754848

0

10436400

0

983600

1488600

3936000

6696500

8208999

10276700

0

1000

20

100

16833.118149972983

1000

2978714

0

16621200

0

835100

1909600

4475800

6966300

9009700

13621500

0

10000

20

100

29862.57541420139

10000

1865537

0

17848800

0

559400

1064400

2323600

4531300

6165600

12026700

0

100000

20

100

33498.4022937026

100000

1576213

0

33079800

0

538000

1013999

1998200

3114100

4528300

9298400

0

1000

20

500

17300.648947342015

1000

5447187

0

41906100

0

1655300

3271900

7724400

13466000

17180900

23558400

0

10000

20

500

32934.40980549596

10000

7629251

0

68578000

0

1328400

4194900

10889500

18964900

26653800

39646100

0

100000

20

500

29578.3954666968

100000

8572576

0

129850600

0

1741500

4357400

10792300

21596500

31227400

55341400

0

10000

20

2500

30425.997432654334

10000

31381620

0

215934600

0

2905600

16498500

49130000

89375700

108739200

138262700

0

100000

20

2500

29284.91537230513

100000

50962319

0

559041100

0

7672500

27049600

70832700

139113800

174571200

272063800

0

10000

20

5000

31553.833838142084

10000

51879775

0

277228200

0

11151500

38851400

79301800

122041500

146913200

215865000

0

100000

20

5000

27978.601965217003

100000

117221475

0

1304971400

0

25244700

75118400

170812900

286781800

371141300

550411200

0

100

100

100

8104.778577449264

100

2673053

0

7546600

0

1004399

2175400

4648800

5590000

6095300

6824200

0

1000

100

100

18590.055807347533

1000

2080044

0

18443300

0

548200

1002800

2324300

5176000

8050000

13150900

0

10000

100

100

22445.79228933165

10000

2569992

0

19997000

0

1008800

2000699

3288600

5526300

6970300

10429600

0

100000

100

100

23681.46347655251

100000

2405238

0

43298100

0

1000100

1933900

3007900

5089900

7209000

11501900

0

1000

100

500

19086.482762043095

1000

4695434

0

27502300

0

631700

1648500

5874100

14986300

20781800

24085800

0

10000

100

500

28694.72570855169

10000

8123589

0

65280099

0

1493700

4460600

11797400

22133900

27980000

40404100

0

100000

100

500

32154.0451428646

100000

7728749

0

90060000

0

1737100

4292100

9998600

19165600

27631200

45489400

0

10000

100

2500

31918.48274853885

10000

31644821

0

183816400

0

8215399

22077900

45888100

77393800

95612600

130055300

0

100000

100

2500

34495.13880705875

100000

40220870

0

545005900

0

5736200

20679400

51222100

115694600

151529500

228403700

0

10000

100

5000

25227.641624195934

10000

54697382

0

313880600

0

5375800

36292600

80874700

144300200

184621000

241415800

0

100000

100

5000

34447.31233629561

100000

73352572

0

1106591100

0

8284100

23287800

61247100

256674300

342184600

584231400

0

1000

200

500

23312.14259571383

1000

2422676

0

24421600

0

522299

1009100

1987600

5420400

12656800

21126700

0

10000

200

500

23330.17753798503

10000

10976776

0

84215500

0

3729100

7810800

15306500

24765200

32511400

48415500

0

100000

200

500

29928.530071618374

100000

9220735

0

121415000

0

2775600

6002500

12280700

21224300

29155800

46202600

0

10000

200

2500

23994.648233657965

10000

43748224

0

256656800

0

18679900

36451600

61896600

91474700

107201200

148442400

0

100000

200

2500

25669.410743788118

100000

59802975

0

559483900

0

17929100

42479100

82438300

138320000

176470200

261514800

0

10000

200

5000

26683.658820603625

10000

51648288

0

249316500

0

19965500

47298200

74572500

103705500

126329500

170823500

0

100000

200

5000

29119.88157293603

100000

97030046

0

1133216700

0

14576300

42290700

113769300

301475600

373118400

530750900

0

1000

500

500

1935.4755047187862

1000

51449090

0

501169000

0

1094600

3236700

5522000

460146000

477372500

484943000

0

10000

500

500

19129.46766326092

10000

15874369

0

499361100

0

6455800

11038500

16778500

23363400

28710000

55356200

0

100000

500

500

21136.33591894131

100000

16327484

0

631066600

0

6720700

12526600

20609900

30078100

39116400

66801000

0

10000

500

2500

18512.858383483126

10000

62747381

0

505650300

0

3772600

17285900

48212100

276088700

404187600

481247300

0

100000

500

2500

26437.901968471004

100000

62384717

0

1283520800

0

16324100

41804400

81004000

131592500

177543000

510296800

0

10000

500

5000

9818.347801814292

10000

116732587

0

986392300

0

9053400

30412800

135279900

426621500

472413100

735942000

0

100000

500

5000

27048.811555014265

100000

111810431

0

1268670900

0

28516200

75746400

154188100

262891700

338246900

554925200

0

### 性能探查器结果

#### GC 信息

名称

最小值

最大值

平均

Allocation Rate

0 B

651.27 MiB

26.68 MiB

GC Committed Bytes

4.07 MiB

195.77 MiB

131.94 MiB

GC Fragmentation

2.06%

51.90%

9.33%

GC Heap Size

1.43 MiB

165.98 MiB

51.99 MiB

Gen 0 GC Count

0

22

1.20

Gen 0 Size

1.08 MiB

17.87 MiB

2.45 MiB

Gen 1 GC Count

0

8

0.43

Gen 1 Size

0 B

78.66 MiB

2.44 MiB

Gen 2 GC Count

0

3

0.30

Gen 2 Size

0 B

36.20 MiB

3.59 MiB

IL Bytes Jitted

39.42 KiB

650.61 KiB

610.92 KiB

LOH Size

0 B

14.26 MiB

10.21 MiB

POH Size

23.95 KiB

29.04 MiB

24.42 MiB

#### 异步活动

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

980.38

\[不完整\]

\[不完整\]

Async: <RunAsync>d\_\_4

1

995.05

\[不完整\]

\[不完整\]

Async: <DoReceive>d\_\_27

5

9,833.70

13,085.52

76.63(平均)

Async: <DoSend>d\_\_28

3

9,835.09

9,976.22

80.78(平均)

Async: <CopyPipeAsync>d\_\_152

4

9,844.63

13,085.39

89.82(平均)

Task: WriteToOutputPipe

1739

9,846.93

267,397.40

100.29(平均)

Async: <WriteToOutputPipe>d\_\_36

1

9,847.68

9,956.12

108.44

Async: <ExecuteAsync>d\_\_8

18

9,852.61

31,470.65

580.62(平均)

POST /greet.Greeter/SayHello

2099400

9,874.09

267,376.96

0.23(平均)

GET /gc

51

9,970.53

268,476.52

7.21(平均)

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()

5996

16,170.17

268,477.44

1,863.24(平均)

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoSend()

5698

16,170.18

268,477.43

1,853.66(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2Connection.CopyPipeAsync()

5767

16,170.43

267,397.86

1,877.59(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http2.Http2FrameWriter.WriteToOutputPipe()

833

16,170.66

267,397.83

1,931.20(平均)

Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.KestrelConnection<T>.MoveNext()

5935

34,519.27

268,477.46

1,861.99(平均)

Task.Unwrap

49

81,549.93

267,394.37

1,969.34(平均)

Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DisposeAsync()

1

145,934.41

145,934.45

0.04

.NET 9.0-NativeAOT-ProtableThreadPool
-------------------------------------

### ghz 运行结果

TotalCalls

Connections

Concurrency

RPS

TotalRequests

LatencyAvg

Fastest

Slowest

LatencyP0

LatencyP25

LatencyP50

LatencyP75

LatencyP90

LatencyP95

LatencyP99

ErrorCount

100

2

10

6792.878346341696

100

796606

0

4790200

0

0

535600

821800

1473500

3827700

4339800

0

1000

2

10

14559.071247726964

1000

437296

0

3649700

0

0

526800

585000

805300

1161200

1976700

0

10000

2

10

19444.112274193096

10000

350545

0

3430600

0

0

0

539600

1000400

1009600

1506800

0

100000

2

10

21848.851567554597

100000

312364

0

11379900

0

0

0

533500

1000300

1003700

1383300

0

100

2

100

7325.846318395932

100

5133266

905900

12043700

0

1794200

5444000

6232100

11290500

11290500

11290500

0

1000

2

100

21758.381872656893

1000

2073636

0

8596400

0

849800

1584000

2790200

4890700

5685000

7038300

0

10000

2

100

33614.360592674966

10000

1777943

0

15228600

0

926200

1415900

1989700

3626100

4961200

9264500

0

100000

2

100

37448.925283252436

100000

1561452

0

14121200

0

940400

1393100

1958699

2718000

3393600

5137300

0

1000

2

500

17761.137565338784

1000

12870784

0

52565300

0

3505200

8303200

21197100

29542900

33995400

40094300

0

10000

2

500

36125.888606545

10000

9498901

0

52033700

0

5278400

8310500

11874500

17849100

23022800

32137800

0

100000

2

500

38292.60914350922

100000

9084066

0

84123600

0

4741400

8199300

11986100

16315799

20170900

27496500

0

10000

2

2500

35394.521494385015

10000

45369291

1246100

127908100

0

29022800

49460300

59413500

71108800

77969000

83462300

0

100000

2

2500

30610.64408621488

100000

73273065

3052700

193901500

0

56168500

71152700

88934100

104995200

115657400

135667800

0

10000

2

5000

34863.321833085574

10000

90171017

0

199395300

0

53422500

102117200

121828100

137893900

163061600

171031400

0

100000

2

5000

36119.83926960484

100000

125146762

0

287061100

0

106776500

126388700

145953800

164252600

180607800

224468100

0

100

20

100

8518.903446748334

100

3533734

551400

8855700

0

2609300

3507600

4258900

5263700

5956000

8855700

0

1000

20

100

20941.75052092604

1000

2332819

0

16095499

0

1000400

1572200

2736700

4767100

6342100

13073000

0

10000

20

100

26338.53071559944

10000

1913053

0

16961700

0

749600

1366600

2240400

4367300

5969500

8815500

0

100000

20

100

33921.45101313368

100000

1482414

0

23135200

0

643300

1017200

1910900

2629100

3788500

7972300

0

1000

20

500

17976.267731341082

1000

6866295

0

27362500

0

1588600

4781800

11168300

16418400

18725400

22575900

0

10000

20

500

33235.985132879134

10000

8706827

0

56991300

0

3002300

7412400

12417700

17654300

23322200

30821000

0

100000

20

500

35310.5661396035

100000

8002224

0

77100100

0

2232900

5458500

10704500

18821200

25574300

37066200

0

10000

20

2500

26339.175889329104

10000

46081385

0

205192900

0

14564200

40736300

68300000

100447200

115435500

148113900

0

100000

20

2500

36485.871995374764

100000

44313910

0

561628000

0

7266900

19589600

65141900

123648300

157886000

247086400

0

10000

20

5000

32307.912498542104

10000

47230251

0

197834400

0

16178100

32381600

73223500

109514200

125439799

159264100

0

100000

20

5000

28264.63373853795

100000

113036400

0

1171152000

0

19690900

52189000

176763300

304788600

360132400

587232700

0

100

100

100

7183.9596548825775

100

3291322

0

11198200

0

1457300

2566000

4069400

7007100

8232099

10630200

0

1000

100

100

18284.41034605075

1000

2976186

0

13493600

0

1289300

2381700

4174800

6113100

7186800

9871000

0

10000

100

100

25575.545686236645

10000

2394254

0

17248900

0

1087500

2012500

2882300

4888900

6457000

8702000

0

100000

100

100

23075.384303795927

100000

2478881

0

36037200

0

1073300

2013300

3127100

4556400

6357400

10478500

0

1000

100

500

20133.20125953307

1000

8105525

0

31100700

0

2469500

7358700

12907400

15238700

18430100

25830700

0

10000

100

500

30520.34440377439

10000

10204616

0

60663100

0

3997599

8830200

13589100

21162100

27323300

37171900

0

100000

100

500

25892.99569350285

100000

11225973

0

135700800

0

3643600

8489900

15473300

24134000

32761800

47774500

0

10000

100

2500

30533.456118538204

10000

34459606

0

229213000

0

7087200

19851800

52418200

87489100

114336300

156504100

0

100000

100

2500

33626.21203579645

100000

45126484

0

447119600

0

14376100

34083500

64139300

99888100

124271200

178262200

0

10000

100

5000

24510.320560678483

10000

48857806

0

293873800

0

4434500

24984800

60892600

158136300

185176800

226149800

0

100000

100

5000

33336.29804143915

100000

91353908

0

918846200

0

26856400

60813900

124855500

216059700

288305800

419597700

0

1000

200

500

22475.34454703191

1000

5826404

0

25193600

0

1365100

4937000

9337100

11510200

13320800

23033700

0

10000

200

500

28598.932573440627

10000

10678504

0

87779800

0

3867500

9078400

14457000

20809400

28646000

45407800

0

100000

200

500

28591.11559673947

100000

10619146

0

78760400

0

4378200

8619500

14164600

21473600

27662900

44026300

0

10000

200

2500

31048.447065347355

10000

35125562

0

205011700

0

12591300

26472800

48696800

78627500

96896900

133297699

0

100000

200

2500

32557.798965163383

100000

47648636

0

510992400

0

18674600

38354400

64029500

96544400

122325000

191717600

0

10000

200

5000

30301.744774464118

10000

51022795

0

274291600

0

14518000

36913900

72245400

123591400

155242800

196746400

0

100000

200

5000

31994.26969831995

100000

91095201

0

941572300

0

27727900

67491800

132081100

209811200

252496300

366190500

0

1000

500

500

1895.7791614437954

1000

59774427

0

493152800

0

5255100

10026900

19544900

469723800

481864500

488111400

0

10000

500

500

19157.576237095695

10000

16212560

0

493408000

0

6228400

10069300

12852000

16851300

20549400

459914900

0

100000

500

500

21106.0899723067

100000

16661425

0

537843600

0

8046599

14445200

20779500

28427300

35747100

57065600

0

10000

500

2500

18594.141581000356

10000

68613202

0

513072600

0

10746700

23713100

47127100

158001700

454671500

491749800

0

100000

500

2500

29561.345112149833

100000

56890118

0

849878700

0

20279200

38953700

72596200

117413800

155387000

441523100

0

10000

500

5000

18582.355793021543

10000

100691168

0

511776900

0

24419300

47508500

91627600

378449600

435466100

477489600

0

100000

500

5000

29786.825519410002

100000

109612941

0

1074443200

0

27211400

64103999

146117400

276829000

356303600

570740100

0

### 性能探查器结果

#### GC 信息

名称

最小值

最大值

平均

Allocation Rate

0 B

890.88 MiB

35.06 MiB

GC Committed Bytes

5.06 MiB

244.93 MiB

120.35 MiB

GC Fragmentation

6.02%

66.53%

18.49%

GC Heap Size

4.52 MiB

161.55 MiB

49.97 MiB

Gen 0 GC Count

0

21

1.38

Gen 0 Size

1.66 MiB

24.59 MiB

4.90 MiB

Gen 1 GC Count

0

4

0.46

Gen 1 Size

0 B

70.74 MiB

4.40 MiB

Gen 2 GC Count

0

4

0.37

Gen 2 Size

631.06 KiB

51.78 MiB

5.50 MiB

IL Bytes Jitted

0 B

0 B

0 B

LOH Size

128.04 KiB

11.12 MiB

7.62 MiB

POH Size

115.62 KiB

32.06 MiB

24.53 MiB

#### 异步活动

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

878.58

\[不完整\]

\[不完整\]

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

878.99

\[不完整\]

\[不完整\]

Async: <RunAsync>d\_\_4

1

879.03

\[不完整\]

\[不完整\]

Async: <DoReceive>d\_\_27

5827

18,119.54

282,438.29

1,822.43(平均)

Async: <DoSend>d\_\_28

5491

18,119.56

282,438.29

1,842.84(平均)

Async: <CopyPipeAsync>d\_\_152

5653

18,120.01

282,438.24

1,856.79(平均)

Async: <ExecuteAsync>d\_\_8

5859

18,120.38

283,323.51

1,835.27(平均)

POST /greet.Greeter/SayHello

2099400

18,121.15

282,418.47

0.18(平均)

GET /gc

51

18,146.32

283,321.40

9.34(平均)

Task: WriteToOutputPipe

2128

21,190.72

282,431.16

7.03(平均)

Async: <WriteToOutputPipe>d\_\_36

1116

21,190.73

282,438.01

1,996.19(平均)

Task.Unwrap

3

158,073.68

271,174.75

3,621.26(平均)

Async: <AcceptAsync>d\_\_10

1

181,083.32

181,083.39

0.07

.NET 9.0-NativeAOT-WindowsThreadPool
------------------------------------

### ghz 运行结果

TotalCalls

Connections

Concurrency

RPS

TotalRequests

LatencyAvg

Fastest

Slowest

LatencyP0

LatencyP25

LatencyP50

LatencyP75

LatencyP90

LatencyP95

LatencyP99

ErrorCount

100

2

10

5713.893904417982

100

1119876

0

9065500

0

0

523400

773700

2468600

6105900

8043700

0

1000

2

10

12505.048913498826

1000

454780

0

15858700

0

0

525900

592200

771200

1208600

2597200

0

10000

2

10

21072.248733452492

10000

312111

0

3627600

0

0

0

608400

1001600

1007200

1507900

0

100000

2

10

21834.780538948326

100000

317740

0

56169300

0

0

0

539800

1000700

1005599

1507200

0

100

2

100

7995.394652680056

100

6493373

427600

11989800

0

4934100

5952500

8004100

9557400

11435300

11989800

0

1000

2

100

21476.971317504805

1000

2661974

0

15736400

0

1077500

1599500

3797800

6012700

7682000

13640900

0

10000

2

100

30753.24854252667

10000

1937097

0

12599900

0

1046400

1557800

2284600

3613600

5164200

8117200

0

100000

2

100

37508.654184236664

100000

1640449

0

17514000

0

1010400

1453400

2001400

2780600

3527100

5540200

0

1000

2

500

21804.924424131947

1000

10143550

0

44286500

0

1726100

2919100

17834400

27253000

34343400

40826700

0

10000

2

500

35534.20344752842

10000

9427718

0

41772800

0

4999500

8429800

12471800

18003100

21457500

28446900

0

100000

2

500

31310.6477462267

100000

11326879

0

73868300

0

6150600

9774400

14520900

20967900

25690700

37009800

0

10000

2

2500

36435.195086786814

10000

50917435

1437400

124912800

0

41329700

54819400

63842399

69631400

73177800

83770300

0

100000

2

2500

38536.55431103038

100000

57939277

476900

145367800

0

43966000

55428300

69585600

84155400

97870500

114872100

0

10000

2

5000

35715.357175000965

10000

67408935

622500

162342000

0

27400200

74373000

101583200

117366100

124960700

138320300

0

100000

2

5000

36509.75237552529

100000

125528359

1237800

241948600

0

106911100

126757900

145581000

162544900

171534500

185744100

0

100

20

100

7978.108071451936

100

2758770

0

7201700

0

1292200

2324800

3821400

5113600

5785400

7201700

0

1000

20

100

21977.34575199884

1000

2018137

0

13160300

0

610400

1509600

2712400

5082400

6038700

7718700

0

10000

20

100

29927.51257179984

10000

1773260

0

13884800

0

576000

1184100

2279400

4195800

5665600

8023199

0

100000

20

100

33648.47485427603

100000

1584844

0

37152000

0

567200

1024900

2008600

3177500

4527400

8716800

0

1000

20

500

20875.475699902512

1000

7045460

0

40568100

0

1347700

3474500

10871200

19829600

22724600

28255400

0

10000

20

500

33414.64229625422

10000

7721826

0

64041299

0

1860900

5338100

11351300

18298800

23845400

33343800

0

100000

20

500

29350.100145476707

100000

9113136

0

115595100

0

2018799

5494800

12645800

21611200

29848900

49296400

0

10000

20

2500

32331.36284453917

10000

27513313

0

183824600

0

4566800

17225600

40560200

72737300

88521800

120473800

0

100000

20

2500

29270.440990512892

100000

53662068

0

637914700

0

8795400

30204700

73727900

143617300

189341900

278364500

0

10000

20

5000

32522.905882613122

10000

32891042

0

249522500

0

2859700

12149300

60262000

94228500

110653500

130021800

0

100000

20

5000

35311.1883217708

100000

92147962

0

798382500

0

13233800

43191700

156962000

247789900

301723700

436361800

0

100

100

100

8106.355382619974

100

1083580

0

6613400

0

395000

587200

1816700

2387200

2890000

4616300

0

1000

100

100

20888.51382401845

1000

1578924

0

16355900

0

390900

999600

1900300

4301200

5601300

12567000

0

10000

100

100

25777.354800027017

10000

2088946

0

25020000

0

998100

1524600

2636900

4723300

6044900

8988200

0

100000

100

100

27675.80090792679

100000

2057696

0

34109100

0

998100

1506000

2533200

4241400

6064800

10281000

0

1000

100

500

22169.016582424403

1000

2446356

0

23352700

0

653900

1053500

2623900

5933800

9304400

19551000

0

10000

100

500

29375.779376146573

10000

8892230

0

69921600

0

2521100

6942800

12893800

19564300

24439500

37265400

0

100000

100

500

32731.187496319788

100000

7900414

0

109123400

0

1849600

4682600

10483400

19773500

27422400

42395800

0

10000

100

2500

25343.2104272105

10000

34544458

0

183491500

0

7741000

26910800

52786700

78316200

96180400

132144099

0

100000

100

2500

27031.00423748835

100000

57205293

0

532774400

0

15174100

41835700

79865000

132103599

168611700

257489600

0

10000

100

5000

25648.20713902457

10000

29674965

0

196114400

0

5405600

23129600

43877900

68890200

84814200

119998600

0

100000

100

5000

34415.609020510085

100000

85654763

0

1103749800

0

13718100

42397700

126938799

239600100

294062100

413977500

0

1000

200

500

22190.563684698718

1000

4074707

0

19619300

0

989400

2995400

5495700

9712800

11881300

16825000

0

10000

200

500

29262.77415195749

10000

8829511

0

83257400

0

2002200

4966700

11081200

20041300

31358600

58838400

0

100000

200

500

30379.54163894407

100000

9374411

0

113144700

0

2997900

6474400

12674200

20688500

28042500

46076900

0

10000

200

2500

29671.107640250873

10000

42595386

0

218793500

0

16107900

37264600

62001100

88604100

103257700

142809900

0

100000

200

2500

33133.81475440819

100000

46515983

0

448271300

0

14157900

33608200

64972199

105893900

133585900

200029000

0

10000

200

5000

29571.363091981726

10000

30122491

0

165691700

0

7146900

23990500

45482500

68852900

83386800

104750900

0

100000

200

5000

33128.81919380422

100000

82764019

0

818812800

0

31477199

60784400

112673000

181561800

230709500

361100600

0

1000

500

500

1914.611761728098

1000

42453204

0

487189700

0

1002899

3021000

8389100

12385400

477160300

483092300

0

10000

500

500

19273.894569869313

10000

15919562

0

491760400

0

7833800

12874200

19756100

27664900

32883600

47719500

0

100000

500

500

21780.225458875047

100000

16244865

0

646716500

0

7077600

13439300

20499100

28875000

36888800

61025700

0

10000

500

2500

18484.91363016531

10000

71523030

0

517854300

0

16116700

26650500

45563600

361822500

450130700

497110600

0

100000

500

2500

29103.132830015995

100000

57072550

0

715213600

0

16839400

37764300

73697300

122691400

164456400

422587500

0

10000

500

5000

9827.897785145644

10000

129349613

0

993460400

0

17956500

43034600

215873300

425921700

476364600

823877700

0

100000

500

5000

30660.162665040207

100000

109680572

0

1400321000

0

44013600

80684300

140197900

218056800

284261800

618567900

0

### 性能探查器结果

#### GC 信息

名称

最小值

最大值

平均

Allocation Rate

0 B

468.01 MiB

23.18 MiB

GC Committed Bytes

4.99 MiB

203.22 MiB

138.67 MiB

GC Fragmentation

3.09%

60.47%

11.73%

GC Heap Size

4.46 MiB

164.28 MiB

57.42 MiB

Gen 0 GC Count

0

19

1

Gen 0 Size

1.66 MiB

23.29 MiB

3.96 MiB

Gen 1 GC Count

0

4

0.31

Gen 1 Size

0 B

81.30 MiB

2.40 MiB

Gen 2 GC Count

0

3

0.25

Gen 2 Size

621.87 KiB

37.84 MiB

4.48 MiB

IL Bytes Jitted

0 B

0 B

0 B

LOH Size

128.04 KiB

12.74 MiB

10.11 MiB

POH Size

115.27 KiB

28.52 MiB

24.69 MiB

#### 异步活动

名称

计数

开始时间(毫秒)

结束时间(毫秒)

总时间(毫秒)

Async: <RunAsync>d\_\_4

1

877.95

\[不完整\]

\[不完整\]

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

878.39

\[不完整\]

\[不完整\]

Async: <<StartAcceptingConnectionsCore>g\_\_AcceptConnectionsAsync|0>d

1

878.64

\[不完整\]

\[不完整\]

Async: <DoReceive>d\_\_27

6000

8,988.18

254,301.30

1,596.50(平均)

Async: <DoSend>d\_\_28

5649

8,988.20

254,301.30

1,595.21(平均)

Async: <CopyPipeAsync>d\_\_152

5774

8,988.69

253,298.40

1,610.71(平均)

Task: WriteToOutputPipe

1695

8,988.92

253,295.42

103.14(平均)

Async: <ExecuteAsync>d\_\_8

5968

8,989.12

254,301.33

1,599.35(平均)

POST /greet.Greeter/SayHello

2099400

8,990.53

253,278.75

0.19(平均)

GET /gc

51

9,057.21

254,299.18

8.67(平均)

Async: <WriteToOutputPipe>d\_\_36

936

12,103.44

253,298.34

1,709.58(平均)

Task.Unwrap

39

67,627.78

253,293.69

1,434.70(平均)

Async: <AcceptAsync>d\_\_10

3

97,649.67

245,792.07

0.04(平均)

**四、结语**
--------

*   **数据误差提醒**：所有测试数据都受系统负载、网络延迟、工具采样等多重因素影响，具有一定测量误差。本报告提供的是在特定硬件与环境下的结果，不能完全代表通用场景。
*   不同部署方式（Runtime vs. NativeAOT）、不同线程池（Portable vs. Windows）、以及 .NET 不同版本，在高负载下的差异更明显。
*   对于**极端高并发**或**追求最优启动性能**的场景，**.NET 9.0-NativeAOT** + **WindowsThreadPool** 是值得优先尝试的组合。如需兼容动态特性，可选择对应 Runtime 版。

> **再次声明**：
> 
> *   实验数据因测试环境差异、时间切片、网络状况等因素存在误差。
> *   本文仅提供参考性结论，不对任何技术选择做绝对保证，实际生产环境需多维度测试与调优。

作者：[VAllen](http://www.cnblogs.com/vallen/ "VAllen")  
出处：[http://www.cnblogs.com/vallen](http://www.cnblogs.com/vallen "http://www.cnblogs.com/vallen")  
本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文连接，否则保留追究法律责任的权利。  
**唯有偏执者得以生存。** ![](http://www.cnblogs.com/images/xml.gif)