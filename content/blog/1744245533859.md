---
layout: post
title: 'JavaScript Library â€“ Embla Carousel'
date: "2025-04-10T00:38:53Z"
---
JavaScript Library â€“ Embla Carousel
===================================

å‰è¨€
--

2022 å¹´ 4 æœˆï¼Œæˆ‘å†™äº†ä¸€ç¯‡Â [Swiper](https://www.cnblogs.com/keatkeat/p/16124065.html)Â ä»‹ç»ã€‚

Swiper æ˜¯å½“æ—¶å‰ç«¯æœ€å¤šäººä½¿ç”¨çš„ Slider åº“ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œä¸€éª‘ç»å°˜ã€‚

ä½†æ˜¯ï¼æ—¶è¿‡å¢ƒè¿ï¼Œè¿™ä¸¤å¹´å·²ç»æœ‰ä¸€åŒ¹ç¥ç§˜çš„é»‘é©¬æ‚„æ‚„æ€ä¸Šæ¥äº†ã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250405200326843-1037942657.png)

å®ƒå°±æ˜¯æœ¬ç¯‡çš„ä¸»è§’ --Â [Embla Carousel](https://www.embla-carousel.com/)ã€‚

Embla Carousel çš„å–ç‚¹
------------------

Embla Carousel (ç®€ç§° Embla) ä½•å¾·ä½•èƒ½ï¼Ÿå®ƒå‡­ä»€ä¹ˆåœ¨ Swiper å„æ–­çš„å¸‚åœºé‡Œèƒ½æ€å‡ºä¸€æ¡è¡€è·¯ğŸ¤”ï¼Ÿ

1.  lightweight
    
    Embla æœ€å¤§çš„å–ç‚¹æ˜¯ lightweightã€‚
    
    æ®è¯´å®ƒéå¸¸éå¸¸è½»ï¼Œä¸”æ€§èƒ½éå¸¸å¥½ã€‚
    
    p.s.ï¼šå…·ä½“å¤šè½»æˆ‘ä¸æ¸…æ¥šï¼Œä½†è‚¯å®šæ¯” Swiper è½»å¾ˆå¤šï¼Œæˆ‘å°±æ˜¯å«Œ Swiper åˆé‡åˆæ…¢ï¼Œæ‰åœ¨ research æ›¿ä»£æ–¹æ¡ˆæ—¶æ‰¾åˆ°äº† Emblaã€‚
    
2.  frameworkÂ integration
    
    Embla å¯ä»¥å¾ˆå®¹æ˜“å¾—é›†æˆåˆ°å„ç§å‰ç«¯æ¡†æ¶ï¼Œæ¯”å¦‚ï¼šReact/Next.jsï¼ŒSvelteï¼ŒVueï¼ŒSolid.js ç­‰ (å“å“Ÿï¼Œä¸é”™å“¦ï¼Œæ²¡æœ‰ Angular)ã€‚
    
3.  Customization andÂ independent of CSS
    
    Embla ä¸æºå’Œ styling CSSï¼Œå®ƒåªè´Ÿè´£ JS é€»è¾‘ï¼Œå¹¶ä¸”å¼€æ”¾åº•å±‚ API æ¥å£ï¼Œè®©ä½¿ç”¨è€…å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®éœ€æ±‚è®¢åšä¸“å±çš„ Carousel (a.k.a Slider)ã€‚
    

ä»¥ä¸Šä¸‰ç‚¹æ— ç–‘æ˜¯è¿‘å‡ å¹´å‰ç«¯çš„è¶‹åŠ¿å’Œåˆšéœ€ï¼Œé›·å†›è¯´è¿‡ï¼Œç«™åœ¨é£å£ä¸Šï¼ŒçŒªä¹Ÿèƒ½é£ï¼ŒEmbla åœ¨è¿™é‡Œåšäº†æœ€å¥½çš„ç¤ºèŒƒğŸ‘ã€‚

Swiper to Embla Carousel
------------------------

æƒ³ä» Swiper ç›´æ¥åˆ‡æ¢åˆ° Embla Carousel å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸º Embla æ¯” Swiper low levelï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±è¡¥ä¸Šè®¸å¤šä¸Šå±‚çš„å°è£…æ‰è¡Œã€‚

æœ¬ç¯‡æˆ‘ä¼šæŠŠæˆ‘ä½¿ç”¨åˆ°çš„ Swiper èŒƒå›´ ([è¿™ç¯‡](https://www.cnblogs.com/keatkeat/p/16124065.html)é‡Œçš„å†…å®¹) ç”¨ Embla æ¥å®ç°ä¸€éï¼Œå¤§å®¶å¯ä»¥æ„Ÿå—ä¸€ä¸‹å®ƒä¿©åœ¨ä½¿ç”¨ä¸Šçš„åŒºåˆ«ã€‚

æ³¨ï¼šæœ¬ç¯‡ä¸ä¼šä» 0 åŸºç¡€è®²èµ·ï¼Œæœ€å¥½ä½ ä½¿ç”¨è¿‡ Swiper æˆ–è€…å…¶å®ƒ Slider Libraryã€‚

å‚è€ƒï¼š
---

[å®˜ç½‘ â€“Â Embla Carousel](https://www.embla-carousel.com/)

å®‰è£…
--

yarn add embla-carousel

### HTML

<div class\="slider"\>
  <div class\="slide-list"\>
    <div class\="slide"\>
      <img src\="../images/yangmi.jpg" alt\="yangmi"\>
    </div\>
    <div class\="slide"\>
      <img src\="../images/tifa.webp" alt\="tifa"\>
    </div\>
    <div class\="slide"\>
      <img src\="../images/nana.jpg" alt\="nana"\>
    </div\>
  </div\>
</div\>

HTML ç»“æ„å’Œ Swiper æ˜¯ä¸€æ ·çš„ï¼Œslider > slide-list > slide ä¸‰å±‚ã€‚

### Styles

å’Œ Swiper ä¸åŒï¼ŒEmbla ä¸æ¶‰åŠ CSS (æ³¨ï¼šfirst render çš„æ—¶å€™ä¸æ¶‰åŠ CSS è€Œå·²ï¼Œäº¤äº’æ—¶å®ƒæ˜¯è‚¯å®šæ˜¯è¦æ”¹ CSS çš„)ã€‚

æˆ‘ä»¬éœ€è¦ç»™ first render çš„ CSS Stylesï¼Œåƒè¿™æ ·

.slider {
  max-width: 512px;
  overflow: hidden;

  .slide-list {
    display: flex;

    .slide {
      flex-shrink: 0;
      width: 100%;

      img {
        width: 100%;
        height: auto;

        aspect-ratio: 16 / 9;
        object-fit: cover;
      }
    }
  }
}

ç›®å‰çš„æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250405234554742-150365079.png)

åªä¼šçœ‹è§ä¸€å¼ å›¾ï¼Œå› ä¸ºå¦å¤–ä¸¤ä¸ª slide è¢« overflow hide èµ·æ¥äº†ã€‚

### Scripts

import emblaCarousel from 'embla-carousel';

const sliderElement \= document.querySelector<HTMLElement>('.slider')!;
const slider \= emblaCarousel(sliderElement, {
  container: '.slide-list',
  slides: '.slide',
});

emblaCarousel æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä¼ å…¥ slider element å°±å¯ä»¥äº†ã€‚

container å¦‚æœæ˜¯Â slider çš„ first child é‚£å¯ä»¥ä¸éœ€è¦æŒ‡å®šã€‚(æˆ‘æŒ‡å®šåªæ˜¯ä¸ºäº†æ¼”ç¤º)

slides å¦‚æœæ˜¯ container çš„ children ä¹Ÿå¯ä»¥ä¸éœ€è¦æŒ‡å®šã€‚(æˆ‘æŒ‡å®šåªæ˜¯ä¸ºäº†æ¼”ç¤º)

ç›¸å…³æºç åœ¨Â [EmblaCarousel.ts](https://github.com/davidjerleke/embla-carousel/blob/v8.6.0/packages/embla-carousel/src/components/EmblaCarousel.ts#L59)

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406000006838-882342887.png)

åˆ°è¿™é‡Œå°±å·²ç»å¯ä»¥è·‘èµ·æ¥äº†

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406000322529-1273586734.gif)

Navigation
----------

[å‚è€ƒï¼šå®˜ç½‘](https://www.embla-carousel.com/examples/predefined/#default)

Swiper æœ‰ built-in å®Œæ•´çš„ navigationï¼ŒEmbla æ²¡æœ‰ã€‚

Embla åªæä¾›äº†åº•å±‚æ“ä½œ slider çš„ APIï¼Œä¸Šå±‚éœ€è¦æˆ‘ä»¬è‡ªå·±å†™ã€‚

### HTML

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

<div class\="slider-container"\>
  <div class\="slider"\>
    <div class\="slide-list"\>
      <div class\="slide"\>
        <img src\="../images/yangmi.jpg" alt\="yangmi"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/tifa.webp" alt\="tifa"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/nana.jpg" alt\="nana"\>
      </div\>
    </div\>
  </div\>
  <div class\="navigation"\>
    <button class\="prev"\><</button\>
    <button class\="next"\>\></button\>
  </div\>
</div\>

View Code

å¢åŠ ä¸€ä¸ª container è¿˜æœ‰ navigation buttons

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406102418363-191294777.png)

### Styles

ç»™ä¸€ç‚¹ Styles ç¾è§‚ä¸€ä¸‹

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

.slider-container {
  max-width: 512px;
  overflow: hidden;

  .slider {
    width: 100%;

    .slide-list {
      display: flex;

      .slide {
        flex-shrink: 0;
        width: 100%;

        img {
          width: 100%;
          height: auto;

          aspect-ratio: 16 / 9;
          object-fit: cover;
        }
      }
    }
  }

  .navigation {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;

    .prev,
    .next {
      font-size: 32px;
      font-weight: 700;
      padding: 16px 24px;
      background-color: lightblue;
      color: blue;
      border-width: 0;
      cursor: pointer;

      &\[disabled\] {
        opacity: 0.4;
        cursor: unset;
        pointer-events: none;
      }
    }
  }
}

View Code

ç›®å‰çš„æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406102702490-178760766.gif)

ä¸¤ä¸ª button è¿˜åªæ˜¯æ‘†è®¾ï¼Œç‚¹å‡»ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœã€‚

### Scripts

const sliderContainer = document.querySelector<HTMLElement>('.slider-container')!;
const sliderElement \= sliderContainer.querySelector<HTMLElement>('.slider')!;
const slider \= emblaCarousel(sliderElement);

const prevBtn \= sliderContainer.querySelector<HTMLButtonElement>('.navigation .prev')!;
const nextBtn \= sliderContainer.querySelector<HTMLButtonElement>('.navigation .next')!;

for (const button of \[prevBtn, nextBtn\]) {
  const directive \= button === prevBtn ? 'Prev' : 'Next';
  // ç›‘å¬ prev next button click
  // å½“ user ç‚¹å‡»åï¼Œè°ƒç”¨ slider.scrollPrev() æˆ– scrollNext æ–¹æ³•æ¥ç§»åŠ¨ slide
  button.addEventListener('click', () => slider\[\`scroll${directive}\`\]());
}

ç›‘å¬ prev å’Œ next button clickï¼Œå½“ user ç‚¹å‡»åï¼Œè°ƒç”¨ slider.scrollPrev æˆ– scrollNext æ¥ç§»åŠ¨ slideã€‚

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406105125652-1610868177.gif)

#### disabled ä½“éªŒ

navigation button é€šå¸¸ä¼šæœ‰ disabled ä½“éªŒã€‚

å½“ user next åˆ°æœ€åä¸€ä¸ª slideï¼Œæˆ‘ä»¬éœ€è¦ disable next buttonï¼Œè®© user çŸ¥é“å·²ç»åˆ°å¤´äº†ï¼Œä¸å¯ä»¥å†ç»§ç»­ nextã€‚

ç›¸åï¼Œä¸€å¼€å§‹åœ¨ç¬¬ä¸€ä¸ª slide æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ disable prev buttonã€‚

é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ª handler

function handleStateChange() {
  prevBtn.disabled \= !slider.canScrollPrev();
  nextBtn.disabled \= !slider.canScrollNext();
}

é€è¿‡Â slider.canScrollPrev æˆ–Â canScrollNext æ–¹æ³•æ¥ detect å½“å‰ slider æ˜¯å¦å¯ä»¥ next or prevã€‚

å¦‚æœå½“å‰æ˜¯åœ¨ç¬¬ä¸€ä¸ª slide é‚£Â canScrollPrev å°†è¿”å› falseï¼Œå¦‚æœå½“å‰æ˜¯åœ¨æœ€åä¸€ä¸ª slide é‚£Â canScrollNext å°†è¿”å› falseã€‚

æ³¨ï¼šè¿™ä¸¤ä¸ªæ–¹æ³•è¿˜ä¼šè€ƒé‡ slider æ˜¯å¦æ”¯æŒ loopingï¼Œå¦‚æœæ”¯æŒ looping çš„è¯ï¼Œé‚£ä¸ç®¡å½“å‰åœ¨å“ªä¸€ä¸ª slideï¼Œå®ƒä»¬ä¸€å®šè¿”å› trueã€‚

æ¥ç€æˆ‘ä»¬è¦ç›‘å¬ slider çš„ slide å˜æ›´ï¼Œç„¶å apply handlerã€‚

slider.on('init', handleStateChange);
slider.on('select', handleStateChange);
slider.on('reInit', handleStateChange);

æœ‰ä¸‰ä¸ªäº‹ä»¶æˆ‘ä»¬éœ€è¦ç›‘å¬ã€‚

init å°±æ˜¯åˆå§‹åŒ–å®Œæˆï¼Œæ­¤æ—¶ä¼šæ˜¯ç¬¬ä¸€ä¸ª slideï¼Œæ‰€ä»¥ prev button ä¼š disabledã€‚

select æ˜¯æ¯ä¸€æ¬¡ slide changeï¼Œæ¯”å¦‚æˆ‘ä»¬ click next / prev buttonï¼Œæˆ–è€… swipe slide çš„æ—¶å€™ã€‚

reInit æ˜¯å½“ slider è¢«ä¿®æ”¹ (e.g. add/remove slide, options change) é‡ç½®ã€‚

#### æœ€ç»ˆæ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406110710682-1894228618.gif)

looping æ— é™å¾ªç¯
------------

Embla æ”¯æŒ loopingï¼Œé…ç½® options å°±å¯ä»¥äº†ã€‚

const slider = emblaCarousel(sliderElement, { loop: true });

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406113614659-241602868.gif)

è¶…çº§ä¸æ»‘...è¿™ä¸ª slide çš„ä½“éªŒç§’æ€ Swiperã€‚

ä¸Šä¸€ part æˆ‘ä»¬æåˆ°çš„Â canScrollPrev å’ŒÂ canScrollNext åœ¨ looping çš„æƒ…å†µä¸‹ï¼Œä¸€å®šè¿”å› trueã€‚

Autoplay
--------

[å‚è€ƒï¼šå®˜ç½‘](https://www.embla-carousel.com/examples/predefined/)

Autoplay æ˜¯è‡ªåŠ¨ swipe åŠŸèƒ½ï¼Œä½“éªŒæ˜¯è¿™æ · -- delay å‡ ç§’åï¼Œè‡ªåŠ¨ swipe to next slideï¼Œç„¶ååˆ delay åˆ swipe ä»¥æ­¤ç±»æ¨ã€‚

Embla Carousel å¯ä»¥é€è¿‡ Autoplay Plugin å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚

### å®‰è£… Plugin

é¦–å…ˆï¼Œéœ€è¦å¦å¤–å®‰è£… npm package

yarn add embla-carousel-autoplay

### setup & options

ç„¶åé…ç½®

import autoplay from 'embla-carousel-autoplay';

const slider \= emblaCarousel(sliderElement, { loop: true }, \[
  autoplay(),
\]);

emblaCarousel ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç”¨æ¥é…ç½® plugins çš„ã€‚

autoplay æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨å®ƒä¼šè¿”å› plugin å®ä¾‹ã€‚

å®ƒæœ‰ä¸€äº› options å¯ä»¥è°ƒ

1.  autoPlay({ delay: 1000 })
    
    delay å¤šä¹…å auto swipe to next slideï¼Œé»˜è®¤æ˜¯ 4000 millisecondsã€‚
    
2.  playOnInit
    
    æ˜¯ä¸æ˜¯ä¸€å¼€å§‹å°± start autoplayï¼Œé»˜è®¤æ˜¯ trueï¼Œå¦‚æœæˆ‘ä»¬æƒ³è‡ªå·±å†³å®šä½•æ—¶ start é‚£å°± set to falseï¼Œç„¶åè‡ªå·±è°ƒç”¨ API è®©å®ƒ startï¼Œä¸‹é¢ä¼šæ•™ã€‚
    
3.  stopOnFocusIn
    
    å½“ slider å†…æœ‰ä»»ä½• element è¢« focusedï¼Œautoplay å°±ä¼šç»ˆæ­¢ (ä¸æ˜¯ pauseï¼Œæ˜¯ stop)ï¼Œé»˜è®¤æ˜¯ trueã€‚
    
4.  stopOnMouseEnter
    
    mouse hover åˆ° sliderï¼Œautoplay å°±ç»ˆæ­¢ï¼Œé»˜è®¤æ˜¯ falseã€‚
    
5.  stopOnInteraction
    
    interaction æŒ‡çš„æ˜¯ slider è¢« pointerdownï¼Œé»˜è®¤æ˜¯ trueã€‚
    
    æ¯”å¦‚ swipe to next slide è¿™ä¸ªäº¤äº’å°±æ¶‰åŠåˆ°äº† pointerdownï¼Œæ‰€ä»¥å®ƒä¼š stop autoplayã€‚
    
    æ³¨ï¼šå¦‚æœæˆ‘ä»¬æ˜¯é€è¿‡ click navigation button æ¥ next slideï¼Œè¿™å¯ä¸ä¼š stop autoplay å“¦ï¼Œå› ä¸º button æ˜¯åœ¨ slider å¤–é¢ï¼Œclick button ä¸ä¼šè§¦å‘ slider çš„ pointerdownã€‚
    
6.  stopOnLastSnap
    
    autoplay åˆ°æœ€åä¸€ä¸ª slide å°±ç»ˆæ­¢ï¼Œé»˜è®¤æ˜¯ falseã€‚
    
    å¦‚æœæ²¡æœ‰è®¾ç½® loopingï¼Œåœ¨æœ€åä¸€ä¸ª slide å®ƒä¾ç„¶ä¼šå€’é€€å›åˆ°ç¬¬ä¸€ä¸ª slideã€‚
    
7.  é»˜è®¤ options
    
    ![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406125430954-1549584363.png)
    

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406132301775-2146755429.gif)

### Autoplay plugin å®ä¾‹ã€æ–¹æ³•ã€äº‹ä»¶

æƒ³æ“æ§ autoplayï¼Œæˆ‘ä»¬å¯ä»¥ä» slider é‡Œé¢å–å‡º autoplay plugin å®ä¾‹ï¼Œç„¶åè°ƒç”¨å®ƒçš„å„ç§æ–¹æ³•

const autoplayPlugin = slider.plugins().autoplay; // autoplay plugin å®ä¾‹

æˆ–è€…å…ˆåˆ›å»ºå®ä¾‹ï¼Œå†ä¼ ç»™ embla slider ä¹Ÿè¡Œã€‚

const autoplayPlugin = autoplay({ delay: 1000 }); // autoplay plugin å®ä¾‹
const slider = emblaCarousel(sliderElement, { loop: false }, \[autoplayPlugin\]); // ä¼ å…¥ embla slider

å¸¸ç”¨æ–¹æ³•ï¼š

1.  autoplayPlugin.play();
    
    å¯åŠ¨ timerï¼Œåˆ°ç‚¹ auto swipe to next slideã€‚
    
    å¦‚æœæˆ‘ä»¬é…ç½® playOnInit: falseï¼Œé‚£ autoplay å°±ä¸ä¼šå¼€å¯ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è°ƒç”¨ play æ–¹æ³•è®©å®ƒå¯åŠ¨ã€‚
    
2.  stop()
    
    stop å°±æ˜¯å®Œå…¨åœæ‰ autoplayï¼Œtimer ä¼šé©¬ä¸Šè¢« clear æ‰ã€‚
    
    stop äº†ä»¥åï¼Œå¯ä»¥ç”¨ play è®©å®ƒæ¢å¤ã€‚
    
3.  isPlaying()
    
    è¿”å› booleanï¼Œåˆ¤æ–­å½“å‰ autoplay æ˜¯å¦æ˜¯å¯åŠ¨çŠ¶æ€ã€‚
    
4.  reset()
    
    reset çš„æ„æ€æ˜¯é‡ç®— timerã€‚(æ³¨ï¼šautoplay åœ¨å¯åŠ¨çŠ¶æ€ä¸‹æ‰èƒ½ reset å“¦)
    
    æ¯”å¦‚è¯´ï¼Œtimer delay 4 ç§’åä¼š auto swipeï¼Œå½“å‰æ˜¯ç¬¬äºŒç§’ï¼Œæˆ‘ä»¬æ‰§è¡Œ resetï¼Œé‚£ timer å°±é‡ç®—ï¼Œè¦å†ç­‰ 4 ç§’åæ‰ä¼š auto swipeã€‚
    
5.  timeUntilNext()
    
    è·ç¦»ä¸‹ä¸€æ¬¡ auto swipe çš„æ—¶é—´ï¼Œå®ƒè¿”å›çš„æ˜¯ millisecondã€‚
    
    æ¯”å¦‚è¯´ï¼Œtimer delay 4 ç§’åä¼š auto swipeï¼Œå½“å‰æ˜¯ç¬¬ä¸‰ç§’ï¼Œæˆ‘ä»¬æ‰§è¡Œ timeUntilNext ä¼šå¾—åˆ° 1000ï¼Œä»£è¡¨ 1 ç§’åä¼š auto swipeã€‚
    
6.  init()
    
    æ‰€æœ‰ plugin éƒ½å¿…é¡»å®ç° init æ–¹æ³•ï¼Œè¿™ä¸ªæ˜¯ç»™ slider åˆå§‹åŒ– plugin æ—¶ç”¨çš„ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è°ƒç”¨å®ƒã€‚
    
7.  destroy()
    
    æ‰€æœ‰ plugin éƒ½å¿…é¡»å®ç° destroy æ–¹æ³•ï¼Œè¿™ä¸ªæ˜¯ç»™ slider destroy æ—¶ç”¨çš„ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è°ƒç”¨å®ƒã€‚
    
8.  name
    
    æ¯ä¸ª plugin éƒ½æœ‰åå­—ï¼Œautoplay plugin çš„åå­—å« 'autoplay'ã€‚
    
    ![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406173947949-1727507415.png)
    
9.  options
    
    è¿™ä¸ª options å¯¹è±¡å°±æ˜¯æˆ‘ä»¬è°ƒç”¨ autoplay å‡½æ•°æ—¶ä¼ å…¥çš„é‚£ä¸ª options å¯¹è±¡ã€‚
    
    ç‰¹åˆ«è¦ç•™æ„çš„åœ°æ–¹æ˜¯ï¼Œè¿™ä¸ªå¯¹è±¡ä¸åŒ…å« default optionsã€‚
    
    æ¯”å¦‚è¯´ï¼Œä¼ å…¥çš„ options å¯¹è±¡æ˜¯ { delay: 1000 }ï¼Œdefault options æ˜¯è¿™æ ·
    
    ![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406125430954-1549584363.png)
    
    æ‹¿ autoplayPlugin.options.stopOnInteraction å°†å¾—åˆ° undefinedï¼Œè€Œä¸æ˜¯ trueï¼Œå› ä¸ºÂ stopOnInteraction æ˜¯å®šä¹‰åœ¨ default options é‡Œï¼Œè€Œä¸æ˜¯åœ¨æˆ‘ä»¬ä¼ å…¥çš„ options å¯¹è±¡é‡Œã€‚
    
    æˆ‘ä¸ªäººè§‰å¾—å®ƒè¿™æ ·è®¾è®¡å¾ˆä¸æ–¹ä¾¿ï¼Œåº”è¯¥è¦æä¾›ä¸€ä¸ª merged options ç»™æˆ‘ä»¬ç”¨æ‰å¯¹ã€‚
    

å¸¸ç”¨äº‹ä»¶ï¼š

1.  autoplay:stop  
    
    const slider = emblaCarousel(sliderElement, { loop: false }, \[autoplay({ delay: 1000 })\]);
    const autoplayPlugin \= slider.plugins().autoplay;
    
    slider.on(\`autoplay:stop\`, () \=> console.log('stop')); // ç›‘å¬äº‹ä»¶
    window.setTimeout(() => autoplayPlugin.stop(), 1000);  // è§¦å‘ stop event
    
    äº‹ä»¶ç›‘å¬æ˜¯é€è¿‡ slider.on ç»‘å®šçš„ï¼Œäº‹ä»¶åçš„è§„èŒƒæ˜¯ autoplayPlugin.name + ':' + supportedEventNameã€‚
    
    stop event ä¼šåœ¨ autoplay stop çš„æ—¶å€™è§¦å‘ï¼Œå¾ˆå¤šæƒ…å†µä¼šå¯¼è‡´ autoplay stopï¼Œæ¯”å¦‚ focus, hover, interaction, last slide, call stop methodï¼Œä¸ç®¡ä»€ä¹ˆæƒ…å†µï¼Œåªè¦çŠ¶æ€ä» play to stopï¼Œå®ƒå°±ä¼šè§¦å‘ã€‚
    
2.  autoplay:play
    
    çŠ¶æ€ä» stop to play æ—¶è§¦å‘ã€‚
    
    æ³¨ï¼šplay on init ä¸ä¼šè§¦å‘ï¼Œå› ä¸ºæˆ‘ä»¬ç›‘å¬çš„æ¯”è¾ƒæ™šï¼Œå®ƒçš„é¡ºåºæ˜¯è¿™æ ·ï¼š
    
    emblaCarousel é‡Œé¢ä¼šè°ƒç”¨ autoplayPlugin.initï¼Œinit é‡Œé¢ä¼šè°ƒç”¨Â startAutoplayï¼Œå› ä¸ºé»˜è®¤ playOnInit: trueï¼ŒstartAutoplay é‡Œé¢ä¼š fire 'autoplay:play' eventï¼Œ
    
    ç­‰ emblaCarousel è·‘å®Œï¼Œæˆ‘ä»¬æ‰è°ƒç”¨ slider.on('autoplay:play')ï¼Œæ­¤æ—¶ event å·²ç» fire æ‰äº†ã€‚
    
3.  autoplay:select
    
    autoplay å¼€å¯åï¼Œä¼šå…ˆ delayï¼Œç­‰ timer åˆ°ç‚¹åï¼Œå®ƒä¼š auto swipeï¼Œè¿™ä¸ª select event å°±æ˜¯åœ¨ auto swipe çš„æ—¶å€™è§¦å‘çš„ã€‚
    
    ![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406175508419-719929577.png)
    
4.  autoplay:timerset
    
    autoplay çš„æµç¨‹æ˜¯ delay > swipe > delay > swipeï¼Œæ¯ä¸€æ¬¡ delay éƒ½æ˜¯ç”¨ setTimeout å®Œæˆçš„ï¼Œæ¯ä¸€æ¬¡ set è¿™ä¸ª timer éƒ½ä¼š fire 'autoplay:timerset' eventã€‚
    
5.  autoplay:timerstopped
    
    é¡¾åæ€ä¹‰ï¼Œå½“ clearTimeout æ—¶å®ƒå°±ä¼š fire 'autoplay:timerstopped' eventã€‚(e.g. when autoplay stop çš„æ—¶å€™ï¼Œæ³¨ï¼šstop ä¼šæ¯” timerstopped æ—©ä¸€æ‹ fire)ã€‚
    

### Change autoplay options?

å¦‚æœæˆ‘ä»¬æƒ³ä¿®æ”¹ options å¯ä»¥å—ï¼Ÿ

æ¯”å¦‚è¯´ï¼Œä¸€å¼€å§‹é…ç½® delay: 1000ï¼Œ2 ç§’åæˆ‘æƒ³æ”¹å» delay: 4000ã€‚

æˆ‘ä»¬å…ˆå¤©çœŸçš„è¯•ä¸€è¯•

const autoplayPlugin = autoplay({ delay: 1000 });
const slider \= emblaCarousel(sliderElement, { loop: false }, \[autoplayPlugin\]);
window.setTimeout(() \=> {
  autoplayPlugin.options.delay \= 4000; // 2 ç§’åä¿®æ”¹ delay ä» 1 ç§’å˜ 4 ç§’
}, 2000);

ç»“æœä»€ä¹ˆéƒ½æ²¡æœ‰æ”¹å˜ï¼Œä¾ç„¶ç»´æŒ delay 1 ç§’ã€‚

å¦‚æœæˆ‘ä»¬åŠ ä¸€å¥ reset å‘¢ï¼Ÿ

autoplayPlugin.reset();

è¿˜æ˜¯ä¸è¡Œã€‚

é‚£ stop > change delay > play å‘¢ï¼Ÿ

autoplayPlugin.stop();
autoplayPlugin.options.delay \= 4000; // 2 ç§’åä¿®æ”¹ delay ä» 1 ç§’å˜ 4 ç§’
autoplayPlugin.play();

é€šé€šä¸è¡Œã€‚

why? çœ‹ä¸€çœ‹æºç 

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406190423808-249940787.png)

æ¯å½“ setTimeout çš„æ—¶å€™ï¼Œå®ƒä¼šä» delay å¯¹è±¡ä¸­æ‹¿å‡º options çš„ 4 ç§’ã€‚

è¿™ä¸ª delay å¯¹è±¡æ˜¯åœ¨ plugin.init æ—¶åˆ¶ä½œå¥½çš„ï¼Œå¹¶ä¸”åç»­æ²¡æœ‰ç›‘å¬ options å˜æ›´ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ options å®ƒæ˜¯ä¸ç®¡çš„ã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406190510317-285358920.png)

å› æ­¤ï¼Œå€˜è‹¥æˆ‘ä»¬æƒ³ä¿®æ”¹ optionsï¼Œå”¯ä¸€çš„æ–¹æ³•å°±æ˜¯æ‰‹åŠ¨è°ƒç”¨ destoryï¼Œç„¶åå†è°ƒç”¨ initï¼Œè®©å®ƒæ•´ä¸ª plugin é‡å¯ã€‚

è°ƒç”¨ destroy ä¸éš¾ï¼Œä½†è°ƒç”¨ init å°±æœ‰ç‚¹å›°éš¾äº†ã€‚

init æ–¹æ³•éœ€è¦ä¸€ä¸ª optionsHandler å¯¹è±¡

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406190905743-740707092.png)

è¿™ä¸ªå¯¹è±¡æ˜¯é€è¿‡ä¸€ä¸ªå†…éƒ¨å‡½æ•° OptionsHandler åˆ›å»ºçš„ (åœ¨æ‰§è¡Œ emblaCarousel å‡½æ•°çš„æ—¶å€™ï¼Œæ³¨ï¼šEmbla çš„å‡½æ•°å‘½åè§„èŒƒæ˜¯ PascalCaseï¼Œè€Œä¸æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ camelCaseï¼Œåœ¨ç¿»é˜…æºç çš„æ—¶å€™è¦çœ‹å¾—æ‡‚å“¦)

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406191014466-754162237.png)

Embla æ²¡æœ‰å…¬å¼€è¿™ä¸ª OptionsHandlerÂ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•è°ƒç”¨ plugin.init æ–¹æ³•ã€‚

#### emblaCarousel.reInit (a.k.a reActive)

æˆ‘ä»¬åªå‰©ä¸‹æœ€åä¸€æ¡è·¯ --Â emblaCarousel.reInit æ–¹æ³•

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406191744498-714409209.png)

è¿™ä¸ªæ–¹æ³•ä¼šé‡å¯æ•´ä¸ª sliderï¼Œæ‰€æœ‰çš„ plugin ä¼šè¢« destroy ç„¶åå† initã€‚

é‡å¯ä¸ä¼šæŠŠ slide è·³å›ç¬¬ä¸€ä¸ªï¼Œè€Œæ˜¯ä¿æŒåœ¨å½“å‰ä½ç½®ã€‚

å¦‚æœæˆ‘ä»¬æ²¡æœ‰ä¼ å…¥æ–°çš„ options æˆ– pluginsï¼Œé‚£å®ƒä¼šä½¿ç”¨å›ä¹‹å‰çš„ options å’Œ pluginsã€‚

æœ€åçš„å®ç°ä»£ç æ˜¯è¿™æ ·

window.setTimeout(() => {
  autoplayPlugin.options.delay \= 4000; // 2 ç§’åä¿®æ”¹ delay ä» 1 ç§’å˜ 4 ç§’
  slider.reInit();
}, 2000);

### å½“ Autoplay é‡ä¸Š Navigation

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406181301328-741681226.gif)

çœ‹åˆ°å—ï¼ŒAutoplay å’Œ Navigation æ‰“èµ·æ¥äº†ã€‚

è™½ç„¶Â stopOnInteraction: trueï¼Œä½† navigation æ“ä½œå¯¹ autoplay plugin æ¥è¯´å¹¶ä¸ç®—æ˜¯ interactionï¼Œåªæœ‰ slider pointerdown æ‰ç®—æ˜¯ interactionï¼Œæ‰€ä»¥ navigation æ“ä½œä¸ä¼š stop autoplayã€‚

å®˜æ–¹ç»™çš„ä¾‹å­æ˜¯è¿™æ ·è§£å†³çš„

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250406181731454-42957772.png)

ç›‘å¬ navigation button clickï¼Œç„¶åè°ƒç”¨ reset æˆ– stop æ¥æ§åˆ¶ autoplayã€‚

è¿™ä¸ªåšæ³•å¯ä»¥è¾¾åˆ°æ•ˆæœï¼Œä½†æœ‰ä¸€ç‚¹ç‚¹æ‰£ç®¡ç†åˆ†ã€‚

å› ä¸ºè¿™æ ·åšä¼šæŠŠ navigation å’Œ autoplay çš„å…³ç³»ç»‘çš„å¾ˆç´§ï¼Œè€Œä¸”å€˜è‹¥å“ªå¤©å†å‡ºç°ä¸€ä¸ª pagination (å¦ä¸€ç§æ“ä½œ slide çš„æ–¹å¼)ï¼Œæˆ‘ä»¬åˆå¾—å†å†™ä¸€å¥—ç±»ä¼¼çš„é€»è¾‘ç»™å®ƒï¼Œè¿™æ ·å¾ˆç¹çã€‚

æˆ‘è¿™é‡Œæœ‰ä¸€ä¸ª ideaï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬ select change äº‹ä»¶ï¼Œå¦‚æœæ˜¯ select change by not autoplayï¼Œé‚£æˆ‘ä»¬å°± stop or reset autoplayã€‚

è¿™æ ·å°±å¯ä»¥ cover navigation å’Œ pagination ç”šè‡³å…¶å®ƒæ›´å¤šçš„ slide æ“ä½œã€‚

ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·

// ç›‘å¬æ¯ä¸€æ¬¡çš„ select
slider.on('select', () => {
  // åˆ¤æ–­è¿™ä¸€æ¬¡çš„ select æ˜¯ trigger by autoplay or not
  let isAutoSelect = false;

  // å› ä¸ºæ˜¯å…ˆè§¦å‘ select åè§¦å‘ autoplay:select (åŒæ­¥)
  // æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹æ¥åˆ¤æ–­ select æ˜¯ trigger by autoplay or not
  const callback = () => {
    isAutoSelect \= true;
    slider.off('autoplay:select', callback);
  };
  slider.on('autoplay:select', callback);

  queueMicrotask(() \=> {
    slider.off('autoplay:select', callback);
    // å¦‚æœæ˜¯ autoplay é‚£å°± skip
    if (isAutoSelect) return;

    // å¦‚æœ select trigger by navigation, pagination æˆ–å…¶å®ƒçš„ï¼Œé‚£æˆ‘ä»¬å°± stop or reset autoplayã€‚
    (autoplayPlugin.options.stopOnInteraction ?? true) ? autoplayPlugin.stop() : autoplayPlugin.reset();
  });
});

[RxJS](https://www.cnblogs.com/keatkeat/p/17297763.html)Â çš„å†™æ³•æ˜¯è¿™æ ·

fromEvent(slider, 'select')
  .pipe(
    switchMap(() \=>
      merge(fromEvent(slider, 'autoplay:select').pipe(map(() => true)), of(false).pipe(observeOn(asapScheduler))).pipe(
        take(1),
      ),
    ),
    filter(isAutoplaySelect \=> !isAutoplaySelect),
  )
  .subscribe(() \=>
    (autoplayPlugin.options.stopOnInteraction ?? true) ? autoplayPlugin.stop() : autoplayPlugin.reset(),
  );

Slides per view & Slides to scroll
----------------------------------

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407000250277-1600177919.png)

çº¢æ¡†æ˜¯ slideï¼Œç»¿æ¡†æ˜¯ view (a.k.a scroll snap)ã€‚

slides per view æ˜¯æŒ‡ï¼Œä¸€ä¸ª view é‡Œé¢æœ‰å¤šå°‘ä¸ª slideã€‚

æˆ‘ä»¬ä¸Šé¢æè¿‡çš„ä¾‹å­ï¼Œéƒ½æ˜¯ä¸€ä¸ª view ä¸€ä¸ª slideï¼Œè€Œè¿™ä¸€ä¸ªåˆ™æ˜¯ä¸€ä¸ª view ä¸¤ä¸ª slidesã€‚

é‚£è¦å¦‚ä½•å®ç°å®ƒå‘¢ï¼Ÿ

Swiper çš„Â [slides per view](https://www.cnblogs.com/keatkeat/p/16124065.html#:~:text=Slide%20per%20view%20/%20group)Â ä¸»è¦æ˜¯é  JavaScript æ¥å®Œæˆçš„ (åŒ…æ‹¬å¸ƒå±€)ã€‚

è€Œ Embla çš„ slides per view åˆ™ä¸»è¦æ˜¯é  CSS Styles æ¥å®Œæˆçš„ (äº¤äº’ä¾ç„¶æ˜¯é  JavaScript)ã€‚

### Styles

æˆ‘ä¸ªäººæ¯”è¾ƒä¹ æƒ¯ç”¨ grid åš slider å¸ƒå±€

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407001236860-1642687010.png)

æ‰€ä»¥è¿™é‡ŒæŠŠä¹‹å‰çš„ flex æ”¹æˆ grid (æ³¨ï¼šä¸¤ç§å¸ƒå±€æ–¹å¼éƒ½å¯ä»¥è¾¾åˆ°æœ€ç»ˆæ•ˆæœï¼Œæ‰€ä»¥é€‰å“ªä¸ªçœ‹ä¸ªäººå–œå¥½å°±å¥½)ã€‚

æ¯ä¸€ä¸ª column (ä¹Ÿå°±æ˜¯ slide) width æ˜¯ 50%ï¼Œé‚£å°±ä»£è¡¨ä¸€ä¸ª view é‡Œä¼šæœ‰ä¸¤ä¸ª slidesã€‚

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407000311722-1683133523.png)

#### add slide gap

slide ä¸ slide ä¹‹å‰æ²¡æœ‰ gapï¼Œä¸å¥½çœ‹ï¼Œæˆ‘ä»¬åŠ  gap è¿›å»

.slide-list {
  --slides-per-view: 2;
  --slide-gap: 16px;

  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: calc((100% - (var(--slide-gap) \* (var(--slides-per-view) - 1))) / var(--slides-per-view));
  gap: var(--slide-gap);
}

ç›´æ¥åŠ  gap ä¼šå½±å“åˆ° slide widthï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å†™ä¸€äº›ç®€å•çš„Â calculationã€‚

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407002642845-1135189412.png)

æ’ç‰ˆè™½ç„¶æ˜¯å¯¹çš„ï¼Œä½†äº¤äº’ä¼šæœ‰ä¸€äº›ä½“éªŒé—®é¢˜

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407024712500-570068282.gif)

å½“é¼ æ ‡åœ¨ gap å±€åŸŸ swipe æ—¶ï¼Œå®ƒä¼šä¸å°å¿ƒ select åˆ° slideã€‚

è¿™æ˜¯å› ä¸º gap åŒºåŸŸæ˜¯ div.slide-list çš„ areaï¼Œå®ƒæ˜¯ slide çš„ parent äº†ã€‚

æˆ‘ä»¬å¯ä»¥å‚è€ƒå®˜ç½‘çš„å®ç°æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒçš„ gap æ˜¯ç”¨ slide padding-left åšå‡ºæ¥çš„ã€‚

.slide-list {
  --slides-per-view: 2;
  --slide-gap: 16px;

  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: calc(100% / var(--slides-per-view));
  margin-left: calc(-1 \* var(--slide-gap));

  .slide {
    padding-left: var(--slide-gap);
  }
}

é¦–å…ˆç»™æ¯ä¸ª slide ä¸€ä¸ª padding-left ä½œä¸º slide gapã€‚

ç¬¬äºŒæ­¥æ˜¯ç»™ .slide-list ä¸€ä¸ª negative margin-leftï¼Œç›®çš„æ˜¯æŠŠç¬¬ä¸€ä¸ª slide çš„ padding-left åƒæ‰ã€‚

å¦‚æœä½ è§‰å¾—ä¸Šé¢è¿™ç§ overriding çš„å†™æ³•ä¸å¤ªå¥½ç†è§£çš„è¯ï¼Œé‚£å¯ä»¥æ”¹æˆä¸‹é¢è¿™æ ·

.slide-list {
  --slides-per-view: 3;
  --slide-gap: 16px;

  display: grid;
  grid-auto-flow: column;
  grid-template-columns: calc((100% / var(--slides-per-view)) - var(--slide-gap)); /\* for first slide width \*/
  grid-auto-columns: calc(100% / var(--slides-per-view));/\* for other slide width \*/

  /\* first slide æ²¡æœ‰ padding-left \*/
  .slide &:not(:first-child) {
    padding-left: var(--slide-gap);
  }
}

é¦–å…ˆ first slide æ²¡æœ‰ padding-leftã€‚

è¿™ä¼šå¯¼è‡´ first slide å’Œå…¶å®ƒ slides çš„ width ä¸ä¸€è‡´ï¼Œæˆ‘ä»¬éœ€è¦å¦å¤–å¤„ç† -- ç”¨ grid-template-columns æ¥è°ƒæ•´ first slide widthï¼Œè®©å®ƒå’Œå…¶å®ƒ slides ä¿æŒä¸€è‡´ã€‚

æœ€ç»ˆæ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407025650444-967245399.gif)

### slides per group

è®¾ç½® slides per view = 2 ä¹‹åï¼Œæˆ‘ä»¬å» swipe å®ƒä¼šå‘ç°ä½“éªŒæ€ªæ€ªçš„ã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407015636605-162480180.gif)

swipe ä¸€ä¸‹åªç§»åŠ¨äº†åŠä¸ª slideã€‚åŸå› æ˜¯ alignment è·‘æ‰äº†ã€‚

#### EmblaOptions.align

slider é»˜è®¤ align æ˜¯ 'center'ï¼Œæˆ‘ä»¬ swipe å¤šå‡ ä¸‹å°±èƒ½çœ‹å‡ºè¿™ä¸ª align: 'center' çš„å«ä¹‰äº†

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407020817931-255649218.gif)

center ä¼šæ˜¯ä¸€ä¸ªå®Œæ•´çš„ slideï¼Œç„¶åå·¦å³ slide å„å  50% widthï¼Œè¿™å°±æ˜¯ align: center çš„æ„æ€ã€‚

æˆ‘ä»¬æŠŠ align æ¢æˆ 'start' çœ‹çœ‹æ•ˆæœ

const slider = emblaCarousel(sliderElement, { align: 'start' });

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407021419344-1035073067.gif)

yesï¼Œè¿™æ˜¯æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ swipe ä½“éªŒã€‚

#### EmblaOptions.slidesToScroll

Swiper æœ‰ä¸€ä¸ªæ„Ÿå¿µå« slides per groupï¼Œæ„æ€æ˜¯å½“æˆ‘ä»¬ swipe çš„æ—¶å€™ï¼Œå®ƒä¼šç§»åŠ¨å¤šå°‘ä¸ª slideã€‚

æ¯”å¦‚è¯´ï¼Œåœ¨ä¸€ä¸ª view ä¸€ä¸ª slide çš„æƒ…å†µä¸‹ï¼Œswipe é€šå¸¸å°±æ˜¯ä¸€ä¸ª slideã€‚

è€Œåœ¨ä¸€ä¸ª view ä¸¤ä¸ª slides çš„æƒ…å†µä¸‹ï¼Œswipe ä¸€æ¬¡æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç§»åŠ¨ä¸€ä¸ª slide æˆ–è€…ç§»åŠ¨ä¸¤ä¸ª slidesã€‚

ä¸Šé¢æ˜¯ä¸€ä¸ª swipe ä¸€ä¸ª slide çš„ä½“éªŒï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ª swipe ä¸¤ä¸ª slides çš„ä½“éªŒã€‚

const slider = emblaCarousel(sliderElement, { align: 'start', slidesToScroll: 2 });

slidesToScroll: 2 è¡¨ç¤º scrollNext ä¼šç›´æ¥è·³ä¸¤ä¸ª slidesï¼Œè€Œä¸æ˜¯é»˜è®¤çš„ä¸€ä¸ªã€‚

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407022006752-206566684.gif)

å¦å¤–ï¼ŒslidesToScroll è¿˜æ”¯æŒ 'auto'Â  å€¼ã€‚

const slider = emblaCarousel(sliderElement, { align: 'start', slidesToScroll: 'auto' });

'auto' çš„æ„æ€å°±æ˜¯ä¾æ® slides per viewã€‚

æ¯”å¦‚ slides per view æ˜¯ 3 çš„è¯ï¼Œé‚£ slidesToScroll ä¹Ÿè‡ªåŠ¨ä¼šæ˜¯ 3ã€‚

SlidesInView
------------

EmblaCarousel.slidesInView æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šè¿”å›å½“å‰æœ‰å“ªäº› slides åœ¨ view é‡Œé¢ (è¿™ä¸ª view æŒ‡çš„æ˜¯ slider å¯è§åŒºåŸŸ)ã€‚

æˆ‘ä»¬çœ‹ä¸€ä¸ªå®˜æ–¹çš„[ä¾‹å­](https://www.embla-carousel.com/examples/predefined/#default)

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250408102628379-388110910.png)

ä¸€ä¸ª view ä¸€ä¸ª slideï¼Œç›®å‰æ˜¾ç¤ºçš„æ˜¯ä¸€å· slideï¼Œä¹Ÿå°±æ˜¯ç¬¬ 0 ä¸ªï¼Œindex 0ã€‚

emblaApi.on('slidesInView', () => console.log(emblaApi.slidesInView())); // \[0, 1\]

slidesInView è¿”å›çš„æ˜¯ \[0, 1\]ï¼Œæ„æ€æ˜¯è¯´ï¼Œindex 0 å’Œ 1 slide ç›®å‰æ˜¾ç¤ºåœ¨ view é‡Œã€‚

å‘ƒ...è¿™ä¸å¯¹å•ŠğŸ¤”æ˜æ˜æ˜¾ç¤ºçš„åªæœ‰ index 0 å•Š...

[Github Issue â€“Â slidesInView returns one too many slides](https://github.com/davidjerleke/embla-carousel/issues/650)

ä½œè€…ç»™å‡ºäº†è§£ç­”

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250408110204795-1476624800.png)

slidesInView æ˜¯ä¾é Â [IntersectionObserver](https://www.cnblogs.com/keatkeat/p/15993834.html)Â æ¥è®¡ç®—çš„ï¼Œæºç åœ¨Â [SlidesInView.ts](https://github.com/davidjerleke/embla-carousel/blob/v8.6.0/packages/embla-carousel/src/components/SlidesInView.ts#L28)ã€‚

æˆ‘ä»¬è‡ªå·±ç”¨ IntersectionObserver æµ‹ä¸€ä¸‹çœ‹çœ‹

window.setTimeout(() => {

  const io \= new IntersectionObserver(entries => {
    console.log(entries.map(e \=> e.isIntersecting)); // \[true, true, false, false, false\]
  });
  const slides \= Array.from(viewportNode.querySelectorAll('.embla\_\_slide'));
  slides.forEach(slide \=> io.observe(slide));

}, 2000); // delay æ˜¯ä¸ºäº†ç­‰å®ƒ render å®Œ

å¯ä»¥çœ‹åˆ° 5 ä¸ª slides é‡Œï¼Œå¤´ä¸¤ä¸ª (index 0 å’Œ 1) isIntersecting çœŸçš„æ˜¯ trueã€‚

è¿™ç§è¯¡å¼‚çš„ç°è±¡é€šå¸¸æ˜¯å¾®å·®æˆ–è€… "åˆšåˆšå¥½åŠ¨åˆ°è¦ä¸è¦ç®—" é€ æˆçš„ï¼Œä½œè€…ç»™çš„è§£æ–¹æ˜¯ -- è®¾ç½®Â thresholdã€‚

const emblaApi = EmblaCarousel(viewportNode, { inViewThreshold: 0.01 });

ä¸æ‡‚åŸç†æƒ³æ˜ç™½çš„è¯»å‹å¯ä»¥çœ‹[è¿™ç¯‡](https://www.cnblogs.com/keatkeat/p/15993834.html#:~:text=%E5%B0%B1%E6%85%A2%E6%8E%89%E4%BA%86.-,threshold,-%E6%98%AF%E4%B8%80%E4%B8%AA%E5%85%83%E7%B4%A0)ã€‚

Text Selection
--------------

slide é‡Œé¢çš„ text æ˜¯å¾ˆéš¾è¢« select çš„ã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407100251583-1187816634.gif)

double click select text å¯ä»¥ï¼Œä½† drag select å°±ä¸è¡Œã€‚

å› ä¸º drag ä¼šç§»åŠ¨ slideï¼Œè¿™å’Œ select text äº¤äº’æ˜¯æ‰“æ¶çš„ã€‚

Swiper å¯ä»¥é€è¿‡ classÂ [swiper-no-swiping](https://www.cnblogs.com/keatkeat/p/16124065.html#:~:text=slide%2Dactive%20class-,Text%20Selection,-%E5%8F%82%E8%80%83%3A%20stackoverflow)Â è§£å†³è¿™ç§å†²çªï¼Œå¾ˆé—æ†¾ Embla æ²¡æœ‰æ”¯æŒã€‚

ç›¸å…³ Issueï¼š

[Stack Overflow â€“Â Embla Carousel - select inner text](https://stackoverflow.com/questions/73858832/embla-carousel-select-inner-text)

ä¸‰ä¸ªæ€è·¯ï¼Œ

ç¬¬ä¸€ï¼Œç»™ slider æ·»åŠ  cursor styles

.slider {
  cursor: grab;
  user-select: none;
}

å‘ŠçŸ¥ user æ— æ³• select textã€‚

ç¬¬äºŒï¼Œé…ç½®Â watchDrag: false

const slider = emblaCarousel(sliderElement, { watchDrag: false });

ç›´æ¥ disable æ‰ drag çš„åŠŸèƒ½ï¼Œuser åªèƒ½é€è¿‡å…¶å®ƒæ–¹å¼ç§»åŠ¨ slideï¼Œæ¯”å¦‚ navigation æˆ– paginationã€‚

ç¬¬ä¸‰ï¼Œæ¨¡æ‹ŸÂ swiper-no-swiping

æ·»åŠ  'drag-disabled' class åˆ° slide é‡Œçš„ heading element

<h1 class\="drag-disabled"\>Yang Mi</h1\>

ä»£è¡¨è¿™ä¸ª element ä¸å¯ä»¥ dragã€‚

æ¥ç€ç›‘å¬ slider mousedown å’Œ touchstart äº‹ä»¶ï¼Œç„¶åÂ stopPropagation é˜»æ­¢ Embla dragã€‚

const slider = emblaCarousel(sliderElement);
for (const eventName of \['touchstart', 'mousedown'\]) {
  sliderElement.addEventListener(
    eventName,
    e \=> {
      if ((e.target as HTMLElement).classList.contains('drag-disabled')) {
        e.stopPropagation();
      }
    },
    { capture: true },
  );
}

æˆ‘ä»¬å¿…é¡»èµ¶åœ¨ Embla çš„å‰é¢ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨Â capture: trueã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407162542664-91920001.png)

Embla ä¼š binding å„ç§äº‹ä»¶åˆ° node (è¿™ä¸ª node å°±æ˜¯ slider element) ä¸Šï¼Œæˆ‘ä»¬èµ¶åœ¨å®ƒä¹‹å‰Â stopPropagation å°±å¯ä»¥é˜»æ­¢æ‰å®ƒä»¬äº†ã€‚

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407111230123-1084197524.gif)

Yang Mi å¯ä»¥ select text äº†ã€‚

Breakpoints
-----------

è¦åœ¨ä¸åŒçš„ viewport size å‘ˆç°ä¸åŒçš„ slide å¸ƒå±€æˆ– optionsï¼Œæˆ‘ä»¬éœ€è¦é…ç½® breakpointsã€‚

### CSS media query

slides å¸ƒå±€é€šå¸¸åªéœ€è¦å®šä¹‰ CSS media query å°±å¯ä»¥äº†ã€‚

Embla æœ¬èº«ä¼šç›‘å¬ window resizeï¼Œç„¶å getComputedStyle æ‹¿åˆ°å½“å‰çš„ Styles åšç›¸åº”çš„å¤„ç†ã€‚

æ¯”å¦‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407183146639-1844187054.png)

slides per view é»˜è®¤æ˜¯ 1ï¼Œslide gap é»˜è®¤æ˜¯ 0pxã€‚

åœ¨ viewport width 1920px æ—¶ï¼Œslides per view å˜æˆ 2ï¼Œslide gap å˜æˆ 16pxã€‚

æˆ‘ä»¬åªéœ€è¦ CSS å°±å¤Ÿäº†ï¼ŒJavaScript ä¸éœ€è¦å†™ã€‚

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407183555660-15200390.gif)

### breakpoints options

éœ€æ±‚ï¼šé»˜è®¤è¦ loopingï¼Œå¤§è¿‡ 1024px ä¸è¦ loopingï¼Œå¤§è¿‡ 1920 åˆè¦ loopingã€‚

const slider = emblaCarousel(sliderElement, {
  align: 'start',
  slidesToScroll: 'auto',
  loop: true,
  breakpoints: {
    '(min-width: 1024px)': {
      loop: false,
    },
    '(min-width: 1920px)': {
      loop: true,
    },
  },
});

ä¸Šé¢æœ‰ä¸‰ä¸ª loop options å®šä¹‰ï¼Œå®ƒçš„è¦†ç›–é€»è¾‘ (Object.assign) æ˜¯ä»ä¸‹åˆ°ä¸Š (ä¸‹é¢ç›–ä¸Šé¢ï¼Œä¸‹é¢èµ¢)ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬å®šä¹‰ media query æ˜¯ä»å°(ä¸Š)åˆ°å¤§(ä¸‹)ã€‚

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407190149358-1314121885.gif)

é¢˜å¤–è¯ï¼šbreakpoint change å¯¼è‡´ options changeï¼ŒEmbla åº•å±‚ä¼šä½¿ç”¨ reInit æ–¹æ³•é‡ç½®ï¼ŒreInit äº‹ä»¶å½“ç„¶ä¹Ÿä¼šè§¦å‘ã€‚

Embla æœ‰ä¸€ç‚¹æ¯” Swiper å¼ºï¼ŒEmbla å¯ä»¥ä¾æ® braekpoints é…ç½® acitve or inactiveã€‚(æˆ‘å½±å“ä¸­ï¼ŒSwiper æ˜¯æ— æ³• inactive çš„)ã€‚

const slider = emblaCarousel(sliderElement, {
  align: 'start',
  slidesToScroll: 'auto',
  breakpoints: {
    '(min-width: 1024px)': {
      active: false,
    },
    '(min-width: 1920px)': {
      active: true,
    },
  },
});

ç›´æ¥æ”¹ active å±æ€§å°±å¯ä»¥äº†ã€‚

Pagination
----------

Swiper æœ‰ bulit-in çš„Â [pagination](https://www.cnblogs.com/keatkeat/p/16124065.html#:~:text=import%20CSS%20%E5%93%A6-,Pagination,-HTML)ï¼Œä¹Ÿæ”¯æŒÂ [full custom pagination](https://www.cnblogs.com/keatkeat/p/16124065.html#:~:text=Fully%20Custom%20Pagination)ã€‚

Embla æ²¡æœ‰ built-in çš„ paginationï¼Œæˆ‘ä»¬éœ€è¦åƒ navigation é‚£æ ·ï¼Œä½¿ç”¨ Embla åº•å±‚ APIï¼Œè‡ªå·±å†™ä¸Šå±‚å®ç°ä»£ç ã€‚

### å®ç°è¦ç‚¹

paignation é•¿è¿™æ ·

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250408202532268-741240510.gif)

ä¸‹é¢ä¸€ç²’ä¸€ç²’çš„å« bulletã€‚

ä¸‰ä¸ªè¦ç‚¹ï¼š

1.  ç‚¹å‡» bullet ä¼šç§»åŠ¨ slide
    
2.  active bullet
    
    active bullet å°±æ˜¯é‚£é¢—æ¯”è¾ƒäº®çš„ bulletï¼Œslide åœ¨ç¬¬å‡ ä¸ªï¼Œactive bullet å°±è¦åœ¨ç¬¬å‡ ä¸ªã€‚
    
3.  bullet çš„æ•°é‡
    
    ä¸Šé¢çš„ä¾‹å­æœ‰ 6 ä¸ª slides (6 å¼ å›¾)ï¼Œä¸€ä¸ª view æ˜¾ç¤ºä¸€ä¸ª slideï¼Œbullet æœ‰ 6 ç²’ã€‚  
    
    ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸€æ ·æ˜¯ 6 ä¸ª slidesï¼Œä½†ä¸€ä¸ª view æ˜¾ç¤ºäº†ä¸¤ä¸ª slidesï¼Œbullet å˜æˆäº† 3 ç²’ã€‚
    
    ![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250408203222514-1926556897.png)
    
    æ‰€ä»¥ï¼Œbullet çš„æ•°é‡æ˜¯çœ‹æœ‰å¤šå°‘ä¸ª view å†³å®šçš„ã€‚
    

### å…·ä½“å®ç°

#### HTML

é¦–å…ˆæ˜¯ HTML

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250408204045488-1192846187.png)

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

<div class\="pagination"\>
  <template\><div class\="bullet"\></div\></template\>
</div\>

View Code

bullet çš„æ•°é‡ä¾æ® view countï¼Œæˆ‘ä»¬ç”¨ JavaScript åŠ¨æ€è¾“å‡ºä¼šæ¯”è¾ƒå®¹æ˜“ç®¡ç†ã€‚(ç”¨ CSS åªèƒ½ç¨¿ display: none ä¼šæ¯”è¾ƒä¹±)

HTML å®šä¹‰ä¸€ä¸ª bullet template å°±å¥½ã€‚

#### Styles

æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå°±æ˜¯ç¾è§‚ä¸€ä¸‹è€Œå·²

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

.pagination {
  --bullet-size: 24px;

  margin-top: 16px;

  display: flex;
  justify-content: center;
  gap: 16px;

  height: var(--bullet-size); /\* ææ—©ç»™ç©ºé—´ \*/

  .bullet {
    width: var(--bullet-size);
    height: var(--bullet-size);
    border-radius: 999px;
    border: 1px solid blue;
    cursor: pointer;

    &.active {
      background-color: lightblue;
    }
  }
}

View Code

#### Scripts

const pagination = document.querySelector<HTMLElement>('.pagination')!;
const bulletTemplate \= pagination.querySelector('template')!;

function rebuildPagination() {
  // å½“å‰åœ¨ç¬¬å‡ ä¸ª view
  const currentViewIndex = slider.selectedScrollSnap();
  // æ€»å…±æœ‰å‡ ä¸ª view
  const viewCount = slider.scrollSnapList().length;

  const bulletsFrag \= document.createDocumentFragment();

  for (let index = 0; index < viewCount; index++) {
    // åˆ›å»º bullet element based on view count
    const bulletTemplateFrag = bulletTemplate.content.cloneNode(true) as DocumentFragment;
    const bullet \= bulletTemplateFrag.firstElementChild!;

    // add click event to bullet
    bullet.addEventListener('click', () => slider.scrollTo(index));

    if (index === currentViewIndex) {
      // set active class to bullet
      bullet.classList.add('active');
    }

    bulletsFrag.appendChild(bullet);
  }

  // clear and re-append bullets
  pagination.innerHTML = '';
  pagination.appendChild(bulletsFrag);
}

// ä¸‰ç§æƒ…å†µæœ‰å¯èƒ½å¯¼è‡´ bullet æ•°é‡æˆ– active å˜æ›´ï¼Œå½“å˜æ›´æ—¶æˆ‘ä»¬å°± rebuild pagination
slider.on('select', rebuildPagination);
slider.on('init', rebuildPagination);
slider.on('reInit', rebuildPagination);

ä½¿ç”¨åˆ°äº†ä¸¤ä¸ª Embla API

1.  EmblaCarousel.selectedScrollSnap æ–¹æ³•
    
    scroll snap å°±æ˜¯ view çš„åˆ«å (alias)ã€‚
    
    selectedScrollSnap ä¼šè¿”å›å½“å‰ view index (å½“å‰åœ¨ç¬¬å‡ ä¸ª view)ã€‚
    
2.  EmblaCarousel.scrollSnapList æ–¹æ³•
    
    å®ƒä¼šè¿”å›ä¸€ä¸ª arrayï¼Œé•¿è¿™æ ·Â \[-0, 0.2, 0.4, 0.6, 0.8, 1\] æˆ–ç€è¿™æ ·Â \[-0, 0.5, 1\]ã€‚
    
    é‡Œé¢çš„å·ç ä¸é‡è¦ï¼Œarray.length ä»£è¡¨ view çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦çš„ bullet æ•°é‡ã€‚
    

æœ€ç»ˆæ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250408202532268-741240510.gif)

### Dynamic bullets

å½“ bullets å¤ªå¤šçš„æ—¶å€™ä¼šä¸å¥½çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥åšæˆ dynamic bullets é™åˆ¶å®ƒçš„æ•°é‡ã€‚

é•¿è¿™æ ·

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409012135281-1480196394.gif)

é™„ä¸Šå®Œæ•´ä»£ç ï¼Œå°±ä¸è§£é‡Šäº†ã€‚

HTML

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

<div class\="slider-container"\>
  <div class\="slider"\>
    <div class\="slide-list"\>
      <div class\="slide"\>
        <img src\="../images/yangmi1.jpg" alt\="yangmi1"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/tifa.webp" alt\="tifa"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/nana.jpg" alt\="nana"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/yangmi2.jpg" alt\="yangmi2"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/yangmi3.jpg" alt\="yangmi3"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/dilireba.jpg" alt\="dilireba"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/yangmi1.jpg" alt\="yangmi1"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/tifa.webp" alt\="tifa"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/nana.jpg" alt\="nana"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/yangmi2.jpg" alt\="yangmi2"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/yangmi3.jpg" alt\="yangmi3"\>
      </div\>
      <div class\="slide"\>
        <img src\="../images/dilireba.jpg" alt\="dilireba"\>
      </div\>
    </div\>
  </div\>
  <div class\="pagination"\>
    <template\><div class\="bullet"\></div\></template\>
    <div class\="bullet-list"\></div\>
  </div\>
</div\>

View Code

Styles

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

.slider-container {
  max-width: 512px;
  overflow: hidden;

  .slider {
    width: 100%;

    .slide-list {
      --slides-per-view: 1;
      --slide-gap: 0px;

      display: grid;
      grid-auto-flow: column;
      grid-auto-columns: calc(100% / var(--slides-per-view));
      margin-left: calc(-1 \* var(--slide-gap));

      .slide {
        padding-left: var(--slide-gap);

        img {
          display: block;
          width: 100%;
          height: auto;

          aspect-ratio: 16 / 9;
          object-fit: cover;
        }
      }

      @media (width >= 768px) {
        --slides-per-view: 2;
        --slide-gap: 16px;
      }
    }
  }

  .pagination {
    margin-top: 16px;

    --max-bullet-count: 5;
    --bullet-size: 24px;
    --bullet-gap: 16px;

    max-width: calc(
      (var(--max-bullet-count) \* var(--bullet-size)) + ((var(--max-bullet-count) - 1) \* var(--bullet-gap))
    );
    margin-inline: auto;
    overflow: hidden;

    .bullet-list {
      --active-index: 0; // JS will fill in

      margin-left: calc(50% - (var(--bullet-size) / 2));
      transition: transform 0.4s;

      transform: translateX(calc(-1 \* (var(--active-index) \* (var(--bullet-size) + var(--bullet-gap)))));

      display: flex;
      gap: var(--bullet-gap);
      height: var(--bullet-size);

      .bullet {
        flex-shrink: 0;
        width: var(--bullet-size);
        height: var(--bullet-size);
        border-radius: 999px;
        border: 1px solid blue;
        cursor: pointer;

        transition: transform 0.4s;

        &.active {
          background-color: lightblue;
        }

        &:not(.active) {
          transform: scale(0.5);
        }

        &:has(+ .active) {
          transform: scale(0.75);
        }

        &.active + .bullet {
          transform: scale(0.75);
        }
      }
    }
  }
}

View Code

Scripts

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

import emblaCarousel from 'embla-carousel';

const sliderContainer \= document.querySelector<HTMLElement>('.slider-container')!;
const sliderElement \= sliderContainer.querySelector<HTMLElement>('.slider')!;

const slider \= emblaCarousel(sliderElement, {
  align: 'start',
  slidesToScroll: 'auto',
  inViewThreshold: 0.1,
});

const pagination \= document.querySelector<HTMLElement>('.pagination')!;
const bulletList \= pagination.querySelector<HTMLElement>('.bullet-list')!;
const bulletTemplate \= pagination.querySelector('template')!;
const cachedBullets: HTMLElement\[\] \= \[\];

function rebuildPagination() {
  const currentViewIndex \= slider.selectedScrollSnap();
  const viewCount \= slider.scrollSnapList().length;
  bulletList.style.setProperty('--active-index', currentViewIndex.toString());
  cachedBullets.forEach(bullet \=> bullet.classList.remove('active'));

  if (cachedBullets.length > viewCount) {
    const bulletsToRemove \= cachedBullets.splice(viewCount);
    bulletsToRemove.forEach(bullet \=> bullet.remove());
  }

  if (cachedBullets.length < viewCount) {
    const gap \= viewCount - cachedBullets.length;
    const bulletsToAdd \= new Array(gap).fill(undefined).map((\_, index) => {
      const bulletTemplateFrag \= bulletTemplate.content.cloneNode(true) as DocumentFragment;
      const bullet \= bulletTemplateFrag.firstElementChild as HTMLElement;
      const scrollToIndex \= cachedBullets.length + index;
      bullet.addEventListener('click', () => slider.scrollTo(scrollToIndex));
      return bullet;
    });
    cachedBullets.push(...bulletsToAdd);
    const frag \= document.createDocumentFragment();
    bulletsToAdd.forEach(bullet \=> frag.appendChild(bullet));
    bulletList.appendChild(frag);
  }

  cachedBullets\[currentViewIndex\].classList.add('active');
}

slider.on('select', rebuildPagination);
slider.on('init', rebuildPagination);
slider.on('reInit', rebuildPagination);

View Code

Auto Height
-----------

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªåœºæ™¯

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409141627057-276375915.png)

ç²‰è‰²æ˜¯æ•´ä¸ª sliderï¼Œä¸ºä»€ä¹ˆä¸‹åŠæ®µä¼šç©ºç©ºï¼Ÿ

å› ä¸ºæœ‰éšè—çš„ slide å†…å®¹å¾ˆå¤šï¼Œå¾ˆé«˜ã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409140834902-659741754.gif)

åé¢éšè—çš„ slide æŠŠæ•´ä¸ª slider æ’‘é«˜äº†ã€‚

æ˜¾ç„¶å¯¹ç”¨æˆ·æ¥è¯´è¿™ä¸ªä½“éªŒä¸ okï¼Œå› ä¸ºè¿™ä¼šè®©ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ -- æ€ä¹ˆä¸‹é¢ç©ºç©ºçš„ğŸ¤”ï¼Ÿ

æˆ‘ä»¬å¯ä»¥ç”¨ Auto Height Plugin æ¥è§£å†³è¿™ä¸ªé—®é¢˜ (æ³¨ï¼š[Swiper](https://www.cnblogs.com/keatkeat/p/16124065.html#:~:text=%E4%B8%8D%E5%90%8C%E7%9A%84%20config-,Auto%20Height,-%E6%AF%8F%E4%B8%AA%20slide)Â ä¹Ÿæœ‰è¿™ä¸ªåŠŸèƒ½)ã€‚

å®‰è£… package

yarn add embla-carousel-auto-height

import plugin å‡½æ•°ï¼Œè°ƒç”¨å®ƒåˆ›å»º plugin å®ä¾‹ï¼Œå†ä¼ ç»™ Embla Carousel å°±è¡Œäº†ã€‚(å’Œ Autoplay Plugin ç©æ³•ä¸€æ ·)

import autoHeight from 'embla-carousel-auto-height';

const slider \= emblaCarousel(
  sliderElement,
  { align: 'start', slidesToScroll: 'auto', inViewThreshold: 0.1 },
  \[autoHeight()\],
);

æ·»åŠ  Styles

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409142059304-1633576951.png)

align-items: flex-start çš„ç›®çš„æ˜¯è®©æ¯ä¸€ä¸ª slide height å˜æˆ hug content (é»˜è®¤æ˜¯ stretchï¼Œä¼šè¢«å…¶å®ƒ slide æ‹‰å¤§ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬è¦çš„)ã€‚

transition åªæ˜¯ä¸ºäº†ä½“éªŒä¸æ»‘

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409143027453-1394687677.gif)

å½“ç”¨æˆ· swipe åˆ°æ¯”è¾ƒé«˜çš„ slide æ—¶ï¼Œslider çš„ height æ‰ä¼šæ’‘å¼€ã€‚

### Auto Height çš„è®¡ç®—æ–¹å¼

ä¸Šé¢ä¾‹å­æœ‰ 6 ä¸ª slides (6 å¼ å›¾)ï¼Œæ¯ä¸€ä¸ª view æ˜¾ç¤ºä¸¤ä¸ª slidesã€‚

æˆ‘ä»¬åˆ é™¤æœ€åä¸€ä¸ª slideï¼Œå˜æˆ 5 ä¸ª slidesï¼Œç„¶å swipe åˆ°æœ€åä¸€ä¸ª viewï¼Œå®ƒé•¿è¿™æ ·

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409143415801-368104120.png)

ç¬¬ 4 ä¸ª slide æ²¡æœ‰æ˜¾ç¤ºæ‰€æœ‰çš„å†…å®¹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

æˆ‘ç¿»äº†ä¸€ä¸‹æºç ï¼Œå‘ç°å®ƒä½¿ç”¨çš„æ˜¯ slideRegistry æ¥è·å–å½“å‰ view çš„ slidesï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä¸Šé¢æè¿‡çš„Â slidesInViewã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409143830625-604979339.png)

æˆ‘ä»¬æµ‹ä¸€ä¸‹

function detect() {
  window.setTimeout(() \=> {
    console.log('slidesInView', slider.slidesInView());
    console.log('slideRegistry', slider.internalEngine().slideRegistry\[slider.selectedScrollSnap()\]);
  }, 500);
}
slider.on('select', detect);
slider.on('init', detect);

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409144256178-675340532.png)

å¯ä»¥çœ‹åˆ°ï¼Œæœ€åä¸€ä¸ª viewï¼ŒslideRegistry åªæ‹¿åˆ°äº† slide index 4 (ä¹Ÿå°±æ˜¯ç¬¬ 5 ä¸ª slide)ï¼Œæ‰€ä»¥åœ¨è®¡ç®— auto height æ—¶ï¼Œå®ƒåªç”¨äº†ç¬¬ 5 ä¸ª slide çš„é«˜åº¦ï¼Œæ²¡æœ‰æŠŠç¬¬ 4 ä¸ª slide è€ƒé‡è¿›å»ã€‚

è€Œç¬¬ 4 ä¸ª slide æ¯”ç¬¬ 5 ä¸ªé«˜ï¼Œé‚£æœ€ç»ˆç¬¬ 4 ä¸ª slide å°±è¢« overflow clip æ‰äº†ã€‚

æˆ‘æäº†ä¸€ä¸ªÂ [Issue](https://github.com/davidjerleke/embla-carousel/discussions/1174)ï¼Œå¸Œæœ›æœ‰äººèƒ½è§£é‡Šæ¸…æ¥šè¿™æ˜¯ä¸æ˜¯ä»–ä»¬é¢„æƒ³ä¸­çš„ä½“éªŒã€‚

æˆ‘çš„çŒœæµ‹æ˜¯è¿™æ ·ï¼ŒslidesInView ä¾èµ– IntersectionObserverï¼Œå¦‚æœè¦ä¾é å®ƒçš„è¯ï¼Œéœ€è¦ç­‰åˆ° slide å®Œå…¨åœä¸‹æ¥æ‰å‡†ï¼Œè¿™ä¼šå¯¼è‡´ auto height å¾ˆæ™šæ‰å» update heightï¼Œå¯èƒ½è¿™ä¸ªä½“éªŒä¹Ÿä¸ okã€‚

æ‰€ä»¥ä½œè€…åœ¨è¿™é‡Œåšäº†ä¸€ä¸ª trade-offã€‚

è¦è¾¾åˆ°æˆ‘é¢„æœŸçš„æ•ˆæœï¼Œå”¯ä¸€çš„åŠæ³•å°±æ˜¯ä¸è¦é Â IntersectionObserverï¼Œè€Œæ˜¯è‡ªå·±ä¾æ® slide çš„ boundingClientRect è®¡ç®—å‡º slides in viewã€‚

### Auto height based onÂ slides in view

æˆ‘å°è¯•äº†ä¸€ä¸‹è‡ªå·±è®¡ç®— slides in viewï¼Œæœç„¶æœ‰ç‚¹éš¾åº¦ï¼Œå¯èƒ½å°±æ˜¯è¿™ä¸ªåŸå›  Embla æ‰ä¸åŸºäºÂ slides in view å§ã€‚

è¿™é‡Œåˆ†äº«æˆ‘çš„å°è¯•

HTML

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

<div class\="slider-container"\>
  <div class\="slider"\>
    <div class\="slide-list"\>
      <div class\="slide"\>
        <div class\="card"\>
          <img src\="../images/yangmi1.jpg" alt\="yangmi1"\>
          <p\>Lorem ipsum dolor sit amet consectetur adipisicing elit. Debitis, quidem!</p\>
        </div\>
      </div\>
      <div class\="slide"\>
        <div class\="card"\>
          <img src\="../images/tifa.webp" alt\="tifa"\>
          <p\>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Nemo aliquid consequatur quis quibusdam quam soluta nihil numquam, tempora sit amet?</p\>
        </div\>
      </div\>
      <div class\="slide"\>
        <div class\="card"\>
          <img src\="../images/nana.jpg" alt\="nana"\>
          <p\>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptates illo dolore iste rerum eum porro, aperiam assumenda et ad veniam vitae numquam, suscipit, perferendis hic. Ullam voluptatum quos impedit eaque?</p\>
        </div\>
      </div\>
      <div class\="slide"\>
        <div class\="card"\>
          <img src\="../images/yangmi2.jpg" alt\="yangmi2"\>
          <p\>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Ducimus eius dignissimos, earum nam architecto molestiae saepe dolore quidem. Placeat, quasi nihil dolor nulla consequatur nam perferendis vero. Fuga consectetur, earum eos, dolore magni consequuntur non officia dolores minus est excepturi.</p\>
        </div\>
      </div\>
      <div class\="slide"\>
        <div class\="card"\>
          <img src\="../images/yangmi3.jpg" alt\="yangmi3"\>
          <p\>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Illum consequatur laboriosam doloribus tempora atque aperiam?</p\>
        </div\>
      </div\>
    </div\>
  </div\>
</div\>

View Code

Styles

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

.slider-container {
  max-width: 512px;
  overflow: hidden;

  .slider {
    width: 100%;
    background-color: pink;

    .slide-list {
      --slides-per-view: 1;
      --slide-gap: 0px;

      display: grid;
      grid-auto-flow: column;
      grid-auto-columns: calc(100% / var(--slides-per-view));

      align-items: flex-start;
      transition: height 0.4s;

      margin-left: calc(-1 \* var(--slide-gap));

      .slide {
        padding-left: var(--slide-gap);

        .card {
          img {
            display: block;
            width: 100%;
            height: auto;

            aspect-ratio: 16 / 9;
            object-fit: cover;
          }

          p {
            padding: 16px;
            line-height: 1.5;
            font-size: 18px;
          }
        }
      }

      @media (width >= 768px) {
        --slides-per-view: 2;
        --slide-gap: 16px;
      }
    }
  }
}

View Code

Scripts

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

const sliderContainer = document.querySelector<HTMLElement>('.slider-container')!;
const sliderElement \= sliderContainer.querySelector<HTMLElement>('.slider')!;

const sliderOptions: EmblaOptionsType \= {
  align: 'start',
  slidesToScroll: 'auto',
  inViewThreshold: 0.1,
};
const slider \= emblaCarousel(sliderElement, sliderOptions);

function updateHeight() {
  const viewIndex \= slider.selectedScrollSnap();
  const slideList \= slider.containerNode();
  const slideListElementRect \= slideList.getBoundingClientRect();
  const slideRects \= slider.slideNodes().map(slide => slide.getBoundingClientRect());
  const lastSlideRects \= slideRects\[slideRects.length - 1\];

  let viewCoordinateXEnd \= Math.round((viewIndex + 1) \* slideListElementRect.width);
  if (sliderOptions.containScroll !== false) {
    const lastSlideCoordinateXEnd \= Math.round(lastSlideRects.left - slideListElementRect.left + lastSlideRects.width);
    viewCoordinateXEnd \= Math.min(viewCoordinateXEnd, lastSlideCoordinateXEnd);
  }
  const viewCoordinateX \= {
    start: viewCoordinateXEnd \- slideListElementRect.width + 1,
    end: viewCoordinateXEnd,
  };

  const intersectingSlides \= slideRects.filter(rect => {
    const left \= rect.left - slideListElementRect.left;
    const slideCoordinateX \= {
      start: Math.round(left \+ 1),
      end: Math.round(left + rect.width),
    };
    const isIntersecting \=
      (slideCoordinateX.start \>= viewCoordinateX.start && slideCoordinateX.start <= viewCoordinateX.end) ||
      (slideCoordinateX.end \>= viewCoordinateX.start && slideCoordinateX.end <= viewCoordinateX.end) ||
      (slideCoordinateX.start < viewCoordinateX.start && slideCoordinateX.end > viewCoordinateX.end);
    return isIntersecting;
  });

  const height \= Math.max(...intersectingSlides.map(rect => rect.height));
  slideList.style.height \= \`${height}px\`;
}

slider.on('init', updateHeight);
slider.on('reInit', updateHeight);
slider.on('select', updateHeight);

View Code

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409202243493-2032989656.gif)

å’Œ Auto Heigh Plugin çš„åŒºåˆ«æ˜¯åœ¨æœ€åä¸€ä¸ª viewï¼Œå®ƒçš„ç¬¬ 4 ä¸ª slide ä¼šè¢« overflowï¼Œæˆ‘çš„ä¸ä¼šã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409202342173-862465446.png)

æˆ‘è§£é‡Šä¸€ä¸‹å®ç°æ€è·¯ï¼š

é¦–å…ˆï¼Œæ‹¿ä¸‰ä¸ªä¿¡æ¯

1.  slide-list boundingClientRect
2.  slideÂ boundingClientRect
3.  view index

ç„¶åæ¨¡æ‹Ÿè®¡ç®—å‡ºè¿™ä¸ª view index å†…ä¼šå‡ºç°å“ªäº› slidesï¼Œç„¶åæ‹¿æœ€é«˜çš„ slide å°±å¯ä»¥äº†ã€‚

é‡Œé¢ä¼šå‡ºç°ä¸€ä¸ªç¨‹å’¬é‡‘ --Â containScroll

å®ƒæ˜¯ä¸€ä¸ª options

const sliderOptions: EmblaOptionsType = {
  containScroll: 'trimSnaps',
};

æœ‰ä¸‰ä¸ªå€¼å¯ä»¥æ”¾ï¼Œé»˜è®¤æ˜¯ 'trimSnaps'ï¼Œå¦å¤–ä¸€ä¸ª 'keepSnaps'ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ falseã€‚

æˆ‘ä¸æ¸…æ¥š 'keepSnaps' å’Œ 'trimSnaps'Â æœ‰ä»€ä¹ˆåŒºåˆ« (æ²¡æ‰¾åˆ°æ–‡æ¡£ï¼Œçœ‹æºç æœ‰ç‚¹æ˜)ï¼Œä½†æˆ‘çŸ¥é“Â trimSnaps å’Œ false åœ¨ä½“éªŒä¸Šæœ‰åŒºåˆ«ã€‚

ä¸Šè¿°ä¾‹å­æœ‰ 5 ä¸ª slidesï¼Œæ¯ä¸€ä¸ª view å¯ä»¥æ˜¾ç¤ºä¸¤ä¸ª slidesï¼Œä¸€å…±æœ‰ä¸‰ä¸ª viewsã€‚

å…³é”®åœ¨ç¬¬ä¸‰ä¸ª view é•¿ä»€ä¹ˆæ ·

containScroll: false é•¿è¿™æ ·

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409203313240-546398609.png)

å› ä¸ºæœ‰ä¸‰ä¸ª viewï¼Œæ¯ä¸ª view æ˜¾ç¤ºä¸¤ä¸ª slidesï¼Œé‚£æœ€åä¸€ä¸ª view ç†åº”æ˜¾ç¤ºç¬¬ 5 å’Œç¬¬ 6 ä¸ª slideã€‚

ä¸è¿‡æˆ‘ä»¬åªæœ‰ 5 ä¸ª slidesï¼Œæ‰€ä»¥ç¬¬ 6 ä¸ª slide çš„ä½ç½®å°±ç•™ç©ºäº†ã€‚

containScroll: 'trimSnaps' é•¿è¿™æ ·

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409203528607-1018445145.png)

å®ƒä¸ä¼šç•™ç©ºï¼Œç¬¬ä¸‰ä¸ª view ä¼šæ˜¾ç¤ºç¬¬ 4 å’Œç¬¬ 5 ä¸ª slideã€‚

é¢˜å¤–è¯ï¼š

æˆ‘åœ¨ Swiper æ–‡ç« é‡Œæœ‰æåˆ°ä¸€ä¸ªé—®é¢˜ --Â [Auto Height and Same Height](https://www.cnblogs.com/keatkeat/p/Auto%20Height%20and%20Same%20Height)ã€‚

åœ¨ Embla ä¹Ÿä¼šé‡åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åŒæ ·çš„è§£å†³æ–¹æ¡ˆï¼Œåªä¸è¿‡é‚£ä¸ªæ–¹æ¡ˆä¾èµ– slides in viewï¼Œ

æ”¾è¿‡æ¥ Embla çš„è¯ï¼Œè¦å˜›æˆ‘ä»¬è‡ªå·±è®¡ç®— slides in viewï¼Œè¦å˜›å­¦ Auto Height Plugin ç”¨Â slideRegistry å°±å¥½ã€‚

Handle content resize
---------------------

å‡å¦‚æˆ‘ä»¬ slide é‡Œé¢æœ‰åŠ¨æ€å†…å®¹ä¼šå¯¼è‡´ height å¢åŠ ï¼Œé‚£æˆ‘ä»¬éœ€è¦ç‰¹åˆ«å¤„ç†ï¼Œçœ‹ä¾‹å­ï¼š

åŠ ä¸€ä¸ª more content å’Œ read more button

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409145130802-108861946.png)

ç‚¹å‡» button æ˜¾ç¤º more content

const readMoreBtn = document.querySelector<HTMLElement>('.read-more-btn')!;

readMoreBtn.addEventListener('click', () => {
  const moreContent \= document.querySelector<HTMLElement>('.more-content')!;
  moreContent.style.display \= 'revert';
});

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409145329114-2078376240.gif)

å®Œå…¨æ²¡æœ‰ååº”ï¼Œæ˜¾ç„¶Â Auto Height Plugin é»˜è®¤æ˜¯ä¸ä¼šç›‘å¬ resize çš„ã€‚

ç›¸å…³Â [Issue â€“Â Auto Height and slide changing height](https://github.com/davidjerleke/embla-carousel/discussions/1142)

ä½œè€…ç»™çš„è§£æ–¹æ˜¯é€è¿‡ EmblaCarousel.reInit æ–¹æ³•

readMoreBtn.addEventListener('click', () => {
  const moreContent \= document.querySelector<HTMLElement>('.more-content')!;
  moreContent.style.display \= 'revert';

  slider.reInit(); // resize åè°ƒç”¨ reInit æ–¹æ³•é€šçŸ¥ Auto Height Plugin
});

è¿™æ ·å°±è¡Œäº†ã€‚(noteï¼šæ„Ÿè§‰æœ‰ç‚¹å°é¢˜å¤§åšï¼Œä½†ä¹Ÿæ²¡æœ‰å…¶å®ƒç®¡é“äº†ï¼Œæˆ–è®¸ä½œè€…æ˜¯æƒ³ç»Ÿä¸€æ¥å£ï¼Œä¹Ÿå¯èƒ½ reInit å†…éƒ¨å·²ç»åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œå¯ä»¥ä¸ç”¨æ‹…å¿ƒæ€§èƒ½é—®é¢˜)

æ•ˆæœ

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409150023310-1132410405.gif)

### è¿ç»­ Next ä½“éªŒé—®é¢˜

è¿™ä¸ªé—®é¢˜æˆ‘åœ¨ SwiperÂ [é‚£ç¯‡](https://www.cnblogs.com/keatkeat/p/16124065.html#:~:text=%E6%98%AF%E6%9C%80%E5%A4%A7%E5%80%BC%E4%BA%86.-,%E8%BF%9E%E7%BB%AD%20Next%20%E4%BD%93%E9%AA%8C%E9%97%AE%E9%A2%98,-auto%20height%20%E6%AF%8F%E6%AC%A1)ä¹Ÿæœ‰æè¿‡ã€‚

auto height æ¯æ¬¡æ¢ slide æ—¶éƒ½ä¼šæ”¹å˜ slider é«˜åº¦ï¼Œå¦‚æœ navigation / pagination button ä¾èµ–è¿™ä¸ªé«˜åº¦ï¼Œé‚£ä½“éªŒå°±ä¼šè¢«å½±å“ã€‚

![](https://img2023.cnblogs.com/blog/641294/202308/641294-20230808173121721-911321289.gif)

ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ— æ³•è¿ç»­æŒ‰ next buttonï¼Œå› ä¸ºå®ƒä¼šè·³ä¸Šè·³ä¸‹ã€‚

è§£å†³æ€è·¯æœ‰ä¸¤ä¸ªæ–¹å‘ã€‚

ç¬¬ä¸€ï¼Œnavigation button ä¸è¦ä¾èµ– slide çš„é«˜åº¦ï¼Œæ¯”å¦‚æˆ‘ä»¬æŠŠå®ƒä» slider ä¸‹é¢ç§»åˆ° slider å·¦è¾¹ã€‚(ä½†æœ‰æ—¶å€™ç©ºé—´å¤ªå°‘ï¼ŒçœŸçš„æ²¡æœ‰åœ°æ–¹å¯ä»¥æ”¾)

ç¬¬äºŒï¼Œè®©è¿™ä¸ª auto height æ…¢ä¸€ç‚¹è§¦å‘ï¼Œæ¯”å¦‚ next äº†ä¸€ç§’åæ‰ update heightã€‚

for ç¬¬äºŒä¸ªæ–¹å‘ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™

function updateHeight() {
  let slidesInView \= slider.slidesInView();
  if (slidesInView.length === 0) {
    // init or reInit æ—¶ slidesInView å¯èƒ½æ˜¯ empty array
    slidesInView = slider.internalEngine().slideRegistry\[slider.selectedScrollSnap()\];
  }
  const slideRects \= slider.internalEngine().slideRects.filter((\_, index) => slidesInView.includes(index));
  const height \= Math.max(...slideRects.map(rect => rect.height));
  slider.containerNode().style.height \= \`${height}px\`;
}

slider.on('init', updateHeight);
slider.on('reInit', updateHeight);
slider.on('settle', updateHeight);

ä¸éœ€è¦ä½¿ç”¨Â Auto Height Pluginï¼Œå•çº¯ Embla åº•å±‚ API å°±å¯ä»¥äº†ã€‚(å…¶å® Auto Height Plugin å†…éƒ¨ä¹Ÿæ˜¯è°ƒç”¨è¿™å‡ ä¸ª API å®ç°çš„)

settle äº‹ä»¶ä¼šåœ¨ slide moving transition ç»“æŸåè§¦å‘ï¼Œéå¸¸éå¸¸çš„æ™šã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250409163839748-137626450.gif)

Add / Remove / Sort Slides
--------------------------

æ²¡æœ‰ add / remove / sort æ¥å£ï¼Œæˆ‘ä»¬è¦å¢åŠ  / å‡å°‘ / æ”¹ slide çš„ä½ç½®çš„è¯ï¼Œç›´æ¥ DOM manipulation å°±å¥½ã€‚

DOM manipulation å®Œåè°ƒç”¨ EmblaCarousel.reInit() å°±å¯ä»¥äº†ã€‚

æ€»ä¹‹ï¼Œå®ƒå°±åªæœ‰ä¸€ä¸ªæ¥å£ï¼Œä¸ç®¡æ˜¯ change options, change plugin, change size, change elements éƒ½æ˜¯è°ƒç”¨ reInit å°±å¯¹äº†ã€‚

CSS ä¼˜åŒ–æ‰‹æ³•
--------

å‚è€ƒå®˜ç½‘çš„Â [example](https://codesandbox.io/p/sandbox/txs9c5?file=%2Fsrc%2Fcss%2Fembla.css%3A43%2C15)ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å‡ ä¸ª CSS ä¼˜åŒ–æ‰‹æ³•ã€‚

HTML ç»“æ„é•¿è¿™æ ·

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407170900870-939972374.png)

CSS

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407170735358-967878858.png)

touch-action æ˜¯å‘Šè¯‰æ¸¸è§ˆå™¨ï¼Œå®ƒåªè´Ÿè´£ pan-y (vertical scroll) å’Œ pinch-zoom (scale æ”¾å¤§) å°±å¥½ï¼Œå…¶å®ƒæ‰‹åŠ¿äº¤ç»™æˆ‘ä»¬è´Ÿè´£ã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407171024898-491543438.png)

transform: translate3d(0, 0, 0); æ˜¯è®©æ¸¸è§ˆå™¨ä½¿ç”¨ GPU æ¥æ¸²æŸ“æ¯ä¸ª slideã€‚

embla\_\_container è‚¯å®šä¼šä½¿ç”¨ GPU æ¸²æŸ“ï¼Œå› ä¸ºå®ƒè´Ÿè´£ transform å˜›ï¼Œslides åˆ™ä¸ä¼šï¼Œæ‰€ä»¥è¦å¿«å°±è¦ç‰¹åˆ«å£°æ˜ã€‚

![](https://img2024.cnblogs.com/blog/641294/202504/641294-20250407165657225-664343833.png)

touch-action: manipulation æ˜¯å‘Šè¯‰æ¸¸è§ˆå™¨ï¼Œè¿™ä¸ª button åªéœ€è¦æœ€åŸºæœ¬çš„ tapï¼Œä¸éœ€è¦å…¶å®ƒæ‰‹åŠ¿ã€‚

Embla Carousel çš„å…¶ä¸­ä¸€ä¸ªå–ç‚¹å°±æ˜¯å¿«ï¼Œæ‰€ä»¥å®ƒçš„ example å°½å¯èƒ½ä¼˜åŒ–åˆ°æè‡´ã€‚

ä½†æˆ‘ä»¬ä¸€èˆ¬ä¸Šä¸éœ€è¦è·Ÿç€è¿™ä¹ˆåšï¼Œæ€§èƒ½ä¼˜åŒ–è¯·ç­‰åˆ°ç”¨æˆ·æœ‰æ„Ÿè§‰åˆ°æ…¢äº†æ‰åšã€‚

å½“ Emble Carousel é‡ä¸Š YouTube Iframe
----------------------------------

å’Œ Swiper ä¸€æ¨¡ä¸€æ ·çš„é—®é¢˜ï¼Œè§£å†³æ–¹æ³•ä¹Ÿä¸€æ¨¡ä¸€æ ·ï¼Œåœ¨ SwiperÂ [é‚£ç¯‡](https://www.cnblogs.com/keatkeat/p/16124065.html#:~:text=%E5%BD%93%20Swiper%20%E9%81%87%E4%B8%8A%20YouTube%20Iframe)å·²ç»è®²è§£è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸å¤è¿°äº†ã€‚

æ€»ç»“
--

æœ¬ç¯‡ç®€å•çš„ä»‹ç»äº† Slider Library çš„æ˜æ—¥ä¹‹æ˜Ÿ â€“ Embal Carouselã€‚

å¸Œæœ›å®ƒèµ¶å¿«å–ä»£ Swiperï¼Œä¸ç„¶æˆ‘å†™è¿™ç¯‡å¹²å˜›å‘¢...ğŸ˜Š