---
layout: post
title: 'ä».NETåˆ°Goï¼šæˆ‘å’ŒAIæ“äº†ä¸€ä¸ªé«˜æ€§èƒ½å¯¹è±¡æ˜ å°„åº“Goç‰ˆMapster'
date: "2025-08-08T00:46:18Z"
---
ä».NETåˆ°Goï¼šæˆ‘å’ŒAIæ“äº†ä¸€ä¸ªé«˜æ€§èƒ½å¯¹è±¡æ˜ å°„åº“Goç‰ˆMapster
===================================

ä».NETåˆ°Goï¼šæˆ‘ç”¨AIä¸€èµ·æ“äº†ä¸€ä¸ªé«˜æ€§èƒ½å¯¹è±¡æ˜ å°„åº“
===========================

èƒŒæ™¯
--

ä½œä¸ºä¸€åä».NETå¼€å‘è½¬å‘Goçš„å¼€å‘è€…ï¼Œæˆ‘æ·±æ·±ä½“ä¼šåˆ°äº†è¯­è¨€è¿ç§»å¸¦æ¥çš„"é˜µç—›"ï¼Œç¼ºä¹ç§°æ‰‹çš„â€œå…µå™¨â€å‘€ã€‚

åœ¨.NETç”Ÿæ€ä¸­ï¼Œ[Mapster](https://github.com/MapsterMapper/Mapster) æ˜¯æˆ‘æœ€å–œæ¬¢çš„å¯¹è±¡æ˜ å°„åº“ï¼Œå®ƒç®€å•ã€é«˜æ•ˆã€ç±»å‹å®‰å…¨ã€‚åæ¥å› ä¸ºä¸šåŠ¡éœ€è¦ï¼Œæˆ‘å¼€å§‹æ¥è§¦Javaï¼Œè™½ç„¶ä¹Ÿèƒ½ç”¨ï¼Œä½†æ€»è§‰å¾—å“ªé‡Œä¸å¯¹åŠ²ã€‚æ¯æ¬¡å†™å¯¹è±¡æ˜ å°„çš„æ—¶å€™ï¼Œæˆ‘éƒ½æ€€å¿µ.NET Mapsterçš„ä¼˜é›…ã€‚

å†åæ¥ï¼Œä¸šåŠ¡éœ€è¦è½¬å‘Goã€‚å‘ç°Goç”Ÿæ€é‡Œè™½ç„¶æœ‰ä¸€äº›æ˜ å°„åº“ï¼Œä½†éƒ½å·®ç‚¹æ„æ€ï¼Œæ²¡æœ‰è¾¾åˆ°Mapsteré‚£ç§ä¼˜é›…ï¼Œä¸”ä¸å¤Ÿçµæ´»ã€‚äºæ˜¯ï¼Œæˆ‘å†³å®šè‡ªå·±åŠ¨æ‰‹ï¼Œç»“åˆAIçš„åŠ›é‡ï¼ˆæ¯•ç«Ÿæˆ‘æ°´å¹³æœ‰é™ï¼Œéœ€è¦AIå¸®å¿™ï¼‰ï¼Œæ•´ä¸€ä¸ªè‡ªå·±ç†æƒ³ä¸­çš„å¯¹è±¡æ˜ å°„åº“ã€‚- [é¡¹ç›®åœ°å€](https://github.com/deferz/go-mapster)

ä¸ºä»€ä¹ˆéœ€è¦å¯¹è±¡æ˜ å°„ï¼Ÿ
----------

åœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ä¸åŒçš„æ•°æ®æ¨¡å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼š

    // æ•°æ®åº“æ¨¡å‹
    type User struct {
    Â  Â  ID Â  Â  Â  Â int64
    Â  Â  FirstName string
    Â  Â  LastName Â string
    Â  Â  Email Â  Â  string
    Â  Â  Age Â  Â  Â  int
    Â  Â  CreatedAt int64 Â // Unixæ—¶é—´æˆ³
    }
    
    
    // APIå“åº”æ¨¡å‹
    type UserResponse struct {
    Â  Â  ID Â  Â  Â  Â int64
    Â  Â  FullName Â string
    Â  Â  Email Â  Â  string
    Â  Â  AgeGroup Â string
    Â  Â  CreatedAt time.Time
    }
    
    
    // ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹åŠ¨æ˜ å°„
    func mapUserToResponse(user User) UserResponse {
    Â  Â  return UserResponse{
    Â  Â  Â  Â  ID: Â  Â  Â  Â user.ID,
    Â  Â  Â  Â  FullName: Â user.FirstName + " " + user.LastName,
    Â  Â  Â  Â  Email: Â  Â  user.Email,
    Â  Â  Â  Â  AgeGroup: Â getAgeGroup(user.Age),
    Â  Â  Â  Â  CreatedAt: time.Unix(user.CreatedAt, 0),
    Â  Â  }
    }
    

è¿™ç§æ‰‹åŠ¨æ˜ å°„ä¸ä»…æ¯ç‡¥ï¼Œè¿˜å®¹æ˜“å‡ºé”™ï¼ˆä¸šåŠ¡å˜æ›´éœ€è¦å…¨éƒ¨æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯æ¼å­—æ®µèµ‹å€¼äº†ï¼‰ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œè®©ä¸šåŠ¡å¼€å‘æ›´é«˜æ•ˆã€‚

ä½¿ç”¨æŒ‡å—
----

### â€œæ‡’äººâ€æ¨¡å¼

å¦‚æœä½ å’Œæˆ‘ä¸€æ ·æ‡’ï¼Œä¸æƒ³å†™ä»»ä½•é…ç½®ï¼Œç›´æ¥å¼€ç®±å³ç”¨ï¼š

    // æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ - é›¶é…ç½®
    user := User{
    Â  Â  ID: Â  Â  Â  Â 1,
    Â  Â  FirstName: "å¼ ",
    Â  Â  LastName: Â "ä¸‰",
    Â  Â  Email: Â  Â  "zhangsan@example.com",
    Â  Â  Age: Â  Â  Â  30,
    }
    
    
    // ä¸€è¡Œä»£ç æå®šæ˜ å°„
    dto := mapster.Map[UserDTO](user)
    // ç»“æœ: {ID:1, FirstName:"å¼ ", LastName:"ä¸‰", Email:"zhangsan@example.com"}
    

**é€‚ç”¨åœºæ™¯**ï¼š

*   å¿«é€ŸåŸå‹å¼€å‘
*   ç®€å•çš„æ•°æ®è½¬æ¢
*   ä¸æƒ³å†™é…ç½®çš„åœºæ™¯
*   å­—æ®µååŸºæœ¬ä¸€è‡´çš„æƒ…å†µ
*   æ•°æ®åº“æ¨¡å‹åˆ°APIå“åº”çš„å¿«é€Ÿè½¬æ¢

å¦‚æœæƒ³èµ‹å€¼ç»™å·²æœ‰ç»“æ„ä½“ï¼Œå¯ä»¥ä½¿ç”¨ `MapTo` å‡½æ•°ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æœ€å¸¸ç”¨ï¼ˆå–œæ¬¢ï¼‰çš„å‡½æ•°äº†ã€‚

### ğŸ¯ "çµæ´»é…ç½®"æ¨¡å¼

å½“ä½ éœ€è¦è‡ªå®šä¹‰æ˜ å°„é€»è¾‘æ—¶ï¼Œæ¯”å¦‚å­—æ®µåä¸åŒã€éœ€è¦è®¡ç®—ã€æ¡ä»¶æ˜ å°„ç­‰ï¼š

> æ‰‹æ“ä¸€ä¸ªï¼Œä¸»è¦åŸå› æ˜¯æˆ‘æƒ³è¦è¿™ä¸ªè‡ªå®šä¹‰æ˜ å°„é…ç½®åŠŸèƒ½

    // è‡ªå®šä¹‰æ˜ å°„é…ç½®
    mapster.Config[User, UserDTO]().
    Â  Â  Map("FullName").FromFunc(func(u User) any {
    Â  Â  Â  Â  return u.FirstName + " " + u.LastName
    Â  Â  }).
    Â  Â  Map("AgeGroup").FromFunc(func(u User) any {
    Â  Â  Â  Â  if u.Age < 18 {
    Â  Â  Â  Â  Â  Â  return "æœªæˆå¹´"
    Â  Â  Â  Â  } else if u.Age < 65 {
    Â  Â  Â  Â  Â  Â  return "æˆå¹´äºº"
    Â  Â  Â  Â  }
    Â  Â  Â  Â  return "è€å¹´äºº"
    Â  Â  }).
    Â  Â  Map("Email").When(func(u User) bool {
    Â  Â  Â  Â  return u.Email != "" // æ¡ä»¶æ˜ å°„
    Â  Â  }).
    Â  Â  Register()
    
    
    // ä½¿ç”¨é…ç½®æ˜ å°„
    dto := mapster.Map[UserDTO](user)
    

**é€‚ç”¨åœºæ™¯**ï¼š

*   å­—æ®µåä¸ä¸€è‡´çš„æ˜ å°„
*   éœ€è¦å¤æ‚è®¡ç®—é€»è¾‘
*   æ¡ä»¶æ˜ å°„ï¼ˆæŸäº›æƒ…å†µä¸‹æ‰æ˜ å°„ï¼‰
*   æ•°æ®è½¬æ¢å’Œæ ¼å¼åŒ–

### ğŸš€ "æè‡´æ€§èƒ½"æ¨¡å¼

å¦‚æœä½ æ˜¯è¿½æ±‚æè‡´æ€§èƒ½çš„é€‰æ‰‹ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–å†™ä¼˜åŒ–çš„æ˜ å°„å‡½æ•°ï¼š

    // æ‰‹åŠ¨ç¼–å†™ä¼˜åŒ–çš„æ˜ å°„å‡½æ•°
    func mapUserToUserDTO(src User) UserDTO {
    Â  Â  return UserDTO{
    Â  Â  Â  Â  ID: Â  Â  Â  Â src.ID,
    Â  Â  Â  Â  FirstName: src.FirstName,
    Â  Â  Â  Â  LastName: Â src.LastName,
    Â  Â  Â  Â  Email: Â  Â  src.Email,
    Â  Â  Â  Â  FullName: Â src.FirstName + " " + src.LastName,
    Â  Â  }
    }
    
    
    // æ³¨å†Œæ˜ å°„å™¨
    func init() {
    Â  Â  mapster.RegisterGeneratedMapper(mapUserToUserDTO)
    }
    
    
    // ä½¿ç”¨ - è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ˜ å°„æ–¹å¼
    userDTO := mapster.Map[UserDTO](user)
    

**è‡ªåŠ¨é€‰æ‹©æœºåˆ¶**ï¼š

1.  **ç¬¬ä¸€ä¼˜å…ˆçº§**ï¼šå¦‚æœæ³¨å†Œäº†é›¶åå°„æ˜ å°„å™¨ï¼Œç›´æ¥ä½¿ç”¨ï¼ˆæœ€å¿«ï¼‰
2.  **ç¬¬äºŒä¼˜å…ˆçº§**ï¼šå¦‚æœæœ‰è‡ªå®šä¹‰é…ç½®ï¼Œä½¿ç”¨é…ç½®æ˜ å°„
3.  **ç¬¬ä¸‰ä¼˜å…ˆçº§**ï¼šè‡ªåŠ¨åå°„æ˜ å°„ï¼ˆåŒåå­—æ®µåŒ¹é…ï¼‰

è¿™æ ·ä½ åªéœ€è¦å†™ä¸€æ¬¡ `mapster.Map[UserDTO](user)`ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„æ˜ å°„æ–¹å¼ï¼

AIè¾…åŠ©å¼€å‘ç»å†
--------

è¯´å®è¯ï¼Œå¦‚æœæ²¡æœ‰AIçš„å¸®åŠ©ï¼Œè¿™ä¸ªé¡¹ç›®å¯èƒ½å°±èƒæ­»è…¹ä¸­äº†ã€‚æˆ‘æ‰¿è®¤ï¼Œæˆ‘çš„Goæ°´å¹³è¿˜åœç•™åœ¨"èƒ½å†™ï¼Œä½†å†™ä¸å¥½"çš„é˜¶æ®µï¼Œå¯èƒ½éœ€è¦è¾ƒé•¿çš„ä¸€æ®µæ—¶é—´ï¼ˆåå¤©åŠä¸ªæœˆï¼‰æ¥å®Œæˆå®ƒå§ï¼Œä½†æ˜¯ AI æŠŠå®ƒç¼©çŸ­åˆ°äº† 2 å¤©ï¼ŒæœŸé—´åŒ…æ‹¬å®ŒæˆåŸºç¡€çš„ä»£ç ä»¥åŠæ€§èƒ½ä¼˜åŒ–ã€‚

æ€»ç»“
--

è¿™ä¸ªé¡¹ç›®è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°äº†ï¼š

1.  **è·¨è¯­è¨€è¿ç§»çš„ä»·å€¼**ï¼šæŠŠ.NETçš„å¥½ä¸œè¥¿å¸¦åˆ°Goç”Ÿæ€ï¼Œè™½ç„¶æˆ‘æ°´å¹³æœ‰é™ï¼Œä½†è‡³å°‘åŠªåŠ›äº†
2.  **AIè¾…åŠ©å¼€å‘çš„æ•ˆç‡**ï¼šAIä¸æ˜¯æ›¿ä»£å¼€å‘è€…ï¼Œè€Œæ˜¯åƒæˆ‘è¿™ç§"èœé¸Ÿ"çš„æ•‘å‘½ç¨»è‰
3.  **å¼€æºç¤¾åŒºçš„åŠ›é‡**ï¼šåˆ†äº«ä»£ç ï¼Œè·å¾—åé¦ˆï¼Œå¤§å®¶ä¸€èµ·è¿›æ­¥

è¯´å®è¯ï¼Œè¿™ä¸ªé¡¹ç›®è¿˜æœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è‡³å°‘æ¯”æ‰‹åŠ¨å†™æ˜ å°„å‡½æ•°å¼ºã€‚å¦‚æœä½ ä¹Ÿæ˜¯ä».NETè½¬å‘Goçš„å¼€å‘è€…ï¼Œæˆ–è€…æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªé«˜æ€§èƒ½çš„å¯¹è±¡æ˜ å°„åº“ï¼Œæ¬¢è¿è¯•ç”¨ [Go Mapster](https://github.com/deferz/go-mapster)ï¼

å½“ç„¶ï¼Œå¦‚æœä½ å‘ç°bugæˆ–è€…æœ‰æ›´å¥½çš„æƒ³æ³•ï¼Œæ¬¢è¿æissueã€‚æ¯•ç«Ÿï¼Œæˆ‘ä¸€ä¸ªäººï¼ˆåŠ ä¸ŠAIï¼‰çš„èƒ½åŠ›æœ‰é™ï¼Œéœ€è¦å¤§å®¶çš„å¸®åŠ©ã€‚

ç›¸å…³é“¾æ¥
----

*   [GitHubä»“åº“](https://github.com/deferz/go-mapster)
*   [ä¸­æ–‡æ–‡æ¡£](https://github.com/deferz/go-mapster/blob/main/README_zh.md)
*   [æ€§èƒ½åˆ†æ](https://github.com/deferz/go-mapster/blob/main/PERFORMANCE_ANALYSIS.md)
*   [é¡¹ç›®æ€»ç»“](https://github.com/deferz/go-mapster/blob/main/PROJECT_SUMMARY.md)

* * *

_"æœ€å¥½çš„ä»£ç æ˜¯é‚£äº›ä½ ä¸éœ€è¦å†™çš„ä»£ç ã€‚" - é€šè¿‡AIè¾…åŠ©å¼€å‘ï¼Œæˆ‘ä»¬æ­£åœ¨è®©è¿™å¥è¯æˆä¸ºç°å®ã€‚_

_PS: å¦‚æœä½ ä¹Ÿæ˜¯ä».NETè½¬Goçš„"éš¾æ°‘"ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç—›è‹¦ç»å†ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ€€å¿µ.NETçš„ç¾å¥½æ—¶å…‰..._