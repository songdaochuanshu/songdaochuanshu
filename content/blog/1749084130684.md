---
layout: post
title: 'ä½¿ç”¨Plop.jsé«˜æ•ˆç”Ÿæˆæ¨¡æ¿æ–‡ä»¶'
date: "2025-06-05T00:42:10Z"
---
ä½¿ç”¨Plop.jsé«˜æ•ˆç”Ÿæˆæ¨¡æ¿æ–‡ä»¶
=================

å¼€å‘æ˜¯ä¸ªåˆ›é€ å‹çš„èŒä¸šï¼Œä¹Ÿæ˜¯æ¯ç‡¥çš„èŒä¸šï¼Œå› ä¸ºåœ¨éƒ¨åˆ†å¼€å‘ç»å¤§å¤šæ•°éƒ½æ˜¯æ¯å¤©åœ¨ä¸šåŠ¡çš„ä»£ç ä¸­æ— æ³•è‡ªæ‹¨ï¼Œè¯´åˆ°å¼€å‘å·¥ä½œï¼Œå°±æ°¸è¿œéƒ½é€ƒä¸å¼€æ–°å»ºæ–‡ä»¶çš„æ­¥éª¤ï¼Œé‚£æˆ‘ä»¬æœ‰ä»€ä¹ˆåŠæ³•åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£è„±æ¯å¤©é‡å¤çš„æ‰‹åŠ¨é‡å»ºå·¥ä½œäº†ï¼Ÿ

**å‰æƒ…**
------

å¼€å‘æ˜¯ä¸ªåˆ›é€ å‹çš„èŒä¸šï¼Œä¹Ÿæ˜¯æ¯ç‡¥çš„èŒä¸šï¼Œå› ä¸ºå¼€å‘ç»å¤§å¤šæ•°éƒ½æ˜¯æ¯å¤©åœ¨ä¸šåŠ¡çš„ä»£ç ä¸­æ— æ³•è‡ªæ‹¨ï¼Œè¯´åˆ°å¼€å‘å·¥ä½œï¼Œå°±æ°¸è¿œéƒ½é€ƒä¸å¼€æ–°å»ºæ–‡ä»¶çš„æ­¥éª¤ï¼Œç‰¹åˆ«ç°åœ¨ç»„ä»¶åŒ–å¼€å‘èƒœè¡Œï¼Œæ¯å¤©éƒ½æ˜¯åœ¨æ–°å»ºæ–°å»ºç»„ä»¶çš„é“è·¯ä¸Šä¸€å»ä¸è¿”ï¼Œæˆ‘ä»¬åšçš„æœ€å¤šå°±æ˜¯ç›´æ¥æ‹·è´ä¸€ä¸ªæ—§ä»£ç ç»„ä»¶ï¼Œé‡å‘½ä¸‹åå†åˆ å‡åˆ å‡å®Œæˆæ–°ç»„ä»¶çš„åˆ›å»º

æ€è€ƒ
--

å¯¹äºè¿™ç§ç»„ä»¶ï¼Œæ•´ä½“åŸºç¡€ç»“æ„æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä¸å¯ä»¥æœ‰æ›´å¥½çš„æ–¹å¼ä¸€é”®ç”Ÿæˆäº†ï¼Œå°±é¿å…äº†ååå¤çš„æ‹·è´åˆ å‡åŠ¨ä½œï¼Œæœ‰ä¸€å¤©æˆ‘åœ¨é€›åšå®¢è®ºå›çš„æ—¶å€™æˆ‘å‘ç°äº†Plop.jsï¼Œå‘ç°å®ƒæ­£æ˜¯è§£å†³è¿™ç§åœºæ™¯çš„

Plop.jsä»‹ç»
---------

**å®˜ç½‘ï¼š**[Consistency Made Simple : PLOP](https://plopjs.com/)

**å®˜ç½‘çš„ä»‹ç»ï¼š**Plop is a little tool that saves you time and helps your team build new files with consistencyï¼Œç¿»è¯‘å°±æ˜¯ï¼šPlopæ˜¯ä¸€ä¸ªå°å·¥å…·ï¼Œå¯ä»¥èŠ‚çœæ‚¨çš„æ—¶é—´ï¼Œå¹¶å¸®åŠ©æ‚¨çš„å›¢é˜Ÿæ„å»ºä¸€è‡´çš„æ–°æ–‡ä»¶

**å·¥ä½œä¸»æµç¨‹ï¼š**æˆ‘ç”¨è¿‡åå¯¹å®ƒçš„å·¥ä½œæ•´ä½“æµç¨‹ç†è§£æ˜¯è¿™æ ·çš„ï¼Œé€šè¿‡plopfile.jså®šä¹‰ä¸€ä¸ªä¸€ä¸ªç”Ÿæˆå™¨ï¼Œæ¯ä¸€ä¸ªç”Ÿæˆå™¨æ ¹æ®ä½ ä¼ çš„é…ç½®å†è°ƒç”¨æŒ‡å®šç›®å½•ï¼ˆä¸€èˆ¬æ˜¯plop-templateç›®å½•ï¼‰ä¸‹çš„hbsæ¨¡æ¿æ–‡ä»¶ï¼Œå†é€šè¿‡æ¨¡æ¿æ¸²æŸ“ç”Ÿæˆæœ€ç»ˆç¬¦åˆç‰¹å®šç»“æ„çš„æ–‡ä»¶

### éœ€æ±‚æè¿°

æœ€è¿‘æˆ‘æ‰‹ä¸Šçš„é¡¹ç›®ä¸»è¦æ˜¯uni-appé¡¹ç›®ï¼Œæˆ‘ä»¬å°±ä»¥uni-appé¡¹ç›®åšå®éªŒï¼Œæˆ‘æ¯å¤©å¯èƒ½éƒ½ä¼šé‡å¤çš„å·¥ä½œæœ‰æ–°å»ºç»„ä»¶ã€é¡µé¢ã€APIæ¥å£æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

![](https://img2024.cnblogs.com/blog/685637/202506/685637-20250604095410965-716454321.png)

å®æˆ˜
--

### ç”Ÿæˆç»„ä»¶

å®šä¹‰ç»„ä»¶ç”Ÿæˆå™¨ï¼š

    module.exports = function (plop) {
      // å¯¼å…¥æ‰€éœ€æ¨¡å—
      const { exec } = require('child_process');
      const path = require('path');
      const fs = require('fs');
    
      // å®šä¹‰æ‰“å¼€æ–‡ä»¶çš„å‡½æ•°
      function openFile(filePath) {
        const fullPath = path.resolve(process.cwd(), filePath);
        if (fs.existsSync(fullPath)) {
          console.log(`\næ­£åœ¨æ‰“å¼€æ–‡ä»¶: ${fullPath}`);
    
          // æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©æ‰“å¼€æ–¹å¼
          const isWin = process.platform === 'win32';
    
          // Windows - å°è¯•ä½¿ç”¨cursoræ‰“å¼€ï¼Œå¦‚æœä½ æ˜¯ç”¨çš„vs codeï¼Œè¯·æŠŠcursoræ¢æˆcodeå³å¯
          exec(`cursor "${fullPath}"`, (error) => {
            if (error) {
              // å¦‚æœVS Codeä¸å¯ç”¨ï¼Œå°è¯•ä½¿ç”¨é»˜è®¤ç¨‹åºæ‰“å¼€
              console.log(`æ‰“å¼€æ–‡ä»¶å¤±è´¥: ${error},æ–‡ä»¶è·¯å¾„: ${fullPath}`);
            }
          });
        }
        return 'æ–‡ä»¶å·²åˆ›å»º';
      }
    
      // æ–°å»ºç»„ä»¶ ç»„ä»¶ç”Ÿæˆå™¨
      plop.setGenerator("component", {
        description: "æ–°å»ºç»„ä»¶",
        prompts: [
          {
            type: "input",
            name: "name",
            message: "è¦æ–°å»ºçš„ç»„ä»¶å:",
          },
        ],
        actions: [
          {
            type: "add",
            path: "components/{{pascalCase name}}/{{pascalCase name}}.vue",
            templateFile: "plop-templates/Component.vue.hbs",
          },
          // å®ç°ç”Ÿæˆæ–‡ä»¶åä¸»åŠ¨æ‰“å¼€çš„åŠŸèƒ½
          function(answers) {
            const filePath = `components/${plop.getHelper('pascalCase')(answers.name)}/${plop.getHelper('pascalCase')(answers.name)}.vue`;
            return openFile(filePath);
          }
        ],
      });
    };
    

è¿™é‡Œå¤šåšäº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå½“ç”Ÿæˆå®Œé¡µé¢åï¼Œä½¿ç”¨cursorç¼–è¾‘å™¨ä¸»åŠ¨æ‰“å¼€å½“å‰ç”Ÿæˆçš„æ–‡ä»¶ï¼Œå…¶ä¸­openFileå°±æ˜¯æ‰“å¼€å½“å‰ç”Ÿæˆçš„æ–‡ä»¶ï¼Œè¿™ä¸ªå¯æœ‰å¯æ— ï¼ŒåŠ äº†ä½“éªŒæ„Ÿè§‰ä¼šå¥½ä¸€äº›

æ¨¡æ¿æ–‡ä»¶plop-templates/Component.vue.hbsï¼š

    <template>
        <div @click="handleClick">\{{ msg }}-\{{ msgIn }}</div>
    </template>
    
    <script setup>
        import { ref, onMounted } from 'vue';
    
        defineOptions({
            name: "{{camelCase name}}"
        })
    
        const props = defineProps({
            msg: {
                type: String,
                default: 'Hello uniapp!'
            }
        })
    
        const emit = defineEmits(['update:msg']);
    
        const msgIn = ref('Hello world!');
    
        const handleClick = () => {
            emit('update:msg', props.msg + ' ' + msgIn.value);
        }
    
        onMounted(() => {
            console.log('---- onMounted ----');
        })
    </script>
    
    <style lang="scss">
    
    </style>
    

æ¼”ç¤ºåŠ¨å›¾ï¼š

![](https://img2024.cnblogs.com/blog/685637/202506/685637-20250604095429283-2143454633.gif)

### ç”Ÿæˆé¡µé¢

å®šä¹‰ç”Ÿæˆé¡µç”Ÿæˆå™¨ï¼š

    module.exports = function (plop) {
      // å¯¼å…¥æ‰€éœ€æ¨¡å—
      const { exec } = require('child_process');
      const path = require('path');
      const fs = require('fs');
    
      // å®šä¹‰æ‰“å¼€æ–‡ä»¶çš„å‡½æ•°
      function openFile(filePath) {
        const fullPath = path.resolve(process.cwd(), filePath);
        if (fs.existsSync(fullPath)) {
          console.log(`\næ­£åœ¨æ‰“å¼€æ–‡ä»¶: ${fullPath}`);
    
          // æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©æ‰“å¼€æ–¹å¼
          const isWin = process.platform === 'win32';
    
          // Windows - å°è¯•ä½¿ç”¨cursoræ‰“å¼€
          exec(`cursor "${fullPath}"`, (error) => {
            if (error) {
              // å¦‚æœVS Codeä¸å¯ç”¨ï¼Œå°è¯•ä½¿ç”¨é»˜è®¤ç¨‹åºæ‰“å¼€
              console.log(`æ‰“å¼€æ–‡ä»¶å¤±è´¥: ${error},æ–‡ä»¶è·¯å¾„: ${fullPath}`);
            }
          });
        }
        return 'æ–‡ä»¶å·²åˆ›å»º';
      }
    
      // æ·»åŠ é¡µé¢åˆ°pages.json
      function addPageToConfig(answers) {
        try {
          const pagesConfigPath = path.resolve(process.cwd(), 'pages.json');
    
          if (!fs.existsSync(pagesConfigPath)) {
            return 'æ— æ³•æ‰¾åˆ°pages.json';
          }
    
          // è¯»å–pages.jsonæ–‡ä»¶å†…å®¹
          let fileContent = fs.readFileSync(pagesConfigPath, 'utf8');
    
          // æŸ¥æ‰¾pagesæ•°ç»„çš„ç»“æŸæ‹¬å·ä½ç½®
          const lastBracketIndex = fileContent.lastIndexOf(']');
          if (lastBracketIndex === -1) {
            return 'æ— æ³•åœ¨pages.jsonä¸­æ‰¾åˆ°pagesæ•°ç»„';
          }
    
          // æ£€æŸ¥pagesæ•°ç»„æ˜¯å¦ä¸ºç©º
          const pagesArrayContent = fileContent.substring(
            fileContent.indexOf('"pages"'), 
            lastBracketIndex
          );
    
          // æ˜¯å¦éœ€è¦æ·»åŠ é€—å·ï¼ˆå¦‚æœæ•°ç»„ä¸­å·²æœ‰å†…å®¹ï¼‰
          const needComma = pagesArrayContent.includes('{');
    
          // æ–°é¡µé¢çš„é…ç½®ä¿¡æ¯
          const newPageConfig = `${needComma ? ',' : ''}
            {
                "path": "pages/${plop.getHelper('pascalCase')(answers.name)}/${plop.getHelper('pascalCase')(answers.name)}",
                "style": {
                    "navigationBarTitleText": "${answers.title}"
                }
            }`;
    
          // å°†æ–°é¡µé¢æ·»åŠ åˆ°æ•°ç»„æœ«å°¾
          fileContent = fileContent.substring(0, lastBracketIndex) + 
                        newPageConfig + 
                        fileContent.substring(lastBracketIndex);
    
          // ä¿å­˜æ›´æ–°åçš„æ–‡ä»¶
          fs.writeFileSync(pagesConfigPath, fileContent, 'utf8');
    
          return 'pages.jsonå·²æ›´æ–°';
        } catch (error) {
          console.error('æ›´æ–°pages.jsonæ—¶å‡ºé”™:', error);
          return `æ›´æ–°é…ç½®å¤±è´¥: ${error.message}`;
        }
      }
    
      // æ–°å»ºé¡µé¢
      plop.setGenerator("page", {
        description: "æ–°å»ºé¡µé¢",
        prompts: [
          {
            type: "input",
            name: "name",
            message: "è¦æ–°å»ºçš„é¡µé¢å:",
          },
          {
            type: "input",
            name: "title",
            message: "è¦æ–°å»ºçš„é¡µé¢æ ‡é¢˜:",
          },
        ],
        actions: [
          {
            type: "add",
            path: "pages/{{pascalCase name}}/{{pascalCase name}}.vue",
            templateFile: "plop-templates/page.vue.hbs",
          },
          addPageToConfig,
          function(answers) {
            const filePath = `pages/${plop.getHelper('pascalCase')(answers.name)}/${plop.getHelper('pascalCase')(answers.name)}.vue`;
            return openFile(filePath);
          }
        ],
      });
    };
    

ç”Ÿæˆé¡µé¢æ¯”ç”Ÿæˆç»„ä»¶éœ€è¦å¤šåšä¸€ä¸ªåŠŸèƒ½ï¼Œå°±ç”Ÿæˆé¡µé¢åï¼Œéœ€è¦å‘pages.jsonä¸­æ·»åŠ è·¯ç”±ç”³æ˜ï¼Œå…¶ä¸­addPageToConfigå°±å®ç°è·¯ç”±ç”³æ˜çš„

æ¨¡æ¿æ–‡ä»¶plop-templates/page.vue.hbsï¼š

    <template>
        <div>\{{ msg }}</div>
    </template>
    
    <script setup>
        import { ref, onMounted } from 'vue';
    
        defineOptions({
            name: "{{camelCase name}}"
        })
    
        const msg = ref('Hello uniapp!');
    
        onMounted(() => {
            console.log('---- onMounted ----');
        })
    
    </script>
    
    <style lang="scss">
    
    </style>
    

æ¼”ç¤ºåŠ¨å›¾ï¼š

![](https://img2024.cnblogs.com/blog/685637/202506/685637-20250604095447306-569080830.gif)

### ç”Ÿæˆæ¥å£æ–‡ä»¶

å®šä¹‰æ¥å£æ–‡ä»¶ç”Ÿæˆå™¨ï¼š

    module.exports = function (plop) {
      // å¯¼å…¥æ‰€éœ€æ¨¡å—
      const { exec } = require('child_process');
      const path = require('path');
      const fs = require('fs');
    
      // å®šä¹‰æ‰“å¼€æ–‡ä»¶çš„å‡½æ•°
      function openFile(filePath) {
        const fullPath = path.resolve(process.cwd(), filePath);
        if (fs.existsSync(fullPath)) {
          console.log(`\næ­£åœ¨æ‰“å¼€æ–‡ä»¶: ${fullPath}`);
    
          // æ ¹æ®æ“ä½œç³»ç»Ÿé€‰æ‹©æ‰“å¼€æ–¹å¼
          const isWin = process.platform === 'win32';
    
          // Windows - å°è¯•ä½¿ç”¨cursoræ‰“å¼€
          exec(`cursor "${fullPath}"`, (error) => {
            if (error) {
              // å¦‚æœVS Codeä¸å¯ç”¨ï¼Œå°è¯•ä½¿ç”¨é»˜è®¤ç¨‹åºæ‰“å¼€
              console.log(`æ‰“å¼€æ–‡ä»¶å¤±è´¥: ${error},æ–‡ä»¶è·¯å¾„: ${fullPath}`);
            }
          });
        }
        return 'æ–‡ä»¶å·²åˆ›å»º';
      }
    
      // æ–°å»ºæ¥å£æ–‡ä»¶
      plop.setGenerator("api", {
        description: "æ–°å»ºæ¥å£æ–‡ä»¶",
        prompts: [
          {
            type: "input",
            name: "name",
            message: "è¦æ–°å»ºçš„æ¥å£æ–‡ä»¶å:",
          },
        ],
        actions: [
          {
            type: "add",
            path: "api/{{pascalCase name}}.js",
            templateFile: "plop-templates/api.js.hbs",
          },
          function(answers) {
            const filePath = `api/${plop.getHelper('pascalCase')(answers.name)}.js`;
            return openFile(filePath);
          }
        ],
      });
    };
    

æ¨¡æ¿æ–‡ä»¶plop-templates/api.js.hbsï¼š

    import request from "../utils/request.js";
    
    /**
     * è·å–æ•°æ®
     */
    export const queryList = async (id) => {
      return request.request(`/api/test/${id}`, {}, {
        method: "GET"
      })
    };
    

è‡³æ­¤ï¼Œç”Ÿæˆæ¨¡æ¿æ–‡ä»¶çš„éœ€æ±‚ä¹Ÿå°±åŸºæœ¬å®Œæˆäº†ï¼Œç”Ÿæˆapiæ¥å£æ–‡ä»¶å°±ä¸å½•å±äº†ï¼Œè·Ÿç”Ÿæˆç»„ä»¶åŸºæœ¬æ˜¯ä¸€æ ·çš„æµç¨‹

ä»£ç æˆ‘ä¸Šä¼ åˆ°giteeä»“åº“ï¼Œå¯ä»¥cloneä¸‹æ¥è·‘è·‘è¯•è¯•ï¼Œä»“åº“åœ°å€ï¼š[xiewu/plopjsTest](https://gitee.com/github-9819409/plopjs-test)

å°ç»“
--

é€šè¿‡ä¸Šé¢å‡ ä¸ªç¤ºä¾‹æˆ‘ç›¸ä¿¡ä½ å·²ç»åŸºæœ¬äº†è§£äº†Plop.jsçš„å¤§è‡´ä½¿ç”¨æ–¹å¼ï¼Œä¸Šé¢ç¤ºä¾‹å·¥ç¨‹è¿˜æ˜¯å¯ä»¥ä¼˜åŒ–ï¼Œå¯¹äºuni-appé¡¹ç›®ï¼Œå¾ˆå¤§å¯èƒ½éœ€è¦ä»£ç åˆ†åŒ…çš„ï¼Œè€Œä¸Šé¢ä»£ç åªæ˜¯å®ç°äº†åœ¨ä¸»åŒ…ä¸­å¢åŠ ç»„ä»¶ï¼Œè¿™æˆ‘ä¹Ÿå°è¯•åšäº†ï¼Œä½ å¯ä»¥æŠŠä¸Šé¢ä»£ç cloneä¸‹æ¥ååˆ‡æ¢åˆ°feat-completeåˆ†æ”¯å³å¯ã€‚

è¿™é‡Œåªæ˜¯æŠ›ç –å¼•ç‰ï¼Œå¯¹äºèªæ˜çš„ä½ ï¼Œä¹Ÿä¸€å®šçŸ¥é“æ€ä¹ˆæŠŠPlop.jsåº”ç”¨åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­äº†ï¼Œä¹ŸæœŸå¾…ä½ çš„ç•™è¨€å’Œåˆ†äº«ğŸ‘€

Plop.jså…¥é—¨å¥½æ–‡æ¨èï¼š  
[Plop.jsï¼šä¸€é”®ç”Ÿæˆä»£ç æ¨¡æ¿ï¼Œæå‡å¼€å‘æ•ˆç‡çš„åˆ©å™¨-CSDNåšå®¢](https://blog.csdn.net/lecepin/article/details/143591275)  
[å‰ç«¯å·¥ç¨‹åŒ–-ä½¿ç”¨ plop ç”Ÿæˆé¡¹ç›®æ¨¡æ¿æ–‡ä»¶](https://digitalchina-frontend.github.io/framework/engineering/plop/)

å¥½å¥½å­¦ä¹ ï¼å¤©å¤©å‘ä¸Šï¼