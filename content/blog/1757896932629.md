---
layout: post
title: 'ã€å…‰ç…§ã€‘Unity[ç»éªŒæ¨¡å‹]å’Œ[ç‰©ç†æ¨¡å‹]'
date: "2025-09-15T00:42:12Z"
---
ã€å…‰ç…§ã€‘Unity\[ç»éªŒæ¨¡å‹\]å’Œ\[ç‰©ç†æ¨¡å‹\]
==========================

![ã€å…‰ç…§ã€‘Unity[ç»éªŒæ¨¡å‹]å’Œ[ç‰©ç†æ¨¡å‹]](https://img2024.cnblogs.com/blog/3685400/202509/3685400-20250914114613850-583585254.png) BRDFæ¨¡å‹å‘å±•ä¸åº”ç”¨ï¼šä»ç†è®ºåˆ°UnityURPå®ç° æœ¬æ–‡ç³»ç»Ÿæ¢³ç†äº†BRDFæ¨¡å‹çš„å‘å±•å†ç¨‹ï¼Œä»1971å¹´Bouknightçš„Lambertæ¼«åå°„æ¨¡å‹ï¼Œåˆ°1982å¹´Cook-TorranceåŸºäºå¾®è¡¨é¢ç†è®ºçš„çªç ´ï¼Œæœ€ç»ˆå½¢æˆç°ä»£PBRæ¸²æŸ“ä½“ç³»ã€‚é‡ç‚¹è§£æäº†BRDFçš„æ ¸å¿ƒç†è®ºï¼ŒåŒ…æ‹¬å¾®è¡¨é¢ç†è®ºã€èƒ½é‡å®ˆæ’å’Œè²æ¶…å°”æ•ˆåº”ï¼Œè¯¦ç»†ä»‹ç»äº†Cook-Torranceæ¨¡å‹çš„æ•°å­¦å…¬å¼æ„æˆï¼ˆD/F/Gä¸‰é¡¹ï¼‰ã€‚åœ¨UnityURPä¸­çš„å®é™…åº”ç”¨æ–¹é¢ï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡Shaderä»£ç å®ç°æ ‡å‡†å…‰ç…§æ¨¡å‹å’ŒPBRæè´¨ç³»ç»Ÿï¼Œå¯¹æ¯”äº†BRDFä¸Phongæ¨¡å‹åœ¨

Unity URPï¼ˆUniversal Render Pipelineï¼‰ä¸­çš„å…‰ç…§æ¨¡å‹BRDFï¼ˆåŒå‘åå°„åˆ†å¸ƒå‡½æ•°ï¼‰æ˜¯PBRï¼ˆåŸºäºç‰©ç†çš„æ¸²æŸ“ï¼‰çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼Œç”¨äºæ¨¡æ‹ŸçœŸå®ä¸–ç•Œçš„å…‰ç…§äº¤äº’ã€‚

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

**ä¸€ã€BRDFå‘å±•å†å²ï¼ˆæ—¶é—´çº¿ï¼‰**
===================

*   â€Œ**1971å¹´**â€Œï¼šBouknightæå‡ºé¦–ä¸ªå…‰åå°„æ¨¡å‹ï¼Œå¼•å…¥Lambertæ¼«åå°„å®šå¾‹è®¡ç®—è¡¨é¢å…‰å¼ºï¼Œå¹¶ç”¨ç¯å¢ƒå…‰å¤„ç†é˜´å½±åŒºåŸŸâ€Œã€‚
*   â€Œ**1975å¹´**â€Œï¼šè£´ç¥¥é£ï¼ˆPhongï¼‰æå‡ºPhongå…‰ç…§æ¨¡å‹ï¼Œé¦–æ¬¡ç»“åˆæ¼«åå°„ã€ç¯å¢ƒå…‰å’Œé«˜å…‰åå°„ï¼Œæˆä¸ºå›¾å½¢å­¦é¦–ä¸ªç»éªŒæ¨¡å‹â€Œã€‚
*   â€Œ**1980å¹´**â€Œï¼šWhittedæå‡ºå…‰çº¿è¿½è¸ªæ¨¡å‹ï¼Œæ•´åˆåå°„ã€æŠ˜å°„å’Œé˜´å½±ï¼Œä½†ä»…é€‚ç”¨äºç†æƒ³é•œé¢åå°„â€Œã€‚
*   â€Œ**1982å¹´**â€Œï¼šCookå’ŒTerranceæå‡ºCook-Torrance BRDFæ¨¡å‹ï¼ŒåŸºäºå¾®è¡¨é¢ç†è®ºï¼Œé¦–æ¬¡ç”¨æ•°å­¦å…¬å¼æè¿°é•œé¢é«˜å…‰åå°„â€Œã€‚
*   â€Œ**1986å¹´**â€Œï¼šKajiyaæå‡ºæ¸²æŸ“æ–¹ç¨‹ï¼Œç»Ÿä¸€æè¿°å…‰åœ¨åœºæ™¯ä¸­çš„æµåŠ¨ï¼ŒBRDFä½œä¸ºæ ¸å¿ƒå‡½æ•°è¢«çº³å…¥â€Œã€‚
*   â€Œ**2000å¹´ä»£å**â€Œï¼šGGXã€Beckmannç­‰æ³•çº¿åˆ†å¸ƒå‡½æ•°ï¼ˆNDFï¼‰å’Œå‡ ä½•é®è”½å‡½æ•°ï¼ˆGï¼‰çš„åŠ å…¥ï¼Œå®Œå–„äº†PBRä½“ç³»ï¼ˆå¦‚Unity URPä¸­çš„å®ç°ï¼‰â€Œã€‚

* * *

**äºŒã€ç†è®ºåŸç†**
==========

BRDFå‡½æ•°æè¿°å…¥å°„å…‰æ–¹å‘ï¼ˆÏ‰iï¼‰å’Œå‡ºå°„å…‰æ–¹å‘ï¼ˆÏ‰oï¼‰çš„åå°„å…³ç³»ï¼Œæ ¸å¿ƒå…¬å¼ä¸ºï¼š

fr(Ï‰i,Ï‰o)=å‡ºå°„è¾äº®åº¦å…¥å°„è¾ç…§åº¦

å…³é”®ç†è®ºåŒ…æ‹¬ï¼š

â€Œ**å¾®è¡¨é¢ç†è®º**â€Œï¼š
------------

*   è¡¨é¢ç”±æ— æ•°å¾®å°é•œé¢ç»„æˆï¼Œç²—ç³™åº¦å†³å®šåå°„æ‰©æ•£ç¨‹åº¦â€Œã€‚

â€Œ**èƒ½é‡å®ˆæ’**â€Œï¼š
-----------

*   å‡ºå°„å…‰èƒ½é‡ â‰¤ å…¥å°„å…‰èƒ½é‡ï¼Œç²—ç³™è¡¨é¢åå°„åŒºåŸŸæ‰©å¤§ä½†äº®åº¦é™ä½â€Œã€‚

â€Œ**è²æ¶…å°”æ•ˆåº”**â€Œï¼š
------------

*   båå°„ç‡éšè§†è§’å˜åŒ–ï¼Œé‡‘å±æè´¨è¡¨ç°æ›´æ˜æ˜¾â€Œã€‚

â€Œ**Cook-Torranceæ¨¡å‹**â€Œï¼š
----------------------

*   æ³•çº¿åˆ†å¸ƒå‡½æ•°ï¼ˆNDFï¼‰ï¼šå¦‚GGXæè¿°å¾®è¡¨é¢æ³•çº¿åˆ†å¸ƒâ€Œã€‚
    
*   å‡ ä½•é®è”½å‡½æ•°ï¼ˆGï¼‰ï¼šå¦‚Smithæ¨¡å‹å¤„ç†è‡ªé®æŒ¡â€Œã€‚
    
*   è²æ¶…å°”é¡¹ï¼ˆFï¼‰ï¼šè®¡ç®—åŸºç¡€åå°„ç‡â€Œã€‚å®Œæ•´å…¬å¼ï¼š_fr_\=4â‹…(_Ï‰i_â‹…_n_)â‹…(_Ï‰o_â‹…_n_)_D_(_Ï‰h_)â‹…_F_(_Ï‰i_)â‹…_G_(_Ï‰i_,_Ï‰o_)å…¶ä¸­ï¼ŒÏ‰hä¸ºåŠå‘é‡ï¼Œnä¸ºè¡¨é¢æ³•çº¿â€Œã€‚
    
    fr=D(Ï‰h)â‹…F(Ï‰i)â‹…G(Ï‰i,Ï‰o)4â‹…(Ï‰iâ‹…n)â‹…(Ï‰oâ‹…n)
    

* * *

**ä¸‰ã€å®é™…åº”ç”¨ä¸ç¤ºä¾‹**
=============

åœ¨Unity URPä¸­ï¼ŒBRDFé€šè¿‡Shaderå®ç°ï¼Œæ ¸å¿ƒåº”ç”¨åŒ…æ‹¬ï¼š

â€Œ**æ ‡å‡†å…‰ç…§æ¨¡å‹**â€Œï¼š
-------------

    // æ¼«åå°„ï¼ˆLambertï¼‰
    float3 diffuse = albedo * saturate(dot(lightDir, normal));
    // é«˜å…‰åå°„ï¼ˆBlinn-Phongï¼‰
    float3 specular = pow(saturate(dot(halfVector, normal)), shininess) * specularStrength;
    

ç»“åˆç¯å¢ƒå…‰å’Œè‡ªå‘å…‰ï¼Œå½¢æˆå®Œæ•´å…‰ç…§â€Œã€‚

â€Œ**PBRæè´¨ç³»ç»Ÿ**â€Œï¼š
--------------

*   é‡‘å±åº¦ï¼ˆMetallicï¼‰å’Œç²—ç³™åº¦ï¼ˆRoughnessï¼‰å‚æ•°æ§åˆ¶BRDFè¡Œä¸ºâ€Œã€‚
    
*   ç¤ºä¾‹ï¼šURP Shaderä¸­é›†æˆGGX NDFå’Œè²æ¶…å°”é¡¹ï¼šå®ç°çœŸå®é‡‘å±/éé‡‘å±åå°„â€Œã€‚
    
        float3 F0 = mix(vec3(0.04), baseColor, metallic);
        float3 F = F0 + (1.0 - F0) * pow(1.0 - max(dot(halfVector, viewDir), 0.0), 5.0);
        float3 specular = (D * F * G) / (4.0 * max(dot(normal, viewDir), 0.0) * max(dot(normal, lightDir), 0.0));
        
    

â€Œ**å„å‘å¼‚æ€§åå°„**â€Œï¼š
-------------

*   é€šè¿‡ä¿®æ”¹NDFæ¨¡æ‹Ÿæ‹‰ä¸é‡‘å±ç­‰æ•ˆæœ.

> BRDFï¼ˆåŒå‘åå°„åˆ†å¸ƒå‡½æ•°ï¼‰ä¸æ ‡å‡†å…‰ç…§æ¨¡å‹ï¼ˆå¦‚Phongæ¨¡å‹ï¼‰æ˜¯è®¡ç®—æœºå›¾å½¢å­¦ä¸­æè¿°å…‰ç…§äº¤äº’çš„ä¸¤ç§ä¸åŒæ–¹æ³•ï¼ŒäºŒè€…åœ¨ç†è®ºåŸºç¡€ã€è®¡ç®—æ–¹å¼å’Œåº”ç”¨åœºæ™¯ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚

**ä¸€ã€ç†è®ºå®šä½å·®å¼‚**
------------

### â€Œ**BRDF**â€Œ

*   åŸºäºç‰©ç†çš„æ¸²æŸ“ï¼ˆPBRï¼‰æ ¸å¿ƒæ¨¡å‹ï¼Œä¸¥æ ¼éµå¾ªèƒ½é‡å®ˆæ’å’Œå¾®è¡¨é¢ç†è®ºï¼Œé€šè¿‡æ•°å­¦å…¬å¼æè¿°å…‰çº¿åœ¨ä»»æ„å…¥å°„/å‡ºå°„æ–¹å‘ä¸Šçš„åå°„åˆ†å¸ƒâ€Œã€‚
*   åŒ…å«æ¼«åå°„å’Œé•œé¢åå°„çš„å®Œæ•´ç‰©ç†æ¨¡æ‹Ÿï¼Œå¦‚GGXæ³•çº¿åˆ†å¸ƒã€è²æ¶…å°”æ•ˆåº”ç­‰â€Œã€‚

### â€Œæ ‡å‡†å…‰ç…§æ¨¡å‹ï¼ˆPhongï¼‰

*   ç»éªŒæ¨¡å‹ï¼Œé€šè¿‡ç®€åŒ–æ¸²æŸ“æ–¹ç¨‹ï¼Œå°†å…‰ç…§åˆ†è§£ä¸ºç¯å¢ƒå…‰ã€æ¼«åå°„å’Œé•œé¢åå°„ä¸‰éƒ¨åˆ†â€Œã€‚
*   é•œé¢åå°„ä½¿ç”¨Phongå…¬å¼ï¼ˆå¦‚`(vÂ·r)^n`ï¼‰è®¡ç®—ï¼Œç¼ºä¹ç‰©ç†ä¾æ®ï¼Œä»…ä¾èµ–ç»éªŒå‚æ•°ï¼ˆå¦‚é«˜å…‰æŒ‡æ•°nï¼‰â€Œã€‚

* * *

**äºŒã€è®¡ç®—æ–¹å¼å¯¹æ¯”**
------------

ç‰¹æ€§

BRDFæ¨¡å‹

Phongæ¨¡å‹

â€Œ**åå°„è®¡ç®—**â€Œ

åŸºäºå¾®è¡¨é¢ç†è®ºï¼Œåˆ†é¡¹è®¡ç®—D/F/Gâ€Œ

ç›´æ¥ä½¿ç”¨`(vÂ·r)^n`è®¡ç®—é«˜å…‰â€Œ

â€Œ**èƒ½é‡å®ˆæ’**â€Œ

ä¸¥æ ¼æ»¡è¶³ï¼ˆå¦‚è²æ¶…å°”é¡¹é™åˆ¶åå°„ç‡ï¼‰â€Œ

å¯èƒ½è¶…å‡ºï¼ˆå¦‚é«˜å…‰æŒ‡æ•°nè¿‡å¤§ï¼‰â€Œ

â€Œ**å‚æ•°æ„ä¹‰**â€Œ

ç‰©ç†å‚æ•°ï¼ˆç²—ç³™åº¦ã€é‡‘å±åº¦ï¼‰â€Œ

ç»éªŒå‚æ•°ï¼ˆå…‰æ³½åº¦ã€é«˜å…‰å¼ºåº¦ï¼‰â€Œ

* * *

**ä¸‰ã€åº”ç”¨åœºæ™¯**
----------

### â€Œ**BRDFçš„é€‚ç”¨æ€§**â€Œ

*   ç”¨äºPBRæè´¨ï¼ˆå¦‚Unity URPçš„Standard Shaderï¼‰ï¼Œæ¨¡æ‹ŸçœŸå®æè´¨ï¼ˆé‡‘å±ã€å¸ƒæ–™ï¼‰çš„å…‰ç…§è¡Œä¸ºâ€Œã€‚
*   ç¤ºä¾‹ï¼šé€šè¿‡è°ƒæ•´ç²—ç³™åº¦å‚æ•°ï¼Œå®ç°ä»é•œé¢åˆ°æ¼«åå°„çš„å¹³æ»‘è¿‡æ¸¡â€Œã€‚

### â€Œ**æ ‡å‡†å…‰ç…§æ¨¡å‹çš„é€‚ç”¨æ€§**â€Œ

*   é€‚ç”¨äºä½æ€§èƒ½è®¾å¤‡æˆ–é£æ ¼åŒ–æ¸²æŸ“ï¼ˆå¦‚å¡é€šæ•ˆæœï¼‰ï¼Œè®¡ç®—æ•ˆç‡é«˜ä½†ç‰©ç†å‡†ç¡®æ€§ä½â€Œã€‚
*   ç¤ºä¾‹ï¼šPhongæ¨¡å‹åœ¨æ—©æœŸæ¸¸æˆï¼ˆå¦‚ã€Šé­”å…½äº‰éœ¸3ã€‹ï¼‰ä¸­å¹¿æ³›ä½¿ç”¨â€Œã€‚

* * *

**å››ã€æ¼”è¿›å…³ç³»**
----------

*   â€Œ**ä»Phongåˆ°BRDF**â€Œï¼šPhongæ¨¡å‹æ˜¯BRDFçš„ç®€åŒ–å‰èº«ï¼Œåè€…é€šè¿‡å¼•å…¥ç‰©ç†ç†è®ºï¼ˆå¦‚å¾®è¡¨é¢ã€èƒ½é‡å®ˆæ’ï¼‰è§£å†³äº†å‰è€…çš„éç‰©ç†é—®é¢˜â€Œã€‚
*   â€Œ**ç°ä»£æ›¿ä»£**â€Œï¼šUnityç­‰å¼•æ“å·²é€æ­¥ç”¨BRDFæ›¿ä»£Phongæ¨¡å‹ï¼Œä½†Phongä»ç”¨äºæ•™å­¦æˆ–å¿«é€ŸåŸå‹å¼€å‘â€Œ

* * *

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

ï¼ˆæ¬¢è¿_ç‚¹èµç•™è¨€_æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰