---
layout: post
title: 'è‡ªé€‚åº”å¯å˜é€Ÿç‡IDç”Ÿæˆå™¨çš„è®¾è®¡ä¸å®è·µ(è§†é¢‘)'
date: "2026-01-09T00:45:41Z"
---
è‡ªé€‚åº”å¯å˜é€Ÿç‡IDç”Ÿæˆå™¨çš„è®¾è®¡ä¸å®è·µ(è§†é¢‘)
----------------------

2026-01-08 15:03Â  [Zongsoft](https://www.cnblogs.com/Zongsoft)Â  é˜…è¯»(102)Â  è¯„è®º(0)Â  Â  [æ”¶è—](javascript:void\(0\))Â  [ä¸¾æŠ¥](javascript:void\(0\))

åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„ä¸­ï¼Œå…¨å±€å”¯ä¸€IDç”Ÿæˆå™¨æ˜¯æ”¯æ’‘é«˜å¹¶å‘ã€é«˜å¯ç”¨ç³»ç»Ÿçš„åŸºçŸ³ã€‚å¸‚é¢ä¸Šçš„å¸¸è§æ–¹æ¡ˆï¼ˆå¦‚Snowflake-IDã€UUIDã€Redisè‡ªå¢ï¼‰å„æœ‰ä¼˜åŠ£ï¼Œä½†å¾€å¾€éš¾ä»¥å…¼é¡¾é«˜æ€§èƒ½ã€æ— ä¸­å¿ƒåŒ–ä¸çµæ´»çš„ä¸šåŠ¡éœ€æ±‚ã€‚ æœ¬ç³»åˆ—è§†é¢‘å°†å¸¦ä½ æ·±å…¥å‰–æä¸€ä¸ªå¼€æºé¡¹ç›®ä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œé‡ç‚¹è§£æå¦‚ä½•è®¾è®¡ä¸€æ¬¾èƒ½æ™ºèƒ½é€‚åº”æµé‡æ³¢åŠ¨ã€å…¼é¡¾å…¨å±€å”¯ä¸€ä¸è¶‹åŠ¿é€’å¢ç‰¹æ€§çš„é«˜æ€§èƒ½IDç”Ÿæˆå™¨ã€‚æˆ‘ä»¬å°†ä»ç†è®ºè®¾è®¡ã€æ€§èƒ½å‹æµ‹åˆ°æºç å®ç°ï¼Œå…¨æ–¹ä½è§£è¯»è¿™å¥—ç®—æ³•å¦‚ä½•åœ¨ä¿è¯æé«˜ååé‡çš„åŒæ—¶ï¼Œå®ç°æ¯«ç§’çº§çš„è‡ªé€‚åº”ä¸å¯å˜é€Ÿç‡è°ƒèŠ‚ã€‚ æ— è®ºä½ æ˜¯æ¶æ„å¸ˆã€åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯å¯¹é«˜æ€§èƒ½ç®—æ³•æ„Ÿå…´è¶£çš„çˆ±å¥½è€…ï¼Œè¿™ä¸ªç³»åˆ—éƒ½å°†ä¸ºä½ æä¾›å®è´µçš„å®æˆ˜ç»éªŒå’Œæ·±åº¦çš„æŠ€æœ¯æ´å¯Ÿã€‚

åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä¸­ï¼ŒIDç”Ÿæˆå™¨ _(**S**equence)_ æ˜¯çœ‹ä¼¼åŸºç¡€å´è‡³å…³é‡è¦çš„ç»„ä»¶ã€‚ç„¶è€Œï¼Œä¸€äº›å¸¸ç”¨è§£å†³æ–¹æ¡ˆ _(å¦‚ Snowflake-ID ç®—æ³•)_ åœ¨é«˜å¹¶å‘ã€å¼¹æ€§ä¼¸ç¼©åœºæ™¯ä¸‹ï¼Œå¸¸é¢ä¸´æœºå™¨èŠ‚ç‚¹åˆ†é…ã€æ—¶é’Ÿå›æ‹¨ã€åºåˆ—å·è€—å°½ã€è·¨æœºæˆ¿å®¹é”™ç­‰æŒ‘æˆ˜ã€‚ä½ æ˜¯å¦ä¹Ÿæ›¾ä¸ºè¿™äº›é—®é¢˜å›°æ‰°ï¼Ÿ

[_**Z**ongsoft_](http://zongsoft.com) å¼€æºé¡¹ç›®ä¸­çš„ [_è‡ªé€‚åº”å¯å˜é€Ÿç‡IDç”Ÿæˆå™¨_](https://github.com/Zongsoft/framework/blob/master/Zongsoft.Core/src/Common/Sequence.cs)ï¼Œæˆ–è®¸èƒ½ä¸ºä½ æä¾›ä¸€ç§æ–°çš„æ€è·¯ã€‚

æˆ‘å¼ºçƒˆæ¨èå¤§å®¶å…³æ³¨è¿‘æœŸä¸Šçº¿çš„ **è§†é¢‘ç³»åˆ—**ï¼šã€Š[è‡ªé€‚åº”å¯å˜é€Ÿç‡IDç”Ÿæˆå™¨çš„è®¾è®¡ä¸å®è·µ](https://space.bilibili.com/20995572)ã€‹ã€‚

ç³»åˆ—è§†é¢‘é‡‡å– â€œ**ç†è®º**\-**å®éªŒ**\-**æºç **â€ ä¸‰å±‚é€’è¿›ç»“æ„ï¼Œæ¶µç›–ä»è®¾è®¡ç†å¿µåˆ°æ€§èƒ½éªŒè¯å†åˆ°å®ç°ç»†èŠ‚çš„å®Œæ•´çŸ¥è¯†é“¾ï¼Œå±•ç¤ºäº†å¦‚ä½•è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ™ºèƒ½é€‚åº”æµé‡æ³¢åŠ¨ã€å…¼é¡¾å…¨å±€å”¯ä¸€ä¸é«˜ä¿¡æ¯å¯†åº¦ã€é«˜æ€§èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚æ— è®ºæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿåˆå­¦è€…è¿˜æ˜¯èµ„æ·±å·¥ç¨‹å¸ˆéƒ½èƒ½ä»ä¸­è·ç›Šã€‚å…¶äº®ç‚¹åœ¨äºï¼š

1.  **ç›´é¢ç—›ç‚¹ï¼Œçªç ´ä¼ ç»Ÿå±€é™â€‹**
    
    è§†é¢‘ä¸­å¯¹æ¯”äº† Snowflake-IDã€UUIDã€æ•°æ®åº“è‡ªå¢ç­‰æ–¹æ¡ˆçš„ä¼˜åŠ£ï¼Œå¹¶é‡ç‚¹è§£æäº†å¦‚ä½•é€šè¿‡åŠ¨æ€é€Ÿç‡è°ƒæ•´å’Œæ—¶é’Ÿå›æ‹¨å®¹é”™æœºåˆ¶ï¼Œé¿å…åºåˆ—å·äº‰ç”¨ä¸æ—¶é—´åŒæ­¥é—®é¢˜ã€‚è¿™ç§è®¾è®¡å°¤å…¶é€‚åˆæµé‡çªå¢åœºæ™¯ _ï¼ˆå¦‚ç§’æ€ã€æ—¥å¿—é«˜é¢‘å†™å…¥ï¼‰_ï¼Œæ˜¾è‘—æå‡ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚
    
2.  **å®éªŒé©±åŠ¨ï¼Œæ•°æ®è¯´è¯â€‹**
    
    ç³»åˆ—ä¸­é€šè¿‡ **6** ç»„ä¸¥è°¨å®éªŒï¼ŒéªŒè¯äº†ç®—æ³•åœ¨æ€§èƒ½ã€æ­£ç¡®æ€§ã€ç¨³å®šæ€§æ–¹é¢çš„è¡¨ç°ï¼Œå¹¶ä¸åŸç”Ÿ Redis ç”Ÿæˆå™¨è¿›è¡Œå¯¹æ¯”ã€‚ç»“æœæ¸…æ™°å±•ç¤ºäº†å…¶åœ¨é«˜å‹ä¸‹çš„ååé‡ä¼˜åŠ¿ï¼Œä¸ºæŠ€æœ¯é€‰å‹æä¾›äº†å¯é ä¾æ®ã€‚
    
3.  **å¼€æºå®æˆ˜ï¼Œæºç çº§è§£è¯»â€‹**
    
    è§†é¢‘ç›´æ¥åŸºäº [_**Z**ongsoft_](https://github.com/Zongsoft/framework) å¼€æºé¡¹ç›®ä»£ç è§£æï¼Œä»ä½è¿ç®—è®¾è®¡åˆ°å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œé€è¡Œæ‹†è§£å®ç°ç»†èŠ‚ã€‚æ— è®ºæ˜¯å­¦ä¹ åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ï¼Œè¿˜æ˜¯éœ€è¦äºŒæ¬¡å¼€å‘ï¼Œéƒ½å…·æœ‰æé«˜å‚è€ƒä»·å€¼ã€‚
    

> æ— è®ºä½ æ˜¯æ¶æ„å¸ˆã€åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯å¯¹é«˜æ€§èƒ½ç®—æ³•æ„Ÿå…´è¶£çš„çˆ±å¥½è€…ï¼Œè¿™ä¸ªç³»åˆ—éƒ½å°†ä¸ºä½ æä¾›å®è´µçš„å®æˆ˜ç»éªŒå’Œæ·±åº¦çš„æŠ€æœ¯æ´å¯Ÿã€‚åˆæˆ–è€…ä½ æ­£åœ¨æ„å»ºé«˜å¹¶å‘ç³»ç»Ÿï¼Œæˆ–å¯¹åˆ†å¸ƒå¼åŸºç¡€ç»„ä»¶æœ‰æ·±å…¥æ¢ç´¢çš„å…´è¶£ï¼Œè¿™ä¸€ç³»åˆ—è§†é¢‘å°†æ˜¯ä¸å¯å¤šå¾—çš„å­¦ä¹ èµ„æºã€‚  
> å®ƒä¸ä»…èƒ½å¸®åŠ©ä½ ç†è§£IDç”Ÿæˆå™¨çš„æœ¬è´¨ï¼Œæ›´èƒ½æ‹“å®½è§£å†³å¤æ‚é—®é¢˜çš„æ€è·¯ã€‚

* * *

### ğŸ¥ è§†é¢‘ 1ï¼šè‡ªé€‚åº”å¯å˜é€Ÿç‡IDç”Ÿæˆå™¨è®¾è®¡ä¸å®è·µ(ä¸Š)

> å‰¯æ ‡é¢˜ï¼š ä»ç†è®ºåˆ°æ¶æ„ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ–°çš„IDç”Ÿæˆæ–¹æ¡ˆï¼Ÿ  
>   
> è§†é¢‘åœ°å€ï¼š[https://www.bilibili.com/video/BV15fiSBXEW5](https://www.bilibili.com/video/BV15fiSBXEW5)

åœ¨æœ¬ç³»åˆ—çš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†é¦–å…ˆå¯¹ç°æœ‰çš„å¸¸è§åˆ†å¸ƒå¼IDç”Ÿæˆæ–¹æ¡ˆè¿›è¡Œæ·±åº¦çš„æ¨ªå‘å¯¹æ¯”ä¸å‰–æã€‚

æ·±å…¥æ¢è®¨ Snowflake ID çš„æœºå™¨èŠ‚ç‚¹åˆ†é…å’Œæ—¶é’Ÿå›æ‹¨ã€æ—¶é’Ÿæ¼‚ç§»é—®é¢˜ã€UUID çš„æ— åºæ€§ã€æ—¶é’Ÿé—®é¢˜ä¸å­˜å‚¨æµªè´¹ã€æ•°æ®åº“è‡ªå¢IDçš„æ€§èƒ½ç“¶é¢ˆä¸å„ç§é™åˆ¶ï¼Œä»¥åŠ Redis é€’å¢æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ã€‚

è¯¦ç»†é˜è¿°æœ¬ç®—æ³•çš„è®¾è®¡åˆè¡·ä¸æ ¸å¿ƒç†å¿µï¼›åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè§†é¢‘æ·±å…¥é˜è¿°è‡ªé€‚åº”å¯å˜é€Ÿç‡IDç”Ÿæˆå™¨çš„è®¾è®¡ç›®æ ‡ä¸æ ¸å¿ƒç†å¿µï¼Œé‡ç‚¹è®²è§£å¦‚ä½•é€šè¿‡åŠ¨æ€é€Ÿç‡è°ƒæ•´ã€æ—¶é’Ÿå›æ‹¨å®¹é”™ç­‰æœºåˆ¶ï¼Œè§£å†³ä¼ ç»Ÿæ–¹æ¡ˆåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„åºåˆ—å·è€—å°½ã€æ—¶é’ŸåŒæ­¥ç­‰ç—›ç‚¹é—®é¢˜ã€‚è¯¥è§†é¢‘ä¸ºç†è§£åç»­å®éªŒä¸æºç å®ç°å¥ å®šç†è®ºåŸºç¡€ã€‚

### ğŸ¥ è§†é¢‘ 2ï¼šè‡ªé€‚åº”å¯å˜é€Ÿç‡IDç”Ÿæˆå™¨è®¾è®¡ä¸å®è·µ(ä¸­)

> å‰¯æ ‡é¢˜ï¼š æ•°æ®è¯´è¯ï¼šæ€§èƒ½ã€ç¨³å®šæ€§ä¸æ­£ç¡®æ€§çš„ç¡¬æ ¸å®æµ‹  
>   
> è§†é¢‘åœ°å€ï¼š[https://www.bilibili.com/video/BV1EQiSBtE38](https://www.bilibili.com/video/BV1EQiSBtE38)

å…‰æœ‰ç†è®ºä¸å¤Ÿï¼Œæ•°æ®æ‰æ˜¯ç¡¬é“ç†ã€‚åœ¨æœ¬é›†ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ **6** ä¸ªç²¾å¿ƒè®¾è®¡çš„å®éªŒï¼Œå¯¹ç®—æ³•è¿›è¡Œå…¨æ–¹ä½çš„å‹åŠ›æµ‹è¯•ä¸éªŒè¯ï¼š

*   æ ¸å¿ƒæŒ‡æ ‡ï¼šéªŒè¯ç”Ÿæˆå™¨åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ååé‡ï¼ˆTPSï¼‰ä¸å“åº”å»¶è¿Ÿã€‚
*   ç¨³å®šæ€§æµ‹è¯•ï¼šæ¨¡æ‹Ÿå»¶è¿Ÿç¯å¢ƒä¸­ï¼Œç®—æ³•åœ¨é•¿æ—¶é—´é«˜å¹¶å‘è¿è¡Œä¸‹çš„ç¨³å®šæ€§ä¸æ­£ç¡®æ€§ã€‚
*   æ¨ªå‘å¯¹æ¯”ï¼šæˆ‘ä»¬å°†æœ¬ç®—æ³•ä¸åŸç”Ÿ Redis ç”Ÿæˆå™¨è¿›è¡ŒåŒåœºæ™¯ä¸‹çš„æ€§èƒ½å¯¹æ¯”ï¼Œç›´è§‚å±•ç¤ºå…¶åœ¨èµ„æºæ¶ˆè€—ä¸ç”Ÿæˆæ•ˆç‡ä¸Šçš„ä¼˜åŠ¿ã€‚

> é€šè¿‡è¿™äº›å®éªŒï¼Œä½ å°†çœ‹åˆ°è¿™å¥—ç®—æ³•åœ¨å®é™…åº”ç”¨ä¸­è¡¨ç°å‡ºçš„å“è¶Šæ€§èƒ½ã€‚

è§†é¢‘ç‰¹åˆ«è®¾ç½®äº†ä¸åŸç”Ÿ Redis ç”Ÿæˆå™¨çš„å¯¹æ¯”æµ‹è¯•ï¼Œé€šè¿‡é‡åŒ–æ•°æ®å±•ç°è‡ªé€‚åº”ç®—æ³•åœ¨å¯å˜è´Ÿè½½åœºæ™¯ä¸‹çš„æ€§èƒ½ä¼˜åŠ¿ã€‚ä¾‹å¦‚ï¼Œåœ¨æµé‡çªå¢æ—¶ï¼Œä¼ ç»Ÿç”Ÿæˆå™¨å¯èƒ½å› åºåˆ—å·å¿«é€Ÿè€—å°½è€Œå¯¼è‡´IDç”Ÿæˆå»¶è¿Ÿæˆ–é˜»å¡ï¼Œè€Œè‡ªé€‚åº”ç®—æ³•èƒ½åŠ¨æ€è°ƒæ•´ç”Ÿæˆç­–ç•¥ï¼Œä¿æŒé«˜æ€§èƒ½ä¸ç¨³å®šæ€§ã€‚è¿™äº›å®éªŒä¸ºå¼€å‘è€…æä¾›äº†å®¢è§‚çš„è¯„ä¼°ä¾æ®ï¼Œå¸®åŠ©ä»–ä»¬åœ¨æŠ€æœ¯é€‰å‹æ—¶åšå‡ºæ˜æ™ºå†³ç­–ã€‚

### ğŸ¥ è§†é¢‘ 3ï¼šè‡ªé€‚åº”å¯å˜é€Ÿç‡IDç”Ÿæˆå™¨è®¾è®¡ä¸å®è·µ(ä¸‹)

> å‰¯æ ‡é¢˜ï¼š æºç æ·±æ½œï¼šæ­ç§˜æ ¸å¿ƒé€»è¾‘ä¸ç¯å¢ƒé…ç½®  
>   
> è§†é¢‘åœ°å€ï¼šå³å°†å‘å¸ƒï¼Œè¯·å…³æ³¨å¾®ä¿¡å…¬ä¼—å·(`Zongsoft`)ä»¥è·å¾—åŠæ—¶å‘å¸ƒé€šçŸ¥ã€‚

æœ€åä¸€é›†ï¼Œæˆ‘ä»¬å°†å¸¦ä½ æ½œå…¥ä»£ç æ·±å¤„ï¼Œç›´é¢è¯¥ç®—æ³•çš„æ ¸å¿ƒå®ç°ä»¥åŠå¦‚ä½•å¿«é€Ÿæ­å»ºå¼€å‘ä¸æµ‹è¯•ç¯å¢ƒã€‚

é€è¡Œå‰–æ [Sequence](https://github.com/Zongsoft/framework/blob/master/Zongsoft.Core/src/Common/Sequence.cs) ç±»çš„å…³é”®é€»è¾‘ï¼Œè§£è¯»ä»£ç†æ¨¡å¼å°è£…ã€åŠ¨æ€æ­¥é•¿è°ƒæ•´ã€æœ¬åœ°æ— é”é€’å¢ã€è¾¹ç•Œä¿éšœæœºåˆ¶ã€æ—¶åºæ„ŸçŸ¥ä¼˜åŒ–ç­‰æ ¸å¿ƒä»£ç å—ã€‚  
è¯¦ç»†ä»‹ç»ç®—æ³•è¿è¡Œæ‰€éœ€çš„ç¯å¢ƒä¾èµ–ä¸é…ç½®å‚æ•°ï¼Œå¸®åŠ©ä½ å¿«é€Ÿå°†è¿™å¥—é«˜æ€§èƒ½ç»„ä»¶é›†æˆåˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚

é€šè¿‡æœ¬é›†ï¼Œä½ å°†æŒæ¡ä»æºç åˆ°éƒ¨ç½²çš„å…¨é“¾è·¯èƒ½åŠ›â€”â€”ä¸ä»… _â€œç”¨å¾—ä¸Šâ€_ï¼Œæ›´èƒ½ _â€œæ‡‚é€åŸç†â€_ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¿«é€Ÿæ„å»ºå‡ºè‡ªé€‚åº”ã€é«˜å¯é ã€é›¶è¿ç»´çš„IDç”ŸæˆæœåŠ¡ï¼Œä¸ºé«˜å¹¶å‘ç³»ç»Ÿç­‘ç‰¢åŸºçŸ³ã€‚

* * *

*   Bilibili
    
    > [https://space.bilibili.com/20995572](https://space.bilibili.com/20995572)
    
*   æŠ–éŸ³
    
    > [https://www.douyin.com/user/MS4wLjABAAAA9NmpuYVoLopaB6XdHoQ1CcmDF5DIb5YgwKzBLjZZdyU](https://www.douyin.com/user/MS4wLjABAAAA9NmpuYVoLopaB6XdHoQ1CcmDF5DIb5YgwKzBLjZZdyU)
    
*   å¾®ä¿¡å…¬ä¼—å·
    
    > 
    

![](https://raw.githubusercontent.com/Zongsoft/Guidelines/master/zongsoft-qrcode%28wechat%29.png)

* * *

![](https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png)

æœ¬ä½œå“é‡‡ç”¨ [çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®](https://creativecommons.org/licenses/by-nc-sa/4.0/) è¿›è¡Œè®¸å¯ã€‚æ¬¢è¿è½¬è½½ã€ä½¿ç”¨ã€é‡æ–°å‘å¸ƒï¼Œä½†å¿…é¡»ä¿ç•™æœ¬æ–‡çš„ç½²å [é’Ÿå³°](https://github.com/zongsoft)ï¼ˆåŒ…å«é“¾æ¥ï¼š[http://zongsoft.github.io](http://zongsoft.github.io/)ï¼‰ï¼Œä¸å¾—ç”¨äºå•†ä¸šç›®çš„ï¼ŒåŸºäºæœ¬æ–‡ä¿®æ”¹åçš„ä½œå“åŠ¡å¿…ä»¥ç›¸åŒçš„è®¸å¯å‘å¸ƒã€‚å¦‚æœ‰ä»»ä½•ç–‘é—®æˆ–æˆæƒæ–¹é¢çš„åå•†ï¼Œè¯·è‡´ä¿¡ç»™æˆ‘ (zongsoft@qq.com)ã€‚