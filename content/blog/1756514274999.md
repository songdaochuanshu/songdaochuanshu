---
layout: post
title: 'ä¸åŒæ•°æ®åº“ä¸­ VARCHAR çš„å·®å¼‚åŠå­—ç¬¦ä¸²æŸ¥è¯¢â€œNâ€å‰ç¼€çš„ä½¿ç”¨è§„åˆ™'
date: "2025-08-30T00:37:54Z"
---
ä¸åŒæ•°æ®åº“ä¸­ VARCHAR çš„å·®å¼‚åŠå­—ç¬¦ä¸²æŸ¥è¯¢â€œNâ€å‰ç¼€çš„ä½¿ç”¨è§„åˆ™
==================================

ã€€ã€€åœ¨å…³ç³»åž‹æ•°æ®åº“ä¸­ï¼ŒVARCHAR æ˜¯æœ€å¸¸ç”¨çš„å­—ç¬¦ä¸²æ•°æ®ç±»åž‹ä¹‹ä¸€ï¼Œç”¨äºŽå­˜å‚¨å˜é•¿å­—ç¬¦æ•°æ®ã€‚å¯¹äºŽä¸äº†è§£çš„ç”¨æˆ·ï¼Œå¯èƒ½ä¼šä¸æ¸…æ¥šä¸åŒæ•°æ®åº“ä¸­ VARCHAR çš„åŒºåˆ«ã€‚ä¸åŒæ•°æ®åº“å¯¹ VARCHAR çš„å®žçŽ°é€»è¾‘ã€å­—ç¬¦é›†æ”¯æŒåŠä½¿ç”¨ç»†èŠ‚å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œå…¶ä¸­ SQL Server ä¸Ž PostgreSQL çš„å·®å¼‚æ¯”è¾ƒå…¸åž‹ï¼Œä¼šç›´æŽ¥å½±å“æŸ¥è¯¢è¯­æ³•ã€‚

ã€€ã€€æœ¬æ–‡å°†ä»¥ SQL Server ä¸Ž PostgreSQL ä¸ºä¾‹ï¼Œç³»ç»Ÿæ¢³ç†ä¸¤è€…ä¸­ VARCHAR çš„åŒºåˆ«ï¼Œè§£æžåŠ â€œNâ€çš„åº•å±‚é€»è¾‘ä¸Žä½¿ç”¨åœºæ™¯ã€‚

SQL Server ä¸Ž PostgreSQL ä¸­ VARCHAR çš„åŒºåˆ«
=====================================

ã€€ã€€SQL Server éœ€é€šè¿‡ VARCHARï¼ˆéž Unicodeï¼‰å’Œ NVARCHARï¼ˆUnicodeï¼‰åŒºåˆ†å­—ç¬¦ç±»åž‹ï¼Œè€Œ PostgreSQL çš„ VARCHAR æœ¬èº«å°±æ˜¯ Unicode ç±»åž‹ï¼Œä½¿ç”¨æ›´çµæ´»ã€‚å…¶ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š

Â 

**SQL Server**

**VARCHAR**

**SQL Server**

**NVARCHAR**

**PostgreSQL**

**VARCHAR**  

**å­—ç¬¦é›†æ”¯æŒ**

éž Unicode

Unicodeï¼ˆUTF-16ï¼‰

Unicodeï¼ˆUTF-8ï¼Œé»˜è®¤ï¼‰

**æœ€å¤§å­—ç¬¦æ•°**

8000

4000

æ— ç¡¬æ€§é™åˆ¶

**å¤šè¯­è¨€æ”¯æŒæ”¯æŒ**

ä¸æ”¯æŒï¼ˆæ˜“ä¹±ç ï¼‰

æ”¯æŒ

æ”¯æŒ

**å…¸åž‹é€‚ç”¨åœºæ™¯**

çº¯è‹±æ–‡/æ•°å­—å†…å®¹

å¤šè¯­è¨€/ç‰¹æ®Šç¬¦å·å†…å®¹

æ‰€æœ‰åœºæ™¯

ã€€ã€€SQL Server ç”¨ VARCHAR å’Œ NVARCHAR ä¸¤ç§ç±»åž‹åŒºåˆ†å­—ç¬¦ä¸²ï¼Œæ˜¯å› ä¸ºåŽ†å²åŽŸå› ï¼Œå½“æ—¶ Unicode è¿˜æœªæµè¡Œï¼Œéœ€è¦å…¼é¡¾å•å­—èŠ‚ç¼–ç æ•ˆçŽ‡ï¼›è€Œ PostgreSQL çš„ VARCHAR åˆ™æ˜¯ Â Unicode æˆä¸ºä¸»æµåŽï¼ŒåŸºäºŽ UTF-8 è®¾è®¡çš„ç®€åŒ–æ–¹æ¡ˆ ã€‚

ä¸ºä»€ä¹ˆæŸ¥è¯¢è¦å¯¹å­—ç¬¦ä¸²åŠ â€œNâ€ï¼Ÿ
===============

ã€€ã€€åœ¨å­—ç¬¦ä¸²å‰åŠ  N'...'ï¼ˆN ä»£è¡¨ "National Character Set"ï¼‰æ˜¯æ ‡è¯† Unicode å­—ç¬¦ä¸²çš„è¯­æ³•ï¼Œèµ·æºäºŽ SQL Serverï¼Œä½†å¹¶éžå…¶ç‹¬æœ‰ã€‚è¿™ä¸€è¯­æ³•çš„æ ¸å¿ƒä½œç”¨æ˜¯å‘Šè¯‰æ•°æ®åº“ â€”â€” è¯¥å­—ç¬¦ä¸²åŒ…å« Unicode å­—ç¬¦ï¼Œéœ€æŒ‰ Unicode ç¼–ç ï¼ˆå¦‚ UTF-16ï¼‰å¤„ç†ï¼Œä¸»è¦ç”¨äºŽåŒ¹é… NVARCHAR ç­‰ Unicode ç±»åž‹çš„å­—æ®µï¼Œå…¶æ ¸å¿ƒç›®çš„æ˜¯åŒºåˆ† â€œéž Unicode å­—ç¬¦ä¸²â€ ä¸Ž â€œUnicode å­—ç¬¦ä¸²â€ï¼Œé¿å…å­—ç¬¦è½¬æ¢é”™è¯¯ä¸Žæ€§èƒ½é—®é¢˜ã€‚

ã€€ã€€è¿™ä¸€è®¾è®¡çš„æ ¹æºæ˜¯ â€”â€” SQL Server æ—©æœŸä¸æ”¯æŒ UTF-8ï¼Œéœ€é€šè¿‡ NVARCHAR ç±»åž‹å•ç‹¬å¤„ç† Unicode å­—ç¬¦ï¼ˆå¦‚ä¸­æ–‡ï¼‰ï¼Œè€Œ VARCHAR ä»…æ”¯æŒå•å­—èŠ‚ç¼–ç ï¼Œä¸¤è€…çš„ç¼–ç ä½“ç³»å®Œå…¨ç‹¬ç«‹ï¼Œå¿…é¡»é€šè¿‡ N å‰ç¼€æ˜Žç¡®åŒºåˆ†ã€‚

ä½•æ—¶å¿…é¡»åŠ â€œNâ€ï¼Ÿä½•æ—¶ä¸éœ€è¦â€œNâ€ï¼Ÿ
==================

SQL Server åœºæ™¯
-------------

ã€€ã€€å½“æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ—¶ï¼Œå¿…é¡»åŠ  Nï¼Œå¦åˆ™ä¼šå‡ºçŽ°ä¹±ç ã€æ•°æ®ä¸¢å¤±æˆ–æŸ¥è¯¢ä¸åŒ¹é…ï¼š

ã€€ã€€**\- å­—ç¬¦ä¸²åŒ…å« Unicode å­—ç¬¦ Unicode å­—ç¬¦åŒ…æ‹¬**ï¼šä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ã€ä¿„æ–‡ã€emojiï¼ˆå¦‚ ðŸ˜‚ï¼‰ã€ç‰¹æ®Šç¬¦å·ï¼ˆå¦‚ â‘ ï¼‰ç­‰ã€‚

ã€€ã€€**\- å¯¹åº”çš„åˆ—ç±»åž‹æ˜¯ NVARCHAR/NCHAR**

ã€€ã€€NVARCHAR æ˜¯ SQL Server ä¸“é—¨å­˜å‚¨ Unicode å­—ç¬¦çš„ç±»åž‹ï¼Œè‹¥å­—ç¬¦ä¸²ä¸åŠ  Nï¼ŒSQL Server ä¼šå°†å…¶æŒ‰éž Unicode ç¼–ç å¤„ç†ï¼Œå†å¼ºåˆ¶è½¬æ¢ä¸º NVARCHARï¼Œå¯¼è‡´ï¼š

ã€€ã€€**\- å­—ç¬¦ä¸¢å¤±**ï¼šæœ€ç›´æŽ¥çš„é—®é¢˜æ˜¯éžè‹±æ–‡å­—ç¬¦ï¼ˆå¦‚ä¸­æ–‡ã€æ—¥æ–‡ã€ä¿„æ–‡ã€emoji ç­‰ï¼‰ä¼šè¢«é”™è¯¯è½¬æ¢ï¼Œå¯¼è‡´ä¹±ç æˆ–å˜æˆ ?ã€‚

ã€€ã€€**\- ç´¢å¼•å¤±æ•ˆ**ï¼šéšå¼è½¬æ¢ï¼ˆVARCHAR â†’ NVARCHARï¼‰ä¼šå¯¼è‡´ NVARCHAR åˆ—çš„ç´¢å¼•æ— æ³•ä½¿ç”¨ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¸‹é™ã€‚

ã€€ã€€**\- æ•°æ®ä¸åŒ¹é…**ï¼šè½¬æ¢åŽçš„ä¹±ç ä¸Ž NVARCHAR åˆ—ä¸­çš„æ­£å¸¸å­—ç¬¦æ— æ³•åŒ¹é…ï¼Œå¯¼è‡´æŸ¥è¯¢ç»“æžœä¸ºç©ºã€‚

ã€€ã€€ä»¥ä¸‹åœºæ™¯ä¸­ï¼ŒåŠ  N ä¸ä»…å¤šä½™ï¼Œè¿˜å¯èƒ½å¯¼è‡´é—®é¢˜ï¼š

ã€€ã€€**\- åˆ—ç±»åž‹æ˜¯ VARCHARï¼ˆéž Unicode ç±»åž‹ï¼‰**ï¼šVARCHAR ä¸æ”¯æŒ Unicode å­—ç¬¦ï¼Œè‹¥åŠ  Nï¼ŒSQL Server ä¼šå°† N'å­—ç¬¦ä¸²'ï¼ˆUnicodeï¼‰éšå¼è½¬æ¢ä¸º VARCHAR ç±»åž‹ï¼Œå¯èƒ½å¯¼è‡´ Unicode å­—ç¬¦ä¸¢å¤±å’Œç´¢å¼•å¤±æ•ˆã€‚

ã€€ã€€å­—ç¬¦ä¸²æ˜¯çº¯ ASCII å­—ç¬¦ï¼Œåˆ—æ˜¯ NVARCHAR æ—¶ï¼Œè‹¥å­—ç¬¦ä¸²ä»…åŒ…å« ASCII å­—ç¬¦å¦‚ 'Zhang San'ï¼Œå³ä½¿åˆ—æ˜¯ NVARCHARï¼Œä¸åŠ  N ä¹Ÿä¸ä¼šå‡ºé”™ï¼ˆSQL Server å¯è‡ªåŠ¨å°† ASCII è½¬æ¢ä¸º Unicodeï¼‰ã€‚ä½†ä¸æŽ¨èè¿™ä¹ˆåšã€‚è‹¥åŽç»­å­—ç¬¦ä¸²æ–°å¢ž Unicode å­—ç¬¦ï¼Œå®¹æ˜“å¿˜è®°åŠ  N å¯¼è‡´é”™è¯¯ã€‚è€Œä¸”ï¼Œä¸ºé¿å…æ··æ·†ï¼Œå»ºè®®å¯¹ NVARCHAR åˆ—çš„æ‰€æœ‰å­—ç¬¦ä¸²å¸¸é‡éƒ½åŠ  Nã€‚

PostgreSQL åœºæ™¯ï¼šæ°¸è¿œä¸éœ€è¦åŠ â€œNâ€ Â  Â 
---------------------------

ã€€ã€€PostgreSQLÂ ä¸­æ²¡æœ‰ N å‰ç¼€çš„è¯­æ³•ï¼ŒåŽŸå› æ˜¯ â€”â€” PostgreSQLÂ çš„ VARCHAR ç±»åž‹é»˜è®¤ä½¿ç”¨ UTF-8 ç¼–ç ï¼ŒåŽŸç”Ÿæ”¯æŒæ‰€æœ‰ Unicode å­—ç¬¦ã€‚

å°ç»“
==

ã€€ã€€åœ¨ä½¿ç”¨æ•°æ®åº“æ—¶ï¼ŒåŠ¡å¿…è¦äº†è§£æ¸…æ¥šï¼Œæ•°æ®åº“çš„Â VARCHARÂ æ˜¯å“ªç§æƒ…å†µã€‚åˆç†ä½¿ç”¨Â VARCHARã€NVARCHARÂ ç±»åž‹å’Œâ€œNâ€å‰ç¼€ï¼Œé¿å…å­—ç¬¦ä¸²å­˜å‚¨ä¹±ç ã€æŸ¥è¯¢å¤±æ•ˆç­‰é—®é¢˜ï¼Œç¡®ä¿æ•°æ®åº“æ“ä½œçš„æ­£ç¡®æ€§ã€‚

![me](https://img2024.cnblogs.com/blog/270073/202508/270073-20250825145337681-1658462272.png)

> **ä½œè€…ï¼š**[MeteorSeed](http://www.cnblogs.com/MeteorSeed)
> 
> **æˆ‘å¸Œæœ›æ‚¨å–œæ¬¢è¿™ç¯‡åšæ–‡ï¼Œå¹¶ä¸€å¦‚æ—¢å¾€åœ°æ„Ÿè°¢æ‚¨é˜…è¯»å¹¶ä¸Žæœ‹å‹å’ŒåŒäº‹åˆ†äº«æˆ‘çš„åšæ–‡ã€‚**
> 
> **è½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚**