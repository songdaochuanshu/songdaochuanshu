---
layout: post
title: '【开源】C#上位机必备高效数据转换助手'
date: "2025-01-11T00:36:23Z"
---
【开源】C#上位机必备高效数据转换助手
-------------------

### 一、前言

大家好！我是付工。

我们在进行上位机开发时，从设备端获取到的数据之后，需要进行一定的数据处理及转换，才能生成我们需要用的数据。

这其中就涉及到了各种数据类型之间的相关转换，很多非科班出身的电气工程师，经常会因为弄不清楚各种数据类型之间的转换关系，导致无法获取到自己想要的数据。

因此，我开源了一个数据转换库的项目，放在Gitee上，希望对大家有所帮助。

### 二、网络架构

![](https://picx.zhimg.com/80/v2-cdbce55f7255c491fdd9f9163dfb3c39_720w.webp)

整个数据转换库总共包含15个类，包含了各种常用各种数据类型之间的互相转换，每个转换类中的方法都增加了注释，使用起来会很方便。

    /// <summary>
    /// 根据起始地址和长度自定义截取字节数组
    /// </summary>
    /// <param name="data">字节数组</param>
    /// <param name="start">开始字节</param>
    /// <param name="length">截取长度</param>
    /// <returns>字节数组</returns>
    [Description("根据起始地址和长度自定义截取字节数组")]
    public static byte[] GetByteArrayFromByteArray(byte[] data, int start, int length)
    {
        if (start < 0) throw new ArgumentException("开始索引不能为负数");
        if (length <= 0) throw new ArgumentException("长度必须为正数");
        if (data.Length < (start + length)) 
        throw new ArgumentException("字节数组长度不够或开始索引太大");
        byte[] result = new byte[length];
        Array.Copy(data, start, result, 0, length);
        return result;
    }
    

### 三、项目应用

在项目上进行应用，可以通过以下两种方式：

1、Nuget安装

通过Nuget包管理器中年搜索xbd.DataConvertLib，点击安装即可，如下所示：

![](https://picx.zhimg.com/80/v2-f83ac75ba4b36e005dfcc986c251789d_720w.webp)

2、Gitee下载

Gitee下载链接：

[https://gitee.com/fujiajin/xbd.DataConvertTool](https://link.zhihu.com/?target=https%3A//gitee.com/fujiajin/xbd.DataConvertTool)

下载之后即包含完整源码，可以集成到项目中或将dll文件和xml文件添加到项目中。

![](https://pic1.zhimg.com/80/v2-9323fcb276d41ae349f7fa012ab87a62_720w.webp)

### 四、使用方法

虽然转换库包含了不同的类，每个类中又包含了很多方法，但是不用担心，只要掌握了以下几个原则，使用起来会很简单。

原则一：首先要确定使用哪个类，类的命名是根据返回值来决定的，这个返回值就是你希望得到的类型。

*   如果返回布尔值或布尔数组，使用BitLib。
*   如果返回字节数组，使用ByteArrayLib。
*   如果返回短整型或短整型数组，使用ShortLib。
*   以此类推。

原则二：确定好类之后，接下来就是确定方法。

*   绝大多数方法的命名是按照 Get...From... 来定义的
*   要明确知道需要什么类型，有什么类型的数据

示例：我们希望从一个字节数组中，某个索引开始截取转换成一个浮点数。

我们希望得到一个浮点数，因此类名选择FloatLib。

我们有的是一个字节数组，因此方法名选择GetFloatFromByteArray。

![](https://picx.zhimg.com/80/v2-d56207ddf7049466ead10a08207376af_720w.webp)

在实际应用中，Visual Studio会有智能提示，我们只需要选择即可。

### 五、软件工具

大家下载的源码中，运行的界面是基于这个转换库开发的一个测试工具，主要是使用反射和特性来实现的。

![](https://pica.zhimg.com/80/v2-98b0db706fa835ea946f23a4074dc078_720w.webp)

这上面罗列了通信库的所有的类和每个类对应的方法，每个类和方法都有对应的注释，然后通过表格输入正确的数据，点击执行结果，即可得到对应的结果。

比如：我们想要将2.5浮点数转成一个字节数组，那么选择ByteArrayLib的GetByteArrayFromFloat方法，第一个参数填写2.5，第二个参数填写大小端，即可得到结果为\[64,32,0,0\]。

![](https://pic1.zhimg.com/80/v2-c520e5e0eb1cc23c44a46f7a97b2b18e_720w.webp)

开源不易，希望大家多多支持。

posted on 2025-01-10 10:56  [付工上位机](https://www.cnblogs.com/xbdedu)  阅读(450)  评论(2)  [编辑](https://i.cnblogs.com/EditPosts.aspx?postid=18663596)  [收藏](javascript:void\(0\))  [举报](javascript:void\(0\))