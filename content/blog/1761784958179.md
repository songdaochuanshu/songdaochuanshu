---
layout: post
title: '网络连接的核心——TCP/IP体系结构'
date: "2025-10-30T00:42:38Z"
---
网络连接的核心——TCP/IP体系结构

一、网络连接的核心

前言：局域网作为互联网的核心，但是不同的局域网之间采用的是不同的技术（传输介质、介质控制方法、程真方法等）通过利用IP协议将这些网络从用户层面看起来是一个统一的网络，这个技术称为虚拟互联网络。

IP地址用于精确识别终端用户，那么首先需要了解一些概念：

1、内网（局域网）IP和公网（互联网）IP的区别

内外IP：简单来讲就是受保护的IP，可以访问互联网，但互联网无法直接访问到你

公网IP：最常见的www.baidu.com。通常访问的百度浏览器就是公网IP，全球唯一、随意访问。

问题来了：那如何判断某www.XXX.com是公网还是内网呢？

在本地电脑命令行输入ipconfig/all查看IP地址。ipconfig/all是Windows系统中用于显示网络配置详细信息的命令，是最为基础的一个常用指令。一般用于网络故障排查，快速定位网络连接问题。

私有地址的范围包括以下三个段：

*   A类地址：10.0.0.0 至 10.255.255.255
    
*   B类地址：172.16.0.0 至 172.31.255.255
    
*   C类地址：192.168.0.0 至 192.168.255.255
    

在这些IP范围之内的，都是内网IP。

2、端口（port）——设备上用于区分不同服务的标识符，每一个端口对应一个特定的服务。简单的理解就是：你和XXX聊天，计算机为了能够将信息准确的发送到指定的用户，都有一个对应的端口号。【IP地址：端口】共同标识了网络中的具体服务。

例如：HTTP服务（端口80）

二、IP地址

1、最早的IP设计是两级结构：IP地址：：={<网络号>，<主机号>}，且共有5类IP，在网络号字段最前面有1~3位的类别位，规定数值分别为0、10、110，作为单播地址使用。以A类地址为例。

*   A类IP地址由1个字节的网络地址和3个字节的主机地址组成，网络地址最高位必须是0，0是保留位并且是本网络的管理员。而127也是保留地址，用于测试环回【指测试本机是否安装TCP/IP协议栈】范围为1.0.0.0 ~ 126.255.255.255。（00000001 00000000 00000000 00000000 ~ 01111111 11111111 11111111 11111111）可以用A类网络有27\-2个，每个网络可以容纳224\-2的主机。
*   B类地址（中等规模网络）：由2Byte网络地址+2Byte主机地址组成，类别位为10，范围为128.0.0.0 ~ 191.255.255.255（10000000 00000000 00000000 00000000 ~ 10111111 11111111 11111111 11111111）可用的B类网络有214\-2个，每个网络可以容纳216\-2个主机。
*   C类地址...

2、子网划分（子网掩码）、无类别域间路由CIDR

由于IP地址空间利用率很低，为此设计出了三级IP地址：IP地址：：={<网络号>，<子网号>，<主机号>}。简单理解为：在原二级结构中的主机号中进行再次划分，并且将再次划分的类别称为子网归类到网络号当中。这样的话从一个IP数据报的首部就无法判断源主机和目的主机所连接的网络是否进行了子网划分，因此需要借助子网掩码这一技术来判断子网从主机号当中划分了多少为归类到了网络号当中。

子网掩码：主机位全0，网络位全1。

计算网络地址的方法是（IP地址）AND（子网掩码）=网络地址

CIDR的设计完全消除了传统分类的方式，通过使用各种长度的“网络前缀”来代替分类地址中的网络号和子网号。因此由回归到了两级编址。IP地址：：={<前缀>，<主机和>}。CIDR还使用了“斜线记法”即在IP地址后面加上一个斜线“/”，然后写上网络前缀所占的位数。

那么问题来了：CIDR如何去区分网络地址和主机地址呢？    答：这个还是可以根据上面计算方法进行计算

3、私有IP（内部局域网）

内网IP只能用于一个机构的内部通信，不能用于因特网上的主机通信。那么当私有IP需要上网时，私有IP是如何转换成全球IP进行通信呢？

答：需要安装一个网络地址转换软件（Network Address Translation，NAT）装有NAT软件的路由器称为NAT路由器。

当私有IP**发送信息时**，内部主机会通过NAT路由器，将内网的IP地址转换成全球地址（即外网IP地址），并将转换结果记录到NAT路由器的转换表中，源地址改变，目的地址不变。

当私有IP接收信息时，全球地址会根据NAT路由器的转换记录将全球地址转换为内网IP。这时源地址不变，目的地址改变。

本次学习共3个知识点：IP地址、CIDR、NAT路由器。