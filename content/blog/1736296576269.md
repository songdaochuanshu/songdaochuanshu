---
layout: post
title: '基于STC8G1K08的CH549单键进入USB下载模式实验'
date: "2025-01-08T00:36:16Z"
---
基于STC8G1K08的CH549单键进入USB下载模式实验
==============================

一、实验原因
======

CH552或CH549进入USB下载，通常需要两个按键，一个控制电源的通断，一个通过串联电阻（一头接VCC或V33）冷启动时抬高UDP电平。时序上是这样的：断电--按下接UDP的轻触开关--通电--松开接UDP的轻触开关。这样的话，操作上一般需要双手并用，比较麻烦。

二、电路改进
======

本制作是在前面纯硬件实现CH549或CH552单键进入USB下载模式（详见开源项目 [https://oshwhub.com/xxkj2010/single-key-bring-in-circuit-test](https://oshwhub.com/xxkj2010/single-key-bring-in-circuit-test) ）的基础上进行修改的，即利用手头闲置的STC8G1K08写入延时代码，通过一定顺序控制电源输出和UDP电平，从而为CH552或CH549提供进入USB下载模式的时序。

三、板子实物
======

板子实物图（USB母口未接）如下：  
![](https://img2024.cnblogs.com/blog/3565254/202501/3565254-20250107144105562-65873119.jpg)

原设计欠缺R5，目前用直插电阻补焊到板子的背面。  
![](https://img2024.cnblogs.com/blog/3565254/202501/3565254-20250107144115792-1570124379.jpg)

与CH549连接的实物图如下：  
![](https://img2024.cnblogs.com/blog/3565254/202501/3565254-20250107144139345-1184216078.jpg)

四、开源项目
======

开源项目中的线路和PCB已经补上R5，欢迎朋友们直接使用。  
![](https://img2024.cnblogs.com/blog/3565254/202501/3565254-20250107144128206-1254636019.jpg)

开源项目网址：

[https://oshwhub.com/xxkj2010/experiment-of-ch549-single-key-e](https://oshwhub.com/xxkj2010/experiment-of-ch549-single-key-e)

五、两点说明
======

1、原设计上的K2和K3是为了测试双按键进入USB下载模式功能的，非必要可以不用焊上。K1为单键进入下载模式轻触开关。

2、鉴于开发板上的电源滤波电容容量各不相同，所以附件提供了两个HEX文件，一般情况下两个都可以用。选择上可以根据板载电容容量选择。如果你的实验板使用大容量电容，则可以选择 时间较长.hex，相反则选择 时间较短.hex。

六、使用方法
======

打开WCHISPStudio并选择芯片系列，下载接口选择USB，连接好线，按一下K1，即可令CH549或CH552进入USB下载模式。

七、测试效果
======

![image](https://img2024.cnblogs.com/blog/3565254/202501/3565254-20250107144613699-51416395.jpg)

因个人业余水平有限，电路和源代码仍然有修改和完善的需要，所以敬请各位大佬提出修改意见，谢谢！

2025.1.7

欢迎关注本人公众号，了解更多。  
![image](https://img2024.cnblogs.com/blog/3565254/202501/3565254-20250107144733029-103295547.jpg)