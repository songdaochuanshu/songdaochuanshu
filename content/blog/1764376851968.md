---
layout: post
title: 'n8n工作流实战：让DeepSeek一键拆解100篇公众号爆文，扒得底裤都不剩（建议收藏）'
date: "2025-11-29T00:40:51Z"
---
n8n工作流实战：让DeepSeek一键拆解100篇公众号爆文，扒得底裤都不剩（建议收藏）
=============================================

大家好，我是汤师爷，分享1000个行业智能体案例，致力于帮助100W人用智能体创富~

之前我们搭建了一个n8n工作流，能够一键抓取公众号爆款文章，自动存入飞书表格。

但问题来了，100多篇文章摆在面前，哪篇值得借鉴？哪篇有爆款潜力？

一篇篇人工分析？太累了。

今天分享一个n8n工作流，让AI帮你逐篇分析每篇文章，自动给出爆款评分、用户画像、核心关键词。

分析完成后，结果直接写入飞书表格。

1.工作流的整体流程
----------

简单来说，工作流分三步：

1.  从飞书表格读取所有文章
2.  将每篇文章交给AI分析爆款潜力
3.  将AI的分析结果自动更新回飞书表格

整个过程全自动，你只需点击一次运行按钮。

2.准备工作
------

开始之前，你需要准备两样东西：

### 2.1 获取DeepSeek的API密钥

访问DeepSeek官网的开放平台管理后台，创建并获取API密钥（API key）。

访问地址：[https://platform.deepseek.com/api\_keys](https://platform.deepseek.com/api_keys)

按照页面提示生成你的API密钥，用于后续的身份验证和服务调用。

### 2.2 **创建飞书多维表格并绑定应用**

1、新建多维表格

2、获取表格token与表格id

3、点右上角“...”，选择“更多”->“添加文档应用”。

4、选择“n8n助手”，权限是可编辑。

3.工作流节点拆解
---------

### 3.1 Edit Fields节点：配置中心

这个节点存放所有配置参数，方便后续节点调用。

添加一个Edit Fields节点，配置以下3个参数：

*   表格Token：粘贴你的飞书表格Token
*   表格ID：粘贴你的飞书表格ID

配置完成后，点击"Execute step"测试一下。

### 3.2 Feishu Lite节点：读取所有文章

这一步，从飞书表格中读取所有文章。

添加Feishu Node节点，按以下步骤配置：

*   Credentials：选择你的飞书机器人
*   Resource：多维表格
*   Operation：查询记录
*   多维表格Token：用表达式引用 `$json['表格token']`
*   多维表格ID：用表达式引用 `$json['表格id']`
*   请求体JSON：切换到表达式模式，填入：

    {
      "page_size": 100
    }
    

运行一下，OUTPUT显示飞书表格的原始数据。

### 3.3 Code节点：提取文章列表数组

这一步的作用是：把飞书返回的数据中，提取出文章列表部分，转成数组格式，方便后续循环处理。

添加一个Code节点，语言选JavaScript，粘贴以下代码：

    return $input.first().json.data.items;
    

### 3.3 Loop Over Items节点：启动循环

为了逐篇分析文章，需要使用循环节点。

添加Loop Over Items节点，无需配置，直接关闭窗口即可。

### 3.4 Code节点：合并公众号文章数据

这一步的作用是：把循环中当前这篇文章的所有信息（标题、链接、阅读数等等），整理成一个完整的字符串，方便后面交给AI分析。

简单来说，就是把分散的数据字段整合在一起，让AI能够完整地读取和分析。

在循环内部，提取当前文章的信息并打包成字符串。

添加**Code**节点，语言选择JavaScript，粘贴以下代码：

    const items = $input.all(); 
    // 假设目标数组在 items[0].json.data.items 或者 items[0].json.fieldsArray
    const arr = items[0].json?.data?.items ?? items[0].json?.fields ?? items.map(i => i.json);
    
    // 将其序列化为字符串（漂亮格式，便于调试）
    const str = JSON.stringify(arr, null, 2);
    
    // 返回一个字段 stringified 供下游引用
    return [{ json: { stringifiedArray: str } }];
    

运行一下，OUTPUT为合并后的公众号文章数据。

### 3.5 Basic LLM Chain节点：调用AI分析

这是核心步骤，把文章数据"喂"给AI。

添加Basic LLM Chain节点，配置如下：

*   Source for Prompt (User Message)：define below
*   Prompt (User Message)：粘贴以下内容：

    你现在的任务是：
    给定一组数据包含 ID、标题、正文、发布时间、分类、点赞数等信息，分析爆款潜力、用户画像、文章目标、关键词。
    
    你的输出要求：
    为每条文章打一个 爆款评分（0–100，越高越容易成为爆款）。
    给出一句话的 爆款理由。 
    给出用户画像和文章目标。
    提取文章的核心关键词。
    
    输出格式：
    必须是一个 JSON ，字段为：{ 爆款指数: 0~100数字 , 爆款理由:'XXXXX', 用户画像:'XXXX',文章目标:'XXXX',关键词:'XX XX XX' } 
    
    约束条件：
    只输出纯 JSON，不要解释文字。
    缺失信息时用合理缺省值（比如分数为 0，理由留空）。
    
    文章如下：
    {{ $json.stringifiedArray }}
    

### 3.6 DeepSeek Chat Model节点：使用大模型

在这个节点里，我们需要告诉n8n使用DeepSeek的AI模型。配置很简单，主要就两步：

第一步，选择模型。在Basic LLM Chain添加DeepSeek Chat Model模型。

第二步，点击DeepSeek accout，填入你的API密钥。还记得前面让你准备的DeepSeek API Key吗？在这里粘贴进去就行。

配置完成后，AI就能读取文章内容，按照我们给的提示词进行分析了。

### 3.6 Code节点：清理AI返回的数据，让飞书表格能正常读取

这一步很关键，但经常被忽略。

AI返回的分析结果是JSON格式的文本，里面可能包含换行符、引号、反斜杠等特殊字符。

如果直接把这些数据写入飞书表格，大概率会报错。

所以我们需要先清洗一下数据：把特殊字符转义成飞书能识别的格式，把数组转成用顿号分隔的字符串，确保每个字段都符合飞书表格的数据规范。

简单来说，就是把AI的原始输出整理成飞书友好格式。

添加Code节点，粘贴代码：

    function escapeJSON(str) {
      if (typeof str !== 'string' || str === null) return str;
      return str.replace(/\\/g, '\\\\').replace(/"/g, '\\"').replace(/\n/g, '\\n').replace(/\r/g, '\\r').replace(/\t/g, '\\t');
    }
    
    function safeJoin(data) {
      if (Array.isArray(data)) return data.join('、');
      if (typeof data === 'string') return data;
      return "";
    }
    
    const aiResponseString = $json.choices[0].message.content;
    const aiData = JSON.parse(aiResponseString);
    
    const fieldsToUpdate = {
      "核心关键词": escapeJSON(safeJoin(aiData.关键词)),
      "爆款指数": aiData.爆款指数 || 0,
      "爆款理由": escapeJSON(aiData.爆款理由 || ""),
      "用户画像": escapeJSON(safeJoin(aiData.用户画像)),
      "文章目标": escapeJSON(safeJoin(aiData.文章目标))
    };
    
    return { json: fieldsToUpdate }
    

### 3.7 Feishu Node节点：更新表格

最后，将AI分析结果写回飞书表格。

添加Feishu Node节点，按以下步骤配置：

*   Credentials：选择你的飞书机器人
*   Operation：更新记录
*   多维表格Token：表达式引用`{{$('Edit Fields').item.json['表格token']}}`
*   多维表格ID：表达式引用`{{$('Edit Fields').item.json['表格id']}}`
*   记录ID：表达式引用`${{$('Loop Over Items').item.json.fields.ID.value[0].text}}$`
*   请求体JSON：切换到表达式模式，粘贴以下内容：

    {
      "fields": {
        "AI爆款指数":{{ $json["爆款指数"]}},
        "AI爆款理由":"{{ $json["爆款理由"]}}",
        "用户画像":"{{ $json["用户画像"] }}",
        "文章目标":"{{ $json["文章目标"] }}",
        "关键词":"{{ $json["核心关键词"] }}"
      }
    }
    

### 3.8 闭合循环

最后一步：从Feishu Node节点拉一根线，连回Loop Over Items节点，形成完整循环。

保存工作流，点击右上角的"Execute workflow"按钮运行。

稍等片刻，工作流就会开始执行。你可以在页面上看到每个节点逐一被激活，数据在各个节点之间流转。

当所有节点都显示绿色对勾时，说明执行成功了。这时候打开你的飞书表格，就能看到AI分析的结果已经自动填充到对应的列里了，爆款指数、爆款理由、用户画像、关键词，一应俱全。

4.小结
----

这套工作流跑通后，选题效率直接翻倍。

以前要手动看100多篇文章，脑瓜子疼。

现在AI帮你分析，打开表格按爆款指数排序，高分文章一目了然。

如果你也在做公众号，强烈建议搭一个，选题再也不用发愁。

> 本文已收录于，我的技术博客：[tangshiye.cn](https://tangshiye.cn) 里面有，AI 学习资料，Coze 工作流，n8n 工作流，算法 Leetcode 详解，BAT 面试真题，架构设计，等干货分享。

本文来自博客园，作者：[AI架构师汤师爷](https://www.cnblogs.com/tangshiye/)，转载请注明原文链接：[https://www.cnblogs.com/tangshiye/p/19282811](https://www.cnblogs.com/tangshiye/p/19282811)