---
layout: post
title: 'C#ä½¿ç”¨Tesseract C++ APIè¿‡ç¨‹è®°å½•'
date: "2024-12-28T09:07:29Z"
---
C#ä½¿ç”¨Tesseract C++ APIè¿‡ç¨‹è®°å½•
=========================

Tesseract
---------

Tesseract æ˜¯ä¸€ä¸ªå¼€æºçš„å…‰å­¦å­—ç¬¦è¯†åˆ«ï¼ˆOCRï¼‰å¼•æ“ï¼Œæœ€åˆç”± Hewlett-Packardï¼ˆæƒ æ™®ï¼‰å®éªŒå®¤å¼€å‘ï¼Œåæ¥ç”± Google æ”¶è´­å¹¶ç»§ç»­ç»´æŠ¤å’Œå¼€æºè´¡çŒ®ã€‚Tesseract å¯ä»¥è¯†åˆ«å¤šç§è¯­è¨€çš„æ–‡å­—ï¼Œå¹¿æ³›åº”ç”¨äºå°†å›¾ç‰‡æˆ–æ‰«ææ–‡æ¡£ä¸­çš„æ–‡æœ¬å†…å®¹è½¬æ¢æˆå¯ç¼–è¾‘çš„æ–‡æœ¬æ ¼å¼ã€‚éšç€æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å‘å±•ï¼ŒTesseract ä¹Ÿæ•´åˆäº†åŸºäºæ·±åº¦ç¥ç»ç½‘ç»œçš„ OCR æ¨¡å‹ï¼Œæå‡å…¶è¯†åˆ«å‡†ç¡®ç‡ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤æ‚æ’ç‰ˆå’Œæ‰‹å†™ä½“çš„è¯†åˆ«æ•ˆæœæœ‰æ‰€æ”¹å–„ã€‚

Tesseract é€‚åˆå¼€å‘äººå‘˜å’Œç ”ç©¶äººå‘˜ä½¿ç”¨ï¼Œå¯ä»¥åµŒå…¥åˆ°å„ç§åº”ç”¨ä¸­ï¼Œæ¯”å¦‚æ–‡æ¡£æ•°å­—åŒ–ã€å›¾åƒå¤„ç†è½¯ä»¶ã€å†…å®¹ç®¡ç†ç³»ç»Ÿç­‰ã€‚å®ƒæ”¯æŒå‘½ä»¤è¡Œæ“ä½œï¼Œä¹Ÿæä¾›äº†ä¸°å¯Œçš„ API æ¥å£ï¼Œæ”¯æŒ C++ã€Pythonã€Javaã€Node.js ç­‰å¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œä¾¿äºé›†æˆå’Œè°ƒç”¨ã€‚Tesseract çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬æ–‡æœ¬æ£€æµ‹ã€å­—ç¬¦è¯†åˆ«å’Œåå¤„ç†çº é”™ï¼Œèƒ½å¤Ÿå¤„ç†å¤šç§å›¾åƒè¾“å…¥æ ¼å¼ï¼Œè¾“å‡ºåŒ…æ‹¬çº¯æ–‡æœ¬ã€HOCRï¼ˆHTML + OCRï¼‰æ ¼å¼ã€PDF ç­‰å¤šç§æ ¼å¼ã€‚Tesseract çš„é«˜çµæ´»æ€§å’Œå¼ºå¤§çš„è¯†åˆ«èƒ½åŠ›ä½¿å…¶æˆä¸º OCR é¢†åŸŸä¸­éå¸¸å—æ¬¢è¿çš„å·¥å…·ä¹‹ä¸€ã€‚

GitHubåœ°å€ï¼š[https://github.com/tesseract-ocr/tesseract](https://github.com/tesseract-ocr/tesseract)

![image-20241227152937200](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729631-1101186648.png)

Tesseractæä¾›äº†ä¸°å¯Œçš„ API æ¥å£ï¼Œæ”¯æŒ C++ã€Pythonã€Javaã€Node.js ç­‰å¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œæ²¡æœ‰C#çš„ï¼Œå®é™…ä¸Šå·²ç»æœ‰å¤§ä½¬åšäº†C#çš„å°è£…äº†ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œéœ€è¦åªæ˜¯ç®€å•ä½¿ç”¨ä¸€ä¸‹ï¼Œç”¨è¿™ä¸ªå¤§ä½¬çš„å°±å¾ˆæ–¹ä¾¿äº†ã€‚

æ„Ÿå…´è¶£çš„å¯ä»¥ç§ç§ï¼š

é¡¹ç›®GitHubåœ°å€ï¼š[https://github.com/charlesw/tesseract](https://github.com/charlesw/tesseract)

![image-20241227153302569](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729612-381087639.png)

ç¤ºä¾‹GitHubåœ°å€ï¼š[https://github.com/charlesw/tesseract-samples](https://github.com/charlesw/tesseract-samples)

![image-20241227153437445](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729643-1938570573.png)

ä½†è¿™ä¸æ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜ï¼Œç°åœ¨è¿˜å¤„äºå­¦ä¹ é˜¶æ®µï¼Œèƒ½ç›´æ¥ä½¿ç”¨å¤§ä½¬çš„åº“ç¡®å®å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœè‡ªå·±èƒ½å¤ŸçŸ¥é“å¤§ä½¬æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œé‚£ä¸æ˜¯ä¹Ÿå¾ˆé…·å—ï¼Ÿ

å®ç°çš„æ–¹å¼ä¸å¤§ä½¬é¡¹ç›®çš„æ–¹å¼æ˜¯ç±»ä¼¼çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20241227153822517](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729650-85923879.png)

éœ€è¦ä¾èµ–leptonica-1.82.0.dllä¸tesseract50.dllï¼Œç„¶åé€šè¿‡DllImportå¯¼å…¥å…¶ä¸­çš„C++å‡½æ•°ã€‚

å·²ç»æœ‰ç°æˆçš„åº“äº†ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨å‘¢ï¼Ÿ

ç¬¬ä¸€ï¼Œé¡¹ç›®ä¸­å¯èƒ½åªéœ€è¦ç”¨åˆ°Tesseractçš„å‡ ä¸ªC++ APIè€Œå·²ï¼Œç›´æ¥å¼•ç”¨ä¸€å¤§å †ä¸œè¥¿æ²¡æœ‰å¿…è¦ã€‚ç¬¬äºŒï¼Œå­¦ä¹ é˜¶æ®µï¼Œä»¥è‡ªå·±å­¦ä¹ æŒæ¡æŠ€èƒ½ä¸ºä¸»ï¼Œè‡ªå·±å…ˆæŒæ¡äº†è¿™é¡¹æŠ€èƒ½ï¼Œç„¶åå·æ‡’äº†ç›´æ¥ä½¿ç”¨å¤§ä½¬çš„åº“ä¹Ÿä¸è¿Ÿã€‚

Windowsç¼–è¯‘Tesseract
------------------

é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆåœ¨Windowsä¸Šç¼–è¯‘Tesseractï¼Œå®˜æ–¹æ–‡æ¡£æœ‰ä¸€äº›ä»‹ç»ï¼Œæ–‡æ¡£åœ°å€ï¼š[https://tesseract-ocr.github.io/tessdoc/Compiling.htmlã€‚](https://tesseract-ocr.github.io/tessdoc/Compiling.html%E3%80%82)

æŸ¥çœ‹æ–‡æ¡£ä¹‹åï¼Œæˆ‘ä½¿ç”¨è¿™ç§æ–¹å¼ï¼š

![image-20241227154722530](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729599-1717563373.png)

å…ˆæ¥ç®€å•ä»‹ç»ä¸€ä¸‹vcpkgã€‚

**vcpkg**

vcpkgæ˜¯ä¸€ä¸ªç”¨æ¥ç®¡ç†C++åº“çš„è·¨å¹³å°åŒ…ç®¡ç†å·¥å…·ï¼Œç”±å¾®è½¯å¼€å‘å¹¶ç»´æŠ¤ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…ç®€åŒ–ç¬¬ä¸‰æ–¹åº“çš„é›†æˆå’Œä½¿ç”¨è¿‡ç¨‹ã€‚vcpkgé€šè¿‡æä¾›é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶åŒ…å’Œæºä»£ç ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿåœ¨Windowsã€Linuxå’ŒmacOSç­‰æ“ä½œç³»ç»Ÿä¸Šè½»æ¾å®‰è£…å’Œç®¡ç†C++åº“ã€‚å®ƒæ”¯æŒå¤šç§ç¼–è¯‘å™¨ï¼ŒåŒ…æ‹¬Visual Studioã€GCCå’ŒClangã€‚vcpkgçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸‹è½½å¹¶å®‰è£…ï¼Œç„¶åé€šè¿‡å‘½ä»¤è¡Œå·¥å…·æŒ‡å®šè¦å®‰è£…çš„åº“åï¼Œvcpkgä¼šè‡ªåŠ¨ä¸‹è½½ã€ç¼–è¯‘å¹¶å®‰è£…æ‰€éœ€çš„åº“åŠå…¶ä¾èµ–é¡¹ã€‚æ­¤å¤–ï¼Œvcpkgè¿˜å…·æœ‰ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½ï¼Œèƒ½å¤Ÿæ–¹ä¾¿åœ°åˆ‡æ¢åº“çš„ä¸åŒç‰ˆæœ¬ã€‚å®ƒå¯¹äºæå‡å¼€å‘æ•ˆç‡ã€ä¿æŒé¡¹ç›®çš„ä¸€è‡´æ€§ä»¥åŠè§£å†³è·¨å¹³å°å¼€å‘ä¸­çš„åº“å…¼å®¹æ€§é—®é¢˜éå¸¸æœ‰å¸®åŠ©ã€‚è®¸å¤šå¼€æºé¡¹ç›®å’Œå•†ä¸šè½¯ä»¶éƒ½é€‰æ‹©ä½¿ç”¨vcpkgæ¥ç®¡ç†å’Œåˆ†å‘ä¾èµ–åº“ã€‚

**ä½¿ç”¨vcpkgå®‰è£…Tesseract**

    git clone https://github.com/microsoft/vcpkg.git
    

    cd vcpkg; .\bootstrap-vcpkg.bat
    

    vcpkg install tesseract:x64-windows
    

å®‰è£…å®Œæˆï¼š

![image-20241226105928367](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194729640-169509381.png)

    vcpkg integrate install
    

![image-20241226110526085](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730015-74887334.png)

ä¸ºè¿™ä¸ª vcpkg æ ¹ç›®å½•åº”ç”¨äº†å…¨å±€ç”¨æˆ·é›†æˆã€‚ CMake é¡¹ç›®åº”ä½¿ç”¨ï¼š"-DCMAKE\_TOOLCHAIN\_FILE=D:/Learning/vcpkg/scripts/buildsystems/vcpkg.cmake"

ç°åœ¨æ‰€æœ‰ MSBuild C++ é¡¹ç›®éƒ½å¯ä»¥ #include ä»»ä½•å·²å®‰è£…çš„åº“ã€‚é“¾æ¥å°†ä¼šè‡ªåŠ¨å¤„ç†ã€‚å®‰è£…æ–°åº“åï¼Œå®ƒä»¬å°†ç«‹å³å¯ç”¨ã€‚

    vcpkg list
    

![image-20241226110859781](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730031-1360549776.png)

**æ–°å»ºä¸€ä¸ªC++é¡¹ç›®ä½¿ç”¨Tesseract C++ API**

æˆ‘å†™äº†ä¸¤ä¸ªç®€å•çš„å‡½æ•°ç”¨äºæµ‹è¯•ã€‚

å¤´æ–‡ä»¶ï¼š

    #pragma once
    extern "C" __declspec(dllexport) char* getChineseText(const char* imagePath);
    extern "C" __declspec(dllexport) char* getEnglishText(const char* imagePath);
    extern "C" __declspec(dllexport) void freeMemory(char* ptr);
    

æºæ–‡ä»¶ï¼š

    #include <tesseract/baseapi.h>
    #include <leptonica/allheaders.h>
    #include "test.h"
    #include <iostream>
    
    void windows_cmd_support_utf8(void)
    {
       system("chcp 65001 & cls"); //cls ç”¨æ¥æ¸…é™¤ chcp çš„è¾“å‡º
    }
    
    char* getEnglishText(const char* imgPath) {
        tesseract::TessBaseAPI* api = new tesseract::TessBaseAPI();
        if (api->Init(NULL, "eng")) {
            fprintf(stderr, "Could not initialize tesseract.\n");
            delete api;
            return nullptr;
        }
    
        Pix* image = pixRead(imgPath);
        if (!image) {
            fprintf(stderr, "Could not read image file.\n");
            api->End();
            delete api;
            return nullptr;
        }
    
        api->SetImage(image);
        char* outText = api->GetUTF8Text();
        if (!outText) {
            fprintf(stderr, "OCR failed.\n");
            api->End();
            pixDestroy(&image);
            delete api;
            return nullptr;
        }
      
    
        api->Clear();
        api->End();
        delete api;
        pixDestroy(&image);
    
        return outText;
    }
    
    char* getChineseText(const char* imgPath) {
        tesseract::TessBaseAPI* api = new tesseract::TessBaseAPI();
        if (api->Init(NULL, "chi_sim")) {
            fprintf(stderr, "Could not initialize tesseract.\n");
            delete api;
            return nullptr;
        }
    
        Pix* image = pixRead(imgPath);
        if (!image) {
            fprintf(stderr, "Could not read image file.\n");
            api->End();
            delete api;
            return nullptr;
        }
    
        api->SetImage(image);
        char* outText = api->GetUTF8Text();
        if (!outText) {
            fprintf(stderr, "OCR failed.\n");
            api->End();
            pixDestroy(&image);
            delete api;
            return nullptr;
        }
    
    
        api->Clear();
        api->End();
        delete api;
        pixDestroy(&image);
    
        return outText;
    }
    
    void freeMemory(char* ptr) {
        delete[] ptr;
    }
    
    int main()
    { 
        const char* imgPath = "D:\\SemanticKernel-Test2.png";  // æ›¿æ¢ä¸ºä½ çš„å›¾åƒæ–‡ä»¶è·¯å¾„
    
        const char* imgPath2 = "D:\\test666.png";  // æ›¿æ¢ä¸ºä½ çš„å›¾åƒæ–‡ä»¶è·¯å¾„
    
        // ç¬¬ä¸€æ¬¡è°ƒç”¨
        char* result1 = getChineseText(imgPath);
    
        windows_cmd_support_utf8();
    
        std::cout << "OCR Result 1: " << result1 << std::endl;
    
        // ç¬¬äºŒæ¬¡è°ƒç”¨
        char* result2 = getChineseText(imgPath2);
        std::cout << "OCR Result 2: " << result2 << std::endl;
    
        // é‡Šæ”¾å†…å­˜
        //freeMemory(result1);
        //freeMemory(result2);
        return 0;  // ç¨‹åºæ­£å¸¸ç»“æŸ
    
    }
    

**æ³¨æ„ğŸ“ğŸ“ğŸ“**

å…ˆå°†é¡¹ç›®é…ç½®æˆX64:

![image-20241227160709604](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730041-1173601267.png)

ç°åœ¨è¿è¡Œé¡¹ç›®ï¼Œä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå¹¶æ²¡æœ‰åŒ…å«tessdataã€‚

`tessdata` æ˜¯ Tesseract OCR å¼•æ“ä½¿ç”¨çš„ä¸€ç§æ•°æ®æ–‡ä»¶æ ¼å¼ï¼Œç”¨äºå­˜å‚¨è¯­è¨€æ¨¡å‹å’Œå­—ç¬¦è¯†åˆ«æ•°æ®ã€‚Tesseract é€šè¿‡åŠ è½½è¿™äº›æ•°æ®æ–‡ä»¶æ¥å®ç°å¯¹ä¸åŒè¯­è¨€æ–‡å­—çš„è¯†åˆ«ã€‚æ¯ä¸ªè¯­è¨€éƒ½æœ‰ä¸€å¥—å¯¹åº”çš„ `tessdata` æ–‡ä»¶ï¼Œé€šå¸¸å‘½åä¸º `lang.traineddata`ï¼Œå…¶ä¸­ `lang` æ˜¯è¯­è¨€çš„ç¼©å†™ï¼ˆä¾‹å¦‚ï¼Œ`eng` è¡¨ç¤ºè‹±è¯­ï¼Œ`chi_sim` è¡¨ç¤ºç®€ä½“ä¸­æ–‡ï¼‰ã€‚

tessdataçš„GitHubåœ°å€ï¼š[https://github.com/tesseract-ocr/tessdata](https://github.com/tesseract-ocr/tessdata)

![image-20241227185027622](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730017-1976357499.png)

ä¹Ÿå¯ä»¥çœ‹æˆ‘åé¢åˆ†äº«çš„GitHubï¼Œä¸€èˆ¬åªè¦ä¸­è‹±æ–‡å°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20241227185504978](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730076-1450207605.png)

å°†tessdataæ–‡ä»¶å¤¹æ”¾åœ¨x64çš„Debugç›®å½•ä¸‹å³å¯ã€‚

å…ˆæµ‹è¯•ä¸­æ–‡è¯†åˆ«æ•ˆæœï¼š

æµ‹è¯•å›¾ç‰‡1

![](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730091-251181949.png)

æµ‹è¯•å›¾ç‰‡2

![](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730001-2107054339.png)

æŸ¥çœ‹æ•ˆæœï¼š

![image-20241227155928432](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730081-1651063265.png)

**æ³¨æ„ğŸ“ğŸ“ğŸ“**

å¦‚æœä¸åŠ ä¸Šwindows\_cmd\_support\_utf8();

å°±ä¼šå‡ºç°ä¹±ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20241227160300511](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730125-333085352.png)

å¹¶ä¸æ˜¯Tesseractè¯†åˆ«ä¸­æ–‡æ•ˆæœä¸å¥½ï¼Œåªæ˜¯æ§åˆ¶å°é»˜è®¤æ²¡æ”¯æŒutf-8ç½¢äº†ã€‚

å†æ¥æµ‹è¯•ä¸€ä¸‹è‹±æ–‡ï¼š

æµ‹è¯•å›¾ç‰‡1

![](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730052-1079384972.png)

æµ‹è¯•å›¾ç‰‡2

![](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730110-330088012.png)

æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20241227190017513](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730148-1035987125.png)

**ç”ŸæˆDLL**

æµ‹è¯•æ²¡æœ‰é—®é¢˜ä¹‹åï¼Œç°åœ¨éœ€è¦ç”ŸæˆDLLæ–‡ä»¶ã€‚

å³é”®é¡¹ç›®ï¼Œç‚¹å‡»å±æ€§ï¼Œè®¾ç½®é…ç½®ç±»å‹ä¸ºDLLï¼š

![image-20241227190254191](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730083-453268042.png)

ç”Ÿæˆè§£å†³æ–¹æ¡ˆä¹‹åï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20241227190504150](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730033-2080829928.png)

è¿™é‡Œéœ€è¦ææ¸…æ¥šçš„æ˜¯ä¸ºä»€ä¹ˆå¤´æ–‡ä»¶ä¸ç”¨std::stringè€Œæ˜¯char\*å‘¢ï¼Ÿ

    #pragma once
    extern "C" __declspec(dllexport) char* getChineseText(const char* imagePath);
    extern "C" __declspec(dllexport) char* getEnglishText(const char* imagePath);
    extern "C" __declspec(dllexport) void freeMemory(char* ptr);
    

*   **`extern "C"`**ï¼šè¿™å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›å‡½æ•°åº”è¯¥æŒ‰ç…§Cè¯­è¨€çš„æ–¹å¼è¿›è¡Œé“¾æ¥ï¼Œè€Œä¸æ˜¯C++çš„æ–¹å¼ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿è¿™äº›å‡½æ•°åœ¨Cè¯­è¨€ä¸­ä¹Ÿå¯ä»¥è¢«æ­£ç¡®è°ƒç”¨ã€‚
*   ç®€å•çš„è¯´std::stringä¸æ˜¯Cè¯­è¨€é£æ ¼çš„ï¼Œæ‰€ä»¥ä¸è¡Œã€‚

åœ¨C#é¡¹ç›®ä¸­è°ƒç”¨C++ DLL
---------------

æ–°å»ºä¸€ä¸ªC#æ§åˆ¶å°é¡¹ç›®ç”¨äºæµ‹è¯•ã€‚

æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š

    using System.Runtime.InteropServices;
    
    class Program
    {
        [DllImport("TesseractApiTest.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        public static extern IntPtr getEnglishText(string imagePath);
    
        [DllImport("TesseractApiTest.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        public static extern IntPtr getChineseText(string imagePath);
    
    
        static void Main()
        {
            
    
            string imagePath = @"D:\SemanticKernel-Test2.png";
    
            // è°ƒç”¨ DLL ä¸­çš„å‡½æ•°
            IntPtr resultPtr = getChineseText(imagePath);
            if (resultPtr == IntPtr.Zero)
            {
                return;
            }
    
            string? result = Marshal.PtrToStringUTF8(resultPtr);
            return; ;
    
        }
    }
    

å°†é¡¹ç›®è®¾ç½®æˆX64å¹³å°ï¼Œå°†C++é¡¹ç›®çš„æ‰€æœ‰è¾“å‡ºæ–‡ä»¶ï¼Œå¤åˆ¶åˆ°X64çš„è¾“å‡ºç›®å½•è¿™é‡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20241227191524217](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730116-2074493614.png)

ä¸ºäº†é¿å…å¤ªæ··ä¹±ï¼Œæœ¬æ¥æƒ³æ–°å»ºä¸€ä¸ªLibsæ–‡ä»¶å¤¹ï¼Œåœ¨æ”¾è¿™äº›æ–‡ä»¶ï¼Œåœ¨è®¾ç½®ä¸ºåµŒå…¥çš„èµ„æºä¸å¦‚æœè¾ƒæ–°å°±å¤åˆ¶ï¼Œä½†æ˜¯å°±è°ƒç”¨ä¸äº†äº†ï¼Œæš‚æ—¶æ²¡æœ‰è§£å†³ï¼Œåªèƒ½è¿™æ ·ä¸€å †æ”¾åœ¨è¿™é‡Œäº†ã€‚

æ•ˆæœå¦‚ä¸‹ï¼š

![image-20241227191730397](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730079-975920089.png)

è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæ˜¯

      [DllImport("TesseractApiTest.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
      public static extern IntPtr getEnglishText(string imagePath);
    

è€Œä¸æ˜¯

      [DllImport("TesseractApiTest.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
      public static extern string getEnglishText(string imagePath);
    

åœ¨C#ä¸­ç›´æ¥ä½¿ç”¨ `string` ä½œä¸ºè¿”å›ç±»å‹å¹¶ä¸é€‚ç”¨äºä»C++å¯¼å‡ºçš„å‡½æ•°ï¼Œå°¤å…¶æ˜¯å½“è¯¥å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª `char*` ç±»å‹çš„æŒ‡é’ˆæ—¶ã€‚åŸå› åœ¨äº `char*` æ˜¯ä¸€ä¸ªæŒ‡å‘Cé£æ ¼å­—ç¬¦ä¸²çš„æŒ‡é’ˆï¼Œè€ŒC#ä¸­çš„ `string` ç±»å‹ä¸Cé£æ ¼å­—ç¬¦ä¸²å¹¶ä¸ç›´æ¥å…¼å®¹ã€‚C#çš„ `string` ç±»å‹æ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œè€Œ `char*` æ˜¯ä¸€ä¸ªéæ‰˜ç®¡çš„æŒ‡é’ˆï¼Œç›´æ¥è¿›è¡Œè½¬æ¢ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯æˆ–æ— æ³•é¢„æœŸçš„è¡Œä¸ºã€‚

ä½¿ç”¨ `IntPtr` ä½œä¸ºè¿”å›ç±»å‹å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º `IntPtr` æ˜¯ä¸€ä¸ªå¯ä»¥è¡¨ç¤ºéæ‰˜ç®¡æŒ‡é’ˆçš„ç±»å‹ã€‚ä½ å¯ä»¥é€šè¿‡ `Marshal` ç±»å°† `IntPtr` è½¬æ¢ä¸ºC#ä¸­çš„ `string`ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ä½ åœ¨C#ä¸­èƒ½å¤Ÿæ­£ç¡®å¤„ç†C++å‡½æ•°è¿”å›çš„å­—ç¬¦ä¸²æŒ‡é’ˆã€‚

TesseractOCR-GUIä¸­é›†æˆ
-------------------

ä¹‹å‰è·Ÿå¤§å®¶åˆ†äº«çš„TesseractOCR-GUIéœ€è¦åœ¨ç”µè„‘ä¸Šå®‰è£…Tesseractæ‰èƒ½ç”¨ï¼Œå› ä¸ºåªæ˜¯ç®€å•çš„å¯¹Tesseractçš„å‘½ä»¤è¡Œä½¿ç”¨åšäº†å°è£…ï¼Œç°åœ¨é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œä¸éœ€è¦å®‰è£…Tesseractä¹Ÿèƒ½ä½¿ç”¨äº†ã€‚

GitHubåœ°å€ï¼š[https://github.com/Ming-jiayou/TesseractOCR-GUIã€‚](https://github.com/Ming-jiayou/TesseractOCR-GUI%E3%80%82)

![image-20241227192409247](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730131-310354925.png)

git cloneåˆ°æœ¬åœ°ï¼Œç„¶åå°†å¹³å°è®¾ç½®æˆX64ï¼Œå…ˆç”Ÿæˆè§£å†³æ–¹æ¡ˆï¼Œç„¶åå°†Libsæ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹ï¼Œå…¨éƒ¨å¤åˆ¶åˆ°x64çš„è¾“å‡ºç›®å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20241227192607954](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730034-1492062934.png)

![image-20241227192639528](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730170-1679784172.png)

ç°åœ¨ç›´æ¥ç‚¹å‡»åº”è¯¥å°±å¯ä»¥ä½¿ç”¨äº†ï¼š

![image-20241227192803222](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730112-66324081.png)

æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20241227193007146](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730050-801989325.png)

![](https://img2024.cnblogs.com/blog/3288240/202412/3288240-20241227194730125-1076819534.gif)

é€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«çš„ï¼Œç›®å‰ä¸ºæ­¢æˆ‘ä»¬å°è¯•äº†TesseractOCRã€PaddleOCRã€VLMï¼Œå…¶ä¸­TesseractOCRæˆ‘æ„Ÿè§‰æ˜¯æœ€å¿«çš„ã€‚

ä»¥ä¸Šå°±æ˜¯æœ¬æœŸçš„åˆ†äº«å†…å®¹ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚

æ¨èé˜…è¯»ï¼š

[C#è°ƒç”¨C++ä»£ç ï¼Œä»¥OpenCVä¸ºä¾‹](https://mp.weixin.qq.com/s/6U_dWQxbOmWNzKrwt0RnFA)

[C#è°ƒç”¨Pythonè„šæœ¬çš„æ–¹å¼ï¼ˆä¸€ï¼‰ï¼Œä»¥PaddleOCR-GUIä¸ºä¾‹](https://mp.weixin.qq.com/s/A7-SbXyDOOd56JC9N7uOJg)

[C#è°ƒç”¨Pythonä»£ç çš„æ–¹å¼ï¼ˆäºŒï¼‰ï¼Œä»¥PaddleOCR-GUIä¸ºä¾‹](https://mp.weixin.qq.com/s/AnzbLyIH5cSMzaLdqWvjiA)

[VLM-OCR-Demoï¼šä¸€ä¸ªä½¿ç”¨VLMç”¨äºOCRä»»åŠ¡çš„ç¤ºä¾‹](https://mp.weixin.qq.com/s/Pfi8tL_N6hLuxZAKpRjQSA)

[TesseractOCR-GUIï¼šåŸºäºWPF/C#æ„å»ºTesseractOCRç®€å•æ˜“ç”¨çš„ç”¨æˆ·ç•Œé¢](https://mp.weixin.qq.com/s/t_C360h6AP9P4GfssZnkbA)

[ä½¿ç”¨Tesseractè¿›è¡Œå›¾ç‰‡æ–‡å­—è¯†åˆ«](https://mp.weixin.qq.com/s/C2o0-RtubtQb4pzys2wx6w)