---
layout: post
title: 'AI 代理的未来是事件驱动的'
date: "2025-03-18T00:37:53Z"
---
AI 代理的未来是事件驱动的
==============

AI 代理即将彻底改变企业运营，它们具备自主解决问题的能力、适应性工作流以及可扩展性。但真正的挑战并不是构建更好的模型。

代理需要访问数据、工具，并且能够在不同系统之间共享信息，其输出还需要能被多个服务（包括其他代理）使用。这不是一个 AI 问题，而是一个基础设施和数据互操作性的问题。它需要的不只是简单地把一连串命令拼接在一起，而是一个由数据流驱动的事件驱动架构（EDA）。

正如 HubSpot 的首席技术官 Dharmesh Shah 所说：“代理就是新的应用程序。” 要实现这一潜力，就必须从一开始就投资于正确的设计模式。本文将探讨为什么 EDA 是扩展代理并在现代企业系统中释放其全部潜力的关键。

要彻底理解为什么 EDA 对于 AI 的下一波发展至关重要，我们首先需要回顾 AI 迄今为止的演变过程。

**AI 的演进**

AI 经过了两个不同的阶段，现在正迈入第三阶段。前两个阶段虽然解锁了新的可能性，但也存在关键的局限性。

**第一波 AI：预测模型**

第一波 AI 围绕传统的机器学习展开，专注于狭义任务的预测能力。

![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012032611-1593689884.webp)

                                                            传统的机器学习工作流
    

构建这些模型需要大量的专业知识，因为它们是专门为特定的使用场景打造的。它们是领域特定的，这种领域特性深深嵌入在训练数据中，使得它们非常僵化，难以重新利用。要让一个模型适应新的领域，往往意味着要从头开始——这种方式缺乏可扩展性，也减缓了 AI 的普及。

**第二波 AI：生成式模型**

生成式 AI 由深度学习驱动，标志着 AI 发展的一次重大转折。

与第一波 AI 受限于单一领域不同，生成式模型是在庞大且多样化的数据集上训练的，使其能够跨多个场景进行泛化。它们可以生成文本、图像，甚至是视频，开启了令人兴奋的新应用。然而，这一波 AI 也带来了新的挑战。

生成式模型是固定在训练时间点的——它们无法融入新的或动态的信息，也很难进行调整。微调可以用来满足特定领域的需求，但这既昂贵又容易出错。微调需要大量数据、庞大的计算资源和机器学习专业知识，使得它在许多情况下并不现实。此外，由于大语言模型（LLMs）是基于公开数据训练的，它们无法访问领域特定的信息，因此在需要具体上下文的情况下，往往无法给出准确的回答。

比如，你让一个生成式模型推荐一款符合用户个人健康史、所在地和财务目标的保险产品。

![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012039746-1799397467.webp)

                                                              LLM 的简单提示与响应
    

在这个场景中，你向 LLM 提供一个提示，它生成一个响应。但显然，这个模型无法给出准确的推荐，因为它无法访问相关的用户数据。没有这些数据，模型的回答要么是泛泛而谈，要么就是完全错误的。

**复合 AI 弥合差距**

为了克服这些限制，复合 AI 系统将生成式模型与其他组件结合，比如程序化逻辑、数据检索机制和验证层。这种模块化设计让 AI 能够结合工具、提取相关数据，并调整输出，而静态模型无法做到这一点。

以保险推荐为例：

• 一个检索机制从安全数据库中提取用户的健康和财务数据。

• 这些数据被添加到提示（prompt）中，作为提供给 LLM 的上下文信息。

• LLM 使用这个组合后的提示，生成一个准确的响应。  
![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012048469-2108391459.webp)

                                                                      简单的 RAG 架构
    

这个过程被称为检索增强生成（RAG），它通过动态地将相关数据整合到模型的工作流中，弥补了静态 AI 在真实世界中的不足。

虽然 RAG 能有效处理这类任务，但它依赖于固定的工作流——这意味着每一种交互和执行路径都必须预先定义。这种刚性结构让它难以处理更复杂或更动态的任务，特别是当工作流无法被穷尽地编码时。手动编码所有可能的执行路径不仅耗时费力，而且最终会成为瓶颈。

固定流程架构的局限性催生了 AI 的第三波浪潮：智能代理系统（Agentic AI）。

**智能代理 AI 的崛起**

AI 已经走了很长一段路，但我们正在触及固定系统甚至 LLM 的极限。

Google 的 Gemini 似乎未能达到内部预期，尽管它的训练数据规模更大。类似的情况也出现在 OpenAI 的下一代 Orion 模型上。

Salesforce 的 CEO Marc Benioff 在《华尔街日报》的《未来一切》播客上表示，我们已经达到了 LLM 能力的上限。他认为未来属于自主智能代理——能够独立思考、适应和行动的系统，而不是像 GPT-4 这样的模型。

**代理带来了新的突破：动态、基于上下文的工作流。**

与固定流程不同，智能代理能够实时决定下一步该做什么，并根据当前情况灵活调整。这使得它们非常适合应对企业今天所面临的不可预测、相互关联的问题。  
![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012101901-340067086.webp)

                                                          控制逻辑：程序化 vs. 代理式
    

智能代理颠覆了传统的控制逻辑。

过去，固定的程序决定了 AI 的每一步操作。而现在，智能代理使用 LLM 来推动决策。它们可以推理、使用工具、访问记忆——一切都是动态进行的。这种灵活性让 AI 代理的工作流能够实时进化，使其比任何基于固定逻辑的系统都更加强大。

![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012108146-1206779517.webp)

                                                    代理架构（灵感来源：https://arxiv.org/pdf/2304.03442）
    

**设计模式如何塑造更智能的代理**

AI 代理的强大不仅仅来自它们的核心能力，还取决于设计模式，即它们的工作流和交互方式的结构。这些模式让代理能够处理复杂问题、适应不断变化的环境，并高效协作。

让我们来看看一些常见的设计模式，它们如何让 AI 代理更加高效。

反思：通过自我评估进行改进

反思 让智能代理能够评估自己的决策，在执行动作或提供最终响应之前优化输出。这种能力使代理能够发现并纠正错误，完善推理过程，并确保更高质量的结果。  
![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012116465-1382729089.webp)

                                                              代理的反思设计模式
    

**工具使用扩展代理的能力**

与外部工具进行交互可以扩展代理的功能，使其能够执行诸如数据检索、自动化流程或执行确定性工作流等任务。对于需要严格准确性的操作（如数学计算或数据库查询）来说，这一点尤为重要，因为精确性是不可妥协的。工具使用 弥合了灵活决策与可预测、可靠执行之间的鸿沟。

![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012130623-394871109.webp)

                                                              代理的工具使用设计模式
    

**规划将目标转化为行动**

具备规划能力的代理可以将高层次目标拆解为可执行的步骤，并按照逻辑顺序组织任务。这种设计模式对于解决多步骤问题或管理具有依赖关系的工作流至关重要。

![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012141279-1828139720.webp)

                                                              代理的规划设计模式
    

**多代理协作：模块化思维**

多代理系统 采用模块化方法来解决问题，通过分配特定任务给专门的代理，使整个系统更加灵活。例如，可以使用小型语言模型（SLMs） 来处理特定任务，以提高效率并简化内存管理。模块化设计的优势在于，它可以让每个代理专注于自己的特定任务，从而降低复杂性。

一个相关的技术是 专家混合模型（MoE），它在单一框架内使用多个专门子模型（即“专家”）。类似于多代理协作，MoE 会动态地 将任务分配给最相关的专家，以优化计算资源并提升性能。无论是让多个代理独立工作，还是在一个统一模型中进行任务分流，这两种方法的核心理念都是模块化和专业化。

就像传统的系统设计一样，将问题拆分成模块化组件可以使其更容易维护、扩展和适应变化。通过协作，这些专业化的代理 可以共享信息、划分责任，并协调行动，以更高效地解决复杂问题。

![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012151584-646212974.webp)

                                                            代理的多代理协作设计模式
    

简而言之，代理不仅仅是执行工作流，而是在重塑我们对工作流的思考方式。它们是构建可扩展、可适应 AI 系统的下一步——突破了传统架构和当前 LLM 的限制。

**智能代理 RAG：自适应和上下文感知的检索**

智能代理 RAG 让 RAG（检索增强生成）更加动态和上下文驱动。不同于依赖固定工作流，代理可以实时 确定它们需要的数据、在哪里获取，以及如何根据任务调整查询方式。这种灵活性使得智能代理 RAG 能够很好地处理复杂、多步骤的工作流，并具备良好的适应性。

举个例子，一个用于创建市场营销策略的代理可能会：

• 先从 CRM 中提取客户数据；

• 使用 API 获取市场趋势；

• 随着新信息的出现，不断调整策略。

通过保持上下文（memory） 并迭代优化查询，代理可以生成更准确、更相关的输出。智能代理 RAG 结合了检索、推理和行动，突破了传统 RAG 的局限性。  
![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012201541-1103256417.webp)

                                                                智能代理 RAG 设计模式
    

**扩展智能代理的挑战**

无论是单个智能代理，还是协作系统，要想扩展，关键在于它们是否能够轻松访问和共享数据。智能代理需要从多个来源（包括其他代理、工具和外部系统）收集信息，以便做出决策并采取行动。  
![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012210038-186390703.webp)

                                                                 单代理依赖关系图
    

连接代理与它们所需的工具和数据，本质上是一个分布式系统问题。

这一挑战类似于微服务架构，其中各个组件必须高效通信，同时又不能造成瓶颈或形成僵化的依赖关系。

和微服务一样，代理必须高效通信，并确保它们的输出能够被整个系统使用。

此外，代理的输出不仅仅是反馈回 AI 应用本身——它们还需要流向更广泛的关键系统，比如数据仓库、CRM、CDP（客户数据平台）和客户成功管理平台。

当然，你可以通过RPC（远程过程调用）和 API 来连接代理和工具，但这会导致高度耦合的系统。紧耦合系统难以扩展、适应变化，也很难支持多个数据消费者。

智能代理需要的是灵活性。

它们的输出必须能够无缝流入 其他代理、服务和平台，而不会将整个架构锁定在僵化的依赖关系中。

解决方案是什么？

通过事件驱动架构实现松耦合。

事件驱动架构（EDA） 是智能代理能够共享信息、实时行动，并与更广泛的生态系统集成 的核心——而不必承受紧耦合系统带来的麻烦。

**事件驱动架构：入门指南**

在早期，软件系统是单体结构的。所有东西都集中在一个紧密集成的代码库里。虽然构建起来简单，但随着系统的增长，单体架构变成了一场噩梦。

扩展是一种笨拙的操作：即使只需要扩展其中某个部分，也不得不扩展整个应用。这种低效导致了系统臃肿，架构脆弱，无法应对增长。

微服务改变了这一切。

通过将应用拆分成更小、可独立部署的组件，团队可以在不影响整个系统的情况下扩展和更新特定部分。但这又带来了一个新挑战：这些小服务之间如何高效通信？

如果我们通过直接的 RPC 或 API 调用连接这些服务，就会形成一个庞大的依赖关系网。如果某个服务宕机，就会影响到整个路径上的所有节点。

![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012221261-1453423123.webp)

                                                    紧耦合的微服务
    

事件驱动架构（EDA）解决了这个问题。

EDA 不是采用紧耦合的同步通信，而是让组件通过事件异步通信。服务不会相互等待——它们会对实时发生的事情做出反应。  
![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012228654-1890559364.webp)

                                                      事件驱动架构
    

这种方式让系统更加弹性和适应性强，使其能够应对现代工作流的复杂性。这不仅仅是一个技术突破，更是一个系统在压力下的生存策略。

**早期社交巨头的兴衰**

像 Friendster 这样的早期社交网络的兴衰，凸显了可扩展架构的重要性。Friendster 早期吸引了大量用户，但他们的系统无法承受这样的需求。性能问题导致用户流失，最终平台失败。

反观 Facebook，它的成功不仅仅靠功能，还在于其对可扩展基础设施的投资。它没有在成功的重压下崩溃，反而崛起成为行业巨头。

今天，我们可能会在 AI 代理领域看到类似的故事重演。

就像早期的社交网络一样，AI 代理也会经历快速增长和广泛应用。构建代理本身是不够的，真正的问题是——你的架构是否能处理分布式数据、工具集成和多代理协作的复杂性？如果没有合适的基础，AI 代理的技术栈可能会像那些早期社交媒体平台一样崩溃。

**未来是事件驱动的 AI 代理**

AI 的未来不仅仅是构建更智能的代理，而是打造能够随着技术发展而进化和扩展的系统。

AI 技术栈和底层模型正在迅速变化，过于僵化的设计很快就会成为创新的障碍。为了跟上节奏，我们需要优先考虑灵活性、适应性和无缝集成的架构。EDA 正是这一未来的基础，使代理能够在动态环境中茁壮成长，同时保持弹性和可扩展性。

**代理作为具有信息依赖关系的微服务**

代理和微服务类似：它们是自主的、解耦的，能够独立处理任务。但代理走得更远。

微服务通常处理离散的操作，而代理依赖共享的、上下文丰富的信息来推理、决策和协作。这对依赖管理和实时数据流提出了独特的要求。

比如，一个代理可能需要从 CRM（客户关系管理系统）获取客户数据，分析实时数据，再调用外部工具——同时与其他代理共享最新信息。这些交互需要一个既能保持代理独立运作，又能流畅交换关键信息的系统。

EDA 通过充当数据的“中央神经系统”来解决这一挑战。它允许代理以异步方式广播事件，确保信息可以动态流动，而不会形成刚性依赖。这样，代理既能自主运作，又能无缝集成到更广泛的工作流和系统中。  
![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012238666-1792790291.webp)

                                                                      AI 代理的事件驱动架构
    

**解耦，同时保持上下文**

构建灵活的系统，并不意味着要牺牲上下文。传统的紧耦合设计通常会把工作流绑定到特定的流程或技术上，迫使团队在瓶颈和依赖关系中挣扎。架构栈中的一个小变动，就可能影响整个系统，拖慢创新和扩展的步伐。

EDA 消除了这些限制。通过解耦工作流并启用异步通信，EDA 让 AI 代理、数据源、工具和应用层能够独立运作。

以当今的 AI 技术栈为例：

• MLOps 团队管理像 RAG（检索增强生成）这样的数据管道

• 数据科学家选择模型

• 应用开发者构建界面和后端

如果采用紧耦合设计，这些团队就会陷入不必要的相互依赖，导致交付变慢，并难以适应新工具和技术的变化。

相比之下，事件驱动系统确保工作流保持松耦合，让每个团队都能独立创新。

应用层不需要了解 AI 内部的工作原理——只需要在需要的时候消费结果。而且，这种解耦还能防止 AI 见解被孤立。代理的输出可以无缝集成到 CRM、CDP（客户数据平台）、分析工具等系统中，形成一个统一且可适应的生态系统。

**使用事件驱动架构扩展 AI 代理**

EDA 是这一代理系统转型的核心支柱。

它的解耦能力和实时通信机制，确保代理可以高效扩展。正如这里所讨论的，像 Kafka 这样的平台完美体现了 EDA 在代理驱动系统中的优势：

• 水平扩展：Kafka 的分布式设计支持新增代理或消费者，而不会形成瓶颈，确保系统能无缝扩展。

• 低延迟：实时事件处理让代理能立即响应变化，确保快速可靠的工作流。

• 松耦合：通过 Kafka 主题进行通信，而不是直接依赖，代理能够保持独立和可扩展性。

• 事件持久化：可靠的消息存储机制确保数据不会在传输过程中丢失，对于高可靠性工作流至关重要。

![](https://img2024.cnblogs.com/blog/3524016/202503/3524016-20250318012248262-1586814966.webp)

                                                        代理作为实时流处理平台上的事件生产者和消费者
    

数据流处理让数据能够在整个业务中持续流动。一个“中央神经系统”可以作为实时数据流的统一支柱，连接不同的系统、应用和数据源，使代理能够高效通信和决策。

这一架构与 Anthropic 的 Model Context Protocol（MCP） 等框架天然契合。

MCP 提供了一个通用标准，让 AI 系统能够安全、无缝地访问外部工具、数据源和应用，确保始终获取最新信息。MCP 通过简化这些连接，减少了开发成本，同时实现了上下文感知的决策能力。

EDA 解决了 MCP 试图应对的诸多挑战。MCP 需要无缝访问多样化的数据源、实时响应变化，并具备可扩展性，以支持复杂的多代理工作流。通过解耦系统并启用异步通信，EDA 让代理能够在不形成刚性依赖的情况下消费和生产事件，从而简化集成。

**事件驱动代理将定义 AI 的未来**

AI 领域正在迅速发展，而架构也必须随之进化。

企业已经做好准备。Forum Ventures 的调查发现，48% 的高级 IT 领导者已准备好将 AI 代理整合到运营中，其中 33% 表示他们“非常准备”。这清楚地表明，市场对可扩展、能处理复杂性的系统有明确需求。

EDA 是构建灵活、弹性、可扩展的代理系统的关键。它解耦了组件，使工作流实时化，并确保代理能够无缝集成到更广泛的生态系统中。

那些采用 EDA 的企业不仅能生存下来，还能在这场 AI 创新浪潮中占据竞争优势。而其他人？他们可能会因无法扩展而被淘汰。