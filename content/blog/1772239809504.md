---
layout: post
title: '计算机基础百科-IP地址是什么？MAC地址是什么？它们如何协同工作？'
date: "2026-02-28T00:50:09Z"
---
计算机基础百科-IP地址是什么？MAC地址是什么？它们如何协同工作？
==================================

在互联网早已普及的今天，即便是不懂技术的普通用户，也大多听说过“IP地址”这个词。而如果你对电脑稍微有点研究，或是亲手设置过家里的路由器，那么像MAC地址、子网掩码、DNS这些概念，想必也不会陌生，或许你还修改，配置过这些东西。

这些概念到底是什么？为什么我们的网络需要这些东西？下面我将用通俗易懂的方式带你了解这些概念，这不会让你成为什么技术高手，但至少可以让你在设置家庭路由器的时候，知道自己在干什么。也能让你在工作中涉及一些IP计算时，不必去找一些计算小工具。

如何在茫茫“网”海中找到你？——寻址的艺术
---------------------

当我们说IP地址，既然叫地址，便意味着这是一个目标，我们要找的目标，为什么要定义这样一个目标呢————为了通信。

当我们谈及网络通信，核心目标只有一个：**准确地找到对方**，**并把信息传递过去**。

通信，听起来是个非常宏大的词，但它本质上和我们日常的交流并无不同。无论是两个人面对面聊天（一对一、双向）、老师在教室里讲课（一对多、单向），还是三五好友之间的闲聊，都是通信的具体形式。

又比如古代的烽火狼烟；军事中的旗语，手势，号角声；交通中的手势，旗语，红绿灯……都是通信。

然而，在日常生活里，我们往往忽略了通信中一个非常关键的步骤——**寻址**。

因为目标通常就在我们眼前，或者我们默认知道他在哪儿。但请你设想这样一个场景：你要去找一个远方的朋友。在出发之前，就必须先明确两个最基本的问题：

*   **他是谁？**
    
    > 你要确认他的身份。这里面包含了大量我们常常忽略的信息，例如样貌，声音，身高，发型，服装……等。又比如他有双胞胎兄弟，单凭长相可能难以区分，你还需要更多特征（比如今天穿了什么衣服，或者其他细节特征）来锁定唯一的目标。
    > 
    > 如果失去以上信息？那这个人对你来说就是陌生人，你根本找不到他。
    
*   **他在哪？**
    
*   > 你要知道他的位置。如果你只知道一个人在“人民路”那肯定找不到他，因为全国很多城市都有人民路。你需要知道国家、城市、街道、甚至门牌号，哪个商店门口之类的信息，才能找到他。
    > 
    > 而对于你的朋友，你肯定知道了以上信息甚至更详细。
    

如上所述，我们仅仅是找一个人的过程，就隐含了大量的细节信息。如果这些信息模糊不清，我们就难以甚至不可能找到某个人。

因此在现实中，我们为了解决这个问题，构建了一套庞大的“寻址系统”：用姓名区分每个人，但远远不够，我们使用行政区划（省/市/县/街道）定位位置，还使用身份证号则提供了一个绝对唯一的标识，确保在任何情况下都不会搞错。

同样的，在一张庞大复杂的全球性网络——互联网中，计算机和设备也需要这样一套**寻址系统**，才能准确地找到彼此并交换数据。而其中，最重要、最广为人知的身份标识，就是我们要说的——**IP地址**。

开始讲解IP地址？不，我们先说说MAC地址。
----------------------

在深入探讨IP这个“**逻辑门牌号**”之前，我们先来认识一下设备在网络世界中那个与生俱来、独一无二的“身份证”——**MAC地址**。

MAC地址（Media Access Control Address），直译为介质访问控制地址。你可以把它理解为一台网络设备的“真名”或“指纹”。之所以说它“与生俱来”，是因为它通常在生产阶段就被烧录在网卡（Network Interface Card, NIC）的ROM（只读存储器）中，理论上在全球范围内是唯一的。因此，它也被称为硬件地址或物理地址。

这个唯一性是如何保证的呢？MAC地址是一个6字节（48位）的十六进制数，例如 00-16-EA-AE-3C-40。它的前3个字节（如00-16-EA）是“组织唯一标识符”（OUI），由电气和电子工程师协会（IEEE）分配给硬件制造商；后3个字节（如AE-3C-40）则由制造商自行分配，确保同一厂商生产的网卡地址不重复。当这块带有唯一MAC地址的网卡插入你的电脑，你的电脑在网络二层（数据链路层）的身份就被这个地址所代表。

既然MAC地址是全球唯一的，那我们是否可以只用它来标识和寻找世界上的任何一台设备，实现全球通信呢？

**答案是不能，而且完全不行。**

> “名字指出我们所要寻找的那个资源，地址指出那个资源在何处，路由告诉我们如何到达该处。​”
> 
> ——\[SHOC78\]

这句名言精准地道出了问题的核心：MAC地址本质上只是一个“名字”，而非“地址”。它只能告诉你“我是谁”，却无法告诉你“我在哪”。  
设想以下几个场景，你就能明白它的局限性：

**MAC地址不具有位置信息**： 你的笔记本电脑从南京的家带到北京的办公室，只要没有更换内置的无线网卡，它的MAC地址就没有任何变化。但从网络的角度看，它已经从南京的局域网“跳”到了北京的局域网，地理位置和网络位置都发生了巨大的改变。MAC地址本身无法反映这种变化。

**MAC地址难以记忆和规划**： 像 00-16-EA-AE-3C-40 这样一串毫无规律的十六进制数字，人类几乎无法记忆。如果全球网络只靠MAC地址寻址，那就像一个国家没有省市县和街道名，只有几十亿个无序的身份证号一样，根本无法进行有效的管理和路由规划。

**MAC地址的通信范围有限**： 在TCP/IP网络模型中，基于MAC地址的通信（通常称为“二层通信”）只在同一个局域网内有效。当数据需要跨越不同的网络（比如从你家到百度服务器）时，MAC地址只在每个独立的局域网段内起作用，负责将数据从一个设备或网络节点，传递给下一个设备或节点。

那么，MAC地址到底有什么用呢？它最重要的作用，是在你通过IP地址定位到目标所在的网络后，**在本地网络内进行最终的、精确的设备“交付”。**

打个比方：你要寄一封信给远方的朋友。

*   **IP地址**。 就像是“中国·XX市·XX区·xx路xx号”，它指引你的信穿越千山万水，最终到达正确的邮局（目标所在的局域网）。
    
*   **MAC地址**。 则像是写在信封上的“xxx（收）”。当信到达正确的邮局后，邮递员（类似于交换机）会依据这个收件人姓名（MAC地址），在小区内（本地网络）准确地找到你的朋友，把信交到他本人手上。
    

简单总结一下，你可以这么理解：**IP是用来定位的，MAC是用来真正传送送数据的。**

*   IP用于定位（三层，路由）： 解决“**你在哪**个网络”的问题，负责数据包的跨网络传输。
    
*   MAC用于交付（二层，交换）： 解决“在这个网络里**你是谁**”的问题，负责在同一个网络内将数据帧准确送达目标设备。
    

对于MAC地址，通常我们不需要了解太多，你仅需知道以下几点即可：

1.  它有6字节，共6\*8bit=48位。
2.  MAC地址通常用12位16进制来表示，例如：`00-16-EA-AE-3C-40`或`00:16:EA:AE:3C:40`。
3.  MAC地址全球唯一，可以标识一台设备。
4.  MAC地址可以让你确认唯一目标，前提是你找到它在哪。
5.  通常我们说的MAC帧是**以太网V2标准**。
6.  MAC帧中的“类型字段”（Type）指明了上一层（网络层）使用的是何种协议，`0x0800=IPv4`,`0x0806=ARP`,`0x8100=VLAN标签`,`0x8847/0x8848 MPLS`……
7.  有效的MAC帧长度为64～1518。
8.  通常的，我们说二层，二层通信，就是说的MAC地址这个层面。
9.  通常的，MAC通信本质是 **交换**。
10.  每个接口/网卡都有自己的MAC地址。所以“一个设备可能拥有多个MAC地址”。

IP地址——你在网络世界的门牌号
----------------

如果说MAC地址是设备与生俱来的“真名”，那么IP地址就是它在网络世界中的“居住地址”或“门牌号”。

正如前文所述，MAC地址虽然全球唯一，但它无法提供位置信息。在浩瀚的互联网中，如果我们只知道一个设备的MAC地址，就像只知道一个人的名字和身份证号，却没有他的住址一样，根本无从寄送信件。

**IP地址（Internet Protocol Address）** 的出现就是为了解决“定位”问题。它是一个逻辑地址，意味着它是可变的、可规划的，由网络管理员或网络协议（如DHCP）动态或静态地分配给设备。它精确地指明了两个关键信息：

*   你在哪个网络？ （网络部分）
*   你是这个网络里的哪台设备？ （主机部分）

这种`网络+主机`的两层结构，是整个IP寻址体系的核心思想。它让互联网可以像现实世界的邮政系统一样运作：先根据“网络部分”将数据包送到正确的目标网络，再根据“主机部分”将数据包目标设备。

> 通常意义下，你可以这么理解，MAC通信是二层的，是**交换**。IP通信是三层的，是**路由**。

### 协议簇中的IP

需要明确的是，“IP”这个词，不仅仅指代IP地址。它是网际协议（Internet Protocol） 的缩写，是TCP/IP协议簇中最核心的协议之一（另一个核心协议是TCP）。它定义了一套规则，规定了数据包如何在网络上进行封装、寻址和传输。

与IP协议配套工作的还有几个关键协议，它们共同构成了IP层的基础设施：

*   **地址解析协议（ARP，Address Resolution Protocol）**：我们已经介绍过，负责将IP地址解析为MAC地址。
*   **网际控制报文协议（ICMP，Internet Control Message Protocol）**：用于在IP网络环境中传递错误报告和诊断信息。你常用的 ping 和 tracert 命令，就是基于ICMP协议工作的。
*   **网际组管理协议（IGMP，Internet Group Management Protocol）**：用于管理多播（一对多通信）组成员关系。

### IPv4与IPv6

IP地址有两个主要版本，目前我们正处于从IPv4向IPv6过渡的时期。

*   **IPv4**：是目前最广泛使用的版本。它是一个32位的二进制数，为了方便人类记忆和输入，通常被写成4个十进制数，中间用点隔开，例如 192.168.1.1。这种表示法称为点分十进制。理论上，IPv4可以提供约43亿个（\\(2^{32}\\)）独立地址。
*   **IPv6**：为了解决IPv4地址耗尽问题而设计。它是一个128位的二进制数，采用十六进制表示，例如 2001:0db8:85a3:0000:0000:8a2e:0370:7334。它的地址空间是IPv4的\\(2^{96}\\)倍，数量极其庞大，以至于有“可以为地球上的每一粒沙子分配一个IP地址”的说法。

> **一个重要的事实是**：
> 
> 欧洲网络协调中心（RIPE NCC）已于2019年11月25日宣布其最后的IPv4地址储备池完全耗尽。这意味着全球43亿个IPv4公网地址已分配完毕。虽然对我们普通用户来说，日常上网（通过NAT转换）感受不到这个变化，但在网络技术领域，这标志着全面向IPv6过渡的开始。事实上，全球IPv6流量早已超过IPv4——这主要得益于移动互联网的普及，移动网络从建设初期就全面支持IPv6，积累了庞大的用户基础。

为了方便理解，接下来的讨论将主要以 IPv4 为例。

### IP地址的编址方法的演进

IP地址的设计并非一成不变。为了更好地利用有限的地址空间，并提高网络规划的灵活性，其编址方法经历了三个主要阶段的演进。理解这个演进过程，有助于你从根本上明白子网掩码的作用和CIDR（无分类域间路由）的意义。

**1\. 分类的IP地址（固定掩码）**

这是IP地址最早的编址方法，在1981年就标准化了。它将IP地址空间划分为五个固定类别：A、B、C、D、E类。

*   结构：采用“网络号 + 主机号”的两级结构。**IP地址并不仅仅指明一个主机，而是还指明了主机所连接到的网络。**
*   特点：每一类地址的网络号和主机号所占的位数是固定的，由此也决定了其默认的子网掩码是固定的。
    *   A类：网络号占1个字节（8位），首位为0。默认掩码：255.0.0.0。适用于大型网络。
    *   B类：网络号占2个字节（16位），前两位为10。默认掩码：255.255.0.0。适用于中型网络。
    *   C类：网络号占3个字节（24位），前三位为110。默认掩码：255.255.255.0。适用于小型网络。
    *   D类：前四位为1110，用于多播（组播）通信。
    *   E类：前四位为1111，保留用于实验和未来用途。

这种分类方法简单明了，但存在一个致命缺陷：**地址利用率低，容易造成浪费**。例如，一个只需几百台设备的公司，申请一个C类地址（最多254台主机）可能不够用，但申请一个B类地址（最多65534台主机）又会导致大量IP地址被闲置。

目前，这种分类的编址方法**已经完全被淘汰，成为历史**。 但在一些大学课程或入门教材中，它仍被用作教学起点，因为它清晰地展示了“网络号-主机号”的原始设计思想。

**2\. 子网的划分**

为了解决分类IP地址浪费严重的问题，1985年引入了子网划分的标准。其核心思想是：向主机号“借用”若干位，作为“子网号”。

*   结构：将原有的两级结构“网络号 + 主机号”细化为三级结构：“网络号 + 子网号 + 主机号”。
    
*   特点：通过引入子网掩码来告知网络设备，IP地址中哪些位是网络号（包括子网号），哪些位是主机号。
    
*   意义：它允许将一个大的网络（如一个B类网络）内部划分成多个更小的、独立的子网，每个子网可以分配给不同的部门或区域，从而提高了IP地址的利用效率和管理灵活性。
    

**3\. 无分类域间路由CIDR**

1993年，随着互联网的爆炸式增长，一种更先进的编址方法——无分类域间路由（CIDR，Classless Inter-Domain Routing） 被提出，并迅速推广应用至今。

*   结构：它完全抛弃了A、B、C类的分类概念，重新回归到灵活的两级结构，但形式更为现代化：“网络前缀 + 主机号”。
*   特点：
    1.  消除分类：不再有A类、B类、C类的概念。网络前缀的长度可以是任意的（例如 /25，/26），完全由网络管理员根据实际需求决定。这使得IP地址的分配粒度大大细化，能近乎完美地匹配各种规模网络的需求。
        
    2.  路由聚合：这是CIDR最具革命性的优势。它允许将多个连续的小网络（网络前缀）合并成一个大的网络（用一个更短的前缀表示），从而在核心路由器的路由表中只用一条路由来代替原来的多条路由。这极大地缩小了路由表的规模，提高了路由器的查表转发效率，有效延缓了互联网路由系统的崩溃。
        

你现在在任何设备上配置IP地址时，看到的“子网掩码”一栏，正是CIDR时代的产物。它的写法（如 255.255.255.0）或前缀表示法（如 192.168.1.0/24），精确地定义了网络前缀和主机号的边界。这也是我们普通人在设置家庭网络、或者工作中涉及网络规划时，最需要理解和掌握的核心概念。

从分类IP，到子网划分，再到CIDR，IP地址的编址方法演进史，就是一部人类在有限资源下，通过不断精妙的抽象和设计，创造出更大灵活性和更高效率的技术发展史。理解了这段历史，你就能更好地把握住IP地址的本质——它不仅仅是一个数字，更是一套精巧的、用来管理整个互联网寻址空间的规则体系。

分类IP地址编址不再讲述，后面直接结合掩码，说下无类编码，这是实际工作中会用到的。

简单说下地址解析协议ARP
-------------

现在我们已经知道，在同一局域网内通信，最终必须依靠MAC地址。但应用程序和上层协议（如TCP/IP）通常只知道目标的IP地址。这就产生了一个问题：如何通过一个已知的IP地址，找到它对应的MAC地址？

这个关键的“翻译”工作，就由一个叫做 地址解析协议（ARP，Address Resolution Protocol） 的协议来完成。

你可以把ARP想象成小区物业办公室里的一张“住户名单”，上面记录着每户人家的门牌号（IP地址）和户主姓名（MAC地址）的对应关系。

每台设备都维护一张类似这样的表格，收到一个数据包且目标是自己是，会查找这个表格查找MAC地址，然后将数据发送。

IP地址

MAC地址

IP1

MAC 1

IP2

MAC 2

...

...

ARP的工作流程（以主机A向同一局域网内的主机B发送数据为例）：

*   查表： 主机A首先检查自己的 ARP缓存表。这张表就相当于物业的住户名单，里面存放着近期通信过的IP地址与MAC地址的对应关系。
*   广播询问： 如果缓存表中没有主机B的IP信息（名单上没有），主机A就会在局域网内发送一个 ARP请求广播包。这个广播包相当于在小区里大喊：“喂！谁家是 192.168.1.5（主机B的IP）这个门牌号？请告诉我你的户主名（MAC地址）！” 这个广播包会被局域网内的所有设备接收到。
*   单播回复： 所有设备收到广播后，都会检查自己的IP地址。只有主机B发现这个请求正是找自己的，于是它就会向主机A发送一个 ARP响应单播包，里面包含了自己的MAC地址。这就像被点到名的住户单独告诉物业人员：“我就是 192.168.1.5，我的户主名是 00-16-EA-AE-3C-40。”
*   更新缓存并通信： 主机A收到响应后，会将这个IP-MAC的对应关系记录到自己的ARP缓存表中，然后就可以用正确的MAC地址封装数据帧，开始通信了。

ARP缓存表的存在至关重要，它避免了每次通信前都要进行广播，大大提高了效率。这个表中的条目通常会在几分钟后自动过期（老化），以确保信息的准确性。

逆地址解析协议（RARP，Reverse Address Resolution Protocol） 是一个与ARP功能相反的古老协议，它用于已知MAC地址，向服务器请求自己的IP地址。这个协议如今已被更强大、更通用的动态主机配置协议（DHCP，Dynamic Host Configuration Protocol） 所取代。当你把设备设置为“自动获取IP地址”时，就是通过DHCP协议从路由器那里获得IP、子网掩码、DNS等所有必要信息的。

总而言之，MAC地址是设备的物理“真名”，IP地址是网络的逻辑“门牌”，而ARP协议则是维系两者关系的“翻译官”和“通讯录”。这三者共同构成了TCP/IP网络寻址体系的基础，确保了数据能够准确、高效地从世界任何一个角落，送达你的屏幕上。

写在最后
----

看到这里，你可能已经发现了，我们平时挂在嘴边的“IP地址”，其实只是网络世界里众多概念中的一个。它背后连着MAC地址、ARP协议、子网掩码、CIDR……这些名词听起来唬人，但拆开来看，无非就是一套“找路”和“认人”的规矩。

下次你在设置路由器、遇到网络故障、或者听到同事讨论“这个网段怎么划分”的时候，或许可以多想一层：哦，原来IP是在说“你在哪个小区”，MAC是在说“你是哪栋楼哪一户”，ARP就是那个帮你敲门问路的邻居。

当然，这篇文章讲的都是最基础的东西，很多地方做了简化——真正的网络世界里，还有NAT让你全家共用同一个公网IP，有DHCP替你自动分配地址省去手动配置的麻烦，有DNS把你敲下的“baidu.com”翻译成机器能懂的IP数字。这些概念，以后有机会可以再聊。

说到底，网络之所以能跑起来，靠的不是某个高深莫测的技术，而是一套又一套像这样朴素得有点笨拙的规则：你是谁、你在哪、怎么找到你、怎么把东西送到你手上。这些东西组合在一起，就成了我们每天都在用的互联网。

希望你读完这篇文章，下次面对那些网络设置界面时，能少一分茫然，多一分“我知道它在干什么”的笃定。

* * *

> 参考
> 
> 《计算机网络（第6版）》——谢希仁编著

原创声明：  
本文来自博客园，作者：[haosend](https://www.cnblogs.com/haosend/)，原文链接：[https://www.cnblogs.com/haosend/p/19643982](https://www.cnblogs.com/haosend/p/19643982)  
原创作品，版权归作者所有。  
转载未经作者同意，必须标注原文链接，并保留此段声明，否则保留追究法律责任的权利。