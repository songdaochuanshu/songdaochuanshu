---
layout: post
title: 'Javaå¹¶å‘ç¼–ç¨‹åˆ©å™¨ï¼šä»ConcurrentHashMapåˆ°Fork/Joinçš„å¥‡å¹»ä¹‹æ—…'
date: "2025-10-30T00:42:38Z"
---
Javaå¹¶å‘ç¼–ç¨‹åˆ©å™¨ï¼šä»ConcurrentHashMapåˆ°Fork/Joinçš„å¥‡å¹»ä¹‹æ—…
============================================

ä¸Šç¯‡è®²äº†Locké”ã€AQSç›¸å…³çš„å†…å®¹ï¼Œæœ¬ç¯‡è®²ä¸€ä¸‹çº¿ç¨‹å®‰å…¨çš„ç±»ï¼Œæ‹¿æ¥å³ç”¨æ— éœ€å…¶ä»–æ“ä½œå°±èƒ½è¾¾åˆ°çº¿ç¨‹å®‰å…¨çš„æ•ˆæœï¼ŒçœåŠ›åˆçœå¿ƒ ~ ~

> ä½ æ˜¯å¦æ›¾ä¸ºå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­çš„å„ç§å‘è€Œå¤´ç–¼ï¼Ÿæœ¬æ–‡å°†ç”¨ç”ŸåŠ¨æ¯”å–»å’Œå®ç”¨ä»£ç ï¼Œå¸¦ä½ è½»æ¾æŒæ¡Javaå¹¶å‘å®¹å™¨çš„ç²¾é«“ï¼Œè®©ä½ çš„å¤šçº¿ç¨‹ç¨‹åºæ—¢å®‰å…¨åˆé«˜æ•ˆï¼

å¼•è¨€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å¹¶å‘å®¹å™¨ï¼Ÿ
---------------

æƒ³è±¡ä¸€ä¸‹ä¼ ç»Ÿçš„è¶…å¸‚ç»“è´¦åœºæ™¯ï¼šåªæœ‰ä¸€ä¸ªæ”¶é“¶å°ï¼Œæ‰€æœ‰äººæ’æˆä¸€é˜Ÿï¼Œæ•ˆç‡ä½ä¸‹ã€‚è¿™å°±æ˜¯ä¼ ç»Ÿé›†åˆåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å†™ç…§ã€‚

è€Œç°ä»£å¹¶å‘å®¹å™¨å°±åƒ**æ‹¥æœ‰å¤šä¸ªæ”¶é“¶å°çš„æ™ºèƒ½è¶…å¸‚**ï¼š

*   å¤šä¸ªæ”¶é“¶å°åŒæ—¶å·¥ä½œ
*   æ™ºèƒ½åˆ†é…é¡¾å®¢åˆ°ä¸åŒé˜Ÿåˆ—
*   æ”¶é“¶å‘˜ä¹‹é—´äº’ç›¸ååŠ©

åœ¨Javaå¹¶å‘ä¸–ç•Œä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸‰å¤§æ³•å®ï¼š

1.  **ConcurrentHashMap** - æ™ºèƒ½åˆ†åŒºçš„å‚¨ç‰©æŸœç³»ç»Ÿ
2.  **ConcurrentLinkedQueue** - æ— é”çš„å¿«é€Ÿé€šé“
3.  **é˜»å¡é˜Ÿåˆ—** - æœ‰åè°ƒå‘˜çš„ç­‰å¾…åŒº
4.  **Fork/Joinæ¡†æ¶** - å›¢é˜Ÿåä½œçš„å·¥ä½œæ¨¡å¼

è®©æˆ‘ä»¬ä¸€ä¸€æ¢ç´¢å®ƒä»¬çš„é­”åŠ›ï¼

1\. ConcurrentHashMapï¼šæ™ºèƒ½åˆ†åŒºçš„å‚¨ç‰©æŸœç³»ç»Ÿ
--------------------------------

### 1.1 ä¼ ç»ŸMapçš„é—®é¢˜ï¼šç‹¬æœ¨æ¡¥çš„å›°å¢ƒ

    // ä¼ ç»ŸHashMapåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å°±åƒç‹¬æœ¨æ¡¥
    public class HashMapProblem {
        public static void main(String[] args) {
            Map<String, String> map = new HashMap<>();
            
            // å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œHashMapï¼Œå°±åƒå¤šäººåŒæ—¶è¿‡ç‹¬æœ¨æ¡¥
            // ç»“æœï¼šæœ‰äººæ‰æ°´é‡Œï¼ˆæ•°æ®ä¸¢å¤±ï¼‰ï¼Œæ¡¥å¡Œäº†ï¼ˆæ­»å¾ªç¯ï¼‰
        }
    }
    

### 1.2 ConcurrentHashMapçš„è§£å†³æ–¹æ¡ˆï¼šå¤šè½¦é“é«˜é€Ÿå…¬è·¯

**åˆ†æ®µé”è®¾è®¡**ï¼šæŠŠæ•´ä¸ªMapåˆ†æˆå¤šä¸ªå°åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸç‹¬ç«‹åŠ é”

    ConcurrentHashMapæ¶æ„ï¼š
        â”œâ”€â”€ åŒºåŸŸ1 (é”1) â†’ å‚¨ç‰©æŸœç»„1
        â”œâ”€â”€ åŒºåŸŸ2 (é”2) â†’ å‚¨ç‰©æŸœç»„2
        â”œâ”€â”€ åŒºåŸŸ3 (é”3) â†’ å‚¨ç‰©æŸœç»„3
        â””â”€â”€ ...
    

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š

*   å†™æ“ä½œåªé”ä½å¯¹åº”çš„åŒºåŸŸï¼Œå…¶ä»–åŒºåŸŸä»å¯è¯»å†™
*   è¯»æ“ä½œåŸºæœ¬ä¸éœ€è¦åŠ é”
*   å¤§å¤§æé«˜äº†å¹¶å‘æ€§èƒ½

### 1.3 å®æˆ˜ç¤ºä¾‹ï¼šé«˜æ€§èƒ½ç¼“å­˜ç³»ç»Ÿ

    /**
     * åŸºäºConcurrentHashMapçš„é«˜æ€§èƒ½ç¼“å­˜
     * åƒæ™ºèƒ½å‚¨ç‰©æŸœç³»ç»Ÿï¼Œæ”¯æŒé«˜å¹¶å‘å­˜å–
     */
    public class HighPerformanceCache<K, V> {
        private final ConcurrentHashMap<K, CacheEntry<V>> cache = 
            new ConcurrentHashMap<>();
        
        // è·å–æˆ–è®¡ç®—ç¼“å­˜å€¼ï¼ˆçº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆï¼‰
        public V getOrCompute(K key, Supplier<V> supplier) {
            return cache.computeIfAbsent(key, k -> 
                new CacheEntry<>(supplier.get())).getValue();
        }
        
        // æ‰¹é‡è·å–ï¼Œåˆ©ç”¨å¹¶å‘ç‰¹æ€§
        public Map<K, V> getAll(Set<K> keys) {
            Map<K, V> result = new HashMap<>();
            keys.forEach(key -> {
                CacheEntry<V> entry = cache.get(key);
                if (entry != null && !entry.isExpired()) {
                    result.put(key, entry.getValue());
                }
            });
            return result;
        }
    }
    

2\. ConcurrentLinkedQueueï¼šæ— é”çš„å¿«é€Ÿé€šé“
---------------------------------

### 2.1 æ— é”é˜Ÿåˆ—çš„é­”æ³•

ä¼ ç»Ÿé˜Ÿåˆ—å°±åƒåªæœ‰ä¸€ä¸ªå…¥å£çš„éš§é“ï¼Œæ‰€æœ‰è½¦è¾†å¿…é¡»æ’é˜Ÿã€‚è€ŒConcurrentLinkedQueueå°±åƒ**å¤šå…¥å£çš„ç«‹ä½“äº¤é€šæ¢çº½**ï¼š

    // æ— é”é˜Ÿåˆ—çš„ç”ŸåŠ¨ç†è§£
    public class LockFreeQueueAnalogy {
        public void trafficHubComparison() {
            // ä¼ ç»Ÿé˜»å¡é˜Ÿåˆ—ï¼šå•å…¥å£éš§é“ï¼Œç»å¸¸å µè½¦
            // ConcurrentLinkedQueueï¼šç«‹ä½“äº¤é€šæ¢çº½ï¼Œå¤šå…¥å£åŒæ—¶é€šè¡Œ
            // ç§˜å¯†æ­¦å™¨ï¼šCASï¼ˆCompare-And-Swapï¼‰ç®—æ³•
        }
    }
    

### 2.2 CASï¼šä¼˜é›…çš„ç«äº‰è§£å†³

CASå°±åƒç¤¼è²Œçš„è¯¢é—®ï¼š

    public class PoliteInquiry {
        public void casAnalogy() {
            // ä¼ ç»ŸåŠ é”ï¼šåƒæŠ¢åº§ä½ï¼Œè°å…ˆååˆ°å°±æ˜¯è°çš„
            // CASæ— é”ï¼šåƒç¤¼è²Œè¯¢é—®"è¿™ä¸ªåº§ä½æœ‰äººå—ï¼Ÿ"
            // å¦‚æœæ²¡äººå°±åä¸‹ï¼Œæœ‰äººå°±æ‰¾ä¸‹ä¸€ä¸ªåº§ä½
        }
    }
    

### 2.3 å®æˆ˜ç¤ºä¾‹ï¼šé«˜å¹¶å‘ä»»åŠ¡å¤„ç†å™¨

    /**
     * åŸºäºConcurrentLinkedQueueçš„é«˜æ€§èƒ½ä»»åŠ¡å¤„ç†å™¨
     * åƒé«˜æ•ˆçš„å¿«é€’åˆ†æ‹£ä¸­å¿ƒ
     */
    public class HighPerformanceTaskProcessor {
        private final ConcurrentLinkedQueue<Runnable> taskQueue = 
            new ConcurrentLinkedQueue<>();
        
        // æäº¤ä»»åŠ¡ - æ— é”æ“ä½œï¼Œæé«˜ååé‡
        public void submit(Runnable task) {
            taskQueue.offer(task);  // åƒå¿«é€’æ”¾å…¥åˆ†æ‹£æµæ°´çº¿
            startWorkerIfNeeded();
        }
        
        // å·¥ä½œçº¿ç¨‹ - æ— é”è·å–ä»»åŠ¡
        private class Worker implements Runnable {
            public void run() {
                while (!Thread.currentThread().isInterrupted()) {
                    Runnable task = taskQueue.poll();  // åƒä»æµæ°´çº¿å–å¿«é€’
                    if (task != null) {
                        task.run();  // å¤„ç†ä»»åŠ¡
                    }
                }
            }
        }
    }
    

3\. é˜»å¡é˜Ÿåˆ—ï¼šæœ‰åè°ƒå‘˜çš„ç­‰å¾…åŒº
-----------------

### 3.1 é˜»å¡é˜Ÿåˆ—çš„å››ç§è¡Œä¸ºæ¨¡å¼

æƒ³è±¡é¤å…çš„å››ç§æ¥å¾…æ–¹å¼ï¼š

    public class RestaurantReception {
        public void fourBehaviors() {
            // 1. æŠ›å‡ºå¼‚å¸¸ - éœ¸é“çš„æœåŠ¡å‘˜
            //    "æ²¡ä½ç½®äº†ï¼èµ°å¼€ï¼"
            
            // 2. è¿”å›ç‰¹æ®Šå€¼ - ç¤¼è²Œçš„å‰å°  
            //    "æŠ±æ­‰ç°åœ¨æ²¡ä½ç½®ï¼Œæ‚¨è¦ä¸ç­‰ä¼šå„¿ï¼Ÿ"
            
            // 3. ä¸€ç›´é˜»å¡ - è€å¿ƒçš„é—¨ç«¥
            //    "è¯·æ‚¨åœ¨è¿™ç¨ç­‰ï¼Œæœ‰ä½ç½®æˆ‘é©¬ä¸Šå«æ‚¨"
            
            // 4. è¶…æ—¶é€€å‡º - ä½“è´´çš„ç»ç†
            //    "è¯·æ‚¨ç­‰å¾…10åˆ†é’Ÿï¼Œå¦‚æœè¿˜æ²¡ä½ç½®æˆ‘å¸®æ‚¨å®‰æ’å…¶ä»–é¤å…"
        }
    }
    

### 3.2 ä¸ƒç§é˜»å¡é˜Ÿåˆ—ï¼šä¸åŒçš„é¤å…é£æ ¼

Javaæä¾›äº†7ç§é˜»å¡é˜Ÿåˆ—ï¼Œæ¯ç§éƒ½æœ‰ç‹¬ç‰¹çš„"ç»è¥ç†å¿µ"ï¼š

#### ArrayBlockingQueueï¼šä¼ ç»Ÿå›ºå®šåº§ä½é¤å…

    // æœ‰10ä¸ªæ¡Œä½çš„é¤å…ï¼Œå…¬å¹³æ¨¡å¼
    ArrayBlockingQueue<String> restaurant = new ArrayBlockingQueue<>(10, true);
    

#### LinkedBlockingQueueï¼šå¯æ‰©å±•çš„è¿é”é¤å…

    // æœ€å¤§å®¹çº³1000äººçš„é¤å…
    LinkedBlockingQueue<Order> orderQueue = new LinkedBlockingQueue<>(1000);
    

#### PriorityBlockingQueueï¼šVIPè´µå®¾å…

    // æŒ‰å®¢æˆ·ç­‰çº§æœåŠ¡çš„è´µå®¾å…
    PriorityBlockingQueue<Customer> vipLounge = new PriorityBlockingQueue<>();
    

#### DelayQueueï¼šå»¶æ—¶ç”µå½±é™¢

    // ç”µå½±åˆ°ç‚¹æ‰èƒ½å…¥åœº
    DelayQueue<MovieScreening> schedule = new DelayQueue<>();
    

#### SynchronousQueueï¼šä¸€å¯¹ä¸€ä¼ çƒæ¸¸æˆ

    // ä¸å­˜å‚¨å…ƒç´ ï¼Œæ¯ä¸ªputå¿…é¡»ç­‰å¾…ä¸€ä¸ªtake
    SynchronousQueue<String> ballChannel = new SynchronousQueue<>(true);
    

### 3.3 å®æˆ˜ç¤ºä¾‹ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼

    /**
     * ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼çš„å®Œç¾å®ç°
     * åƒå·¥å‚çš„è£…é…æµæ°´çº¿
     */
    public class ProducerConsumerPattern {
        private final BlockingQueue<Item> assemblyLine;
        
        public ProducerConsumerPattern(int lineCapacity) {
            this.assemblyLine = new ArrayBlockingQueue<>(lineCapacity);
        }
        
        // ç”Ÿäº§è€…ï¼šåŸææ–™å…¥åº“
        public void startProducers(int count) {
            for (int i = 0; i < count; i++) {
                new Thread(() -> {
                    while (true) {
                        Item item = produceItem();
                        assemblyLine.put(item);  // æµæ°´çº¿æ»¡æ—¶ç­‰å¾…
                    }
                }).start();
            }
        }
        
        // æ¶ˆè´¹è€…ï¼šäº§å“å‡ºåº“
        public void startConsumers(int count) {
            for (int i = 0; i < count; i++) {
                new Thread(() -> {
                    while (true) {
                        Item item = assemblyLine.take();  // æµæ°´çº¿ç©ºæ—¶ç­‰å¾…
                        consumeItem(item);
                    }
                }).start();
            }
        }
    }
    

4\. Fork/Joinæ¡†æ¶ï¼šå›¢é˜Ÿåä½œçš„æ™ºæ…§
-----------------------

### 4.1 åˆ†è€Œæ²»ä¹‹çš„å“²å­¦

Fork/Joinæ¡†æ¶çš„æ ¸å¿ƒç†å¿µï¼š**å¤§äº‹åŒ–å°ï¼Œå°äº‹å¹¶è¡Œï¼Œç»“æœæ±‡æ€»**

å°±åƒç¼–å†™ä¸€æœ¬å·¨è‘—ï¼š

*   **ä¼ ç»Ÿæ–¹å¼**ï¼šä¸€ä¸ªäººä»å¤´å†™åˆ°å°¾
*   **Fork/Joinæ–¹å¼**ï¼šåˆ†ç»™å¤šä¸ªä½œè€…åŒæ—¶å†™ä¸åŒç« èŠ‚ï¼Œæœ€åæ±‡æ€»

### 4.2 å·¥ä½œçªƒå–ç®—æ³•ï¼šèªæ˜çš„äº’åŠ©å›¢é˜Ÿ

    public class TeamWorkExample {
        public void workStealingInAction() {
            // åˆå§‹ï¼š4ä¸ªå·¥äººï¼Œæ¯äºº25ä¸ªä»»åŠ¡
            // å·¥äººAå…ˆå®Œæˆè‡ªå·±çš„ä»»åŠ¡
            // å·¥äººBè¿˜æœ‰10ä¸ªä»»åŠ¡æ²¡å®Œæˆ
            
            // å·¥ä½œçªƒå–ï¼šå·¥äººAä»å·¥äººBçš„ä»»åŠ¡åˆ—è¡¨"å·"ä»»åŠ¡å¸®å¿™
            // ç»“æœï¼šæ•´ä½“æ•ˆç‡æœ€å¤§åŒ–ï¼Œæ²¡æœ‰äººé—²ç€
        }
    }
    

### 4.3 å®æˆ˜ç¤ºä¾‹ï¼šå¹¶è¡Œæ•°ç»„æ±‚å’Œ

    /**
     * ä½¿ç”¨Fork/Joinå¹¶è¡Œè®¡ç®—æ•°ç»„å’Œ
     * åƒå›¢é˜Ÿåä½œå®Œæˆå¤§é¡¹ç›®
     */
    public class ParallelArraySum {
        
        static class SumTask extends RecursiveTask<Long> {
            private static final int THRESHOLD = 1000; // é˜ˆå€¼
            private final long[] array;
            private final int start, end;
            
            public SumTask(long[] array, int start, int end) {
                this.array = array; this.start = start; this.end = end;
            }
            
            @Override
            protected Long compute() {
                // å¦‚æœä»»åŠ¡è¶³å¤Ÿå°ï¼Œç›´æ¥è®¡ç®—
                if (end - start <= THRESHOLD) {
                    long sum = 0;
                    for (int i = start; i < end; i++) sum += array[i];
                    return sum;
                }
                
                // æ‹†åˆ†æˆä¸¤ä¸ªå­ä»»åŠ¡
                int mid = (start + end) / 2;
                SumTask leftTask = new SumTask(array, start, mid);
                SumTask rightTask = new SumTask(array, mid, end);
                
                // å¹¶è¡Œæ‰§è¡Œï¼šä¸€ä¸ªforkï¼Œä¸€ä¸ªå½“å‰çº¿ç¨‹æ‰§è¡Œ
                leftTask.fork();
                long rightResult = rightTask.compute();
                long leftResult = leftTask.join();
                
                return leftResult + rightResult;
            }
        }
        
        public static void main(String[] args) {
            long[] array = new long[1000000];
            Arrays.fill(array, 1L); // 100ä¸‡ä¸ª1
            
            ForkJoinPool pool = new ForkJoinPool();
            long result = pool.invoke(new SumTask(array, 0, array.length));
            
            System.out.println("è®¡ç®—ç»“æœ: " + result); // è¾“å‡º: 1000000
        }
    }
    

5\. æ€§èƒ½å¯¹æ¯”ä¸é€‰æ‹©æŒ‡å—
-------------

### 5.1 ä¸åŒåœºæ™¯çš„å·¥å…·é€‰æ‹©

ä½¿ç”¨åœºæ™¯

æ¨èå·¥å…·

ç†ç”±

é«˜å¹¶å‘ç¼“å­˜

ConcurrentHashMap

åˆ†æ®µé”ï¼Œè¯»å¤šå†™å°‘ä¼˜åŒ–

ä»»åŠ¡é˜Ÿåˆ—

ConcurrentLinkedQueue

æ— é”ï¼Œé«˜ååé‡

èµ„æºæ± ç®¡ç†

LinkedBlockingQueue

é˜»å¡æ“ä½œï¼Œæµé‡æ§åˆ¶

ä¼˜å…ˆçº§å¤„ç†

PriorityBlockingQueue

æŒ‰ä¼˜å…ˆçº§æ’åº

å»¶æ—¶ä»»åŠ¡

DelayQueue

æ”¯æŒå»¶æ—¶æ‰§è¡Œ

ç›´æ¥ä¼ é€’

SynchronousQueue

é›¶å­˜å‚¨ï¼Œç›´æ¥ä¼ é€’

å¹¶è¡Œè®¡ç®—

Fork/Joinæ¡†æ¶

åˆ†æ²»ç®—æ³•ï¼Œå·¥ä½œçªƒå–

### 5.2 æ€§èƒ½ä¼˜åŒ–è¦ç‚¹

    public class PerformanceTips {
        public void optimizationGuidelines() {
            // 1. åˆç†è®¾ç½®å®¹é‡ï¼šé¿å…é¢‘ç¹æ‰©å®¹æˆ–å†…å­˜æµªè´¹
            // 2. é€‰æ‹©åˆé€‚çš„é˜Ÿåˆ—ï¼šæ ¹æ®ä¸šåŠ¡ç‰¹æ€§é€‰æ‹©
            // 3. é¿å…è¿‡åº¦åŒæ­¥ï¼šèƒ½ç”¨æ— é”å°±ä¸ç”¨æœ‰é”
            // 4. æ³¨æ„å¼‚å¸¸å¤„ç†ï¼šå¹¶å‘ç¯å¢ƒä¸‹çš„å¼‚å¸¸ä¼ æ’­
            // 5. ç›‘æ§èµ„æºä½¿ç”¨ï¼šé¿å…å†…å­˜æ³„æ¼å’Œèµ„æºè€—å°½
        }
    }
    

6\. æœ€ä½³å®è·µæ€»ç»“
----------

### 6.1 è®¾è®¡åŸåˆ™

1.  **è§£è€¦ç”Ÿäº§æ¶ˆè´¹**ï¼šç”Ÿäº§è€…ä¸“æ³¨ç”Ÿäº§ï¼Œæ¶ˆè´¹è€…ä¸“æ³¨æ¶ˆè´¹
2.  **åˆç†è®¾ç½®è¾¹ç•Œ**ï¼šé˜²æ­¢èµ„æºè€—å°½ï¼Œä¿è¯ç³»ç»Ÿç¨³å®šæ€§
3.  **ä¼˜é›…å¤„ç†å¼‚å¸¸**ï¼šä¸èƒ½è®©ä¸€ä¸ªçº¿ç¨‹çš„å¼‚å¸¸å½±å“æ•´ä¸ªç³»ç»Ÿ
4.  **ç›‘æ§ä¸è°ƒä¼˜**ï¼šæ ¹æ®å®é™…è´Ÿè½½è°ƒæ•´å‚æ•°

### 6.2 å¸¸è§é™·é˜±ä¸è§„é¿

    public class CommonPitfalls {
        public void avoidTheseMistakes() {
            // âŒ é”™è¯¯ï¼šåœ¨å¹¶å‘å®¹å™¨ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ
            // âœ… æ­£ç¡®ï¼šå¿«é€Ÿå®Œæˆå®¹å™¨æ“ä½œï¼Œå¤æ‚é€»è¾‘å¼‚æ­¥å¤„ç†
            
            // âŒ é”™è¯¯ï¼šå¿½ç•¥å®¹é‡è¾¹ç•Œå¯¼è‡´å†…å­˜æº¢å‡º
            // âœ… æ­£ç¡®ï¼šåˆç†è®¾ç½®å®¹é‡ï¼Œä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—
            
            // âŒ é”™è¯¯ï¼šä¾èµ–size()åšä¸šåŠ¡åˆ¤æ–­
            // âœ… æ­£ç¡®ï¼šä½¿ç”¨ä¸“é—¨çš„çŠ¶æ€å˜é‡
            
            // âŒ é”™è¯¯ï¼šåœ¨Fork/Joinä»»åŠ¡ä¸­æ‰§è¡ŒIO
            // âœ… æ­£ç¡®ï¼šFork/Joinåªç”¨äºè®¡ç®—å¯†é›†å‹ä»»åŠ¡
        }
    }
    

ç»“è¯­ï¼šæŒæ¡å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯
------------

Javaå¹¶å‘å®¹å™¨å°±åƒç²¾å¿ƒè®¾è®¡çš„äº¤é€šç³»ç»Ÿï¼Œæ¯ç§å·¥å…·éƒ½åœ¨ç‰¹å®šåœºæ™¯ä¸‹å‘æŒ¥ç‹¬ç‰¹ä»·å€¼ï¼š

*   **ConcurrentHashMap**ï¼šæ™ºèƒ½çš„å¤šè½¦é“é«˜é€Ÿå…¬è·¯
*   **ConcurrentLinkedQueue**ï¼šæ— é”çš„ç«‹ä½“äº¤é€šæ¢çº½
*   **é˜»å¡é˜Ÿåˆ—**ï¼šæœ‰åè°ƒå‘˜çš„æ™ºèƒ½ç­‰å¾…åŒº
*   **Fork/Joinæ¡†æ¶**ï¼šå›¢é˜Ÿåä½œçš„åˆ†å¸ƒå¼å·¥ä½œæ¨¡å¼

æŒæ¡è¿™äº›å·¥å…·ï¼Œä½ å°±èƒ½æ„å»ºå‡ºæ—¢å®‰å…¨åˆé«˜æ•ˆçš„å¹¶å‘ç¨‹åºï¼ŒçœŸæ­£å‘æŒ¥å¤šæ ¸ç¡¬ä»¶çš„å¨åŠ›ã€‚è®°ä½ï¼š**åˆé€‚çš„å·¥å…·ç”¨åœ¨åˆé€‚çš„åœºæ™¯**ï¼Œè¿™æ‰æ˜¯å¹¶å‘ç¼–ç¨‹çš„çœŸè°›ã€‚

ç°åœ¨ï¼Œæ‹¿èµ·è¿™äº›åˆ©å™¨ï¼Œå¼€å§‹æ„å»ºä½ çš„é«˜æ€§èƒ½å¹¶å‘åº”ç”¨å§ï¼

* * *

**è¿›ä¸€æ­¥å­¦ä¹ **ï¼š

*   [Javaå¹¶å‘ç¼–ç¨‹å®æˆ˜](https://book.douban.com/subject/10484692/)
*   [Javaæ€§èƒ½æƒå¨æŒ‡å—](https://book.douban.com/subject/26740520/)
*   [å¹¶å‘ç¼–ç¨‹ç½‘](http://ifeve.com/)

_æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„å¹¶å‘ç¼–ç¨‹ç»éªŒå’Œé—®é¢˜ï¼_

â¤ï¸ å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç‚¹èµæ”¯æŒï¼ ğŸ‘ åŒæ—¶æ¬¢è¿å…³æ³¨æˆ‘çš„åšå®¢ï¼Œè·å–æ›´å¤šç²¾å½©å†…å®¹ï¼

æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š[ä½›ç¥–è®©æˆ‘æ¥å·¡å±±](https://www.cnblogs.com/sun-10387834/)ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š[https://www.cnblogs.com/sun-10387834/p/19171977](https://www.cnblogs.com/sun-10387834/p/19171977)