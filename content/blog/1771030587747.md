---
layout: post
title: 'AI Ã— åšå®¢å›­çš®è‚¤'
date: "2026-02-14T00:56:27Z"
---
AI Ã— åšå®¢å›­çš®è‚¤
==========

1\. å‰è¨€
------

åšå®¢å›­è‡ª 2004 å¹´ä¸Šçº¿ä»¥æ¥ï¼Œå‡­å€Ÿç€ç®€æ´çš„ç•Œé¢ã€æµ“åšçš„æŠ€æœ¯æ°›å›´æˆä¸ºäº†å›½å†…ç¨‹åºå‘˜çš„æ ¸å¿ƒåˆ›ä½œå¹³å°ä¹‹ä¸€ï¼Œè€Œçš®è‚¤å®šåˆ¶åˆ™æ˜¯åšå®¢å›­ç”¨æˆ·ä¸ªæ€§åŒ–è¡¨è¾¾çš„é‡è¦æ–¹å¼ã€‚ä»æ—©æœŸçš„çº¯ CSS æ ·å¼ä¿®æ”¹ï¼Œåˆ°åæ¥çš„ JS è„šæœ¬å¢å¼ºï¼Œåšå®¢å›­çš®è‚¤å¼€å‘çš„éœ€æ±‚ä¸æ–­å‡çº§ï¼Œä½†å¹³å°çš„åŸç”Ÿå¼€å‘æ¨¡å¼å´å§‹ç»ˆæ²¡æœ‰è·Ÿä¸Šå‰ç«¯æŠ€æœ¯çš„å‘å±•æ­¥ä¼ã€‚

åœ¨å‰ç«¯å·¥ç¨‹åŒ–ã€ç°ä»£åŒ–æ¡†æ¶ï¼ˆReact/Vueï¼‰ã€å®ç”¨å‹ CSS æ¡†æ¶ï¼ˆTailwind CSSï¼‰æˆä¸ºè¡Œä¸šä¸»æµï¼Œä¸” AI å¤§æ¨¡å‹æ·±åº¦èå…¥å‰ç«¯å¼€å‘çš„ä»Šå¤©ï¼Œåšå®¢å›­åŸç”Ÿçš„â€œæµè§ˆå™¨ç«¯ä¿®æ”¹ CSS/JS ç‰‡æ®µâ€çš„å¼€å‘æ¨¡å¼æ˜¾å¾—æ ¼æ ¼ä¸å…¥ï¼šç”¨æˆ·åªèƒ½åœ¨æµè§ˆå™¨ä¸­æ£€æŸ¥å…ƒç´ ã€ä¿®æ”¹æ ·å¼ï¼Œæ²¡æœ‰çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰ã€æ²¡æœ‰ç±»å‹æ ¡éªŒã€æ²¡æœ‰æ‰“åŒ…ä¼˜åŒ–ã€æ²¡æœ‰æ¨¡å—åŒ–ï¼Œæ— æ³•äº«å—ç°ä»£å‰ç«¯ä¾¿åˆ©ã€‚æ›´è®© AI å¤§æ¨¡å‹æ— æ³•æœ‰æ•ˆæ¥å…¥â€”â€”AI éš¾ä»¥è¯»å–åšå®¢å›­çš„åŸç”Ÿæ¨¡æ¿ã€‚

æ­£æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œæˆ‘åˆ›å»ºäº† **Tona**ã€‚Tona æ˜¯åŸºäº Monorepo æ¶æ„æ‰“é€ çš„ä¸€å¥—å®Œæ•´çš„åšå®¢å›­çš®è‚¤å¼€å‘å·¥å…·é“¾ã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯åº•å±‚åˆ°å®æˆ˜åº”ç”¨ï¼Œå…¨é¢ä»‹ç» Tona çš„è®¾è®¡ä¸å®ç°ï¼Œå¹¶ç»“åˆ AI å¤§æ¨¡å‹çš„èƒ½åŠ›ï¼Œæ‰“é€ ä¸€å¥— **AI Ã— Tona Ã— åšå®¢å›­çš®è‚¤**çš„ç°ä»£åŒ–å¼€å‘èŒƒå¼ï¼Œè®©æ¯ä¸€ä½å¼€å‘è€…éƒ½èƒ½å¿«é€Ÿå¼€å‘å‡ºé«˜è´¨é‡ã€å¯ç»´æŠ¤ã€ä¸ªæ€§åŒ–çš„åšå®¢å›­çš®è‚¤ï¼ŒåŒæ—¶äº«å— AI åä½œå¼€å‘çš„é«˜æ•ˆä¸ä¾¿æ·ã€‚

2\. åšå®¢å›­çš®è‚¤å¼€å‘çš„ç—›ç‚¹
--------------

åšå®¢å›­ä¸ºç”¨æˆ·æä¾›äº†**é¡µé¢å®šåˆ¶ CSS**ã€**åšå®¢ä¾§è¾¹æ å…¬å‘Š**ã€**é¡µè„š HTML ä»£ç **ã€**è‡ªå®šä¹‰ JS è„šæœ¬**ç­‰å…¥å£ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡ç¼–å†™ CSS/JS/HTML ç‰‡æ®µå®ç°çš®è‚¤å®šåˆ¶ï¼Œä½†è¿™ç§å¼€å‘æ¨¡å¼å­˜åœ¨å…­å¤§æ ¸å¿ƒç—›ç‚¹ï¼Œä¸¥é‡åˆ¶çº¦äº†å¼€å‘æ•ˆç‡å’Œçš®è‚¤è´¨é‡ï¼š

**ï¼ˆ1ï¼‰å¼€å‘ç¯å¢ƒç®€é™‹ï¼Œæ— ç°ä»£åŒ–å‰ç«¯å·¥ç¨‹åŒ–èƒ½åŠ›**

åšå®¢å›­çš„çš®è‚¤å¼€å‘å®Œå…¨ä¾èµ–**æµè§ˆå™¨ç«¯**ï¼šå¼€å‘è€…éœ€è¦å…ˆåœ¨åšå®¢å›­åå°ç¼–è¾‘ä»£ç ï¼Œä¿å­˜ååˆ·æ–°é¡µé¢æŸ¥çœ‹æ•ˆæœï¼Œæ²¡æœ‰**çƒ­æ›´æ–°ï¼ˆHMRï¼‰** èƒ½åŠ›ï¼Œä¿®æ”¹ä¸€è¡Œæ ·å¼éœ€è¦ç­‰å¾…é¡µé¢é‡æ–°åŠ è½½ï¼›æ²¡æœ‰æ‰“åŒ…å·¥å…·ï¼Œæ— æ³•å¯¹ JS/CSS è¿›è¡Œå‹ç¼©ã€æ ‘æ‘‡ã€æŒ‰éœ€åŠ è½½ï¼›æ²¡æœ‰æ¨¡å—ç³»ç»Ÿï¼Œæ— æ³•ä½¿ç”¨ ES6+çš„`import/export`ï¼Œåªèƒ½é€šè¿‡å…¨å±€å˜é‡å®ç°ä»£ç å¤ç”¨ï¼Œä»£ç å†—ä½™ä¸”éš¾ä»¥ç»´æŠ¤ã€‚

**ï¼ˆ2ï¼‰è°ƒè¯•éš¾åº¦å¤§ï¼Œæ— å®Œæ•´çš„è°ƒè¯•å·¥å…·é“¾**

åšå®¢å›­çš„åŸç”Ÿä»£ç è¿è¡Œåœ¨å¹³å°çš„å…¨å±€ç¯å¢ƒä¸­ï¼Œå¼€å‘è€…åªèƒ½é€šè¿‡æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·è¿›è¡Œç®€å•çš„å…ƒç´ æ£€æŸ¥å’Œæ–­ç‚¹è°ƒè¯•ï¼Œæ— æ³•ä½¿ç”¨ Viteã€Webpack ç­‰å·¥å…·çš„è°ƒè¯•èƒ½åŠ›ï¼Œä¹Ÿæ— æ³•å¯¹ä»£ç è¿›è¡Œå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼›åŒæ—¶ï¼Œåšå®¢å›­çš„åŸç”Ÿ HTML æ¨¡æ¿ä¸å¯ä¿®æ”¹ï¼Œå¼€å‘è€…éœ€è¦åœ¨å·²æœ‰ DOM ç»“æ„ä¸Šè¿›è¡Œæ ·å¼è¦†ç›–å’Œ JS æ“ä½œï¼ŒDOM ç»“æ„çš„ä¸ç¡®å®šæ€§è¿›ä¸€æ­¥å¢åŠ äº†è°ƒè¯•éš¾åº¦ã€‚

**ï¼ˆ3ï¼‰æŠ€æœ¯æ ˆå—é™ï¼Œæ— æ³•ä½¿ç”¨ç°ä»£åŒ–å‰ç«¯æ¡†æ¶ä¸å·¥å…·**

åšå®¢å›­åŸç”Ÿå¼€å‘ä»…æ”¯æŒåŸç”Ÿ CSS/JS/HTMLï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨ React/React/Vue ç­‰ç°ä»£åŒ–å‰ç«¯æ¡†æ¶ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨ Tailwind CSSã€UnoCSS ç­‰å®ç”¨å‹ CSS æ¡†æ¶ï¼›å³ä½¿å¼€å‘è€…é€šè¿‡æ‰‹åŠ¨å¼•å…¥æ¡†æ¶ CDN åŒ…å®ç°äº†éƒ¨åˆ†åŠŸèƒ½ï¼Œä¹Ÿä¼šé¢ä¸´å…¨å±€å˜é‡å†²çªã€æ‰“åŒ…ä½“ç§¯è¿‡å¤§ã€æ€§èƒ½ä¸ä½³ç­‰é—®é¢˜ï¼Œæ— æ³•å‘æŒ¥ç°ä»£åŒ–å·¥å…·çš„çœŸæ­£ä»·å€¼ã€‚

**ï¼ˆ4ï¼‰ä»£ç å¯ç»´æŠ¤æ€§å·®ï¼Œæ— æ¨¡å—åŒ–ä¸ç±»å‹å®‰å…¨**

ç”±äºæ²¡æœ‰æ¨¡å—ç³»ç»Ÿå’Œç±»å‹æ ¡éªŒï¼Œåšå®¢å›­çš®è‚¤çš„ä»£ç å¾€å¾€æ˜¯â€œé¢æ¡å¼ä»£ç â€ï¼šCSS æ ·å¼ç›¸äº’è¦†ç›–ï¼ŒJS å‡½æ•°å…¨å±€æŒ‚è½½ï¼ŒHTML ç‰‡æ®µé›¶æ•£åˆ†å¸ƒï¼›æ²¡æœ‰ TypeScript çš„ç±»å‹æ ¡éªŒï¼Œå¼€å‘è€…åœ¨ç¼–å†™ä»£ç æ—¶å®¹æ˜“å‡ºç°è¯­æ³•é”™è¯¯ã€å˜é‡åé”™è¯¯ç­‰é—®é¢˜ï¼Œä¸”é”™è¯¯åªèƒ½åœ¨è¿è¡Œæ—¶å‘ç°ï¼Œå¼€å‘æ•ˆç‡æä½ã€‚

**ï¼ˆ5ï¼‰å›¢é˜Ÿåä½œå›°éš¾ï¼Œæ— æ ‡å‡†åŒ–çš„å¼€å‘æµç¨‹**

åšå®¢å›­çš®è‚¤çš„å¼€å‘ä»¥ä¸ªäººä¸ºä¸»ï¼Œæ²¡æœ‰æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„ã€ä»£ç è§„èŒƒã€æäº¤è§„èŒƒï¼›ä»£ç ä¿å­˜åœ¨åšå®¢å›­åå°ï¼Œæ— æ³•é€šè¿‡ Git è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œä¹Ÿæ— æ³•è¿›è¡Œå›¢é˜Ÿåä½œå¼€å‘ï¼›åŒæ—¶ï¼Œæ²¡æœ‰ Lint å·¥å…·ã€Prettier å·¥å…·çš„ä»£ç æ ¼å¼åŒ–èƒ½åŠ›ï¼Œä¸åŒå¼€å‘è€…çš„ä»£ç é£æ ¼å·®å¼‚å¤§ï¼Œä»£ç åˆå¹¶ä¸ç»´æŠ¤å›°éš¾ã€‚

**ï¼ˆ6ï¼‰AI éš¾ä»¥æ¥å…¥ï¼Œæ— æ³•äº«å— AI å¤§æ¨¡å‹çš„å¼€å‘çº¢åˆ©**

è¿™æ˜¯æ–°æ—¶ä»£åšå®¢å›­çš®è‚¤å¼€å‘çš„æ ¸å¿ƒç—›ç‚¹ä¹‹ä¸€ã€‚AI å¤§æ¨¡å‹çš„æœ‰æ•ˆå¼€å‘éœ€è¦**æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„**ã€**å¯è®¿é—®çš„ä»£ç æ–‡ä»¶**ã€**æ¸…æ™°çš„æŠ€æœ¯è§„èŒƒ**ï¼Œè€Œåšå®¢å›­åŸç”Ÿå¼€å‘çš„ä»£ç ä»…å­˜åœ¨äºåšå®¢å›­åå°çš„é›¶æ•£ç‰‡æ®µä¸­ï¼ŒAI æ— æ³•è¯»å–åšå®¢å›­çš„åŸç”Ÿ HTML æ¨¡æ¿ã€æ— æ³•ç†è§£ä»£ç çš„ä¸Šä¸‹æ–‡ã€æ— æ³•ç”Ÿæˆç¬¦åˆè§„èŒƒçš„æ¨¡å—åŒ–ä»£ç ï¼Œæ›´æ— æ³•å‚ä¸å·¥ç¨‹åŒ–çš„å¼€å‘æµç¨‹ï¼Œè®©å¼€å‘è€…é”™å¤± AI å¼€å‘çš„çº¢åˆ©ã€‚

3\. Tonaï¼šæ¶æ„ã€æŠ€æœ¯æ ˆä¸å·¥ç¨‹åŒ–æµæ°´çº¿
----------------------

### 3.1 åšå®¢å›­çš®è‚¤å¼€å‘çš„ç°ä»£åŒ–è§£å†³æ–¹æ¡ˆ

flowchart TD A\[ä¼ ç»Ÿ CNBlogs å¼€å‘\] --> B\[æµè§ˆå™¨æ£€æŸ¥å…ƒç´ \] B --> C\[æ‰‹åŠ¨ä¿®æ”¹ CSS/JS\] C --> D\[ä¸Šä¼ è®¾ç½®ç•Œé¢æµ‹è¯•\] D --> E\[é‡å¤è°ƒè¯•ï¼Œæ•ˆç‡ä½\] F\[Tona å¼€å‘\] --> G\[pnpm create tona åˆå§‹åŒ–\] G --> H\[Vite æœ¬åœ°æœåŠ¡å™¨ + æ¨¡æ¿æ³¨å…¥\] H --> I\[çƒ­æ›´æ–° + AI ç”Ÿæˆä»£ç \] I --> J\[æ„å»ºæ‰“åŒ… + éƒ¨ç½²\] subgraph è§£å†³æ–¹æ¡ˆ F --> J end subgraph ç—›ç‚¹ A --> E end

Tona æ ¸å¿ƒå®šä½æ˜¯åšå®¢å›­ä¸“å±çš„æ¨¡å—åŒ–çš®è‚¤å¼€å‘å·¥å…·é“¾ï¼Œå…¶è®¾è®¡åˆè¡·å°±æ˜¯è§£å†³ä¸Šè¿°åšå®¢å›­åŸç”Ÿå¼€å‘çš„æ‰€æœ‰ç—›ç‚¹ã€‚Tona åŸºäº Monorepo æ¶æ„æ‰“é€ äº†ä¸€å¥—å®Œæ•´çš„çš®è‚¤å¼€å‘å·¥å…·é“¾ï¼ŒåŒ…å«å¯å¤ç”¨çš„æ ¸å¿ƒåŒ…ã€é¢„æ„å»ºçš„çš®è‚¤ã€å¯æ‰©å±•çš„æ’ä»¶ç³»ç»Ÿï¼ŒåŒæ—¶æ·±åº¦æ•´åˆ Vite ç”Ÿæ€ï¼Œå®ç°äº†åšå®¢å›­çš®è‚¤çš„æœ¬åœ°å¼€å‘ã€å·¥ç¨‹åŒ–æ„å»ºã€æ ‡å‡†åŒ–éƒ¨ç½²ã€‚

Tona çš„æ ¸å¿ƒè§£å†³æ–¹æ¡ˆå¯ä»¥æ€»ç»“ä¸ºä»¥ä¸‹äº”ç‚¹ï¼š

1.  **æœ¬åœ°å¼€å‘ç¯å¢ƒæ­å»º**ï¼šé€šè¿‡`tona-vite`æ’ä»¶å°†åšå®¢å›­çš„åŸç”Ÿ HTML æ¨¡æ¿æ³¨å…¥ Vite Dev Server ä¸­ï¼Œè®©å¼€å‘è€…å¯ä»¥åœ¨æœ¬åœ°è„±ç¦»åšå®¢å›­ç¯å¢ƒè¿›è¡Œçš®è‚¤å¼€å‘ï¼Œäº«å— Vite çš„çƒ­æ›´æ–°ã€è°ƒè¯•ã€æ‰“åŒ…ç­‰å·¥ç¨‹åŒ–èƒ½åŠ›ï¼›
2.  **ç°ä»£åŒ–æŠ€æœ¯æ ˆæ”¯æŒ**ï¼šåŸç”Ÿæ”¯æŒ TypeScriptã€Reactã€Tailwind CSS V4 ç­‰ç°ä»£åŒ–å‰ç«¯æŠ€æœ¯æ ˆï¼Œæä¾›äº†æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„å’Œä»£ç è§„èŒƒï¼Œè®©å¼€å‘è€…å¯ä»¥ä½¿ç”¨ç†Ÿæ‚‰çš„å·¥å…·å¼€å‘åšå®¢å›­çš®è‚¤ï¼›
3.  **æ¨¡å—åŒ–çš„æ ¸å¿ƒåŒ…ä½“ç³»**ï¼šå°†æ ¸å¿ƒèƒ½åŠ›æ‹†åˆ†ä¸º`tona-core`ã€`tona-hooks`ã€`tona-options`ã€`tona-utils`ç­‰å¤šä¸ªæ ¸å¿ƒåŒ…ï¼Œæ¯ä¸ªåŒ…è´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½ï¼Œå®ç°äº†åŠŸèƒ½çš„è§£è€¦ä¸å¤ç”¨ï¼ŒåŒæ—¶ä¹Ÿä¸º AI å¼€å‘æä¾›äº†æ ‡å‡†åŒ–çš„ APIï¼›
4.  **å·¥ç¨‹åŒ–çš„å¼€å‘æµç¨‹**ï¼šæä¾›äº†å®Œæ•´çš„å¼€å‘ã€æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒï¼Œé›†æˆäº† Vitestã€Biomeã€Stylelint ç­‰å·¥å…·ï¼Œå®ç°äº†ä»£ç çš„ Lintã€æ ¼å¼åŒ–ã€å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼ŒåŒæ—¶æ”¯æŒ Git ç‰ˆæœ¬ç®¡ç†å’Œå›¢é˜Ÿåä½œå¼€å‘ï¼›
5.  **å¯æ‰©å±•çš„æ’ä»¶ç³»ç»Ÿ**ï¼šæä¾›äº†`tona-plugins`æ’ä»¶ç³»ç»Ÿï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç¼–å†™æ’ä»¶å®ç° DOM æ“ä½œã€åŠŸèƒ½å¢å¼ºç­‰éœ€æ±‚ï¼ŒåŒæ—¶å†…ç½®äº†å¤šä¸ªå®ç”¨æ’ä»¶ï¼Œæ»¡è¶³å¼€å‘è€…çš„æ—¥å¸¸å¼€å‘éœ€æ±‚ã€‚

ç®€å•æ¥è¯´ï¼ŒTona è®©åšå®¢å›­çš®è‚¤å¼€å‘ä»**â€œæµè§ˆå™¨ç«¯çš„é›¶æ•£ç‰‡æ®µå¼€å‘â€** å‡çº§ä¸º**â€œæœ¬åœ°çš„ç°ä»£åŒ–å‰ç«¯é¡¹ç›®å¼€å‘â€**ï¼Œè®©å¼€å‘è€…å¯ä»¥åƒå¼€å‘æ™®é€šå‰ç«¯é¡¹ç›®ä¸€æ ·å¼€å‘åšå®¢å›­çš®è‚¤ï¼ŒåŒæ—¶ä¸º AI æ¥å…¥æ­å»ºäº†æ ‡å‡†åŒ–çš„æŠ€æœ¯åº•åº§ã€‚

### 3.2 Monorepo æ¶æ„è®¾è®¡

Tona é‡‡ç”¨**åŸºäº pnpm workspace çš„ Monorepo æ¶æ„**ï¼Œè¿™æ˜¯ç°ä»£åŒ–å‰ç«¯çš„ä¸»æµæ¶æ„é€‰æ‹©ï¼Œå…¶ä¼˜åŠ¿åœ¨äºå¯ä»¥å°†æ ¸å¿ƒèƒ½åŠ›æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹çš„åŒ…ï¼Œå®ç°åŠŸèƒ½çš„è§£è€¦ä¸å¤ç”¨ï¼ŒåŒæ—¶ä¾¿äºç‰ˆæœ¬ç®¡ç†å’Œå›¢é˜Ÿåä½œå¼€å‘ã€‚

Tona çš„ Monorepo ç»“æ„ä¸»è¦åˆ†ä¸º**ä¸‰å¤§æ ¸å¿ƒç›®å½•**ï¼š

**ï¼ˆ1ï¼‰æ ¹ç›®å½•ï¼šå·¥ç¨‹åŒ–æµæ°´çº¿é…ç½®**

Tona çš„æ ¹ç›®å½•åŒ…å«äº†æ‰€æœ‰å·¥ç¨‹åŒ–é…ç½®æ–‡ä»¶ï¼Œå¦‚`pnpm-workspace.yaml`ï¼ˆpnpm å·¥ä½œåŒºé…ç½®ï¼‰ã€`biome.jsonc`ï¼ˆä»£ç  Lint ä¸æ ¼å¼åŒ–ï¼‰ã€`vitest.config.ts`ï¼ˆæµ‹è¯•é…ç½®ï¼‰ã€`package.json`ï¼ˆæ ¹ç›®å½•è„šæœ¬ä¸ä¾èµ–ï¼‰ç­‰ï¼ŒåŒæ—¶æä¾›äº†`scripts/`ç›®å½•ï¼ŒåŒ…å«å¼€å‘ã€æ„å»ºã€å‘å¸ƒçš„æ ¸å¿ƒè„šæœ¬ï¼Œå®ç°äº†**ä¸€é”®å¼€å‘ã€ä¸€é”®æ„å»ºã€ä¸€é”®å‘å¸ƒ**ã€‚

**ï¼ˆ2ï¼‰`packages/`ï¼šæ ¸å¿ƒåŒ…ä¸å·¥å…·é“¾ï¼ˆ12 ä¸ªåŒ…ï¼‰**

`packages/`ç›®å½•æ˜¯ Tona çš„æ ¸å¿ƒï¼ŒåŒ…å« 12 ä¸ªç‹¬ç«‹çš„åŒ…ï¼Œæ¯ä¸ªåŒ…è´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½ï¼Œé‡‡ç”¨**åˆ†å±‚æ¶æ„**è®¾è®¡ï¼ˆæ„å»ºå±‚ã€æ‰©å±•å±‚ã€UI å±‚ã€å·¥å…·å±‚ã€åŸºç¡€å±‚ï¼‰ï¼ŒåŒ…ä¹‹é—´é€šè¿‡`workspace:*`åè®®ç›¸äº’å¼•ç”¨ï¼Œå®ç°æœ¬åœ°å¼€å‘æ— éœ€å‘å¸ƒï¼ŒåŒæ—¶ä¾¿äºç‰ˆæœ¬åŒæ­¥ã€‚

æ‰€æœ‰åŒ…å‡ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰ï¼Œè¿™ä¸ä»…ä¿è¯äº†ç±»å‹å®‰å…¨ï¼Œä¹Ÿä¸º AI å¼€å‘æä¾›äº†æ¸…æ™°çš„ API æç¤ºã€‚

**ï¼ˆ3ï¼‰`themes/`ï¼šå†…ç½®çš®è‚¤å®ç°ï¼ˆ3 ä¸ªçš®è‚¤ï¼‰**

`themes/`ç›®å½•åŒ…å« Tona å†…ç½®çš„ 3 ä¸ªåšå®¢å›­çš®è‚¤çš®è‚¤ï¼Œåˆ†ä¸º**ç»„ä»¶åŒ–æ¨¡å¼**å’Œ**æ’ä»¶åŒ–æ¨¡å¼**ä¸¤ç§å¼€å‘èŒƒå¼ï¼š

*   **Shadcn çš®è‚¤**ï¼šåŸºäº React+Tailwind CSS V4 çš„ç»„ä»¶åŒ–çš®è‚¤ï¼Œé‡‡ç”¨ Tona çš„å…¨é‡æ ¸å¿ƒåŒ…ï¼Œé€‚åˆå¼€å‘å¤æ‚ã€ç¾è§‚ã€å¯å®šåˆ¶çš„é«˜ç«¯çš®è‚¤ï¼›
*   **Geek/Reacg çš®è‚¤**ï¼šåŸºäºåŸç”Ÿ DOM+Sass çš„æ’ä»¶åŒ–çš®è‚¤ï¼Œä»…ä½¿ç”¨ Tona çš„æ ¸å¿ƒåŒ…ï¼ˆcore/options/pluginsï¼‰ï¼Œé€‚åˆå¼€å‘è½»é‡ã€é«˜æ•ˆçš„æç®€çš®è‚¤ã€‚

è¿™ 3 ä¸ªçš®è‚¤ä¸ä»…æ˜¯å¯ç›´æ¥ä½¿ç”¨çš„åšå®¢å›­çš®è‚¤ï¼Œæ›´æ˜¯ Tona çš„**å®æˆ˜ç¤ºä¾‹**ï¼ŒAI å¯ä»¥é€šè¿‡è¯»å–è¿™äº›çš®è‚¤çš„ä»£ç ï¼Œå­¦ä¹  Tona çš„å¼€å‘è§„èŒƒå’Œæœ€ä½³å®è·µã€‚

![image](https://img2024.cnblogs.com/blog/1501373/202602/1501373-20260213101052637-421617829.png)

![image](https://img2024.cnblogs.com/blog/1501373/202602/1501373-20260213100059752-592802182.png)

![image](https://img2024.cnblogs.com/blog/1501373/202602/1501373-20260213100904348-378022767.png)

![image](https://img2024.cnblogs.com/blog/1501373/202602/1501373-20260213101430958-1237882624.png)

### 3.4 æ ¸å¿ƒæŠ€æœ¯æ ˆé€‰å‹

Tona çš„æŠ€æœ¯æ ˆé€‰å‹éµå¾ª**è½»é‡ã€ç°ä»£ã€é«˜æ•ˆã€é€‚é…åšå®¢å›­**çš„åŸåˆ™ï¼Œæ‰€æœ‰æŠ€æœ¯æ ˆå‡ä¸ºå½“å‰å‰ç«¯è¡Œä¸šçš„ä¸»æµé€‰æ‹©ï¼ŒåŒæ—¶å……åˆ†è€ƒè™‘äº†åšå®¢å›­çš„è¿è¡Œç¯å¢ƒã€‚

Tona çš„æ ¸å¿ƒæŠ€æœ¯æ ˆå¯åˆ†ä¸º**æ ¸å¿ƒå¼€å‘å·¥å…·**ã€**å‰ç«¯æ¡†æ¶**ã€**æ ·å¼å·¥å…·**ã€**å·¥ç¨‹åŒ–å·¥å…·**å››å¤§ç±»ï¼Œå…·ä½“é€‰å‹åŠç‰ˆæœ¬ã€ç”¨é€”å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š

åˆ†ç±»

æŠ€æœ¯æ ˆ

ç‰ˆæœ¬

æ ¸å¿ƒç”¨é€”

æ„å»ºå·¥å…·

Vite

^7.3.1

å¼€å‘æœåŠ¡å™¨ã€çƒ­æ›´æ–°ã€æ‰“åŒ…æ„å»ºã€æ ‘æ‘‡ä¼˜åŒ–

åŒ…ç®¡ç†å™¨

pnpm

10.28.2

Monorepo å·¥ä½œåŒºç®¡ç†ã€ä¾èµ–å®‰è£…ã€åŒ…ä¹‹é—´çš„å¼•ç”¨

å¼€å‘è¯­è¨€

TypeScript

^5.9.3

å…¨æ¡†æ¶ç±»å‹å®‰å…¨ã€ä»£ç æç¤ºã€è¯­æ³•æ ¡éªŒ

UI æ¡†æ¶

Preact

^10.28.2

è½»é‡ React æ›¿ä»£æ–¹æ¡ˆï¼Œä½“ç§¯å°ã€æ€§èƒ½é«˜ï¼Œé€‚é…åšå®¢å›­çš„å…¨å±€ç¯å¢ƒ

æ ·å¼æ¡†æ¶

Tailwind CSS

^4.1.18

å·¥å…·ç±»ä¼˜å…ˆçš„ CSS æ¡†æ¶ï¼Œå¿«é€Ÿå®ç°æ ·å¼å¼€å‘ï¼Œæ”¯æŒ@apply æŒ‡ä»¤

åŒ…æ„å»ºå·¥å…·

tsdown

latest

TypeScript åŒ…ç¼–è¯‘ï¼Œå°† TS ä»£ç ç¼–è¯‘ä¸º ES æ¨¡å—ï¼Œé€‚é… Vite ç”Ÿæ€

æµ‹è¯•å·¥å…·

Vitest

^4.0.16

å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼Œæ”¯æŒå¿«ç…§æµ‹è¯•ã€æ¨¡æ‹Ÿæµ‹è¯•

ä»£ç  Lint

Biome

^2.3.11

ä»£ç  Lintã€æ ¼å¼åŒ–ã€è¯­æ³•æ ¡éªŒï¼Œæ›¿ä»£ ESLint+Prettierï¼Œæ€§èƒ½æ›´é«˜

Git Hooks

Lefthook

^2.0.13

æäº¤å‰ä»£ç æ ¡éªŒã€æµ‹è¯•ï¼Œä¿è¯ä»£ç æäº¤è´¨é‡

CSS é¢„å¤„ç†å™¨

Sass

latest

æ’ä»¶åŒ–çš®è‚¤çš„æ ·å¼å¼€å‘ï¼Œæ”¯æŒå˜é‡ã€æ··åˆã€åµŒå¥—

åŠ¨ç”»åº“

motion

^12.25.0

tona-theme-shadcn çš®è‚¤çš„åŠ¨ç”»æ•ˆæœï¼Œå®ç°æµç•…çš„é¡µé¢è¿‡æ¸¡å’Œäº¤äº’

å›¾æ ‡åº“

lucide-React

^0.562.0

tona-theme-shadcn çš®è‚¤çš„å›¾æ ‡ç³»ç»Ÿï¼Œæä¾›ä¸°å¯Œçš„çŸ¢é‡å›¾æ ‡

ç»„ä»¶åº“

@base-ui-components

1.0.0-beta.4

tona-theme-shadcn çš®è‚¤çš„æ— å¤´ UI ç»„ä»¶ï¼Œå®ç°å¯å®šåˆ¶çš„åŸºç¡€ç»„ä»¶

**æŠ€æœ¯æ ˆé€‰å‹çš„æ ¸å¿ƒè€ƒé‡**ï¼š

1.  **Preact**ï¼šReact çš„ä½“ç§¯ä»… 3KB å·¦å³ï¼Œè¿œå°äº Reactï¼Œä¸” API ä¸ React å®Œå…¨å…¼å®¹ï¼Œä¸ä¼šåœ¨åšå®¢å›­çš„å…¨å±€ç¯å¢ƒä¸­é€ æˆä½“ç§¯è¿‡å¤§æˆ–å˜é‡å†²çªçš„é—®é¢˜ï¼›
2.  **Vite ä½œä¸ºæ„å»ºå·¥å…·**ï¼šVite çš„çƒ­æ›´æ–°é€Ÿåº¦æå¿«ï¼Œæ‰“åŒ…æ•ˆç‡é«˜ï¼Œä¸”åŸç”Ÿæ”¯æŒ ES æ¨¡å—ï¼Œéå¸¸é€‚åˆåšå®¢å›­çš®è‚¤çš„æœ¬åœ°å¼€å‘ï¼›
3.  **pnpm ä½œä¸ºåŒ…ç®¡ç†å™¨**ï¼špnpm çš„åŒ…å®‰è£…é€Ÿåº¦å¿«ã€ç£ç›˜å ç”¨ä½ï¼Œä¸”åŸç”Ÿæ”¯æŒ Monorepo æ¶æ„ï¼Œæ˜¯ Tona çš„æœ€ä½³é€‰æ‹©ï¼›
4.  **Tailwind CSS V4**ï¼šTailwind CSS V4 ç›¸æ¯”æ—§ç‰ˆæœ¬æ€§èƒ½æ›´é«˜ã€åŠŸèƒ½æ›´å…¨ï¼Œæ”¯æŒ@apply æŒ‡ä»¤çš„é«˜çº§ç”¨æ³•ï¼Œéå¸¸é€‚åˆåšå®¢å›­çš®è‚¤çš„æ ·å¼å¼€å‘ï¼›
5.  **Biome æ›¿ä»£ ESLint+Prettier**ï¼šBiome æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„ä¸€ç«™å¼ä»£ç å·¥å…·ï¼Œé›†æˆäº† Lintã€æ ¼å¼åŒ–ã€è¯­æ³•æ ¡éªŒç­‰åŠŸèƒ½ï¼Œé…ç½®ç®€å•ï¼Œæ€§èƒ½è¿œé«˜äº ESLint+Prettierï¼Œé€‚åˆ Monorepo æ¶æ„çš„å·¥ç¨‹åŒ–ç®¡ç†ã€‚

### 3.5 å¼€å‘ä¸æ„å»ºæµæ°´çº¿

Tona æä¾›äº†**æ ‡å‡†åŒ–çš„å¼€å‘ä¸æ„å»ºæµæ°´çº¿**ï¼Œæ‰€æœ‰æ“ä½œéƒ½é€šè¿‡æ ¹ç›®å½•çš„`package.json`è„šæœ¬å®ç°ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒåº•å±‚çš„å®ç°ç»†èŠ‚ï¼Œåªéœ€æ‰§è¡Œç®€å•çš„å‘½ä»¤å³å¯å®Œæˆå¼€å‘ã€æ„å»ºã€æµ‹è¯•ã€å‘å¸ƒç­‰æ“ä½œã€‚åŒæ—¶ï¼Œè¿™ä¸€æµæ°´çº¿ä¹Ÿä¸º AI å¼€å‘æä¾›äº†æ ‡å‡†åŒ–çš„æ“ä½œå…¥å£â€”â€”AI å¯ä»¥é€šè¿‡æ‰§è¡Œè¿™äº›è„šæœ¬ï¼Œå‚ä¸å…¨æµç¨‹çš„å¼€å‘ã€‚

Tona çš„å¼€å‘ä¸æ„å»ºæµæ°´çº¿å¯é€šè¿‡ä»¥ä¸‹ Mermaid å›¾ç›´è§‚å±•ç¤ºï¼š

graph LR A\[å¼€å‘é˜¶æ®µ\] --> A1\[pnpm devï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨\] A1 --> A2\[scripts/dev-theme.tsï¼šçš®è‚¤å¼€å‘è„šæœ¬\] A2 --> A3\[Vite Dev Server+HMRï¼šçƒ­æ›´æ–°å¼€å‘\] B\[æµ‹è¯•é˜¶æ®µ\] --> B1\[pnpm testï¼šæ‰§è¡Œå•å…ƒ/é›†æˆæµ‹è¯•ï¼ˆVitestï¼‰\] B1 --> B2\[pnpm typecheckï¼šTypeScript ç±»å‹æ ¡éªŒ\] B2 --> B3\[pnpm lintï¼šä»£ç  Lint ä¸æ ¼å¼åŒ–ï¼ˆBiomeï¼‰\] C\[æ„å»ºé˜¶æ®µ\] --> C1\[pnpm buildï¼šæ„å»ºçš®è‚¤ï¼ˆViteï¼‰\] C1 --> C2\[pnpm build:pkgï¼šå¹¶è¡Œæ„å»ºæ‰€æœ‰æ ¸å¿ƒåŒ…\] C2 --> C3\[Vite Build+æ ‘æ‘‡ï¼šçš®è‚¤æ‰“åŒ…ä¼˜åŒ–\] C2 --> C4\[tsdownï¼šTS åŒ…ç¼–è¯‘ä¸º ES æ¨¡å—\] C3 --> C5\[themes/\*/dist/ï¼šçš®è‚¤æ„å»ºäº§ç‰©\] C4 --> C6\[packages/\*/dist/ï¼šåŒ…æ„å»ºäº§ç‰©\] D\[å‘å¸ƒé˜¶æ®µ\] --> D1\[pnpm releaseï¼šç‰ˆæœ¬å‘å¸ƒ\] D1 --> D2\[bumppï¼šç‰ˆæœ¬å·è‡ªå¢\] D2 --> D3\[scripts/update-versions.mjsï¼šåŒæ­¥æ‰€æœ‰åŒ…ç‰ˆæœ¬\] D3 --> D4\[å‘å¸ƒåˆ° npm/ç§æœ‰ä»“åº“\]

**ï¼ˆ1ï¼‰æ ¸å¿ƒè„šæœ¬è¯´æ˜**

Tona çš„æ ¹ç›®å½•`package.json`æä¾›äº† 7 ä¸ªæ ¸å¿ƒè„šæœ¬ï¼Œè¦†ç›–äº†å¼€å‘ã€æµ‹è¯•ã€æ„å»ºã€å‘å¸ƒçš„å…¨æµç¨‹ï¼Œå…·ä½“å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š

è„šæœ¬å

å…·ä½“å‘½ä»¤

æ ¸å¿ƒç”¨é€”

dev

node scripts/dev-theme.ts

å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨ï¼Œæ³¨å…¥åšå®¢å›­æ¨¡æ¿ï¼Œå®ç°çƒ­æ›´æ–°å¼€å‘

build

node scripts/build-theme.ts

æ„å»ºæ‰€æœ‰çš®è‚¤ï¼Œé€šè¿‡ Vite è¿›è¡Œæ‰“åŒ…ã€å‹ç¼©ã€æ ‘æ‘‡ä¼˜åŒ–ï¼Œç”Ÿæˆå¯éƒ¨ç½²çš„æ„å»ºäº§ç‰©

build:pkg

pnpm -r --filter=./packages/\*\* --parallel run build

å¹¶è¡Œæ„å»º`packages/`ç›®å½•ä¸‹çš„æ‰€æœ‰æ ¸å¿ƒåŒ…ï¼Œæé«˜æ„å»ºæ•ˆç‡

typecheck

tsc --noEmit

å¯¹æ‰€æœ‰ TypeScript ä»£ç è¿›è¡Œç±»å‹æ ¡éªŒï¼Œä¿è¯ç±»å‹å®‰å…¨

test

vitest test

æ‰§è¡Œ Vitest çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼Œä¿è¯ä»£ç è´¨é‡

lint

pnpm exec biome check --write

å¯¹æ‰€æœ‰ä»£ç è¿›è¡Œ Lint å’Œæ ¼å¼åŒ–ï¼Œè‡ªåŠ¨ä¿®å¤ä»£ç é£æ ¼é—®é¢˜

release

bumpp ... -x "zx scripts/update-versions.mjs"

ç‰ˆæœ¬å·è‡ªå¢ï¼ŒåŒæ­¥æ‰€æœ‰æ ¸å¿ƒåŒ…å’Œçš®è‚¤çš„ç‰ˆæœ¬ï¼Œå®ç°ä¸€é”®å‘å¸ƒ

**ï¼ˆ2ï¼‰æµæ°´çº¿çš„æ ¸å¿ƒç‰¹ç‚¹**

1.  **ä¸€é”®åŒ–æ“ä½œ**ï¼šæ‰€æœ‰æµç¨‹éƒ½é€šè¿‡ç®€å•çš„`pnpm <script>`å‘½ä»¤å®ç°ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒåº•å±‚ç»†èŠ‚ï¼›
2.  **å¹¶è¡Œæ„å»º**ï¼š`build:pkg`è„šæœ¬é€šè¿‡`pnpm -r --parallel`å®ç°æ‰€æœ‰æ ¸å¿ƒåŒ…çš„å¹¶è¡Œæ„å»ºï¼Œå¤§å¹…æé«˜æ„å»ºæ•ˆç‡ï¼›
3.  **è‡ªåŠ¨åŒ–æ ¡éªŒ**ï¼š`lint`ã€`typecheck`ã€`test`è„šæœ¬å®ç°äº†ä»£ç çš„è‡ªåŠ¨åŒ–æ ¡éªŒï¼Œä¿è¯ä»£ç è´¨é‡ï¼›
4.  **ç‰ˆæœ¬åŒæ­¥**ï¼š`release`è„šæœ¬é€šè¿‡`bumpp`å’Œè‡ªå®šä¹‰è„šæœ¬å®ç°äº†æ‰€æœ‰åŒ…å’Œçš®è‚¤çš„ç‰ˆæœ¬åŒæ­¥ï¼Œé¿å…ç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ï¼›
5.  **äº§ç‰©æ ‡å‡†åŒ–**ï¼šæ„å»ºåçš„äº§ç‰©å­˜æ”¾åœ¨`themes/*/dist/`å’Œ`packages/*/dist/`ç›®å½•ä¸­ï¼Œç»“æ„æ ‡å‡†åŒ–ï¼Œä¾¿äºéƒ¨ç½²å’Œä½¿ç”¨ã€‚

4\. Tona æ ¸å¿ƒåŒ…è§£æï¼šä»è®¾è®¡åˆ°å®ç°
---------------------

Tona çš„æ ¸å¿ƒèƒ½åŠ›ä½“ç°åœ¨`packages/`ç›®å½•çš„ 12 ä¸ªæ ¸å¿ƒåŒ…ä¸­ï¼Œè¿™äº›åŒ…é‡‡ç”¨**åˆ†å±‚æ¶æ„**è®¾è®¡ï¼Œç›¸äº’è§£è€¦åˆç›¸äº’åä½œï¼Œæ„æˆäº† Tona çš„å®Œæ•´èƒ½åŠ›ä½“ç³»ã€‚æœ¬èŠ‚å°†é‡ç‚¹è§£æ Tona ä¸­æœ€æ ¸å¿ƒçš„å‡ ä¸ªåŒ…ï¼šåŒ…æ‹¬å…¶è®¾è®¡æ€è·¯ã€å…³é”®å®ç°ã€ç¤ºä¾‹ä»£ç ã€‚

### 4.1 tona-viteï¼šæœ¬åœ°å¼€å‘çš„æ ¸å¿ƒå¼•æ“ï¼Œè®© AI è¯»æ‡‚åšå®¢å›­æ¨¡æ¿

`tona-vite`æ˜¯ Tona çš„**æ ¸å¿ƒå¼•æ“**ï¼Œä¹Ÿæ˜¯ AI æ¥å…¥åšå®¢å›­çš®è‚¤å¼€å‘çš„**å…³é”®åŒ…**ã€‚å…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯**å°†åšå®¢å›­çš„åŸç”Ÿ HTML æ¨¡æ¿æ³¨å…¥ Vite Dev Server ä¸­**ï¼Œè®©å¼€å‘è€…å¯ä»¥åœ¨æœ¬åœ°è„±ç¦»åšå®¢å›­ç¯å¢ƒè¿›è¡Œçš®è‚¤å¼€å‘ï¼Œè®© AI å¯ä»¥ç›´æ¥è¯»å–è¿™äº›æ¨¡æ¿ï¼Œç†è§£åšå®¢å›­çš„ DOM ç»“æ„ã€‚

**ï¼ˆ1ï¼‰tona-vite çš„å·¥ä½œåŸç†**

`tona-vite`ä½œä¸ºä¸€æ¬¾ Vite æ’ä»¶ï¼Œå…¶å·¥ä½œåŸç†ä¸»è¦åˆ†ä¸º**æ¨¡æ¿æ³¨å…¥**ã€**Dev Server å¯åŠ¨**ã€**çƒ­æ›´æ–°æ”¯æŒ**ä¸‰ä¸ªæ­¥éª¤ï¼Œå¯é€šè¿‡ä»¥ä¸‹ Mermaid å›¾å±•ç¤ºï¼š

graph TD A\[tona-vite æ’ä»¶åˆå§‹åŒ–\] --> A1\[è¯»å–æœ¬åœ°æ¨¡æ¿ï¼špackages/tona-vite/public/templates/\] A1 --> A2\[æ¨¡æ¿é¢„å¤„ç†ï¼šè§£æ DOM ç»“æ„ã€æ³¨å…¥å…¨å±€å˜é‡\] B\[Vite Dev Server å¯åŠ¨\] --> B1\[æ’ä»¶æ³¨å†Œï¼šå°†æ¨¡æ¿æ³¨å…¥ Vite çš„ Dev Server\] B1 --> B2\[è·¯ç”±æ˜ å°„ï¼šå°†æ¨¡æ¿æ˜ å°„åˆ° Vite çš„è·¯ç”±ï¼ˆ/templates/\*ï¼‰\] C\[æœ¬åœ°å¼€å‘é˜¶æ®µ\] --> C1\[çš®è‚¤ä»£ç å¼€å‘ï¼šReact/CSS/JS\] C1 --> C2\[çƒ­æ›´æ–°ï¼šVite HMR è§¦å‘çš®è‚¤ä»£ç é‡æ–°æ¸²æŸ“\] C2 --> C3\[æ¨¡æ¿æ¸²æŸ“ï¼šVite Dev Server æ¸²æŸ“æ³¨å…¥çš„åšå®¢å›­æ¨¡æ¿+çš®è‚¤ä»£ç \] C3 --> C4\[æµè§ˆå™¨è®¿é—®ï¼šæœ¬åœ°æŸ¥çœ‹åšå®¢å›­çš®è‚¤æ•ˆæœ\]

**æ ¸å¿ƒå…³é”®ç‚¹**ï¼š

1.  **æ¨¡æ¿æœ¬åœ°åŒ–**ï¼š`tona-vite`å°†åšå®¢å›­çš„æ‰€æœ‰åŸç”Ÿ HTML æ¨¡æ¿ï¼ˆé¦–é¡µã€æ–‡ç« é¡µã€ç›¸å†Œé¡µã€åˆ†ç±»é¡µç­‰ï¼‰ä¸‹è½½å¹¶ä¿å­˜åˆ°æœ¬åœ°`packages/tona-vite/public/templates/`ç›®å½•ä¸­ï¼Œå°½å¯èƒ½ä¿è¯äº†ä¸åšå®¢å›­çº¿ä¸Šç¯å¢ƒçš„ä¸€è‡´æ€§ï¼›
2.  **è·¯ç”±æ˜ å°„**ï¼š`tona-vite`å°†æœ¬åœ°æ¨¡æ¿æ˜ å°„åˆ° Vite Dev Server çš„`/templates/*`è·¯ç”±ä¸­ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡`http://localhost:5173/templates/home.html`è®¿é—®åšå®¢å›­é¦–é¡µæ¨¡æ¿ï¼Œé€šè¿‡`http://localhost:5173/templates/post-markdown.html`è®¿é—®æ–‡ç« é¡µæ¨¡æ¿ï¼›
3.  **ä»£ç æ³¨å…¥**ï¼šå¼€å‘è€…ç¼–å†™çš„çš®è‚¤ä»£ç ï¼ˆReact ç»„ä»¶ã€CSS æ ·å¼ã€JS è„šæœ¬ï¼‰ä¼šè¢« Vite Dev Server æ³¨å…¥åˆ°æ¨¡æ¿ä¸­ï¼Œå®ç°çš®è‚¤æ•ˆæœçš„å®æ—¶æ¸²æŸ“ï¼›
4.  **çƒ­æ›´æ–°æ”¯æŒ**ï¼šåŸºäº Vite çš„ HMR èƒ½åŠ›ï¼Œå¼€å‘è€…ä¿®æ”¹çš®è‚¤ä»£ç åï¼Œé¡µé¢ä¼šå®æ—¶æ›´æ–°ï¼Œæ— éœ€åˆ·æ–°ï¼Œå¤§å¹…æé«˜å¼€å‘æ•ˆç‡ã€‚

**ï¼ˆ2ï¼‰tona-vite çš„å…³é”®å®ç°**

æ’ä»¶ä½¿ç”¨ Vite çš„ configResolved å’Œ configureServer é’©å­ï¼Œæ³¨å…¥åšå®¢å›­æ¨¡æ¿åˆ° public ç›®å½•ã€‚

    // packages/tona-vite/index.ts ï¼ˆç®€åŒ–ç‰ˆï¼‰
    import { Plugin } from 'vite'
    import fs from 'fs-extra'
    import path from 'path'
    
    export function tonaVite(): Plugin {
      return {
        name: 'tona-vite',
        configResolved(config) {
          // æ³¨å…¥æ¨¡æ¿
          const templatesDir = path.resolve(__dirname, 'public/templates')
          fs.copySync(templatesDir, config.root + '/public/templates')
        },
        configureServer(server) {
          server.middlewares.use((req, res, next) => {
            if (req.url.startsWith('/templates/')) {
              // æ¨¡æ‹Ÿ CNBlogs æ¨¡æ¿å“åº”
              res.end(fs.readFileSync(path.resolve(config.root, req.url)))
            } else {
              next()
            }
          })
        },
      }
    }
    

**ï¼ˆ3ï¼‰AI æ¥å…¥çš„æ ¸å¿ƒä¼˜åŠ¿**

`tona-vite`ä¸º AI å¼€å‘æä¾›äº†ä¸¤ä¸ªæ ¸å¿ƒä¼˜åŠ¿ï¼š

1.  **æ¨¡æ¿å¯è®¿é—®æ€§**ï¼šåšå®¢å›­çš„åŸç”Ÿ HTML æ¨¡æ¿è¢«ä¿å­˜åˆ°æœ¬åœ°ï¼ŒAI å¯ä»¥ç›´æ¥è¯»å–è¿™äº›æ¨¡æ¿æ–‡ä»¶ï¼Œç†è§£åšå®¢å›­çš„ DOM ç»“æ„ã€HTML å¸ƒå±€ï¼Œä»è€Œç”Ÿæˆç¬¦åˆæ¨¡æ¿ç»“æ„çš„çš®è‚¤ä»£ç ï¼›
2.  **å¼€å‘ç¯å¢ƒæ ‡å‡†åŒ–**ï¼šAI å¯ä»¥é€šè¿‡æ‰§è¡Œ`pnpm dev`å‘½ä»¤å¯åŠ¨ Vite Dev Serverï¼Œå‚ä¸æœ¬åœ°å¼€å‘ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡ Vite çš„ API è·å–çš®è‚¤ä»£ç çš„å®æ—¶çŠ¶æ€ï¼Œå®ç° AI ä¸äººç±»å¼€å‘è€…çš„ååŒå¼€å‘ã€‚

sequenceDiagram participant User/AI participant ViteServer participant TonaVitePlugin participant CNBlogsTemplate User/AI->>ViteServer: pnpm dev ViteServer->>TonaVitePlugin: configResolved TonaVitePlugin->>CNBlogsTemplate: å¤åˆ¶æ¨¡æ¿åˆ° public/ User/AI->>ViteServer: ä¿®æ”¹ä»£ç  ViteServer->>TonaVitePlugin: HMR æ›´æ–° TonaVitePlugin->>User/AI: åˆ·æ–°é¡µé¢

### 4.2 tona-coreï¼šæ ¸å¿ƒ API

`tona-core`æ˜¯ Tona çš„**åŸºç¡€åŒ…**ï¼Œæä¾›`createTheme`å’Œ`defineOptions`ä¸¤ä¸ªæ ¸å¿ƒ APIï¼Œè´Ÿè´£**çš®è‚¤å®ä¾‹çš„åˆ›å»ºã€æ’ä»¶çš„æ³¨å†Œä¸æ‰§è¡Œã€é…ç½®çš„åˆå¹¶ä¸è¯»å–**ã€‚æ‰€æœ‰çš®è‚¤éƒ½é€šè¿‡`createTheme().use(plugin)`ä¸²è”æ’ä»¶ï¼Œæ‰€æœ‰æ’ä»¶é€šè¿‡`defineOptions`å£°æ˜å¯é…ç½®é¡¹ï¼Œå®ç°ç»Ÿä¸€çš„æ¨¡å—ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚

**ï¼ˆ1ï¼‰createThemeï¼šçš®è‚¤å®ä¾‹ä¸æ’ä»¶ç³»ç»Ÿ**

`createTheme()`è¿”å›ä¸€ä¸ªçš®è‚¤å®ä¾‹ï¼Œå®ä¾‹æä¾›`use(plugin, ...options)`æ–¹æ³•ç”¨äºæ³¨å†Œæ’ä»¶ï¼š

    // packages/core/src/createThemeApi.ts ï¼ˆç®€åŒ–ç‰ˆï¼‰
    export function createTheme() {
      const context = { theme: null, config: { globalProperties: {} } }
      const installedPlugins = new Set()
    
      const theme = {
        version: '3.0',
        _context: context,
        get config() {
          return context.config
        },
    
        use(plugin, ...options) {
          if (installedPlugins.has(plugin)) return theme
          if (typeof plugin?.install === 'function') {
            installedPlugins.add(plugin)
            plugin.install(theme, ...options)
          } else if (typeof plugin === 'function') {
            installedPlugins.add(plugin)
            plugin(theme, ...options)
          }
          return theme
        },
      }
    
      context.theme = theme
      init()
      return theme
    }
    

æ’ä»¶å¯ä»¥æ˜¯**å‡½æ•°**æˆ–**å¸¦`install`æ–¹æ³•çš„å¯¹è±¡**ï¼Œè°ƒç”¨æ—¶ä¼ å…¥çš®è‚¤å®ä¾‹å’Œå¯é€‰å‚æ•°ï¼›`use`æ”¯æŒé“¾å¼è°ƒç”¨ï¼Œè¿”å›çš®è‚¤å®ä¾‹æœ¬èº«ã€‚`init()`åœ¨åˆ›å»ºæ—¶æ‰§è¡Œï¼Œè´Ÿè´£éšè—åšå®¢å›­åŠ è½½åŠ¨ç”»ã€å¼€å‘æ¨¡å¼ä¸‹åˆå§‹åŒ–`window.opts`ç­‰ã€‚

**ï¼ˆ2ï¼‰defineOptionsï¼šé…ç½®åˆå¹¶ä¸ç”¨æˆ·è¦†ç›–**

`defineOptions`ç”¨äºå£°æ˜**æ’ä»¶çš„é…ç½®é¡¹**ï¼Œå°†é»˜è®¤å€¼ã€ç”¨æˆ·é…ç½®ï¼ˆ`window.opts`ï¼‰ã€å¼€å‘æ—¶è¦†ç›–ä¸‰è€…åˆå¹¶ï¼Œä¾›æ’ä»¶å†…éƒ¨ä½¿ç”¨ï¼š

    // packages/core/src/defineOptionsApi.ts ï¼ˆç®€åŒ–ç‰ˆï¼‰
    export function defineOptions(userOptionName, defaultOptions) {
      return (devOptions) => {
        const userConfig = window.opts || {}
        const user =
          typeof userOptionName === 'string'
            ? userConfig[userOptionName]
            : getValue(userOptionName, userConfig) // æ•°ç»„æ—¶æŒ‰é¡ºåºåŒ¹é…ç¬¬ä¸€ä¸ªå­˜åœ¨çš„é”®
        return Object.assign({}, defaultOptions, user, devOptions)
      }
    }
    
    // ä½¿ç”¨ç¤ºä¾‹
    const getBackgroundOptions = defineOptions('bodyBackground', {
      enable: false,
      value: '',
      opacity: 0.85,
      repeat: false,
    })
    
    const opts = getBackgroundOptions({ enable: true }) // å¼€å‘æ—¶è¦†ç›–
    // çº¿ä¸Šï¼šä» window.opts.bodyBackground è¯»å–ç”¨æˆ·é…ç½®ï¼Œä¸é»˜è®¤å€¼åˆå¹¶
    

`userOptionName`æ”¯æŒå­—ç¬¦ä¸²æˆ–æ•°ç»„ï¼ˆå¤šåˆ«åï¼‰ï¼Œæ•°ç»„æ—¶æŒ‰é¡ºåºæŸ¥æ‰¾ç¬¬ä¸€ä¸ªå­˜åœ¨äºç”¨æˆ·é…ç½®ä¸­çš„é”®ã€‚åšå®¢å›­ç”¨æˆ·é€šè¿‡ã€Œé¡µè„š HTML ä»£ç ã€æ³¨å…¥`window.opts = { bodyBackground: { enable: true, ... } }`ï¼Œçš®è‚¤å³å¯è¯»å–åˆ°åˆå¹¶åçš„é…ç½®ã€‚

### 4.3 tona-hooks: å¸¸ç”¨ Hooks

`tona-hooks`æ˜¯ Tona ä¸º **React ç”Ÿæ€**æ‰“é€ çš„è‡ªå®šä¹‰ Hook åŒ…ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯**å°è£…åšå®¢å›­çš®è‚¤å¼€å‘ä¸­å¸¸ç”¨çš„ DOM æ“ä½œã€çŠ¶æ€ç®¡ç†ã€ä¸šåŠ¡é€»è¾‘**ï¼Œè®©å¼€å‘è€…å¯ä»¥åƒä½¿ç”¨ React Hook ä¸€æ ·ï¼Œå¿«é€Ÿå®ç°åšå®¢å›­çš®è‚¤çš„å¼€å‘ï¼ŒåŒæ—¶å¤§å¹…å‡å°‘é‡å¤ä»£ç ã€‚å…¶è®¾è®¡éµå¾ª **â€œé¢å‘åšå®¢å›­ä¸šåŠ¡åœºæ™¯â€** çš„åŸåˆ™ï¼Œæ‰€æœ‰ Hook éƒ½é’ˆå¯¹åšå®¢å›­çš®è‚¤å¼€å‘çš„å®é™…éœ€æ±‚è¿›è¡Œå°è£…ã€‚

å…¶ä¸­ï¼Œ`useQueryDOM`æ˜¯`tona-hooks`ä¸­çš„æ ¸å¿ƒ Hookã€‚`useQueryDOM`çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯**å°è£…åšå®¢å›­çš„ DOM æŸ¥è¯¢æ“ä½œï¼Œæ”¯æŒ DOM èŠ‚ç‚¹çš„è‡ªåŠ¨æ›´æ–°å’Œé‡æ¸²æŸ“**ï¼Œè§£å†³äº†åšå®¢å›­ DOM ç»“æ„åŠ¨æ€å˜åŒ–å¯¼è‡´çš„æŸ¥è¯¢å¤±è´¥é—®é¢˜ã€‚

**useQueryDOM Hook çš„å®ç°**

    // packages/tona-hooks/src/useQueryDOM.ts
    import { useState, useEffect, useCallback } from 'React/hooks'
    
    /**
     * åšå®¢å›­ DOM æŸ¥è¯¢ Hook
     * @param selector DOM é€‰æ‹©å™¨
     * @param options é…ç½®é¡¹ï¼šæ˜¯å¦ç›‘å¬ DOM å˜åŒ–ã€æ˜¯å¦ç«‹å³æŸ¥è¯¢
     * @returns DOM èŠ‚ç‚¹ã€é‡æ–°æŸ¥è¯¢æ–¹æ³•
     */
    export function useQueryDOM<T extends HTMLElement>(
      selector: string,
      options: { observe: boolean; immediate: boolean } = {
        observe: true,
        immediate: true,
      },
    ) {
      const [node, setNode] = useState<T | null>(null)
    
      // DOM æŸ¥è¯¢æ–¹æ³•
      const queryNode = useCallback(() => {
        const el = document.querySelector<T>(selector)
        setNode(el)
        return el
      }, [selector])
    
      // åˆå§‹åŒ–æŸ¥è¯¢
      useEffect(() => {
        if (options.immediate) {
          queryNode()
        }
      }, [options.immediate, queryNode])
    
      // ç›‘å¬ DOM å˜åŒ–
      useEffect(() => {
        if (!options.observe) return
    
        // åˆ›å»º MutationObserverï¼Œç›‘å¬ DOM æ ‘å˜åŒ–
        const observer = new MutationObserver((mutations) => {
          // å½“ DOM æ ‘å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–°æŸ¥è¯¢
          queryNode()
        })
    
        // ç›‘å¬æ•´ä¸ªæ–‡æ¡£çš„ DOM å˜åŒ–
        observer.observe(document.documentElement, {
          childList: true,
          subtree: true,
          attributes: false,
          characterData: false,
        })
    
        // é”€æ¯æ—¶å–æ¶ˆç›‘å¬
        return () => {
          observer.disconnect()
        }
      }, [options.observe, queryNode])
    
      return [node, queryNode] as const
    }
    

**useQueryDOM Hook çš„ä½¿ç”¨**

    import { useQueryDOM } from 'tona-hooks';
    
    export function PostTitle() {
      // æŸ¥è¯¢åšå®¢å›­æ–‡ç« æ ‡é¢˜èŠ‚ç‚¹
      const { data, isPending } = useQueryDOM({
        selector: '#cb_post_title_url',
        observe: true,
        queryFn: (el) => {
          return el?.querySelector('[role="heading"]')?.innerHTML ?? ''
        },
      });
    
      if (isPending) {
        return <h1 className="text-2xl font-bold">åŠ è½½ä¸­...</h1>;
      }
    
      return (
        <h1 className="text-3xl font-bold text-blue-600 hover:text-blue-800 transition-colors">
          {titleNode.innerText}
        </h1>
      );
    }
    

> ä½ å¯ä»¥è¯•è¯•é€šè¿‡æ­¤ Hook å®ç°çš„æ–‡ç« åº•éƒ¨æ¨èæŒ‰é’®ã€è¯„è®ºåˆ—è¡¨ä»¥åŠä¸ªäººä¸»é¡µçš„å…³æ³¨æŒ‰é’®åŠŸèƒ½ã€‚

### 4.4 tona tailwind stylelint æ’ä»¶

å¦‚æœåœ¨åšå®¢å›­çš®è‚¤å¼€å‘ä¸­ä½¿ç”¨ tailwindï¼Œéœ€è¦è€ƒè™‘çš„é—®é¢˜æ˜¯ class name è¢«æ‰“åŒ…è‡³ js æ–‡ä»¶ä¸­ï¼Œjs æ–‡ä»¶ä½“æ£€å¿«é€Ÿå¢é•¿çš„é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ CSS æ–‡ä»¶å†…ä½¿ç”¨ tailwindã€‚

stylelint-one-utility-class-per-line æ’ä»¶å¼ºåˆ¶ @apply æŒ‡ä»¤ä¸€è¡Œä¸€ä¸ªç±»åï¼Œæ”¯æŒè‡ªåŠ¨ä¿®å¤ã€‚è§£å†³å¤šç±»åä¸€è¡Œå¯¼è‡´çš„å¯è¯»æ€§å·®é—®é¢˜ã€‚

    .card {
      @apply flex flex-col items-center justify-center p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300;
    }
    

lint å

    .card {
      @apply flex 
        flex-col 
        items-center 
        justify-center 
        p-6 
        bg-white 
        dark:bg-gray-800 
        rounded-lg 
        shadow-md 
        hover:shadow-lg 
        transition-shadow 
        duration-300;
    }
    

### 4.5 create-tonaï¼šCLI å¿«é€Ÿåˆå§‹åŒ–ï¼Œä¸€é”®æ­å»ºçš®è‚¤å¼€å‘è„šæ‰‹æ¶

![image](https://img2024.cnblogs.com/blog/1501373/202602/1501373-20260213102615101-1943776826.png)

`create-tona`æ˜¯ Tona çš„ **CLI å¿«é€Ÿåˆå§‹åŒ–å·¥å…·**ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯**é€šè¿‡ä¸€è¡Œå‘½ä»¤åˆ›å»º Tona çš®è‚¤é¡¹ç›®è„šæ‰‹æ¶**ï¼Œè®©å¼€å‘è€…æ— éœ€æ‰‹åŠ¨é…ç½® Viteã€tona-vite æ’ä»¶ã€ä¾èµ–å®‰è£…ç­‰ï¼Œå³å¯åœ¨æ•°ç§’å†…è·å¾—ä¸€ä¸ªå¯è¿è¡Œçš„åšå®¢å›­çš®è‚¤å¼€å‘ç¯å¢ƒã€‚å…¶è®¾è®¡éµå¾ª**â€œå¼€ç®±å³ç”¨ã€æ¨¡æ¿å¯é€‰ã€æµç¨‹æ ‡å‡†åŒ–â€**çš„åŸåˆ™ï¼Œæ˜¯ Tona å¼€å‘æµç¨‹çš„\*\*å…¥å£åŒ…ã€‚

**ï¼ˆ1ï¼‰create-tona çš„å·¥ä½œåŸç†**

`create-tona`ä½œä¸ºä¸€æ¬¾ Node.js CLI å·¥å…·ï¼Œå…¶å·¥ä½œåŸç†ä¸»è¦åˆ†ä¸º**äº¤äº’å¼å¼•å¯¼**ã€**æ¨¡æ¿é€‰æ‹©ä¸å¤åˆ¶**ã€**ä¾èµ–å®‰è£…ä¸å¯åŠ¨**ä¸‰ä¸ªæ­¥éª¤ï¼Œå¯é€šè¿‡ä»¥ä¸‹ Mermaid å›¾å±•ç¤ºï¼š

graph TD A\[æ‰§è¡Œ pnpm create tona\] --> A1\[è§£æå‘½ä»¤è¡Œå‚æ•°ï¼š-t --template, -i --immediate\] A1 --> A2\[æ£€æµ‹è¿è¡Œç¯å¢ƒï¼šTTY äº¤äº’æ¨¡å¼ / é TTY é™é»˜æ¨¡å¼\] B\[äº¤äº’å¼å¼•å¯¼\] --> B1\[é¡¹ç›®åç§° & ç›®æ ‡ç›®å½•\] B1 --> B2\[ç›®å½•å†²çªå¤„ç†ï¼šè¦†ç›– / å¿½ç•¥ / å–æ¶ˆ\] B2 --> B3\[åŒ…åæ ¡éªŒï¼šnpm è§„èŒƒ\] B3 --> B4\[æ¨¡æ¿é€‰æ‹©ï¼šTypeScript / JavaScript\] B4 --> B5\[æ˜¯å¦ç«‹å³å®‰è£…ä¾èµ–å¹¶å¯åŠ¨ dev\] C\[é¡¹ç›®æ­å»º\] --> C1\[å¤åˆ¶ template-ts æˆ– template-js åˆ°ç›®æ ‡ç›®å½•\] C1 --> C2\[æ›´æ–° package.json çš„ name å­—æ®µ\] C2 --> C3\[å¯é€‰ï¼špnpm install + pnpm dev\] C3 --> C4\[å®Œæˆï¼šè¾“å‡ºåç»­å‘½ä»¤æç¤º\]

**æ ¸å¿ƒå…³é”®ç‚¹**ï¼š

1.  **åŒæ¨¡æ¿æ”¯æŒ**ï¼š`create-tona`æä¾›`template-ts`ï¼ˆTypeScriptï¼‰å’Œ`template-js`ï¼ˆJavaScriptï¼‰ä¸¤ç§æ¨¡æ¿ï¼Œæ¨¡æ¿å·²é¢„é…ç½®`tona-vite`æ’ä»¶ã€`tona`ä¾èµ–ã€Vite æ„å»ºè„šæœ¬ï¼Œå¼€å‘è€…å¯æ ¹æ®æŠ€æœ¯æ ˆåå¥½é€‰æ‹©ï¼›
2.  **åŒ…ç®¡ç†å™¨è‡ªåŠ¨è¯†åˆ«**ï¼šé€šè¿‡`npm_config_user_agent`ç¯å¢ƒå˜é‡è¯†åˆ«è°ƒç”¨æ–¹ï¼ˆpnpmã€npmã€yarnã€bunã€denoï¼‰ï¼Œè‡ªåŠ¨é‡‡ç”¨å¯¹åº”å‘½ä»¤è¿›è¡Œä¾èµ–å®‰è£…å’Œè„šæœ¬æ‰§è¡Œï¼›
3.  **ç›®å½•å†²çªå¤„ç†**ï¼šå½“ç›®æ ‡ç›®å½•éç©ºæ—¶ï¼Œæä¾›â€œå–æ¶ˆ / æ¸…ç©ºåç»§ç»­ / å¿½ç•¥å¹¶ç»§ç»­â€ä¸‰ç§é€‰é¡¹ï¼Œé¿å…æ„å¤–è¦†ç›–ï¼›
4.  **å³æ—¶å¯åŠ¨**ï¼šæ”¯æŒ`-i`æˆ–`--immediate`å‚æ•°ï¼Œåœ¨é¡¹ç›®åˆ›å»ºå®Œæˆåè‡ªåŠ¨æ‰§è¡Œ`pnpm install`å’Œ`pnpm dev`ï¼Œå®ç°â€œåˆ›å»ºå³å¼€å‘â€ã€‚

**ï¼ˆ2ï¼‰create-tona çš„å…³é”®å®ç°**

CLI ä½¿ç”¨`@clack/prompts`å®ç°äº¤äº’å¼æé—®ï¼Œä½¿ç”¨`mri`è§£æå‘½ä»¤è¡Œå‚æ•°ï¼Œé€šè¿‡ Node.js çš„`fs`æ¨¡å—å¤åˆ¶æ¨¡æ¿æ–‡ä»¶ã€‚

    // packages/create-tona/src/index.ts ï¼ˆç®€åŒ–ç‰ˆï¼‰
    import fs from 'node:fs'
    import path from 'node:path'
    import { fileURLToPath } from 'node:url'
    import * as prompts from '@clack/prompts'
    import spawn from 'cross-spawn'
    import mri from 'mri'
    
    const argv = mri(process.argv.slice(2), {
      boolean: ['help', 'overwrite', 'immediate', 'interactive'],
      alias: { h: 'help', t: 'template', i: 'immediate' },
      string: ['template'],
    })
    
    async function init() {
      // 1. è·å–ç›®æ ‡ç›®å½•ï¼ˆäº¤äº’æˆ–å‚æ•°ï¼‰
      const targetDir = argv._[0]
        ? formatTargetDir(String(argv._[0]))
        : await prompts.text({
            message: 'Project name:',
            defaultValue: 'tona-theme',
          })
    
      // 2. ç›®å½•å†²çªå¤„ç†
      if (fs.existsSync(targetDir) && !isEmpty(targetDir)) {
        const overwrite = await prompts.select({
          message: '...',
          options: ['no', 'yes', 'ignore'],
        })
        if (overwrite === 'yes') emptyDir(targetDir)
      }
    
      // 3. é€‰æ‹©æ¨¡æ¿ï¼šts / js
      const template =
        argv.template ??
        (await prompts.select({
          message: 'Select a template:',
          options: [
            { label: 'TypeScript', value: 'ts' },
            { label: 'JavaScript', value: 'js' },
          ],
        }))
    
      // 4. å¤åˆ¶ template-ts æˆ– template-js åˆ°ç›®æ ‡ç›®å½•
      const __dirname = path.dirname(fileURLToPath(import.meta.url))
      const templateDir = path.resolve(__dirname, '..', `template-${template}`)
      copyDir(templateDir, targetDir)
    
      // 5. æ›´æ–° package.json çš„ name
      const pkg = JSON.parse(
        fs.readFileSync(path.join(targetDir, 'package.json'), 'utf-8'),
      )
      pkg.name = path.basename(path.resolve(targetDir))
      fs.writeFileSync(
        path.join(targetDir, 'package.json'),
        JSON.stringify(pkg, null, 2),
      )
    
      // 6. å¯é€‰ï¼šç«‹å³å®‰è£…å¹¶å¯åŠ¨
      if (argv.immediate) {
        spawn.sync(pkgManager, ['install'], { cwd: targetDir })
        spawn.sync(pkgManager, ['dev'], { cwd: targetDir })
      }
    }
    

**æ¨¡æ¿ç»“æ„**ï¼šæ¯ä¸ªæ¨¡æ¿åŒ…å«`package.json`ã€`vite.config.mts`ã€`src/main.ts`ã€`src/style.css`ç­‰ï¼Œå…¶ä¸­`vite.config.mts`å·²é…ç½®`tona-vite`æ’ä»¶å’Œ`@`è·¯å¾„åˆ«åï¼Œ`main.ts`ä¸ºæ’ä»¶å¼å…¥å£ç¤ºä¾‹ï¼ˆ`createTheme().use(myPlugin)`ï¼‰ã€‚

5\. ç¤ºä¾‹çš®è‚¤å®ç°æ‹†è§£
------------

`tona-theme-shadcn`æ˜¯ Tona å†…ç½®çš„**ç»„ä»¶åŒ–æ¨¡å¼**å¼€å‘çš„çš®è‚¤ï¼Œå¤§éƒ¨åˆ†æ ·å¼ã€åŠŸèƒ½éƒ½ç”± AI å®ç°ã€‚è¯„è®ºåˆ—è¡¨ä½œä¸ºè¿™ä¸ªçš®è‚¤çš„æœ€å¤æ‚çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œè®¾è®¡ã€æ ·å¼å’ŒåŠŸèƒ½éƒ½å®Œå…¨ç”± AI å®ç°ã€‚

`tona-theme-shadcn` é‡‡ç”¨ Preact + Tailwind CSS V4 + shadcn/ui é£æ ¼è®¾è®¡ï¼Œæ˜¯ Tona çš®è‚¤å¼€å‘çš„å®è·µå‚è€ƒã€‚æœ¬èŠ‚ä»é¡¹ç›®ç»“æ„ã€å…¥å£ä¸æ’ä»¶é“¾ã€é¡µé¢è·¯ç”±ã€æ•°æ®è·å–ã€æ ·å¼ä½“ç³»ã€æ„å»ºè¾“å‡ºå…­ä¸ªç»´åº¦æ‹†è§£å…¶å®ç°ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å¦‚ä½•åŸºäº Tona å¼€å‘é«˜è´¨é‡åšå®¢å›­çš®è‚¤ã€‚

### 5.1 é¡¹ç›®ç»“æ„ä¸æŠ€æœ¯æ ˆ

`tona-theme-shadcn`é‡‡ç”¨**ç»„ä»¶åŒ– + æ’ä»¶åŒ–**çš„æ··åˆæ¶æ„ï¼šæ ¸å¿ƒ UI ä»¥ Preact ç»„ä»¶å®ç°ï¼Œå¢å¼ºåŠŸèƒ½ä»¥æ’ä»¶å½¢å¼æŒ‚è½½ã€‚ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

    themes/shadcn/
    â”œâ”€â”€ src/
    â”‚ â”œâ”€â”€ main.ts                   # å…¥å£ï¼šæ’ä»¶é“¾æ³¨å†Œ
    â”‚ â”œâ”€â”€ styles/                   # å…¨å±€æ ·å¼
    â”‚ â”‚ â”œâ”€â”€ globals.css             # Tailwind + shadcn + markdown + theme
    â”‚ â”‚ â”œâ”€â”€ shadcn/                 # shadcn çš®è‚¤å˜é‡ã€ç»„ä»¶æ ·å¼
    â”‚ â”‚ â”œâ”€â”€ markdown.css            # æ–‡ç«  Markdown æ ·å¼
    â”‚ â”‚ â””â”€â”€ theme.css               # çš®è‚¤çš®è‚¤å˜é‡
    â”‚ â”œâ”€â”€ lib/utils.ts              # cn() å·¥å…·å‡½æ•°
    â”‚ â”œâ”€â”€ components/ui/            # é€šç”¨ UI ç»„ä»¶ï¼ˆButtonã€Separatorã€Sonner ç­‰ï¼‰
    â”‚ â””â”€â”€ plugins/
    â”‚   â”œâ”€â”€ app/                    # ä¸»åº”ç”¨æ’ä»¶ï¼šPreact æ¸²æŸ“æ•´é¡µ
    â”‚   â”‚ â”œâ”€â”€ app.tsx               # App æ ¹ç»„ä»¶
    â”‚   â”‚ â”œâ”€â”€ components/           # é¡µé¢çº§ç»„ä»¶
    â”‚   â”‚ â”‚ â”œâ”€â”€ page/               # è·¯ç”±åˆ†å‘
    â”‚   â”‚ â”‚ â”œâ”€â”€ home-page/          # é¦–é¡µ
    â”‚   â”‚ â”‚ â”œâ”€â”€ post-page/          # æ–‡ç« é¡µ
    â”‚   â”‚ â”‚ â”œâ”€â”€ top-nav-bar/        # é¡¶éƒ¨å¯¼èˆª
    â”‚   â”‚ â”‚ â”œâ”€â”€ post-comments/      # è¯„è®º
    â”‚   â”‚ â”‚ â””â”€â”€ ...
    â”‚   â”‚ â””â”€â”€ hooks/                # ä¸šåŠ¡ hooks
    â”‚   â”œâ”€â”€ code-copy-button/       # ä»£ç å—å¤åˆ¶ï¼ˆåŸç”Ÿ DOM æ’ä»¶ï¼‰
    â”‚   â””â”€â”€ smooth-scroll/          # å¹³æ»‘æ»šåŠ¨ï¼ˆåŸç”Ÿ DOM æ’ä»¶ï¼‰
    â”œâ”€â”€ vite.config.mts
    â””â”€â”€ package.json
    

**æŠ€æœ¯æ ˆ**ï¼šPreactã€Tailwind CSS V4ã€class-variance-authorityï¼ˆcvaï¼‰ã€clsx + tailwind-mergeï¼ˆcnï¼‰ã€lucide-preactï¼ˆå›¾æ ‡ï¼‰ã€motionï¼ˆåŠ¨ç”»ï¼‰ã€tona-hooksï¼ˆuseQueryDOMï¼‰ã€tona-utilsã€tona-sonnerï¼ˆToastï¼‰ã€‚

é€šè¿‡ç›®å½•ç»“æ„å¯ä»¥çœ‹åˆ°ï¼Œç”± preact å®ç°çš„éƒ¨åˆ†ï¼ˆçš®è‚¤ä¸»ä½“ï¼‰å‡ ä¹æ˜¯ä¸€ä¸ª SPAï¼Œåªæ˜¯ Tona çš„ä¸€ä¸ªæ’ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å‰ç«¯æ¡†æ¶å¼€å‘åšå®¢å›­çš®è‚¤ï¼Œä½†éœ€è¦æƒè¡¡ä½“ç§¯ã€æ˜¯å¦ AI å‹å¥½ã€ç”Ÿæ€ç­‰å› ç´ ã€‚æˆ‘è®¤ä¸º preact æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæ‰€ä»¥æˆ‘é€‰ç”¨ preact å®ç°äº† tona-theme-shadcn çš®è‚¤ã€‚

### 5.2 å…¥å£ä¸æ’ä»¶é“¾

çš®è‚¤å…¥å£é€šè¿‡`createTheme().use()`ä¸²è”å¤šä¸ªæ’ä»¶ï¼Œå®ç°**æ¸è¿›å¼å¢å¼º**ï¼š

    // themes/shadcn/src/main.ts
    import { createTheme } from 'tona'
    import './styles/globals.css'
    import { app } from './plugins/app'
    import { codeCopyButton } from './plugins/code-copy-button'
    import { smoothScroll } from './plugins/smooth-scroll'
    
    createTheme().use(app).use(smoothScroll).use(codeCopyButton)
    

*   **app**ï¼šPreact æ¸²æŸ“æ ¸å¿ƒï¼Œå°†æ•´é¡µ UI ä»¥`document.body.prepend(frag)`æ³¨å…¥ï¼Œè¦†ç›–åšå®¢å›­åŸç”Ÿå¸ƒå±€ï¼›
*   **smoothScroll**ï¼šè®¾ç½®`scrollBehavior`ï¼›
*   **codeCopyButton**ï¼šä¸ºä»£ç å—æ·»åŠ å¤åˆ¶æŒ‰é’®ï¼Œçº¯ DOM æ“ä½œã€‚

`app`æ’ä»¶çš„å®ç°æ–¹å¼ä½“ç°äº†**ç»„ä»¶åŒ–**ä¸**æ¨¡æ¿æ³¨å…¥**çš„ç»“åˆï¼šå°† Preact åº”ç”¨æŒ‚è½½åˆ°`DocumentFragment`ï¼Œå†æ’å…¥åˆ°`body`é¡¶éƒ¨ï¼Œä»è€Œåœ¨åšå®¢å›­æ¨¡æ¿ä¹‹ä¸Šå åŠ ç°ä»£åŒ– UIã€‚

### 5.3 é¡µé¢è·¯ç”±ä¸ç»„ä»¶å¤ç”¨

åšå®¢å›­ä¸åŒé¡µé¢ï¼ˆé¦–é¡µã€æ–‡ç« é¡µã€åˆ†ç±»é¡µç­‰ï¼‰å¯¹åº”ä¸åŒçš„ DOM ç»“æ„ï¼Œshadcn é€šè¿‡`tona-utils`çš„`getCurrentPage()`è¯†åˆ«å½“å‰é¡µé¢ç±»å‹ï¼Œå†åœ¨`Page`ç»„ä»¶ä¸­åšè·¯ç”±åˆ†å‘ï¼š

    // themes/shadcn/src/plugins/app/components/page/index.tsx
    import { getCurrentPage } from 'tona-utils'
    import { HomePage } from '../home-page'
    import { PostPage } from '../post-page'
    
    export function Page() {
      const currentPage = getCurrentPage()
    
      if (currentPage === 'home') return <HomePage />
      if (currentPage === 'post') return <PostPage />
      return null
    }
    

å¦‚æœä½ çš„çš®è‚¤æ¯”è¾ƒå¤æ‚ï¼Œç”šè‡³å¯ä»¥åšä»£ç æ‹†åˆ†ï¼Œåœ¨ä¸åŒåšå®¢é¡µé¢æŒ‰éœ€åŠ è½½èµ„æºã€‚

### 5.4 æ•°æ®è·å–ä¸ DOM é€‚é…ï¼šuseQueryDOM å®æˆ˜

åšå®¢å›­é¡µé¢ DOM ç”±æœåŠ¡ç«¯æ¸²æŸ“ï¼Œç»“æ„å›ºå®šä½†å†…å®¹åŠ¨æ€ã€‚shadcn çš®è‚¤ä½¿ç”¨`tona-hooks`çš„`useQueryDOM`ï¼Œä» DOM ä¸­æå–æ•°æ®å¹¶é©±åŠ¨ Preact ç»„ä»¶æ¸²æŸ“ã€‚

**ç¤ºä¾‹ä¸€ï¼šæ–‡ç« åˆ—è¡¨**ã€‚é¦–é¡µçš„`.forFlow`å†…åŒ…å«æŒ‰æ—¥æœŸåˆ†ç»„çš„æ–‡ç« åˆ—è¡¨ï¼Œ`usePostList`é€šè¿‡`queryFn`è§£æå‡ºæ¯ç¯‡æ–‡ç« çš„æ ‡é¢˜ã€é“¾æ¥ã€æ—¶é—´ã€æµè§ˆ/è¯„è®º/æ¨èæ•°ç­‰ï¼š

    // themes/shadcn/src/plugins/app/components/home-page/post-list/hooks.ts
    export function usePostList() {
      return useQueryDOM({
        selector: '.forFlow',
        observe: true,
        queryFn: (el) => {
          const items: PostItem[] = []
          const dayElements = el?.querySelectorAll('.day') ?? []
          dayElements.forEach((dayEl) => {
            // è§£æ .dayTitleã€.postTitleã€.postConã€.postDesc ç­‰
            // æå– titleã€hrefã€dateã€viewCountã€commentCountã€diggCount...
            items.push({ date, title, href, description, ... })
          })
          return items
        },
      })
    }
    

**ç¤ºä¾‹äºŒï¼šæ–‡ç« æ ‡é¢˜ä¸å…ƒä¿¡æ¯**ã€‚æ–‡ç« é¡µé€šè¿‡`#cb_post_title_url`ã€`#cnblogs_post_body`ç­‰é€‰æ‹©å™¨è·å–æ ‡é¢˜ HTMLã€å‘å¸ƒæ—¥æœŸã€é˜…è¯»æ—¶é—´ç­‰ï¼š

    // themes/shadcn/src/plugins/app/components/post-hero/hooks.ts
    export function usePostTitle() {
      return useQueryDOM({
        selector: '#cb_post_title_url',
        queryFn: (el) => el?.querySelector('[role="heading"]')?.innerHTML ?? '',
      })
    }
    
    export function usePostInfo() {
      return useQueryDOM({
        selector: '#cnblogs_post_body',
        observe: true,
        queryFn: (el) => ({
          publishTime: getCurrentPostDateAdded(),
          readingTime: calculateReadingTime(el?.textContent ?? ''),
          updateTime: null,
        }),
      })
    }
    

`observe: true`æ—¶ï¼Œ`useQueryDOM`å†…éƒ¨ä½¿ç”¨`MutationObserver`ç›‘å¬ DOM å˜åŒ–ï¼Œåœ¨åšå®¢å›­ AJAX æ›´æ–°å†…å®¹åè‡ªåŠ¨é‡æ–°æŸ¥è¯¢ï¼Œä¿è¯æ•°æ®ä¸è§†å›¾åŒæ­¥ã€‚

**ç¤ºä¾‹ä¸‰ï¼šæ–‡ç« å†…å®¹â€œæ¬è¿â€**ã€‚`PostDetails`ç»„ä»¶ä¸é‡æ–°æ¸²æŸ“åšå®¢å›­æ–‡ç«  bodyï¼Œè€Œæ˜¯é€šè¿‡`appendChild`å°†`#cnblogs_post_body`è¿ç§»åˆ° Preact æ¸²æŸ“çš„å®¹å™¨å†…ï¼Œåœ¨ä¿ç•™åšå®¢å›­åŸç”Ÿ Markdown æ¸²æŸ“æ•ˆæœçš„åŒæ—¶ï¼Œå®ç°ä¸çš®è‚¤å¸ƒå±€çš„æ— ç¼èåˆã€‚

### 5.5 æ ·å¼ä½“ç³»ï¼šTailwind + shadcn + çš®è‚¤å˜é‡

shadcn çš„æ ·å¼é‡‡ç”¨**åˆ†å±‚å¯¼å…¥**ï¼š

    /* themes/shadcn/src/styles/globals.css */
    @import 'tailwindcss' source('../../src');
    @import 'tw-animate-css';
    @import './shadcn/index.css';
    @import './markdown.css';
    @import './theme.css';
    @import './reset.css';
    

*   **Tailwind**ï¼šå·¥å…·ç±»ä¸»ä½“ï¼Œ`source()` æŒ‡å‘ `src` ä»¥æ”¯æŒ `@theme` ç­‰é…ç½®ï¼›
*   **tw-animate-css**ï¼šé¢„è®¾åŠ¨ç”»ï¼›
*   **shadcn**ï¼šCSS å˜é‡ï¼ˆ`--background`ã€`--foreground`ã€`--primary` ç­‰ï¼‰ã€ç»„ä»¶æ ·å¼ï¼›
*   **markdown**ï¼šæ–‡ç« å†…å®¹ Markdown æ¸²æŸ“æ ·å¼ï¼›
*   **theme**ï¼šçš®è‚¤çº§çš®è‚¤å˜é‡ï¼›
*   **reset**ï¼šåŸºç¡€é‡ç½®ã€‚

ç»„ä»¶ä½¿ç”¨`cva`ç®¡ç†æ ·å¼å˜ä½“ï¼Œ`cn()`åˆå¹¶ç±»åï¼š

    // themes/shadcn/src/components/ui/button.tsx
    const buttonVariants = cva(
      "inline-flex items-center justify-center rounded-md font-medium ...",
      {
        variants: {
          variant: { default: '...', outline: '...', ghost: '...' },
          size: { default: '...', sm: '...', icon: '...' },
        },
        defaultVariants: { variant: 'default', size: 'default' },
      },
    )
    
    function Button({ variant, size, className, ...props }) {
      return <slot className={cn(buttonVariants({ variant, size }), className)} {...props} />
    }
    

æš—è‰²æ¨¡å¼é€šè¿‡`dark:`å‰ç¼€å’Œ CSS å˜é‡åˆ‡æ¢å®ç°ï¼Œæ»¡è¶³ AGENTS.md ä¸­çš„çš®è‚¤è§„èŒƒã€‚

### 5.6 æ„å»ºä¸è¾“å‡º

Vite é…ç½®å°†çš®è‚¤æ‰“åŒ…ä¸º**å•æ–‡ä»¶ IIFE**ï¼Œä¾¿äºåšå®¢å›­ã€Œé¡µè„š HTML ä»£ç ã€ã€Œè‡ªå®šä¹‰ JS è„šæœ¬ã€ç­‰å…¥å£å¼•å…¥ï¼š

    // themes/shadcn/vite.config.mtsï¼ˆèŠ‚é€‰ï¼‰
    build: {
      lib: {
        formats: ['iife'],
        entry: resolve(__dirname, 'src/main.ts'),
        name: 'shadcn',
        fileName: () => 'shadcn.js',
      },
      cssCodeSplit: false,
      rollupOptions: {
        output: { assetFileNames: 'shadcn.[ext]' },
      },
    }
    

æ„å»ºäº§ç‰©ä¸º`dist/shadcn.js`å’Œ`dist/shadcn.css`ï¼Œç”¨æˆ·å°†ä¸¤è€…å¼•å…¥åšå®¢å›­åå°å³å¯ä½¿ç”¨ã€‚

* * *

é€šè¿‡æœ¬èŠ‚æ‹†è§£ï¼Œå¯ä»¥çœ‹åˆ° tona-theme-shadcn å¦‚ä½•å°†**Tona æ ¸å¿ƒåŒ…**ï¼ˆtona-viteã€tona-hooksã€tona-utilsï¼‰ã€**Preact ç»„ä»¶åŒ–**ã€**Tailwind æ ·å¼ä½“ç³»**ä¸**åšå®¢å›­ DOM ç»“æ„**æœ‰æœºç»“åˆï¼Œå½¢æˆä¸€å¥—å¯ç»´æŠ¤ã€å¯æ‰©å±•çš„çš®è‚¤å®ç°èŒƒå¼ï¼Œä¸º AI æä¾›äº†æ¸…æ™°çš„å‚è€ƒæ¨¡æ¿ã€‚

6\. æœ€å
------

æ¬¢è¿ä½¿ç”¨çš®è‚¤ï¼Œä¹Ÿæ¬¢è¿å°è¯•ä½¿ç”¨ Tona äº²æ‰‹æ„å»ºä¸€æ¬¾çš®è‚¤ã€‚ä¸å¦¨ç”¨`pnpm create tona`å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ªçš®è‚¤é¡¹ç›®ï¼Œæ„Ÿå—æœ¬åœ°çƒ­æ›´æ–°ã€TypeScript ä¸ Tailwind å¸¦æ¥çš„å¼€å‘æ•ˆç‡ï¼Œè®© AI åƒå¼€å‘æ™®é€šå‰ç«¯é¡µé¢é‚£æ ·å¼€å‘åšå®¢å›­çš®è‚¤ã€‚ä¹Ÿå¯ä»¥å°† Tona ä»“åº“ä¸­çš„æ¨¡æ¿ã€æ ¸å¿ƒåŒ…ä¸ç¤ºä¾‹çš®è‚¤ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆé«˜è´¨é‡çš„çš®è‚¤ä»£ç ã€‚

Tona æ˜¯å¼€æºé¡¹ç›®ï¼Œæ‰˜ç®¡äº [GitHub](https://github.com/guangzan/tona)ã€‚æ¬¢è¿ ğŸŒŸã€æäº¤ Issueã€å‚ä¸è®¨è®ºæˆ–è´¡çŒ®ä»£ç ï¼Œä¸€èµ·æ¨åŠ¨åšå®¢å›­çš®è‚¤å¼€å‘çš„ç°ä»£åŒ–ä¸ AI åŒ–ã€‚

7\. å‚è€ƒèµ„æ–™
--------

*   [gitHub/tona](https://github.com/guangzan/tona)
*   [ä½¿ç”¨çš®è‚¤](https://www.yuque.com/r/awescnb/books)
*   [shadcn çš®è‚¤ä¸Šçº¿](https://www.cnblogs.com/guangzan/p/19585389)