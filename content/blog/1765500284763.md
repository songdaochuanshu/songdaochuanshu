---
layout: post
title: '在windows平台搭建一个mini版本的k8s集群'
date: "2025-12-12T00:44:44Z"
---
在windows平台搭建一个mini版本的k8s集群
==========================

前置要求：
=====

1\. 安装wsl2和docker-desktop

这边安装步骤之类的网上都有，最后要达成的效果就是二者都安装ok，同时要用wsl2起一台Linux虚机即可

 2.安装kubectl

curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"
chmod +x kubectl
sudo mv kubectl /usr/local/bin/
kubectl version \--client

3.安装kind

curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.24.0/kind-linux-amd64
chmod +x ./kind
sudo mv ./kind /usr/local/bin/kind
kind version

 开始创建k8s集群
==========

1\. 目标是1 control-plane，2个worker节点，输出kind-config.yaml

kind: Cluster
apiVersion: kind.x\-k8s.io/v1alpha4
nodes:
  \- role: control-plane
  \- role: worker
  \- role: worker

kind create cluster --name demo --config kind-config.yaml

集群创建ok

 2. 尝试下基础命令是否ok，可以看到pod情况，以及node情况

3\. 安装helm，直接通过链接下载然后解压

https://get.helm.sh/helm-v3.16.2-linux-amd64.tar.gz

tar -zxvf helm-v3.16.2\-linux-amd64.tar.gz
sudo mv linux\-amd64/helm /usr/local/bin/helm
sudo chmod +x /usr/local/bin/helm

helm安装ok

chaosblade安装与使用

1.下载chaosblade-box到本地

https://github.com/chaosblade-io/chaosblade-box/releases/download/v1.0.2/chaosblade-box-1.0.2.tgz

2.安装chaosblade-box，配置属于chaosblade-box的namespace

helm install chaosblade-box ./chaosblade-box-1.0.2.tgz -n chaosblade --create-namespace --set spring.datasource.password=password

 3.查看具体情况

 4.按照同样方法安装chaosblade-cli

https://github.com/chaosblade-io/chaosblade/releases/chaosblade-1.8.0-linux\_amd64.tar.gz

下载解压，然后安装

cp chaosblade/blade /usr/local/bin/blade
chmod +x /usr/local/bin/blade

 5.安装chaosblade-operator

https://github.com/chaosblade-io/chaosblade-operator/releases/chaosblade-operator-amd64-1.8.0.tgz

下载解压，然后用helm安装operator。然后查看pod情况，可以看到每个node都有一个tool pod

helm install chaosblade-operator ./chaosblade-operator\-amd64-1.8.0.tgz -n chaosblade
kubectl get pods -n chaosblade