---
layout: post
title: 'ã€å…‰ç…§ã€‘[é«˜å…‰åå°„specular]ä»¥UnityURPä¸ºä¾‹'
date: "2025-09-24T00:39:42Z"
---
ã€å…‰ç…§ã€‘\[é«˜å…‰åå°„specular\]ä»¥UnityURPä¸ºä¾‹
===============================

![ã€å…‰ç…§ã€‘[é«˜å…‰åå°„specular]ä»¥UnityURPä¸ºä¾‹](https://img2024.cnblogs.com/blog/3685400/202509/3685400-20250923115546989-1865159139.png) æœ¬æ–‡ç³»ç»Ÿä»‹ç»äº†Unity URPæ¸²æŸ“ç®¡çº¿ä¸­çš„é«˜å…‰åå°„å®ç°æŠ€æœ¯ã€‚ä»ç»å…¸çš„Phongã€Blinn-Phongç»éªŒæ¨¡å‹åˆ°ç°ä»£çš„Cook-Torranceç‰©ç†æ¨¡å‹ï¼Œåˆ†æäº†å„æ¨¡å‹çš„è®¡ç®—åŸç†ã€ç‰¹ç‚¹åŠé€‚ç”¨åœºæ™¯ã€‚é‡ç‚¹å‰–æäº†URPé‡‡ç”¨çš„å¤šçº§é«˜å…‰ç³»ç»Ÿç­–ç•¥ï¼Œæ ¹æ®è®¾å¤‡æ€§èƒ½è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆï¼šä½ç«¯è®¾å¤‡ä½¿ç”¨Blinn-Phongç®€åŒ–æ¨¡å‹ï¼Œé«˜ç«¯è®¾å¤‡é‡‡ç”¨å®Œæ•´PBRæ–¹æ¡ˆã€‚æ–‡ç« è¿˜æä¾›äº†URPæ ¸å¿ƒä»£ç å®ç°å’Œç§»åŠ¨ç«¯ä¼˜åŒ–æŠ€å·§ï¼Œå±•ç¤ºäº†Unityåœ¨ç‰©ç†ç²¾ç¡®æ€§ä¸å®æ—¶æ€§èƒ½é—´çš„å¹³è¡¡è®¾è®¡å“²å­¦ï¼Œè¿™ç§åˆ†å±‚æ¶æ„è®¾è®¡ä½¿URPæˆä¸ºè·¨å¹³å°å¼€å‘çš„ç†æƒ³é€‰æ‹©ã€‚

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

**é«˜å…‰åå°„çš„åŸºæœ¬æµç¨‹**
=============

ç»éªŒå…‰ç…§æ¨¡å‹ä¸­çš„é«˜å…‰åå°„é€šå¸¸éµå¾ªä»¥ä¸‹æµç¨‹ï¼š

*   â€Œ**å…¥å°„å…‰è®¡ç®—**â€Œï¼šç¡®å®šå…‰æºæ–¹å‘å’Œå¼ºåº¦
*   â€Œ**è§†è§’å‘é‡è®¡ç®—**â€Œï¼šç¡®å®šè§‚å¯Ÿè€…æ–¹å‘
*   â€Œ**åå°„å‘é‡è®¡ç®—**â€Œï¼šæ ¹æ®è¡¨é¢æ³•çº¿è®¡ç®—ç†æƒ³åå°„æ–¹å‘
*   â€Œ**é«˜å…‰å¼ºåº¦è®¡ç®—**â€Œï¼šä½¿ç”¨ç‰¹å®šæ¨¡å‹è®¡ç®—é«˜å…‰åå°„å¼ºåº¦
*   â€Œ**æœ€ç»ˆåˆæˆ**â€Œï¼šå°†é«˜å…‰åå°„ä¸æ¼«åå°„å’Œç¯å¢ƒå…‰ç»“åˆ

**ä¸»è¦é«˜å…‰åå°„æ¨¡å‹åŠå®ç°**
===============

**Phongæ¨¡å‹ (1975) -ç»éªŒæ¨¡å‹**
------------------------

1975 è£´ç¥¥é£ï¼ˆBui Tuong Phongï¼‰å‰”é™¤äº†æ ‡å‡†å…‰ç…§æ¨¡å‹èƒŒåçš„åŸºæœ¬ç†å¿µã€‚æ ‡å‡†å…‰ç…§åªå…³å¿ƒç›´æ¥å…‰ç…§direct lightã€‚

*   Phongæ¨¡å‹è®¡ç®—é«˜å…‰åå°„ï¼š
    
    *   åå°„æ–¹å‘ï¼š$r=2(nÂ·I)n-I$
    *   $C\_{specular}=(C\_{light}Â·M\_{specular})max(0,vÂ·r)^{M\_{gloss}}$
    
        fixed3 reflectDir = normalize(reflect(-worldLightDir, worldNormal));
        fixed3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.worldPos.xyz);
        fixed3 specular = _LightColor0.rgb * _Specular.rgb * pow(saturate(dot(reflectDir, viewDir)), _Gloss);
        
    
    *   Mgloss æè´¨å…‰æ³½åº¦ï¼Œä¹Ÿç§°ä¸ºåå…‰åº¦shininessã€‚æ§åˆ¶é«˜å…‰åŒºåŸŸäº®ç‚¹æœ‰å¤šå®½ï¼ŒMglossè¶Šå¤§ï¼Œäº®ç‚¹è¶Šå°ã€‚

â€Œ**ç‰¹ç‚¹**â€Œï¼š

*   è®¡ç®—åå°„å‘é‡éœ€è¦é¢å¤–æ­¥éª¤
*   é«˜å…‰è¾¹ç¼˜è¿‡æ¸¡è¾ƒç¡¬
*   è®¡ç®—æˆæœ¬ä¸­ç­‰

â€Œ**Unity URPåº”ç”¨**â€Œï¼š

*   æ—©æœŸç§»åŠ¨ç«¯ç®€åŒ–ç€è‰²å™¨ä¸­ä½¿ç”¨
*   ç°åœ¨ä¸»è¦ç”¨äºæ•™å­¦æ¼”ç¤ºç›®çš„

**Blinn-Phongæ¨¡å‹ (1977) -ç»éªŒæ¨¡å‹**
------------------------------

*   Blinnæå‡ºç®€å•æ–¹æ³•å¾—å‡ºç±»ä¼¼æ•ˆæœ(Blinn-Phongé«˜å…‰åå°„å…‰ç…§)
    
    *   $h=\\frac{(v+I)}{|v+I|}$
    *   $C\_{specular}=(C\_{light}Â·M\_{specular})max(0,nÂ·h)^{M\_{gloss}}$
    
        fixed3 viewDir = normalize(_WorldSpaceCameraPos.xyz - i.worldPos.xyz);
        fixed3 halfDir = normalize(worldLightDir + viewDir);
        fixed3 specular = _LightColor0.rgb * _Specular.rgb * pow(max(0, dot(worldNormal, halfDir)), _Gloss);
        
    
    *   æ‘„åƒæœºå’Œå…‰æºè·ç¦»ç‰©ä½“è¶³å¤Ÿè¿œæ—¶ï¼Œå¯è®¤ä¸ºvå’ŒIæ˜¯å®šå€¼ï¼ŒBlinnæ¨¡å‹ä¼šå¿«äºPhongæ¨¡å‹ã€‚
    *   å½“vå’ŒIä¸å®šæ—¶ï¼ŒPhongå¯èƒ½æ›´å¿«ã€‚

â€Œ**ç‰¹ç‚¹**â€Œï¼š

*   æ¯”Phongæ¨¡å‹è®¡ç®—æ•ˆç‡æ›´é«˜
*   é«˜å…‰è¿‡æ¸¡æ›´æŸ”å’Œè‡ªç„¶
*   æˆä¸ºæ¸¸æˆè¡Œä¸šé•¿æœŸæ ‡å‡†

â€Œ**Unity URPé€‰ç”¨æ–¹æ¡ˆ**â€Œï¼š

*   URPå†…ç½®çš„SimpleLitç€è‰²å™¨ä½¿ç”¨æ­¤æ¨¡å‹
*   ç§»åŠ¨ç«¯é»˜è®¤é«˜å…‰æ–¹æ¡ˆ

**Wardå„å‘å¼‚æ€§æ¨¡å‹ (1992)**
---------------------

â€Œ**å®ç°åŸç†**â€Œï¼š

$é«˜å…‰ = å…‰æºå¼ºåº¦ Ã— ç‰¹æ®ŠBRDF Ã— exp(-tanÂ²Î¸/(Î±Â²))$

å…¶ä¸­ï¼š

*   Î¸ï¼šå¾®è¡¨é¢æ³•çº¿åå·®è§’
*   Î±ï¼šè¡¨é¢ç²—ç³™åº¦å‚æ•°

â€Œ**ç‰¹ç‚¹**â€Œï¼š

*   æ¨¡æ‹Ÿé‡‘å±/æ¯›å‘ç­‰å„å‘å¼‚æ€§æè´¨
*   è®¡ç®—å¤æ‚åº¦è¾ƒé«˜
*   éœ€è¦åˆ‡çº¿ç©ºé—´ä¿¡æ¯

â€Œ**Unity URPåº”ç”¨**â€Œï¼š

*   ä¸ç›´æ¥å†…ç½®ï¼Œéœ€è¦è‡ªå®šä¹‰ç€è‰²å™¨
*   å¸¸ç”¨äºå¤´å‘/ä¸ç»¸ç­‰ç‰¹æ®Šæè´¨
*   å®ç°ç¤ºä¾‹ï¼š

    hlsl
    float3 T = i.tangent;
    float3 B = cross(N, T);
    float dotTH = dot(T, H);
    float dotBH = dot(B, H);
    float spec = exp(-2.0*(dotTH*dotTH + dotBH*dotBH)/(1.0 + dotNH));
    

**Cook-Torranceæ¨¡å‹ (1982)**
--------------------------

â€Œ**å®ç°åŸç†**â€Œï¼š

$é«˜å…‰ = (D Ã— F Ã— G) / (4 Ã— (NÂ·V) Ã— (NÂ·L))$

åŒ…å«ä¸‰ä¸ªå‡½æ•°ï¼š

*   D (å¾®è¡¨é¢åˆ†å¸ƒ)ï¼šBeckmann/GGX
*   F (è²æ¶…å°”åå°„)ï¼šSchlickè¿‘ä¼¼
*   G (å‡ ä½•é®è”½)ï¼šSmithå‡½æ•°

â€Œ**ç‰¹ç‚¹**â€Œï¼š

*   ç‰©ç†åŸºç¡€æ¸²æŸ“(PBR)æ ¸å¿ƒæ¨¡å‹
*   è®¡ç®—æˆæœ¬æœ€é«˜
*   éœ€è¦æ›´å¤šæè´¨å‚æ•°

â€Œ**Unity URPé€‰ç”¨æ–¹æ¡ˆ**â€Œï¼š

*   URPçš„Litç€è‰²å™¨ä½¿ç”¨ç®€åŒ–ç‰ˆ
*   ä¸»è¦é‡‡ç”¨GGXåˆ†å¸ƒ+Schlickè²æ¶…å°”
*   å®ç°æ ¸å¿ƒï¼š

    hlsl
    float D = GGXDistribution(N, H, roughness);
    float F = SchlickFresnel(dot(H, V));
    float G = SmithGeometry(N, V, L, roughness);
    float spec = (D * F * G) / (4 * max(dot(N,V), 0.01) * max(dot(N,L), 0.01));
    

**Unity URPçš„é«˜å…‰å®ç°ç­–ç•¥**
====================

**å¤šçº§é«˜å…‰ç³»ç»Ÿ**
----------

URPé‡‡ç”¨åˆ†å±‚çš„é«˜å…‰å¤„ç†æ–¹æ¡ˆï¼š

è´¨é‡ç­‰çº§

ä½¿ç”¨æ¨¡å‹

ç›®æ ‡å¹³å°

ç‰¹æ€§

Low

Blinn-Phong

ä½ç«¯ç§»åŠ¨

å•å…‰æºç®€åŒ–

Medium

æ”¹è¿›Blinn-Phong

ä¸»æµç§»åŠ¨

å¤šå…‰æºæ”¯æŒ

High

Cook-Torrance

PC/ä¸»æœº

PBRå·¥ä½œæµ

Ultra

å®Œæ•´PBR

é«˜ç«¯è®¾å¤‡

å¤šæ•£å°„æ”¯æŒ

**URPæ ¸å¿ƒå®ç°**
-----------

â€Œ**Shaderæ¶æ„**â€Œï¼š

graph TD A\[URPè¾“å…¥\] --> B{è´¨é‡è®¾ç½®} B -->|Low| C\[Blinn-Phong\] B -->|Medium| D\[ä¼˜åŒ–Cook-Torrance\] B -->|High| E\[å®Œæ•´PBR\] C --> F\[å…‰ç…§ç´¯åŠ \] D --> F E --> F F --> G\[è¾“å‡ºåˆæˆ\]

â€Œ**å…³é”®ä»£ç ç‰‡æ®µ**â€Œï¼š

    hlsl
    // URPçš„BRDFå¤„ç† (BRDF.hlsl)
    half3 BRDF_Simple(
        half3 albedo, half3 specular,
        half smoothness, half3 normal,
        half3 lightDir, half3 viewDir)
    {
        half3 halfVec = SafeNormalize(lightDir + viewDir);
        half NdotH = saturate(dot(normal, halfVec));
        half modifier = pow(NdotH, smoothness * smoothness * 50.0);
        return specular * modifier;
    }
    
    // URPçš„PBR BRDF (BRDF_PBR.hlsl)
    half3 BRDF_PBR(
        half3 albedo, half metallic,
        half smoothness, half3 normal,
        half3 lightDir, half3 viewDir)
    {
        half perceptualRoughness = 1.0 - smoothness;
        half roughness = perceptualRoughness * perceptualRoughness;
    
        half3 halfVec = SafeNormalize(lightDir + viewDir);
        half NdotV = saturate(dot(normal, viewDir));
        half NdotL = saturate(dot(normal, lightDir));
    
        // GGXåˆ†å¸ƒ
        half D = DistributionGGX(normal, halfVec, roughness);
        // è²æ¶…å°”Schlickè¿‘ä¼¼
        half3 F = FresnelSchlick(halfVec, viewDir, metallic);
        // å‡ ä½•é®è”½
        half G = GeometrySmith(normal, viewDir, lightDir, roughness);
    
        return (D * F * G) / (4.0 * NdotV * NdotL + 0.0001);
    }
    

**ç§»åŠ¨ç«¯ä¼˜åŒ–æŠ€å·§**
-----------

*   â€Œ**è¿‘ä¼¼è®¡ç®—**â€Œï¼š
    *   ä½¿ç”¨åŠç²¾åº¦æµ®ç‚¹(half)
    *   é¢„è®¡ç®—è²æ¶…å°”é¡¹
    *   ç®€åŒ–å‡ ä½•å‡½æ•°
*   â€Œ**çº¹ç†çƒ˜ç„™**â€Œï¼š
    *   ç²—ç³™åº¦æ˜ å°„ä½¿ç”¨LUT
    *   ç¯å¢ƒåå°„ä½¿ç”¨ç«‹æ–¹ä½“è´´å›¾
*   â€Œ**ç€è‰²é¢‘ç‡æ§åˆ¶**â€Œï¼š
    *   é¡¶ç‚¹ç€è‰²å™¨è®¡ç®—ä½é¢‘é«˜å…‰
    *   åƒç´ ç€è‰²å™¨å¤„ç†ç»†èŠ‚

**æ–¹æ¡ˆé€‰å‹åŸå› åˆ†æ**
============

**ä¸ºä»€ä¹ˆURPé€‰æ‹©æ··åˆæ–¹æ¡ˆï¼Ÿ**
-----------------

*   â€Œ**æ€§èƒ½ä¸è´¨é‡å¹³è¡¡**â€Œï¼š
    *   ä½ç«¯è®¾å¤‡ï¼šBlinn-Phong (60%æ€§èƒ½æå‡)
    *   é«˜ç«¯è®¾å¤‡ï¼šPBR (100%ç‰©ç†å‡†ç¡®)
*   â€Œ**ç¾æœ¯å·¥ä½œæµç»Ÿä¸€**â€Œï¼š
    *   ç»Ÿä¸€çš„å…‰æ»‘åº¦å‚æ•°(0-1)
    *   è‡ªåŠ¨æ¨¡å‹åˆ‡æ¢æ— æ„ŸçŸ¥
*   â€Œ**å¹³å°é€‚åº”æ€§**â€Œï¼š
    *   æ ¹æ®GPUèƒ½åŠ›åŠ¨æ€è°ƒæ•´
    *   ä¿ç•™æ ¸å¿ƒè§†è§‰ä¸€è‡´æ€§

**æŠ€æœ¯å¯¹æ¯”æ•°æ®**
----------

æ¨¡å‹

è®¡ç®—å‘¨æœŸ

å†…å­˜è®¿é—®

è§†è§‰ä¿çœŸåº¦

Phong

18

5

70%

Blinn-Phong

15

4

75%

Cook-Torrance

35

8

95%

URPä¼˜åŒ–ç‰ˆ

22

6

88%

**å®é™…é¡¹ç›®å»ºè®®**
----------

*   â€Œ**ç§»åŠ¨æ¸¸æˆ**â€Œï¼š
    
        hlsl
        // ä½¿ç”¨SimpleLitç€è‰²å™¨
        Shader "Universal Render Pipeline/Simple Lit"
        
    
*   â€Œ**AAAçº§é¡¹ç›®**â€Œï¼š
    
        hlsl
        // ä½¿ç”¨å®Œæ•´PBRç®¡çº¿
        Shader "Universal Render Pipeline/Lit"
        
    
*   â€Œ**é£æ ¼åŒ–æ¸²æŸ“**â€Œï¼š
    
        hlsl
        // è‡ªå®šä¹‰é«˜å…‰å½¢çŠ¶
        float spec = pow(dotNH, _Glossiness) * step(0.9, dotNH);
        
    

Unity URPçš„é«˜å…‰åå°„å®ç°ä½“ç°äº†ç°ä»£æ¸²æŸ“å¼•æ“çš„è®¾è®¡å“²å­¦ï¼šåœ¨ç‰©ç†ç²¾ç¡®æ€§ä¸å®æ—¶æ€§èƒ½ä¹‹é—´å¯»æ‰¾æœ€ä½³å¹³è¡¡ç‚¹ï¼Œé€šè¿‡åˆ†å±‚æ¶æ„æ»¡è¶³ä¸åŒé¡¹ç›®éœ€æ±‚ï¼ŒåŒæ—¶ä¿æŒç¾æœ¯å·¥ä½œæµçš„ä¸€è‡´æ€§ã€‚è¿™ç§çµæ´»è€Œé«˜æ•ˆçš„è®¾è®¡ä½¿URPæˆä¸ºè·¨å¹³å°å¼€å‘çš„ç†æƒ³é€‰æ‹©ã€‚

* * *

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

ï¼ˆæ¬¢è¿_ç‚¹èµç•™è¨€_æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰