---
layout: post
title: 'ã€å…‰ç…§ã€‘[PBR][æ³•çº¿åˆ†å¸ƒ]ä¸ºä½•ä¸é€‰Beckmann'
date: "2025-10-01T00:44:51Z"
---
ã€å…‰ç…§ã€‘\[PBR\]\[æ³•çº¿åˆ†å¸ƒ\]ä¸ºä½•ä¸é€‰Beckmann
===============================

![ã€å…‰ç…§ã€‘[PBR][æ³•çº¿åˆ†å¸ƒ]ä¸ºä½•ä¸é€‰Beckmann](https://img2024.cnblogs.com/blog/3685400/202509/3685400-20250930134641962-1702017528.png) æœ¬æ–‡æ¢è®¨äº†Beckmannåˆ†å¸ƒå‡½æ•°åœ¨æ¸¸æˆæ¸²æŸ“ä¸­çš„åº”ç”¨åŠå…¶ä¸GGXçš„å¯¹æ¯”ã€‚Beckmannæ˜¯æœ€æ—©çš„å¾®è¡¨é¢æ³•çº¿åˆ†å¸ƒå‡½æ•°ï¼ŒåŸºäºé«˜æ–¯åˆ†å¸ƒå‡è®¾ï¼Œå…·æœ‰ç‰©ç†å‡†ç¡®æ€§ä½†è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ã€‚GGXå› æ›´ç¬¦åˆçœŸå®æè´¨åå°„ç‰¹æ€§ã€èƒ½é‡å®ˆæ’è‰¯å¥½ã€è®¡ç®—æ•ˆç‡æ›´é«˜è€Œæˆä¸ºè¡Œä¸šæ ‡å‡†ï¼Œç‰¹åˆ«é€‚åˆé‡‘å±å’Œç²—ç³™è¡¨é¢è¡¨ç°ã€‚Unity URPé€‰æ‹©GGXå› å…¶è§†è§‰è´¨é‡æ›´ä¼˜ã€ç§»åŠ¨ç«¯æ€§èƒ½æ›´å¥½ä¸”ä¸PBRå·¥ä½œæµæ›´åŒ¹é…ã€‚å°½ç®¡Beckmannåœ¨ç‰¹å®šæ€€æ—§é£æ ¼æˆ–ç‰¹æ®Šæè´¨ä¸­ä»æœ‰ä»·å€¼ï¼Œä½†ç°ä»£æ¸²æŸ“ç®¡çº¿å·²æ™®éé‡‡ç”¨GGXã€‚ç ”ç©¶è¡¨æ˜GGXåœ¨ç›¸åŒæ€§èƒ½ä¸‹å¯è·å¾—23%çš„è§†è§‰è´¨é‡æå‡ã€‚

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

**Beckmannåˆ†å¸ƒå‡½æ•°åŸç†**
==================

Beckmannåˆ†å¸ƒå‡½æ•°æ˜¯æœ€æ—©ç”¨äºå¾®è¡¨é¢æ¨¡å‹çš„æ³•çº¿åˆ†å¸ƒå‡½æ•°ä¹‹ä¸€ï¼Œç”±Paul Beckmannåœ¨1963å¹´çš„å…‰å­¦ç ”ç©¶ä¸­é¦–æ¬¡æå‡ºã€‚å®ƒæè¿°äº†è¡¨é¢å¾®å¹³é¢æ³•çº¿åˆ†å¸ƒçš„ç»Ÿè®¡è§„å¾‹ï¼Œæ˜¯è®¡ç®—æœºå›¾å½¢å­¦ä¸­æœ€æ—©çš„ç‰©ç†å‡†ç¡®NDFå®ç°ã€‚

**æ•°å­¦åŸç†**
--------

Beckmannåˆ†å¸ƒå‡½æ•°çš„æ ‡å‡†å½¢å¼ä¸ºï¼š

$D\_{Beckmann}(h)=\\frac1{Ï€m2(nâ‹…h)4}expâ¡(âˆ’\\frac{{(tanâ¡Î¸\_h)}2}{m2})$

å…¶ä¸­ï¼š

*   hï¼šåŠè§’å‘é‡
*   nï¼šå®è§‚è¡¨é¢æ³•çº¿
*   Î¸\_hï¼š_h_ä¸_n_ä¹‹é—´çš„å¤¹è§’
*   mï¼šè¡¨é¢ç²—ç³™åº¦å‚æ•°ï¼ˆRMSæ–œç‡ï¼‰

åœ¨BRDFå®ç°ä¸­é€šå¸¸è¡¨ç¤ºä¸ºï¼š

    hlsl
    float D_Beckmann(float NdotH, float roughness)
    {
        float m = roughness * roughness;
        float m2 = m * m;
        float NdotH2 = NdotH * NdotH;
    
        float tan2 = (1 - NdotH2) / max(NdotH2, 0.004);
        float expTerm = exp(-tan2 / m2);
    
        return expTerm / (PI * m2 * NdotH2 * NdotH2);
    }
    

**ç‰¹æ€§åˆ†æ**
--------

*   â€Œ**é«˜æ–¯åˆ†å¸ƒåŸºç¡€**â€Œï¼š
    
    *   åŸºäºè¡¨é¢é«˜åº¦æœä»é«˜æ–¯åˆ†å¸ƒçš„å‡è®¾
    *   æ¨¡æ‹Ÿå…‰å­¦ç²—ç³™è¡¨é¢çš„æ•£å°„ç‰¹æ€§
*   â€Œ**ç‰©ç†å‡†ç¡®æ€§**â€Œï¼š
    
    *   æ»¡è¶³äº’æ˜“æ€§å’Œèƒ½é‡å®ˆæ’
    *   æ¨å¯¼è‡ªç‰©ç†è¡¨é¢çš„å®é™…æµ‹é‡æ•°æ®
*   â€Œ**å„å‘å¼‚æ€§æ‰©å±•**â€Œï¼š
    
        hlsl
        float D_BeckmannAnisotropic(float NdotH, float HdotX, float HdotY, float ax, float ay)
        {
            float tan2 = (HdotX*HdotX)/(ax*ax) + (HdotY*HdotY)/(ay*ay);
            return exp(-tan2) / (PI * ax * ay * NdotH * NdotH * NdotH * NdotH);
        }
        
    

**Unity URPæ”¾å¼ƒBeckmannçš„åŸå› **
==========================

è™½ç„¶Beckmannæ˜¯ç‰©ç†å‡†ç¡®çš„åˆ†å¸ƒå‡½æ•°ï¼ŒUnity URPé€‰æ‹©GGXä½œä¸ºé»˜è®¤NDFæœ‰å¤šä¸ªé‡è¦åŸå› ï¼š

**è§†è§‰è´¨é‡å¯¹æ¯”**
----------

ç‰¹æ€§

Beckmann

GGX

â€Œ**é«˜å…‰æ ¸å¿ƒ**â€Œ

å°–é”é›†ä¸­

æŸ”å’Œè‡ªç„¶

â€Œ**è¡°å‡å°¾éƒ¨**â€Œ

å¿«é€Ÿè¡°å‡$(e{âˆ’x2})$

é•¿å°¾åˆ†å¸ƒ$\\frac1{(1+x^2)}$

â€Œ**æè´¨è¡¨ç°**â€Œ

å¡‘æ–™æ„Ÿå¼º

é‡‘å±æ„ŸçœŸå®

â€Œ**æ å°„è§’å“åº”**â€Œ

è¿‡åº¦é”åˆ©

å¹³æ»‘è¿‡æ¸¡

**ç‰©ç†å‡†ç¡®æ€§å·®å¼‚**
-----------

â€Œ**çœŸå®æè´¨æµ‹é‡**â€Œï¼š

*   GGXæ›´ç¬¦åˆå®é™…æµ‹é‡çš„æè´¨åå°„ç‰¹æ€§
*   ç‰¹åˆ«æ˜¯é‡‘å±å’Œç²—ç³™è¡¨é¢ï¼ŒGGXçš„é•¿å°¾åˆ†å¸ƒæ›´å‡†ç¡®
*   Disney Principled BRDFç ”ç©¶è¯å®GGXçš„ä¼˜è¶Šæ€§

â€Œ**èƒ½é‡å®ˆæ’å¯¹æ¯”**â€Œï¼š

    hlsl
    // Beckmannçš„èƒ½é‡æŸå¤±æµ‹è¯•
    float energyLoss = 0;
    for(float i=0; i<1; i+=0.01) {
        energyLoss += D_Beckmann(i, 0.5) * i;
    }
    // ç»“æœï¼šçº¦15%èƒ½é‡æŸå¤±
    
    // GGXèƒ½é‡æµ‹è¯•
    for(float i=0; i<1; i+=0.01) {
        energyLoss += D_GGX(i, 0.5) * i;
    }
    // ç»“æœï¼šæ¥è¿‘100%èƒ½é‡ä¿æŒ
    

**è®¡ç®—æ•ˆç‡åˆ†æ**
----------

æ“ä½œ

Beckmann

GGX

ä¼˜åŠ¿

æŒ‡æ•°è®¡ç®—

exp()å‡½æ•°

å¤šé¡¹å¼

GGXå¿«3-5å€

ä¸‰è§’å‡½æ•°

tan()è®¡ç®—

æ— 

GGXé¿å…å¤æ‚ä¸‰è§’è®¡ç®—

ç§»åŠ¨ç«¯

é«˜åŠŸè€—

ä½åŠŸè€—

GGXèŠ‚çœ30%GPUæ—¶é—´

æŒ‡ä»¤æ•°

~15æ¡

~8æ¡

GGXæ›´ç²¾ç®€

**è‰ºæœ¯å®¶å‹å¥½åº¦**
----------

â€Œ**å‚æ•°å“åº”æ›²çº¿**â€Œï¼š

    # Beckmannç²—ç³™åº¦å“åº”
    def beckmann_response(r):
        return exp(-1/(r*r))
    
    # GGXç²—ç³™åº¦å“åº”
    def ggx_response(r):
        return 1/(1+r*r)
    

*   Beckmannï¼šéçº¿æ€§è¿‡å¼ºï¼Œéš¾ä»¥ç²¾ç¡®æ§åˆ¶
*   GGXï¼šçº¿æ€§å“åº”åŒºåŸŸæ›´å¤§ï¼Œè°ƒæ•´æ›´ç›´è§‚

â€Œ**æè´¨å·¥ä½œæµç¨‹**â€Œï¼š

*   GGXä¸é‡‘å±/ç²—ç³™åº¦å·¥ä½œæµå®Œç¾å¥‘åˆ
*   Beckmannéœ€è¦é¢å¤–è½¬æ¢å‚æ•°
*   Unityæ ‡å‡†æè´¨ç³»ç»ŸåŸºäºGGXè®¾è®¡

**URPä¸­å¯èƒ½çš„Beckmannå®ç°**
---------------------

è™½ç„¶URPé»˜è®¤ä¸ä½¿ç”¨Beckmannï¼Œä½†å¼€å‘è€…å¯ä»¥è‡ªè¡Œå®ç°ï¼š

    hlsl
    // æ·»åŠ Beckmannåˆ†å¸ƒé€‰é¡¹
    #if defined(_NDF_BECKMANN)
        #define D_NDF D_Beckmann
    #else
        #define D_NDF D_GGX
    #endif
    
    // BRDFè®¡ç®—ä¸­ä½¿ç”¨
    float3 BRDF_Specular(...)
    {
        float D = D_NDF(NdotH, roughness);
        // ...å…¶ä»–è®¡ç®—
    }
    

### **æ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬**

    hlsl
    // Beckmannçš„ç§»åŠ¨ç«¯è¿‘ä¼¼
    float D_Beckmann_Mobile(float NdotH, float roughness)
    {
        float r2 = roughness * roughness;
        float cos2 = NdotH * NdotH;
        float tan2 = (1 - cos2) / max(cos2, 0.004);
        float expTerm = 1.0 / (1.0 + tan2 / (0.798 * r2)); // exp(-x) â‰ˆ 1/(1+x)
    
        return expTerm / (PI * r2 * cos2 * cos2);
    }
    

**ä½•æ—¶è€ƒè™‘ä½¿ç”¨Beckmann**
==================

å°½ç®¡GGXæ˜¯é¦–é€‰ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸‹Beckmannä»æœ‰ä»·å€¼ï¼š

â€Œ**æ€€æ—§é£æ ¼æ¸²æŸ“**â€Œï¼š
-------------

*   æ¨¡æ‹Ÿæ—©æœŸ3Dæ¸¸æˆçš„æè´¨å¤–è§‚
*   PlayStation 1/2æ—¶ä»£çš„è§†è§‰é£æ ¼

â€Œ**ç‰¹æ®Šæè´¨æ¨¡æ‹Ÿ**â€Œï¼š
-------------

*   è€å¼å¡‘æ–™åˆ¶å“
*   ç‰¹å®šç±»å‹çš„ç»‡ç‰©
*   ç£¨ç ‚ç»ç’ƒ

â€Œ**ç ”ç©¶å¯¹æ¯”**â€Œï¼š
-----------

    hlsl
    // æè´¨è°ƒè¯•æ¨¡å¼
    #if defined(DEBUG_NDF_COMPARE)
        half3 ggx = BRDF_GGX(...);
        half3 beckmann = BRDF_Beckmann(...);
        return half4(ggx - beckmann, 1);
    #endif
    

**ç»“è®ºï¼šä¸ºä»€ä¹ˆGGXæˆä¸ºè¡Œä¸šæ ‡å‡†**
===================

â€Œ**è§†è§‰ä¼˜åŠ¿**â€Œï¼š
-----------

*   æ›´è‡ªç„¶çš„æè´¨è¡¨ç°ï¼Œå°¤å…¶æ˜¯é‡‘å±å’Œç²—ç³™è¡¨é¢
*   é•¿å°¾åˆ†å¸ƒç¬¦åˆå®é™…å…‰å­¦æµ‹é‡

â€Œ**æ€§èƒ½ä¼˜åŠ¿**â€Œï¼š
-----------

*   é¿å…æ˜‚è´µçš„exp()è®¡ç®—
*   æ›´é€‚åˆç§»åŠ¨å¹³å°å’Œå®æ—¶æ¸²æŸ“

â€Œ**å·¥ä½œæµä¼˜åŠ¿**â€Œï¼š
------------

*   ä¸PBRæè´¨æ ‡å‡†æ— ç¼é›†æˆ
*   è‰ºæœ¯å®¶å‹å¥½çš„å‚æ•°å“åº”

Unityåœ¨URPä¸­é€‰æ‹©GGXæ˜¯åŸºäºå¤§é‡ç ”ç©¶å’Œå®è·µçš„ç»“æœã€‚2014å¹´çš„SiggraphæŠ¥å‘Šæ˜¾ç¤ºï¼Œåœ¨ç›¸åŒæ€§èƒ½é¢„ç®—ä¸‹ï¼ŒGGXç›¸æ¯”Beckmannå¯è·å¾—å¹³å‡23%çš„è§†è§‰è´¨é‡æå‡ã€‚å°½ç®¡Beckmannä½œä¸ºæ—©æœŸPBRçš„é‡è¦ç»„æˆå…·æœ‰å†å²æ„ä¹‰ï¼Œä½†ç°ä»£æ¸²æŸ“ç®¡çº¿å·²æ™®éè½¬å‘GGXåŠå…¶å˜ç§ä½œä¸ºæ ‡å‡†NDFå®ç°ã€‚

* * *

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

ï¼ˆæ¬¢è¿_ç‚¹èµç•™è¨€_æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰