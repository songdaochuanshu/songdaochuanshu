---
layout: post
title: 'SwiftUI NavigatorStack å¯¼èˆªå®¹å™¨'
date: "2025-10-24T00:37:47Z"
---
SwiftUI NavigatorStack å¯¼èˆªå®¹å™¨
===========================

NavigationStack æ˜¯ä¸€ä¸ªç”¨çŠ¶æ€é©±åŠ¨ã€ç±»å‹å®‰å…¨çš„å£°æ˜å¼å¯¼èˆªå®¹å™¨ï¼Œå®ƒé€šè¿‡ç®¡ç†è§†å›¾å †æ ˆå’Œå¯¼èˆªè·¯å¾„æ¥å®ç° SwiftUI åº”ç”¨ä¸­çš„é¡µé¢å¯¼èˆªï¼ˆä¸“æ³¨äºå•æ åœºæ™¯ï¼‰

NavigationStack éœ€è¦ iOS 16.0+ä»¥ä¸Šç‰ˆæœ¬æ”¯æŒã€‚

æ ¸å¿ƒè¦ç´ 
----

    NavigationStack (å¯¼èˆªå®¹å™¨)
        â”‚
        â”œâ”€â”€ ç®¡ç† NavigationPath (çŠ¶æ€å­˜å‚¨)
        â”‚
        â”œâ”€â”€ åŒ…å« navigationDestination (è·¯ç”±é…ç½®)
        â”‚       â”‚
        â”‚       â””â”€â”€ åˆ¤æ–­æ•°æ®ç±»å‹ â†’ æ˜ å°„å¯¹åº”çš„è§†å›¾
        â”‚
        â””â”€â”€ è§†å›¾å±‚ï¼ˆå¯¼èˆªçš„èµ·ç‚¹ï¼‰
    

> NavigationPath æ˜¯å¯¼èˆªè·¯å¾„å®¹å™¨ï¼Œç”¨äºç®¡ç† NavigationStack çš„å¯¼èˆªçŠ¶æ€å’Œå†å²è®°å½•

> navigationDestination æ˜¯è§†å›¾ä¿®é¥°ç¬¦ï¼Œç”¨äºå®šä¹‰æ•°æ®ç±»å‹åˆ°ç›®æ ‡è§†å›¾çš„æ˜ å°„å…³ç³»ï¼Œç›¸å½“äºå¯¼èˆªç³»ç»Ÿçš„è·¯ç”±è¡¨

åŸºæœ¬ç”¨æ³•
----

#### 1ã€ç®€å•é¡µé¢è·³è½¬

å¯NavigationStacké…åˆNavigationLinkå®ç°ï¼ˆä¸éœ€è¦ä½¿ç”¨NavigationPathè®°å½•ã€ç®¡ç†è·¯å¾„ï¼‰

    struct ContentView: View {
        var body: some View {
            NavigationStack {
                List {
                    NavigationLink("å‰å¾€è¯¦æƒ…é¡µ", value: "è¯¦æƒ…å†…å®¹")
                    NavigationLink("è®¾ç½®", value: "è®¾ç½®é¡µé¢")
                }
                .navigationDestination(for: String.self) { value in
                    DetailView(content: value)
                }
            }
        }
    }
    
    struct DetailView: View {
        let content: String
        var body: some View {
            Text("è¯¦æƒ…: \(content)")
                .navigationTitle("è¯¦æƒ…é¡µ")
        }
    }
    

#### 2ã€ç®€å•é¡µé¢è·³è½¬ï¼šå¤šç±»å‹è·¯ç”±æ˜ å°„

å¾ˆå¤šæ—¶å€™ï¼ŒnavigationDestinationæ˜ å°„çš„valueç±»å‹å¹¶éåªæœ‰ä¸€ç§ï¼š

    struct Test: View {
        var body: some View {
            NavigationStack {
                List {
                    // ä½¿ç”¨ value å‚æ•° - å¿…é¡»éµå¾ª Hashableï¼ˆswiftå€¼ç±»å‹æ•°æ®é»˜è®¤éµå¾ªHashableåè®®ï¼‰
                    NavigationLink("ä½¿ç”¨ value", value: "å­—ç¬¦ä¸²å€¼")
                    NavigationLink("ä½¿ç”¨æ•°å­—", value: 42)
                }
                .navigationDestination(for: String.self) { value in
                    Text("å­—ç¬¦ä¸²å€¼: \(value)")
                }
                .navigationDestination(for: Int.self) { value in
                    Text("æ•´æ•°å€¼: \(value)")
                }
            }
        }
    }
    

#### 3ã€ç®€å•é¡µé¢è·³è½¬ï¼šå¤šç±»å‹è·¯ç”±æ˜ å°„2

ä¹Ÿå¯ä½¿ç”¨æšä¸¾ç®¡ç†å¤šç§æ•°æ®ç±»å‹ï¼š

    //æ³¨æ„valueç±»å‹ï¼Œéœ€è¦éµå¾ªHashable
    enum Route: Hashable {
        case product(Int)
        case profile(String)
        case settings
    }
    
    struct MultiTypeNavigationView: View {
        var body: some View {
            NavigationStack {
                VStack(spacing: 20) {
                    NavigationLink("äº§å“è¯¦æƒ…", value: Route.product(123))
                    NavigationLink("ç”¨æˆ·èµ„æ–™", value: Route.profile("å¼ ä¸‰"))
                    NavigationLink("è®¾ç½®", value: Route.settings)
                }
                .navigationDestination(for: Route.self) { route in
                    switch route {
                    case .product(let id):
                        ProductDetailView(productId: id)
                    case .profile(let username):
                        ProfileView(username: username)
                    case .settings:
                        SettingsView()
                    }
                }
            }
        }
    }
    

#### 4ã€å¤šå±‚é¡µé¢è·³è½¬

å¯ä½¿ç”¨NavigationStackã€NavigationPathå®ç°

NavigationPathæä¾›äº†ä»¥ä¸‹æ–¹æ³•ç”¨äºç®¡ç†è·¯å¾„ï¼š

> append() : è·³è½¬åˆ°æ–°é¡µé¢

> removeLast(): è¿”å›ä¸Šä¸€é¡µ

> removeLast(n): è¿”å›å‰né¡µ

> removeAll(): è¿”å›é¦–é¡µ

> count: æ˜¾ç¤ºå½“å‰å¯¼èˆªæ·±åº¦

> Codable: å®ç°çŠ¶æ€æŒä¹…åŒ–å’Œæ·±åº¦é“¾æ¥

    import SwiftUI
    
    // å®šä¹‰è·¯ç”±æšä¸¾
    enum Route: Hashable {
        case detail(String)
        case settings
        case profile(Int)
    }
    
    struct ContentView: View {
        @State private var path = NavigationPath()
        
        var body: some View {
            NavigationStack(path: $path) {
                List {
                    Button("è·³è½¬åˆ°è¯¦æƒ…é¡µ") {
                        path.append(Route.detail("Hello World"))
                    }
                    
                    Button("è·³è½¬åˆ°è®¾ç½®") {
                        path.append(Route.settings)
                    }
                    
                    Button("è·³è½¬åˆ°ç”¨æˆ·èµ„æ–™") {
                        path.append(Route.profile(123))
                    }
                    
                    Button("å¤šå±‚çº§è·³è½¬") {
                        path.append(Route.detail("ç¬¬ä¸€å±‚"))
                        path.append(Route.settings)
                        path.append(Route.profile(456))
                    }
                }
                .navigationTitle("é¦–é¡µ")
                .navigationDestination(for: Route.self) { route in
                    switch route {
                    case .detail(let text):
                        DetailView(text: text, path: $path)
                    case .settings:
                        SettingsView(path: $path)
                    case .profile(let userId):
                        ProfileView(userId: userId, path: $path)
                    }
                }
            }
        }
    }
    
    struct DetailView: View {
        let text: String
        @Binding var path: NavigationPath
        
        var body: some View {
            VStack {
                Text("è¯¦æƒ…é¡µ: \(text)")
                    .font(.title)
                
                Button("å‰å¾€ä¸‹ä¸€å±‚") {
                    path.append(Route.detail("ä»è¯¦æƒ…é¡µè·³è½¬"))
                }
                
                Button("è¿”å›é¦–é¡µ") {
                    path.removeLast(path.count)
                }
                
                Button("è¿”å›ä¸Šä¸€å±‚") {
                    path.removeLast()
                }
            }
        }
    }
    
    struct SettingsView: View {
        @Binding var path: NavigationPath
        
        var body: some View {
            VStack {
                Text("è®¾ç½®é¡µé¢")
                    .font(.title)
                
                Button("è¿”å›") {
                    path.removeLast()
                }
            }
        }
    }
    
    struct ProfileView: View {
        let userId: Int
        @Binding var path: NavigationPath
        
        var body: some View {
            VStack {
                Text("ç”¨æˆ·èµ„æ–™: \(userId)")
                    .font(.title)
                
                Button("è·³è½¬åˆ°è¯¦æƒ…") {
                    path.append(Route.detail("æ¥è‡ªç”¨æˆ·èµ„æ–™"))
                }
            }
        }
    }
    

#### 5ã€Hashable çš„ä½œç”¨

> å¯¼èˆªå¿…éœ€ï¼šNavigationLink çš„ value å‚æ•°å¿…é¡»éµå¾ª Hashable

> è·¯å¾„ç®¡ç†ï¼šNavigationPath ä¾èµ– Hashable æ¥è·Ÿè¸ªå¯¼èˆªçŠ¶æ€

> å”¯ä¸€æ€§åˆ¤æ–­ï¼šç”¨äºæ¯”è¾ƒä¸¤ä¸ªå®ä¾‹æ˜¯å¦ä»£è¡¨ç›¸åŒçš„å¯¼èˆªç›®æ ‡

###### 5.1ã€NavigationLink çš„ Hashable è¦æ±‚

    struct NavigationLinkRequirement: View {
        var body: some View {
            NavigationStack {
                List {
                    // âœ… å½¢å¼1ï¼šä½¿ç”¨ value å‚æ•° - å¿…é¡»éµå¾ª Hashable
                    NavigationLink("ä½¿ç”¨ value", value: "å­—ç¬¦ä¸²å€¼")
                    NavigationLink("ä½¿ç”¨æ•°å­—", value: 42)
                    
                    // âŒ è¿™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º MyData ä¸éµå¾ª Hashable
                    // NavigationLink("æ— æ•ˆ", value: MyData())
                    
                    // âœ… å½¢å¼2ï¼šä½¿ç”¨ destination å‚æ•° - ä¸éœ€è¦ Hashable
                    NavigationLink("ä½¿ç”¨ destination") {
                        MyCustomView()
                    }
                    
                    // âœ… ä¼ ç»Ÿå½¢å¼ - ä¸éœ€è¦ Hashable
                    NavigationLink("ä¼ ç»Ÿå½¢å¼", destination: Text("ç›®æ ‡è§†å›¾"))
                }
                .navigationDestination(for: String.self) { value in
                    Text("å­—ç¬¦ä¸²å€¼: \(value)")
                }
                .navigationDestination(for: Int.self) { value in
                    Text("æ•´æ•°å€¼: \(value)")
                }
            }
        }
    }
    
    // âŒ ä¸éµå¾ª Hashable çš„ç±»å‹
    struct MyData {
        let content: String
    }
    
    struct MyCustomView: View {
        var body: some View {
            Text("è‡ªå®šä¹‰è§†å›¾")
        }
    }
    

###### 5.2ã€NavigationPath çš„ Hashable è¦æ±‚

    struct NavigationPathExample: View {
        @State private var path = NavigationPath()
        
        var body: some View {
            NavigationStack(path: $path) {
                VStack(spacing: 20) {
                    Text("NavigationPath æ¼”ç¤º")
                        .font(.title)
                    
                    Button("æ·»åŠ å­—ç¬¦ä¸²") {
                        // âœ… å­—ç¬¦ä¸²éµå¾ª Hashable
                        path.append("æ–°é¡µé¢")
                    }
                    
                    Button("æ·»åŠ æ•´æ•°") {
                        // âœ… æ•´æ•°éµå¾ª Hashable
                        path.append(100)
                    }
                    
                    Button("æ·»åŠ è‡ªå®šä¹‰ç±»å‹") {
                        // âœ… åªè¦éµå¾ª Hashable å°±å¯ä»¥
                        path.append(MyHashableData(name: "æµ‹è¯•", id: 1))
                    }
                    
                    // âŒ è¿™ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
                    Button("æ·»åŠ é Hashable ç±»å‹ï¼ˆä¼šå´©æºƒï¼‰") {
                        // path.append(MyData()) // å–æ¶ˆæ³¨é‡Šä¼šå´©æºƒ
                    }
                    
                    Button("æŸ¥çœ‹è·¯å¾„æ·±åº¦: \(path.count)") {
                        print("å½“å‰è·¯å¾„æ·±åº¦: \(path.count)")
                    }
                    
                    Button("è¿”å›") {
                        if !path.isEmpty {
                            path.removeLast()
                        }
                    }
                    
                    Button("è¿”å›æ ¹è§†å›¾") {
                        path = NavigationPath() // é‡ç½®è·¯å¾„
                    }
                }
                .navigationDestination(for: String.self) { value in
                    Text("å­—ç¬¦ä¸²é¡µé¢: \(value)")
                }
                .navigationDestination(for: Int.self) { value in
                    Text("æ•´æ•°é¡µé¢: \(value)")
                }
                .navigationDestination(for: MyHashableData.self) { data in
                    Text("è‡ªå®šä¹‰æ•°æ®: \(data.name) - \(data.id)")
                }
            }
        }
    }
    
    // âœ… éµå¾ª Hashable çš„è‡ªå®šä¹‰ç±»å‹
    struct MyHashableData: Hashable {
        let name: String
        let id: Int
    }
    

#### 6ã€å¯¼èˆªæ UIè‡ªå®šä¹‰

NavigationStack å¯¼èˆªç»“æ„å›¾ï¼š

    NavigationStack (å®¹å™¨å±‚)
        â”‚
        â”œâ”€â”€ ğŸ·ï¸ NavigationBar (å¯¼èˆªæ å±‚)
        â”‚       â”‚
        â”‚       â”œâ”€â”€ â—€ï¸ [toolbar: .topBarLeading]
        â”‚       â”‚     â† è¿”å›æŒ‰é’® / èœå•æŒ‰é’®
        â”‚       â”‚
        â”‚       â”œâ”€â”€ ğŸ·ï¸ [navigationTitle]
        â”‚       â”‚     â† é¡µé¢æ ‡é¢˜ (å±…ä¸­æ˜¾ç¤º)
        â”‚       â”‚
        â”‚       â””â”€â”€ â–¶ï¸ [toolbar: .topBarTrailing]
        â”‚             â† ç¼–è¾‘æŒ‰é’® / æ›´å¤šæ“ä½œ
        â”‚
        â””â”€â”€ ğŸ“± Content (å†…å®¹å±‚)
              â† ä½ çš„ä¸»è¦è§†å›¾å†…å®¹
              â† å¯ä»¥ç‹¬ç«‹æ»šåŠ¨
    

    NavigationStack {                    // â† æ ¹å®¹å™¨
        ContentView()                    // â† ğŸ“± å†…å®¹å±‚
            .navigationTitle("æ ‡é¢˜")     // â† ğŸ·ï¸ ä¸­å¤®æ ‡é¢˜
            .toolbar {
                ToolbarItem(placement: .topBarLeading) {  // â† â—€ï¸ å·¦ä¾§
                    Button("è¿”å›") { ... }
                }
                ToolbarItem(placement: .topBarTrailing) { // â† â–¶ï¸ å³ä¾§  
                    Button("ç¼–è¾‘") { ... }
                }
            }
    }
    

è‡ªå®šä¹‰å¯¼èˆªæ å¤–è§‚ï¼Œå‚è€ƒæ¡ˆä¾‹ï¼š

    struct CustomNavigationView: View {
        var body: some View {
            NavigationStack {
                List {
                    NavigationLink("æ ‡å‡†é¡µé¢", value: "standard")
                    NavigationLink("è‡ªå®šä¹‰æ ‡é¢˜é¡µé¢", value: "custom")
                    NavigationLink("éšè—å¯¼èˆªæ é¡µé¢", value: "hidden")
                }
                .navigationDestination(for: String.self) { value in
                    switch value {
                    case "standard":
                        StandardView()
                    case "custom":
                        CustomTitleView()
                    case "hidden":
                        HiddenNavBarView()
                    default:
                        Text("æœªçŸ¥é¡µé¢")
                    }
                }
                .navigationTitle("å¯¼èˆªæ¼”ç¤º")
                .toolbar {
                    ToolbarItem(placement: .navigationBarTrailing) {
                        Button("è®¾ç½®") {
                            print("è®¾ç½®æŒ‰é’®ç‚¹å‡»")
                        }
                    }
                }
            }
            .tint(.purple) // ç»Ÿä¸€è‰²è°ƒ
        }
    }
    
    struct StandardView: View {
        var body: some View {
            Text("æ ‡å‡†é¡µé¢")
                .navigationTitle("æ ‡å‡†æ ‡é¢˜")
                .navigationBarTitleDisplayMode(.automatic)
        }
    }
    
    struct CustomTitleView: View {
        var body: some View {
            VStack {
                Text("è‡ªå®šä¹‰æ ‡é¢˜é¡µé¢")
                
                // è‡ªå®šä¹‰æ ‡é¢˜è§†å›¾
                Color.blue
                    .frame(height: 200)
                    .overlay(
                        Text("å¤§æ ‡é¢˜")
                            .font(.largeTitle)
                            .foregroundColor(.white)
                    )
            }
            .navigationBarTitleDisplayMode(.inline)
            .toolbar {
                ToolbarItem(placement: .principal) {
                    VStack {
                        Text("è‡ªå®šä¹‰æ ‡é¢˜")
                            .font(.headline)
                        Text("å‰¯æ ‡é¢˜")
                            .font(.subheadline)
                            .foregroundColor(.secondary)
                    }
                }
            }
        }
    }
    
    struct HiddenNavBarView: View {
        var body: some View {
            Text("éšè—å¯¼èˆªæ é¡µé¢")
                .navigationBarBackButtonHidden(true)
                .navigationBarHidden(true)
                .toolbar(.hidden, for: .navigationBar)
        }
    }