---
layout: post
title: 'ç®€å•è¯´è¯´C#ä¸­å§”æ‰˜çš„ä½¿ç”¨-01'
date: "2025-05-27T00:40:39Z"
---
ç®€å•è¯´è¯´C#ä¸­å§”æ‰˜çš„ä½¿ç”¨-01
===============

ç®€å•è¯´è¯´C#ä¸­å§”æ‰˜çš„ä½¿ç”¨-01
===============

ğŸ“‘å‰è¨€
----

è·ç¦»ä¸Šæ¬¡æ›´æ–°æ–‡ç« ï¼Œå·²ç»è¿‡å»...æœˆäº†ã€‚

æ²¡æ›´æ–°æ–‡ç« çš„ä¸»è¦åŸå› ï¼Œä¸»è¦æ˜¯å› ä¸ºå‚åŠ å·¥ä½œåï¼Œæ„Ÿè§‰æ€ç»´æ²¡æœ‰ä¸Šå­¦é‚£ä¼šæ´»è·ƒï¼Œå†™æ–‡ç« æ²¡æœ‰æ€ç»ªã€‚å†å°±æ˜¯ä¸Šç­çš„æ—¶å€™æŠŠç²¾åŠ›ç”¨å…‰äº†ï¼Œä¸‹ç­ååªé¡¾ç€æ‰“æ¸¸æˆğŸ®ï¼Œæ²¡æœ‰æ¢å¤ç²¾åŠ›å’Œå­¦ä¹ ğŸ“šã€‚

åœ¨å…¬å¸ç½‘ä¸Šå†²æµªğŸ„çš„æ—¶å€™ï¼Œçœ‹åˆ°äº†ä¸€ç¯‡è®²è§£`C#`å§”æ‰˜çš„æ–‡ç« ï¼Œæ–‡ç« ä¸­æè¿°å§”æ‰˜çš„ä½¿ç”¨ï¼Œé€‰æ‹©çš„ä¾‹å­å¾ˆä¸é”™(é“¾æ¥åœ¨æ–‡æœ«)ã€‚åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘å†™çš„æœ€å¤šçš„å°±æ˜¯CRUDäº†ï¼Œä»–è¿™ç¯‡æ–‡ç« ä½¿ç”¨çš„æ˜¯å¯¼å‡ºexcelçš„ä¾‹å­ã€‚

å¹³æ—¶å¼€å‘ä¸­ï¼Œæˆ‘ä¹Ÿå†™è¿‡excelå¯¼å‡ºçš„åŠŸèƒ½ï¼Œä½†æ˜¯å¥½åƒå¹¶æ²¡æœ‰ç”¨åˆ°å§”æ‰˜ã€‚ç»è¿‡æˆ‘çš„è¯¦ç»†åå¤é˜…è¯»ä¹‹åï¼Œä»Šå¤©è¿™ç¯‡æ–‡ç« æˆ‘å°±ç”¨å¦å¤–ä¸€ä¸ªä¾‹å­æè¿°ä¸‹å¦‚ä½•åœ¨`C#`ä¸­ä½¿ç”¨å§”æ‰˜ã€‚

ğŸ“–å§”æ‰˜ç®€è¿°
------

åœ¨C#ä¸­ï¼Œå§”æ‰˜ï¼ˆDelegateï¼‰æ˜¯ä¸€ç§ç±»å‹ï¼Œå®ƒå®šä¹‰äº†æ–¹æ³•çš„ç±»å‹ï¼Œä½¿å¾—å¯ä»¥å°†æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ é€’æˆ–ä½œä¸ºè¿”å›å€¼ã€‚

âœ¨å§”æ‰˜ä½¿ç”¨
-----

### ä¾‹å­

> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¢å•ç³»ç»Ÿï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„ä¿ƒé”€ç­–ç•¥è®¡ç®—è®¢å•çš„æœ€ç»ˆä»·æ ¼ã€‚ä¸åŒçš„ä¿ƒé”€ç­–ç•¥å¯èƒ½æ˜¯ï¼š
> 
> 1.  å›ºå®šæŠ˜æ‰£ï¼ˆå‡ 10 å…ƒï¼‰ã€‚
> 2.  ç™¾åˆ†æ¯”æŠ˜æ‰£ï¼ˆæ‰“ 8 æŠ˜ï¼‰ã€‚
> 3.  æ»¡å‡ä¼˜æƒ ï¼ˆæ»¡ 100 å‡ 20ï¼‰ã€‚
> 
> æˆ‘ä»¬å¸Œæœ›é€šè¿‡å§”æ‰˜åŠ¨æ€ä¼ é€’è¿™äº›ç­–ç•¥ï¼Œè€Œä¸æ˜¯å†™æ­»é€»è¾‘ã€‚

### åšä¸»å†™æ³•

    public static void Main()
    {
        // å‡è®¾è®¢å•çš„åŸä»·ä¸º 100 å…ƒ
        decimal price = 100;
    
        // å‡è®¾ä¿ƒé”€ç±»å‹ä¸º "Fixed"
        string type = "Fixed";
    
        // è®¡ç®—è®¢å•çš„æœ€ç»ˆä»·æ ¼
        decimal finalPrice = ProcessOrder(price, type);
    
        // è¾“å‡ºæœ€ç»ˆä»·æ ¼
        Console.WriteLine("Final price: " + finalPrice);
    }
    
    private static decimal ProcessOrder(decimal price, string type)
    {
        if (type == "Fixed")
            return price - 10;
        else if (type == "Percentage")
            return price * 0.8m;
        else
            return price;
    }
    

å¤ªä¼˜é›…äº†~

### å§”æ‰˜å†™æ³•

#### ç¬¬ä¸€æ­¥ï¼šå®šä¹‰å§”æ‰˜ç±»å‹

    // å§”æ‰˜ç±»å‹ï¼šè¾“å…¥è®¢å•é‡‘é¢ï¼ˆdecimalï¼‰ï¼Œè¿”å›æŠ˜æ‰£åçš„é‡‘é¢ï¼ˆdecimalï¼‰
    public delegate decimal DiscountStrategy(decimal originalPrice);
    

#### ç¬¬äºŒæ­¥ï¼šå®ç°å…·ä½“æŠ˜æ‰£æ–¹æ³•

ä¸ºæ¯ç§ä¿ƒé”€ç­–ç•¥å†™ä¸€ä¸ªåŒ¹é…å§”æ‰˜ç­¾åçš„æ–¹æ³•ï¼š

    // å›ºå®šæŠ˜æ‰£ï¼ˆå‡ 10 å…ƒï¼‰
    public static decimal FixedDiscount(decimal originalPrice)
    {
    	return originalPrice - 10;
    }
    // ç™¾åˆ†æ¯”æŠ˜æ‰£ï¼ˆæ‰“ 8 æŠ˜ï¼‰
    public static decimal PercentageDiscount(decimal originalPrice)
    {
    	return originalPrice * 0.8m;
    }
    // æ»¡å‡ä¼˜æƒ ï¼ˆæ»¡ 100 å‡ 20ï¼‰
    public static decimal ThresholdDiscount(decimal originalPrice)
    {
    	if (originalPrice >= 100)
    	{
    		return originalPrice - 20;
    	}
    	return originalPrice;
    }
    

#### ç¬¬ä¸‰æ­¥ï¼šä½¿ç”¨å§”æ‰˜ä¼ é€’æ–¹æ³•

æ–°å»ºè®¢å•ç±»ï¼Œæ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„æŠ˜æ‰£ç­–ç•¥ï¼š

    public class OrderProcessor
    {
        // æ–¹æ³•ï¼šè®¡ç®—è®¢å•æœ€ç»ˆä»·æ ¼ï¼Œæ¥æ”¶ä¸€ä¸ªå§”æ‰˜å‚æ•°
        public decimal ProcessOrder(decimal originalPrice, DiscountStrategy discountStrategy)
        {
            // è°ƒç”¨å§”æ‰˜ï¼Œè‡ªåŠ¨æ‰§è¡Œä¼ å…¥çš„ç­–ç•¥æ–¹æ³•
            return discountStrategy(originalPrice);
        }
    }
    

#### ç¬¬å››æ­¥ï¼šè°ƒç”¨

    public static void Main()
    {
    	var processor = new OrderProcessor();
    	// é€‰æ‹©ç­–ç•¥
    	DiscountStrategy currentStrategy = PercentageDiscount;
    
    	// è®¡ç®—ä»·æ ¼
    	decimal finalPrice = processor.ProcessOrder(100, currentStrategy);
    	Console.WriteLine($"ç™¾åˆ†æ¯”æŠ˜æ‰£åä»·æ ¼ï¼š{finalPrice}");
    }
    

#### è¾“å‡ºç»“æœ

![image](https://img2024.cnblogs.com/blog/3091176/202505/3091176-20250526172250017-1499353730.png)

### è¿›é˜¶å§”æ‰˜å†™æ³•

ä½¿ç”¨ `Func/Action` å®ç°å§”æ‰˜

#### ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨ `Func<decimal, decimal>` å®šä¹‰æ›¿ä»£`delegate`å§”æ‰˜

    // ä¸éœ€è¦å®šä¹‰ delegateï¼Œç›´æ¥ç”¨ Func<è¾“å…¥å‚æ•°ç±»å‹, è¿”å›å€¼ç±»å‹>
    public class OrderProcessor
    {
        // æ¥æ”¶ Func<decimal, decimal> ä½œä¸ºæŠ˜æ‰£ç­–ç•¥
        public decimal ProcessOrder(decimal originalPrice, Func<decimal, decimal> discountStrategy)
        {
            return discountStrategy(originalPrice);
        }
    }
    

#### ç¬¬äºŒæ­¥ï¼šæ— éœ€ä¿®æ”¹

#### ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨

    public static void Main()
    {
    	var processor = new OrderProcessor();
    
    	// æ–¹å¼ 1ï¼šç›´æ¥ä¼ å…¥å…·åæ–¹æ³•
    	decimal price1 = processor.ProcessOrder(50, FixedDiscount);
    
    	// æ–¹å¼ 2ï¼šç”¨ Lambda è¡¨è¾¾å¼
    	decimal price2 = processor.ProcessOrder(100, price => price * 0.5m); 
    
    	Console.WriteLine($"ä»·æ ¼ 1ï¼š{price1}");
    	Console.WriteLine($"ä»·æ ¼ 2ï¼š{price2}");
    }
    

#### è¾“å‡ºç»“æœ

![image](https://img2024.cnblogs.com/blog/3091176/202505/3091176-20250526172304352-213167465.png)

ğŸ“•æ€»ç»“
----

å§”æ‰˜é€‚ç”¨äºä»»ä½•éœ€è¦ä¼ é€’æ–¹æ³•çš„åœ°æ–¹ï¼ˆå¦‚å›è°ƒã€ç­–ç•¥æ¨¡å¼ã€äº‹ä»¶å¤„ç†ï¼‰ã€‚

ç”¨**`delegate`**å…³é”®å­—å£°æ˜å§”æ‰˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨**`Func`/`Action` + Lambda**æ–¹å¼ã€‚

_æœ¬æ–‡æœ‰è¯¯åœ°æ–¹æ¬¢è¿æŒ‡æ­£~_

ğŸ”—å‚è€ƒé“¾æ¥

*   C# å§”æ‰˜ [https://www.cnblogs.com/ysmc/p/18800819](https://www.cnblogs.com/ysmc/p/18800819)
*   `deepseek` [https://chat.deepseek.com/](https://chat.deepseek.com/)