---
layout: post
title: 'ã€å…‰ç…§ã€‘[PBR][æ¼«åå°„]å®ç°æ–¹æ³•å¯¹æ¯”'
date: "2025-09-28T00:43:50Z"
---
ã€å…‰ç…§ã€‘\[PBR\]\[æ¼«åå°„\]å®ç°æ–¹æ³•å¯¹æ¯”
========================

![ã€å…‰ç…§ã€‘[PBR][æ¼«åå°„]å®ç°æ–¹æ³•å¯¹æ¯”](https://img2024.cnblogs.com/blog/3685400/202509/3685400-20250927161541026-116433453.png) æœ¬æ–‡å¯¹æ¯”äº†Unity URPä¸­å››ç§ä¸»æµæ¼«åå°„æ¨¡å‹ï¼šLambertã€Half-Lambertã€Disneyå’ŒOren-Nayarã€‚Lambertæ˜¯ç»å…¸æ¨¡å‹ï¼Œæ€§èƒ½æœ€å¥½ä½†èƒ½é‡ä¸å®ˆæ’ï¼›Half-Lambertå¢å¼ºæš—éƒ¨ç»†èŠ‚ï¼Œé€‚åˆå¡é€šæ¸²æŸ“ï¼›Disneyæ¨¡å‹ç‰©ç†å‡†ç¡®ä½†è®¡ç®—å¤æ‚ï¼Œæ˜¯URPé»˜è®¤æ–¹æ¡ˆï¼›Oren-Nayaré€‚åˆç²—ç³™è¡¨é¢ä½†æœªè¢«URPå†…ç½®ã€‚æ–‡ç« è¯¦ç»†åˆ†æäº†å„æ¨¡å‹çš„ç‰¹ç‚¹ã€æ€§èƒ½æ¶ˆè€—å’Œé€‚ç”¨åœºæ™¯ï¼Œæä¾›äº†ä»£ç å®ç°ç¤ºä¾‹ï¼Œå¹¶æŒ‡å‡ºURP2022LTSé»˜è®¤ä½¿ç”¨æ”¹è¿›ç‰ˆDisneyæ¨¡å‹ï¼Œå¼€å‘è€…å¯é€šè¿‡ä¿®æ”¹BRDF.hlslåˆ‡æ¢ä¸åŒæ¨¡å‹ã€‚

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

**URP BRDFæ¼«åå°„æ–¹æ³•å¯¹æ¯”**
===================

æ–¹æ³•åç§°

æ•°å­¦å…¬å¼

ç‰¹ç‚¹

æ€§èƒ½æ¶ˆè€—

é€‚ç”¨åœºæ™¯

Lambert

$L\_d = k\_d \* max(0, NÂ·L)$

ç»å…¸æ¨¡å‹ï¼Œèƒ½é‡ä¸å®ˆæ’

â˜…â˜†â˜†

ç§»åŠ¨ç«¯ä½é…

Half-Lambert

$L\_d = k\_d \* (0.5\*(NÂ·L)+0.5)^2$

å¢å¼ºæš—éƒ¨ç»†èŠ‚

â˜…â˜…â˜†

å¡é€šæ¸²æŸ“

Disney Diffuse

å¤æ‚èƒ½é‡å®ˆæ’å…¬å¼

ç‰©ç†å‡†ç¡®ï¼Œè®¡ç®—å¤æ‚

â˜…â˜…â˜…

PC/ä¸»æœºé«˜å“è´¨

Burley Diffuse

åŸºäºå¾®è¡¨é¢ç†è®º

PBRæ ‡å‡†ï¼Œæ¬¡è¡¨é¢æ•£å°„è¿‘ä¼¼

â˜…â˜…â˜…

é‡‘å±/ç²—ç³™åº¦å·¥ä½œæµ

**å…·ä½“å®ç°æ–¹æ³•åŠç¤ºä¾‹**
=============

### **Lambertæ¨¡å‹ï¼ˆURPé»˜è®¤ï¼‰**

    hlsl
    // Lighting.hlsl ä¸­çš„å®ç°
    half3 DiffuseLambert(half3 diffuseColor)
    {
        return diffuseColor / PI; // èƒ½é‡å½’ä¸€åŒ–
    }
    
    // å®é™…è°ƒç”¨ç¤ºä¾‹
    half NdotL = saturate(dot(normalWS, light.direction));
    half3 lambert = DiffuseLambert(_BaseColor.rgb) * NdotL;
    

### **Half-Lambertï¼ˆValveæ”¹è¿›ç‰ˆï¼‰**

    hlsl
    half3 DiffuseHalfLambert(half3 diffuseColor, half NdotL)
    {
        half wrap = 0.5 * (NdotL + 1.0);
        return diffuseColor * wrap * wrap;
    }
    
    // è°ƒç”¨ç¤ºä¾‹
    half3 halfLambert = DiffuseHalfLambert(_BaseColor.rgb, NdotL);
    

### **Disney Diffuseï¼ˆURP Lit.shaderä½¿ç”¨ï¼‰**

    hlsl
    // BRDF.hlsl ä¸­çš„å®ç°
    half3 DiffuseDisney(half3 baseColor, half NdotV, half NdotL, half LdotH, half roughness)
    {
        half fd90 = 0.5 + 2 * LdotH * LdotH * roughness;
        half lightScatter = (1 + (fd90 - 1) * pow(1 - NdotL, 5));
        half viewScatter = (1 + (fd90 - 1) * pow(1 - NdotV, 5));
        return baseColor * lightScatter * viewScatter / PI;
    }
    

**URPå®é™…ä½¿ç”¨æƒ…å†µ**
=============

*   â€Œ**é»˜è®¤é‡‡ç”¨æ–¹æ¡ˆ**â€Œï¼š
    
    *   Simple Litç®¡çº¿ï¼šLambertæ¨¡å‹ï¼ˆç®€åŒ–ç‰ˆï¼‰
    *   Litç®¡çº¿ï¼šDisney Diffuse + Burleyæ”¹è¿›ï¼ˆè§`BRDF.hlsl`ï¼‰
*   â€Œ**æ ¸å¿ƒä»£ç è·¯å¾„**â€Œï¼š
    
        Packages/com.unity.render-pipelines.universal/ShaderLibrary/BRDF.hlsl
        â†’ DirectBDRF()å‡½æ•°
        â†’ DisneyDiffuse()åˆ†æ”¯
        
    
*   â€Œ**æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**â€Œï¼š
    
        csharp
        // URP Assetä¸­å¯å…³é—­é«˜è´¨é‡æ¼«åå°„
        UniversalRenderPipelineAsset.asset â†’
        Lighting â†’ UseRoughnessRefraction = false
        
    

**æ–¹æ³•å¯¹æ¯”**
========

*   â€Œ**è§†è§‰å·®å¼‚**â€Œï¼š
    *   Lambertï¼šæ˜æš—å¯¹æ¯”å¼ºçƒˆ
    *   Half-Lambertï¼šæš—éƒ¨æäº®çº¦30%
    *   Disneyï¼šè¾¹ç¼˜å…‰æ›´è‡ªç„¶ï¼ˆè²æ¶…å°”æ•ˆåº”ï¼‰
*   â€Œ**æ¨èé€‰æ‹©**â€Œï¼š
    *   ç§»åŠ¨ç«¯ï¼šLambertï¼ˆSimple Litï¼‰
    *   ä¸»æœº/PCï¼šDisneyï¼ˆLit Shaderï¼‰
    *   é£æ ¼åŒ–ï¼šHalf-Lambertï¼ˆéœ€è‡ªå®šä¹‰Shaderï¼‰

URP 2022 LTSç‰ˆæœ¬ä¸­ï¼Œä¸»æµçš„Lit.shaderé»˜è®¤ä½¿ç”¨æ”¹è¿›ç‰ˆDisneyæ¨¡å‹ï¼Œé€šè¿‡`#define _BRDF_BURLEY`å®å¯ç”¨ã€‚å¼€å‘è€…å¯é€šè¿‡ä¿®æ”¹`BRDF.hlsl`ä¸­çš„`#define`è¯­å¥åˆ‡æ¢ä¸åŒæ¨¡å‹ã€‚

é™¤äº†ä»¥ä¸ŠUnity URPä¸­æ¶‰åŠåˆ°çš„åŸºäºç‰©ç†å…‰ç…§æ¨¡å‹çš„æ¼«åå°„å®ç°æ–¹å¼ï¼Œè¿˜æœ‰Oren-Nayaræ¨¡å‹æ¥å®ç°æ¼«åå°„

**Oren-Nayaræ¨¡å‹åŸç†**
------------------

*   â€Œ**æ ¸å¿ƒæ€æƒ³**â€Œï¼š
    
    ç”±Michael Orenå’ŒShree Nayaräº1994å¹´æå‡ºï¼ŒåŸºäºâ€Œ**å¾®è¡¨é¢è‡ªé˜´å½±ç†è®º**â€Œï¼Œé€‚ç”¨äºç²—ç³™è¡¨é¢ï¼ˆå¦‚å¸ƒæ–™ã€ç ‚çŸ³ï¼‰ã€‚å…¶å…¬å¼ä¸ºï¼š
    
    $L = k\_d \* max(0, NÂ·L) \* (A + B \* max(0, cos(Ï†\_v-Ï†\_l)) \* sin(Î±) \* tan(Î²))$
    
    $A = 1 - 0.5\*(ÏƒÂ²)/(ÏƒÂ²+0.33)$
    
    $B = 0.45\*(ÏƒÂ²)/(ÏƒÂ²+0.09)$
    
    $Î± = max(Î¸\_v, Î¸\_l)$
    
    $Î² = min(Î¸\_v, Î¸\_l)$
    
    *   Ïƒï¼šè¡¨é¢ç²—ç³™åº¦å‚æ•°ï¼ˆ0Â°-90Â°ï¼‰
    *   Ï†ï¼šæ–¹ä½è§’
*   â€Œ**è§†è§‰ç‰¹æ€§**â€Œï¼š
    
    *   ç²—ç³™è¡¨é¢è¾¹ç¼˜äº®åº¦å¢å¼º
    *   é€†å‘å…‰æ—¶å‡ºç°"åå‘æ•£å°„"æ•ˆæœ
    *   ç›¸æ¯”Lambertæ›´ç¬¦åˆçœŸå®å¸ƒæ–™è§‚æµ‹

**Unity URPä¸­çš„ä½¿ç”¨æƒ…å†µ**
-------------------

*   â€Œ**é»˜è®¤æœªé‡‡ç”¨åŸå› **â€Œï¼š
    *   â€Œ**æ€§èƒ½è€ƒé‡**â€Œï¼šéœ€è¦é¢å¤–è®¡ç®—è§’åº¦å’Œç²—ç³™åº¦ï¼ˆæ¯”Lambertå¤š30%æŒ‡ä»¤æ•°ï¼‰
    *   â€Œ**è‰ºæœ¯æ§åˆ¶**â€Œï¼šå‚æ•°ç‰©ç†æ„ä¹‰ä¸å¦‚PBRç›´è§‚
    *   â€Œ**å…‰ç…§ä¸€è‡´æ€§**â€Œï¼šURPä¼˜å…ˆä¿è¯ç§»åŠ¨ç«¯æ€§èƒ½
*   â€Œ**æ›¿ä»£æ–¹æ¡ˆ**â€Œï¼š
    *   ç®€å•åœºæ™¯ï¼šä½¿ç”¨`SimpleLit`çš„Lambert
    *   å¤æ‚æè´¨ï¼šé€šè¿‡`Lit`Shaderçš„`Smoothness`å‚æ•°é—´æ¥æ§åˆ¶

**æ‰‹åŠ¨å®ç°æ–¹æ¡ˆ**
----------

è‹¥éœ€åœ¨URPä¸­ä½¿ç”¨Oren-Nayarï¼Œå¯ä¿®æ”¹`BRDF.hlsl`ï¼š

    hlsl
    // åœ¨BRDF.hlslä¸­æ·»åŠ 
    half3 DiffuseOrenNayar(half3 albedo, half roughness, half NdotV, half NdotL, half LdotV)
    {
        half sigma2 = roughness * roughness;
        half A = 1.0 - 0.5 * sigma2 / (sigma2 + 0.33);
        half B = 0.45 * sigma2 / (sigma2 + 0.09);
    
        half s = LdotV - NdotL * NdotV;
        half t = s > 0 ? 1.0 / max(NdotL, NdotV) : 1.0;
    
        return albedo * (A + B * s * t) * NdotL;
    }
    

**é€‚ç”¨åœºæ™¯å»ºè®®**
----------

*   â€Œ**æ¨èä½¿ç”¨æƒ…å†µ**â€Œï¼š
    
    *   é£æ ¼åŒ–æ¸²æŸ“ï¼ˆå¦‚æ‰‹ç»˜å¸ƒæ–™ï¼‰
    *   è€ƒå¤/åœ°è´¨ä»¿çœŸé¡¹ç›®
    *   éœ€è¦ç‰¹æ®Šè¾¹ç¼˜å…‰æ•ˆæœçš„åœºæ™¯
*   â€Œ**æ€§èƒ½å¯¹æ¯”**â€Œï¼š
    
    æ¨¡å‹
    
    æŒ‡ä»¤æ•°(ç§»åŠ¨ç«¯)
    
    å†…å­˜è®¿é—®
    
    Lambert
    
    12
    
    3
    
    Oren-Nayar
    
    38
    
    5
    
    Disney
    
    45
    
    6
    

å½“å‰URP 2022 LTSç‰ˆæœ¬ä¸­ï¼Œå¯é€šè¿‡è‡ªå®šä¹‰Shader GraphèŠ‚ç‚¹å®ç°Oren-Nayarï¼Œä½†å®˜æ–¹æœªå†…ç½®å› å…¶ä¸ç¬¦åˆURPçš„"æ€§èƒ½ä¼˜å…ˆ"è®¾è®¡åŸåˆ™ã€‚å®é™…é¡¹ç›®ä¸­å»ºè®®é€šè¿‡æ³•çº¿è´´å›¾+Lambertè¿‘ä¼¼æ›¿ä»£ã€‚

* * *

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

ï¼ˆæ¬¢è¿_ç‚¹èµç•™è¨€_æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰