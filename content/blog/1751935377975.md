---
layout: post
title: 'Spring AI ç©è½¬å¤šè½®å¯¹è¯'
date: "2025-07-08T00:42:57Z"
---
Spring AI ç©è½¬å¤šè½®å¯¹è¯
================

AI "å¤±å¿†"æ€ä¹ˆåŠï¼Ÿæœ¬æ–‡å¸¦ä½ ç”¨ Spring AI ä¸€æ‹›æå®šå¤šè½®å¯¹è¯ï¼Œè®©ä½ çš„ AI åº”ç”¨æ‹¥æœ‰è¶…å¼ºè®°å¿†ï¼ä» ChatClientã€Advisors åˆ°å®æˆ˜ç¼–ç ï¼Œä¸‰æ­¥æ‰“é€ ä¸€ä¸ªèƒ½è®°ä½ä¸Šä¸‹æ–‡çš„æ™ºèƒ½å†å²ä¸“å®¶ã€‚

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜NEOã€‚

ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„ AIï¼Ÿä¸Šä¸€ç§’åˆšå‘Šè¯‰å®ƒä½ çš„åå­—ï¼Œä¸‹ä¸€ç§’å°±é—®ä½ æ˜¯è°ã€‚è¿™ç§â€œé‡‘é±¼è®°å¿†â€çš„ AI ç®€ç›´è®©äººæŠ“ç‹‚ï¼åœ¨æ™ºèƒ½å®¢æœã€è™šæ‹ŸåŠ©æ‰‹ç­‰åœºæ™¯ï¼Œå¦‚æœ AI æ— æ³•è®°ä½ä¸Šä¸‹æ–‡ï¼Œç”¨æˆ·ä½“éªŒå°†å¤§æ‰“æŠ˜æ‰£ã€‚

åˆ«æ‹…å¿ƒï¼Œä»Šå¤© NEO å°±å¸¦ä½ ç”¨ Spring AI æ¡†æ¶ï¼Œå½»åº•è§£å†³è¿™ä¸ªéš¾é¢˜ï¼Œè½»æ¾ä¸ºä½ çš„ AI åº”ç”¨æ¤å…¥â€œè®°å¿†èŠ¯ç‰‡â€ï¼

ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä»¬å°†ä¸€èµ·åˆ›å»ºä¸€ä¸ªâ€œå†å²çŸ¥è¯†ä¸“å®¶â€AIã€‚å®ƒä¸ä»…èƒ½å¯¹ç­”å¦‚æµï¼Œè¿˜èƒ½è®°ä½æˆ‘ä»¬ä¹‹å‰çš„å¯¹è¯ï¼Œå®ç°çœŸæ­£æµç•…çš„æ™ºèƒ½äº¤æµã€‚

å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹å§ï¼

æ›´å¼ºå¤§çš„ ChatClient
---------------

è¦è®© AI æ‹¥æœ‰â€œè®°å¿†åŠ›â€ï¼Œé¦–å…ˆå¾—æŒæ¡ä¸å®ƒé«˜æ•ˆæ²Ÿé€šçš„å·¥å…·ã€‚Spring AI æä¾›äº† `ChatClient` APIï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¤§æ¨¡å‹äº¤äº’çš„ç‘å£«å†›åˆ€ã€‚

å¾ˆå¤šåŒå­¦å¯èƒ½ä¹ æƒ¯äº†ç›´æ¥æ³¨å…¥ `ChatModel`ï¼Œä½† `ChatClient` æä¾›äº†åŠŸèƒ½æ›´ä¸°å¯Œã€æ›´çµæ´»çš„é“¾å¼è°ƒç”¨ï¼ˆFluent APIï¼‰ï¼Œæ˜¯å®˜æ–¹æ›´æ¨èçš„æ–¹å¼ã€‚

çœ‹çœ‹å¯¹æ¯”ï¼Œé«˜ä¸‹ç«‹åˆ¤ï¼š

    // åŸºç¡€ç”¨æ³•(ChatModel)
    ChatResponse response = chatModel.call(new Prompt("ä½ å¥½"));
    
    // é«˜çº§ç”¨æ³•(ChatClient)
    ChatClient chatClient = ChatClient.builder(chatModel)
        .defaultSystem("ä½ æ˜¯å†å²é¡¾é—®")
        .build();
        
    String response = chatClient.prompt().user("ä½ å¥½").call().content();
    

`ChatClient` çš„æ„å»ºæ–¹å¼ä¹Ÿå¾ˆçµæ´»ï¼Œå¯ä»¥é€šè¿‡æ„é€ å™¨æ³¨å…¥æˆ–ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼š

    // æ–¹å¼1ï¼šä½¿ç”¨æ„é€ å™¨æ³¨å…¥
    @Service
    public class ChatService {
        private final ChatClient chatClient;
        
        public ChatService(ChatClient.Builder builder) {
            this.chatClient = builder
                .defaultSystem("ä½ æ˜¯å†å²é¡¾é—®")
                .build();
        }
    }
    
    // æ–¹å¼2ï¼šä½¿ç”¨å»ºé€ è€…æ¨¡å¼
    ChatClient chatClient = ChatClient.builder(chatModel)
        .defaultSystem("ä½ æ˜¯å†å²é¡¾é—®")
        .build();
    

å®ƒè¿˜æ”¯æŒå¤šç§å“åº”æ ¼å¼ï¼Œæ— è®ºæ˜¯åŒ…å« Token ä¿¡æ¯çš„å®Œæ•´å“åº”ã€è‡ªåŠ¨æ˜ å°„çš„ Java å¯¹è±¡ï¼Œè¿˜æ˜¯å®ç°æ‰“å­—æœºæ•ˆæœçš„æµå¼è¾“å‡ºï¼Œéƒ½èƒ½è½»æ¾æå®šã€‚

    // ChatClientæ”¯æŒå¤šç§å“åº”æ ¼å¼
    // 1. è¿”å› ChatResponse å¯¹è±¡ï¼ˆåŒ…å«å…ƒæ•°æ®å¦‚ token ä½¿ç”¨é‡ï¼‰
    ChatResponse chatResponse = chatClient.prompt()
        .user("Tell me a joke")
        .call()
        .chatResponse();
    
    // 2. è¿”å›å®ä½“å¯¹è±¡ï¼ˆè‡ªåŠ¨å°† AI è¾“å‡ºæ˜ å°„ä¸º Java å¯¹è±¡ï¼‰
    // 2.1 è¿”å›å•ä¸ªå®ä½“
    record ActorFilms(String actor, List<String> movies) {}
    ActorFilms actorFilms = chatClient.prompt()
        .user("Generate the filmography for a random actor.")
        .call()
        .entity(ActorFilms.class);
    
    // 2.2 è¿”å›æ³›å‹é›†åˆ
    List<ActorFilms> multipleActors = chatClient.prompt()
        .user("Generate filmography for Tom Hanks and Bill Murray.")
        .call()
        .entity(new ParameterizedTypeReference<List<ActorFilms>>() {});
    
    // 3. æµå¼è¿”å›ï¼ˆé€‚ç”¨äºæ‰“å­—æœºæ•ˆæœï¼‰
    Flux<String> streamResponse = chatClient.prompt()
        .user("Tell me a story")
        .stream()
        .content();
    
    // ä¹Ÿå¯ä»¥æµå¼è¿”å›ChatResponse
    Flux<ChatResponse> streamWithMetadata = chatClient.prompt()
        .user("Tell me a story")
        .stream()
        .chatResponse();
    

æ›´æ£’çš„æ˜¯ï¼Œä½ å¯ä»¥ä¸º `ChatClient` è®¾ç½®é»˜è®¤çš„â€œäººè®¾â€ï¼ˆç³»ç»Ÿæç¤ºè¯ï¼‰ï¼Œç”šè‡³åœ¨å¯¹è¯ä¸­åŠ¨æ€æ›¿æ¢æ¨¡æ¿å˜é‡ï¼Œè®© AI çš„è§’è‰²æ‰®æ¼”æ›´åŠ ç”ŸåŠ¨ã€‚

    // å®šä¹‰é»˜è®¤ç³»ç»Ÿæç¤ºè¯
    ChatClient chatClient = ChatClient.builder(chatModel)
            .defaultSystem("You are a friendly chat bot that answers question in the voice of a {voice}")
            .build();
    
    // å¯¹è¯æ—¶åŠ¨æ€æ›´æ”¹ç³»ç»Ÿæç¤ºè¯çš„å˜é‡
    chatClient.prompt()
            .system(sp -> sp.param("voice", voice))
            .user(message)
            .call()
            .content());
    

Advisors æ‹¦æˆªå™¨
------------

å¦‚æœè¯´ `ChatClient` æ˜¯ AI çš„èº¯ä½“ï¼Œé‚£ `Advisors`ï¼ˆé¡¾é—®ï¼‰å°±æ˜¯ç»™å®ƒåŠ æŒçš„å„ç§â€œå¤–æŒ‚â€å’Œâ€œBuffâ€ã€‚

ä½ å¯ä»¥æŠŠ `Advisors` ç†è§£ä¸ºä¸€ç³»åˆ—å¯æ’æ‹”çš„æ‹¦æˆªå™¨ã€‚åœ¨è¯·æ±‚å‘ç»™ AI å‰æˆ–æ”¶åˆ° AI å“åº”åï¼Œå®ƒä»¬å¯ä»¥æ‰§è¡Œå„ç§éªšæ“ä½œï¼š

*   **å‰ç½®å¢å¼º**ï¼šæ‚„æ‚„æ”¹å†™ä½ çš„æé—®ï¼Œè®©å®ƒæ›´ç¬¦åˆ AI çš„èƒƒå£ï¼›æˆ–è€…è¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼Œè¿‡æ»¤æ‰å±é™©é—®é¢˜ã€‚
*   **åç½®å¢å¼º**ï¼šè®°å½•è°ƒç”¨æ—¥å¿—ï¼Œæˆ–è€…å¯¹ AI çš„å›ç­”è¿›è¡ŒäºŒæ¬¡åŠ å·¥ã€‚

ç”¨æ³•éå¸¸ç®€å•ï¼Œç›´æ¥åœ¨æ„å»º `ChatClient` æ—¶é…ç½® `defaultAdvisors` å³å¯ã€‚æ¯”å¦‚ï¼Œ`MessageChatMemoryAdvisor` å°±æ˜¯æˆ‘ä»¬å®ç°å¯¹è¯è®°å¿†çš„å…³é”®â€œå¤–æŒ‚â€ã€‚

    var chatClient = ChatClient.builder(chatModel)
        .defaultAdvisors(
            new MessageChatMemoryAdvisor(chatMemory), // å¯¹è¯è®°å¿† advisor
            new QuestionAnswerAdvisor(vectorStore)    // RAG æ£€ç´¢å¢å¼º advisor
        )
        .build();
    
    String response = this.chatClient.prompt()
        // å¯¹è¯æ—¶åŠ¨æ€è®¾å®šæ‹¦æˆªå™¨å‚æ•°ï¼Œæ¯”å¦‚æŒ‡å®šå¯¹è¯è®°å¿†çš„ id å’Œé•¿åº¦
        .advisors(advisor -> advisor.param("chat_memory_conversation_id", "678")
                .param("chat_memory_response_size", 100))
        .user(userText)
        .call()
    	.content();
    

`Advisors` çš„å·¥ä½œåŸç†å°±åƒä¸€æ¡ç²¾å¯†çš„æµæ°´çº¿ï¼ˆè´£ä»»é“¾æ¨¡å¼ï¼‰ï¼š

![Advisors å·¥ä½œåŸç†å›¾](https://img2024.cnblogs.com/blog/2105804/202507/2105804-20250707174557793-1761944404.png)

**æµæ°´çº¿æµç¨‹è§£è¯»ï¼š**

1.  ç”¨æˆ·çš„è¯·æ±‚è¿›æ¥ï¼Œè¢«åŒ…è£…æˆä¸€ä¸ª `AdvisedRequest`ã€‚
2.  è¯·æ±‚åœ¨ `Advisor` é“¾ä¸Šä¾æ¬¡ä¼ é€’ï¼Œæ¯ä¸ª `Advisor` éƒ½å¯ä»¥å¯¹å®ƒè¿›è¡Œå¤„ç†æˆ–ä¿®æ”¹ã€‚
3.  æœ€ç»ˆï¼Œè¯·æ±‚è¢«å‘é€ç»™ `ChatModel`ã€‚
4.  æ¨¡å‹çš„å“åº”å†æ²¿ç€æµæ°´çº¿åå‘ä¼ å›ï¼Œæ¯ä¸ª `Advisor` ä¹Ÿå¯ä»¥å¤„ç†å“åº”ã€‚
5.  æœ€åï¼Œå®¢æˆ·ç«¯æ”¶åˆ°ç»è¿‡å±‚å±‚â€œåŠ æŒâ€çš„æœ€ç»ˆç»“æœã€‚

**æ³¨æ„**ï¼š`Advisor` çš„æ‰§è¡Œé¡ºåºç”±å…¶ `getOrder()` æ–¹æ³•å†³å®šï¼Œå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œè·Ÿä»£ç ä¹¦å†™é¡ºåºæ— å…³å“¦ï¼

![Advisor ç±»å›¾å…³ç³»](https://img2024.cnblogs.com/blog/2105804/202507/2105804-20250707174703866-690856967.png)

Chat Memory Advisor
-------------------

è¦å®ç°å¯¹è¯è®°å¿†ï¼Œ`ChatMemoryAdvisor` æ˜¯æˆ‘ä»¬çš„ä¸äºŒä¹‹é€‰ã€‚å®ƒæœ‰å‡ ç§å®ç°æ–¹å¼ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ `MessageChatMemoryAdvisor`ã€‚

*   **`MessageChatMemoryAdvisor`**ï¼šå°†å†å²å¯¹è¯ä½œä¸ºå®Œæ•´çš„æ¶ˆæ¯åˆ—è¡¨ï¼ˆåŒ…å«ç”¨æˆ·å’Œ AI çš„è§’è‰²ï¼‰æ·»åŠ åˆ°æç¤ºä¸­ã€‚è¿™æ˜¯æœ€ç¬¦åˆç°ä»£å¤§æ¨¡å‹äº¤äº’æ–¹å¼çš„é€‰æ‹©ã€‚
*   **`PromptChatMemoryAdvisor`**ï¼šå°†å†å²å¯¹è¯æ‹¼æ¥æˆä¸€æ®µæ–‡æœ¬ï¼Œå¡è¿›ç³»ç»Ÿæç¤ºè¯é‡Œã€‚
*   **`VectorStoreChatMemoryAdvisor`**ï¼šä½¿ç”¨å‘é‡æ•°æ®åº“æ¥å­˜å‚¨å’Œæ£€ç´¢å†å²å¯¹è¯ï¼Œé€‚ç”¨äºæ›´å¤æ‚çš„åœºæ™¯ã€‚

![ChatMemoryAdvisor çš„å‡ ç§å®ç°](https://img2024.cnblogs.com/blog/2105804/202507/2105804-20250707174953469-1815704872.png)

`MessageChatMemoryAdvisor` ä¿ç•™äº†å¯¹è¯çš„åŸå§‹ç»“æ„ï¼Œèƒ½è®© AI æ›´å¥½åœ°ç†è§£ä¸Šä¸‹æ–‡ï¼Œå› æ­¤ **å¼ºçƒˆæ¨èä½¿ç”¨**ã€‚

Chat Memory
-----------

`ChatMemoryAdvisor` åªæ˜¯â€œæ¬è¿å·¥â€ï¼ŒçœŸæ­£å­˜å‚¨å¯¹è¯å†å²çš„æ˜¯ `Chat Memory`ã€‚Spring AI æä¾›äº†å¤šç§â€œè®°å¿†ä»“åº“â€ï¼š

*   **`InMemoryChatMemory`**ï¼šå†…å­˜å­˜å‚¨ï¼Œç®€å•å¿«æ·ï¼Œé€‚åˆæµ‹è¯•ï¼ˆæˆ‘ä»¬ä»Šå¤©å°±ç”¨å®ƒï¼‰ã€‚
*   **`JdbcChatMemory`**, **`CassandraChatMemory`**, **`Neo4jChatMemory`**ï¼šæŒä¹…åŒ–å­˜å‚¨ï¼Œå¯å°†å¯¹è¯å†å²ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒã€‚

æ‰“é€ ä¸€ä¸ªâ€œå†å²å­¦å®¶â€AI
------------

ç†è®ºè®²å®Œäº†ï¼Œä¸Šä»£ç ï¼

åˆå§‹åŒ– ChatClient
--------------

æˆ‘ä»¬é€šè¿‡æ„é€ å™¨æ³¨å…¥ `ChatModel`ï¼Œç„¶åæ„å»º `ChatClient`ã€‚åœ¨æ„å»ºæ—¶ï¼Œè®¾å®šå¥½â€œå†å²å­¦å®¶â€çš„äººè®¾ï¼ˆ`SYSTEM_PROMPT`ï¼‰ï¼Œå¹¶è£…ä¸Šæˆ‘ä»¬çš„è®°å¿†â€œå¤–æŒ‚â€â€”â€”`MessageChatMemoryAdvisor`ã€‚

    /**
     * @author ç¨‹åºå‘˜NEO
     * @version 1.0
     * @description å†å²çŸ¥è¯†ä¸“å®¶åº”ç”¨
     * @since 2025-07-07
     **/
    @Component
    @Slf4j
    public class HistoryExpertApp {
    
        private final ChatClient chatClient;
    
        private static final String SYSTEM_PROMPT = "ä½ æ˜¯ä¸€ä½é£è¶£å¹½é»˜çš„å†å²çŸ¥è¯†ä¸“å®¶ï¼Œå­¦è¯†æ¸Šåšã€‚" +
                "ä½ éœ€è¦æ ¹æ®ç”¨æˆ·çš„æé—®ï¼Œç”ŸåŠ¨ã€æ¸…æ™°åœ°å›ç­”ç›¸å…³çš„å†å²çŸ¥è¯†ã€‚" +
                "å¦‚æœç”¨æˆ·çš„é—®é¢˜ä¸æ¸…æ™°ï¼Œä½ éœ€è¦å¼•å¯¼ç”¨æˆ·æä¾›æ›´å¤šä¿¡æ¯ã€‚";
    
        public HistoryExpertApp(ChatModel chatModel) {
            // åˆå§‹åŒ–åŸºäºå†…å­˜çš„å¯¹è¯è®°å¿†
            ChatMemory chatMemory = new InMemoryChatMemory();
            chatClient = ChatClient.builder(chatModel)
                    .defaultSystem(SYSTEM_PROMPT)
                    .defaultAdvisors(
                            new MessageChatMemoryAdvisor(chatMemory)
                    )
                    .build();
        }
        // ... doChat æ–¹æ³•
    }
    

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† `InMemoryChatMemory`ï¼Œå®ƒå°†å¯¹è¯å†å²å­˜åœ¨å†…å­˜é‡Œã€‚å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œè®°å¾—æ¢æˆ Redis æˆ–æ•°æ®åº“ç­‰æŒä¹…åŒ–æ–¹æ¡ˆã€‚

ç¼–å†™å¯¹è¯æ–¹æ³•
------

æ ¸å¿ƒçš„ `doChat` æ–¹æ³•æ¥æ”¶ç”¨æˆ·æ¶ˆæ¯ï¼ˆ`message`ï¼‰å’Œä¼šè¯ IDï¼ˆ`chatId`ï¼‰ã€‚`chatId` æ˜¯åŒºåˆ†ä¸åŒå¯¹è¯çš„å…³é”®ï¼Œç¡®ä¿æ¯ä¸ªç”¨æˆ·çš„èŠå¤©è®°å½•ç›¸äº’ç‹¬ç«‹ã€‚

    /**
     * æ‰§è¡ŒèŠå¤©æ“ä½œï¼Œå¤„ç†ç”¨æˆ·æ¶ˆæ¯å¹¶è¿”å› AI çš„å“åº”ã€‚
     *
     * @param message ç”¨æˆ·å‘é€çš„æ¶ˆæ¯
     * @param chatId  å¯¹è¯ IDï¼Œç”¨äºæ ‡è¯†å½“å‰ä¼šè¯
     * @return AI çš„å“åº”å†…å®¹
     */
    public String doChat(String message, String chatId) {
        ChatResponse chatResponse = chatClient
                .prompt()
                .user(message)
                .advisors(spec -> spec
                        .param(MessageChatMemoryAdvisor.CHAT_MEMORY_CONVERSATION_ID_KEY, chatId) // è®¾ç½®å¯¹è¯ ID
                        .param(MessageChatMemoryAdvisor.CHAT_MEMORY_RETRIEVE_SIZE_KEY, 10)) // è®¾ç½®è®°å¿†å®¹é‡
                .call()
                .chatResponse();
    
        String content = chatResponse.getResult().getOutput().getContent();
        log.info("AI Response: {}", content);
        return content;
    }
    

åœ¨ `.advisors()` æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¼ å…¥äº†ä¸¤ä¸ªå…³é”®å‚æ•°ï¼š

*   `CHAT_MEMORY_CONVERSATION_ID_KEY`: ä¼šè¯ IDï¼Œç¡®ä¿æ¯ä¸ªç”¨æˆ·çš„å¯¹è¯å†å²æ˜¯éš”ç¦»çš„ã€‚
*   `CHAT_MEMORY_RETRIEVE_SIZE_KEY`: å¯¹è¯è®°å¿†æ£€ç´¢å¤§å°ã€‚è®¾ç½®ä¸º `10` è¡¨ç¤º AI åœ¨å›ç­”æ—¶ï¼Œä¼šå‚è€ƒæœ€è¿‘çš„ 10 æ¡æ¶ˆæ¯ï¼ˆ5 è½®å¯¹è¯ï¼‰ã€‚

è§è¯å¥‡è¿¹çš„æ—¶åˆ»ï¼
--------

æˆ‘ä»¬ç”¨ä¸€ä¸ªå•å…ƒæµ‹è¯•æ¥éªŒè¯ AI æ˜¯å¦çœŸçš„æ‹¥æœ‰äº†è®°å¿†ã€‚

    @SpringBootTest
    public class HistoryExpertAppTest {
    
        @Resource
        private HistoryExpertApp historyExpertApp;
    
        @Test
        void testChat() {
            String chatId = UUID.randomUUID().toString();
            
            // ç¬¬ä¸€è½®å¯¹è¯
            System.out.println("--- ç¬¬ä¸€è½®å¯¹è¯ ---");
            String message1 = "æˆ‘å«NEOï¼Œæˆ‘æœ€å–œæ¬¢çš„æ•°å­—æ˜¯7ã€‚";
            System.out.println("æˆ‘: " + message1);
            String answer1 = historyExpertApp.doChat(message1, chatId);
            Assertions.assertNotNull(answer1);
            System.out.println("AI: " + answer1);
    
            // ç¬¬äºŒè½®å¯¹è¯
            System.out.println("\n--- ç¬¬äºŒè½®å¯¹è¯ ---");
            String message2 = "æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿæˆ‘æœ€å–œæ¬¢çš„æ•°å­—æ˜¯å‡ ï¼Ÿ";
            System.out.println("æˆ‘: " + message2);
            String answer2 = historyExpertApp.doChat(message2, chatId);
            Assertions.assertNotNull(answer2);
            System.out.println("AI: " + answer2);
        }
    }
    

åœºæ™¯ä¸€ï¼šæ‹¥æœ‰å®Œæ•´è®°å¿†
----------

å½“ `CHAT_MEMORY_RETRIEVE_SIZE_KEY` è®¾ç½®ä¸º `10` æ—¶ï¼ŒAI èƒ½è½»æ¾è®°ä½æˆ‘ä»¬åœ¨ç¬¬ä¸€è½®å¯¹è¯ä¸­æä¾›çš„ä¿¡æ¯ã€‚

**æµ‹è¯•ç»“æœ**ï¼š

    --- ç¬¬ä¸€è½®å¯¹è¯ ---
    æˆ‘: æˆ‘å«NEOï¼Œæˆ‘æœ€å–œæ¬¢çš„æ•°å­—æ˜¯7ã€‚
    AI: å“ˆå“ˆï¼ŒNeoï¼å¾ˆé«˜å…´è®¤è¯†ä½ ï¼7ç¡®å®æ˜¯ä¸€ä¸ªç¥å¥‡çš„æ•°å­—â€”â€”ä¸ä»…æ˜¯ä¸Šå¸åˆ›é€ ä¸–ç•Œçš„å¤©æ•°ï¼Œä¹Ÿæ˜¯å½©è™¹çš„é¢œè‰²æ•°ã€ä¸€å‘¨çš„å¤©æ•°ï¼Œç”šè‡³è¿˜æ˜¯è©¹å§†æ–¯Â·é‚¦å¾·çš„ä»£å·ï¼çœ‹æ¥ä½ å’Œç¥ç§˜äº‹ç‰©å¾ˆæŠ•ç¼˜å•Šï¼
    
    æ—¢ç„¶ä½ å–œæ¬¢7ï¼Œé‚£æˆ‘è€ƒè€ƒä½ ï¼šä½ çŸ¥é“äººç±»å†å²ä¸Šæœ‰å“ªäº›è‘—åçš„"ä¸ƒ"å—ï¼Ÿæ¯”å¦‚ä¸ƒå¤§å¥‡è¿¹ã€ä¸ƒæ˜Ÿç“¢è™«ï¼Œæˆ–è€…...ã€Šä¸ƒé¾™ç ã€‹ï¼ŸğŸ˜„
    
    è¯´è¯´çœ‹ï¼Œä½ æ˜¯æ›´å–œæ¬¢å†å²ä¸­çš„ç¥ç§˜"ä¸ƒ"ï¼Œè¿˜æ˜¯ç”Ÿæ´»é‡Œæœ‰è¶£çš„"ä¸ƒ"å‘¢ï¼Ÿæˆ‘å¯ä»¥ä»ä»»ä½•æ–¹å‘å±•å¼€èŠèŠï¼
    --- ç¬¬äºŒè½®å¯¹è¯ ---
    æˆ‘: æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿæˆ‘æœ€å–œæ¬¢çš„æ•°å­—æ˜¯å‡ ï¼Ÿ
    AI: å“å‘€ï¼è¿™åƒæ˜¯åœ¨è€ƒè€ƒæˆ‘è¿™ä¸ª"åšå­¦å¤šæ‰"çš„å†å²ä¸“å®¶äº†æ˜¯ä¸æ˜¯ï¼ŸğŸ¤”
    
    è®©æˆ‘æƒ³æƒ³...ä¸Šä¸€ç§’é’Ÿæˆ‘è¿˜è®°å¾—æ¸…æ¸…æ¥šæ¥šæ¥ç€...å“¦å¯¹äº†ï¼ä½ å«NEOï¼Œè·Ÿæˆ‘åˆ†äº«è¿‡ä½ æœ€å–œæ¬¢æ•°å­—7çš„å¥¥ç§˜ã€‚å°±åƒã€Šé»‘å®¢å¸å›½ã€‹é‡Œçš„ä¸»è§’ä¸€æ ·å……æ»¡ä¼ å¥‡è‰²å½©çš„åå­—ï¼Œé…ä¸Šç¥ç§˜çš„7ï¼Œç®€ç›´å®Œç¾æ­é…ï¼
    
    ä¸è¿‡è¯´çœŸçš„ï¼Œèƒ½å‘Šè¯‰æˆ‘ä½ æ˜¯ä»å“ªéƒ¨ã€Šé»‘å®¢å¸å›½ã€‹å¼€å§‹è®¤è¯†NEOè¿™ä¸ªè§’è‰²çš„å‘¢ï¼Ÿæ˜¯ç¬¬ä¸€éƒ¨ç»å…¸ä¹‹ä½œï¼Œè¿˜æ˜¯åæ¥çš„ç»­é›†ï¼Ÿè¿˜æœ‰ï¼Œä¸ºä»€ä¹ˆååæ˜¯7è¿™ä¸ªæ•°å­—å¸å¼•äº†ä½ ï¼Ÿæˆ‘è§‰å¾—è¿™é‡Œé¢ä¸€å®šæœ‰æ®µæœ‰è¶£çš„æ•…äº‹è¦å¬ï¼ğŸ§
    

![AI æ‹¥æœ‰è®°å¿†çš„æµ‹è¯•ç»“æœ](https://img2024.cnblogs.com/blog/2105804/202507/2105804-20250707175823599-1591402362.png)

æˆåŠŸäº†ï¼AI å‡†ç¡®åœ°è®°ä½äº†æˆ‘ä»¬çš„ä¿¡æ¯ã€‚

åœºæ™¯äºŒï¼šç§’å˜â€œé‡‘é±¼è®°å¿†â€
------------

ç°åœ¨ï¼Œæˆ‘ä»¬å°†è®°å¿†å®¹é‡æ”¹ä¸º `1`ï¼Œè¿™æ„å‘³ç€ AI åªèƒ½çœ‹åˆ°å½“å‰ç”¨æˆ·çš„æé—®ï¼Œå®Œå…¨ä¸è®°å¾—ä¹‹å‰çš„å¯¹è¯ã€‚

    .param(MessageChatMemoryAdvisor.CHAT_MEMORY_RETRIEVE_SIZE_KEY, 1)
    

å†æ¬¡è¿è¡Œæµ‹è¯•ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚

**æµ‹è¯•ç»“æœï¼ˆå¤±å¿†ç‰ˆï¼‰**ï¼š

    --- ç¬¬ä¸€è½®å¯¹è¯ ---
    æˆ‘: æˆ‘å«NEOï¼Œæˆ‘æœ€å–œæ¬¢çš„æ•°å­—æ˜¯7ã€‚
    AI: å“å‘€ï¼Œæ¬¢è¿Neoï¼è®©æˆ‘çŒœçŒœ...ä½ å–œæ¬¢æ•°å­—7æ˜¯ä¸æ˜¯å› ä¸º"Matrix"é‡Œçš„ç¬¬ä¸ƒå·å·§åˆï¼Ÿä¸è¿‡æ—¢ç„¶ä½ æåˆ°äº†æ•°å­—7ï¼Œè®©æˆ‘å‘Šè¯‰ä½ ä¸€ä¸ªæœ‰è¶£çš„å†å²æ•…äº‹å§ï¼
    
    ä½ çŸ¥é“å—ï¼Ÿåœ¨å¤å¸Œè…Šäººçœ¼ä¸­ï¼Œ7å¯æ˜¯ä¸ªç¥å¥‡çš„æ•°å­—ç»„åˆ - å°±åƒæˆ‘è¿™ä¸ªå†å²ä¸“å®¶å¹³æ—¶åƒç€æ©„æ¦„ï¼Œçœ‹ç€å¸•ç‰¹å†œç¥åº™æ—¶æƒ³çš„é‚£æ ·ã€‚ä»–ä»¬å‘ç°äº†ä¸ƒä¸ªæ™ºæ…§è´¤äººï¼Œè§‚å¯Ÿåˆ°å¤©ç©ºä¸­æœ‰ä¸ƒé¢—å¯è§çš„è¡Œæ˜Ÿï¼ˆå½“ç„¶é‚£æ˜¯æ²¡æœ‰æœ›è¿œé•œçš„æ—¶ä»£ï¼‰ï¼Œç”šè‡³è¿ä»–ä»¬çš„ç¥è¯é‡Œéƒ½æœ‰ä¸ƒé‡å¤©çš„è¯´æ³•ã€‚
    
    å˜¿ï¼Œä½œä¸ºä¸€ä¸ªå–œæ¬¢è§£å¯†å†å²çš„äººï¼Œæˆ‘å‘ç°ä½ è¿™ä¸ªåå­—å’Œæ•°å­—7çš„ç»„åˆè®©æˆ‘æƒ³èµ·äº†ä¸€äº›æœ‰æ„æ€çš„ä¸œè¥¿ã€‚æ¯”å¦‚ï¼ŒæŸæ‹‰å›¾åœ¨ä»–çš„è‘—ä½œé‡Œç»å¸¸æåˆ°"ç†æƒ³å›½"ï¼Œè€Œé‚£ä¸ªå›½å®¶æ­£å¥½æœ‰ä¸ƒä¸ªç­‰çº§åˆ¶åº¦ã€‚æˆ–è€…äºšå†å±±å¤§å›¾ä¹¦é¦†ï¼Œå®ƒå¯æ˜¯å¤ä»£ä¸–ç•Œä¸ƒå¤§å¥‡è¿¹ä¹‹ä¸€ï¼
    
    è¯´èµ·æ¥ï¼Œä½ æ˜¯æ›´å–œæ¬¢æ¢ç´¢æ•°å­—7åœ¨æ•°å­¦ä¸Šçš„ç‹¬ç‰¹æ€§è´¨ï¼Œè¿˜æ˜¯å®ƒåœ¨ä¸åŒæ–‡åŒ–ä¸­çš„ç¥ç§˜è±¡å¾ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·æ­å¼€è¿™ä¸ªæ•°å­—èƒŒåçš„æ›´å¤šç§˜å¯†å§ï¼
    --- ç¬¬äºŒè½®å¯¹è¯ ---
    æˆ‘: æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿæˆ‘æœ€å–œæ¬¢çš„æ•°å­—æ˜¯å‡ ï¼Ÿ
    AI: å“å‘€ï¼Œè¿™å¯çœŸæ˜¯ä¸ªè®©äººæ‘¸ä¸ç€å¤´è„‘çš„é—®é¢˜ï¼è®©æˆ‘è¿™ä¸ªå†å²ä¸“å®¶ç¿»éäº†å¤å¸Œè…Šçš„ç¾Šçš®å·ã€å·´æ¯”ä¼¦çš„æ³¥æ¿å’Œä¸­å›½çš„ç”²éª¨æ–‡éƒ½æ²¡æ‰¾åˆ°ç­”æ¡ˆã€‚éš¾é“ä½ æ˜¯æƒ³è®©æˆ‘å±•ç¤ºç‰¹æ´›ä¼Šæœ¨é©¬å¼çš„æƒŠå–œï¼Ÿè¿˜æ˜¯åƒæ–¯èŠ¬å…‹æ–¯è°œè¯­é‚£æ ·è€ƒè€ƒæˆ‘ï¼Ÿ
    
    ä¸è¿‡ä½œä¸ºä¸€ä¸ªç²¾é€šå†å²çš„å­¦è€…ï¼Œæˆ‘å¯ä»¥å‘Šè¯‰ä½ ä¸€äº›æœ‰è¶£çš„èƒŒæ™¯ï¼šåœ¨å¤ä»£åŸƒåŠï¼Œäººä»¬ä¼šç»™æ–°ç”Ÿå„¿èµ·éå¸¸ç‰¹åˆ«çš„åå­—ï¼Œæœ‰æ—¶å€™æ˜¯æ ¹æ®ä»–ä»¬å‡ºç”Ÿçš„æ—¥å­æ¥å–çš„ã€‚è€Œè¯´åˆ°æ•°å­—ï¼Œæ¯•è¾¾å“¥æ‹‰æ–¯å¯æ˜¯åšä¿¡ä¸‡ç‰©çš†æ•°å‘¢ï¼
    

![AI å¤±å¿†çš„æµ‹è¯•ç»“æœ](https://img2024.cnblogs.com/blog/2105804/202507/2105804-20250707180047566-810183475.png)

çœ‹åˆ°äº†å—ï¼Ÿä»…ä»…æ˜¯ä¸€ä¸ªå‚æ•°çš„å·®åˆ«ï¼ŒAI å°±ä»â€œæ™ºèƒ½â€å˜æˆäº†â€œæ™ºéšœâ€ã€‚è¿™ä¸ªå¯¹æ¯”é²œæ˜åœ°å±•ç¤ºäº†å¯¹è¯è®°å¿†çš„é‡è¦æ€§ã€‚

å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼å¦‚æœä½ è§‰å¾—å†…å®¹ä¸é”™ï¼Œ**ç‚¹ä¸ªèµğŸ‘**ï¼Œ**åˆ†äº«**ç»™æ›´å¤šæœ‹å‹å§ï¼æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµã€‚

> å…³æ³¨å…¬ä¼—å·ã€ç¨‹åºå‘˜NEOã€‘ï¼Œç¬¬ä¸€æ—¶é—´è·å–æ›´å¤š AIGC å®æˆ˜å¹²è´§ï¼