---
layout: post
title: 'ç”¨ Hashids ä¼˜é›…è§£å†³ C ç«¯è‡ªå¢ ID æš´éœ²é—®é¢˜'
date: "2026-02-05T00:57:51Z"
---
ç”¨ Hashids ä¼˜é›…è§£å†³ C ç«¯è‡ªå¢ ID æš´éœ²é—®é¢˜
============================

Â  Â åœ¨ C ç«¯ç³»ç»Ÿä¸­ï¼Œç›´æ¥å¯¹å¤–æš´éœ²æ•°æ®åº“è‡ªå¢ ID å¾€å¾€ä¼šå¸¦æ¥æ•°æ®æšä¸¾ã€è¶Šæƒè®¿é—®ç­‰å®‰å…¨éšæ‚£ã€‚æœ¬æ–‡å°†ä»å®é™…ä¸šåŠ¡åœºæ™¯å‡ºå‘ï¼Œåˆ†æè‡ªå¢ ID æš´éœ²çš„é—®é¢˜æœ¬è´¨ï¼Œå¹¶ä»‹ç»ä¸€ç§åŸºäº Hashids çš„å¯é€† ID æ··æ·†æ–¹æ¡ˆã€‚é€šè¿‡ Hashidsï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸æ”¹å˜æ•°æ®åº“ç»“æ„çš„å‰æä¸‹ï¼Œå®ç°å¯¹å¤– ID çš„å®‰å…¨åŒ–ä¸ç¾è§‚åŒ–ï¼Œå…¼é¡¾å®‰å…¨æ€§ã€æ€§èƒ½ä¸å·¥ç¨‹å¯è½åœ°æ€§ã€‚

**æœ¬æ–‡ä¸»è¦å†…å®¹ï¼š**

*   ä¸ºä»€ä¹ˆ C ç«¯ç³»ç»Ÿä¸èƒ½ç›´æ¥æš´éœ²è‡ªå¢ ID
*   è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆ
*   hashidsæœ‰é‚£äº›åŠŸèƒ½
*   hashidsçš„ä»£ç å®ç°æ˜¯ä»€ä¹ˆ

ä¸ºä»€ä¹ˆ C ç«¯ç³»ç»Ÿä¸èƒ½ç›´æ¥æš´éœ²è‡ªå¢ IDï¼Ÿ
=====================

åœ¨åç«¯ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯ä½¿ç”¨æ•°æ®åº“è‡ªå¢ IDï¼Œå¹¶ä¹ æƒ¯æ€§çš„ç›´æ¥è¿”å›ç»™Cç«¯äº¤äº’ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š

> ç™»å½•æ¥å£åœ¨ç™»å½•æˆåŠŸåè¿”å›çš„ç”¨æˆ·åŸºç¡€ä¿¡æ¯  
> {  
> Â  Â  "userId": 100,  
> Â  Â  "username": "tom",  
> Â  Â  "gender": 1,  
> Â  Â  "birthday": "2000-10-12 00:00:00"  
> }
> 
> URLä¸Šç›´æ¥æœ‰è‡ªå¢IDï¼šGET /api/user/100

å¯è¢«æšä¸¾
----

åªè¦æœ‰äººå‘ç°è¿™æ˜¯**è‡ªå¢ IDï¼Œ**ä¾‹å¦‚ï¼šGET /api/user/100ï¼Œè‡ªç„¶å¯ä»¥è¢«æšä¸¾

> /api/user/101
> 
> /api/user/102
> 
> /api/user/103
> 
> ......

å‘ç°äº†é—®é¢˜æ²¡ï¼š

*   å¯ä»¥è½»æ¾éå†æ¥å£ã€çˆ¬è™«å¯ä»¥æ‰¹é‡æ‰«åº“
*   å“ªæ€•ä½ æœ‰ç™»å½•æ€ã€é‰´æƒï¼Œåªè¦ **æƒé™æ ¡éªŒæœ‰ä¸€ä¸ªç‚¹æ²¡å…œä½**ï¼Œåæœæå…¶ä¸¥é‡ï¼šè¡¨æ•°æ®è¢«æ‰¹é‡æŠ“å–ï¼Œéšç§æ•°æ®è¢«éå†ã€çˆ¬å…‰
*   è¿™ç±»æ”»å‡»æˆæœ¬æä½ï¼Œç”šè‡³ä¸ç®—â€œæ”»å‡»â€

è¶Šæƒ
--

è¶Šæƒçš„é£é™©è¢«æ— é™æ”¾å¤§ï¼Œä½ â€œä»¥ä¸ºâ€ä½ åšäº†é‰´æƒï¼Œå…¶å®ä¸ä¸€å®šï¼Œç°å®æƒ…å†µå¾€å¾€æ˜¯ï¼š

*   æ¥å£ A åšäº†ç”¨æˆ·æ ¡éªŒ
*   æ¥å£ B å¿˜äº†
*   æ–°æ¥å£ä¸´æ—¶åŠ çš„ï¼Œæ ¡éªŒæ¼äº†
*   æŸä¸ªå†…éƒ¨æ¥å£è¢«è¯¯æš´éœ²

ä¸€æ—¦ ID æ˜¯å¯é¢„æµ‹çš„ï¼š

*   æ”»å‡»è€…åªéœ€è¦æ‰¾åˆ° ä¸€ä¸ªæ²¡æ ¡éªŒçš„å…¥å£
*   å°±å¯ä»¥â€œæ¨ªå‘ç§»åŠ¨â€è®¿é—®æ‰€æœ‰æ•°æ®

ä¾‹å¦‚ï¼ŒURLä¸­å­˜åœ¨è‡ªå¢IDï¼Œåœ¨Cç«¯éå¸¸å…¸å‹çš„åœºæ™¯æ˜¯ç”¨æˆ·åˆ†äº«é“¾æ¥ç»™æœ‹å‹ï¼Œå¦‚æœæœ‹å‹ä¿®æ”¹URLä¸­çš„IDï¼Œå°±ä¼šè·³è½¬åˆ°æœ¬ä¸å±äºè‡ªå·±èƒ½çœ‹åˆ°çš„æ•°æ®å†…å®¹ã€‚

ä¸šåŠ¡ä¿¡æ¯å…¨æš´éœ²
-------

é€šè¿‡ ID å°±èƒ½çœ‹ç©¿ä½ çš„ä¸šåŠ¡ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š

*   ğŸ“ˆ **è®¢å•é‡å¢é•¿é€Ÿåº¦**
    
*   ğŸ‘¥ **ç”¨æˆ·è§„æ¨¡**
    
*   â±ï¸ **ä¸šåŠ¡å³°å€¼æ—¶æ®µ**
    
*   ğŸ§® **æ˜¯å¦åˆ è¿‡æ•°æ®ï¼ˆID æ˜¯å¦æ–­å±‚ï¼‰**
    

è¿™ç§åœ¨Cç«¯ç”¨æˆ·çœ‹æ¥æ²¡æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œå¦‚æœè®©ç”¨æˆ·â€œçœ‹ä¸æ‡‚â€çš„ IDï¼Œåè€Œæ›´ä¸“ä¸šã€‚

*   ğŸ‘‰ çº¯æ•°å­— IDï¼Œçœ‹èµ·æ¥åƒâ€œå†…éƒ¨ç³»ç»Ÿâ€
    
*   ğŸ‘‰æ··æ·† IDï¼ŒÂ æ›´åƒâ€œäº§å“è®¾è®¡çš„ä¸€éƒ¨åˆ†â€
    

è§£å†³æ–¹æ¡ˆ
====

æ ¹æ®ä»¥ä¸Šé—®é¢˜ï¼Œæˆ‘ä»¬æœŸæœ›æœ‰è¿™æ ·ä¸€ç§è§£å†³æ–¹æ¡ˆå¯ä»¥æ··æ·†è‡ªå¢ID

*   å”¯ä¸€ä¸å¯é‡å¤ï¼šæ•°æ®é‡å†…éƒ½å¿…é¡»å”¯ä¸€ï¼Œä¸èƒ½é‡å¤
*   æ”¯æŒå¯é€†ï¼šIDå¯ä»¥ç¼–ç ä¸ºä¸€ä¸ªçœ‹ä¸å‡ºè§„å¾‹çš„ä¸²ï¼Œä¹Ÿå¯ä»¥è§£ç ä¸ºåŸIDï¼Œä¸å½±å“æ•°æ®åº“IDå­—æ®µ
*   é«˜æ•ˆç”Ÿæˆä¸è§£æï¼šç”Ÿæˆã€éªŒè¯çš„ç®—æ³•å¿…é¡»ä¿è¯æ•ˆç‡ï¼Œä¸èƒ½å ç”¨å¤ªå¤šç³»ç»Ÿèµ„æº
*   ä¸å¯é¢„æµ‹ä¸å®‰å…¨ï¼šæ— è§„åˆ™æ··æ·†ï¼Œè§„å¾‹æ€§ä¸èƒ½å¾ˆæ˜æ˜¾ï¼Œä¸èƒ½è½»æ˜“è¢«äººçŒœæµ‹åˆ°ï¼Œé˜²æ­¢çˆ†åˆ·
*   å·¥ç¨‹æˆæœ¬ä½ï¼šä¸æ”¹è¡¨ã€ä¸è¿æ•°æ®

**å¸¸è§ä½†ä¸å¤Ÿä¼˜é›…çš„è§£å†³æ–¹æ¡ˆ**

*   UUID
    *   å­—ç¬¦ä¸²è¿‡é•¿
    *   URLã€äºŒç»´ç ä¸å‹å¥½
    *   è°ƒè¯•ä½“éªŒå·®
*   Snowflake / Base64
    *   ä»ç„¶å¯èƒ½æš´éœ²æ—¶é—´ä¿¡æ¯
    *   å‰åç«¯å®ç°ä¸ç»Ÿä¸€
*   AES / RSA åŠ å¯† ID
    *   æ€§èƒ½ä¸å¤æ‚åº¦æˆæœ¬é«˜
    *   å¯¹â€œåªæ˜¯éšè— IDâ€æ¥è¯´å±äºè¿‡åº¦è®¾è®¡

**è¿™ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¯Hashidsã€‚**

**Hashidsçš„æ ¸å¿ƒåŠŸèƒ½ï¼šæŠŠä¸€ä¸ªæˆ–å¤šä¸ªæ•´æ•°ï¼ˆint / longï¼‰è½¬æ¢æˆä¸€ä¸ªä¸å¯é¢„æµ‹ã€å¯é€†çš„çŸ­å­—ç¬¦ä¸²ã€‚**

**åŸºæœ¬å±æ€§**

*   è¾“å…¥æ˜¯æ•´æ•°ï¼ˆæ”¯æŒlongå‹ï¼‰ï¼Œè¾“å‡ºæ˜¯å­—ç¬¦ä¸²ï¼ˆåªåŒ…å«ï¼ša-z A-Z 0-9ï¼Œæ— å…¶ä»–ç‰¹æ®Šå­—ç¬¦ï¼‰
*   å¯ä»¥è‡ªå®šä¹‰ç¼–ç å­—ç¬¦
*   **å¯é€†**ï¼Œä½†ä¸å¯çŒœ
*   æ”¯æŒå¤šä¸ªIDç¼–ç ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²
*   å¯æ§åˆ¶æœ€å°é•¿åº¦ï¼Œä¸æ”¯æŒâ€œæœ€é•¿é•¿åº¦â€é™åˆ¶ï¼Œå®é™…é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œéšè¾“å…¥æ•°å­—å¤§å°å˜åŒ–

**å…¸å‹ç”¨é€”ï¼š**

*   æ•°æ®åº“è‡ªå¢ ID ï¼Œå¯¹å¤–å±•ç¤ºç”¨å­—ç¬¦ä¸²ï¼Œé˜²æ­¢ ID æšä¸¾
    
*   çŸ­é“¾æ¥ / é‚€è¯·ç  / å…‘æ¢ç 
    
*   URL / å°ç¨‹åºå‚æ•°æ›´å‹å¥½
    
*   å°†å¤šä¸ªæ•°å­—ï¼ˆæ•°ç»„ï¼‰è¿›è¡Œæ··æ·†ï¼Œé˜²æ­¢å‚æ•°è¢«ç¯¡æ”¹

**æ³¨æ„ï¼š**å®ƒæ˜¯â€œæ··æ·†ï¼ˆobfuscationï¼‰â€ï¼Œä¸æ˜¯â€œåŠ å¯†ï¼ˆencryptionï¼‰â€ï¼Œä¸èƒ½ä½œä¸ºå¯†ç å­¦ç±»çš„åœºæ™¯ä½¿ç”¨ã€‚

**Hashidså†…éƒ¨åŸç†**
===============

ç¼–ç ï¼ˆencdoeï¼‰æµç¨‹ï¼š

> åŸå§‹æ•°å­— --> æ‰“ä¹±å­—ç¬¦è¡¨ï¼ˆä¾èµ– saltï¼‰ --> é€‰å– guard / separator --> è¿›åˆ¶è½¬æ¢ï¼ˆbase-Nï¼‰ --> æŒ‰è§„åˆ™æ‹¼æ¥ --> è¾“å‡ºå­—ç¬¦ä¸²

**æ ¸å¿ƒç»„æˆå…ƒç´ **

*   æ ¸å¿ƒç»„æˆå…ƒç´ 
    *   å­—ç¬¦è¡¨ï¼ˆalphabetï¼‰ï¼šæŒ‡å®šé‚£äº›å­—ç¬¦æ˜¯è¾“å‡ºçš„ç»“æœé›†
    *   é»˜è®¤å­—ç¬¦é›†ï¼šabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890
    *   ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼ˆä¾‹å¦‚åªç”¨å¤§å°å†™ + æ•°å­—ï¼Œæ’é™¤ 0/O/I/lï¼‰ï¼Œæ³¨æ„å­—ç¬¦ä¸èƒ½é‡å¤ã€‚
    *   å­—ç¬¦é›†é•¿åº¦ = è¿›åˆ¶ base N
*   salt
    *   å†³å®šå­—ç¬¦è¡¨å¦‚ä½•è¢«æ´—ç‰Œ
    *   åŒä¸€ä¸ª IDï¼Œåœ¨ä¸åŒ salt ä¸‹ï¼Œç»“æœå®Œå…¨ä¸åŒ
    *   ä¸ä¿å­˜ saltï¼Œå°±æ— æ³•åè§£
*   separators & guards
    *   Hashids ä¼šä» alphabet ä¸­åˆ†å‡ºä¸¤ç±»ç‰¹æ®Šå­—ç¬¦ï¼šseparatorsï¼Œåˆ†éš”å¤šä¸ªæ•°å­—ã€‚guardsï¼Œæ§åˆ¶æœ€å°é•¿åº¦ã€å¢å¼ºä¸å¯é¢„æµ‹æ€§ã€‚
    *   è¿™ä¸€æ­¥ä¸»è¦æ˜¯ä¸ºäº†ï¼šé¿å…è¾“å‡ºæ¨¡å¼è¿‡äºè§„åˆ™ï¼ŒåŒæ—¶æ”¯æŒç¼–ç å¤šä¸ªæ•°å­—çš„åœºæ™¯ï¼ˆencode(1,2,3)ï¼‰

**æ€ä¹ˆå®ç°å¯é€†æ€§çš„ï¼Ÿ**

*   å­—ç¬¦è¡¨æ´—ç‰Œï¼ˆconsistent shuffleï¼‰
*   åœ¨ç›¸åŒ alphabet + saltä¸‹ï¼Œç¼–ç åŒä¸€IDï¼Œç»“æœæ°¸è¿œç›¸åŒ

æŸ¥çœ‹ä»£ç 

    for i from alphabet.length-1 downTo 1:
        j = (salt_char_code + i + previous) % i
        swap(alphabet[i], alphabet[j])

**æ€ä¹ˆè½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„ï¼Ÿ**

*   å‡è®¾å­—ç¬¦è¡¨ï¼ˆalphabetï¼‰çš„é•¿åº¦ä¸º62
*   æ•°å­—å…ˆæ¨¡62ï¼Œå¾—åˆ°çš„ä½™æ•°ä½œä¸ºä¸‹æ ‡ä»å­—ç¬¦è¡¨ä¸­å–å¾—ä¸€ä¸ªå­—ç¬¦
*   å†é™¤62ï¼Œç›´åˆ°æ•°å­—å°äº0æ—¶åœæ­¢
*   å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²

**å¦‚ä½•æ”¯æŒåŒæ—¶ç¼–ç å¤šä¸ªæ•°å­—ï¼Ÿ**

ä¾‹å¦‚ï¼šencode(1, 2, 3)

> 1 â†’ abc  
> 2 â†’ k9  
> 3 â†’ z

ä¸­é—´ç”¨ separatorï¼ˆä¹Ÿæ˜¯æ¥è‡ª alphabetï¼Œä½†ç»è¿‡ä¸“é—¨ç­›é€‰ï¼‰éš”å¼€ï¼Œæœ€ç»ˆè¾“å‡ºï¼šabcXk9Yz

**æ€ä¹ˆä¿è¯æœ€å°é•¿åº¦ï¼Ÿ**

*   åœ¨å¤´å°¾æ’å…¥ guard
    
*   å†æ¬¡æ´—ç‰Œ alphabet
    
*   é‡å¤ç›´åˆ°æ»¡è¶³é•¿åº¦ï¼Œè¿™ä¸€æ­¥æ˜¯ä¼ªéšæœºå¡«å……ï¼Œä¸å½±å“ decodeã€‚
    

**decodeçš„å·¥ä½œæµç¨‹ï¼Ÿ**

*   å»æ‰ guards
    
*   ç”¨ separators åˆ‡åˆ†
    
*   å¤åŸ alphabet æ´—ç‰Œ
    
*   æ¯ä¸€æ®µåš base-N â†’ long
    

**decodeå¤±è´¥æ€ä¹ˆå¤„ç†ï¼Ÿ**

*   salt ä¸ä¸€è‡´ â†’ decode å¤±è´¥æˆ–å¾—åˆ°é”™è¯¯å€¼
*   alphabet ä¸ä¸€è‡´ â†’ decode å¤±è´¥

ä»£ç å®ç°
====

ç»ˆäºåˆ°äº†æ¿€åŠ¨äººå¿ƒçš„ä»£ç å®ç°ç¯èŠ‚ï¼Œæ’¸èµ·è¢–å­ï¼Œæ•²é”®ç›˜ã€‚

åœ¨pomä¸­å¯¼å…¥ä¾èµ–

    <dependency>
        <groupId>org.hashids</groupId>
        <artifactId>hashids</artifactId>
        <version>1.0.3</version>
    </dependency>

ç®€å•ç”¨æ³•
----

    import org.hashids.Hashids;
    import org.springframework.stereotype.Service;
    
    import java.util.Arrays;
    
    @Service
    public class HashidsService {
    
        //Beanå•ä¾‹ï¼Œä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜
        private final Hashids hashids = new Hashids();
    
        public String encode(int code) {
            return hashids.encode(code);
        }
    
        public String encode(long code) {
            return hashids.encode(code);
        }
    
        public long decode(String decoded) {
            long[] decodes = hashids.decode(decoded);
            if (decodes.length == 0) {
                throw new IllegalArgumentException("éæ³•ID");
            }
            return decodes[0];
        }
    
        public String encodeArr(int[] codes) {
            long[] codeArr = Arrays.stream(codes).asLongStream().toArray();
            return hashids.encode(codeArr);
        }
    
        public String encodeArr(long[] codes) {
            return hashids.encode(codes);
        }
    
        public long[] decodeArr(String decoded) {
            long[] decodes = hashids.decode(decoded);
            if (decodes.length == 0) {
                throw new IllegalArgumentException("éæ³•ID");
            }
            return decodes;
        }
    
    }

åŠ ç›
--

**åŠ ç›æ··æ·†**

*   é˜²æ­¢åˆ«äººç”¨åŒæ ·åº“è§£ä½  ID
*   salt ä¸€æ—¦ä¸Šçº¿ ç»å¯¹ä¸èƒ½æ”¹

    # application.yml
    hashids:
      salt: kjsdfiaosudkskldjfa #æ··æ·†ç”¨çš„ç›
      min-length: 8 #æœ€å°é•¿åº¦

æŸ¥çœ‹ä»£ç 

    package com.ks.demo.uc.hashids;
    
    import org.hashids.Hashids;
    import org.springframework.beans.factory.annotation.Value;
    import org.springframework.stereotype.Service;
    
    import javax.annotation.PostConstruct;
    import java.util.Arrays;
    
    /**
     * åŠ ç›æ··æ·†
     *
     * saltçš„ä½œç”¨
     * é˜²æ­¢åˆ«äººç”¨åŒæ ·åº“è§£ä½  ID
     * salt ä¸€æ—¦ä¸Šçº¿ ç»å¯¹ä¸èƒ½æ”¹
     */
    @Service
    public class HashidsSaltService {
        @Value("${hashids.salt}")
        private String salt;
        @Value("${hashids.min-length}")
        private int minLength;
    
        //newåœ¨@Valueæ³¨å…¥ä¹‹å‰
        //è§£å†³æ–¹æ¡ˆï¼šåæ„é€ å™¨ï¼Œåœ¨æ„é€ å™¨çš„å…¥å‚ä½¿ç”¨@Valueï¼Œä½¿ç”¨@ConfigurationPropertieså•ç‹¬æ³¨å…¥
        //private Hashids hashidsSalt = new Hashids(salt);
    
        private Hashids hashidsSalt = null;
        private Hashids hashidsMinLen = null;
    
        @PostConstruct
        public void init() {
            hashidsSalt = new Hashids(salt);
            hashidsMinLen = new Hashids(salt, minLength);
        }
    
        public String encode(int code) {
            return hashidsSalt.encode(code);
        }
        public String encode(long code) {
            return hashidsSalt.encode(code);
        }
        public long decode(String decoded) {
            long[] decodes = hashidsSalt.decode(decoded);
            if (decodes.length == 0) {
                throw new IllegalArgumentException("éæ³•ID");
            }
            return decodes[0];
        }
    
        public String encodeArr(int[] codes) {
            long[] codeArr = Arrays.stream(codes).asLongStream().toArray();
            return hashidsSalt.encode(codeArr);
        }
        public String encodeArr(long[] codes) {
            return hashidsSalt.encode(codes);
        }
        public long[] decodeArr(String decoded) {
            long[] decodes = hashidsSalt.decode(decoded);
            if (decodes.length == 0) {
                throw new IllegalArgumentException("éæ³•ID");
            }
            return decodes;
        }
    
        public String encodeMinLen(int code) {
            return hashidsMinLen.encode(code);
        }
        public String encodeMinLen(long code) {
            return hashidsMinLen.encode(code);
        }
        public long decodeMinLen(String decoded) {
            long[] decodes = hashidsMinLen.decode(decoded);
            if (decodes.length == 0) {
                throw new IllegalArgumentException("éæ³•ID");
            }
            return decodes[0];
        }
    
        public String encodeMinLenArr(int[] codes) {
            long[] codeArr = Arrays.stream(codes).asLongStream().toArray();
            return hashidsMinLen.encode(codeArr);
        }
        public String encodeMinLenArr(long[] codes) {
            return hashidsMinLen.encode(codes);
        }
        public long[] decodeMinLenArr(String decoded) {
            long[] decodes = hashidsMinLen.decode(decoded);
            if (decodes.length == 0) {
                throw new IllegalArgumentException("éæ³•ID");
            }
            return decodes;
        }
    }

è‡ªå®šä¹‰å‚ä¸ç¼–ç çš„å­—ç¬¦
----------

**å­—ç¬¦é›†è§„åˆ™ï¼š**

*   è‡³å°‘ 16 ä¸ªå­—ç¬¦
*   ä¸å…è®¸é‡å¤å­—ç¬¦

    # application.yml
    hashids:
      salt: kjsdfiaosudkskldjfa #æ··æ·†ç”¨çš„ç›
      min-length: 8 #æœ€å°é•¿åº¦
      #è‡³å°‘ 16 ä¸ªå­—ç¬¦ï¼Œä¸å…è®¸é‡å¤å­—ç¬¦
      #å‚ä¸ç¼–ç çš„å­—ç¬¦ï¼Œå¯ä»¥å‰”é™¤è°ƒ0/O/o,1/I/lç­‰å­—ç¬¦ï¼Œå¢å¼ºå¯è¯»æ€§
      base-char: 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz

æŸ¥çœ‹ä»£ç 

    package com.ks.demo.uc.hashids;
    
    import org.hashids.Hashids;
    import org.springframework.beans.factory.annotation.Value;
    import org.springframework.stereotype.Service;
    
    import javax.annotation.PostConstruct;
    import java.util.Arrays;
    
    /**
     * è‡ªå®šä¹‰å‚ä¸ç¼–ç çš„å­—ç¬¦
     *
     * å­—ç¬¦é›†è§„åˆ™ï¼š
     * è‡³å°‘ 16 ä¸ªå­—ç¬¦
     * ä¸å…è®¸é‡å¤å­—ç¬¦
     *
     * ä½¿ç”¨åœºæ™¯
     * é¿å… 0/Oã€l/1 æ··æ·†
     * åªå…è®¸å¤§å†™å­—æ¯
     *
     */
    @Service
    public class HashidsBaseCharService {
        @Value("${hashids.salt}")
        private String salt;
        @Value("${hashids.min-length}")
        private int minLength;
        @Value("${hashids.base-char}")
        private String baseChar;
    
        private Hashids hashids = null;
    
        @PostConstruct
        public void init() {
            hashids = new Hashids(salt, minLength, baseChar);
        }
    
        public String encode(int code) {
            return hashids.encode(code);
        }
        public String encode(long code) {
            return hashids.encode(code);
        }
        public long decode(String decoded) {
            long[] decodes = hashids.decode(decoded);
            if (decodes.length == 0) {
                throw new IllegalArgumentException("éæ³•ID");
            }
            return decodes[0];
        }
    
        public String encodeArr(int[] codes) {
            long[] codeArr = Arrays.stream(codes).asLongStream().toArray();
            return hashids.encode(codeArr);
        }
        public String encodeArr(long[] codes) {
            return hashids.encode(codes);
        }
        public long[] decodeArr(String decoded) {
            long[] decodes = hashids.decode(decoded);
            if (decodes.length == 0) {
                throw new IllegalArgumentException("éæ³•ID");
            }
            return decodes;
        }
    
    }

ç»“å°¾
==

åœ¨æ–‡ç« æœ€åï¼Œå°è¯•å¯¹è‡ªå·±æé—®ä¸€ä¸‹é—®é¢˜ï¼Œæ¥æ£€éªŒä½ æ˜¯å¦çœŸæ­£äº†è§£åˆ°äº†æœ¬æ–‡çš„æ ¸å¿ƒå†…å®¹ã€‚

1.  C ç«¯è‡ªå¢ ID æš´éœ²ä¼šæœ‰é‚£äº›é—®é¢˜ï¼Ÿ
2.  hashidsçš„æ ¸å¿ƒç‰¹æ€§ï¼Ÿä¸ºä»€ä¹ˆå¯ä»¥ä½œä¸ºæ··æ·†è‡ªå¢idçš„è§£å†³æ–¹æ¡ˆï¼Ÿ
3.  hashidsçš„åŠŸèƒ½æœ‰é‚£äº›ï¼Ÿ
4.  ä»£ç æ€ä¹ˆå†™ï¼Ÿ

æœ¬æ–‡ç»“æŸã€‚