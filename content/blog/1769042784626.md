---
layout: post
title: '一天一个Python库：urllib3 - 强大的HTTP客户端'
date: "2026-01-22T00:46:24Z"
---
一天一个Python库：urllib3 - 强大的HTTP客户端
================================

urllib3 - 强大的HTTP客户端，让网络请求易如反掌
==============================

一、什么是urllib3？
-------------

**urllib3** 是一个用于处理 HTTP 请求和连接池的强大、用户友好的 Python 库。  
它可以帮助你：

*   发送各种 HTTP 请求（GET, POST, PUT, DELETE等）。
*   管理连接池，提高网络请求效率。
*   处理重试和重定向。
*   支持并发和线程安全。
*   更好地处理SSL/TLS验证。

二、应用场景
------

**urllib3** 广泛应用于以下实际场景：

*   **Web爬虫**: 抓取网页内容，构建数据采集系统。
*   **API客户端**: 与 RESTful API 进行交互，构建自动化工具。
*   **自动化测试**: 模拟HTTP请求，测试Web服务。
*   **网络服务集成**: 在应用程序中集成第三方网络服务。
*   **下载文件**: 从互联网上下载各种文件。

三、如何安装
------

1.  使用 pip 安装

    pip install urllib3
    
    # 如果安装慢的话，推荐使用国内镜像源
    pip install urllib3 -i https://pypi.tuna.tsinghua.edu.cn/simple/
    

2.  使用 [PythonRun](https://www.min2k.com/tools/python-run/) 在线运行代码（无需本地安装）

四、示例代码
------

发送一个GET请求并检查状态码

    import urllib3
    
    # 创建一个PoolManager实例，用于管理HTTP连接池
    http = urllib3.PoolManager()
    
    # 指定要请求的URL
    url = "http://httpbin.org/get"
    
    # 发送GET请求
    try:
        response = http.request('GET', url)
    
        # 检查响应的状态码是否为200（OK）
        if response.status == 200:
            print(f"请求成功！状态码: {response.status}")
            print("响应数据:")
            # 将响应的字节数据解码为UTF-8字符串并打印
            print(response.data.decode('utf-8'))
        else:
            # 如果状态码不是200，则打印错误信息
            print(f"请求失败！状态码: {response.status}")
            print(f"错误信息: {response.data.decode('utf-8')}")
    
    except urllib3.exceptions.MaxRetryError as e:
        # 捕获连接重试错误
        print(f"连接失败或重试次数超出限制: {e}")
    except urllib3.exceptions.NewConnectionError as e:
        # 捕获新建连接错误
        print(f"无法建立连接: {e}")
    except Exception as e:
        # 捕获其他所有可能的异常
        print(f"发生未知错误: {e}")
    
    

使用 [PythonRun](https://www.min2k.com/tools/python-run/?code=import%20urllib3%0A%0A%23%20%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAPoolManager%E5%AE%9E%E4%BE%8B%EF%BC%8C%E7%94%A8%E4%BA%8E%E7%AE%A1%E7%90%86HTTP%E8%BF%9E%E6%8E%A5%E6%B1%A0%0Ahttp%20%3D%20urllib3.PoolManager%28%29%0A%0A%23%20%E6%8C%87%E5%AE%9A%E8%A6%81%E8%AF%B7%E6%B1%82%E7%9A%84URL%0Aurl%20%3D%20%22http%3A%2F%2Fhttpbin.org%2Fget%22%0A%0A%23%20%E5%8F%91%E9%80%81GET%E8%AF%B7%E6%B1%82%0Atry%3A%0A%20%20%20%20response%20%3D%20http.request%28'GET'%2C%20url%29%0A%0A%20%20%20%20%23%20%E6%A3%80%E6%9F%A5%E5%93%8D%E5%BA%94%E7%9A%84%E7%8A%B6%E6%80%81%E7%A0%81%E6%98%AF%E5%90%A6%E4%B8%BA200%EF%BC%88OK%EF%BC%89%0A%20%20%20%20if%20response.status%20%3D%3D%20200%3A%0A%20%20%20%20%20%20%20%20print%28f%22%E8%AF%B7%E6%B1%82%E6%88%90%E5%8A%9F%EF%BC%81%E7%8A%B6%E6%80%81%E7%A0%81%3A%20%7Bresponse.status%7D%22%29%0A%20%20%20%20%20%20%20%20print%28%22%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%3A%22%29%0A%20%20%20%20%20%20%20%20%23%20%E5%B0%86%E5%93%8D%E5%BA%94%E7%9A%84%E5%AD%97%E8%8A%82%E6%95%B0%E6%8D%AE%E8%A7%A3%E7%A0%81%E4%B8%BAUTF-8%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B9%B6%E6%89%93%E5%8D%B0%0A%20%20%20%20%20%20%20%20print%28response.data.decode%28'utf-8'%29%29%0A%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%23%20%E5%A6%82%E6%9E%9C%E7%8A%B6%E6%80%81%E7%A0%81%E4%B8%8D%E6%98%AF200%EF%BC%8C%E5%88%99%E6%89%93%E5%8D%B0%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%0A%20%20%20%20%20%20%20%20print%28f%22%E8%AF%B7%E6%B1%82%E5%A4%B1%E8%B4%A5%EF%BC%81%E7%8A%B6%E6%80%81%E7%A0%81%3A%20%7Bresponse.status%7D%22%29%0A%20%20%20%20%20%20%20%20print%28f%22%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%3A%20%7Bresponse.data.decode%28'utf-8'%29%7D%22%29%0A%0Aexcept%20urllib3.exceptions.MaxRetryError%20as%20e%3A%0A%20%20%20%20%23%20%E6%8D%95%E8%8E%B7%E8%BF%9E%E6%8E%A5%E9%87%8D%E8%AF%95%E9%94%99%E8%AF%AF%0A%20%20%20%20print%28f%22%E8%BF%9E%E6%8E%A5%E5%A4%B1%E8%B4%A5%E6%88%96%E9%87%8D%E8%AF%95%E6%AC%A1%E6%95%B0%E8%B6%85%E5%87%BA%E9%99%90%E5%88%B6%3A%20%7Be%7D%22%29%0Aexcept%20urllib3.exceptions.NewConnectionError%20as%20e%3A%0A%20%20%20%20%23%20%E6%8D%95%E8%8E%B7%E6%96%B0%E5%BB%BA%E8%BF%9E%E6%8E%A5%E9%94%99%E8%AF%AF%0A%20%20%20%20print%28f%22%E6%97%A0%E6%B3%95%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%3A%20%7Be%7D%22%29%0Aexcept%20Exception%20as%20e%3A%0A%20%20%20%20%23%20%E6%8D%95%E8%8E%B7%E5%85%B6%E4%BB%96%E6%89%80%E6%9C%89%E5%8F%AF%E8%83%BD%E7%9A%84%E5%BC%82%E5%B8%B8%0A%20%20%20%20print%28f%22%E5%8F%91%E7%94%9F%E6%9C%AA%E7%9F%A5%E9%94%99%E8%AF%AF%3A%20%7Be%7D%22%29%0A) 在线运行这段代码，结果如下：

    请求成功！状态码: 200
    响应数据:
    {
      "args": {}, 
      "headers": {
        "Accept-Encoding": "identity", 
        "Host": "httpbin.org", 
        "User-Agent": "python-urllib3/1.26.18", 
        "X-Amzn-Trace-Id": "Root=1-65f57a3e-6d4b2e6503c75f4d1e041300"
      }, 
      "origin": "106.120.246.101", 
      "url": "http://httpbin.org/get"
    }
    

使用 [MermaidGo](https://www.min2k.com/tools/mermaid/?code=flowchart%20TD%0A%20%20A%5B%E5%BC%80%E5%A7%8B%5D%20--%3E%20B%7B%E5%88%9B%E5%BB%BAPoolManager%7D%3B%0A%20%20B%20--%3E%20C%5B%E6%8C%87%E5%AE%9AURL%5D%3B%0A%20%20C%20--%3E%20D%7B%E5%8F%91%E9%80%81GET%E8%AF%B7%E6%B1%82%7D%3B%0A%20%20D%20--%20%E6%88%90%E5%8A%9F%20--%3E%20E%7B%E6%A3%80%E6%9F%A5%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81%7D%3B%0A%20%20E%20--%20%E7%8A%B6%E6%80%81%E7%A0%81%20%3D%3D%20200%20--%3E%20F%5B%E6%89%93%E5%8D%B0%E6%88%90%E5%8A%9F%E4%BF%A1%E6%81%AF%E5%92%8C%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%5D%3B%0A%20%20E%20--%20%E7%8A%B6%E6%80%81%E7%A0%81%20!%3D%20200%20--%3E%20G%5B%E6%89%93%E5%8D%B0%E8%AF%B7%E6%B1%82%E5%A4%B1%E8%B4%A5%E4%BF%A1%E6%81%AF%5D%3B%0A%20%20D%20--%20%E5%A4%B1%E8%B4%A5%20%28MaxRetryError%29%20--%3E%20H%5B%E6%89%93%E5%8D%B0%E8%BF%9E%E6%8E%A5%E9%87%8D%E8%AF%95%E9%94%99%E8%AF%AF%5D%3B%0A%20%20D%20--%20%E5%A4%B1%E8%B4%A5%20%28NewConnectionError%29%20--%3E%20I%5B%E6%89%93%E5%8D%B0%E6%97%A0%E6%B3%95%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E9%94%99%E8%AF%AF%5D%3B%0A%20%20D%20--%20%E5%A4%B1%E8%B4%A5%20%28%E5%85%B6%E4%BB%96%E5%BC%82%E5%B8%B8%29%20--%3E%20J%5B%E6%89%93%E5%8D%B0%E6%9C%AA%E7%9F%A5%E9%94%99%E8%AF%AF%5D%3B%0A%20%20F%20--%3E%20K%5B%E7%BB%93%E6%9D%9F%5D%3B%0A%20%20G%20--%3E%20K%3B%0A%20%20H%20--%3E%20K%3B%0A%20%20I%20--%3E%20K%3B%0A%20%20J%20--%3E%20K%3B) 绘制示例代码的流程图，结果如下：  

五、学习资源
------

1.  开源项目：[urllib3](https://github.com/urllib3/urllib3)
2.  中文自述：[REMDME](https://www.python64.cn/readme/urllib3/)
3.  在线运行：[PythonRun](https://www.min2k.com/tools/python-run/)

> 如果这篇文章对你有帮助，欢迎点赞、收藏、转发！  
> 学习过程中有任何问题，欢迎在评论区留言交流～