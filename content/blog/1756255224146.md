---
layout: post
title: '爆肝三周，我终于上线了自己的第一个小程序'
date: "2025-08-27T00:40:24Z"
---
爆肝三周，我终于上线了自己的第一个小程序
====================

三周前，帮朋友拍证件照时差点吵起来 —— 他要白底一寸照，我用修图软件改背景，边缘总留着灰边，最后还是花 30 块去照相馆拍的。看着他吐槽 “拍个照还要跑一趟”，我突然冒了个念头：要不自己做个证件照小程序？当时也就随口一说，转头就打开电脑，真的开始琢磨起来了。

半路出家
----

选方向没纠结，就定证件照制作。之前帮人改照片总出错，要么尺寸不对，要么背景色不标准；身边朋友也常说，临时要个证件照，找修图软件半天弄不明白，去照相馆又费时间。想着做个轻量化工具，核心功能就三个：标准化尺寸调整（覆盖一寸、二寸、社保照等常用规格）、背景色一键替换（白 / 蓝 / 红三色标准色值）、电子版保存，暂时不做复杂的美颜功能，先保证基础可用性。

真正动手才知道难。我是个半路出家的，之前只跟着网课学过基础的微信小程序开发，真要搭项目框架时，对着微信开发者工具的文档发呆能发一下午。第一天晚上熬到两点，好不容易弄出个能上传照片的静态页面，结果点击 “确认上传” 按钮毫无反应，排查半天才发现绑定的事件函数名写错了；更糟的是保存代码时误删了 pages 目录，当时坐在电脑前盯着黑屏，差点把鼠标扔了。

这坑啊，真的一填一个不吱声
-------------

中间那周简直是跟 bug 死磕。最头疼的先是**背景替换功能**，用户上传照片后，人物边缘总带着原背景的杂色，明明照着教程调了 mask 遮罩参数，到我这就变成 “大花脸”。凌晨三点蹲在开发者论坛发帖，有个匿名网友回了句 “试试把边缘羽化值从 5px 调至 7px，同时增加色彩容差阈值”，试完真的好了，盯着屏幕里干净的白底照片，傻笑到天边泛白。

紧接着又遇到**图片大小的问题** —— 很多用户上传的照片是相机直出图，动辄 3-5M，远超小程序默认 1M 的上传限制，一上传就卡住闪退。一开始我试着用前端压缩插件，通过调整图片分辨率和质量参数（把 JPG 质量压缩到 80%，分辨率限制在 1080px 以内），但压缩后画质损失严重，证件照打印出来会模糊。后来查资料发现可以用云存储，对比了几家云服务后，选了有免费额度的腾讯云对象存储，花了一天时间学怎么调用 SDK 接口，把用户上传的原图先传到云服务器，再在云端完成压缩和处理，最后返回压缩后的标准图，这才解决了大小和画质的矛盾。

**尺寸功能**也踩过坑，一寸照（2.5cm×3.5cm）、二寸照（3.5cm×4.9cm）的像素比例总弄混，按公式换算后（1 英寸 = 96 像素），打印出来要么头顶被截，要么两边留白太多。最后拿着尺子在纸上画实际尺寸，对着屏幕一点点校准像素值，还专门找了照相馆的标准模板对比，蹲在桌前调参数时，被蚊子叮了好几个包都没察觉。

最崩溃的是上线前的流程。审核第一次被打回来，说 “涉及用户图像信息，缺少**隐私保护声明**”，我这纯工具类小程序，哪想到还要这个？打电话给微信客服，听着机器人语音转了八次人工，才搞懂要加弹窗式隐私协议，明确告知用户 “照片仅用于当前编辑，不存储服务器、编辑后自动删除”。

改完隐私声明提交，又卡在了**备案上** —— 小程序要上线，必须先完成 ICP 备案。之前完全没接触过备案流程，只能跟着云服务商的指引填资料，各种证件扫描件反复改格式（要求小于 200KB 且背景纯白），负责人信息核验时因为身份证照片反光被打回两次，还得等管局审核，期间打了三次客服电话催进度，前前后后花了五天，比改 bug 还耗精力。等备案通过那天，整个人瘫在椅子上，外卖到了都没力气拆，闻着香味就睡着了。

幸福的眼泪(假的)
---------

今早收到小程序审核通过的短信时，我正在给绿萝浇水。手一抖，水洒了一地，赶紧擦干净去看手机。点开自己做的小程序，上传了张旧照片，点 “换蓝底”“调一寸”，几秒就生成了标准证件照，虽然按钮排版还有点歪，但核心功能全正常。刚才朋友发消息来，说用我的小程序做了社保照片，打印出来完全合格，省了去照相馆的钱，我跟他讲 “以后要证件照就用这个”，挂了电话眼泪就下来了。

写在最后
----

原来自己做的工具能真正帮到别人，是这么踏实的感觉。现在回头看，那些熬到凌晨的夜晚、反复调试的代码、流程里的磕磕绊绊，都成了最实在的收获。

最后，给大家分享一下我做的小程序吧，直接扫码或者搜索“**豆豆证照工坊**”，如果你觉得能帮到你，不妨分享给你的朋友们，如果觉得有做得不好的地方，欢迎留言区提建议（轻喷）。