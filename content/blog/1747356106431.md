---
layout: post
title: 'pythonå¼€å‘Streamable HTTP MCPåº”ç”¨'
date: "2025-05-16T00:41:46Z"
---
pythonå¼€å‘Streamable HTTP MCPåº”ç”¨
=============================

ä¸€ã€æ¦‚è¿°
====

ä½¿ç”¨pythonå¼€å‘ï¼Œæœ€å¥½çš„æ¡†æ¶æ˜¯fastmcpï¼Œgithubè¿æ¥ï¼š[https://github.com/jlowin/fastmcp](https://github.com/jlowin/fastmcp)

2025 å¹´ 5 æœˆ 9 æ—¥ï¼Œfastmcpå‘å¸ƒv2.3.0ç‰ˆæœ¬ï¼Œæ­£å¼æ”¯æŒStreamable HTTP

ç»ˆäºç­‰åˆ°å®˜æ–¹æ”¯æŒäº†ï¼

æ³¨æ„ï¼š2.3.0ç‰ˆæœ¬æœ‰bugï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬å·²ç»ä¿®å¤äº†

å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬

pip install --upgrade fastmcp

å…³äºStreamable HTTPçš„ä»‹ç»ï¼Œè¯·å‚è€ƒé“¾æ¥ï¼š[https://www.cnblogs.com/xiao987334176/p/18845151](https://www.cnblogs.com/xiao987334176/p/18845151)

è¿™é‡Œå°±ä¸å†é‡å¤äº†

äºŒã€Streamable HTTP MCPåº”ç”¨
=======================

å®˜æ–¹demo
------

server.py

from fastmcp import FastMCP

mcp \= FastMCP("Demo ğŸš€")

@mcp.tool()
def add(a: int, b: int) -> int:
    """Add two numbers"""
    return a + b

if \_\_name\_\_ == "\_\_main\_\_":
    mcp.run(transport\="streamable-http", host="0.0.0.0", port=8000, path="/mcp")

é€šè¿‡ä»¥ä¸Š8è¡Œä»£ç ï¼Œå°±ç®€å•å®ç°äº†Streamable HTTP MCPåº”ç”¨ã€‚

è·å–æœåŠ¡å™¨å…¬ç½‘ip
---------

é€šè¿‡ä¸€ä¸ªåœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½¿ç”¨çš„åŠŸèƒ½ï¼Œæ¥æ¼”ç¤ºä¸€ä¸ªStreamable HTTP MCPåº”ç”¨

server.py

import json
import requests
from fastmcp import FastMCP
mcp \= FastMCP("Demo ğŸš€")


@mcp.tool()
def get\_public\_ip\_address() -> str:
    """
    è·å–æœåŠ¡å™¨å…¬ç½‘ IP åœ°å€
    è¿”å›: 
        str: å½“å‰ç½‘ç»œçš„å…¬ç½‘ IP åœ°å€
    """
    try:
        response \= requests.get("http://ip-api.com/json")
        response.raise\_for\_status()  # æ£€æŸ¥ HTTP è¯·æ±‚æ˜¯å¦æˆåŠŸ
        content = json.loads(response.text)
        return content.get("query", "Unknown IP")  # æä¾›é»˜è®¤å€¼ä»¥é˜²å­—æ®µç¼ºå¤±
    except requests.RequestException as e:
        print(f"è¯·æ±‚é”™è¯¯: {e}")
        return "Request Failed"
    except json.JSONDecodeError as e:
        print(f"JSON è§£ç é”™è¯¯: {e}")
        return "Invalid Response"

if \_\_name\_\_ == "\_\_main\_\_":
    # mcp.run()
    mcp.run(transport="streamable-http",
            host\="0.0.0.0", port=9000, path="/mcp")

è¿è¡Œä»£ç 

python server.py

è¾“å‡ºï¼š

\[05/12/25 10:03:55\] INFO     Starting server "public\_ip\_address"...                                                                                                                                                                                                                         server.py:202
INFO:     Started server process \[43312\]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:9000 (Press CTRL+C to quit)

### Cherry Studioæµ‹è¯•

è¯·ç¡®ä¿Cherry Studioç‰ˆæœ¬æ˜¯æœ€æ–°çš„ï¼Œå› ä¸ºæ–°ç‰ˆæœ¬ï¼Œå¢åŠ äº†Streamable HTTPæ”¯æŒ

æ·»åŠ mcpæœåŠ¡å™¨

åç§°ï¼špublic\_ip\_address\_mcp

ç±»å‹ï¼šStreamable HTTP

urlï¼šhttp://localhost:9000/mcp

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250512100757034-1717375166.png)

Â æ·»åŠ æˆåŠŸåï¼Œç‚¹å‡»å·¥å…·ï¼Œå¯ä»¥çœ‹åˆ°å·¥å…·æ–¹æ³•

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250512100957278-653628197.png)

Â åˆ›å»º

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250512101856001-2027451460.png)

æ·»åŠ 

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250512101915349-971324970.png)

é€‰æ‹©åŠ©æ‰‹

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250512101940151-726646954.png)

é€‰æ‹©

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250512102020632-1045283391.png)

æé—®å…¬ç½‘ipï¼Œæ•ˆæœå¦‚ä¸‹ï¼š

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250515140540666-1486994608.png)

éªŒè¯ä¸€ä¸‹å…¬ç½‘ipæ˜¯å¦æ­£ç¡®ï¼Œæ‰“å¼€ç½‘é¡µ

[http://ip-api.com/json](http://ip-api.com/json)

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250515140634654-893734690.png)

ç»“æœæ˜¯æ­£ç¡®çš„ï¼Œæ²¡é—®é¢˜ã€‚

ä¸‰ã€SSEè½¬æ¢ä¸ºStreamable HTTP
=======================

ä»£ç æ”¹é€ 
----

åœ¨å‰é¢çš„æ–‡ç« ä¸­ï¼Œå†™çš„mysqlåº”ç”¨æ˜¯SSEæ¨¡å¼ï¼Œé“¾æ¥ï¼š[https://www.cnblogs.com/xiao987334176/p/18827297](https://www.cnblogs.com/xiao987334176/p/18827297)

æŠŠä»£ç æ‹·è´è¿‡æ¥ï¼Œåªéœ€è¦ä¿®æ”¹2è¡Œä»£ç ï¼Œå°±å¯ä»¥æ— ç¼è½¬æ¢ä¸ºStreamable HTTPÂ 

å°†ä»¥ä¸‹2è¡Œ

mcp = FastMCP("operateMysql", host="0.0.0.0", port=9000)
mcp.run(transport\="sse")

ä¿®æ”¹ä¸ºï¼š

mcp = FastMCP("operateMysql")
mcp.run(transport\="streamable-http",
            host\="0.0.0.0", port=9000, path="/mcp")

mysql\_mcp\_server\_proåº”ç”¨ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

server.py

from fastmcp import FastMCP
from mysql.connector import connect, Error
import os

mcp \= FastMCP("operateMysql")

def get\_db\_config():
    """ä»ç¯å¢ƒå˜é‡è·å–æ•°æ®åº“é…ç½®ä¿¡æ¯

    è¿”å›:
        dict: åŒ…å«æ•°æ®åº“è¿æ¥æ‰€éœ€çš„é…ç½®ä¿¡æ¯
        - host: æ•°æ®åº“ä¸»æœºåœ°å€
        - port: æ•°æ®åº“ç«¯å£
        - user: æ•°æ®åº“ç”¨æˆ·å
        - password: æ•°æ®åº“å¯†ç 
        - database: æ•°æ®åº“åç§°

    å¼‚å¸¸:
        ValueError: å½“å¿…éœ€çš„é…ç½®ä¿¡æ¯ç¼ºå¤±æ—¶æŠ›å‡º
    """

    config \= {
        "host": os.getenv("MYSQL\_HOST", "localhost"),
        "port": int(os.getenv("MYSQL\_PORT", "3306")),
        "user": os.getenv("MYSQL\_USER"),
        "password": os.getenv("MYSQL\_PASSWORD"),
        "database": os.getenv("MYSQL\_DATABASE"),
    }
    print(config)
    if not all(
        \[
            config\["host"\],
            config\["port"\],
            config\["user"\],
            config\["password"\],
            config\["database"\],
        \]
    ):
        raise ValueError("ç¼ºå°‘å¿…éœ€çš„æ•°æ®åº“é…ç½®")

    return config


@mcp.tool()
def execute\_sql(query: str) -> list:
    """æ‰§è¡ŒSQLæŸ¥è¯¢è¯­å¥

    å‚æ•°:
        query (str): è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼Œæ”¯æŒå¤šæ¡è¯­å¥ä»¥åˆ†å·åˆ†éš”

    è¿”å›:
        list: åŒ…å«æŸ¥è¯¢ç»“æœçš„TextContentåˆ—è¡¨
        - å¯¹äºSELECTæŸ¥è¯¢ï¼šè¿”å›CSVæ ¼å¼çš„ç»“æœï¼ŒåŒ…å«åˆ—åå’Œæ•°æ®
        - å¯¹äºSHOW TABLESï¼šè¿”å›æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å
        - å¯¹äºå…¶ä»–æŸ¥è¯¢ï¼šè¿”å›æ‰§è¡ŒçŠ¶æ€å’Œå½±å“è¡Œæ•°
        - å¤šæ¡è¯­å¥çš„ç»“æœä»¥"---"åˆ†éš”

    å¼‚å¸¸:
        Error: å½“æ•°æ®åº“è¿æ¥æˆ–æŸ¥è¯¢æ‰§è¡Œå¤±è´¥æ—¶æŠ›å‡º
    """
    config \= get\_db\_config()
    try:
        with connect(\*\*config) as conn:
            with conn.cursor() as cursor:
                statements \= \[stmt.strip() for stmt in query.split(";") if stmt.strip()\]
                results \= \[\]

                for statement in statements:
                    try:
                        cursor.execute(statement)

                        # æ£€æŸ¥è¯­å¥æ˜¯å¦è¿”å›äº†ç»“æœé›† (SELECT, SHOW, EXPLAIN, etc.)
                        if cursor.description:
                            columns \= \[desc\[0\] for desc in cursor.description\]
                            rows \= cursor.fetchall()

                            # å°†æ¯ä¸€è¡Œçš„æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç‰¹æ®Šå¤„ç†Noneå€¼
                            formatted\_rows = \[\]
                            for row in rows:
                                formatted\_row \= \[
                                    "NULL" if value is None else str(value)
                                    for value in row
                                \]
                                formatted\_rows.append(",".join(formatted\_row))

                            # å°†åˆ—åå’Œæ•°æ®åˆå¹¶ä¸ºCSVæ ¼å¼
                            results.append(
                                "\\n".join(\[",".join(columns)\] + formatted\_rows)
                            )

                        # å¦‚æœè¯­å¥æ²¡æœ‰è¿”å›ç»“æœé›† (INSERT, UPDATE, DELETE, etc.)
                        else:
                            conn.commit()  # åªæœ‰åœ¨éæŸ¥è¯¢è¯­å¥æ—¶æ‰æäº¤
                            results.append(f"æŸ¥è¯¢æ‰§è¡ŒæˆåŠŸã€‚å½±å“è¡Œæ•°: {cursor.rowcount}")

                    except Error as stmt\_error:
                        # å•æ¡è¯­å¥æ‰§è¡Œå‡ºé”™æ—¶ï¼Œè®°å½•é”™è¯¯å¹¶ç»§ç»­æ‰§è¡Œ
                        results.append(
                            f"æ‰§è¡Œè¯­å¥ '{statement}' å‡ºé”™: {str(stmt\_error)}"
                        )
                        # å¯ä»¥åœ¨è¿™é‡Œé€‰æ‹©æ˜¯å¦ç»§ç»­æ‰§è¡Œåç»­è¯­å¥ï¼Œç›®å‰æ˜¯ç»§ç»­

                return \["\\n---\\n".join(results)\]

    except Error as e:
        print(f"æ‰§è¡ŒSQL '{query}' æ—¶å‡ºé”™: {e}")
        return \[f"æ‰§è¡ŒæŸ¥è¯¢æ—¶å‡ºé”™: {str(e)}"\]


@mcp.tool()
def get\_table\_name(text: str) -> list:
    """æ ¹æ®è¡¨çš„ä¸­æ–‡æ³¨é‡Šæœç´¢æ•°æ®åº“ä¸­çš„è¡¨å

    å‚æ•°:
        text (str): è¦æœç´¢çš„è¡¨ä¸­æ–‡æ³¨é‡Šå…³é”®è¯

    è¿”å›:
        list: åŒ…å«æŸ¥è¯¢ç»“æœçš„TextContentåˆ—è¡¨
        - è¿”å›åŒ¹é…çš„è¡¨åã€æ•°æ®åº“åå’Œè¡¨æ³¨é‡Šä¿¡æ¯
        - ç»“æœä»¥CSVæ ¼å¼è¿”å›ï¼ŒåŒ…å«åˆ—åå’Œæ•°æ®
    """
    config \= get\_db\_config()
    sql \= "SELECT TABLE\_SCHEMA, TABLE\_NAME, TABLE\_COMMENT "
    sql += f"FROM information\_schema.TABLES WHERE TABLE\_SCHEMA = '{config\['database'\]}' AND TABLE\_COMMENT LIKE '%{text}%';"
    return execute\_sql(sql)


@mcp.tool()
def get\_table\_desc(text: str) -> list:
    """è·å–æŒ‡å®šè¡¨çš„å­—æ®µç»“æ„ä¿¡æ¯

    å‚æ•°:
        text (str): è¦æŸ¥è¯¢çš„è¡¨åï¼Œå¤šä¸ªè¡¨åä»¥é€—å·åˆ†éš”

    è¿”å›:
        list: åŒ…å«æŸ¥è¯¢ç»“æœçš„åˆ—è¡¨
        - è¿”å›è¡¨çš„å­—æ®µåã€å­—æ®µæ³¨é‡Šç­‰ä¿¡æ¯
        - ç»“æœæŒ‰è¡¨åå’Œå­—æ®µé¡ºåºæ’åº
        - ç»“æœä»¥CSVæ ¼å¼è¿”å›ï¼ŒåŒ…å«åˆ—åå’Œæ•°æ®
    """
    config \= get\_db\_config()
    # å°†è¾“å…¥çš„è¡¨åæŒ‰é€—å·åˆ†å‰²æˆåˆ—è¡¨
    table\_names = \[name.strip() for name in text.split(",")\]
    # æ„å»ºINæ¡ä»¶
    table\_condition = "','".join(table\_names)
    sql \= "SELECT TABLE\_NAME, COLUMN\_NAME, COLUMN\_COMMENT "
    sql += (
        f"FROM information\_schema.COLUMNS WHERE TABLE\_SCHEMA = '{config\['database'\]}' "
    )
    sql += f"AND TABLE\_NAME IN ('{table\_condition}') ORDER BY TABLE\_NAME, ORDINAL\_POSITION;"
    return execute\_sql(sql)


@mcp.tool()
def get\_lock\_tables() -> list:
    """
    è·å–å½“å‰mysqlæœåŠ¡å™¨InnoDB çš„è¡Œçº§é”

    è¿”å›:
        list: åŒ…å«æŸ¥è¯¢ç»“æœçš„TextContentåˆ—è¡¨
    """
    sql \= """SELECT
    p2.\`HOST\` AS è¢«é˜»å¡æ–¹host,
    p2.\`USER\` AS è¢«é˜»å¡æ–¹ç”¨æˆ·,
    r.trx\_id AS è¢«é˜»å¡æ–¹äº‹åŠ¡id,
    r.trx\_mysql\_thread\_id AS è¢«é˜»å¡æ–¹çº¿ç¨‹å·,
    TIMESTAMPDIFF(SECOND, r.trx\_wait\_started, CURRENT\_TIMESTAMP) AS ç­‰å¾…æ—¶é—´,
    r.trx\_query AS è¢«é˜»å¡çš„æŸ¥è¯¢,
    l.OBJECT\_NAME AS é˜»å¡æ–¹é”ä½çš„è¡¨,
    m.LOCK\_MODE AS è¢«é˜»å¡æ–¹çš„é”æ¨¡å¼,
    m.LOCK\_TYPE AS 'è¢«é˜»å¡æ–¹çš„é”ç±»å‹(è¡¨é”è¿˜æ˜¯è¡Œé”)',
    m.INDEX\_NAME AS è¢«é˜»å¡æ–¹é”ä½çš„ç´¢å¼•,
    m.OBJECT\_SCHEMA AS è¢«é˜»å¡æ–¹é”å¯¹è±¡çš„æ•°æ®åº“å,
    m.OBJECT\_NAME AS è¢«é˜»å¡æ–¹é”å¯¹è±¡çš„è¡¨å,
    m.LOCK\_DATA AS è¢«é˜»å¡æ–¹äº‹åŠ¡é”å®šè®°å½•çš„ä¸»é”®å€¼,
    p.\`HOST\` AS é˜»å¡æ–¹ä¸»æœº,
    p.\`USER\` AS é˜»å¡æ–¹ç”¨æˆ·,
    b.trx\_id AS é˜»å¡æ–¹äº‹åŠ¡id,
    b.trx\_mysql\_thread\_id AS é˜»å¡æ–¹çº¿ç¨‹å·,
    b.trx\_query AS é˜»å¡æ–¹æŸ¥è¯¢,
    l.LOCK\_MODE AS é˜»å¡æ–¹çš„é”æ¨¡å¼,
    l.LOCK\_TYPE AS 'é˜»å¡æ–¹çš„é”ç±»å‹(è¡¨é”è¿˜æ˜¯è¡Œé”)',
    l.INDEX\_NAME AS é˜»å¡æ–¹é”ä½çš„ç´¢å¼•,
    l.OBJECT\_SCHEMA AS é˜»å¡æ–¹é”å¯¹è±¡çš„æ•°æ®åº“å,
    l.OBJECT\_NAME AS é˜»å¡æ–¹é”å¯¹è±¡çš„è¡¨å,
    l.LOCK\_DATA AS é˜»å¡æ–¹äº‹åŠ¡é”å®šè®°å½•çš„ä¸»é”®å€¼,
    IF(p.COMMAND = 'Sleep', CONCAT(p.TIME, ' ç§’'), 0) AS é˜»å¡æ–¹äº‹åŠ¡ç©ºé—²çš„æ—¶é—´
    FROM performance\_schema.data\_lock\_waits w
    INNER JOIN performance\_schema.data\_locks l ON w.BLOCKING\_ENGINE\_LOCK\_ID = l.ENGINE\_LOCK\_ID
    INNER JOIN performance\_schema.data\_locks m ON w.REQUESTING\_ENGINE\_LOCK\_ID = m.ENGINE\_LOCK\_ID
    INNER JOIN information\_schema.INNODB\_TRX b ON b.trx\_id = w.BLOCKING\_ENGINE\_TRANSACTION\_ID
    INNER JOIN information\_schema.INNODB\_TRX r ON r.trx\_id = w.REQUESTING\_ENGINE\_TRANSACTION\_ID
    INNER JOIN information\_schema.PROCESSLIST p ON p.ID = b.trx\_mysql\_thread\_id
    INNER JOIN information\_schema.PROCESSLIST p2 ON p2.ID = r.trx\_mysql\_thread\_id
    ORDER BY ç­‰å¾…æ—¶é—´ DESC;"""

    return execute\_sql(sql)

if \_\_name\_\_ == "\_\_main\_\_":
    mcp.run(transport\="streamable-http",
            host\="0.0.0.0", port=9000, path="/mcp")

ç¼–è¯‘é•œåƒ
----

ä¿®æ”¹Dockerfileï¼Œå‡çº§fastmcp

FROM python:3.13.3\-alpine3.21
ADD . /app
RUN pip3 install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple && \\
    pip3 install mysql-connector-python fastmcp -i https://pypi.tuna.tsinghua.edu.cn/simple && \\
    pip3 install --upgrade fastmcp
WORKDIR /app

EXPOSE 9000

ENTRYPOINT \["python3","/app/server.py"\]

ç¼–è¯‘é•œåƒ

docker build -t mysql\_mcp\_server\_pro:v1 .

ä½¿ç”¨docker-composeå¯åŠ¨
------------------

docker-compose.yaml

services:
  mysql\_mcp\_server\_pro:
    image: mysql\_mcp\_server\_pro:v1
    container\_name: mysql\_mcp\_server\_pro
    ports:
      \- "9090:9000"
    environment:
      MYSQL\_HOST: "192.168.20.128"
      MYSQL\_PORT: "3306"
      MYSQL\_USER: "root"
      MYSQL\_PASSWORD: "abcd@1234"
      MYSQL\_DATABASE: "test"
      TZ: Asia/Shanghai
    restart: always

æ³¨æ„ä¿®æ”¹mysqlç›¸å…³ç¯å¢ƒå˜é‡

è¿è¡Œ

docker-compose up -d

Cherry Studioæµ‹è¯•
---------------

æ·»åŠ MCPæœåŠ¡å™¨

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250515152553604-1250665337.png)

æ·»åŠ æ™ºèƒ½ä½“mysql8

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250515152648627-700026281.png)

Â æç¤ºè¯å’Œä»¥å‰ä¸€æ ·

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

ä½¿ç”¨ä¸­æ–‡å›å¤ã€‚

å½“ç”¨æˆ·æé—®ä¸­æ¶‰åŠå­¦ç”Ÿã€æ•™å¸ˆã€æˆç»©ã€ç­çº§ã€è¯¾ç¨‹ç­‰å®ä½“æ—¶ï¼Œéœ€è¦ä½¿ç”¨ MySQL MCP è¿›è¡Œæ•°æ®æŸ¥è¯¢å’Œæ“ä½œï¼Œè¡¨ç»“æ„è¯´æ˜å¦‚ä¸‹ï¼š

# å­¦ç”Ÿç®¡ç†ç³»ç»Ÿæ•°æ®åº“è¡¨ç»“æ„è¯´æ˜

## 1. æ•™å¸ˆè¡¨ (teachers)

| å­—æ®µå | ç±»å‹ | æè¿° | çº¦æŸ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| id | varchar | æ•™å¸ˆID | ä¸»é”® |Â "T001"Â |
| name | varchar | æ•™å¸ˆå§“å | å¿…å¡« |Â "å¼ å»ºå›½"Â |
| gender | enum | æ€§åˆ« |Â "ç”·"æˆ–"å¥³"Â |Â "ç”·"Â |
| subject | varchar | æ•™æˆç§‘ç›® | å¿…å¡« |Â "æ•°å­¦"Â |
| title | varchar | èŒç§° | å¿…å¡« |Â "æ•™æˆ"Â |
| phone | varchar | è”ç³»ç”µè¯ | å¿…å¡« |Â "13812345678"Â |
| office | varchar | åŠå…¬å®¤ä½ç½® | å¿…å¡« |Â "åšå­¦æ¥¼301"Â |
| wechat | varchar | å¾®ä¿¡(å¯é€‰) | å¯é€‰ |Â "lily\_teacher"Â |
| isHeadTeacher | enum | æ˜¯å¦ä¸ºç­ä¸»ä»»ï¼Œ"true"æˆ–"false" | å¯é€‰ |Â trueÂ |

## 2. ç­çº§è¡¨ (classes)

| å­—æ®µå | ç±»å‹ | æè¿° | çº¦æŸ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| id | varchar | ç­çº§ID | ä¸»é”® |Â "202301"Â |
| className | varchar | ç­çº§åç§° | å¿…å¡« |Â "2023çº§è®¡ç®—æœº1ç­"Â |
| grade | int | å¹´çº§ | å¿…å¡« | 2023 |
| headTeacherId | varchar | ç­ä¸»ä»»ID | å¤–é”®(teachers.id) |Â "T003"Â |
| classroom | varchar | æ•™å®¤ä½ç½® | å¿…å¡« |Â "1å·æ¥¼302"Â |
| studentCount | int | å­¦ç”Ÿäººæ•° | å¿…å¡« | 35 |
| remark | varchar | å¤‡æ³¨ä¿¡æ¯ | å¯é€‰ |Â "å¸‚çº§ä¼˜ç§€ç­é›†ä½“"Â |

## 3. è¯¾ç¨‹è¡¨ (courses)

| å­—æ®µå | ç±»å‹ | æè¿° | çº¦æŸ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| id | varchar | è¯¾ç¨‹ID | ä¸»é”® |Â "C001"Â |
| courseName | varchar | è¯¾ç¨‹åç§° | å¿…å¡« |Â "é«˜ç­‰æ•°å­¦"Â |
| credit | int | å­¦åˆ† | å¿…å¡« | 4 |
| teacherId | varchar | æˆè¯¾æ•™å¸ˆID | å¤–é”®(teachers.id) |Â "T001"Â |
| semester | varchar | å­¦æœŸ | æ ¼å¼"YYYY-N"Â |Â "2023-1"Â |
|Â typeÂ | enum | è¯¾ç¨‹ç±»å‹ |Â "å¿…ä¿®"æˆ–"é€‰ä¿®"Â |Â "å¿…ä¿®"Â |
| prerequisite | varchar | å…ˆä¿®è¯¾ç¨‹ID | å¯é€‰,å¤–é”®(courses.id) |Â "C003"Â |

## 4. å­¦ç”Ÿè¡¨ (students)

| å­—æ®µå | ç±»å‹ | æè¿° | çº¦æŸ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| id | varchar | å­¦å· | ä¸»é”® |Â "S20230101"Â |
| name | varchar | å­¦ç”Ÿå§“å | å¿…å¡« |Â "ç‹å¼º"Â |
| gender | enum | æ€§åˆ« |Â "ç”·"æˆ–"å¥³"Â |Â "ç”·"Â |
| birthDate | date | å‡ºç”Ÿæ—¥æœŸ | å¿…å¡« | date("2005-01-15") |
| enrollmentDate | date | å…¥å­¦æ—¥æœŸ | å¿…å¡« | date("2023-8-1") |
| classId | varchar | ç­çº§ID | å¤–é”®(classes.id) |Â "202301"Â |
| phone | varchar | è”ç³»ç”µè¯ | å¿…å¡« |Â "13812345678"Â |
| email | varchar | ç”µå­é‚®ç®± | å¿…å¡« |Â "20230101@school.edu.cn"Â |
| emergencyContact | varchar | ç´§æ€¥è”ç³»äººç”µè¯ | å¿…å¡« |Â "13876543210"Â |
| address | varchar | å®¶åº­ä½å€ | å¿…å¡« |Â "åŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—1æ ‹101å®¤"Â |
| height | int | èº«é«˜(cm) | å¿…å¡« | 175 |
| weight | int | ä½“é‡(kg) | å¿…å¡« | 65 |
| healthStatus | enum | å¥åº·çŠ¶å†µ | å¿…å¡«ï¼Œ"è‰¯å¥½"æˆ–"ä¸€èˆ¬â€Œ"æˆ–"è¾ƒå·®" |Â "è‰¯å¥½"Â |

## 5. æˆç»©è¡¨ (scores)

| å­—æ®µå | ç±»å‹ | æè¿° | çº¦æŸ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| id | varchar | æˆç»©è®°å½•ID | ä¸»é”® |Â "S20230101C001"Â |
| studentId | varchar | å­¦ç”ŸID | å¤–é”®(students.id) |Â "S20230101"Â |
| courseId | varchar | è¯¾ç¨‹ID | å¤–é”®(courses.id) |Â "C001"Â |
| score | int | ç»¼åˆæˆç»© | 0\-100 | 85 |
| examDate | date | è€ƒè¯•æ—¥æœŸ | å¿…å¡« | date("2024-5-20") |
| usualScore | int | å¹³æ—¶æˆç»© | 0\-100 | 90 |
| finalScore | int | æœŸæœ«æˆç»© | 0\-100 | 80 |

### è¡¥è€ƒæˆç»©è®°å½•è¯´æ˜
è¡¥è€ƒè®°å½•åœ¨\_idåæ·»åŠ "\_M"åç¼€ï¼Œå¦‚"S20230101C001\_M"

## è¡¨å…³ç³»è¯´æ˜

1. \*\*ä¸€å¯¹å¤šå…³ç³»\*\*:
Â  Â \- ä¸€ä¸ªç­çº§(classes)å¯¹åº”å¤šä¸ªå­¦ç”Ÿ(students)
Â  Â \- ä¸€ä¸ªæ•™å¸ˆ(teachers)å¯ä»¥æ•™æˆå¤šé—¨è¯¾ç¨‹(courses)
Â  Â \- ä¸€ä¸ªå­¦ç”Ÿ(students)æœ‰å¤šæ¡æˆç»©è®°å½•(scores)

2. \*\*å¤–é”®çº¦æŸ\*\*:
Â  Â \- students.classId â†’ classes.id
Â  Â \- courses.teacherId â†’ teachers.id
Â  Â \- scores.studentId â†’ students.id
Â  Â \- scores.courseId â†’ courses.id
Â  Â \- classes.headTeacherId â†’ teachers.id

View Code

mysqlè¡¨ç»“æ„ï¼Œå‚è€ƒæ–‡ç« ï¼š[https://www.cnblogs.com/xiao987334176/p/18826422](https://www.cnblogs.com/xiao987334176/p/18826422)

å°†æ™ºèƒ½ä½“ï¼Œæ·»åŠ åŠ©æ‰‹

æ‰“å¼€åŠ©æ‰‹ï¼Œé€‰æ‹©MCP

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250515152851437-387806280.png)

Â æä¸€ä¸ªé—®é¢˜ï¼Œæåçš„è€å¸ˆæ˜¯è°

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://img2024.cnblogs.com/blog/1341090/202505/1341090-20250515152926990-61689416.png)