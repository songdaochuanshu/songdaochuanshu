---
layout: post
title: 'ä¸‰åˆ†é’ŸæŒæ¡éŸ³è§†é¢‘å¤„ç† | åœ¨ Rust ä¸­ä¼˜é›…åœ°é›†æˆ FFmpeg'
date: "2025-03-12T00:37:32Z"
---
ä¸‰åˆ†é’ŸæŒæ¡éŸ³è§†é¢‘å¤„ç† | åœ¨ Rust ä¸­ä¼˜é›…åœ°é›†æˆ FFmpeg
=================================

**å‰è¨€**
------

éŸ³è§†é¢‘å¤„ç†çœ‹ä¼¼é«˜æ·±è«æµ‹ï¼Œä½†åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æˆ–å¤šæˆ–å°‘éƒ½ä¼šé‡åˆ°ç›¸å…³éœ€æ±‚ï¼Œæ¯”å¦‚è§†é¢‘æ ¼å¼è½¬æ¢ã€å‰ªè¾‘ã€æ·»åŠ æ°´å°ã€éŸ³é¢‘æå–ç­‰ã€‚

FFmpeg ä½œä¸ºè¡Œä¸šæ ‡å‡†ï¼Œå‡ ä¹æ— æ‰€ä¸èƒ½ï¼Œå¾ˆå¤šæµè¡Œçš„è½¯ä»¶ï¼ˆå¦‚ VLCã€YouTubeã€OBSï¼‰éƒ½ä¾èµ–å®ƒã€‚ç„¶è€Œï¼ŒFFmpeg ä¹Ÿæœ‰è®©å¼€å‘è€…å¤´ç–¼çš„åœ°æ–¹ï¼š

1.  å…¥é—¨é—¨æ§›é«˜ï¼Œéœ€è¦ç†è§£**å¤ç”¨/è§£å¤ç”¨ã€ç¼–è§£ç ã€åƒç´ æ ¼å¼ã€é‡‡æ ·ç‡**ç­‰æ¦‚å¿µã€‚
2.  **C è¯­è¨€å®ç°**ï¼Œç›´æ¥è°ƒç”¨æ—¶å®¹æ˜“è¸©å†…å­˜ç®¡ç†çš„å‘ï¼Œç¨æœ‰ä¸æ…å°±å¯èƒ½å¼•å‘**å†…å­˜æ³„æ¼ã€éæ³•è®¿é—®ã€ç¨‹åºå´©æºƒ**ç­‰é—®é¢˜ã€‚
3.  ä»£ç åº•å±‚ä¸”ç»´æŠ¤éš¾ï¼Œç¨ä¸ç•™ç¥å°±é™·å…¥è°ƒè¯•å™©æ¢¦ã€‚

Rust ä»¥ **å†…å­˜å®‰å…¨ã€æ€§èƒ½å¼ºå¤§** è‘—ç§°ï¼Œé‚£ä¹ˆåœ¨ Rust é‡Œï¼Œæœ‰æ²¡æœ‰ä¸€ç§ç®€å•ã€å®‰å…¨ã€ä¸”ç¬¦åˆæˆ‘ä»¬ä¹ æƒ¯çš„æ–¹å¼æ¥ä½¿ç”¨ FFmpeg å‘¢ï¼Ÿ

**ez-ffmpegï¼šè®© Rust ç¨‹åºå‘˜ä¼˜é›…ä½¿ç”¨ FFmpeg**
-----------------------------------

[`ez-ffmpeg`](https://github.com/YeautyYE/ez-ffmpeg) è®©ä½ å¯ä»¥åƒå†™æ™®é€š Rust ä»£ç ä¸€æ ·ï¼Œé€šè¿‡**é“¾å¼è°ƒç”¨**åˆ›å»ºå’Œæ‰§è¡Œ FFmpeg ä»»åŠ¡ã€‚

å®ƒä½¿ç”¨ FFI è°ƒç”¨ FFmpeg çš„åº•å±‚ C ä»£ç ï¼Œå¹¶**è‡ªåŠ¨ç®¡ç†å†…å­˜**ï¼Œè®©ä½ æ— éœ€æ‹…å¿ƒ C è¯­è¨€å¸¸è§çš„å†…å­˜å®‰å…¨é—®é¢˜ã€‚

**å¿«é€Ÿä¸Šæ‰‹ï¼šç”¨ Rust è¿›è¡Œæ ¼å¼è½¬æ¢**
----------------------

å‡è®¾æˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªè§†é¢‘ï¼ˆæˆ–éŸ³é¢‘ã€å›¾ç‰‡ï¼‰è½¬æ¢æ ¼å¼ï¼Œä½¿ç”¨ `ez-ffmpeg` åªéœ€å‡ è¡Œä»£ç ï¼š

### **1\. å®‰è£… FFmpeg**

å¦‚æœä½ çš„ç¯å¢ƒå°šæœªå®‰è£… FFmpegï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼å®‰è£…ï¼š

#### macOSï¼š

    brew install ffmpeg
    

#### Windowsï¼š

    vcpkg install ffmpeg
    # å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å®‰è£… vcpkgï¼Œè¿˜éœ€è®¾ç½®ç¯å¢ƒå˜é‡ VCPKG_ROOT
    

### **2\. æ·»åŠ  Rust ä¾èµ–**

åœ¨ `Cargo.toml` ä¸­å¼•å…¥ `ez-ffmpeg`ï¼š

    [dependencies]
    ez-ffmpeg = "*"
    

### **3\. è¿è¡Œä»£ç **

    use ez_ffmpeg::FfmpegContext;
    
    fn main() -> Result<(), Box<dyn std::error::Error>> {
        // 1. æ„å»º FFmpeg ä¸Šä¸‹æ–‡
        let context = FfmpegContext::builder()
            .input("input.mp4")   // è¾“å…¥æ–‡ä»¶
            .output("output.mov") // è¾“å‡ºæ–‡ä»¶
            .build()?;
    
        // 2. å¯åŠ¨å¹¶ç­‰å¾…ä»»åŠ¡å®Œæˆ
        context.start()?.wait()?;
        Ok(())
    }
    

å°±è¿™ä¹ˆç®€å•ï¼ä½ åªéœ€**å…³æ³¨è¾“å…¥å’Œè¾“å‡º**ï¼Œ`ez-ffmpeg` ä¾¿å¯å®Œæˆæ ¼å¼è½¬æ¢ã€‚

**ä¸ä»…ä»…æ˜¯æ ¼å¼è½¬æ¢**
------------

`ez-ffmpeg` è¿˜èƒ½è½»æ¾å®ç° **è§†é¢‘å‰ªè¾‘ã€éŸ³è§†é¢‘æå–ã€æ·»åŠ æ»¤é•œã€RTMP æ¨æµã€GPU åŠ é€Ÿ** ç­‰åŠŸèƒ½ã€‚

æŸ¥çœ‹å®˜æ–¹ç¤ºä¾‹ï¼š[examples](https://github.com/YeautyYE/ez-ffmpeg/tree/master/examples)

**æ€»ç»“**
------

ç›¸æ¯” FFmpeg çš„å‘½ä»¤è¡Œæ–¹å¼ï¼Œ`ez-ffmpeg` è®© Rust å¼€å‘è€…å¯ä»¥**æ— ç¼è½¬æ¢** FFmpeg å‘½ä»¤åˆ°ä»£ç ï¼Œè€Œ**æ— éœ€é¢å¤–å­¦ä¹  C è¯­è¨€**ã€‚

æ­¤å¤–ï¼Œå®ƒæ”¯æŒ **è‡ªå®šä¹‰ Filter å’Œè¾“å…¥/è¾“å‡º**ï¼Œç›´æ¥ç”¨ Rust å®ç°ï¼Œæ‘†è„±äº† C è¯­è¨€æ‰©å±•çš„å¤æ‚æ€§ï¼Œä¹Ÿé¿å…äº† FFmpeg ç¼–è¯‘çš„ç—›è‹¦ã€‚

ğŸ”— **å¼€æºé¡¹ç›®åœ°å€**ï¼š[ez-ffmpeg](https://github.com/YeautyYE/ez-ffmpeg)