---
layout: post
title: 'SharpIcoï¼šç”¨çº¯C#æ‰“é€ é›¶ä¾èµ–çš„.icoå›¾æ ‡ç”Ÿæˆå™¨ï¼Œæ”¯æŒ.NET9ä¸AOTç¼–è¯‘'
date: "2025-05-27T00:40:39Z"
---
SharpIcoï¼šç”¨çº¯C#æ‰“é€ é›¶ä¾èµ–çš„.icoå›¾æ ‡ç”Ÿæˆå™¨ï¼Œæ”¯æŒ.NET9ä¸AOTç¼–è¯‘
==========================================

å‰è¨€
--

æœ€è¿‘ä¸€ç›´åœ¨å®Œå–„æˆ‘ä»Šå¹´çš„ä¸¤æ¬¾æ¡Œé¢è½¯ä»¶ï¼š[è§†é¢‘å‰ªè¾‘å·¥å…· Clipify](https://blog.deali.cn/Blog/Post/6a903b1c6fb2487f) å’Œ [AI æ–‡ç« åˆ›ä½œå·¥å…· StarBlogPublisher](https://blog.deali.cn/p/starblog-extrapolation-4-publisher-major-upgrade)

è™½ç„¶ç•Œé¢æ˜¯åŸºæœ¬å®Œå–„äº†ï¼Œä½†å›¾æ ‡è¿˜æ˜¯é»˜è®¤çš„ï¼Œæ˜¾å¾—å¾ˆä¸ä¸“ä¸š

äºæ˜¯æˆ‘æ‰“ç®—ç»™è¿™ä¿©è½¯ä»¶æ¢ä¸ªå¥½çœ‹çš„å›¾æ ‡

æ—©åœ¨ VB6.0 å¹´ä»£ï¼Œæˆ‘ç”¨è¿‡ä¸€æ¬¾å¼€æºçš„ ICO å›¾æ ‡åˆ¶ä½œå·¥å…·ï¼Œä¸è¿‡ç°åœ¨å·²ç»æ‰¾ä¸åˆ°äº†

ç½‘ä¸Šæœåˆ°çš„å¾ˆå¤š ICO åˆ¶ä½œå·¥å…·éƒ½æ˜¯é’ˆå¯¹ favicon çš„

å…¶ä»–çš„è¦ä¸å¤ªé‡ï¼Œè¦ä¸å°±æ˜¯æ”¶è´¹ï¼Œäºæ˜¯æˆ‘æŠŠç›®å…‰é‡æ–°æ”¾åœ¨äº†å¼€æºå·¥å…·ä¸Š

æ‰¾åˆ°äº†ä¸€ä¸ªåŸºäº nodejs å®ç°å¹¶ä¸”é›¶ä¾èµ–çš„ï¼ˆå¤§éƒ¨åˆ†éƒ½æ˜¯ä¾èµ–äº Magick è¿™ä¸ª C++å®ç°çš„å›¾ç‰‡åº“ï¼‰ï¼Œç„¶è€Œå¾ˆé—æ†¾ï¼Œè¿™ä¸ªå·¥å…·åœ¨æˆ‘ç”µè„‘ä¸Šå¹¶ä¸èƒ½ä½¿ç”¨â€¦â€¦

ç›®æ ‡
--

è¿™æ—¶æˆ‘æƒ³èµ·æ¥ä¹‹å‰æ›¾ç»ç”¨ c# å¼€å‘äº†ä¸€ä¸ªå›¾ç‰‡æ ¼å¼è½¬æ¢å·¥å…·ï¼Œä½¿ç”¨äº† .Net8 çš„ AOT åŠŸèƒ½ï¼Œå¯ä»¥åƒ go è¯­è¨€é‚£æ ·å¼€å‘å‡ºè·¨å¹³å°çš„å•å¯æ‰§è¡Œæ–‡ä»¶

æ‰€ä»¥æˆ‘å†³å®šç»§ç»­ä½¿ç”¨ C# å¼€å‘ä¸€ä¸ªå›¾æ ‡ç”Ÿæˆå·¥å…·ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥å®ç°ï¼š

*   çº¯ C# å®ç°ï¼Œæ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œè·¨å¹³å°ï¼Œå•å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒAOT
*   å°† png å›¾ç‰‡åˆ†è§£ä¸ºå¤šå¼ ä¸åŒå°ºå¯¸çš„å°å›¾ç‰‡(è¾¹é•¿ 16, 32, 48, 64, 128, 256, 512)ï¼Œç„¶ååˆæˆä¸€å¼  ICO å›¾æ ‡ï¼Œå®ç°ä¸åŒå°ºå¯¸å±å¹•çš„è‰¯å¥½è§†è§‰ä½“éªŒ
*   æ”¯æŒ Inspect åŠŸèƒ½ï¼Œå¯ä»¥è¯»å–å¹¶åˆ†æ ICO å›¾æ ‡
*   æ–¹ä¾¿çš„åˆ†å‘æ–¹å¼ï¼Œæ”¯æŒ dotnet tool, scoop, brew ç­‰å·¥å…·ä¸€é”®å®‰è£…

ç›®å‰å·²ç»å®Œæˆäº†ï¼Œå¹¶ä¸”ä¹Ÿå‘å¸ƒåˆ°äº† nuget å’Œ scoopï¼Œæ¥ä¸‹æ¥å†ç ”ç©¶ä¸‹å¦‚ä½•å‘å¸ƒåˆ° brew

é¡¹ç›®ä¸»é¡µ: [https://github.com/star-plan/sharp-ico](https://github.com/star-plan/sharp-ico)

å®ç°
--

åœ¨ SharpIco ä¸­ï¼Œ`.ico` æ–‡ä»¶çš„ç”Ÿæˆå®Œå…¨ä¸ä¾èµ– ImageMagick æˆ–ä»»ä½•å›¾åƒå¤„ç†å¤–éƒ¨å·¥å…·ï¼Œè€Œæ˜¯é€šè¿‡çº¯ C# ä»£ç æ‰‹å·¥æ‹¼æ¥ç¬¦åˆè§„èŒƒçš„ ICO äºŒè¿›åˆ¶ç»“æ„ã€‚

è¿™éƒ¨åˆ†çš„æ ¸å¿ƒç±»æ˜¯ `IcoGenerator`ï¼Œå…·ä½“ä»£ç æˆ‘å°±ä¸è´´äº†ï¼Œåœ¨é¡¹ç›®é‡Œæœ‰ï¼ŒæŒ‘å‡ ä¸ªè¦ç‚¹ä»‹ç»å§~

### ç”Ÿæˆå¤šå°ºå¯¸å›¾åƒ

ä½¿ç”¨ ImageSharp ç”Ÿæˆå¤šå°ºå¯¸å›¾åƒ

    var clone = original.Clone(ctx => ctx.Resize(size, size));
    clone.SaveAsPng(ms);
    

*   **ä½¿ç”¨ ImageSharp çš„ Resize ä¸ Clone** åŠŸèƒ½ï¼Œå°†åŸå§‹é«˜åˆ†è¾¨ç‡ PNG ç”Ÿæˆå¤šä¸ªç›®æ ‡å°ºå¯¸ï¼ˆå¦‚ 16x16ã€32x32ã€256x256ï¼‰
    
*   ä»¥ **PNG æ ¼å¼ä¿å­˜åˆ°å†…å­˜æµä¸­**ï¼Œç”¨äºåç»­å†™å…¥ `.ico`
    

> ğŸ’¡ ICO æ–‡ä»¶æ”¯æŒåµŒå…¥ PNG å›¾åƒï¼ˆä» Vista å¼€å§‹ï¼‰ï¼Œè¿™æ ·å¯ä»¥ä¿æŒæ›´å°ä½“ç§¯ä¸æ›´ä½³é€æ˜åº¦æ•ˆæœã€‚

### æ‰‹åŠ¨æ„å»º ICO æ–‡ä»¶å¤´

æŒ‰ç…§ ICO æ–‡ä»¶æ ¼å¼æ‰‹åŠ¨æ„å»º ICONDIR ä¸ ICONDIRENTRY

ICO æ–‡ä»¶çš„å¤´éƒ¨ç”± 3 éƒ¨åˆ†ç»„æˆï¼š

*   `ICONDIR`ï¼ˆ6 å­—èŠ‚ï¼‰ï¼šå›ºå®šç»“æ„
    
*   `ICONDIRENTRY Ã— N`ï¼ˆæ¯ä¸ª 16 å­—èŠ‚ï¼‰ï¼šæè¿°æ¯ä¸€å¼ åµŒå…¥å›¾åƒçš„å°ºå¯¸ã€åç§»
    
*   `Image Data Ã— N`ï¼šå®é™…å›¾åƒäºŒè¿›åˆ¶æ•°æ®
    

    writer.Write((ushort)0); // Reserved
    writer.Write((ushort)1); // Type = icon
    writer.Write((ushort)images.Count); // Image count
    

*   å…ˆå†™å…¥ ICO æ–‡ä»¶å¤´ ICONDIR
    
*   ç„¶åå¾ªç¯å†™å…¥æ¯ä¸€å¼ å›¾ç‰‡çš„æè¿°ä¿¡æ¯ï¼ˆå®½é«˜ã€ä½æ·±ã€æ•°æ®åç§»ç­‰ï¼‰
    

    writer.Write((byte)(img.Width == 256 ? 0 : img.Width)); // 256 ç”¨ 0 è¡¨ç¤º
    writer.Write((ushort)32); // bits per pixel
    writer.Write(image.Length);
    writer.Write(offset);
    

**ICO æ–‡ä»¶ä¸­çš„å®½åº¦/é«˜åº¦å­—æ®µå¦‚æœä¸º 0ï¼Œè¡¨ç¤º 256**ã€‚è¿™æ˜¯ ICO æ ¼å¼çš„ä¸€ä¸ªç‰¹æ®Šè§„å®šã€‚

> ICO æ–‡ä»¶æ ¼å¼åœ¨è¡¨ç¤ºå›¾åƒå°ºå¯¸æ—¶æœ‰ä¸€ä¸ªé™åˆ¶ï¼šå®½åº¦å’Œé«˜åº¦å­—æ®µå„åªæœ‰ä¸€ä¸ªå­—èŠ‚ï¼Œå€¼èŒƒå›´æ˜¯ 0-255ã€‚å½“è¿™äº›å­—æ®µä¸º 0 æ—¶ï¼ŒæŒ‰ç…§è§„èŒƒè¡¨ç¤º 256 åƒç´ ã€‚å¯¹äºå¤§äº 256 çš„å°ºå¯¸ï¼ˆå¦‚ 512Ã—512 æˆ– 1024Ã—1024ï¼‰ï¼Œåœ¨æ–‡ä»¶å¤´ä¸­ä»ç„¶ä¼šæ˜¾ç¤ºä¸º 0ï¼ˆå³ 256ï¼‰ï¼Œä½†å®é™…å›¾åƒæ•°æ®å¯ä»¥åŒ…å«æ›´å¤§å°ºå¯¸çš„å›¾åƒã€‚

### æ‹¼æ¥å›¾åƒ

æ‹¼æ¥æ‰€æœ‰ PNG å›¾åƒæ•°æ®

    foreach (var image in images) {
        writer.Write(image);
    }
    

*   æ‰€æœ‰æè¿°ä¿¡æ¯å†™å®Œåï¼Œç´§è·Ÿç€å†™å…¥å›¾åƒæ•°æ®æœ¬ä½“
    
*   ç”±äºæå‰è®¡ç®—äº†åç§»é‡ï¼Œç¡®ä¿æ¯å¼ å›¾åƒæ•°æ®å¯ä»¥è¢«ç³»ç»Ÿæ­£ç¡®è¯†åˆ«å’Œè¯»å–
    

### æ‰©å±•

æ”¯æŒè‡ªå®šä¹‰å°ºå¯¸

    public static void GenerateIcon(string sourcePng, string outputIco, int[] sizes)
    

*   é»˜è®¤æ”¯æŒ 16~512 çš„å¸¸è§å°ºå¯¸
    
*   å¯é€šè¿‡ä¼ å‚çµæ´»æŒ‡å®šå°ºå¯¸ç»„åˆï¼ˆæ¯”å¦‚åªæ‰“åŒ… 32/256ï¼‰
    

Inspect åŠŸèƒ½
----------

é™¤äº†å›¾æ ‡ç”Ÿæˆï¼ŒSharpIco è¿˜å†…ç½®äº†ä¸€ä¸ªå›¾æ ‡å†…å®¹åˆ†æå·¥å…· `IcoInspector`ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ·±å…¥ç†è§£ `.ico` æ–‡ä»¶å†…éƒ¨ç»“æ„ï¼Œå¹¶éªŒè¯å®é™…åŒ…å«çš„å›¾å±‚å›¾åƒå°ºå¯¸ä¸ä½æ·±ä¿¡æ¯ï¼Œè§£å†³å¸‚é¢ä¸Šä¸å°‘å›¾æ ‡å·¥å…·ç”Ÿæˆä¸è§„èŒƒ `.ico` æ–‡ä»¶çš„é—®é¢˜ã€‚

è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹å®ç°æ€è·¯~

### è¯»å– ICO æ–‡ä»¶å¤´

æ‰‹åŠ¨è¯»å– ICONDIR + ICONDIRENTRY ç»“æ„

ICO æ–‡ä»¶çš„å¤´éƒ¨ç»“æ„ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š

*   `ICONDIR`ï¼ˆ6 å­—èŠ‚ï¼‰ï¼šæ ‡è®°ä¸ºå›¾æ ‡ã€è®°å½•å›¾åƒæ•°é‡
    
*   `ICONDIRENTRY Ã— N`ï¼ˆæ¯ä¸ª 16 å­—èŠ‚ï¼‰ï¼šè®°å½•æ¯å¼ å›¾ç‰‡çš„å…ƒä¿¡æ¯ï¼ˆå®½ã€é«˜ã€ä½æ·±ã€æ•°æ®åç§»ç­‰ï¼‰
    
*   å›¾åƒæ•°æ®å—ï¼šå®é™…çš„ PNG æˆ– BMP å›¾åƒ
    

    ushort reserved = reader.ReadUInt16(); // å¿…é¡»ä¸º0
    ushort type = reader.ReadUInt16();     // 1è¡¨ç¤ºå›¾æ ‡
    ushort count = reader.ReadUInt16();    // å›¾åƒæ•°é‡
    

éšåé€ä¸ªè¯»å–å›¾åƒæ¡ç›®ï¼Œä¿å­˜åˆ°å†…å­˜ä¸­ç”¨äºåç»­å¤„ç†ã€‚

    byte width = reader.ReadByte();
    byte height = reader.ReadByte();
    ushort bitCount = reader.ReadUInt16();
    int sizeInBytes = reader.ReadInt32();
    int imageOffset = reader.ReadInt32();
    

å¯¹äº†ï¼Œå‰é¢ä»‹ç»è¿‡ï¼ŒICO å¤´éƒ¨çš„ç©ºé—´æœ‰é™ï¼Œåªèƒ½å­˜ 8 ä½ï¼Œæ‰€ä»¥å¦‚æœ width/height å­—æ®µä¸º `0`ï¼Œæ ¹æ®è§„èŒƒè¡¨ç¤º 256ï¼Œæˆ–è€…æ˜¯è¶…è¿‡ 256

### æå–&è§£æå›¾åƒæ•°æ®

æå–å›¾åƒæ•°æ®ï¼Œæ ¡éªŒçœŸå®åˆ†è¾¨ç‡

ICO æ–‡ä»¶ä¸­è®°å½•çš„å®½é«˜æœªå¿…çœŸå®ï¼Œå°¤å…¶æ˜¯åµŒå…¥ PNG æ ¼å¼çš„æƒ…å†µã€‚å› æ­¤ï¼Œä½¿ç”¨ `ImageSharp` å¯¹æ¯å¼ å›¾åƒè¿›è¡ŒçœŸæ­£è§£æã€‚

    fs.Seek(entry.ImageOffset, SeekOrigin.Begin);
    fs.Read(imageData, 0, dataSize);
    Image.Load(imageData) â†’ è·å–çœŸå® Width å’Œ Height
    

*   é€šè¿‡ `GetImageDimensions()` æ–¹æ³•åˆ¤æ–­æ˜¯å¦ä¸º PNGï¼Œå¹¶ç”¨ `ImageSharp` åŠ è½½
    
*   å¦‚æœæ ¼å¼é”™è¯¯æˆ–è¯»å–å¤±è´¥ï¼Œå›é€€ä¸ºå¤´éƒ¨å£°æ˜çš„å°ºå¯¸
    

è¿™ä¸€ç‚¹å¯ç”¨äºæ£€æµ‹æŸäº›â€œä¼ªé€  ICOâ€çš„é—®é¢˜ï¼ˆæ¯”å¦‚å°ºå¯¸ä¸å›¾åƒå†…å®¹ä¸ä¸€è‡´ï¼‰

### è¡¥å…¨å¹¶è¾“å‡ºåˆ†æç»“æœ

æ‰€æœ‰æ¡ç›®éƒ½è¯»å–å¹¶è§£æåï¼Œå°†å†…å®¹è¾“å‡ºä¸ºç»“æ„åŒ–ä¿¡æ¯ï¼š

    æ­£åœ¨æ£€æŸ¥ICOæ–‡ä»¶: logo.ico
    å›¾æ ‡æ•°é‡: 7
    - ç¬¬1å¼ å›¾åƒ: 16x16, 32bpp, å¤§å°: 840å­—èŠ‚, åç§»: 118
    - ç¬¬2å¼ å›¾åƒ: 32x32, 32bpp, å¤§å°: 1939å­—èŠ‚, åç§»: 958
    - ç¬¬3å¼ å›¾åƒ: 48x48, 32bpp, å¤§å°: 3375å­—èŠ‚, åç§»: 2897
    - ç¬¬4å¼ å›¾åƒ: 64x64, 32bpp, å¤§å°: 4951å­—èŠ‚, åç§»: 6272
    - ç¬¬5å¼ å›¾åƒ: 128x128, 32bpp, å¤§å°: 13782å­—èŠ‚, åç§»: 11223
    - ç¬¬6å¼ å›¾åƒ: 256x256, 32bpp, å¤§å°: 37823å­—èŠ‚, åç§»: 25005
    - ç¬¬7å¼ å›¾åƒ: 512x512, 32bpp, å¤§å°: 114655å­—èŠ‚, åç§»: 62828
      æ³¨æ„: æ–‡ä»¶å¤´ä¸­æŒ‡å®šçš„å°ºå¯¸ä¸º256x256ï¼Œä½†å®é™…å›¾åƒå°ºå¯¸ä¸º512x512
    

è¿™æ ·èƒ½å¤Ÿå¿«é€Ÿç¡®è®¤ï¼š

*   ä¸€ä¸ª `.ico` æ–‡ä»¶ä¸­åŒ…å«å¤šå°‘å›¾å±‚
    
*   æ¯å±‚çš„çœŸå®å°ºå¯¸ä¸ä½æ·±
    
*   æ˜¯å¦å­˜åœ¨æ ¼å¼é—®é¢˜ï¼ˆå°ºå¯¸å¯¹ä¸ä¸Šã€å¤§å°å¼‚å¸¸ç­‰ï¼‰
    

å‘½ä»¤è¡Œç•Œé¢è®¾è®¡
-------

SharpIco ä¸åªæ˜¯ä¸€ä¸ªä»£ç åº“ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†å®Œæ•´çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ–¹ä¾¿åœ¨ä»»æ„å¼€å‘åœºæ™¯ä¸­å¿«é€Ÿè°ƒç”¨ï¼Œæ— è®ºæ˜¯æ‰‹åŠ¨ä½¿ç”¨è¿˜æ˜¯é›†æˆè¿›æ„å»ºè„šæœ¬éƒ½æ¯«æ— å‹åŠ›ã€‚

è¿™ä¸€éƒ¨åˆ†ä½¿ç”¨äº† .NET çš„ç°ä»£ CLI æ„å»ºåº“ [`System.CommandLine`](https://github.com/dotnet/command-line-api)ï¼Œå®ç°äº†ä¸¤ä¸ªä¸»å‘½ä»¤ï¼š

*   `generate`ï¼šå°† PNG å›¾åƒè½¬æ¢ä¸º ICO å›¾æ ‡
*   `inspect`ï¼šæ£€æŸ¥ ICO æ–‡ä»¶çš„ç»“æ„ä¸å›¾å±‚ä¿¡æ¯

å‘½ä»¤è¡Œä½¿ç”¨æ–¹æ³•ï¼š

    sharpico generate -i logo.png -o icon.ico --sizes 16 32 48 256
    sharpico inspect icon.ico
    

### ğŸ› ï¸ ç”Ÿæˆå‘½ä»¤ `generate`

è¿™ä¸ªå‘½ä»¤æ”¯æŒé€šè¿‡å‚æ•°æ§åˆ¶è¾“å…¥ã€è¾“å‡ºè·¯å¾„å’Œç”Ÿæˆå›¾æ ‡çš„å°ºå¯¸ï¼š

    sharpico generate --input logo.png --output app.ico --sizes 16 32 64 256
    

#### å‚æ•°è¯´æ˜ï¼š

å‚æ•°

ç®€å†™

è¯´æ˜

`--input`

`-i`

æº PNG å›¾åƒè·¯å¾„ï¼ˆå¿…é¡»ï¼‰

`--output`

`-o`

è¾“å‡º ICO æ–‡ä»¶è·¯å¾„ï¼ˆå¿…é¡»ï¼‰

`--sizes`

`-s`

è¦ç”Ÿæˆçš„å›¾æ ‡å°ºå¯¸åˆ—è¡¨ï¼Œæ”¯æŒå¤šä¸ªï¼ˆé»˜è®¤ä¸ºå¸¸è§ä¸ƒç§å°ºå¯¸ï¼‰

> æ”¯æŒå¤šä¸ªå°ºå¯¸åŒæ—¶ç”Ÿæˆï¼Œå†…éƒ¨è°ƒç”¨ `IcoGenerator.GenerateIcon()` å®ç°å¤šå›¾å±‚ `.ico` æ–‡ä»¶åˆ›å»ºã€‚

ä¸¾ä¸ªä¾‹å­ï¼š

    sharpico generate -i logo.png -o icon.ico -s 32 64 256
    

è¾“å‡ºå°†åŒ…å«ä¸‰ç§åˆ†è¾¨ç‡å›¾å±‚ã€‚

### ğŸ” æ£€æŸ¥å‘½ä»¤ `inspect`

å¯ä»¥å¯¹ä»»æ„ `.ico` æ–‡ä»¶è¿›è¡Œç»“æ„æ£€æŸ¥ä¸éªŒè¯ï¼š

    sharpico inspect icon.ico
    

è¿™ä¼šè¾“å‡ºå›¾æ ‡ä¸­æ¯ä¸€å¼ å›¾å±‚çš„ï¼š

*   å®½é«˜ï¼ˆå£°æ˜ä¸å®é™…å°ºå¯¸ï¼‰
*   ä½æ·±ï¼ˆbppï¼‰
*   æ•°æ®åç§»ä¸å¤§å°
*   æ˜¯å¦å­˜åœ¨å¤´éƒ¨ä¸å®é™…å›¾åƒå°ºå¯¸ä¸ä¸€è‡´çš„æ½œåœ¨é—®é¢˜

ç¤ºä¾‹è¾“å‡ºï¼š

    æ­£åœ¨æ£€æŸ¥ICOæ–‡ä»¶: logo.ico
    å›¾æ ‡æ•°é‡: 7
    - ç¬¬1å¼ å›¾åƒ: 16x16, 32bpp, å¤§å°: 840å­—èŠ‚, åç§»: 118
    - ç¬¬2å¼ å›¾åƒ: 32x32, 32bpp, å¤§å°: 1939å­—èŠ‚, åç§»: 958
    - ç¬¬3å¼ å›¾åƒ: 48x48, 32bpp, å¤§å°: 3375å­—èŠ‚, åç§»: 2897
    - ç¬¬4å¼ å›¾åƒ: 64x64, 32bpp, å¤§å°: 4951å­—èŠ‚, åç§»: 6272
    - ç¬¬5å¼ å›¾åƒ: 128x128, 32bpp, å¤§å°: 13782å­—èŠ‚, åç§»: 11223
    - ç¬¬6å¼ å›¾åƒ: 256x256, 32bpp, å¤§å°: 37823å­—èŠ‚, åç§»: 25005
    - ç¬¬7å¼ å›¾åƒ: 512x512, 32bpp, å¤§å°: 114655å­—èŠ‚, åç§»: 62828
      æ³¨æ„: æ–‡ä»¶å¤´ä¸­æŒ‡å®šçš„å°ºå¯¸ä¸º256x256ï¼Œä½†å®é™…å›¾åƒå°ºå¯¸ä¸º512x512
    

å‘å¸ƒ
--

SharpIco ä¸åªæ˜¯ä¸€ä¸ªåº“ï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªåªèƒ½æºç ä½¿ç”¨çš„å°å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯ä»¥ **é€šè¿‡ `dotnet tool` å…¨å¹³å°å®‰è£…è¿è¡Œ**ã€**æ”¯æŒ AOT ç¼–è¯‘ä¼˜åŒ–æ€§èƒ½å’Œä½“ç§¯** çš„ä¸“ä¸šå›¾æ ‡å·¥å…·ã€‚

è¿™æ¬¡éœ€è¦åŒæ—¶æ”¯æŒ AOT å’Œä¼ ç»Ÿå‘å¸ƒï¼Œæ‰€ä»¥å¯¹é¡¹ç›®æ–‡ä»¶åšäº†ä¸€äº›é…ç½®

    <Project Sdk="Microsoft.NET.Sdk">
    
        <PropertyGroup>
            <OutputType>Exe</OutputType>
            <TargetFramework>net9.0</TargetFramework>
            <ImplicitUsings>enable</ImplicitUsings>
            <Nullable>enable</Nullable>
            <!-- AOTç¼–è¯‘è®¾ç½®ç§»è‡³æ¡ä»¶å±æ€§ç»„ -->
            <InvariantGlobalization>true</InvariantGlobalization>
    
            <!-- .NET Tool é…ç½® -->
            <PackAsTool>true</PackAsTool>
            <ToolCommandName>sharpico</ToolCommandName>
            <PackageOutputPath>./nupkg</PackageOutputPath>
    
            <!-- åŒ…ä¿¡æ¯ -->
            <PackageId>SharpIco</PackageId>
            <Version>1.0.0</Version>
            <Authors>StarPlan</Authors>
            <Description>SharpIcoæ˜¯ä¸€ä¸ªçº¯ C# AOT å®ç°çš„è½»é‡çº§å›¾æ ‡ç”Ÿæˆå·¥å…·ï¼Œç”¨äºç”Ÿæˆå’Œæ£€æŸ¥ICOå›¾æ ‡æ–‡ä»¶ã€‚å¯å°†ä¸€å¼ é«˜åˆ†è¾¨ç‡ PNG å›¾ç‰‡ä¸€é”®ç”Ÿæˆæ ‡å‡†çš„ Windows .ico å›¾æ ‡æ–‡ä»¶ï¼Œå†…å«å¤šç§å°ºå¯¸ï¼ˆ16x16 åˆ° 512x512ï¼‰ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰å°ºå¯¸ã€‚é™¤äº†å›¾æ ‡ç”Ÿæˆï¼ŒSharpIco è¿˜å†…ç½®å›¾æ ‡ç»“æ„åˆ†æåŠŸèƒ½ï¼ŒåŠ©ä½ è½»æ¾éªŒè¯ .ico æ–‡ä»¶ä¸­åŒ…å«çš„å›¾å±‚ä¸å°ºå¯¸ã€‚</Description>
            <PackageTags>icon;ico;png;converter,DealiAxy,cli,tool,dotnet-tool,imagesharp</PackageTags>
            <PackageProjectUrl>https://github.com/star-plan/sharp-ico</PackageProjectUrl>
            <RepositoryUrl>https://github.com/star-plan/sharp-ico</RepositoryUrl>
            <PackageLicenseExpression>MIT</PackageLicenseExpression>
            <PackageReadmeFile>README.md</PackageReadmeFile>
        </PropertyGroup>
    
        <!-- AOTå‘å¸ƒä¸“ç”¨è®¾ç½® -->
        <PropertyGroup Condition="'$(PublishAot)' == 'true'">
            <PublishAot>true</PublishAot>
            <TrimMode>full</TrimMode>
            <InvariantGlobalization>true</InvariantGlobalization>
            <IlcGenerateStackTraceData>false</IlcGenerateStackTraceData>
            <IlcOptimizationPreference>Size</IlcOptimizationPreference>
            <IlcFoldIdenticalMethodBodies>true</IlcFoldIdenticalMethodBodies>
            <JsonSerializerIsReflectionEnabledByDefault>true</JsonSerializerIsReflectionEnabledByDefault>
        </PropertyGroup>
    
        <ItemGroup>
            <None Include="README.md" Pack="true" PackagePath="\" />
        </ItemGroup>
    
        <ItemGroup>
            <PackageReference Include="SixLabors.ImageSharp" Version="3.1.8" />
            <PackageReference Include="System.CommandLine" Version="2.0.0-beta4.22272.1" />
        </ItemGroup>
    
    </Project>
    

å‡ ä¸ªè¦ç‚¹ï¼š

### å®šä¹‰ä¸º CLI å·¥å…·ï¼ˆdotnet toolï¼‰

    <PackAsTool>true</PackAsTool>
    <ToolCommandName>sharpico</ToolCommandName>
    

è¿™ä½¿å¾— SharpIco å¯ä»¥åƒä»»ä½•å…¶ä»– `.NET CLI å·¥å…·` ä¸€æ ·è¢«å…¨å±€å®‰è£…ï¼š

    dotnet tool install -g SharpIco --add-source ./nupkg
    

å®‰è£…åï¼Œåªéœ€è¿è¡Œï¼š

    sharpico generate -i logo.png -o icon.ico
    

### æ”¯æŒ AOT ç¼–è¯‘å‘å¸ƒï¼ˆ.NET 9 åŸç”Ÿæ”¯æŒï¼‰

    <PublishAot>true</PublishAot>
    <IlcOptimizationPreference>Size</IlcOptimizationPreference>
    <TrimMode>full</TrimMode>
    

é€šè¿‡è®¾ç½® PublishAot=trueï¼ŒSharpIco æ”¯æŒç¼–è¯‘ä¸ºåŸç”Ÿå¯æ‰§è¡Œæ–‡ä»¶

æ— éœ€ .NET è¿è¡Œæ—¶æ”¯æŒï¼Œå¯åŠ¨é€Ÿåº¦æå¿«ï¼Œé€‚åˆæ„å»ºå·¥å…·é“¾æˆ–é›†æˆç¯å¢ƒä½¿ç”¨

AOT æ„å»ºå‘½ä»¤ç¤ºä¾‹ï¼š

    dotnet publish -c Release -r win-x64 /p:PublishAot=true
    

ç”Ÿæˆçš„ `sharpico.exe` æ˜¯ä¸€ä¸ªçº¯åŸç”Ÿçš„ Windows å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ— éœ€å®‰è£… .NETï¼

> é™¤ Windows å¤–ï¼Œä¹Ÿå¯å‘å¸ƒä¸º `linux-x64`, `osx-arm64` ç­‰è·¨å¹³å°ç›®æ ‡ã€‚

è‡ªåŠ¨å‘å¸ƒ nuget
----------

SharpIco é‡‡ç”¨äº†å®Œæ•´çš„ GitHub Actions CI/CD æµæ°´çº¿ï¼Œåšåˆ°**ä¸€æ¬¡æ‰“ tagï¼Œå…¨å¹³å°æ„å»ºè‡ªåŠ¨å®Œæˆ**ã€‚

åªéœ€æ¨é€ä¸€ä¸ªç¬¦åˆè¯­ä¹‰åŒ–æ ¼å¼çš„æ ‡ç­¾ï¼ˆå¦‚ `v1.0.0`ï¼‰ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ï¼š

1.  æ„å»ºå¹¶å‘å¸ƒ NuGet å·¥å…·åŒ…
2.  é’ˆå¯¹ Windows / Linux / macOS ç¼–è¯‘åŸç”Ÿ AOT å¯æ‰§è¡Œæ–‡ä»¶
3.  è‡ªåŠ¨ä¸Šä¼ æ‰€æœ‰äº§ç‰©åˆ° GitHub Release é¡µé¢

æˆ‘ä¹‹å‰å·²ç»å†™è¿‡å…³äºå¦‚ä½•å‘å¸ƒ nuget çš„æ–‡ç« äº†ï¼Œè¯¦è§ï¼š

*   [å¼€å‘ç°ä»£åŒ–çš„.NetCoreæ§åˆ¶å°ç¨‹åº (3) å°†nugetåŒ…å‘å¸ƒåˆ°GitHubPackages](https://blog.deali.cn/Blog/Post/977b511be1ca5f43)
*   [å¼€å‘ç°ä»£åŒ–çš„.NetCoreæ§åˆ¶å°ç¨‹åº (4) ä½¿ç”¨GithubActionè‡ªåŠ¨æ„å»ºä»¥åŠå‘å¸ƒnugetåŒ…](https://blog.deali.cn/Blog/Post/36dc21f5652f8ff4)

è¿™éƒ¨åˆ†é—®é¢˜ä¸å¤§

ä¸è¿‡è¿™æ¬¡è¿˜æœ‰äº›ä¸ä¸€æ ·ï¼Œä¹‹å‰å‘å¸ƒçš„æ˜¯ç±»åº“å’Œé¡¹ç›®æ¨¡æ¿ï¼Œè¿™æ¬¡æ˜¯ dotnet tool

è¿™ç±»ä¼¼äº npx è„šæœ¬ã€pip å·¥å…·ä¹‹ç±»çš„æ¦‚å¿µ

å¯ä»¥ä½¿ç”¨ dotnet tool å‘½ä»¤å®‰è£…å’Œè°ƒç”¨

ä¸è¿‡è¿™ç§æ–¹å¼å°±ä¸èƒ½ä½¿ç”¨ AOTï¼Œåªèƒ½ä½¿ç”¨ framework dependant æ–¹å¼å‘å¸ƒ

nuget å‘å¸ƒæ¯”è¾ƒç®€å•ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ dotnet å‘½ä»¤

    dotnet pack -c Release
    

ä¸è¿‡å…³é”®åœ¨äºæˆ‘è¦ç”¨ GitHub Action æ¥è‡ªåŠ¨åŒ–æ„å»ºå’Œå‘å¸ƒï¼Œè¿™ä¸ªæµç¨‹å’Œä¹‹å‰å·®ä¸å¤š

    name: å‘å¸ƒSharpIco
    run-name: ${{ github.actor }} æ­£åœ¨å‘å¸ƒSharpIco ğŸš€
    
    on:
      push:
        tags:
          - "v*.*.*"  # æ›´æ˜ç¡®çš„ç‰ˆæœ¬æ ¼å¼åŒ¹é…
    
    # ä¸ºæ•´ä¸ªå·¥ä½œæµè®¾ç½®æƒé™
    permissions:
      contents: write
      id-token: write
      issues: write
    
    jobs:
      # ç¬¬ä¸€æ­¥ï¼šå‘å¸ƒNuGetåŒ…
      publish-nuget:
        runs-on: ubuntu-latest
        
        steps:
          - uses: actions/checkout@v3
            with:
              fetch-depth: 0  # è·å–æ‰€æœ‰å†å²è®°å½•ç”¨äºç‰ˆæœ¬å·è®¡ç®—
          
          - name: Setup .NET
            uses: actions/setup-dotnet@v3
            with:
              dotnet-version: 9.0.x
          
          - name: ç¼“å­˜NuGetåŒ…
            uses: actions/cache@v3
            with:
              path: ~/.nuget/packages
              key: ${{ runner.os }}-nuget-${{ hashFiles('**/packages.lock.json') }}
              restore-keys: |
                ${{ runner.os }}-nuget-
          
          - name: æå–ç‰ˆæœ¬å·
            id: get_version
            shell: bash
            run: echo "VERSION=${GITHUB_REF#refs/tags/v}" >> $GITHUB_OUTPUT
          
          - name: æ¢å¤ä¾èµ–
            run: dotnet restore ./SharpIco/SharpIco.csproj
          
          - name: è¿è¡Œæµ‹è¯•
            run: dotnet test --no-restore
    
          - name: æ„å»ºé¡¹ç›®
            run: dotnet build --no-restore -c Release --nologo ./SharpIco/SharpIco.csproj -p:Version=${{ steps.get_version.outputs.VERSION }}
          
          - name: åˆ›å»ºNuGetåŒ…
            run: dotnet pack -c Release ./SharpIco/SharpIco.csproj -p:PackageVersion=${{ steps.get_version.outputs.VERSION }} --no-build --output ./nupkg
            
          - name: å‘å¸ƒåˆ°NuGet Gallery
            run: dotnet nuget push ./nupkg/*.nupkg --api-key ${{ secrets.NUGET_GALLERY_TOKEN }} --source https://api.nuget.org/v3/index.json --skip-duplicate
    

è‡ªåŠ¨å‘å¸ƒåˆ° Github Release
--------------------

è¿™ä¸ªæ˜¯æœ€æŠ˜è…¾çš„ï¼Œæˆ‘åå¤è°ƒè¯•äº†åå‡ æ¬¡æ‰æˆåŠŸğŸ˜‚

ä¸å¾—ä¸è¯´ Github Action çš„è°ƒè¯•å¤ªä¸å‹å¥½äº†

ç›´æ¥è´´ä¸Šæˆ‘æœ€åæˆåŠŸçš„é…ç½®å§

    name: å‘å¸ƒSharpIco
    run-name: ${{ github.actor }} æ­£åœ¨å‘å¸ƒSharpIco ğŸš€
    
    on:
      push:
        tags:
          - "v*.*.*"  # æ›´æ˜ç¡®çš„ç‰ˆæœ¬æ ¼å¼åŒ¹é…
    
    # ä¸ºæ•´ä¸ªå·¥ä½œæµè®¾ç½®æƒé™
    permissions:
      contents: write
      id-token: write
      issues: write
    
    jobs:
      # ç¬¬äºŒæ­¥ï¼šç¼–è¯‘å„å¹³å°å¯æ‰§è¡Œæ–‡ä»¶
      build-executables:
        needs: publish-nuget  # ç¡®ä¿åœ¨NuGetåŒ…å‘å¸ƒåè¿è¡Œ
        strategy:
          fail-fast: false
          matrix:
            kind: ['windows', 'linux', 'macOS']
            include:
              - kind: windows
                os: windows-latest
                target: win-x64
                extension: '.zip'
              - kind: linux
                os: ubuntu-latest
                target: linux-x64
                extension: '.tar.gz'
              - kind: macOS
                os: macos-latest
                target: osx-x64
                extension: '.tar.gz'
    
        runs-on: ${{ matrix.os }}
        
        steps:
          - uses: actions/checkout@v3
            with:
              fetch-depth: 0  # è·å–æ‰€æœ‰å†å²è®°å½•ç”¨äºç‰ˆæœ¬å·è®¡ç®—
          
          - name: æå–ç‰ˆæœ¬å·
            id: get_version
            shell: bash
            run: echo "VERSION=${GITHUB_REF#refs/tags/v}" >> $GITHUB_OUTPUT
          
          - name: Setup .NET
            uses: actions/setup-dotnet@v3
            with:
              dotnet-version: 9.0.x
          
          - name: ç¼“å­˜NuGetåŒ…
            uses: actions/cache@v3
            with:
              path: ~/.nuget/packages
              key: ${{ runner.os }}-nuget-${{ hashFiles('**/packages.lock.json') }}
              restore-keys: |
                ${{ runner.os }}-nuget-
          
          - name: å®‰è£…Linuxä¾èµ–
            if: matrix.kind == 'linux'
            run: |
              sudo apt-get update
              sudo apt-get install -y clang zlib1g-dev libkrb5-dev
    
          - name: è®¾ç½®Windowsç¯å¢ƒ
            if: matrix.kind == 'windows'
            shell: pwsh
            run: |
              Write-Host "è®¾ç½®Windowsç¼–è¯‘ç¯å¢ƒ..."
              # ç¡®ä¿æœ‰æœ€æ–°çš„å¼€å‘è€…å·¥å…·
              choco install visualstudio2022buildtools -y --no-progress
          
          - name: æ¢å¤ä¾èµ–
            run: dotnet restore ./SharpIco/SharpIco.csproj
          
          - name: AOTç¼–è¯‘
            run: |
              echo "æ­£åœ¨ä¸º ${{ matrix.kind }} å¹³å°è¿›è¡ŒAOTç¼–è¯‘..."
              dotnet publish ./SharpIco/SharpIco.csproj -c Release -r ${{ matrix.target }} --self-contained true -p:PublishAot=true -p:Version=${{ steps.get_version.outputs.VERSION }} -o ./publish/${{ matrix.kind }}
          
          - name: æ‰“åŒ…Windowså¯æ‰§è¡Œæ–‡ä»¶
            if: matrix.kind == 'windows'
            run: |
              cd ./publish/${{ matrix.kind }}
              7z a -tzip ../../SharpIco-${{ matrix.kind }}-${{ steps.get_version.outputs.VERSION }}${{ matrix.extension }} *
          
          - name: æ‰“åŒ…Linux/macOSå¯æ‰§è¡Œæ–‡ä»¶
            if: matrix.kind != 'windows'
            run: |
              cd ./publish/${{ matrix.kind }}
              tar -czvf ../../SharpIco-${{ matrix.kind }}-${{ steps.get_version.outputs.VERSION }}${{ matrix.extension }} *
          
          # ä¸Šä¼ æ„å»ºäº§ç‰©ä½œä¸ºå·¥ä½œæµæ„ä»¶(artifacts)
          - name: ä¸Šä¼ æ„å»ºäº§ç‰©
            uses: actions/upload-artifact@v4
            with:
              name: SharpIco-${{ matrix.kind }}-${{ steps.get_version.outputs.VERSION }}
              path: ./SharpIco-${{ matrix.kind }}-${{ steps.get_version.outputs.VERSION }}${{ matrix.extension }}
              retention-days: 1
    
      # ç¬¬ä¸‰æ­¥ï¼šç»Ÿä¸€ä¸Šä¼ æ‰€æœ‰å¹³å°å¯æ‰§è¡Œæ–‡ä»¶åˆ°GitHub Release
      upload-to-release:
        needs: build-executables
        runs-on: ubuntu-latest
        
        steps:
          - name: æå–ç‰ˆæœ¬å·
            id: get_version
            shell: bash
            run: echo "VERSION=${GITHUB_REF#refs/tags/v}" >> $GITHUB_OUTPUT
          
          # ä¸‹è½½æ‰€æœ‰å¹³å°æ„å»ºäº§ç‰©
          - name: ä¸‹è½½Windowsæ„å»ºäº§ç‰©
            uses: actions/download-artifact@v4
            with:
              name: SharpIco-windows-${{ steps.get_version.outputs.VERSION }}
              path: ./artifacts
          
          - name: ä¸‹è½½Linuxæ„å»ºäº§ç‰©
            uses: actions/download-artifact@v4
            with:
              name: SharpIco-linux-${{ steps.get_version.outputs.VERSION }}
              path: ./artifacts
          
          - name: ä¸‹è½½macOSæ„å»ºäº§ç‰©
            uses: actions/download-artifact@v4
            with:
              name: SharpIco-macOS-${{ steps.get_version.outputs.VERSION }}
              path: ./artifacts
          
          # åˆ—å‡ºä¸‹è½½çš„æ–‡ä»¶ä»¥ç¡®è®¤
          - name: åˆ—å‡ºä¸‹è½½çš„æ–‡ä»¶
            run: ls -la ./artifacts
          
          # ç»Ÿä¸€ä¸Šä¼ åˆ°GitHub Release
          - name: ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶åˆ°GitHub Release
            uses: softprops/action-gh-release@v1
            env:
              GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            with:
              files: ./artifacts/*
              tag_name: ${{ github.ref }}
              fail_on_unmatched_files: false
              draft: false
              name: SharpIco ç‰ˆæœ¬ ${{ steps.get_version.outputs.VERSION }}
              generate_release_notes: true 
    

### å·¥ä½œæµæ€»è§ˆ

æ•´ä¸ªå·¥ä½œæµç”±ä¸‰å¤§ Job ç»„æˆï¼š

é˜¶æ®µ

æè¿°

`publish-nuget`

ç¼–è¯‘é¡¹ç›®å¹¶å‘å¸ƒ `.nupkg` åŒ…åˆ° NuGet.org

`build-executables`

ä¸ºä¸‰å¤§å¹³å°ç¼–è¯‘ AOT åŸç”Ÿå¯æ‰§è¡Œæ–‡ä»¶

`upload-to-release`

å°†æ‰€æœ‰äº§ç‰©ä¸Šä¼ åˆ°å½“å‰ tag å¯¹åº”çš„ GitHub Release

å‘å¸ƒ nuget éƒ¨åˆ†æ¯”è¾ƒå®¹æ˜“ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†

### ç¼–è¯‘ä¸‰å¹³å° AOT å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆbuild-executablesï¼‰

é‡‡ç”¨ GitHub Matrix æ„å»ºç­–ç•¥ï¼Œåˆ†åˆ«é’ˆå¯¹ï¼š

*   `win-x64`ï¼ˆWindows å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒZIP æ‰“åŒ…ï¼‰
*   `linux-x64`ï¼ˆLinux ELFï¼Œå¯æ‰§è¡Œï¼Œtar.gz æ‰“åŒ…ï¼‰
*   `osx-x64`ï¼ˆmacOS å¯æ‰§è¡Œï¼Œtar.gz æ‰“åŒ…ï¼‰

    dotnet publish -c Release -r ${{ matrix.target }} --self-contained true -p:PublishAot=true
    

æ¯ä¸ªå¹³å°ç”Ÿæˆå¯¹åº”å‹ç¼©åŒ…ï¼Œæ‰“åŒ…åä½¿ç”¨ `upload-artifact` ä¸Šä¼ ä¸­è½¬ã€‚

### ä¸Šä¼ è‡³ GitHub Releaseï¼ˆupload-to-releaseï¼‰

è¿™ä¸€é˜¶æ®µä¼šè‡ªåŠ¨ä¸‹è½½ä¹‹å‰æ„å»ºçš„äº§ç‰©ï¼Œå¹¶æ‰“åŒ…è¿›å½“å‰ç‰ˆæœ¬çš„ Release é¡µé¢ï¼š

    uses: softprops/action-gh-release@v1
    

å‘å¸ƒé¡µé¢è‡ªåŠ¨ç”Ÿæˆæ›´æ–°è¯´æ˜ï¼ˆ`generate_release_notes: true`ï¼‰ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹ç‰ˆæœ¬å˜æ›´ã€‚

æœ€ç»ˆæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

    ğŸ”– v1.0.0
    â”œâ”€â”€ SharpIco-windows-v1.0.0.zip
    â”œâ”€â”€ SharpIco-linux-v1.0.0.tar.gz
    â””â”€â”€ SharpIco-macOS-v1.0.0.tar.gz
    

### å‘

è¿™é‡Œæœ€å¤§çš„å‘å°±æ˜¯åŸæœ¬ä½¿ç”¨ `actions/upload-artifact@v3` ä¸€ç›´æŠ¥é”™ï¼Œåé¢æŸ¥äº† issue å‘ç°æ˜¯å·²ç» deprecate äº†

å‡çº§åˆ° v4 é—®é¢˜è§£å†³

å¦å¤–å°±æ˜¯å‘å¸ƒ GitHub Release æ—¶è€æ˜¯å†²çªï¼Œä¸€ç›´è¯´å·²å­˜åœ¨

è®¾ç½®äº† append ä¹Ÿä¸è¡Œâ€¦â€¦

åé¢æˆ‘æ”¹æˆå…ˆä¸Šä¼ ä¸­è½¬ï¼Œåé¢ä¸€æ¬¡æ€§å‘å¸ƒï¼Œæ‰ç»ˆäºæˆåŠŸäº†ğŸ˜‚

å°ç»“
--

`SharpIco` æ˜¯æˆ‘åŸºäº .NET 9 å’Œ AOT ç¼–è¯‘èƒ½åŠ›æ‰“é€ çš„ä¸€æ¬¾çº¯ C# å›¾æ ‡å·¥å…·ï¼Œç›®æ ‡æ˜¯**æ›¿ä»£ç¹çä¾èµ–ã€ç®€åŒ–å›¾æ ‡ç”Ÿæˆä¸éªŒè¯æµç¨‹**ã€‚

ä» `ImageSharp` å›¾åƒå¤„ç†ï¼Œåˆ° `BinaryWriter` æ‰‹å·¥æ‹¼è£… ICO æ ¼å¼ï¼›ä» `System.CommandLine` æ‰“é€ å‘½ä»¤è¡Œä½“éªŒï¼Œåˆ° GitHub Actions å…¨æµç¨‹è‡ªåŠ¨åŒ–å‘å¸ƒï¼›SharpIco ä¸ä»…æ˜¯ä¸€ä¸ªå®ç”¨å·¥å…·ï¼Œä¹Ÿæ˜¯ä¸€åœºå°è€Œç¾çš„å·¥ç¨‹æ¢ç´¢ã€‚

å®ƒä»£è¡¨äº†æˆ‘å¯¹å·¥å…·ç†æƒ³çš„è¿½æ±‚ï¼š**è½»é‡ã€çº¯ç²¹ã€æ˜“é›†æˆã€è·¨å¹³å°ã€å³å¼€å³ç”¨**ã€‚

*   æ— éœ€å®‰è£… Pythonã€Node æˆ– ImageMagick
*   æ”¯æŒ AOT ç¼–è¯‘ï¼Œç”ŸæˆåŸç”Ÿå¯æ‰§è¡Œæ–‡ä»¶
*   åŒæ—¶å…·å¤‡å›¾æ ‡ç”Ÿæˆä¸ç»“æ„åˆ†æåŠŸèƒ½
*   ä¸€æ¬¡å‘å¸ƒï¼Œè‡ªåŠ¨äº§å‡ºå…¨å¹³å°æ„å»ºç»“æœ

æ¬¢è¿ Star / Fork / Issue / PRï¼Œæ¬¢è¿å°†å®ƒé›†æˆè¿›ä½ çš„æ„å»ºç³»ç»Ÿä¸­ã€‚

ğŸ“¦ GitHub é¡¹ç›®åœ°å€ï¼š  
ğŸ‘‰ [https://github.com/star-plan/sharp-ico](https://github.com/star-plan/sharp-ico)

å¾®ä¿¡å…¬ä¼—å·ï¼šã€Œç¨‹åºè®¾è®¡å®éªŒå®¤ã€ ä¸“æ³¨äºäº’è”ç½‘çƒ­é—¨æ–°æŠ€æœ¯æ¢ç´¢ä¸å›¢é˜Ÿæ•æ·å¼€å‘å®è·µï¼ŒåŒ…æ‹¬æ¶æ„è®¾è®¡ã€æœºå™¨å­¦ä¹ ä¸æ•°æ®åˆ†æç®—æ³•ã€ç§»åŠ¨ç«¯å¼€å‘ã€Linuxã€Webå‰åç«¯å¼€å‘ç­‰ï¼Œæ¬¢è¿ä¸€èµ·æ¢è®¨æŠ€æœ¯ï¼Œåˆ†äº«å­¦ä¹ å®è·µç»éªŒã€‚