---
layout: post
title: 'Flaské¡¹ç›®ç›®å½•ç»“æ„æŒ‡å—ï¼šä»å•æ–‡ä»¶åˆ°æ¨¡å—åŒ–'
date: "2025-12-04T00:43:16Z"
---
Flaské¡¹ç›®ç›®å½•ç»“æ„æŒ‡å—ï¼šä»å•æ–‡ä»¶åˆ°æ¨¡å—åŒ–
======================

æœ¬æ–‡ç³»ç»Ÿè®²è§£äº†Flaskæ¡†æ¶åœ¨ä¸åŒè§„æ¨¡é¡¹ç›®ä¸‹çš„ç›®å½•ç»“æ„è®¾è®¡ã€‚ä»æœ€ç®€å•çš„å•æ–‡ä»¶åº”ç”¨ï¼Œåˆ°é‡‡ç”¨åº”ç”¨å·¥å‚æ¨¡å¼çš„æ ‡å‡†ä¸­å‹é¡¹ç›®å¸ƒå±€ï¼Œå†åˆ°ä½¿ç”¨è“å›¾è¿›è¡Œæ¨¡å—åŒ–æ‹†åˆ†çš„å¤§å‹é¡¹ç›®æ¶æ„ï¼Œå±‚å±‚é€’è¿›åœ°åˆ†æäº†æ¯ç§ç»“æ„çš„é€‚ç”¨åœºæ™¯ã€æ ¸å¿ƒæ–‡ä»¶ä¸è®¾è®¡è¦ç‚¹ã€‚åŒæ—¶ï¼Œç»“åˆè™šæ‹Ÿç¯å¢ƒã€ä¾èµ–ç®¡ç†ã€é…ç½®åˆ†ç¦»ç­‰å®é™…å¼€å‘ç¯å¢ƒçš„æœ€ä½³å®è·µï¼Œæä¾›äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„é¡¹ç›®æ¨¡æ¿ï¼Œå¸®åŠ©å¼€å‘è€…å»ºç«‹æ¸…æ™°ã€å¯ç»´æŠ¤çš„Flaské¡¹ç›®åŸºç¡€ã€‚

è¿˜åœ¨ä¸ºFlaské¡¹ç›®è¯¥æ–°å»ºå‡ ä¸ªæ–‡ä»¶ã€æ–‡ä»¶å¤¹æ”¾å“ªè€Œå¤´ç–¼å—ï¼Ÿæ®è§‚å¯Ÿï¼Œè¶…è¿‡70%çš„Flaskåˆå­¦è€…éƒ½æ›¾å› æ··ä¹±çš„ç›®å½•ç»“æ„ï¼Œåœ¨é¡¹ç›®è§„æ¨¡æ‰©å¤§æ—¶é™·å…¥ç»´æŠ¤åœ°ç‹±ï¼

> æœ¬æ–‡ä¸ºä½ æ¸…æ™°æ¢³ç†Flaské¡¹ç›®åœ¨ä¸åŒè§„æ¨¡ï¼ˆå°å‹ã€ä¸­å‹ã€å¤§å‹ï¼‰ä¸‹çš„æ ‡å‡†ç›®å½•ç»“æ„ï¼Œå¹¶æä¾›å®é™…å¼€å‘ç¯å¢ƒçš„é…ç½®å»ºè®®ã€‚ä½ å°†å­¦åˆ°ï¼š  
> \- å°å‹å•æ–‡ä»¶åº”ç”¨çš„æç®€ç»„ç»‡æ³•  
> \- ä¸­å‹é¡¹ç›®â€œåº”ç”¨å·¥å‚æ¨¡å¼â€çš„æ ‡å‡†å¸ƒå±€  
> \- å¤§å‹é¡¹ç›®å¦‚ä½•è¿›è¡Œæ¨¡å—åŒ–ï¼ˆè“å›¾ï¼‰æ‹†åˆ†  
> \- å®é™…å¼€å‘ä¸­å¦‚ä½•ç®¡ç†é…ç½®ã€ä¾èµ–ä¸éƒ¨ç½²æ–‡ä»¶  
> æ–‡æœ«æä¾›ä¸€ä¸ªå¯ç›´æ¥å¤åˆ¶ä½¿ç”¨çš„ä¸­å‹é¡¹ç›®æ¨¡æ¿ã€‚

ç›®å½• ğŸ“š
-----

ä¸€ã€å•åˆ€ç›´å…¥ï¼šå°å‹é¡¹ç›®ç»“æ„  
äºŒã€äº•äº•æœ‰æ¡ï¼šä¸­å‹é¡¹ç›®ç»“æ„  
ä¸‰ã€åˆ†è€Œæ²»ä¹‹ï¼šå¤§å‹é¡¹ç›®ç»“æ„  
å››ã€ç²¾ç›Šæ±‚ç²¾ï¼šå®é™…å¼€å‘ç¯å¢ƒè¦ç‚¹  
äº”ã€å®æˆ˜æ¨¡æ¿ï¼šä¸€ä¸ªå¼€ç®±å³ç”¨çš„ç›®å½•

ä¸€ã€å•åˆ€ç›´å…¥ï¼šå°å‹é¡¹ç›®ç»“æ„ ğŸ¯
----------------

å½“ä½ æœ‰ä¸€ä¸ªç®€å•çš„æƒ³æ³•ï¼Œæ¯”å¦‚åšä¸ªè®¡æ•°å™¨ã€ç•™è¨€æ¿ï¼Œæˆ–è€…åªæƒ³å¿«é€ŸéªŒè¯æŸä¸ªåŠŸèƒ½æ—¶ï¼Œ**â€œä¸€ä¸ªæ–‡ä»¶æå®šä¸€åˆ‡â€**æ˜¯æœ€ä½³é€‰æ‹©ã€‚è¿™èƒ½è®©ä½ ä¸“æ³¨äºé€»è¾‘ï¼Œè€Œéç»“æ„ã€‚

    mini_app/
    â”œâ”€â”€ app.py          # æ‰€æœ‰ä»£ç éƒ½åœ¨è¿™é‡Œï¼šè·¯ç”±ã€é€»è¾‘ã€ç”šè‡³ç®€å•HTML
    â”œâ”€â”€ requirements.txt # é¡¹ç›®ä¾èµ–ï¼ˆflaskï¼‰
    â””â”€â”€ .gitignore

åœ¨`app.py`é‡Œï¼Œä½ å¯èƒ½ä¼šç›´æ¥å†™HTMLå­—ç¬¦ä¸²æˆ–ä½¿ç”¨Jinja2æ¨¡æ¿ã€‚è¿™ç§æ–¹å¼**ä¼˜åŠ¿åœ¨äºç®€å•ç›´è§‚**ï¼Œä½†ç¼ºç‚¹åŒæ ·æ˜æ˜¾ï¼šä¸€æ—¦åŠŸèƒ½å¢å¤šï¼Œæ–‡ä»¶ä¼šè¿…é€Ÿè†¨èƒ€åˆ°éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚æ‰€ä»¥ï¼Œå®ƒ**ä»…é€‚ç”¨äºä¸è¶…è¿‡5ä¸ªè·¯ç”±ã€æ— éœ€å¤æ‚æ¨¡å‹çš„å¾®å‹åº”ç”¨**ã€‚

äºŒã€äº•äº•æœ‰æ¡ï¼šä¸­å‹é¡¹ç›®ç»“æ„ ğŸ—ï¸
-----------------

è¿™æ˜¯Flaskæœ€ç»å…¸ã€æœ€æ¨èçš„é¡¹ç›®ç»“æ„ï¼Œé€‚ç”¨äºå¤§å¤šæ•°Webåº”ç”¨ï¼ˆå¦‚åšå®¢ã€åå°ç®¡ç†ç³»ç»Ÿï¼‰ã€‚å…¶æ ¸å¿ƒæ˜¯**â€œåº”ç”¨å·¥å‚æ¨¡å¼â€ï¼ˆApplication Factoryï¼‰**ï¼Œå°†åˆ›å»ºAppçš„é€»è¾‘ç‹¬ç«‹å‡ºæ¥ï¼Œä½¿é…ç½®ã€æ‰©å±•åˆå§‹åŒ–ã€è“å›¾æ³¨å†Œå˜å¾—æ¸…æ™°ã€‚

    medium_project/
    â”œâ”€â”€ app/                    # åº”ç”¨æ ¸å¿ƒåŒ…
    â”‚   â”œâ”€â”€ __init__.py        # åº”ç”¨å·¥å‚æ‰€åœ¨åœ°
    â”‚   â”œâ”€â”€ models.py          # æ•°æ®æ¨¡å‹å®šä¹‰
    â”‚   â”œâ”€â”€ routes/            # è·¯ç”±æ§åˆ¶å™¨ï¼ˆå¯å­˜æ”¾å¤šä¸ªè§†å›¾æ–‡ä»¶ï¼‰
    â”‚   â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”‚   â”œâ”€â”€ auth.py        # è®¤è¯ç›¸å…³è·¯ç”±
    â”‚   â”‚   â””â”€â”€ main.py        # ä¸»è¦é¡µé¢è·¯ç”±
    â”‚   â”œâ”€â”€ static/            # é™æ€èµ„æºï¼ˆCSS, JS, å›¾ç‰‡ï¼‰
    â”‚   â”‚   â”œâ”€â”€ css/
    â”‚   â”‚   â””â”€â”€ js/
    â”‚   â”œâ”€â”€ templates/         # Jinja2æ¨¡æ¿
    â”‚   â”‚   â”œâ”€â”€ base.html
    â”‚   â”‚   â”œâ”€â”€ index.html
    â”‚   â”‚   â””â”€â”€ auth/
    â”‚   â””â”€â”€ extensions.py      # é›†ä¸­åˆå§‹åŒ–Flaskæ‰©å±•ï¼ˆå¦‚SQLAlchemy, Loginï¼‰
    â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆå¦‚ä½¿ç”¨Flask-Migrateï¼‰
    â”œâ”€â”€ tests/                 # å•å…ƒæµ‹è¯•
    â”œâ”€â”€ config.py              # é…ç½®æ–‡ä»¶ï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰
    â”œâ”€â”€ requirements.txt       # ä¾èµ–åˆ—è¡¨
    â”œâ”€â”€ .env                   # ç¯å¢ƒå˜é‡ï¼ˆåˆ‡å‹¿æäº¤ï¼ï¼‰
    â”œâ”€â”€ .gitignore
    â””â”€â”€ run.py                 # å¯åŠ¨è„šæœ¬ï¼ˆç”¨äºæœ¬åœ°å¼€å‘ï¼‰

å…³é”®æ–‡ä»¶è§£æï¼š

\- `app/__init__.py`ï¼šè¿™æ˜¯å¿ƒè„ã€‚å®ƒå®šä¹‰ä¸€ä¸ª `create_app(config_name)` å‡½æ•°ï¼Œæ ¹æ®ä¼ å…¥çš„é…ç½®åï¼ˆå¦‚â€˜developmentâ€™ï¼‰åˆ›å»ºFlask appå®ä¾‹ï¼Œå¹¶å®Œæˆæ‰©å±•åˆå§‹åŒ–ã€è“å›¾æ³¨å†Œç­‰æ‰€æœ‰è®¾ç½®å·¥ä½œã€‚  
\- `extensions.py`ï¼šå°† `db = SQLAlchemy()` ç­‰æ‰©å±•å¯¹è±¡å®šä¹‰åœ¨æ­¤å¤„ä½†**ä¸åˆå§‹åŒ–**ï¼Œé¿å…å¾ªç¯å¯¼å…¥ã€‚åœ¨å·¥å‚å‡½æ•°ä¸­ç»Ÿä¸€åˆå§‹åŒ–ã€‚  
\- `config.py`ï¼šä½¿ç”¨ç±»æ¥ç»„ç»‡ä¸åŒç¯å¢ƒçš„é…ç½®ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡åˆ‡æ¢ï¼Œä¿è¯å®‰å…¨æ€§ã€‚  
\- `run.py`ï¼šä¸€ä¸ªæç®€çš„å¯åŠ¨å…¥å£ï¼Œé€šå¸¸åªæœ‰ä¸¤è¡Œï¼šä»appåŒ…å¯¼å…¥å·¥å‚å‡½æ•°ï¼Œç„¶å `app = create_app('development')`ã€‚

è¿™ä¸ªç»“æ„**å¹³è¡¡äº†æ¸…æ™°åº¦å’Œå¤æ‚åº¦**ï¼Œæ˜¯å›¢é˜Ÿåä½œå’Œé¡¹ç›®æˆé•¿çš„åšå®åŸºç¡€ã€‚

ä¸‰ã€åˆ†è€Œæ²»ä¹‹ï¼šå¤§å‹é¡¹ç›®ç»“æ„ ğŸš€
----------------

å½“é¡¹ç›®å˜æˆä¸€ä¸ªå¹³å°ï¼ŒåŒ…å«ç”¨æˆ·ã€å•†å“ã€è®¢å•ã€åå°ç­‰å¤šä¸ªç›¸å¯¹ç‹¬ç«‹çš„å­ç³»ç»Ÿæ—¶ï¼Œå°±éœ€è¦**â€œè“å›¾â€ï¼ˆBlueprintï¼‰**è¿›è¡Œæ›´å½»åº•çš„æ¨¡å—åŒ–ã€‚æ¯ä¸ªåŠŸèƒ½æ¨¡å—æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„åŒ…ï¼Œæ‹¥æœ‰è‡ªå·±çš„è·¯ç”±ã€æ¨¡æ¿ã€é™æ€æ–‡ä»¶ç”šè‡³æ¨¡å‹ã€‚

    large_project/
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ __init__.py        # åº”ç”¨å·¥å‚
    â”‚   â”œâ”€â”€ extensions.py
    â”‚   â”œâ”€â”€ common/            # å…¬å…±ç»„ä»¶ï¼ˆå¦‚å·¥å…·å‡½æ•°ã€è¡¨å•ã€è£…é¥°å™¨ï¼‰
    â”‚   â”œâ”€â”€ static/            # å…¨å±€é™æ€èµ„æº
    â”‚   â”œâ”€â”€ templates/         # å…¨å±€æ¨¡æ¿
    â”‚   â”‚   â””â”€â”€ layout.html
    â”‚   â””â”€â”€ modules/           # æ ¸å¿ƒï¼åŠŸèƒ½æ¨¡å—ç›®å½•
    â”‚       â”œâ”€â”€ auth/          # è®¤è¯æ¨¡å—
    â”‚       â”‚   â”œâ”€â”€ __init__.py
    â”‚       â”‚   â”œâ”€â”€ routes.py
    â”‚       â”‚   â”œâ”€â”€ models.py
    â”‚       â”‚   â””â”€â”€ templates/ # æ¨¡å—ä¸“å±æ¨¡æ¿
    â”‚       â”‚       â””â”€â”€ auth/
    â”‚       â”œâ”€â”€ admin/         # åå°ç®¡ç†æ¨¡å—
    â”‚       â””â”€â”€ api/v1/        # APIæ¨¡å—ï¼ˆå¯ç‰ˆæœ¬åŒ–ï¼‰
    â”‚           â”œâ”€â”€ __init__.py
    â”‚           â””â”€â”€ user.py
    â”œâ”€â”€ config/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ development.py
    â”‚   â””â”€â”€ production.py      # é…ç½®ä¹Ÿæ¨¡å—åŒ–
    â”œâ”€â”€ scripts/               # éƒ¨ç½²æˆ–ç®¡ç†è„šæœ¬
    â”œâ”€â”€ requirements/
    â”‚   â”œâ”€â”€ base.txt           # é€šç”¨ä¾èµ–
    â”‚   â”œâ”€â”€ dev.txt            # å¼€å‘ä¾èµ–
    â”‚   â””â”€â”€ prod.txt           # ç”Ÿäº§ä¾èµ–
    â””â”€â”€ run.py

è¿™ç§ç»“æ„çš„ç²¾é«“åœ¨äºï¼š

\- **é«˜å†…èšï¼Œä½è€¦åˆ**ï¼šæ¯ä¸ªæ¨¡å—åªå…³å¿ƒè‡ªå·±çš„åŠŸèƒ½ï¼Œé€šè¿‡è“å›¾æ¥å£ä¸ä¸»åº”ç”¨äº¤äº’ã€‚  
\- **æ˜“äºå›¢é˜Ÿåˆ†å·¥**ï¼šä¸åŒå›¢é˜Ÿå¯ä»¥è´Ÿè´£ä¸åŒçš„æ¨¡å—ï¼Œå¹¶è¡Œå¼€å‘ã€‚  
\- **ä¾¿äºå¤ç”¨å’Œå‰¥ç¦»**ï¼šä¸€ä¸ªæˆç†Ÿçš„æ¨¡å—å¯ä»¥ç›¸å¯¹å®¹æ˜“åœ°ç§»æ¤åˆ°å…¶ä»–é¡¹ç›®ã€‚

åœ¨åº”ç”¨å·¥å‚ä¸­ï¼Œä½ éœ€è¦éå† `modules` ç›®å½•ï¼ŒåŠ¨æ€æˆ–æ˜¾å¼åœ°æ³¨å†Œæ¯ä¸€ä¸ªè“å›¾ã€‚

å››ã€ç²¾ç›Šæ±‚ç²¾ï¼šå®é™…å¼€å‘ç¯å¢ƒè¦ç‚¹ ğŸ› ï¸
-------------------

å¥½çš„ç»“æ„æ˜¯éª¨æ¶ï¼Œè€Œå®é™…å¼€å‘ç¯å¢ƒæ˜¯è¡€è‚‰ã€‚ä»¥ä¸‹å‡ ç‚¹èƒ½è®©ä½ çš„é¡¹ç›®æ›´å¥å£®ï¼š

\- **è™šæ‹Ÿç¯å¢ƒæ˜¯å¿…é¡»çš„**ï¼šæ°¸è¿œä¸è¦æ±¡æŸ“ç³»ç»ŸPythonç¯å¢ƒã€‚ä½¿ç”¨ `venv` æˆ– `pipenv` åˆ›å»ºéš”ç¦»ç¯å¢ƒã€‚  
\- **ä¾èµ–ç®¡ç†**ï¼šä½¿ç”¨ `pip freeze > requirements.txt` ç”Ÿæˆä¾èµ–æ¸…å•ã€‚å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå¯ä»¥åƒä¸Šé¢ä¸€æ ·æ‹†åˆ†ä¸º `base.txt`ã€`dev.txt`ï¼ˆåŒ…å«æµ‹è¯•ã€è°ƒè¯•å·¥å…·ï¼‰ã€`prod.txt`ã€‚  
\- **ç¯å¢ƒå˜é‡ä¸é…ç½®**ï¼šæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚SECRET\_KEY, æ•°æ®åº“å¯†ç ï¼‰å¿…é¡»é€šè¿‡ `.env` æ–‡ä»¶åŠ è½½ï¼ˆä½¿ç”¨ `python-dotenv`ï¼‰ï¼Œå¹¶å°† `.env` åŠ å…¥ `.gitignore`ã€‚åœ¨ `config.py` ä¸­é€šè¿‡ `os.getenv()` è¯»å–ã€‚  
\- **å¯åŠ¨ä¸éƒ¨ç½²**ï¼šå¼€å‘æ—¶ç”¨ `flask run` æˆ– `python run.py`ã€‚ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ä½¿ç”¨ `Gunicorn` æˆ– `uWSGI` æ­é… `Nginx`ã€‚é¡¹ç›®æ ¹ç›®å½•åº”åŒ…å« `Dockerfile` å’Œ `docker-compose.yml`ï¼ˆå¦‚éœ€å®¹å™¨åŒ–ï¼‰ã€‚  
\- **æ—¥å¿—**ï¼šåœ¨åº”ç”¨å·¥å‚ä¸­é…ç½®å¥½æ—¥å¿—ï¼ŒåŒºåˆ†ä¸åŒçº§åˆ«å’Œè¾“å‡ºæ–‡ä»¶ï¼Œä¾¿äºçº¿ä¸Šæ’æŸ¥é—®é¢˜ã€‚

äº”ã€å®æˆ˜æ¨¡æ¿ï¼šä¸€ä¸ªå¼€ç®±å³ç”¨çš„ç›®å½• ğŸ
-------------------

è¿™é‡Œæä¾›ä¸€ä¸ªåŸºäºä¸­å‹é¡¹ç›®ç»“æ„çš„ã€å¯ç›´æ¥å¤åˆ¶ä½¿ç”¨çš„æ¨¡æ¿ï¼ŒåŒ…å«åŸºç¡€é…ç½®å’Œæ³¨é‡Šï¼š

    # æ–‡ä»¶ï¼šconfig.py
    import os
    from dotenv import load_dotenv
    
    load_dotenv()  # åŠ è½½.envæ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡
    
    class Config:
        SECRET_KEY = os.getenv('SECRET_KEY', 'a-default-dev-key')
        SQLALCHEMY_TRACK_MODIFICATIONS = False
    
    class DevelopmentConfig(Config):
        DEBUG = True
        SQLALCHEMY_DATABASE_URI = os.getenv('DEV_DATABASE_URL', 'sqlite:///dev.db')
    
    class ProductionConfig(Config):
        SQLALCHEMY_DATABASE_URI = os.getenv('DATABASE_URL')
        # å…¶ä»–ç”Ÿäº§ç¯å¢ƒé…ç½®...
    
    config = {
        'development': DevelopmentConfig,
        'production': ProductionConfig,
        'default': DevelopmentConfig
    }

    # æ–‡ä»¶ï¼šapp/__init__.py
    from flask import Flask
    from .extensions import db, login_manager
    from .routes.main import main_bp
    from .routes.auth import auth_bp
    import os
    
    def create_app(config_name=None):
        app = Flask(__name__)
        
        # åŠ è½½é…ç½®
        if config_name is None:
            config_name = os.getenv('FLASK_CONFIG', 'default')
        from config import config
        app.config.from_object(config[config_name])
        
        # åˆå§‹åŒ–æ‰©å±•
        db.init_app(app)
        login_manager.init_app(app)
        
        # æ³¨å†Œè“å›¾
        app.register_blueprint(main_bp)
        app.register_blueprint(auth_bp, url_prefix='/auth')
        
        return app

    # æ–‡ä»¶ï¼šapp/extensions.py
    from flask_sqlalchemy import SQLAlchemy
    from flask_login import LoginManager
    
    # å…ˆåˆ›å»ºæ‰©å±•å¯¹è±¡ï¼Œä½†ä¸ç»‘å®šapp
    db = SQLAlchemy()
    login_manager = LoginManager()
    login_manager.login_view = 'auth.login'

ä½ å¯ä»¥ç›´æ¥å¤åˆ¶è¿™ä¸ªæ¡†æ¶ï¼Œç„¶åå¡«å……ä½ çš„æ¨¡å‹ã€è§†å›¾å’Œä¸šåŠ¡é€»è¾‘ã€‚

* * *

å–œæ¬¢æœ¬æ–‡ï¼Ÿç‚¹èµğŸ‘æ”¶è—â­ï¼Œå…³æ³¨æˆ‘ï¼Œä¸€èµ·å­¦ä¹ æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†ï¼Œå®Œå–„ä½ çš„æŠ€èƒ½æ ‘ï¼