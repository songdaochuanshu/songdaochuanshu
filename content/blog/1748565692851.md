---
layout: post
title: 'ã€æ‹¥æŠ±é¸¿è’™ã€‘Flutter+Cursorè½»æ¾æ‰“é€ HarmonyOSåº”ç”¨ï¼ˆäºŒï¼‰'
date: "2025-05-30T00:41:32Z"
---
ã€æ‹¥æŠ±é¸¿è’™ã€‘Flutter+Cursorè½»æ¾æ‰“é€ HarmonyOSåº”ç”¨ï¼ˆäºŒï¼‰
======================================

![ã€æ‹¥æŠ±é¸¿è’™ã€‘Flutter+Cursorè½»æ¾æ‰“é€ HarmonyOSåº”ç”¨ï¼ˆäºŒï¼‰](https://img2024.cnblogs.com/blog/3652266/202505/3652266-20250529100849751-1408626795.png) è¿™æ˜¯ã€Flutter+Cursorè½»æ¾æ‰“é€ HarmonyOSåº”ç”¨ã€‘ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚å‰ä¸€ç¯‡å·²ç»ä»‹ç»äº†å¦‚ä½•æ­å»ºFlutteré¸¿è’™åº”ç”¨å¼€å‘ç¯å¢ƒï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å¦‚ä½•å€ŸåŠ©Cursorè®©é¸¿è’™Appå¼€å‘æ›´å¿«æ›´ç®€å•å§~

è¿™æ˜¯ã€Flutter+Cursorè½»æ¾æ‰“é€ HarmonyOSåº”ç”¨ã€‘ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚å‰ä¸€ç¯‡å·²ç»ä»‹ç»äº†å¦‚ä½•æ­å»ºFlutteré¸¿è’™åº”ç”¨å¼€å‘ç¯å¢ƒï¼Œå°±è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å¦‚ä½•å€ŸåŠ©Cursorè®©é¸¿è’™Appå¼€å‘æ›´å¿«æ›´ç®€å•å§~

ä¸€ã€ä½¿ç”¨CursoråŠ é€ŸUIå¼€å‘
----------------

### 1.1 Cursorç®€ä»‹

Cursoræ˜¯ä¸€æ¬¾é›†æˆäº†AIèƒ½åŠ›çš„ç°ä»£åŒ–ä»£ç ç¼–è¾‘å™¨ï¼Œç‰¹åˆ«é€‚åˆFlutterå¼€å‘ï¼Œå®ƒèƒ½ï¼š

*   é€šè¿‡è‡ªç„¶è¯­è¨€ç”ŸæˆUIä»£ç 
*   è‡ªåŠ¨è¡¥å…¨å¸¸ç”¨ç»„ä»¶
*   æä¾›è®¾è®¡ç³»ç»Ÿå»ºè®®
*   å¸®åŠ©ç”Ÿæˆæ³¨é‡Šå’Œæ–‡æ¡£

### 1.2 å®‰è£…é…ç½®

1.  ä¸‹è½½å®‰è£…Cursorï¼ˆ[å®˜ç½‘é“¾æ¥](https://www.cursor.so)ï¼‰
2.  åœ¨è®¾ç½®ä¸­å¯ç”¨Flutteræ’ä»¶
3.  åœ¨Cursor Settingä¸­é…ç½®Modelsä¸­é…ç½®ä½ å–œæ¬¢çš„å¤§æ¨¡å‹ï¼ŒCursorå‡ ä¹æ¶µç›–äº†æ‰€æœ‰ä½ æ‰€çŸ¥é“çš„å¤§æ¨¡å‹ï¼Œåº”æœ‰å°½æœ‰ã€‚Proç”¨æˆ·å¯ä»¥ä»»æ„é…ç½®å¤šä¸ªæ¨¡å‹ã€‚

![5001](https://img2024.cnblogs.com/blog/3652266/202505/3652266-20250529100616556-1826544359.png)

4.  å¼€å¯Agentæ¨¡å¼ï¼Œå†è®¾ç½®ä½ éœ€è¦çš„ä»£ç ç”Ÿæˆæ¨¡å‹æˆ–Autoï¼Œå°±å¯ä»¥æ„‰å¿«åœ°ç”Ÿæˆä½ æƒ³è¦çš„ä»£ç å•¦~

### 1.3 å®æˆ˜ï¼šç”Ÿæˆé¸¿è’™é£æ ¼UI

**ç¤ºä¾‹1**ï¼šç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆé¸¿è’™é£æ ¼çš„é¦–é¡µ

åœ¨Cursorä¸­ä½¿ç”¨å¿«æ·é”®`Cmd+I`ï¼Œè¾“å…¥æç¤ºè¯,Cursorå¾ˆå¿«å°±å¯ä»¥ç”Ÿæˆä»£ç ï¼Œå¹¶ç»™å‡ºæ³¨é‡Šå’Œè¯´æ˜ã€‚

![5002](https://img2024.cnblogs.com/blog/3652266/202505/3652266-20250529100631257-2087096224.png)

Cursorç”Ÿæˆçš„ä»£ç ç¤ºä¾‹ï¼š

    import 'package:flutter/material.dart';
    
    class HomePage extends StatelessWidget {
      const HomePage({super.key});
    
      @override
      Widget build(BuildContext context) {
        return Scaffold(
          body: Container(
            decoration: const BoxDecoration(
              gradient: LinearGradient(
                begin: Alignment.topCenter,
                end: Alignment.bottomCenter,
                colors: [
                  Color(0xFF007DFF), // HarmonyOS è“è‰²
                  Color(0xFF0057B8), // æ·±è“è‰²æ¸å˜
                ],
              ),
            ),
            child: SafeArea(
              child: Column(
                children: [
                  // é¡¶éƒ¨AppBar
                  Padding(
                    padding: const EdgeInsets.all(16.0),
                    child: Row(
                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
                      children: [
                        const Text(
                          'é¦–é¡µ',
                          style: TextStyle(
                            color: Colors.white,
                            fontSize: 24,
                            fontWeight: FontWeight.bold,
                          ),
                        ),
                        IconButton(
                          icon: const Icon(Icons.notifications_outlined, color: Colors.white),
                          onPressed: () {},
                        ),
                      ],
                    ),
                  ),
                  
                  // åŠŸèƒ½å…¥å£åŒºåŸŸ
                  Expanded(
                    child: Center(
                      child: Row(
                        mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                        children: [
                          _buildFeatureCircle(
                            icon: Icons.phone_android,
                            label: 'è®¾å¤‡',
                            onTap: () {},
                          ),
                          _buildFeatureCircle(
                            icon: Icons.folder,
                            label: 'æ–‡ä»¶',
                            onTap: () {},
                          ),
                          _buildFeatureCircle(
                            icon: Icons.settings,
                            label: 'è®¾ç½®',
                            onTap: () {},
                          ),
                        ],
                      ),
                    ),
                  ),
                ],
              ),
            ),
          ),
          bottomNavigationBar: BottomNavigationBar(
            currentIndex: 0,
            selectedItemColor: const Color(0xFF007DFF),
            unselectedItemColor: Colors.grey,
            type: BottomNavigationBarType.fixed,
            items: const [
              BottomNavigationBarItem(
                icon: Icon(Icons.home),
                label: 'é¦–é¡µ',
              ),
              BottomNavigationBarItem(
                icon: Icon(Icons.explore),
                label: 'å‘ç°',
              ),
              BottomNavigationBarItem(
                icon: Icon(Icons.person),
                label: 'æˆ‘çš„',
              ),
            ],
          ),
        );
      }
    
      Widget _buildFeatureCircle({
        required IconData icon,
        required String label,
        required VoidCallback onTap,
      }) {
        return GestureDetector(
          onTap: onTap,
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Container(
                width: 80,
                height: 80,
                decoration: BoxDecoration(
                  color: Colors.white,
                  shape: BoxShape.circle,
                  boxShadow: [
                    BoxShadow(
                      color: Colors.black.withOpacity(0.1),
                      blurRadius: 10,
                      offset: const Offset(0, 4),
                    ),
                  ],
                ),
                child: Icon(
                  icon,
                  size: 32,
                  color: const Color(0xFF007DFF),
                ),
              ),
              const SizedBox(height: 8),
              Text(
                label,
                style: const TextStyle(
                  color: Colors.white,
                  fontSize: 16,
                ),
              ),
            ],
          ),
        );
      }
    }
    

è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š

![5003](https://img2024.cnblogs.com/blog/3652266/202505/3652266-20250529100716719-713506155.png)

æ²¡æœ‰æ”¹ä¸€è¡Œä»£ç ï¼Œæ˜¯ä¸æ˜¯å¾ˆå®Œæ•´ï¼Ÿå¾ˆæƒŠè‰³ï¼Ÿï¼  
è¿™å°±æ˜¯Cursorçš„å¼ºå¤§ä¹‹å¤„ã€‚

### 1.4 Cursorä½¿ç”¨æŠ€å·§

1.  **ç²¾å‡†æç¤º**ï¼šåœ¨æè¿°éœ€æ±‚æ—¶å°½é‡å…·ä½“ï¼ŒåŒ…æ‹¬å¸ƒå±€ã€æ ·å¼ã€äº¤äº’ç­‰ç»†èŠ‚
2.  **æ¸è¿›å¼ç”Ÿæˆ**ï¼šå…ˆç”Ÿæˆå¤§ä½“æ¡†æ¶ï¼Œå†é€æ­¥ç»†åŒ–å„éƒ¨åˆ†
3.  **ä»£ç ä¼˜åŒ–**ï¼šå¯¹ç”Ÿæˆçš„ä»£ç ä½¿ç”¨"Optimize this"å‘½ä»¤è¿›è¡Œæ€§èƒ½ä¼˜åŒ–
4.  **é—®é¢˜æ’æŸ¥**ï¼šé‡åˆ°é”™è¯¯å¯ä»¥ç›´æ¥å‘Cursoræè¿°é—®é¢˜ï¼Œè·å–è§£å†³æ–¹æ¡ˆ

äºŒã€å®æˆ˜ï¼šå®Œæ•´é¸¿è’™åº”ç”¨å¼€å‘æµç¨‹
---------------

### 2.1 é¡¹ç›®åˆå§‹åŒ–

    fvm flutter create --platforms=ohos --project-name demo .
    

### 2.2 é›†æˆé¸¿è’™ç‰¹æ€§

åœ¨`lib/harmony_adapter.dart`ä¸­æ·»åŠ é¸¿è’™å¹³å°ç‰¹å®šä»£ç ï¼š

    import 'package:flutter/services.dart';
    
    class HarmonyBridge {
      static const _channel = MethodChannel('com.example/harmony');
    
      // è°ƒç”¨é¸¿è’™çš„åŸç”Ÿèƒ½åŠ›
      static Future<void> triggerHarmonyFeature(String feature) async {
        try {
          await _channel.invokeMethod('triggerFeature', {'name': feature});
        } on PlatformException catch (e) {
          print("è°ƒç”¨é¸¿è’™åŠŸèƒ½å¤±è´¥: ${e.message}");
        }
      }
    }
    

### 2.3 ä½¿ç”¨Cursorç”Ÿæˆæ–°é—»åˆ—è¡¨é¡µ

æç¤ºè¯ï¼š

    åˆ›å»ºä¸€ä¸ªæ–°é—»åˆ—è¡¨é¡µé¢ï¼Œè¦æ±‚ï¼š
    - ä½¿ç”¨ListView.builder
    - æ¯æ¡æ–°é—»åŒ…å«å›¾ç‰‡ã€æ ‡é¢˜ã€ç®€çŸ­æè¿°å’Œå‘å¸ƒæ—¶é—´
    - å›¾ç‰‡åœ¨å·¦ï¼Œæ–‡å­—å†…å®¹åœ¨å³
    - é¸¿è’™é£æ ¼çš„è®¾è®¡ï¼Œå¸¦æœ‰è½»å¾®çš„åœ†è§’å’Œé˜´å½±
    - å®ç°ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½
    

Cursorä¸ä»…ç”Ÿæˆäº†æˆ‘æƒ³è¦çš„ä»£ç ï¼Œè¿˜å°†è¯¥é¡µé¢æ·»åŠ åˆ°å¯¼èˆªæ ä¸­ï¼Œå¹¶å¼•å¯¼è¿›è¡Œ`flutter pub get`ã€‚  
å…¨ç¨‹åªéœ€è¦Cmd+Enterå³å¯ï¼Œæ•´ä¸ªè¿‡ç¨‹éå¸¸ä¸æ»‘ï¼

ç”Ÿæˆçš„ä»£ç ç»è¿‡è°ƒæ•´åï¼š

    import 'package:flutter/material.dart';
    import '../models/news_item.dart';
    import 'package:intl/intl.dart';
    
    class NewsPage extends StatefulWidget {
      const NewsPage({super.key});
    
      @override
      State<NewsPage> createState() => _NewsPageState();
    }
    
    class _NewsPageState extends State<NewsPage> {
      List<NewsItem> _newsItems = [];
      bool _isLoading = false;
    
      @override
      void initState() {
        super.initState();
        _loadNews();
      }
    
      Future<void> _loadNews() async {
        setState(() {
          _isLoading = true;
        });
    
        // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚å»¶è¿Ÿ
        await Future.delayed(const Duration(seconds: 1));
        
        setState(() {
          _newsItems = mockNewsItems;
          _isLoading = false;
        });
      }
    
      String _formatTime(DateTime time) {
        final now = DateTime.now();
        final difference = now.difference(time);
    
        if (difference.inDays > 0) {
          return '${difference.inDays}å¤©å‰';
        } else if (difference.inHours > 0) {
          return '${difference.inHours}å°æ—¶å‰';
        } else if (difference.inMinutes > 0) {
          return '${difference.inMinutes}åˆ†é’Ÿå‰';
        } else {
          return 'åˆšåˆš';
        }
      }
    
      @override
      Widget build(BuildContext context) {
        return Scaffold(
          backgroundColor: Colors.grey[100],
          appBar: AppBar(
            title: const Text(
              'æ–°é—»èµ„è®¯',
              style: TextStyle(
                color: Colors.white,
                fontWeight: FontWeight.bold,
              ),
            ),
            backgroundColor: const Color(0xFF007DFF),
          ),
          body: RefreshIndicator(
            onRefresh: _loadNews,
            child: _isLoading
                ? const Center(child: CircularProgressIndicator())
                : ListView.builder(
                    padding: const EdgeInsets.all(16),
                    itemCount: _newsItems.length,
                    itemBuilder: (context, index) {
                      final news = _newsItems[index];
                      return Card(
                        margin: const EdgeInsets.only(bottom: 16),
                        elevation: 2,
                        shape: RoundedRectangleBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                        child: InkWell(
                          onTap: () {
                            // TODO: å¤„ç†æ–°é—»ç‚¹å‡»äº‹ä»¶
                          },
                          borderRadius: BorderRadius.circular(12),
                          child: Padding(
                            padding: const EdgeInsets.all(12),
                            child: Row(
                              crossAxisAlignment: CrossAxisAlignment.start,
                              children: [
                                ClipRRect(
                                  borderRadius: BorderRadius.circular(8),
                                  child: Image.network(
                                    news.imageUrl,
                                    width: 100,
                                    height: 100,
                                    fit: BoxFit.cover,
                                  ),
                                ),
                                const SizedBox(width: 12),
                                Expanded(
                                  child: Column(
                                    crossAxisAlignment: CrossAxisAlignment.start,
                                    children: [
                                      Text(
                                        news.title,
                                        style: const TextStyle(
                                          fontSize: 16,
                                          fontWeight: FontWeight.bold,
                                          color: Color(0xFF333333),
                                        ),
                                        maxLines: 2,
                                        overflow: TextOverflow.ellipsis,
                                      ),
                                      const SizedBox(height: 8),
                                      Text(
                                        news.description,
                                        style: TextStyle(
                                          fontSize: 14,
                                          color: Colors.grey[600],
                                        ),
                                        maxLines: 2,
                                        overflow: TextOverflow.ellipsis,
                                      ),
                                      const SizedBox(height: 8),
                                      Text(
                                        _formatTime(news.publishTime),
                                        style: TextStyle(
                                          fontSize: 12,
                                          color: Colors.grey[500],
                                        ),
                                      ),
                                    ],
                                  ),
                                ),
                              ],
                            ),
                          ),
                        ),
                      );
                    },
                  ),
          ),
        );
      }
    } 
    

ç”Ÿæˆé¡µé¢æ•ˆæœï¼š

![5004](https://img2024.cnblogs.com/blog/3652266/202505/3652266-20250529100654812-1320031150.png)

### 2.4 æ„å»ºä¸å‘å¸ƒ

æ„å»ºé¸¿è’™åº”ç”¨åŒ…ï¼š

    flutter build hap
    

ç”Ÿæˆçš„HAPåŒ…ä½äº`build/harmony/outputs`ç›®å½•ï¼Œå¯é€šè¿‡DevEco Studioè¿›è¡Œè¿›ä¸€æ­¥è°ƒè¯•å’Œå‘å¸ƒã€‚

ä¸‰ã€å¼€å‘å¿ƒå¾—ä¸æœ€ä½³å®è·µ
-----------

### 3.1 æ€§èƒ½ä¼˜åŒ–æŠ€å·§

1.  **æ¸²æŸ“ä¼˜åŒ–**ï¼š
    
    *   å¯¹é•¿åˆ—è¡¨ä½¿ç”¨`ListView.builder`
    *   å¤æ‚UIè€ƒè™‘ä½¿ç”¨`RepaintBoundary`éš”ç¦»é‡ç»˜åŒºåŸŸ
2.  **å†…å­˜ç®¡ç†**ï¼š
    
        // å›¾ç‰‡åŠ è½½ä½¿ç”¨ç¼“å­˜
        CachedNetworkImage(
          imageUrl: 'https://example.com/image.jpg',
          placeholder: (context, url) => CircularProgressIndicator(),
          errorWidget: (context, url, error) => Icon(Icons.error),
        );
        
    
3.  **å¹³å°ç‰¹æ€§åˆ©ç”¨**ï¼š
    
        // æ£€æµ‹é¸¿è’™å¹³å°
        if (Platform.isHarmony) {
          // ä½¿ç”¨é¸¿è’™ç‰¹æœ‰API
        }
        
    

### 3.2 Cursorä½¿ç”¨ç»éªŒ

1.  **æœ‰æ•ˆæ²Ÿé€š**ï¼šç»™AIæä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¦‚ï¼š"æˆ‘ç°åœ¨æ­£åœ¨å¼€å‘ä¸€ä¸ªé¸¿è’™ç”µå•†åº”ç”¨ï¼Œéœ€è¦..."
2.  **è¿­ä»£æ”¹è¿›**ï¼šå¯¹ä¸æ»¡æ„çš„ç”Ÿæˆç»“æœä½¿ç”¨"Revise this to..."ç»§ç»­ä¼˜åŒ–
3.  **å­¦ä¹ æ¨¡å¼**ï¼šé€šè¿‡"Explain this code"å‘½ä»¤å­¦ä¹ ç”Ÿæˆçš„ä»£ç é€»è¾‘

### 3.3 å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

**é—®é¢˜1**ï¼šFlutteråœ¨é¸¿è’™ä¸Šå‡ºç°æ¸²æŸ“å¼‚å¸¸

*   è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†é¸¿è’™ä¸æ”¯æŒçš„Skiaç‰¹æ€§ï¼Œé™çº§åˆ°ç¨³å®šç‰ˆFlutter

**é—®é¢˜2**ï¼šåŸç”ŸåŠŸèƒ½è°ƒç”¨å¤±è´¥

*   è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿åœ¨`config.json`ä¸­æ­£ç¡®å£°æ˜äº†æ‰€éœ€æƒé™

**é—®é¢˜3**ï¼šCursorç”Ÿæˆçš„ä»£ç ä¸ç¬¦åˆé¢„æœŸ

*   è§£å†³æ–¹æ¡ˆï¼šç»†åŒ–éœ€æ±‚æè¿°ï¼Œåˆ†æ¨¡å—ç”Ÿæˆè€Œéæ•´ä¸ªé¡µé¢

æ€»ç»“
--

é€šè¿‡Flutter+Cursorçš„ç»„åˆï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿå¼€å‘å‡ºé«˜è´¨é‡çš„HarmonyOSåº”ç”¨ã€‚Flutteræä¾›äº†è·¨å¹³å°çš„ç»Ÿä¸€å¼€å‘ä½“éªŒï¼Œè€ŒCursoråœ¨ç”Ÿæˆç®€å•UIä»£ç æ–¹é¢æ•ˆæœéå¸¸æ˜¾è‘—ï¼Œå¤§å¤§æå‡äº†UIå¼€å‘æ•ˆç‡ã€‚

å¦‚æœä½ å¯¹è¿™ç§å¼€å‘æ¨¡å¼æœ‰å…´è¶£ï¼Œèµ¶å¿«å°è¯•ä¸€ä¸‹å§~

æˆ‘æ˜¯éƒ‘çŸ¥é±¼ğŸ³ï¼Œæ¬¢è¿å¤§å®¶è®¨è®ºä¸æŒ‡æ•™ã€‚  
å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿè¯·ç‚¹èµğŸ‘ğŸ»æ”¶è—â­ï¸å…³æ³¨ğŸ”æˆ‘å§~~