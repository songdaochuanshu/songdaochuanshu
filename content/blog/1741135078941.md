---
layout: post
title: 'redux vs redux-toolkit åŠæºç å®ç°'
date: "2025-03-05T00:37:58Z"
---
redux vs redux-toolkit åŠæºç å®ç°
============================

> æˆ‘ä»¬æ˜¯[è¢‹é¼ äº‘æ•°æ ˆ UED å›¢é˜Ÿ](http://ued.dtstack.cn/)ï¼Œè‡´åŠ›äºæ‰“é€ ä¼˜ç§€çš„ä¸€ç«™å¼æ•°æ®ä¸­å°äº§å“ã€‚æˆ‘ä»¬å§‹ç»ˆä¿æŒå·¥åŒ ç²¾ç¥ï¼Œæ¢ç´¢å‰ç«¯é“è·¯ï¼Œä¸ºç¤¾åŒºç§¯ç´¯å¹¶ä¼ æ’­ç»éªŒä»·å€¼ã€‚

> æœ¬æ–‡ä½œè€…ï¼šéœœåº

å‰è¨€
--

ä¸ºä½•è®²è¿™ä¸ªå†…å®¹ï¼Ÿä»¥ä¸ºåç»­å¤§å®¶ä¼šä½¿ç”¨ redux-toolkitï¼Œèµ„äº§ä¸Šå‘¨åšäº† redux-toolkit çš„å‡çº§é¡ºä¾¿äº†è§£äº†ç›¸å…³å†…å®¹ï¼Œäº§å‡ºäº†è¿™ç¯‡æ–‡ç« ã€‚

å¦å¤–è¡¥é½ä¸€ä¸‹åœ¨ React æ•°æ®æµè¿™ä¸ªçŸ¥è¯†æ¿å—çš„å®Œæ•´æ€§ã€‚

*   [React ä¸­çš„æ•°æ®æµç®¡ç†](https://juejin.cn/post/7463879890572886066)
*   [è®¤è¯†ä¸€ä¸‹ Mobx](https://juejin.cn/post/7179794903583424568)

åœ¨ä¹‹å‰çš„å‘¨åˆ†äº«ä¸­å·²ç»åˆ†äº«è¿‡äº†React ä¸­çš„æ•°æ®æµï¼Œreact-redux çš„ä¸€äº›å®ç°ï¼Œredux ä¸­ä¸­é—´ä»¶çš„å®ç°ï¼Œä»¥åŠ Mobx çš„ä½¿ç”¨ä»¥åŠä¸ç‰ˆå®ç°ã€‚

å¯¹äº Redux æœ¬èº«å°šæœªæ¶‰åŠï¼Œè¶ç€ä½¿ç”¨ redux-toolkit çš„æœºä¼šä¸€èµ·äº†è§£ä¸€ä¸‹ Redux çš„å®ç°ã€‚

Redux-Toolkit
-------------

Redux-Toolkit æ˜¯ åŸºäº Redux çš„äºŒæ¬¡å°è£…ï¼Œå¼€ç®±å³ç”¨çš„ Redux å·¥å…·ï¼Œæ¯” Redux æ›´åŠ ç®€å•æ–¹ä¾¿ã€‚

> ğŸš§ Why to use Redux-Toolkit?
> 
> *   "Configuring a Redux store is too complicated"
> *   "I have to add a lot of packages to get Redux to do anything useful"
> *   "Redux requires too much boilerplate code"

### Toolkit ä½¿ç”¨

Redux è¯¥æœ‰çš„æ¦‚å¿µï¼ŒToolkit å…¶å®éƒ½æ‹¥æœ‰çš„ï¼Œåªæ˜¯ä»–ä»¬ä½¿ç”¨çš„æ–¹å¼ä¸åŒï¼Œä¾‹å¦‚ reducer / actions ç­‰ç­‰ï¼Œåœ¨ Toolkit ä¸­éƒ½æ˜¯éšå¤„å¯è§çš„ã€‚

### configureStore

åˆ›å»º storeï¼Œä»£ç å†…éƒ¨è¿˜æ˜¯è°ƒç”¨çš„ Redux çš„ createStore æ–¹æ³•

    const store = configureStore({
        reducer: {
            counter: counterReducer,
            user: userReducer,
        },
    });
    

### createAction + createReducer

*   createAction  
    åˆ›å»º Redux ä¸­çš„ action åˆ›å»ºå‡½æ•°

    function createAction(type, prepareAction?)
    

redux ä¸­ action çš„åˆ›å»ºä»¥åŠä½¿ç”¨

    const updateName = (name: string) => ({ type: "user/UPDATE_NAME", name });
    const updateAge = (age: number) => ({ type: "user/UPDATE_AGE", age });
    

Toolkit ä¸­ action çš„åˆ›å»ºä»¥åŠä½¿ç”¨

    // ç¬¬ä¸€ç§
    const updateName = createAction<{ name: string }>("user/UPDATE_NAME");
    const updateAge = createAction<{ age: number }>("user/UPDATE_AGE");
    
    updateName();  // { type: 'user/UPDATE_NAME', payload: undefined }
    updateName({ name: "FBB" }); // { type: 'user/UPDATE_NAME', payload: { name: 'FBB' } }
    updateAge({ age: 18 });
    
    // ç¬¬äºŒç§
    const updateName = createAction("user/UPDATE_NAME", (name: string) => ({
      payload: {
        name,
      },
    }));
    const updateAge = createAction("user/UPDATE_AGE", (age: number) => ({
      payload: {
        age,
      },
    }));
    
    updateName("FBB");
    updateAge(18);
    

*   createReducer  
    åˆ›å»º Redux reducer çš„å‡½æ•°

:::info  
ğŸ’¡ createReducer ä½¿ç”¨ Immer åº“ï¼Œå¯ä»¥åœ¨ reducer ä¸­ç›´æ¥å¯¹çŠ¶æ€è¿›è¡Œä¿®æ”¹ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨ç¼–å†™ä¸å¯å˜æ€§çš„é€»è¾‘ Â   
:::

Redux ä¸­ reducer çš„åˆ›å»º

    export const userReducer = (
      state = initialUserState,
      action: { type: string; [propName: string]: any }
    ) => {
      switch (action.type) {
        case "user/UPDATE_NAME":
          return { ...state, name: action.name };
        case "user/UPDATE_AGE":
          return { ...state, age: action.age };
        default:
          return state;
      }
    };
    

Toolkit ä¸­ reducer çš„åˆ›å»º

    export const userReducer = createReducer(initialUserState, (builder) => {
      builder
        .addCase(updateAge, (state, action) => {
          state.age = action.payload.age;
        })
        .addCase(updateName, (state, action) => {
          state.name = action.payload.name;
        });
    });
    

toolkit æä¾›çš„ createAction å’Œ createReducer èƒ½å¤Ÿå¸®æˆ‘ä»¬ç®€åŒ– Redux ä¸­ä¸€äº›æ¨¡ç‰ˆè¯­æ³•ï¼Œä½†æ˜¯æ•´ä½“çš„ä½¿ç”¨è¿˜æ˜¯å·®ä¸å¤šçš„ï¼Œæˆ‘ä»¬ä¾æ—§éœ€è¦ action æ–‡ä»¶å’Œ reducer æ–‡ä»¶ï¼Œåšäº†æ”¹å–„ä½†æ˜¯ä¸å¤šã€‚

[redux demo](https://github.com/LuckyFBB/Front-End-Examples/blob/main/mini-redux/example/example.ts) Â  [toolkit createReducer demo](https://github.com/LuckyFBB/Front-End-Examples/blob/main/mini-redux-toolkit/examples/example_reducer/example.ts)

### createSlice

æ¥å—åˆå§‹çŠ¶æ€ã€reducer å‡½æ•°å¯¹è±¡å’Œ slice name çš„å‡½æ•°ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆä¸ reducer å’Œ state å¯¹åº”çš„åŠ¨ä½œåˆ›å»ºè€…å’ŒåŠ¨ä½œç±»å‹

    const userSlice = createSlice({
      name: "user",
      initialState: {
        age: 22,
        name: "shuangxu",
      },
      reducers: {
        updateName: (state, action: PayloadAction<string>) => {
          state.name = action.payload;
        },
        updateAge: (state, action: PayloadAction<number>) => {
          state.age = action.payload;
        },
      },
    })
    

ä½¿ç”¨ createSlice åˆ›å»ºä¸€ä¸ªåˆ†ç‰‡ï¼Œæ¯ä¸€ä¸ªåˆ†ç‰‡ä»£è¡¨æŸä¸€ä¸ªä¸šåŠ¡çš„æ•°æ®çŠ¶æ€å¤„ç†ã€‚åœ¨å…¶ä¸­å¯ä»¥å®Œæˆ action å’Œ reducer çš„åˆ›å»ºã€‚

    export const userSliceName = userSlice.name;
    export const { updateAge, updateName } = userSlice.actions;
    export const userReducer = userSlice.reducer;
    
    const store = configureStore({
      reducer: {
        [counterSliceName]: counterReducer,
        [userSliceName]: userReducer,
      },
    });
    

[toolkit slice demo](https://github.com/LuckyFBB/Front-End-Examples/blob/main/mini-redux-toolkit/examples/example_slice/example.ts)

åœ¨ Toolkit ä¸­ç›´æ¥ä½¿ç”¨ createSlice æ›´åŠ æ–¹ä¾¿ï¼Œèƒ½å¤Ÿç›´æ¥å¯¼å‡º reducer å’Œ actionï¼Œç›´æ¥åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­èƒ½å¤Ÿè·å–åˆ°å¯¹åº”å†…å®¹ä¸åœ¨éœ€è¦å¤šå¤„å®šä¹‰ã€‚

Redux æºç å®ç°
----------

### ç®€å•çš„çŠ¶æ€ç®¡ç†

æ‰€è°“çš„çŠ¶æ€å…¶å®å°±æ˜¯æ•°æ®ï¼Œä¾‹å¦‚ç”¨æˆ·ä¸­çš„ name

    let state = {
      name: "shuangxu"
    }
    
    // ä½¿ç”¨çŠ¶æ€
    console.log(state.name)
    
    // æ›´æ”¹çŠ¶æ€
    state.name = "FBB"
    

ä¸Šè¿°ä»£ç ä¸­å­˜åœ¨é—®é¢˜ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº†çŠ¶æ€ä¹‹åæ— æ³•é€šçŸ¥åˆ°ä½¿ç”¨çŠ¶æ€çš„å‡½æ•°ï¼Œéœ€è¦å¼•å…¥å‘å¸ƒè®¢é˜…æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜

    const state = {
      name: "shuangxu",
    };
    const listeners = [];
    
    const subscribe = (listener) => {
      listeners.push(listener);
    };
    
    const changeName = (name) => {
      state.name = name;
      listeners.forEach((listener) => {
        listener?.();
      });
    };
    
    subscribe(() => console.log(state.name));
    
    changeName("FBB");
    changeName("LuckyFBB");
    

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†æ›´æ”¹å˜é‡èƒ½å¤Ÿé€šçŸ¥åˆ°å¯¹åº”çš„ç›‘å¬å‡½æ•°ã€‚ä½†æ˜¯ä¸Šè¿°ä»£ç å¹¶ä¸é€šç”¨ï¼Œéœ€è¦å°†å…¬å…±æ–¹æ³•å°è£…èµ·æ¥ã€‚

    const createStore = (initialState) => {
      let state = initialState;
      let listeners = [];
    
      const subscribe = (listener) => {
        listeners.push(listener);
        return () => {
          listeners = listeners.filter((fn) => fn !== listener);
        };
      };
    
      const changeState = (newState) => {
        state = { ...state, ...newState };
        listeners.forEach((listener) => {
          listener?.();
        });
      };
    
      const getState = () => state;
    
      return {
        subscribe,
        changeState,
        getState,
      };
    };
    
    // example
    const { getState, changeState, subscribe } = createStore({
      name: "shuangxu",
      age: 19,
    });
    
    subscribe(() => console.log(getState().name, getState().age));
    
    changeState({ name: "FBB" });   // FBB 19
    changeState({ age: 26 });       // FBB 26
    
    changeState({ sex: "female" });
    

### çº¦æŸçŠ¶æ€ç®¡ç†å™¨

ä¸Šè¿°çš„å®ç°èƒ½å¤Ÿæ›´æ”¹çŠ¶æ€å’Œç›‘å¬çŠ¶æ€çš„æ”¹å˜ã€‚ä½†æ˜¯ä¸Šè¿°æ”¹å˜ state çš„æ–¹å¼è¿‡äºéšä¾¿äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä»»æ„ä¿®æ”¹ state ä¸­çš„æ•°æ®ï¼Œ`changeState({ sex: "female" })`ï¼Œå³ä½¿ sex ä¸å­˜åœ¨äº initialState ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦çº¦æŸåªèƒ½å¤Ÿä¿®æ”¹ name/age å±æ€§

é€šè¿‡ä¸€ä¸ª plan å‡½æ•°æ¥è§„å®š`UPDATE_NAME`å’Œ`UPDATE_AGE`æ–¹å¼æ›´æ–°å¯¹åº”å±æ€§

    const plan = (state, action) => {
      switch (action.type) {
        case "UPDATE_NAME":
          return {
            ...state,
            name: action.name,
          };
        case "UPDATE_AGE":
          return {
            ...state,
            age: action.age,
          };
        default:
          return state;
      }
    };
    

æ›´æ”¹ä¸€ä¸‹ createStore å‡½æ•°

    const createStore = (plan, initialState) => {
      let state = initialState;
      let listeners = [];
    
      const subscribe = (listener) => {
        listeners.push(listener);
        return () => {
          listeners = listeners.filter((fn) => fn !== listener);
        };
      };
    
      const changeState = (action) => {
        state = plan(state, action);
        listeners.forEach((listener) => {
          listener?.();
        });
      };
    
      const getState = () => state;
    
      return {
        subscribe,
        changeState,
        getState,
      };
    };
    
    const { getState, changeState, subscribe } = createStore(plan, {
      name: "shuangxu",
      age: 19,
    });
    
    subscribe(() => console.log(getState().name, getState().age));
    
    changeState({ type: "UPDATE_NAME", name: "FBB" });
    changeState({ type: "UPDATE_AGE", age: "28" });
    changeState({ type: "UPDATE_SEX", sex: "female" });
    

ä»£ç ä¸­çš„ plan å°±æ˜¯ redux ä¸­çš„ reducerï¼ŒchangeState å°±æ˜¯ dispatchã€‚

### æ‹†åˆ† reducer

reducer åšçš„äº‹æƒ…æ¯”è¾ƒç®€å•ï¼Œæ¥æ”¶ oldStateï¼Œé€šè¿‡ action æ›´æ–° stateã€‚

ä½†æ˜¯å®é™…é¡¹ç›®ä¸­å¯èƒ½å­˜åœ¨ä¸åŒæ¨¡å—çš„ stateï¼Œå¦‚æœéƒ½æŠŠ state çš„æ‰§è¡Œè®¡åˆ’å†™åœ¨åŒä¸€ä¸ª reducer ä¸­åºå¤§æœ‰å¤æ‚ã€‚

å› æ­¤åœ¨å¸¸è§çš„é¡¹ç›®ä¸­ä¼šæŒ‰æ¨¡å—æ‹†åˆ†ä¸åŒçš„ reducerï¼Œæœ€ååœ¨ä¸€ä¸ªå‡½æ•°ä¸­å°† reducer åˆå¹¶èµ·æ¥ã€‚

    const initialState = {
      user: { name: "shuangxu", age: 19 },
      counter: { count: 1 },
    };
    
    // å¯¹äºä¸Šè¿° state æˆ‘ä»¬å°†å…¶æ‹†åˆ†ä¸ºä¸¤ä¸ª reducer
    const userReducer = (state, action) => {
      switch (action.type) {
        case "UPDATE_NAME":
          return {
            ...state,
            name: action.name,
          };
        case "UPDATE_AGE":
          return {
            ...state,
            age: action.age,
          };
        default:
          return state;
      }
    };
    
    const counterReducer = (state, action) => {
      switch (action.type) {
        case "INCREMENT":
          return {
            count: state.count + 1,
          };
        case "DECREMENT":
          return {
            ...state,
            count: state.count - 1,
          };
        default:
          return state;
      }
    };
    
    // æ•´åˆ reducer
    const combineReducers = (reducers) => {
      // è¿”å›æ–°çš„ reducer å‡½æ•°
      return (state = {}, action) => {
        const newState = {};
        for (const key in reducers) {
          const reducer = reducers[key];
          const preStateForKey = state[key];
          const nextStateForKey = reducer(preStateForKey, action);
          newState[key] = nextStateForKey;
        }
        return newState;
      };
    };
    

ä»£ç è·‘èµ·æ¥ï¼ï¼

    const reducers = combineReducers({
      counter: counterReducer,
      user: userReducer,
    });
    
    const store = createStore(reducers, initialState);
    store.subscribe(() => {
      const state = store.getState();
      console.log(state.counter.count, state.user.name, state.user.age);
    });
    store.dispatch({ type: "UPDATE_NAME", name: "FBB" });  // 1 FBB 19
    store.dispatch({ type: "UPDATE_AGE", age: "28" });     // 1 FBB 28
    store.dispatch({ type: "INCREMENT" });                 // 2 FBB 28
    store.dispatch({ type: "DECREMENT" });                 // 1 FBB 28
    

### æ‹†åˆ† state

åœ¨ä¸Šä¸€èŠ‚çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ state è¿˜æ˜¯å®šä¹‰åœ¨ä¸€èµ·çš„ï¼Œä¼šé€ æˆ state æ ‘å¾ˆåºå¤§ï¼Œåœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éƒ½åœ¨ reducer ä¸­å®šä¹‰å¥½ initialState çš„ã€‚

åœ¨ä½¿ç”¨ createStore çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¼ å…¥ initialStateï¼Œç›´æ¥ä½¿ç”¨`store = createStore(reducers)`ã€‚å› æ­¤æˆ‘ä»¬è¦å¯¹è¿™ç§æƒ…å†µä½œå¤„ç†ã€‚

æ‹†åˆ† state å’Œ reducer å†™åœ¨ä¸€èµ·ã€‚

    const initialUserState = { name: "shuangxu", age: 19 };
    
    const userReducer = (state = initialUserState, action) => {
      switch (action.type) {
        case "UPDATE_NAME":
          return {
            ...state,
            name: action.name,
          };
        case "UPDATE_AGE":
          return {
            ...state,
            age: action.age,
          };
        default:
          return state;
      }
    };
    
    const initialCounterState = { count: 1 };
    
    const counterReducer = (state = initialCounterState, action) => {
      switch (action.type) {
        case "INCREMENT":
          return {
            count: state.count + 1,
          };
        case "DECREMENT":
          return {
            ...state,
            count: state.count - 1,
          };
        default:
          return state;
      }
    };
    

æ›´æ”¹ createStore å‡½æ•°ï¼Œå¯ä»¥è‡ªåŠ¨è·å–åˆ°æ¯ä¸€ä¸ª reducer çš„ initialState

    const createStore = (reducer, initialState = {}) => {
      let state = initialState;
      let listeners = [];
    
      const subscribe = (listener) => {
        listeners.push(listener);
        return () => {
          listeners = listeners.filter((fn) => fn !== listener);
        };
      };
    
      const dispatch = (action) => {
        state = reducer(state, action);
        listeners.forEach((listener) => {
          listener?.();
        });
      };
    
      const getState = () => state;
    
      // ä»…ä»…ç”¨äºè·å–åˆå§‹å€¼
      dispatch({ type: Symbol() });
    
      return {
        subscribe,
        dispatch,
        getState,
      };
    };
    

`dispatch({ type: Symbol() })`ä»£ç èƒ½å¤Ÿå®ç°å¦‚ä¸‹æ•ˆæœï¼š

*   createStore çš„æ—¶å€™ï¼Œä¸€ä¸ªä¸åŒ¹é…ä»»ä½• type çš„ actionï¼Œæ¥è§¦å‘`state = reducer(state, action)`
*   æ¯ä¸ª reducer éƒ½ä¼šè¿›åˆ° default é¡¹ï¼Œè¿”å› initialState

Redux-Toolkit æºç å®ç°
------------------

### configureStore

æ¥å—ä¸€ä¸ªå«æœ‰ reducer çš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå†…éƒ¨è°ƒç”¨ redux çš„ createStore åˆ›å»ºå‡º store

    import { combineReducers, createStore } from "redux";
    
    export function configureStore({ reducer }: any) {
      const rootReducer = combineReducers(reducer);
      const store = createStore(rootReducer);
      return store;
    }
    

### createAction

    const updateName = createAction<string>("user/UPDATE_NAME");
    const updateName = createAction("user/UPDATE_NAME", (name: string) => ({
      payload: {
        name,
      },
    }));
    
    updateName("FBB");
    

é€šè¿‡ä¸Šé¢çš„ç¤ºä¾‹ï¼Œèƒ½å¤Ÿåˆ†æå‡ºæ¥ createAction è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ç¬¬ä¸€ä¸ªå‚æ•° type è¿”å›`{ type: 'user/UPDATE_NAME', payload: undefined }`ï¼›å¯¹äºå…·ä½“çš„ payload å€¼éœ€è¦ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°æ¥æ”¹å˜

    export const createAction = (type: string, preAction?: Function) => {
      function actionCreator(...args: any[]) {
        if (!preAction)
          return {
            type,
            payload: args[0],
          };
        const prepared = preAction(...args);
        if (!prepared) {
          throw new Error("prepareAction did not return an object");
        }
        return {
          type,
          payload: prepared.payload,
        };
      }
      actionCreator.type = type;
      return actionCreator;
    };
    

### createReducer

    export const userReducer = createReducer(initialUserState, (builder) => {
      builder
        .addCase(updateAge, (state, action) => {
          state.age = action.payload.age;
        })
        .addCase(updateName, (state, action) => {
          state.name = action.payload.name;
        });
    });
    

æ¯ä¸€ä¸ª reducer éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°`(state = initialState, action) => {}`ï¼Œå› æ­¤ createReducer è¿”å›å€¼ä¸ºå‡½æ•°

é€šè¿‡ä¸€ä¸ª createReducer å‡½æ•°ï¼Œå†…éƒ¨è¿˜éœ€è¦çŸ¥é“æ¯ä¸€ä¸ª action å¯¹åº”çš„æ“ä½œ

    import { produce as createNextState } from "immer";
    
    export const createReducer = (
      initialState: any,
      builderCallback: (builder: any) => void
    ) => {
      const actionsMap = executeReducerBuilderCallback(builderCallback);
      return function reducer(state = initialState, action: any) {
        const caseReducer = actionsMap[action.type];
        if (!caseReducer) return state;
        return createNextState(state, (draft: any) =>
          caseReducer(draft, action)
                              );
      };
    };
    
    // é€šè¿‡ createReducer çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ„å»ºå‡º action å¯¹åº”çš„æ“ä½œæ–¹æ³•
    export const executeReducerBuilderCallback = (
      builderCallback: (builder: any) => void
    ) => {
      const actionsMap: any = {};
      const builder = {
        addCase(typeOrActionCreator: any, reducer: any) {
          const type =
            typeof typeOrActionCreator === "string"
            ? typeOrActionCreator
            : typeOrActionCreator.type;
          actionsMap[type] = reducer;
          return builder;
        },
      };
      builderCallback(builder);
      return actionsMap;
    };
    

### createSlice

    const counterSlice = createSlice({
      name: "counter",
      initialState: {
        count: 1,
      },
      reducers: {
        increment: (state: any) => {
          state.count += 1;
        },
        decrement: (state: any) => {
          state.count -= 1;
        },
      },
    });
    
    const counterSliceName = counterSlice.name;
    const { increment, decrement } = counterSlice.actions;
    const counterReducer = counterSlice.reducer;
    

createSlice è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡`{ name, actions, reducer }`ï¼Œæ¥å—`{ name, initialState, reducers }`ä¸‰ä¸ªå‚æ•°ã€‚é€šè¿‡ reducers ä¸­ç›¸å…³å‚æ•°å¾—åˆ°å¯¹åº”çš„ actions å’Œ reducerã€‚

åœ¨ createSlice ä¸­ä¸»è¦è¿˜æ˜¯é  createAction å’Œ createReducer æ–¹æ³•ã€‚é€šè¿‡ name å’Œ reducers çš„æ¯ä¸€ä¸ªå±æ€§æ‹¼æ¥æˆä¸º action.typeï¼Œè°ƒç”¨ createReducer éå† reducers çš„å±æ€§æ·»åŠ  case

    import { createAction } from "./createAction";
    import { createReducer } from "./createReducer";
    
    export default function createSlice({ name, initialState, reducers }: any) {
      const reducerNames = Object.keys(reducers);
    
      const actionCreators: any = {};
      const sliceCaseReducersByType: any = {};
    
      reducerNames.forEach((reducerName) => {
        const type = `${name}/${reducerName}`;
        const reducerWithPrepare = reducers[reducerName];
        actionCreators[reducerName] = createAction(type);
        sliceCaseReducersByType[type] = reducerWithPrepare;
      });
    
      function buildReducer() {
        return createReducer(initialState, (builder) => {
          for (let key in sliceCaseReducersByType) {
            builder.addCase(key, sliceCaseReducersByType[key]);
          }
        });
      }
    
      return {
        name,
        actions: actionCreators,
        reducer: (state: any, action: any) => {
          const _reducer = buildReducer();
          return _reducer(state, action);
        },
      };
    }
    

æ€»ç»“
--

åœ¨æœ¬æ–‡è®²è§£äº† Redux-Toolkit åŸºç¡€ä½¿ç”¨ï¼Œä» redux çš„æºç å‡ºå‘è§£æäº† redux-toolkit çš„æºç ï¼Œä»æºç ä¸­ä¹Ÿèƒ½å¤Ÿçœ‹å‡ºæ¥ toolkit çš„å®ç°æ˜¯åŸºäº redux æ¥å®ç°çš„ï¼Œä¸”ä½¿ç”¨ä¸Šä¹Ÿå¤§åŒå°å¼‚ï¼Œæ— ç ´åæ€§å˜æ›´ã€‚

æœ€å
--

æ¬¢è¿å…³æ³¨ã€è¢‹é¼ äº‘æ•°æ ˆUEDå›¢é˜Ÿã€‘~  
è¢‹é¼ äº‘æ•°æ ˆ UED å›¢é˜ŸæŒç»­ä¸ºå¹¿å¤§å¼€å‘è€…åˆ†äº«æŠ€æœ¯æˆæœï¼Œç›¸ç»§å‚ä¸å¼€æºäº†æ¬¢è¿ star

*   **[å¤§æ•°æ®åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿâ€”â€”Taier](https://dtstack.github.io/Taier/)**
*   **[è½»é‡çº§çš„ Web IDE UI æ¡†æ¶â€”â€”Molecule](https://dtstack.github.io/molecule/)**
*   **[é’ˆå¯¹å¤§æ•°æ®é¢†åŸŸçš„ SQL Parser é¡¹ç›®â€”â€”dt-sql-parser](https://dtstack.github.io/monaco-sql-languages/)**
*   **[è¢‹é¼ äº‘æ•°æ ˆå‰ç«¯å›¢é˜Ÿä»£ç è¯„å®¡å·¥ç¨‹å®è·µæ–‡æ¡£â€”â€”code-review-practices](https://github.com/DTStack/code-review-practices)**
*   **[ä¸€ä¸ªé€Ÿåº¦æ›´å¿«ã€é…ç½®æ›´çµæ´»ã€ä½¿ç”¨æ›´ç®€å•çš„æ¨¡å—æ‰“åŒ…å™¨â€”â€”ko](https://github.com/DTStack/ko)**
*   **[ä¸€ä¸ªé’ˆå¯¹ antd çš„ç»„ä»¶æµ‹è¯•å·¥å…·åº“â€”â€”ant-design-testing](https://github.com/DTStack/ant-design-testing)**