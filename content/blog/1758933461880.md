---
layout: post
title: 'ã€å…‰ç…§ã€‘[ç‰©ç†æ¨¡å‹]ä¸­çš„[BRDF]æ˜¯ä»€ä¹ˆï¼Ÿ'
date: "2025-09-27T00:37:41Z"
---
ã€å…‰ç…§ã€‘\[ç‰©ç†æ¨¡å‹\]ä¸­çš„\[BRDF\]æ˜¯ä»€ä¹ˆï¼Ÿ
==========================

![ã€å…‰ç…§ã€‘[ç‰©ç†æ¨¡å‹]ä¸­çš„[BRDF]æ˜¯ä»€ä¹ˆï¼Ÿ](https://img2024.cnblogs.com/blog/3685400/202509/3685400-20250926152720234-1861275127.png) æœ¬æ–‡æ·±å…¥è§£æäº†åŒå‘åå°„åˆ†å¸ƒå‡½æ•°(BRDF)åœ¨æ¸¸æˆæ¸²æŸ“ä¸­çš„åº”ç”¨ã€‚BRDFä½œä¸ºæè¿°ç‰©ä½“è¡¨é¢åå°„ç‰¹æ€§çš„æ ¸å¿ƒæ•°å­¦æ¨¡å‹ï¼Œå°†åå°„åˆ†è§£ä¸ºæ¼«åå°„å’Œé•œé¢åå°„ä¸¤éƒ¨åˆ†ï¼Œå¹¶é€šè¿‡å¾®è¡¨é¢ç†è®ºç²¾ç¡®æ¨¡æ‹Ÿå…‰çº¿è¡Œä¸ºã€‚æ–‡ç« è¯¦ç»†ä»‹ç»äº†GGX/Trowbridge-Reitzç­‰ä¸»æµBRDFæ¨¡å‹çš„æ•°å­¦å®ç°ï¼ŒåŒ…æ‹¬æ³•çº¿åˆ†å¸ƒå‡½æ•°ã€å‡ ä½•é®è”½å‡½æ•°å’Œè²æ¶…å°”é¡¹çš„è®¡ç®—æ–¹æ³•ï¼Œå¯¹æ¯”äº†ä¼ ç»Ÿå…‰ç…§æ¨¡å‹ä¸åŸºäºç‰©ç†æ¸²æŸ“(PBR)çš„åŒºåˆ«ã€‚æœ€åç»™å‡ºäº†Unity URPä¸­BRDFçš„å®ç°ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡é‡‘å±åº¦ã€ç²—ç³™åº¦ç­‰å‚æ•°å®ç°æ›´çœŸå®çš„æè´¨è¡¨ç°ã€‚

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

**åŒå‘åå°„åˆ†å¸ƒå‡½æ•°** Bidirectional Reflectance Distribution Function è§£é‡Šå½“å…‰çº¿ä»æŸä¸ªæ–¹å‘ç…§å°„åˆ°ä¸€ä¸ªè¡¨é¢æ—¶ï¼Œæœ‰å¤šå°‘å…‰çº¿è¢«åå°„ã€åå°„æ–¹å‘æœ‰å“ªäº›ã€‚BRDFå¤§å¤šä½¿ç”¨ä¸€ä¸ªæ•°å­¦å…¬å¼è¡¨ç¤ºï¼Œå¹¶æä¾›ä¸€äº›å‚æ•°æ¥è°ƒæ•´æè´¨å±æ€§ã€‚

BRDFï¼ˆåŒå‘åå°„åˆ†å¸ƒå‡½æ•°ï¼‰æ˜¯è®¡ç®—æœºå›¾å½¢å­¦å’Œå…‰å­¦ä¸­æè¿°ç‰©ä½“è¡¨é¢åå°„ç‰¹æ€§çš„æ ¸å¿ƒæ•°å­¦æ¨¡å‹ï¼Œå…¶å®šä¹‰å’Œç‰¹æ€§å¦‚ä¸‹ï¼š

* * *

**åŸºæœ¬å®šä¹‰**
========

BRDFï¼ˆBidirectional Reflectance Distribution Functionï¼‰è¡¨ç¤ºâ€Œ**å…¥å°„å…‰æ–¹å‘ï¼ˆÏ‰iï¼‰ä¸å‡ºå°„å…‰æ–¹å‘ï¼ˆÏ‰rï¼‰çš„åå°„è¾å°„ç‡ï¼ˆradianceï¼‰ä¸å…¥å°„è¾ç…§åº¦ï¼ˆirradianceï¼‰çš„æ¯”å€¼**â€Œï¼Œæ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š

$f\_r(Ï‰\_i,Ï‰\_r)=\\frac{dL\_r(Ï‰\_r)}{dE\_i(Ï‰\_i)}$

å…¶ä¸­ï¼Œ$L\_r_L\_r_$ä¸ºåå°„è¾å°„ç‡ï¼Œ$E\_i$ä¸ºå…¥å°„è¾ç…§åº¦â€Œã€‚

* * *

**æ ¸å¿ƒç‰¹æ€§**
========

*   â€Œ**åŒå‘æ€§**â€ŒåŒæ—¶ä¾èµ–å…¥å°„å’Œå‡ºå°„æ–¹å‘ï¼Œèƒ½ç²¾ç¡®æè¿°å…‰çº¿åœ¨è¡¨é¢çš„ç©ºé—´åˆ†å¸ƒâ€Œã€‚
*   â€Œ**èƒ½é‡å®ˆæ’**â€Œåå°„ç‡æ€»å’Œâ‰¤1ï¼Œé¿å…éç‰©ç†çš„å…‰èƒ½æº¢å‡ºâ€Œã€‚
*   â€Œ**å¾®è§‚ç»“æ„å…³è”**â€Œé€šè¿‡å¾®è¡¨é¢ç†è®ºï¼ˆMicrofacet Theoryï¼‰å»ºæ¨¡è¡¨é¢ç²—ç³™åº¦å¯¹åå°„çš„å½±å“â€Œã€‚

* * *

**ç‰©ç†æ„ä¹‰**
========

*   â€Œ**åå°„è¡Œä¸ºåˆ†è§£**â€Œ
    *   â€Œ**æ¼«åå°„**â€Œï¼šå…‰çº¿å‡åŒ€æ•£å°„ï¼ˆå¦‚Lambertæ¨¡å‹ï¼‰
    *   â€Œ**é•œé¢åå°„**â€Œï¼šå…‰çº¿é›†ä¸­åå°„ï¼ˆå¦‚GGXæ¨¡å‹ï¼‰â€Œã€‚
*   â€Œ**æè´¨åŒºåˆ†**â€Œé‡‘å±ä¸éé‡‘å±çš„BRDFå·®å¼‚æ˜¾è‘—ï¼ˆå¦‚è²æ¶…å°”æ•ˆåº”åœ¨é‡‘å±ä¸­æ›´æ˜æ˜¾ï¼‰â€Œã€‚

* * *

**â€ŒBRDFçš„å…‰ç…§åˆ†è§£ä¸å®ç°åŸç†â€Œ**
====================

BRDFå°†è¡¨é¢åå°„åˆ†ä¸ºâ€Œ**æ¼«åå°„Diffuse**â€Œ å’Œâ€Œ**é•œé¢åå°„Specular**â€Œ ä¸¤éƒ¨åˆ†ï¼ˆç¯å¢ƒå…‰é€šè¿‡IBLæŠ€æœ¯æ•´åˆï¼‰ï¼Œå…¶æ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š

$f\_r(Ï‰\_i,Ï‰\_o)=f\_{diffuse}+f\_{specular}$

**â€Œæ¼«åå°„ï¼ˆDiffuseï¼‰â€Œ**
------------------

*   â€Œ**ä½œç”¨**â€Œï¼šæ¨¡æ‹Ÿå…‰çº¿åœ¨è¡¨é¢å¾®ç»“æ„ä¸­å¤šæ¬¡æ•£å°„çš„å‡åŒ€åå°„ï¼ˆå¦‚å¸ƒæ–™ã€ç²—ç³™å¢™é¢ï¼‰ã€‚
*   â€Œ**ç‰©ç†æ¨¡å‹**â€Œï¼š
    *   â€Œ**Lambertianæ¨¡å‹**â€Œï¼šåŸºç¡€å½¢å¼Â $f\_{\\text{diff}} = \\frac{\\text{albedo}}{\\pi}$
    *   â€Œ**æ”¹è¿›æ¨¡å‹**â€Œï¼šOren-Nayarï¼ˆè€ƒè™‘è¡¨é¢ç²—ç³™åº¦ï¼‰æˆ– Disney BRDFï¼ˆè‰ºæœ¯å¯æ§ï¼‰
*   â€Œ**èƒ½é‡å®ˆæ’çº¦æŸ**â€Œï¼šæ¼«åå°„éƒ¨åˆ†éœ€æ»¡è¶³ï¼š$âˆ«\_Î©f\_{diff}(Ï‰\_iâ‹…n)dÏ‰\_iâ‰¤1âˆ’F\_0$å…¶ä¸­Â $F\_0$Â æ˜¯è²æ¶…å°”åŸºç¡€åå°„ç‡ã€‚

**â€Œé•œé¢åå°„ï¼ˆSpecularï¼‰â€Œ**
--------------------

åŸºäºâ€Œ**å¾®è¡¨é¢ç†è®º**â€Œï¼ˆMicrofacet Theoryï¼‰ï¼Œåˆ†è§£ä¸ºä¸‰ä¸ªç‰©ç†é¡¹ï¼š

$f\_{spec}=\\frac{F(Î¸\_h)â‹…D(Î±,Î¸\_h)â‹…G(Î±,Î¸\_i,Î¸\_o)}{4â‹…(nâ‹…Ï‰\_i)â‹…(nâ‹…Ï‰\_o)}$

*   â€Œ**æ³•çº¿åˆ†å¸ƒå‡½æ•° NDF**â€Œ
    *   â€Œ**ä½œç”¨**â€Œï¼šæè¿°å¾®è¡¨é¢æ³•çº¿æœå‘çš„ç»Ÿè®¡åˆ†å¸ƒï¼ˆå†³å®šé«˜å…‰å½¢çŠ¶ï¼‰ã€‚
    *   â€Œ**å¸¸ç”¨æ¨¡å‹**â€Œï¼š
        *   â€Œ**GGX/Trowbridge-Reitz**â€Œï¼š$D(h) = \\frac{\\alpha\_g^2}{\\pi \[(n \\cdot h)^2 (\\alpha\_g^2 - 1) + 1\]^2}$ï¼ˆ`Î±`\=ç²—ç³™åº¦ï¼Œ`h`\=åŠè§’å‘é‡ï¼‰
        *   â€Œ**Beckmann**â€Œï¼šè¾ƒæ—©çš„ç‰©ç†æ¨¡å‹ï¼Œæ‹–å°¾æ•ˆæœä¸å¦‚GGXçœŸå®
*   â€Œ**å‡ ä½•é®è”½å‡½æ•° G**â€Œ
    *   â€Œ**ä½œç”¨**â€Œï¼šæ¨¡æ‹Ÿå¾®è¡¨é¢é—´é˜´å½±å’Œé®æŒ¡ï¼ˆå¦‚ç²—ç³™è¡¨é¢çš„å…‰èƒ½æŸå¤±ï¼‰ã€‚
    *   â€Œ**Smithæ¨¡å‹**â€Œï¼š$G = G\_1(\\omega\_i) \\cdot G\_1(\\omega\_o)G\_1(\\omega) = \\frac{n \\cdot \\omega}{(n \\cdot \\omega) (1 - k) + k}$ï¼ˆ`k`\=ç²—ç³™åº¦é‡æ˜ å°„å‚æ•°ï¼‰
*   â€Œ**è²æ¶…å°”é¡¹ F**â€Œ
    *   â€Œ**ä½œç”¨**â€Œï¼šè®¡ç®—ä¸åŒè§†è§’ä¸‹çš„åå°„ç‡å˜åŒ–ï¼ˆå¦‚æ å°„è§’åå°„å¢å¼ºï¼‰ã€‚
    *   â€Œ**Schlickè¿‘ä¼¼**â€Œï¼š$F(\\theta) = F\_0 + (1 - F\_0)(1 - \\cos\\theta)^5$ï¼ˆ$F\_0$=åŸºç¡€åå°„ç‡ï¼Œé‡‘å±â‰ˆ0.5-1.0, éé‡‘å±â‰ˆ0.02-0.05ï¼‰

* * *

**â€Œç¯å¢ƒå…‰çš„å¤„ç†ï¼ˆé—´æ¥å…‰ç…§ï¼‰â€Œ**
------------------

ä¼ ç»Ÿâ€œç¯å¢ƒå…‰â€åœ¨BRDFä¸­è¢«å‡çº§ä¸º â€Œ**IBL Image-Based Lighting**â€Œï¼š

*   â€Œ**æ¼«åå°„ç¯å¢ƒå…‰**â€Œï¼šé€šè¿‡â€Œ**è¾ç…§åº¦è´´å›¾Irradiance Map**â€Œ é¢„è®¡ç®—åŠçƒç§¯åˆ†$L\_{diff}=albedoâ‹…\\frac1Ï€âˆ«\_Î©L\_i(Ï‰\_i)(nâ‹…Ï‰\_i)dÏ‰\_i$
*   â€Œ**é•œé¢åå°„ç¯å¢ƒå…‰**â€Œï¼š
    *   é¢„è¿‡æ»¤ç¯å¢ƒè´´å›¾ï¼ˆPrefiltered Environment Mapï¼‰
    *   é‡è¦æ€§é‡‡æ · + BRDF LUTï¼ˆæŸ¥æ‰¾è¡¨ï¼‰

* * *

**â€Œä¸ä¼ ç»Ÿå…‰ç…§æ¨¡å‹çš„å¯¹æ¯”â€Œ**
----------------

å…‰ç…§æˆåˆ†

æ ‡å‡†å…‰ç…§æ¨¡å‹

BRDFå®ç°æ–¹å¼

â€Œ**æ¼«åå°„**â€Œ

$Lambert = k\_d \* (nÂ·l)$

èƒ½é‡å®ˆæ’çº¦æŸçš„`Oren-Nayar/Disney`æ¨¡å‹

â€Œ**é«˜å…‰åå°„**â€Œ

$Phong = k\_s \* (vÂ·r)^n$

å¾®è¡¨é¢æ¨¡å‹ï¼ˆD+F+Gé¡¹ç‰©ç†è®¡ç®—ï¼‰

â€Œ**ç¯å¢ƒå…‰**â€Œ

æ’å®šæˆ–ç¯å¢ƒè´´å›¾é‡‡æ ·

IBLæŠ€æœ¯ï¼ˆè¾ç…§åº¦å›¾+é¢„è¿‡æ»¤é•œé¢è´´å›¾ï¼‰

â€Œ**èƒ½é‡å®ˆæ’**â€Œ

ä¸ä¿è¯ï¼ˆå¯èƒ½è¿‡æ›ï¼‰

å¼ºåˆ¶æ»¡è¶³`diffuse + specular â‰¤ 1`

* * *

**â€ŒBRDFåœ¨æ¸²æŸ“ç®¡çº¿ä¸­çš„å®ç°æµç¨‹ï¼ˆä»¥GGXä¸ºä¾‹ï¼‰â€Œ**
-----------------------------

    hlsl
    // Unity URP ä¸­çš„æ ¸å¿ƒä»£ç ç‰‡æ®µï¼ˆç®€åŒ–ç‰ˆï¼‰
    float3 BRDF_PBS(float3 albedo, float metallic, float roughness,
                    float3 N, float3 V, float3 L) {
    
      // è®¡ç®—åŸºç¡€å‚æ•°
      float3 H = normalize(V + L);
      float NdotV = saturate(dot(N, V));
      float NdotL = saturate(dot(N, L));
    
      // 1. è²æ¶…å°”é¡¹ (F)
      float3 F0 = lerp(0.04, albedo, metallic); // åŸºç¡€åå°„ç‡
      float3 F = FresnelSchlick(saturate(dot(H, V)), F0);
    
      // 2. æ³•çº¿åˆ†å¸ƒ (D)
      float D = NDF_GGX(roughness, N, H);
    
      // 3. å‡ ä½•é®è”½ (G)
      float G = GeometrySmith(roughness, NdotV, NdotL);
    
      // 4. ç»„åˆé•œé¢åå°„
      float3 nominator = D * G * F;
      float denominator = 4 * NdotV * NdotL;
      float3 specular = nominator / max(denominator, 0.001);
    
      // 5. æ¼«åå°„ (èƒ½é‡å®ˆæ’)
      float3 kD = (1 - F) * (1 - metallic); // é‡‘å±æ— æ¼«åå°„
      float3 diffuse = kD * albedo / PI;
    
      return (diffuse + specular) * NdotL;
    }
    

* * *

**â€Œå…³é”®çªç ´â€Œ**
==========

*   â€Œ**ç‰©ç†æ­£ç¡®æ€§**â€Œï¼šé€šè¿‡å¾®è¡¨é¢ç†è®ºå’Œèƒ½é‡å®ˆæ’é¿å…äººå·¥è°ƒå‚çš„ä¸çœŸå®æ„Ÿã€‚
*   â€Œ**æè´¨ç»Ÿä¸€æ€§**â€Œï¼šå‚æ•°ï¼ˆé‡‘å±åº¦/ç²—ç³™åº¦ï¼‰åœ¨æ‰€æœ‰å…‰ç…§ç¯å¢ƒä¸‹ä¿æŒä¸€è‡´æ€§ã€‚
*   â€Œ**ç¯å¢ƒå“åº”**â€Œï¼šIBLä½¿ç‰©ä½“è‡ªç„¶èå…¥ç¯å¢ƒå…‰ç…§ï¼ˆå¦‚é‡‘å±åå°„å‘¨å›´æ™¯ç‰©ï¼‰ã€‚

> â€Œç¤ºä¾‹å¯¹æ¯”â€Œï¼šä¼ ç»ŸPhongæ¨¡å‹åœ¨ç²—ç³™é‡‘å±è¡¨é¢ä¼šäº§ç”Ÿåœ†å½¢é«˜å…‰ï¼Œè€ŒGGX BRDFä¼šç”Ÿæˆæ‹–å°¾å¼é«˜å…‰ï¼ˆç¬¦åˆçœŸå®ç›¸æœºæ‹æ‘„æ•ˆæœï¼‰ã€‚

* * *

> [ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘](https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&sharetype=blogcolumn&sharerId=13021255&sharerefer=PC&sharesource=chenghai37&sharefrom=from_link)**ä¸“æ -ç›´è¾¾**

ï¼ˆæ¬¢è¿_ç‚¹èµç•™è¨€_æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰