---
layout: post
title: 'ä½¿ç”¨Gité’©å­+ husky + lintè¯­æ³•æ£€æŸ¥æé«˜å‰ç«¯é¡¹ç›®ä»£ç è´¨é‡'
date: "2025-11-07T00:42:09Z"
---
ä½¿ç”¨Gité’©å­+ husky + lintè¯­æ³•æ£€æŸ¥æé«˜å‰ç«¯é¡¹ç›®ä»£ç è´¨é‡
===================================

@

ç›®å½•

*   [é…ç½® Git Hook](#é…ç½®-git-hook)
    *   [åŸç†ä»‹ç»](#åŸç†ä»‹ç»)
    *   [å®‰è£… Husky](#å®‰è£…-husky)
    *   [å¯ç”¨ Husky](#å¯ç”¨-husky)
    *   [æ·»åŠ  Git Hook](#æ·»åŠ -git-hook)
    *   [æµ‹è¯•è„šæœ¬](#æµ‹è¯•è„šæœ¬)
    *   [æ‰§è¡Œæ•ˆæœ](#æ‰§è¡Œæ•ˆæœ)
*   [æ·»åŠ è¯­æ³•æ£€æŸ¥](#æ·»åŠ è¯­æ³•æ£€æŸ¥)
    *   [å®‰è£…Prettier](#å®‰è£…prettier)
    *   [é…ç½®Prettier](#é…ç½®prettier)
    *   [æ ¼å¼åŒ–è§„åˆ™è°ƒä¼˜](#æ ¼å¼åŒ–è§„åˆ™è°ƒä¼˜)
    *   [æ·»åŠ  Git Hook](#æ·»åŠ -git-hook-1)
*   [æ·»åŠ Gitæäº¤è§„èŒƒæ£€æŸ¥](#æ·»åŠ gitæäº¤è§„èŒƒæ£€æŸ¥)
    *   [å®‰è£…commitlint](#å®‰è£…commitlint)
    *   [é…ç½®commitlint](#é…ç½®commitlint)
    *   [æ·»åŠ  Git Hook](#æ·»åŠ -git-hook-2)

  
ä½œä¸ºå¼€å‘ç»ç†ï¼Œæ˜¯ä¸æ˜¯å¸¸å¸¸æœ‰ä¸€ä¸ªç–‘é—®ï¼šæ€æ ·ä¿è¯é¡¹ç›®ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ï¼Ÿä»Šå¤©æˆ‘å°†é€šè¿‡å‡ ä¸ªæˆ‘åœ¨å›¢é˜Ÿä¸­å¸¸ç”¨çš„å·¥å…·ï¼Œæé«˜ä»£ç è´¨é‡ï¼Œé™ä½éšæ€§çš„æ•…éšœç‡ä¸ç§¯ç´¯çš„ç»´æŠ¤æˆæœ¬ï¼Œé¿å…â€œæŠ€æœ¯å€ºâ€ã€‚

é¦–å…ˆï¼Œè¦ä¿è¯ä»£ç ä»“åº“æ¯æ¬¡æäº¤çš„ä»£ç è´¨é‡ï¼Œéœ€è¦åœ¨æäº¤å‰å¼•å…¥æ£€æŸ¥æœºåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ Git hooksã€‚åœ¨æäº¤å‰è¿è¡Œå„æ£€æŸ¥ï¼Œå¦‚æœæ£€æŸ¥ä¸é€šè¿‡ï¼Œå°±é˜»æ­¢æäº¤ã€‚

æœ¬åœ° Git Hook é»˜è®¤ä¸ä¼šéšä»“åº“å…±äº«ï¼Œæ‰€ä»¥å¦‚æœåªæ”¾åœ¨ .git/hooks/pre-commit é‡Œï¼Œå…¶ä»–äºº clone ä¸‹æ¥æ˜¯æ²¡æœ‰è¿™ä¸ª hook çš„ã€‚

å›¢é˜Ÿé‡Œå¸¸ç”¨çš„åŠæ³•æ˜¯å€ŸåŠ© Huskyï¼ŒæŠŠé’©å­é…ç½®æ”¾åœ¨é¡¹ç›®é‡Œï¼Œéšä»£ç å…±äº«ã€‚

å½“ç„¶ï¼Œç”±äºæ˜¯åœ¨æœ¬åœ°ï¼Œç»„å‘˜å¯ä»¥é€šè¿‡[è·³è¿‡ Git é’©å­](https://typicode.github.io/husky/zh/how-to.html#%E8%B7%B3%E8%BF%87-git-%E9%92%A9%E5%AD%90)çš„æ–¹å¼ç»•è¿‡ä»£ç æ£€æŸ¥ï¼Œæœ€æƒå¨çš„æ–¹æ¡ˆè¿˜æ˜¯åœ¨ GitLab æœåŠ¡ç«¯å¼ºåˆ¶æ£€æŸ¥ï¼šç”¨ GitLab CI/CD pipeline é…ç½®ï¼Œåœ¨ pipeline é˜¶æ®µæ‰§è¡Œ tscï¼Œä¸é€šè¿‡åˆ™æ‹’ç» merge requestã€‚æœ¬ç¯‡æ–‡ç« åªè®¨è®ºæœ¬åœ° Git Hook çš„åšæ³•ã€‚ä»¥åæœ‰æœºä¼šå†ä»‹ç»æœåŠ¡ç«¯æ£€æŸ¥ã€‚

é…ç½® Git Hook
-----------

### åŸç†ä»‹ç»

.git/hooks ç›®å½•ä¸ä¼šéšç€ä»£ç è¢«æäº¤ï¼Œæ‰€ä»¥è¦ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ŒHusky æ˜¯ç”¨ Git è‡ªå¸¦çš„ hook åŸç†ï¼Œåªæ˜¯åšäº†å‡ ä»¶äº‹ï¼š

*   Git åœ¨ `.git/hooks/` ç›®å½•ä¸‹æ”¾ç½®ä¸€å †é’©å­è„šæœ¬ï¼ˆä¾‹å¦‚ `pre-commit`ã€`pre-push`ã€`commit-msg`ï¼‰ã€‚
    
*   å½“æ‰§è¡Œ `git commit`ã€`git push` ç­‰æ“ä½œæ—¶ï¼ŒGit ä¼šå» `.git/hooks/` æ‰¾å¯¹åº”çš„è„šæœ¬å¹¶æ‰§è¡Œã€‚
    
*   å¦‚æœè„šæœ¬è¿”å›éé›¶é€€å‡ºç ï¼ˆ`exit 1`ï¼‰ï¼ŒGit ä¼šä¸­æ­¢æ“ä½œã€‚
    

### å®‰è£… Husky

è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

`yarn add husky --dev`

### å¯ç”¨ Husky

è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

`yarn husky install`

æ­¤æ—¶é¡¹ç›®ä¼šæœ‰ `.husky/` ç›®å½•ï¼Œé‡Œé¢æ”¾ç€ Git Hook è„šæœ¬ã€‚

ä¸ºäº†ä¿è¯æ¯æ¬¡åˆ«äºº `yarn install` æ—¶ Husky è‡ªåŠ¨å¯ç”¨ï¼Œéœ€è¦åœ¨ `package.json` é‡ŒåŠ ä¸€ä¸ª `postinstall` è„šæœ¬ï¼š

    {
      "scripts": {
        "postinstall": "husky install",
        "type-check": "tsc --noEmit"
      }
    }
    

å½“ç»„å‘˜æäº¤ä»£ç æ—¶ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹çš„æµç¨‹ï¼š

1.  Husky ä¼šåœ¨ `.git/hooks/` ç›®å½•å†™å…¥ä¸€ä¸ª ä»£ç†è„šæœ¬ã€‚
    
2.  ä»£ç†è„šæœ¬ä¼šå»æ‰§è¡Œ `.husky/` ç›®å½•ä¸‹çš„å¯¹åº” hook æ–‡ä»¶ï¼Œæ¯”å¦‚ `.husky/pre-commit`ã€‚
    
3.  `.husky/pre-commit` é‡Œé€šå¸¸å°±å†™éœ€è¦çš„å‘½ä»¤ï¼Œæ¯”å¦‚ `npm run lint && npm run type-check`ã€‚
    
4.  å¦‚æœå‘½ä»¤å¤±è´¥ï¼ˆé€€å‡ºç é 0ï¼‰ï¼ŒGit å°±ä¼šé˜»æ­¢ commitã€‚
    

### æ·»åŠ  Git Hook

åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `.husky/` åˆ›å»º `pre-commit` æ–‡ä»¶ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2024.cnblogs.com/blog/644861/202511/644861-20251106193049956-265147229.png)

å°†å¦‚ä¸‹å†…å®¹å†™å…¥æ–‡ä»¶ï¼š

    #!/usr/bin/env sh
    . "$(dirname "$0")/_/husky.sh"
    
    echo "ğŸ” Running type check before commit..."
    
    # è¿è¡Œ TS æ£€æŸ¥
    yarn type-check
    RESULT=$?
    
    if [ $RESULT -ne 0 ]; then
      echo "âŒ Type check failed. Commit aborted."
      exit 1
    fi
    
    echo "âœ… Type check passed. Proceeding with commit."
    exit 0
    
    

### æµ‹è¯•è„šæœ¬

ä¿è¯è„šæœ¬ç¼–ç å’Œæ¢è¡Œç¬¦ç¬¦åˆè§„èŒƒï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2024.cnblogs.com/blog/644861/202511/644861-20251106193049932-18134728.png)

åœ¨Windowsä¸‹ï¼Œgitæ˜¯é€šè¿‡Windows Git Bash ç¯å¢ƒé‡Œæ‰§è¡Œ hookï¼Œ ä¸æ˜¯å‘½ä»¤è¡Œç¯å¢ƒä¹Ÿä¸æ˜¯Powershellï¼

ä½¿ç”¨Windows Git Bashï¼Œè¿è¡Œ`sh .husky/pre-commit`ï¼ŒæŸ¥çœ‹æ‰“å°ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2024.cnblogs.com/blog/644861/202511/644861-20251106193049928-2072193128.png)

èƒ½æ‰“å°å‡ºè„šæœ¬çš„è¾“å‡ºï¼Œè¯´æ˜è„šæœ¬æ‰§è¡Œæ­£å¸¸ã€‚

### æ‰§è¡Œæ•ˆæœ

*   å½“æ‰§è¡Œ `git commit` æ—¶ï¼ŒHusky ä¼šå…ˆè·‘ `yarn type-check`ã€‚
    
*   å¦‚æœ `tsc` æŠ¥é”™ï¼ˆé€€å‡ºç é 0ï¼‰ï¼Œcommit ä¼šè¢«é˜»æ­¢ã€‚
    

ç®€å•æ¥è¯´ï¼šHusky = Git hook çš„è‡ªåŠ¨å®‰è£…å™¨ + ç®¡ç†å™¨

æ·»åŠ è¯­æ³•æ£€æŸ¥
------

é™¤äº†æäº¤å‰è¿è¡Œ tsc æ£€æŸ¥ï¼Œé˜²æ­¢ç¡¬æ€§è¯­æ³•é”™è¯¯ä»¥å¤–ï¼Œä»£ç æ ¼å¼ç»Ÿä¸€å’Œè§„èŒƒæ€§æ£€æµ‹ï¼Œä¹Ÿæ˜¯ Git Hook å…¶ä¸­ä¸€ä¸ªä»»åŠ¡ã€‚

è¿™é‡Œä½¿ç”¨ ESLint + TypeScript ESLint + Prettier ç»„åˆæ¥ç»Ÿä¸€ä»£ç è§„èŒƒä¸æ ¼å¼

### å®‰è£…Prettier

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š

    yarn add -D @typescript-eslint/parser @typescript-eslint/eslint-plugin
    yarn add -D prettier eslint-config-prettier eslint-plugin-prettier
    
    

### é…ç½®Prettier

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º eslint.config.js

å®Œæ•´çš„é…ç½®

    // @ts-check
    
    import eslint from "@eslint/js";
    import eslintPluginPrettierRecommended from "eslint-plugin-prettier/recommended";
    import unusedImports from "eslint-plugin-unused-imports";
    import { defineConfig } from "eslint/config";
    import tseslint from "typescript-eslint";
    
    export default defineConfig(
      eslint.configs.recommended,
      tseslint.configs.recommended,
      eslintPluginPrettierRecommended,
    
      {
        plugins: {
          "unused-imports": unusedImports
        },
        files: ["*.js", "src/**/*.{js,jsx,mjs,cjs,ts,tsx}"],
        ignores: ["dist/**/*.*", "node_modules/**/*.*"],
        languageOptions: {
          parserOptions: {
            projectService: true,
            // eslint-disable-next-line @typescript-eslint/ban-ts-comment
            // @ts-expect-error
            tsconfigRootDir: import.meta.dirname
          }
        },
        rules: {
          "max-len": "off",
          "object-curly-spacing": "off",
          "@typescript-eslint/no-explicit-any": "off",
          "@typescript-eslint/no-unused-vars": "off",
          "@typescript-eslint/no-unsafe-function-type": "off",
          "@typescript-eslint/no-this-alias": "off",
          "@typescript-eslint/no-unused-expressions": "off",
          "no-var": "off",
          "prefer-const": "off",
          "no-empty": "off",
          "unused-imports/no-unused-imports": "error",
          "unused-imports/no-unused-vars": [
            "warn",
            {
              vars: "all",
              varsIgnorePattern: "^_",
              args: "after-used",
              argsIgnorePattern: "^_"
            }
          ],
          quotes: "off",
          "prettier/prettier": [
            "warn",
            {
              semi: true,
              singleQuote: false,
              trailingComma: "none",
              printWidth: 180,
              tabWidth: 2,
              useTabs: false,
              bracketSpacing: true,
              arrowParens: "avoid",
              endOfLine: "auto"
            }
          ]
        }
      }
    );
    
    

### æ ¼å¼åŒ–è§„åˆ™è°ƒä¼˜

æ¯ä¸ªå›¢é˜Ÿå¯¹äºä»£ç è§„èŒƒæœ‰è‡ªå·±çš„ç†è§£ï¼Œä¸åŒçš„å›¢é˜Ÿæœ‰ä¸åŒçš„æ ¼å¼åŒ–è§„åˆ™ï¼Œè¯·æ ¹æ®ä½ çš„å®é™…æƒ…å†µæ¥è°ƒæ•´ã€‚

æˆ‘çš„ä»£ç è§„èŒƒéµå¾ªå¦‚ä¸‹åŸåˆ™ï¼š

1.  å…¼é¡¾å¯è¯»æ€§ä¸çµæ´»æ€§ï¼šæŸäº›ä¸¥æ ¼è§„åˆ™è¢«å…³é—­ï¼Œåªä¿ç•™å…³é”®æ£€æŸ¥ã€‚å…·ä½“é…ç½®å¦‚ä¸‹

è§„åˆ™

è¯´æ˜

`"max-len": "off"`

ä¸é™åˆ¶æ¯è¡Œæœ€å¤§é•¿åº¦

`"object-curly-spacing": "off"`

ä¸å¼ºåˆ¶å¯¹è±¡èŠ±æ‹¬å·çš„ç©ºæ ¼é£æ ¼

`"@typescript-eslint/no-explicit-any": "off"`

å…è®¸ä½¿ç”¨ `any` ç±»å‹

`"@typescript-eslint/no-unused-vars": "off"`

æ”¹ç”¨ `unused-imports` æ’ä»¶æ¥æ£€æµ‹æœªä½¿ç”¨å˜é‡

`"@typescript-eslint/no-unsafe-function-type": "off"`

å…è®¸å‡½æ•°ç±»å‹è¾ƒå®½æ¾

`"@typescript-eslint/no-this-alias": "off"`

å…è®¸ä½¿ç”¨ `const self = this` ç­‰åˆ«åæ–¹å¼

`"@typescript-eslint/no-unused-expressions": "off"`

å…è®¸æœªè¢«ä½¿ç”¨çš„è¡¨è¾¾å¼ï¼ˆå¦‚çŸ­è·¯é€»è¾‘ï¼‰

`"no-var": "off"`

å…è®¸ä½¿ç”¨ `var`

`"prefer-const": "off"`

ä¸å¼ºåˆ¶å°†å˜é‡å£°æ˜ä¸º `const`

`"no-empty": "off"`

å…è®¸ç©ºä»£ç å—

`"quotes": "off"`

ä¸å¼ºåˆ¶å•åŒå¼•å·é£æ ¼

2.  æ³¨é‡é‡ç”¨ï¼šå…³æ³¨æœªä½¿ç”¨ import / å˜é‡ã€ä»£ç æ ¼å¼ä¸€è‡´æ€§ã€‚

é¢å¤–å¯ç”¨äº† â€œeslint-plugin-unused-importsâ€ æ’ä»¶ï¼Œä¸“é—¨ç”¨äºæ£€æµ‹æœªä½¿ç”¨çš„ import ä¸å˜é‡,é…ç½®å¦‚ä¸‹

    "unused-imports/no-unused-imports": "error",
    "unused-imports/no-unused-vars": [
      "warn",
      {
        vars: "all",
        varsIgnorePattern: "^_",
        args: "after-used",
        argsIgnorePattern: "^_"
      }
    ]
    
    

ä½¿ç”¨ Prettier å®ç° IDE å’Œ ESLint ä¸€ä½“åŒ–ï¼šæ ¼å¼è§„åˆ™é€šè¿‡ Prettier ç»Ÿä¸€æ§åˆ¶ï¼Œé¿å… ESLint è§„åˆ™é‡å¤ï¼ŒåŒæ—¶é¿å… VS Code æ ¼å¼åŒ–å·¥å…·ä¸ ESLint äº§ç”Ÿå†²çªã€‚

é€‰é¡¹

å€¼

å«ä¹‰

`semi`

`true`

è¯­å¥æœ«å°¾åŠ åˆ†å·

`singleQuote`

`false`

ä½¿ç”¨åŒå¼•å·

`trailingComma`

`"none"`

ä¸ä½¿ç”¨å°¾éšé€—å·

`printWidth`

`180`

æ¯è¡Œæœ€å¤§å®½åº¦ 180

`tabWidth`

`2`

æ¯ä¸ªç¼©è¿›ä¸º 2 ä¸ªç©ºæ ¼

`useTabs`

`false`

ä½¿ç”¨ç©ºæ ¼è€Œé Tab

`bracketSpacing`

`true`

å¯¹è±¡èŠ±æ‹¬å·å†…ä¿ç•™ç©ºæ ¼

`arrowParens`

`"avoid"`

ç®­å¤´å‡½æ•°å‚æ•°å•ä¸ªæ—¶çœç•¥æ‹¬å·

`endOfLine`

`"auto"`

è‡ªåŠ¨é€‚é…æ“ä½œç³»ç»Ÿæ¢è¡Œç¬¦

æŠ¥å‘Šçº§åˆ«

`"warn"`

ä»…æç¤ºè­¦å‘Šï¼Œä¸é˜»æ­¢æ„å»º

æ‰€æœ‰ JS/TS/React/JSON æ–‡ä»¶å‡é‡‡ç”¨ Prettier ä½œä¸ºå”¯ä¸€æ ¼å¼åŒ–å™¨ï¼Œä¸ ESLint ä¸­çš„ Prettier é…ç½®ä¿æŒä¸€è‡´ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2024.cnblogs.com/blog/644861/202511/644861-20251106193049919-1397332701.png)

åœ¨å¼€å‘ç»„æˆå‘˜çš„VSCodeä¸­ï¼Œå®‰è£…esbenpæ’ä»¶ï¼Œå¹¶é…ç½®å¦‚ä¸‹ï¼š

åœ¨\`/.vscode/settings.jsonä¸­æ·»åŠ å¦‚ä¸‹é…ç½®,å¹¶ä¸”å°†æ–‡ä»¶æäº¤åˆ°é¡¹ç›®ä»“åº“

    "[javascript]": {
    		"editor.insertSpaces": true,
    		"editor.defaultFormatter": "esbenp.prettier-vscode"
    
    	},
    	"[typescript]": {
    		"editor.insertSpaces": true,
    		"editor.defaultFormatter": "esbenp.prettier-vscode"
    	},
    	"[typescriptreact]": {
    		"editor.insertSpaces": true,
    		"editor.defaultFormatter": "esbenp.prettier-vscode"
    	},
    	"[json]": {
    		"editor.defaultFormatter": "esbenp.prettier-vscode"
    		
    	},
    

åŒæ—¶å»ºè®®å¼€å¯è‡ªåŠ¨ä¿å­˜

    "editor.formatOnSave": true, 
    "editor.codeActionsOnSave": { "source.fixAll.eslint": "explicit", "source.fixAll.stylelint": "explicit" },
    

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º.prettierrc.jsæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

    export default {
      semi: true,
      singleQuote: false,
      trailingComma: "none",
      printWidth: 180,
      tabWidth: 2,
      useTabs: false,
      bracketSpacing: true,
      arrowParens: "avoid",
      endOfLine: "auto"
    };
    
    

å¦‚æ­¤ï¼Œå½“ä»£VS Codeä¸­ç æ–‡ä»¶ä¿å­˜ï¼Œå°†è‡ªåŠ¨æ‰§è¡Œä¸Eslintè§„åˆ™ä¸€è‡´çš„è‡ªåŠ¨æ ¼å¼åŒ–ã€‚

### æ·»åŠ  Git Hook

åœ¨ `package.json` é‡Œï¼Œæ·»åŠ lintç›¸å…³è„šæœ¬

    {
      "scripts": {
    
        ...
    
        "lint": "eslint src/**/*.{ts,tsx}",
        "lint:fix": "eslint src/**/*.{ts,tsx} --fix",
      }
    }
    

ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•çš„ `.husky/` çš„ `pre-commit` æ–‡ä»¶ï¼Œåœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ â€œRunning ESLint checkâ€ï¼š

    #!/usr/bin/env sh
    . "$(dirname "$0")/_/husky.sh"
    
    echo "ğŸ” Running TypeScript type check..."
    yarn type-check
    TYPE_RESULT=$?
    
    echo "ğŸ” Running ESLint check..."
    yarn lint
    LINT_RESULT=$?
    
    if [ $TYPE_RESULT -ne 0 ] || [ $LINT_RESULT -ne 0 ]; then
      echo "âŒ Commit aborted due to type or lint errors."
      exit 1
    fi
    
    echo "âœ… All checks passed. Proceeding with commit."
    exit 0
    
    

æ·»åŠ Gitæäº¤è§„èŒƒæ£€æŸ¥
-----------

ä¸ºäº†ä¿è¯ä»£ç æäº¤å†å²æ¸…æ™°å¯è¯»ã€ä¾¿äºå›æº¯å’Œè‡ªåŠ¨åŒ–å·¥å…·å¤„ç†ï¼Œæˆ‘ä»¬ç»Ÿä¸€ä½¿ç”¨ Conventional Commits è§„èŒƒ

### å®‰è£…commitlint

    yarn add -D @commitlint/config-conventional @commitlint/cli
    

### é…ç½®commitlint

åˆ¶å®šçš„è§„åˆ™å¦‚ä¸‹ï¼š

*   ç±»å‹ - ç”¨äºæè¿°æœ¬æ¬¡æäº¤çš„ç±»åˆ«ï¼Œå¿…é¡»ä»ä»¥ä¸‹åˆ—è¡¨ä¸­é€‰æ‹©ï¼š

ç±»å‹

è¯´æ˜

`feat`

æ–°åŠŸèƒ½ï¼ˆfeatureï¼‰

`fix`

ä¿®å¤ bug

`docs`

æ–‡æ¡£ä¿®æ”¹

`style`

ä»£ç æ ¼å¼ä¿®æ”¹ï¼ˆä¸å½±å“åŠŸèƒ½ï¼Œå¦‚ç©ºæ ¼ã€åˆ†å·ã€ç¼©è¿›ç­‰ï¼‰

`refactor`

é‡æ„ä»£ç ï¼ˆæ—¢ä¸æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤ bugï¼‰

`perf`

æ€§èƒ½ä¼˜åŒ–

`test`

æµ‹è¯•ç›¸å…³ä¿®æ”¹ï¼ˆæ–°å¢æˆ–ä¿®æ”¹å·²æœ‰æµ‹è¯•ï¼‰

`revert`

å›æ»š commit

`build`

æ„å»ºæµç¨‹ã€ä¾èµ–å˜æ›´ï¼ˆå¦‚å‡çº§ npm åŒ…ã€ä¿®æ”¹æ‰“åŒ…é…ç½®ï¼‰

`ci`

CI é…ç½®æˆ–è„šæœ¬ä¿®æ”¹

`types`

ç±»å‹å®šä¹‰æ–‡ä»¶ä¿®æ”¹ï¼ˆå¦‚ TypeScript ç±»å‹æ–‡ä»¶ï¼‰

*   å¯é€‰èŒƒå›´ - ç”¨äºæè¿°æœ¬æ¬¡æäº¤å½±å“çš„æ¨¡å—æˆ–èŒƒå›´ï¼Œä¾‹å¦‚ `button`ã€`api`ã€`login` ç­‰ï¼Œéå¿…å¡«ï¼š  
    `feat(login): å¢åŠ ç™»å½•éªŒè¯ç åŠŸèƒ½`
    
*   ä¸»é¢˜ - ç®€æ˜æ‰¼è¦æè¿°æœ¬æ¬¡æäº¤åšäº†ä»€ä¹ˆï¼Œ**ä¸åšå¤§å°å†™é™åˆ¶** ï¼š`fix(api): ä¿®å¤è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£æŠ¥é”™ docs: æ›´æ–° README æ–‡æ¡£è¯´æ˜`
    
*   æ­£æ–‡ - æ­£æ–‡ä¸ºå¯¹æäº¤çš„è¯¦ç»†æè¿°ï¼Œå¯ä»¥åˆ†è¡Œä¹¦å†™ï¼Œ**è¦æ±‚æ­£æ–‡å‰ç©ºä¸€è¡Œ**ï¼Œå¯ç”¨äºè¯´æ˜å®ç°æ€è·¯ã€åŸå› ã€å¯èƒ½å½±å“ç­‰ï¼š
    

    feat(payment): æ·»åŠ æ”¯ä»˜å®æ”¯ä»˜åŠŸèƒ½
    
    - æ”¯æŒæ‰«ç æ”¯ä»˜
    - æ”¯æŒæ‰‹æœºç«¯æ”¯ä»˜
    - æ›´æ–°æ”¯ä»˜ç›¸å…³æ–‡æ¡£
    
    

*   è„šæ³¨ - ç”¨äºå…³è” issue æˆ–è®°å½• BREAKING CHANGEï¼š`BREAKING CHANGE: æ¥å£è¿”å›å­—æ®µ userId ä¿®æ”¹ä¸º uid Closes #123`

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `.commitlintrc.json` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

    export default {
      // ç»§æ‰¿çš„è§„åˆ™
      extends: ["@commitlint/config-conventional"],
      // å®šä¹‰è§„åˆ™ç±»å‹
      rules: {
        "body-leading-blank": [2, "always"], // ç¡®ä¿æäº¤æ¶ˆæ¯æ­£æ–‡ä¹‹å‰æœ‰ä¸€è¡Œç©ºç™½è¡Œ
        "type-empty": [2, "never"], // ä¸å…è®¸æäº¤æ¶ˆæ¯çš„ type ç±»å‹ä¸ºç©º
        "subject-case": [0], // subject å¤§å°å†™ä¸åšæ ¡éªŒ
        // type ç±»å‹å®šä¹‰ï¼Œè¡¨ç¤º git æäº¤çš„ type å¿…é¡»åœ¨ä»¥ä¸‹ç±»å‹èŒƒå›´å†…
        "type-enum": [
          2,
          "always",
          [
            "feat", // æ–°åŠŸèƒ½ feature
            "fix", // ä¿®å¤ bug
            "docs", // æ–‡æ¡£æ³¨é‡Š
            "style", // ä»£ç æ ¼å¼(ä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨)
            "refactor", // é‡æ„(æ—¢ä¸å¢åŠ æ–°åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®å¤bug)
            "perf", // æ€§èƒ½ä¼˜åŒ–
            "test", // æ·»åŠ ç–æ¼æµ‹è¯•æˆ–å·²æœ‰æµ‹è¯•æ”¹åŠ¨
            "revert", // å›æ»šcommit
            "build", // æ„å»ºæµç¨‹ã€å¤–éƒ¨ä¾èµ–å˜æ›´ (å¦‚å‡çº§ npm åŒ…ã€ä¿®æ”¹æ‰“åŒ…é…ç½®ç­‰)',
            "ci", // ä¿®æ”¹CIé…ç½®ã€è„šæœ¬
            "types" // ç±»å‹å®šä¹‰æ–‡ä»¶ä¿®æ”¹
          ]
        ]
      }
    };
    
    

### æ·»åŠ  Git Hook

åœ¨ `package.json` é‡Œï¼Œæ·»åŠ commitlintè„šæœ¬:

    {
      "scripts": {
    
        ...
    
        "commitlint": "commitlint --config commitlint.config.js --edit"
      }
    }
    

åœ¨é¡¹ç›®æ ¹ç›®çš„ `.husky/` ç›®å½•ä¸­åˆ›å»º `commit-msg` æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

    #!/usr/bin/env sh
    . "$(dirname "$0")/_/husky.sh"
    
    echo "ğŸ” Running commitlint check..."
    yarn commitlint
    RESULT=$?
    
    if [ $RESULT -ne 0 ] ; then
      echo "âŒ Commit aborted due to commitlint errors."
      exit 1
    fi
    
    echo "âœ… All checks passed. Proceeding with commit."
    exit 0
    
    
    

è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†å‰ç«¯é¡¹ç›®çš„ä»£ç è´¨é‡æ£€æŸ¥å·¥å…·çš„æ­å»ºã€‚

æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š[æ—æ™“lx](https://www.cnblogs.com/jevonsflash/)ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š[https://www.cnblogs.com/jevonsflash/p/19197576](https://www.cnblogs.com/jevonsflash/p/19197576)