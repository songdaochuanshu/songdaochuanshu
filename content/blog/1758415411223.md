---
layout: post
title: '[Nacos/Docker/MCP] Nacos 3.x : 为 AI MCP 而生'
date: "2025-09-21T00:43:31Z"
---
\[Nacos/Docker/MCP\] Nacos 3.x : 为 AI MCP 而生
============================================

0 序言 ： Nacos 3.x 的发布
====================

*   2025年4月28日，Nacos 3.0 正式发布：MCP Registry、安全零信任、链接更多生态

> *   升级 MCP Registry，围绕着 MCP 服务管理，MCP 多种类型注册，包含 MCP Server 注册、编排、动态调试和管理，并且提供 `Nacos-MCP-Router` 可以进行 MCP 动态发现，可以自动安装、代理 MCP Server，全生态面向 AI Registry 进行升级；

![image](https://img2024.cnblogs.com/blog/1173617/202509/1173617-20250920002111142-258289584.png)

![image](https://img2024.cnblogs.com/blog/1173617/202509/1173617-20250920002122351-921704888.png)

> *   升级安全架构，默认开启鉴权，基础架构一系列升级，作为云原生时代的基础设施级产品，Nacos 3.0 不仅是技术能力的跃升，更是以更高效、安全的方式帮助用户构建云原生 AI 应用架构！

*   做一个对未来1-3年乃至更长时间的技术趋势判断：

> 对于国内开发者而言，基于 Java 构建的 AI 原生应用架构中，尤其是涉及到 **MCP 管理**的场景中，则必然少不了 Nacos，少不了 Nacos 3.x。

*   对于 Nacos 1.x / 2.x 不了解的朋友，可参见历往篇章。

> *   [Nacos <1> 架构与原理 - 博客园/千千寰宇](https://www.cnblogs.com/johnnyzen/p/18401560)
> *   [Nacos <2> 基于 Docker 安装Nacos 2.x - 博客园/千千寰宇](https://www.cnblogs.com/johnnyzen/p/18097914)
> *   [Nacos <3> 应用场景及高频问题(FAQ) - 博客园/千千寰宇](https://www.cnblogs.com/johnnyzen/p/18401612)

1 概述： Nacos 3.x
===============

> > Nacos 3.x 的诞生背景、特性

*   `Nacos`, `/nɑ:kəʊs/`是 **D**ynamic **N**aming and **Co**nfiguration **S**ervice 的**首字母简称**。

> *   其定位于一个**更易于构建云原生 AI 应用的动态服务发现、配置管理和服务管理平台**。
> *   从 2018 年 7 月开始宣布开源以来，已经走过了第六个年头，在这六年里，备受广大开源用户欢迎，收获许多社区大奖。
> *   Nacos 在社区共同的建设下不断成长，逐步的开始帮助用户解决实际问题，助力企业数字化转型，目前已经广泛的使用在国内的公司中，根据微服务领域调查问卷，Nacos 在注册配置中心领域已经成为**国内首选**，占有 50%+ 国内市场份额，被各行各业的头部企业广泛使用！

![image](https://img2024.cnblogs.com/blog/1173617/202509/1173617-20250920001811935-33514201.png)

*   `Nacos` 在 2.X 版本经过近三年的技术演进，已成功实现最初设计的高性能架构与灵活扩展能力，并持续优化产品易用性与安全防护体系。

> 随着**人工智能时代**的全面到来，**大语言模型**（ `LLM` ）的**成熟应用**正推动行业进入**AI原生化发展阶段**。  
> 在此背景下，业界对**AI原生应用**的【开发标准】的探索、`AI Agent` **框架**的技术创新、**动态** `Prompt` 的**场景化需求**，以及 `MCP` 协议、`A2A` 通信规范等技术生态的构建，均对**服务治理体系**提出了新的要求。  
> `Nacos 3.0` **架构迭代**的就是为了更好的这些**技术趋势**；  
> `Nacos 3.0` 将**重点构建**【面向AI原生架构的服务治理平台】，为 **模型** / **MCP Server** / **Agent** 等**新型业务智能场景架构**提供更高效的运行支撑；

*   `Nacos 3.0` 提升【安全性】，整体架构安全拆分，默认开启鉴权，并且支持动态数据源密钥等零信任方案；多语言生态，覆盖主流开发语言，Python、GoLang、Rust 作为重要部分，发布多个核心组件，可以打通 K8S 生态的 Service / ConfigMap / Secret 数据，面向全场景可以作为**统一管理平台**；

![image](https://img2024.cnblogs.com/blog/1173617/202509/1173617-20250920002033590-1396097497.png)

2 安装部署
======

> Nacos 3.x (standalone版 + Docker 镜像方式)

Step1 拉取镜像
----------

    //拉取镜像
    docker pull nacos/nacos-server:v3.0.3
    
    //查看镜像
    docker images
    

> 拉取时最好指定版本，可在github查看所需版本： [https://github.com/nacos-group/nacos-docker](https://github.com/nacos-group/nacos-docker)

Step2 启动镜像
----------

*   以 standalone 版为例:

    docker run -d --name nacos \
    -p 8080:8080 \
    -p 8848:8848 \
    -p 9848:9848 \
    -e MODE=standalone \
    -e NACOS_AUTH_TOKEN=dG9rZW50b2tlbnRva2VudG9rZW50b2tlbnRva2VudG9rZW4= \
    -e NACOS_AUTH_IDENTITY_KEY=MyAuthorization123456 \
    -e NACOS_AUTH_IDENTITY_VALUE=MyToken123456 \
    nacos/nacos-server:v3.0.3
    

*   相比 nacos 2.x ，nacos 3.x 多了**【强制】**要求配置的3个【环境变量】：

> *   `NACOS_AUTH_TOKEN` : Nacos 用于生成JWT Token的密钥，使用长度大于32字符的字符串，再经过Base64编码。
> 
> > 未配置时，`docker logs nacos`会显示错误日志: `echo 'env NACOS_AUTH_TOKEN must be set with Base64 String.'`，如下2个变量的错误日志类比。  
> > 基于shell命令获取base64编码的文本的参考命令: `echo -n "your_token" | base64`

> *   `NACOS_AUTH_IDENTITY_KEY` : Nacos Server端之间 Inner API的身份标识的Key，必填。
> *   `NACOS_AUTH_IDENTITY_VALUE` : Nacos Server端之间 Inner API的身份标识的Value，必填。

*   如果使用非 Docker 部署，可直接修改 `application.properties` 文件：

    nacos.core.auth.enabled=true
    nacos.core.auth.server.identity.key=Authorization
    nacos.core.auth.server.identity.value=my_token_value
    nacos.core.auth.plugin.nacos.token.secret.key=your_secret_key
    

> 重启 Nacos 服务后生效。

> 如需将配置文件持久化到 mysql，可参考:
> 
> > [\[nacos\] Nacos <2> 基于 Docker 安装Nacos 2.x - 博客园/千千寰宇](https://www.cnblogs.com/johnnyzen/p/18097914)

Step3 访问验证
----------

*   验证Nacos服务是否启动成功

> *   方法1：通过`docker logs -f $container_id`命令，查看Nacos服务启动日志，如果看到如下日志，说明服务启动成功。

    Nacos started successfully in xxxx mode. use xxxx storage
    

![image](https://img2024.cnblogs.com/blog/1173617/202509/1173617-20250919235951975-61035565.png)

> *   方法2：

    curl -X POST "http://<nacos_host>:8848/nacos/v1/auth/login" -d "username=nacos&password=nacosPassword"
    

> > 如: curl -X POST "[http://127.0.0.1:8848/nacos/v1/auth/login](http://127.0.0.1:8848/nacos/v1/auth/login)" -d "username=nacos&password=nacosPassword"

*   访问: [http://127.0.01:8848/nacos/index.html](http://127.0.01:8848/nacos/index.html) \[x\]

> 页面会显示: `Nacos Console default port is 8080, and the path is /.`

*   [http://127.0.0.1:8080/#/](http://127.0.0.1:8080/#/) \[√\]

![image](https://img2024.cnblogs.com/blog/1173617/202509/1173617-20250919235311879-1667390571.png)

> 相比 nacos 2.x ，nacos 3.x 最大的新增特性即：【MCP管理】

![image](https://img2024.cnblogs.com/blog/1173617/202509/1173617-20250919235521757-392389839.png)

Y 推荐文献
======

*   [\[nacos\] Nacos <2> 基于 Docker 安装Nacos 2.x - 博客园/千千寰宇](https://www.cnblogs.com/johnnyzen/p/18097914)
    
*   Nacos
    

> *   [https://github.com/nacos-group/nacos-docker](https://github.com/nacos-group/nacos-docker)
> *   [https://github.com/nacos-group/nacos-mcp-router](https://github.com/nacos-group/nacos-mcp-router)
> *   [Nacos 3.0 正式发布：MCP Registry、安全零信任、链接更多生态 - Nacos](https://nacos.io/blog/nacos-gvr7dx_awbbpb_gg16sv97bgirkixe/)
> *   [Nacos Docker 快速开始 - Nacos](https://nacos.io/docs/v3.0/quickstart/quick-start-docker)
> 
> > [https://nacos.io/docs/v3.0/quickstart/quick-start-docker](https://nacos.io/docs/v3.0/quickstart/quick-start-docker)

X 参考文献
======

*   [【Nacos】env NACOS\_AUTH\_TOKEN must be set with Base64 String. - CSDN](https://blog.csdn.net/qq_34988204/article/details/147928474)

> `env NACOS_AUTH_TOKEN must be set with Base64 String.`

*   [【Nacos】env NACOS\_AUTH\_IDENTITY\_KEY must be set. - CSDN](https://blog.csdn.net/qq_34988204/article/details/147929057)

> `env NACOS_AUTH_IDENTITY_KEY must be set.`

*   [Ubuntu 22.04 (WSL2) 上使用 Docker 安装 Nacos 3.0.0 - jishuzhan.net](https://jishuzhan.net/article/1921241674232221698)

![QQ沟通交流群](https://blog-static.cnblogs.com/files/johnnyzen/cnblogs-qq-group-qrcode.gif?t=1679679148)

本文作者： **[千千寰宇](https://github.com/Johnny-ZTSD)**  
本文链接： [https://www.cnblogs.com/johnnyzen](https://www.cnblogs.com/johnnyzen)  
关于博文：评论和私信会在第一时间回复，或[直接私信](https://msg.cnblogs.com/msg/send/johnnyzen)我。  
版权声明：本博客所有文章除特别声明外，均采用 [BY-NC-SA](http://blog.sina.com.cn/s/blog_896327b90102y6c6.html "https://creativecommons.org/licenses/by-nc-nd/4.0/") 许可协议。转载请注明出处！  
日常交流：大数据与软件开发-QQ交流群: 774386015 **【[入群二维码](javascript:void\(0\);)】**参见左下角。您的支持、鼓励是博主技术写作的重要动力！