---
layout: post
title: "ç°ä»£ CSS é«˜é˜¶æŠ€å·§ï¼Œåƒ Canvas ä¸€æ ·è‡ªç”±ç»˜å›¾æ„å»ºæ ·å¼ï¼"
date: "2022-12-12T22:16:32.613Z"
---
ç°ä»£ CSS é«˜é˜¶æŠ€å·§ï¼Œåƒ Canvas ä¸€æ ·è‡ªç”±ç»˜å›¾æ„å»ºæ ·å¼ï¼
================================

åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ -- [ç°ä»£ CSS ä¹‹é«˜é˜¶å›¾ç‰‡æ¸éšæ¶ˆå¤±æœ¯](https://github.com/chokcoco/cococss/issues/23)ï¼Œæˆ‘ä»¬å€ŸåŠ©äº† CSS @Property åŠ CSS Mask å±æ€§ï¼ŒæˆåŠŸçš„å®ç°äº†è¿™æ ·ä¸€ç§å›¾ç‰‡æ¸å˜æ¶ˆå¤±çš„æ•ˆæœï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24fc875f0a6f46ccaba0840cd654730a~tplv-k3u1fbpfcp-zoom-1.image)

[CodePen Demo -- åŸºäº @property å’Œ mask çš„æ–‡æœ¬æ¸éšæ¶ˆå¤±æœ¯](https://codepen.io/Chokcoco/pen/qBKPgZY)

ä½†æ˜¯ï¼Œè¿™ä¸ªæ•ˆæœçš„ç¼ºé™·ä¹Ÿéå¸¸æ˜æ˜¾ï¼Œè™½ç„¶å€ŸåŠ©äº† SCSS ç®€åŒ–äº†éå¸¸å¤šçš„ä»£ç ï¼Œä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æŸ¥çœ‹ç¼–è¯‘åçš„ CSS æ–‡ä»¶ï¼Œä¼šå‘ç°ï¼Œåœ¨åˆ©ç”¨ SCSS åªæœ‰ 80 çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘åçš„ CSS æ–‡ä»¶è¡Œæ•°é«˜è¾¾ 2400+ è¡Œï¼Œå®åœ¨æ˜¯å¤ªå¤¸å¼ äº†ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6821d3b4be1c4e169829bea44c09d63d~tplv-k3u1fbpfcp-zoom-1.image)

ç©¶å…¶åŸå› åœ¨äºï¼Œæˆ‘ä»¬åˆ©ç”¨åŸç”Ÿçš„ CSS å»æ§åˆ¶ 400 ä¸ªå°å—çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œæ§åˆ¶äº† 400 ä¸ª CSS å˜é‡ï¼ä»£ç é‡å› è€Œå˜å¾—å¦‚æ­¤ä¹‹å¤§ã€‚

CSS Houdini ä¹‹ CSS Paint API
---------------------------

é‚£ä¹ˆï¼Œå¦‚ä½•æœ‰æ•ˆçš„é™ä½ä»£ç é‡å‘¢ï¼Ÿ

åˆæˆ–è€…è¯´ï¼Œåœ¨ä»Šå¤©ï¼Œæ˜¯å¦ CSS è¿˜å­˜åœ¨ç€æ›´è¿›ä¸€æ­¥çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿå®ç°æ›´ä¸ºå¼ºå¤§çš„æ•ˆæœï¼Ÿ

æ²¡é”™ï¼Œæ˜¯å¯ä»¥çš„ï¼Œè¿™ä¹Ÿå°±å¼•å‡ºäº†ä»Šå¤©çš„ä¸»è§’ï¼Œ**CSS Houdini ä¹‹ CSS Paint API**ã€‚

é¦–å…ˆï¼Œä»€ä¹ˆæ˜¯ CSS Houdiniï¼Ÿ

Houdini æ˜¯ä¸€ç»„åº•å±‚ APIï¼Œå®ƒä»¬å…¬å¼€äº† CSS å¼•æ“çš„å„ä¸ªéƒ¨åˆ†ï¼Œä»è€Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿé€šè¿‡åŠ å…¥æµè§ˆå™¨æ¸²æŸ“å¼•æ“çš„æ ·å¼å’Œå¸ƒå±€è¿‡ç¨‹æ¥æ‰©å±• CSSã€‚Houdini æ˜¯ä¸€ç»„ APIï¼Œå®ƒä»¬ä½¿å¼€å‘äººå‘˜å¯ä»¥ç›´æ¥è®¿é—® [CSS å¯¹è±¡æ¨¡å‹](https://developer.mozilla.org/zh-CN/docs/Web/API/CSS_Object_Model) ï¼ˆCSSOMï¼‰ï¼Œä½¿å¼€å‘äººå‘˜å¯ä»¥ç¼–å†™æµè§ˆå™¨å¯ä»¥è§£æä¸º CSS çš„ä»£ç ï¼Œä»è€Œåˆ›å»ºæ–°çš„ CSS åŠŸèƒ½ï¼Œè€Œæ— éœ€ç­‰å¾…å®ƒä»¬åœ¨æµè§ˆå™¨ä¸­æœ¬åœ°å®ç°ã€‚

è€Œ CSS Paint API åˆ™æ˜¯ W3C è§„èŒƒä¸­ä¹‹ä¸€ï¼Œç›®å‰çš„ç‰ˆæœ¬æ˜¯ [CSS Painting API Level 1](https://drafts.css-houdini.org/css-paint-api/#paintworkletglobalscope)ã€‚å®ƒä¹Ÿè¢«ç§°ä¸º CSS Custom Paint æˆ–è€… Houdini's Paint Workletã€‚

ç®€å•æ¥è¯´äººè¯ï¼ŒCSS Paint API çš„ä¼˜ç¼ºç‚¹éƒ½å¾ˆæ˜æ˜¾ã€‚

**CSS Paint API çš„ä¼˜ç‚¹**ï¼š

1.  å®ç°æ›´ä¸ºå¼ºå¤§çš„ CSS åŠŸèƒ½ï¼Œç”šè‡³æ˜¯å¾ˆå¤š CSS åŸæœ¬ä¸æ”¯æŒçš„åŠŸèƒ½
2.  å°†è¿™äº›è‡ªå®šä¹‰çš„åŠŸèƒ½ï¼Œå¾ˆå¥½çš„å°è£…èµ·æ¥ï¼Œå½“åˆä¸€ä¸ªå±æ€§å¿«é€Ÿå¤ç”¨

å½“ç„¶ï¼Œä¼˜ç‚¹çœ‹ç€å¾ˆç¾å¥½ï¼Œç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œ**CSS Paint API çš„ç¼ºç‚¹**ï¼š

1.  éœ€è¦å†™ä¸€å®šé‡çš„ JavaScript ä»£ç ï¼Œæœ‰ä¸€å®šçš„ä¸Šæ‰‹æˆæœ¬
2.  ç°é˜¶æ®µå…¼å®¹çš„é—®é¢˜

å°è¯•ç‰›åˆ€ registerPaint
------------------

[CSS Houdini](https://developer.mozilla.org/zh-CN/docs/Web/Guide/Houdini) çš„ç‰¹æ€§å°±æ˜¯ [Worklet (en-US)](https://developer.mozilla.org/en-US/docs/Web/API/Worklet)ã€‚åœ¨å®ƒçš„å¸®åŠ©ä¸‹ï¼Œä½ å¯ä»¥é€šè¿‡å¼•å…¥ä¸€è¡Œ JavaScript ä»£ç æ¥å¼•å…¥é…ç½®åŒ–çš„ç»„ä»¶ï¼Œä»è€Œåˆ›å»ºæ¨¡å—å¼çš„ CSSã€‚ä¸ä¾èµ–ä»»ä½•å‰ç½®å¤„ç†å™¨ã€åç½®å¤„ç†å™¨æˆ–è€… JavaScript æ¡†æ¶ã€‚

åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç›´æ¥æ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ã€‚

    <div style="--color: red"></div>
    <div style="--color: blue"></div>
    <div style="--color: yellow"></div>
    
    <script>
    if (CSS.paintWorklet) {              
        CSS.paintWorklet.addModule('/CSSHoudini.js');
    }
    </script>
    

    div {
        margin: auto;
        width: 100px;
        height: 100px;
        background: paint(drawBg);
    }
    

    // è¿™ä¸ªæ–‡ä»¶çš„åå­—ä¸º CSSHoudini.js
    // å¯¹åº”ä¸Šé¢ HTML ä»£ç ä¸­çš„ CSS.paintWorklet.addModule('/CSSHoudini.js')
    registerPaint('drawBg', class {
      
       static get inputProperties() {return ['--color']}
       
       paint(ctx, size, properties) {
           const c = properties.get('--color');
          
           ctx.fillStyle = c;
           ctx.fillRect(0, 0, size.width, size.height);
       }
    });
    

å…ˆçœ‹çœ‹æœ€ç»ˆçš„ç»“æœï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fbe6588ec4954291b1098af34ec89afd~tplv-k3u1fbpfcp-zoom-1.image)

çœ‹ä¼¼æœ‰ç‚¹ç‚¹å¤æ‚ï¼Œå…¶å®éå¸¸å¥½ç†è§£ã€‚ä»”ç»†çœ‹æˆ‘ä»¬çš„ CSS ä»£ç ï¼Œåœ¨ `background` èµ‹å€¼çš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰ç›´æ¥å†™å…·ä½“é¢œè‰²ï¼Œè€Œæ˜¯å€ŸåŠ©äº†ä¸€ä¸ªè‡ªå®šä¹‰äº† CSS Houdini å‡½æ•°ï¼Œå®ç°äº†ä¸€ä¸ªåä¸º `drawBg` çš„æ–¹æ³•ã€‚ä»è€Œå®ç°çš„ç»™ Div ä¸Šè‰²ã€‚

registerPaint æ˜¯ä»¥ worker çš„å½¢å¼å·¥ä½œï¼Œå…·ä½“æœ‰å‡ ä¸ªæ­¥éª¤ï¼š

1.  å»ºç«‹ä¸€ä¸ª CSSHoudini.jsï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³ç”¨ CSS Painting APIï¼Œå…ˆåœ¨è¿™ä¸ª JS æ–‡ä»¶ä¸­æ³¨å†Œè¿™ä¸ªæ¨¡å— registerPaint('drawBg', class)ï¼Œè¿™ä¸ª class æ˜¯ä¸€ä¸ªç±»ï¼Œä¸‹é¢ä¼šå…·ä½“è®²åˆ°
2.  æˆ‘ä»¬éœ€è¦åœ¨ HTML ä¸­å¼•å…¥ CSS.paintWorklet.addModule('CSSHoudini.js')ï¼Œå½“ç„¶ `CSSHoudini.js` åªæ˜¯ä¸€ä¸ªåå­—ï¼Œæ²¡æœ‰ç‰¹å®šçš„è¦æ±‚ï¼Œå«ä»€ä¹ˆéƒ½å¯ä»¥ï¼Œ
3.  è¿™æ ·ï¼Œæˆ‘ä»¬å°±æˆåŠŸæ³¨å†Œäº†ä¸€ä¸ªåä¸º `drawBg` çš„è‡ªå®šä¹‰ Houdini æ–¹æ³•ï¼Œç°åœ¨ï¼Œå¯ä»¥ç”¨å®ƒæ¥æ‰©å±• CSS çš„åŠŸèƒ½
4.  åœ¨ CSS ä¸­ä½¿ç”¨ï¼Œå°±åƒä»£ç ä¸­ç¤ºæ„çš„é‚£æ · `background: paint(drawBg)`
5.  æ¥ä¸‹æ¥ï¼Œå°±æ˜¯å…·ä½“çš„ registerPaint å®ç°çš„ drawBg çš„å†…éƒ¨çš„ä»£ç 

ä¸Šé¢çš„æ­¥éª¤ææ˜ç™½åï¼Œæ ¸å¿ƒçš„é€»è¾‘ï¼Œéƒ½åœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ drawBg è¿™ä¸ªæ–¹æ³•åé¢å®šä¹‰çš„ class é‡Œé¢ã€‚CSS Painting API éå¸¸ç±»ä¼¼äº Canvasï¼Œè¿™é‡Œé¢çš„æ ¸å¿ƒé€»è¾‘å°±æ˜¯ï¼š

1.  å¯ä»¥é€šè¿‡ `static get inputProperties() {}` æ‹¿åˆ°å„ç§ä» CSS ä¼ é€’è¿›æ¥çš„ CSS å˜é‡
2.  é€šè¿‡ä¸€å¥—ç±»ä¼¼ Canvas çš„ API å®Œæˆæ•´ä¸ªå›¾ç‰‡çš„ç»˜åˆ¶å·¥ä½œ

è€Œæˆ‘ä»¬ä¸Šé¢ DEMO åšçš„äº‹æƒ…ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè·å–åˆ° CSS ä¼ é€’è¿›æ¥çš„ CSS å˜é‡çš„å€¼ã€‚ç„¶åï¼Œé€šè¿‡ `ctx.fillStyle` å’Œ `ctx.fillRect` å®Œæˆæ•´ä¸ªèƒŒæ™¯è‰²çš„ç»˜åˆ¶ã€‚

ä½¿ç”¨ registerPaint å®ç°è‡ªå®šä¹‰èƒŒæ™¯å›¾æ¡ˆ
--------------------------

OKï¼Œäº†è§£äº†ä¸Šé¢æœ€ç®€å•çš„ DEMO ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°è¯•ç¨å¾®è¿›é˜¶ä¸€ç‚¹ç‚¹ã€‚åˆ©ç”¨ registerPaint å®ç°ä¸€ä¸ª `circleBgSet` çš„è‡ªå®šä¹‰ CSS æ–¹æ³•ï¼Œå®ç°ç±»ä¼¼äºè¿™æ ·ä¸€ä¸ªèƒŒæ™¯å›¾æ¡ˆï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e1c9732439d46bbb7052b760f3a95c4~tplv-k3u1fbpfcp-zoom-1.image)

[CodePen Demo -- CSS Hudini Example - Background Circle](https://codepen.io/Chokcoco/pen/abKExxN)

é¦–å…ˆï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦åœ¨ HTML ä¸­ï¼Œåˆ©ç”¨ `CSS.paintWorklet.addModule('')` æ³¨å†Œå¼•å…¥æˆ‘ä»¬çš„ JavaScript æ–‡ä»¶ã€‚

    <div style=""></div>
    
    <script>
    if (CSS.paintWorklet) {              
         CSS.paintWorklet.addModule('/CSSHoudini.js'');
    }
    </script>
    

å…¶æ¬¡ï¼Œåœ¨ CSS ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è°ƒç”¨ background å±æ€§çš„æ—¶å€™ï¼Œä¼ å…¥æˆ‘ä»¬å³å°†è¦å®ç°çš„æ–¹æ³•ï¼š

    div {
        width: 100vw;
        height: 1000vh;
        background: paint(circleBgSet);
        --gap: 3;
        --color: #f1521f;
        --size: 64;
    }
    

å¯ä»¥çœ‹åˆ°ï¼Œæ ¸å¿ƒåœ¨äº `background: paint(circleBgSet)`ï¼Œæˆ‘ä»¬å°†ç»˜åˆ¶èƒŒæ™¯çš„å·¥ä½œï¼Œäº¤ç»™æ¥ä¸‹æ¥æˆ‘ä»¬è¦å®ç°çš„ circleBgSet æ–¹æ³•ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å®šä¹‰äº† 3 ä¸ª CSS å˜é‡ï¼Œå®ƒä»¬çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š

1.  `--gap`ï¼šè¡¨ç¤ºåœ†ç‚¹èƒŒæ™¯çš„é—´éš™
2.  `-color`ï¼šè¡¨ç¤ºåœ†ç‚¹çš„é¢œè‰²
3.  `--size`ï¼šè¡¨ç¤ºåœ†ç‚¹çš„æœ€å¤§å°ºå¯¸

å¥½äº†ï¼Œæ¥ä¸‹æ¥ï¼Œåªéœ€è¦åœ¨ JavaScript æ–‡ä»¶ä¸­ï¼Œåˆ©ç”¨ CSS Painting API å®ç° `circleBgSet` æ–¹æ³•å³å¯ã€‚

æ¥çœ‹çœ‹å®Œæ•´çš„ JavaScript ä»£ç ï¼š

    // è¿™ä¸ªæ–‡ä»¶çš„åå­—ä¸º CSSHoudini.js
    registerPaint(
        "circleBgSet",
        class {
            static get inputProperties() {
                return [
                    "--gap", 
                    "--color",
                    "--size"
                ];
            }
    
            paint(ctx, size, properties) {
                const gap = properties.get("--gap");
                const color = properties.get("--color");
                const eachSize = properties.get("--size");
                const halfSize = eachSize / 2;
                
                const n = size.width / eachSize;
                const m = size.height / eachSize;
                
                ctx.fillStyle = color;
               
                for (var i = 0; i < n + 1; i++) {
                    for (var j = 0; j < m + 1; j++) {
                        
                        let x = i * eachSize + ( j % 2 === 0 ? halfSize : 0);
                        let y = j * eachSize / gap;
                        let radius = i * 0.85;
                        
                        ctx.beginPath();
                        ctx.arc(x, y, radius, 0, 2 * Math.PI);
                        ctx.fill();
                    }
                }
            }
        }
    );
    

ä»£ç å…¶å®ä¹Ÿä¸å¤šï¼Œå¹¶ä¸”æ ¸å¿ƒçš„ä»£ç éå¸¸å¥½ç†è§£ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å†ç®€å•çš„è§£é‡Šä¸‹ï¼š

1.  `static get inputProperties() {}`ï¼Œæˆ‘ä»¬åœ¨ CSS ä»£ç ä¸­å®šä¹‰äº†ä¸€äº› CSS å˜é‡ï¼Œè€Œéœ€è¦å–åˆ°è¿™äº›å˜é‡çš„è¯ï¼Œéœ€è¦åˆ©ç”¨åˆ°è¿™ä¸ªæ–¹æ³•ã€‚å®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿè®¿é—®æ‰€æœ‰ CSS è‡ªå®šä¹‰å±æ€§å’Œå®ƒä»¬è®¾ç½®çš„å€¼ã€‚
    
2.  `paint(ctx, size, properties) {}` æ ¸å¿ƒç»˜ç”»çš„æ–¹æ³•ï¼Œå…¶ä¸­ ctx ç±»ä¼¼äº Canvas 2D ç”»å¸ƒçš„ ctx ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œsize è¡¨ç¤º PaintSize å¯¹è±¡ï¼Œå¯ä»¥æ‹¿åˆ°å¯¹äºå…ƒç´ çš„é«˜å®½å€¼ï¼Œè€Œ properties åˆ™æ˜¯è¡¨ç¤º StylePropertyMapReadOnly å¯¹è±¡ï¼Œå¯ä»¥æ‹¿åˆ° CSS å˜é‡ç›¸å…³çš„ä¿¡æ¯
    

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a0be47ce004466e9cf692c380b1f05d~tplv-k3u1fbpfcp-zoom-1.image)

3.  æœ€ç»ˆï¼Œä»”ç»†çœ‹çœ‹æˆ‘ä»¬çš„ `paint()` æ–¹æ³•ï¼Œæ ¸å¿ƒåšçš„å°±æ˜¯æ‹¿åˆ° CSS å˜é‡åï¼ŒåŸºäºåŒé‡å¾ªç¯ï¼ŒæŠŠæˆ‘ä»¬è¦çš„å›¾æ¡ˆç»˜åˆ¶åœ¨ç”»å¸ƒä¸Šã€‚è¿™é‡Œæ ¸å¿ƒå°±æ˜¯è°ƒç”¨äº†ä¸‹è¿° 4 ä¸ªæ–¹æ³•ï¼Œå¯¹ Canvas äº†è§£çš„åŒå­¦ä¸éš¾å‘ç°ï¼Œè¿™é‡Œçš„ API å’Œ Canvas æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚
    *   `ctx.fillStyle = color`
    *   `ctx.beginPath()`
    *   `ctx.arc(x, y, radius, 0, 2 * Math.PI)`
    *   `ctx.fill()`

è¿™é‡Œï¼Œå…¶å® CSS Houdini çš„ç”»å¸ƒ API æ˜¯ Canvas API çš„æ˜¯ä¸€æ ·çš„ï¼Œå…·ä½“å­˜åœ¨è¿™æ ·ä¸€äº›æ˜ å°„ï¼Œæˆ‘ä»¬åœ¨å®˜æ–¹è§„èŒƒ [CSS Painting API Level 1 - The 2D rendering context](https://drafts.css-houdini.org/css-paint-api/#paintworkletglobalscope) å¯ä»¥æŸ¥åˆ°ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/484f99bed5e74c82b80e977301ded951~tplv-k3u1fbpfcp-zoom-1.image)

è¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢ä¼ å…¥äº† 3 ä¸ª CSS å˜é‡å—ï¼Ÿè¿™é‡Œæˆ‘ä»¬åªéœ€è¦ç®€å•æ”¹å˜ä¸Šé¢çš„ 3 ä¸ª å˜é‡ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸ä¸€æ ·çš„å›¾å½¢ã€‚è®©æˆ‘ä»¬è¯•ä¸€è¯•ï¼š

    div {
        width: 100vw;
        height: 1000vh;
        background: paint(circleBgSet);
        // --gap: 3;
        // --color: #f1521f;
        // --size: 64;
        --gap: 6;
        --color: #ffcc00;
        --size: 75;
    }
    

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f450f030b8f41f68c7c498121dce1c1~tplv-k3u1fbpfcp-zoom-1.image)

åˆæˆ–è€…ï¼š

    div {
        width: 100vw;
        height: 1000vh;
        background: paint(circleBgSet);
        // --gap: 3;
        // --color: #f1521f;
        // --size: 64;
        --gap: 4;
        --color: #0bff00;
        --size: 50;
    }
    

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ee74183a6c7e4759b431f2656f5e94a8~tplv-k3u1fbpfcp-zoom-1.image)

åˆ©ç”¨ registerPaint å®ç°è‡ªå®šä¹‰ mask
---------------------------

æœ‰äº†ä¸Šé¢çš„é“ºå«ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹å®ç°æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜ï¼Œåˆ©ç”¨ registerPaint è‡ªå®šä¹‰æ–¹æ³•è¿˜åŸå®ç°è¿™ä¸ªæ•ˆæœï¼Œç®€åŒ– CSS ä»£ç é‡ï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2ec54d3dcdda4ae09367989c6036fc92~tplv-k3u1fbpfcp-watermark.image?)

è‡ªå®šä¹‰çš„ paint æ–¹æ³•ï¼Œä¸ä½†å¯ä»¥ç”¨äº backgroundï¼Œä½ æƒ³å¾—åˆ°çš„åœ°æ–¹ï¼Œå…¶å®éƒ½å¯ä»¥ã€‚

> èƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ï¼åœ¨ Houdini çš„å¸®åŠ©ä¸‹ä½ èƒ½å¤Ÿåœ¨ CSS ä¸­å®ç°ä½ è‡ªå·±çš„å¸ƒå±€ã€æ …æ ¼ã€æˆ–è€…åŒºåŸŸç‰¹æ€§ï¼Œä½†æ˜¯è¿™ä¹ˆåšå¹¶ä¸æ˜¯æœ€ä½³å®è·µã€‚CSS å·¥ä½œç»„å·²ç»åšäº†è®¸å¤šåŠªåŠ›æ¥ç¡®ä¿ CSS ä¸­çš„æ¯ä¸€é¡¹ç‰¹æ€§éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œè¦†ç›–å„ç§è¾¹ç•Œæƒ…å†µï¼ŒåŒæ—¶è€ƒè™‘åˆ°äº†å®‰å…¨ã€éšç§ï¼Œä»¥åŠå¯ç”¨æ€§æ–¹é¢çš„è¡¨ç°ã€‚å¦‚æœä½ è¦æ·±å…¥ä½¿ç”¨ Houdiniï¼Œç¡®ä¿ä½ ä¹ŸæŠŠä»¥ä¸Šè¿™äº›äº‹é¡¹è€ƒè™‘åœ¨å†…ï¼å¹¶ä¸”å…ˆä»å°å¤„å¼€å§‹ï¼Œå†æŠŠä½ çš„è‡ªå®šä¹‰ Houdini æ¨å‘ä¸€ä¸ªå¯Œæœ‰é›„å¿ƒçš„é¡¹ç›®ã€‚

å› æ­¤ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬åˆ©ç”¨ CSS Houdini çš„ registerPaint å®ç°è‡ªå®šä¹‰çš„ mask å±æ€§ç»˜åˆ¶ã€‚

é¦–å…ˆï¼Œè¿˜æ˜¯ä¸€æ ·ï¼ŒHTML ä¸­éœ€è¦å¼•å…¥ä¸€ä¸‹å®šä¹‰äº† registerPaint æ–¹æ³•çš„ JavaScript æ–‡ä»¶ï¼š

    <div></div>
    
    <script>
    if (CSS.paintWorklet) {              
        CSS.paintWorklet.addModule('/CSSHoudini.js');
    }
    </script>
    

é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šå®ç°ä¸€å¼ ç®€å•çš„å›¾ç‰‡ï¼š

    
    div {
        width: 300px;
        height: 300px;
        background: url(https://tvax4.sinaimg.cn/large/6f8a2832gy1g8npte0txnj21jk13a4qr.jpg);
    }
    

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0149df297dec438cb300716a1f305cfc~tplv-k3u1fbpfcp-zoom-1.image)

å½“ç„¶ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯åˆ©ç”¨ registerPaint å®ç°è‡ªå®šä¹‰ maskï¼Œé‚£ä¹ˆéœ€è¦æ·»åŠ ä¸€äº› CSS ä»£ç ï¼š

    
    div {
        width: 300px;
        height: 300px;
        background: url(https://tvax4.sinaimg.cn/large/6f8a2832gy1g8npte0txnj21jk13a4qr.jpg);
        mask: paint(maskSet);
        --size-m: 10;
        --size-n: 10;
    }
    

è¿™é‡Œï¼Œæˆ‘ä»¬ `mask: paint(maskSet)` è¡¨ç¤ºä½¿ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ `maskSet` æ–¹æ³•ï¼Œå¹¶ä¸”ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸¤ä¸ª CSS è‡ªå®šä¹‰å˜é‡ `--size-m` å’Œ `--size-n`ï¼Œè¡¨ç¤ºæˆ‘ä»¬å³å°†è¦ç”¨ mask å±æ€§åˆ†éš”å›¾ç‰‡çš„è¡Œåˆ—æ•°ã€‚

æ¥ä¸‹æ¥ï¼Œå°±æ˜¯å…·ä½“å®ç°æ–°çš„è‡ªå®šä¹‰ mask æ–¹æ³•ã€‚å½“ç„¶ï¼Œè¿™é‡Œæˆ‘ä»¬åªæ˜¯é‡æ–°å®ç°ä¸€ä¸ª maskï¼Œè€Œ mask å±æ€§æœ¬èº«çš„ç‰¹æ€§ï¼Œé€æ˜çš„åœ°æ–¹èƒŒåçš„å†…å®¹å°†ä¼šé€æ˜è¿™ä¸ªç‰¹æ€§æ˜¯ä¸ä¼šæ”¹å˜çš„ã€‚

JavaScript ä»£ç ï¼š

    // è¿™ä¸ªæ–‡ä»¶çš„åå­—ä¸º CSSHoudini.js
    registerPaint(
        "maskSet",
        class {
            static get inputProperties() {
                return ["--size-n", "--size-m"];
            }
    
            paint(ctx, size, properties) {
                const n = properties.get("--size-n");
                const m = properties.get("--size-m");
                const width = size.width / n;
                const height = size.height / m;
    
                for (var i = 0; i < n; i++) {
                    for (var j = 0; j < m; j++) {
                        ctx.fillStyle = "rgba(0,0,0," + Math.random() + ")";
                        ctx.fillRect(i * width, j * height, width, height);
                    }
                }
            }
        }
    );
    

è¿™ä¸€æ®µä»£ç éå¸¸å¥½ç†è§£ï¼Œæˆ‘ä»¬åšçš„äº‹æƒ…å°±æ˜¯æ‹¿åˆ°ä¸¤ä¸ª CSS è‡ªå®šä¹‰å˜é‡ `--size-n` å’Œ `--size-m` åï¼Œé€šè¿‡ä¸€ä¸ªåŒå¾ªç¯ï¼Œä¾æ¬¡ç»˜åˆ¶æ­£æ–¹å½¢å¡«æ»¡æ•´ä¸ª DIV åŒºåŸŸï¼Œæ¯ä¸ªå°æ­£æ–¹å½¢çš„é¢œè‰²ä¸ºå¸¦éšæœºé€æ˜åº¦çš„é»‘è‰²ã€‚

è®°ä½ï¼Œmask çš„æ ¸å¿ƒåœ¨äºï¼Œé€è¿‡é¢œè‰²çš„é€æ˜åº¦æ¥éšè—ä¸€ä¸ªå…ƒç´ çš„éƒ¨åˆ†æˆ–è€…å…¨éƒ¨å¯è§åŒºåŸŸã€‚å› æ­¤ï¼Œæ•´ä¸ªå›¾ç‰‡å°†å˜æˆè¿™æ ·ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7c2ca3321164a37b6f9b86536301ed4~tplv-k3u1fbpfcp-zoom-1.image)

å½“ç„¶ï¼Œæˆ‘ä»¬è¿™ä¸ªè‡ªå®šä¹‰ mask æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥ç”¨äº background çš„ï¼Œå¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªæ–¹æ³•ä½œç”¨äº backgorundï¼Œä½ ä¼šæ›´å¥½ç†è§£ä¸€ç‚¹ã€‚

    div {
        width: 300px;
        height: 300px;
        background: paint(maskSet);
        // mask: paint(maskSet);
        --size-m: 10;
        --size-n: 10;
    }
    

å®é™…çš„å›¾ç‰‡æ•ˆæœæ˜¯è¿™æ ·ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75161a224acf41d0be2068616ad5f544~tplv-k3u1fbpfcp-zoom-1.image)

å¥½ï¼Œå›å½’æ­£é¢˜ï¼Œæˆ‘ä»¬ç»§ç»­ã€‚æˆ‘ä»¬æœ€ç»ˆçš„æ•ˆæœè¿˜æ˜¯è¦åŠ¨ç”»æ•ˆæœï¼ŒHover çš„æ—¶å€™è®©å›¾ç‰‡æ–¹å—åŒ–æ¶ˆå¤±ï¼Œè‚¯å®šè¿˜æ˜¯è¦å’Œ CSS @property è‡ªå®šä¹‰å˜é‡å‘ç”Ÿå…³è”çš„ï¼Œæˆ‘ä»¬ç®€å•æ”¹é€ ä¸‹ä»£ç ï¼ŒåŠ å…¥ä¸€ä¸ª CSS @property è‡ªå®šä¹‰å˜é‡ã€‚

    @property --transition-time {
      syntax: '<number>';
      inherits: false;
      initial-value: 1;
    }
    
    div {
        width: 300px;
        height: 300px;
        background: url(https://tvax4.sinaimg.cn/large/6f8a2832gy1g8npte0txnj21jk13a4qr.jpg);
        mask: paint(maskSet);
        --size-m: 10;
        --size-n: 10;
        --transition-time: 1;
        transition: --transition-time 1s linear;
    }
    
    div:hover {
      --transition-time: 0;
    }
    

è¿™é‡Œï¼Œæˆ‘ä»¬å¼•å…¥äº† `--transition-time` è¿™ä¸ªå˜é‡ã€‚æ¥ä¸‹æ¥ï¼Œè®©ä»–åœ¨ `maskSet` å‡½æ•°ä¸­ï¼Œå‘æŒ¥ä½œç”¨ï¼š

    registerPaint(
        "maskSet",
        class {
            static get inputProperties() {
                return ["--size-n", "--size-m", "--transition-time"];
            }
    
            paint(ctx, size, properties) {
                const n = properties.get("--size-n");
                const m = properties.get("--size-m");
                const t = properties.get("--transition-time");
                const width = size.width / n;
                const height = size.height / m;
    
                for (var i = 0; i < n; i++) {
                    for (var j = 0; j < m; j++) {
                        ctx.fillStyle = "rgba(0,0,0," + (t * (Math.random() + 1)) + ")";
                        ctx.fillRect(i * width, j * height, width, height);
                    }
                }
            }
        }
    );
    

è¿™é‡Œï¼Œä¸ä¸Šé¢å”¯ä¸€çš„å˜åŒ–åœ¨äºè¿™ä¸€è¡Œä»£ç ï¼š`ctx.fillStyle = "rgba(0,0,0," + (t * (Math.random() + 1)) + ")"`ã€‚

å¯¹äºæ¯ä¸€ä¸ªå°æ ¼å­çš„ maskï¼Œæˆ‘ä»¬è®©ä»–çš„é¢œè‰²å€¼çš„é€æ˜åº¦è®¾ç½®ä¸º `(t * (Math.random() + 1))`ï¼š

1.  å…¶ä¸­ t å°±æ˜¯ `--transition-time` è¿™ä¸ªå˜é‡ï¼Œè®°ä½ï¼Œåœ¨ hover çš„è¿‡ç¨‹ä¸­ï¼Œå®ƒçš„å€¼ä¼šé€æ¸ä» 1 è¡°å‡è‡³ 0
2.  (Math.random() + 1) è¡¨ç¤ºå…ˆç”Ÿæˆä¸€ä¸ª 0 ~ 1 çš„éšæœºæ•°ï¼Œå†è®©è¿™ä¸ªéšæœºæ•°åŠ  1ï¼ŒåŠ  1 çš„ç›®çš„æ˜¯è®©æ•´ä¸ªå€¼å¿…ç„¶å¤§äº 1ï¼Œå¤„äº 1 ~ 2 çš„èŒƒå›´
3.  ç”±äºä¸€å¼€å§‹ `--transition-time` çš„å€¼ä¸€å¼€å§‹æ˜¯ 1ï¼Œæ‰€ä»¥ä¹˜ä»¥ (Math.random() + 1) çš„å€¼ä¹Ÿå¿…ç„¶å¤§äº 1ï¼Œè€Œæœ€ç»ˆåœ¨è¿‡æ¸¡è¿‡ç¨‹ä¸­ `--transition-time` ä¼šé€æ¸å˜ä¸º 0ï¼Œ æ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ä¹Ÿæœ€ç»ˆä¼šå½’äº 0
4.  ç”±äºä¸Šè¿° ï¼ˆ3ï¼‰çš„å€¼æ§åˆ¶çš„æ˜¯æ¯ä¸€ä¸ª mask å°æ ¼å­çš„é€æ˜åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªæ ¼å­çš„é€æ˜åº¦éƒ½ä¼šä»ä¸€ä¸ªä»‹äº 1 ~ 2 çš„å€¼é€æ¸å˜æˆ 0ï¼Œå€ŸåŠ©è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å®Œæˆäº†æ•´ä¸ªæ¸éšçš„åŠ¨ç”»

çœ‹çœ‹æœ€ç»ˆçš„æ•ˆæœï¼š

![bg.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bdea0a9595e74a0d99ae937c556f348d~tplv-k3u1fbpfcp-watermark.image?)

[CodePen Demo -- CSS Hudini Example](https://codepen.io/Chokcoco/pen/KKeQWJb)

æ˜¯çš„ï¼Œç»†å¿ƒçš„åŒå­¦è‚¯å®šä¼šå‘ç°ï¼Œæ–‡ç« ä¸€å¼€å¤´ç»™çš„ DEMO æ˜¯åˆ‡åˆ†äº† 400 ä»½ mask çš„ï¼Œè€Œæˆ‘ä»¬ä¸Šé¢å®ç°çš„æ•ˆæœï¼Œåªç”¨äº† 100 ä¸ª maskã€‚

è¿™ä¸ªéå¸¸å¥½è§£å†³ï¼Œæˆ‘ä»¬ä¸æ˜¯ä¼ å…¥äº† `--size-n` å’Œ `--size-m` ä¸¤ä¸ªå˜é‡ä¹ˆï¼Ÿåªéœ€è¦ä¿®æ”¹è¿™ä¸¤ä¸ªå€¼ï¼Œå°±å¯ä»¥å®ç°ä»»æ„æ ¼å­çš„ Hover æ¸éšæ•ˆæœå•¦ã€‚è¿˜æ˜¯ä¸Šé¢çš„ä»£ç ï¼Œç®€å•ä¿®æ”¹ CSS å˜é‡çš„å€¼ï¼š

    div:nth-child(1) {
        --size-m: 4;
        --size-n: 4; 
    }
    div:nth-child(2) {
        --size-m: 6;
        --size-n: 6; 
    }
    div:nth-child(3) {
        --size-m: 10;
        --size-n: 10; 
    }
    div:nth-child(4) {
        --size-m: 15;
        --size-n: 15; 
    }
    

ç»“æœå¦‚ä¸‹ï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf64b781a37b41b58b70c4eb63228db7~tplv-k3u1fbpfcp-watermark.image?)

[CodePen Demo -- CSS Hudini Example](https://codepen.io/Chokcoco/pen/oNyEpLN)

åˆ°è¿™é‡Œï¼Œè¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ¶ˆå¤±çš„è¿‡ç¨‹ä¸­ï¼Œæ•´ä¸ªæ•ˆæœéå¸¸çš„é—ªçƒï¼æ¯ä¸ªæ ¼å­å…¶å®é—ªçƒäº†å¾ˆå¤šæ¬¡ã€‚

è¿™æ˜¯ç”±äºåœ¨è¿‡æ¸¡çš„è¿‡ç¨‹ä¸­ï¼Œ`ctx.fillStyle = "rgba(0,0,0," + (t * (Math.random() + 1)) + ")"` å†…çš„ `Math.random()` æ¯ä¸€å¸§éƒ½ä¼šé‡æ–°è¢«è°ƒç”¨å¹¶ä¸”ç”Ÿæˆå…¨æ–°çš„éšæœºå€¼ï¼Œå› æ­¤æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸€ç›´åœ¨ç–¯ç‹‚é—ªçƒã€‚

å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ç§åˆ©ç”¨ä¼ªéšæœºï¼Œç”Ÿæˆç¨³å®šéšæœºå‡½æ•°çš„æ–¹æ³•ï¼š[Exploring the CSS Paint API: Image Fragmentation Effect](https://dev.to/this-is-learning/exploring-the-css-paint-api-image-fragmentation-effect-3ekl)

å•¥æ„æ€å‘¢ï¼Ÿå°±æ˜¯æˆ‘ä»¬å¸Œæœ›æ¯æ¬¡ç”Ÿæˆçš„éšæœºæ•°éƒ½æ˜¯éƒ½æ˜¯ä¸€è‡´çš„ã€‚å…¶ JavaScript ä»£ç å¦‚ä¸‹ï¼š

    const mask = 0xffffffff;
    const seed = 30; /* update this to change the generated sequence */
    let m_w  = (123456789 + seed) & mask;
    let m_z  = (987654321 - seed) & mask;
    
    let random =  function() {
      m_z = (36969 * (m_z & 65535) + (m_z >>> 16)) & mask;
      m_w = (18000 * (m_w & 65535) + (m_w >>> 16)) & mask;
      var result = ((m_z << 16) + (m_w & 65535)) >>> 0;
      result /= 4294967296;
      return result;
    }
    

æˆ‘ä»¬åˆ©ç”¨ä¸Šè¿°å®ç°çš„éšæœºå‡½æ•° `random()` æ›¿æ¢æ‰æˆ‘ä»¬ä»£ç åŸæœ¬çš„ `Math.random()`ï¼Œå¹¶ä¸”ï¼Œmask å°æ ¼å­çš„ ctx.fillStyle å‡½æ•°ï¼Œä¹Ÿç¨åŠ å˜åŒ–ï¼Œé¿å…æ¯ä¸€ä¸ª mask çŸ©å½¢å°æ ¼å­çš„æ¸éšæ·¡å‡ºæ•ˆæœåŒæ—¶å‘ç”Ÿã€‚

ä¿®æ”¹åçš„å®Œæ•´ JavaScript ä»£ç å¦‚ä¸‹ï¼š

    registerPaint(
        "maskSet",
        class {
            static get inputProperties() {
                return ["--size-n", "--size-m", "--transition-time"];
            }
    
            paint(ctx, size, properties) {
                const n = properties.get("--size-n");
                const m = properties.get("--size-m");
                const t = properties.get("--transition-time");
                const width = size.width / n;
                const height = size.height / m;
                const l = 10;
    
                const mask = 0xffffffff;
                const seed = 100; /* update this to change the generated sequence */
                let m_w = (123456789 + seed) & mask;
                let m_z = (987654321 - seed) & mask;
    
                let random = function () {
                    m_z = (36969 * (m_z & 65535) + (m_z >>> 16)) & mask;
                    m_w = (18000 * (m_w & 65535) + (m_w >>> 16)) & mask;
                    var result = ((m_z << 16) + (m_w & 65535)) >>> 0;
                    result /= 4294967296;
                    return result;
                };
    
                for (var i = 0; i < n; i++) {
                    for (var j = 0; j < m; j++) {
                        ctx.fillStyle = 'rgba(0,0,0,'+((random()*(l-1) + 1) - (1-t)*l)+')';
                        ctx.fillRect(i * width, j * height, width, height);
                    }
                }
            }
        }
    );
    

è¿˜æ˜¯ä¸Šè¿°çš„ DEMOï¼Œè®©æˆ‘ä»¬å†æ¥çœ‹çœ‹æ•ˆæœï¼Œåˆ†åˆ«è®¾ç½®äº†ä¸åŒæ•°é‡çš„ mask æ¸éšæ¶ˆå¤±ï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b46af89e7728431192d99e784e02c466~tplv-k3u1fbpfcp-watermark.image?)

[CodePen Demo -- CSS Hudini Example & Custom Random](https://codepen.io/Chokcoco/pen/eYKVQGG)

Wowï¼ä¿®æ­£è¿‡åçš„æ•ˆæœä¸å†é—ªçƒï¼Œå¹¶ä¸”æ¶ˆå¤±åŠ¨ç”»ä¹Ÿå¹¶éåŒæ—¶è¿›è¡Œã€‚åœ¨ [Exploring the CSS Paint API: Image Fragmentation Effect](https://dev.to/this-is-learning/exploring-the-css-paint-api-image-fragmentation-effect-3ekl) è¿™ç¯‡æ–‡ç« ä¸­ï¼Œè¿˜ä»‹ç»äº†ä¸€äº›å…¶ä»–åˆ©ç”¨ registerPaint å®ç°çš„æœ‰è¶£çš„ mask æ¸éšæ•ˆæœï¼Œæ„Ÿå…´è¶£å¯ä»¥æ·±å…¥å†çœ‹çœ‹ã€‚

è¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†åŸæœ¬ 2400 è¡Œçš„ CSS ä»£ç ï¼Œé€šè¿‡ CSS Painting API çš„ registerPaintï¼Œå‹ç¼©åˆ°äº† 50 è¡Œä»¥å†…çš„ JavaScript ä»£ç ã€‚

å½“ç„¶ï¼ŒCSS Houdini çš„æœ¬äº‹è¿œä¸æ­¢äºæ­¤ï¼Œæœ¬æ–‡ä¸€ç›´åœ¨å›´ç»• background æç»˜ç›¸å…³çš„å†…å®¹è¿›è¡Œé˜è¿°ï¼ˆmask çš„è¯­æ³•ä¹Ÿæ˜¯èƒŒæ™¯ background çš„ä¸€ç§ï¼‰ã€‚åœ¨åç»­çš„æ–‡ç« æˆ‘å°†ç»§ç»­ä»‹ç»åœ¨å…¶ä»–å±æ€§ä¸Šçš„åº”ç”¨ã€‚

å…¼å®¹æ€§å¦‚ä½•ï¼Ÿ
------

é‚£ä¹ˆï¼ŒCSS Painting API çš„å…¼å®¹æ€§åˆ°åº•å¦‚ä½•å‘¢ï¼Ÿ

[CanIUse - registerPaint](https://caniuse.com/?search=registerPaint) æ•°æ®å¦‚ä¸‹ï¼ˆæˆªæ­¢è‡³ 2022-11-23ï¼‰ï¼š

![image](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/274c51eb243b44188a1f439beaf592ef~tplv-k3u1fbpfcp-zoom-1.image)

Chrome å’Œ Edge åŸºäº [Chromium](https://www.google.com.hk/search?newwindow=1&rlz=1C5GCEM_enCN988CN988&q=Chromium&spell=1&sa=X&ved=2ahUKEwi3he2ensL7AhVaSmwGHdnzBxgQkeECKAB6BAgoEAE) å†…æ ¸çš„æµè§ˆå™¨å¾ˆæ—©å°±å·²ç»æ”¯æŒï¼Œè€Œä¸»æµæµè§ˆå™¨ä¸­ï¼ŒFirefox å’Œ Safari ç›®å‰è¿˜ä¸æ”¯æŒã€‚

CSS Houdini è™½ç„¶å¼ºå¤§ï¼Œç›®å‰çœ‹æ¥è¦æƒ³å¤§è§„æ¨¡ä¸Šç”Ÿäº§ç¯å¢ƒï¼Œä»éœ€ä¸€æ®µæ—¶é—´çš„ç­‰å¾…ã€‚è®©æˆ‘ä»¬ç»™æ—¶é—´ä¸€ç‚¹æ—¶é—´ï¼

æœ€å
--

å¥½äº†ï¼Œæœ¬æ–‡åˆ°æ­¤ç»“æŸï¼Œå¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ˜ƒ

å¦‚æœè¿˜æœ‰ä»€ä¹ˆç–‘é—®æˆ–è€…å»ºè®®ï¼Œå¯ä»¥å¤šå¤šäº¤æµï¼ŒåŸåˆ›æ–‡ç« ï¼Œæ–‡ç¬”æœ‰é™ï¼Œæ‰ç–å­¦æµ…ï¼Œæ–‡ä¸­è‹¥æœ‰ä¸æ­£ä¹‹å¤„ï¼Œä¸‡æœ›å‘ŠçŸ¥ã€‚