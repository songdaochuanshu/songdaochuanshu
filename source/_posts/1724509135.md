---
layout: post
title: "《爆肝整理》保姆级系列教程-玩转Charles抓包神器教程(4)-Charles如何设置捕获会话 "
date: "2023-01-18T11:13:36.547Z"
---
《爆肝整理》保姆级系列教程-玩转Charles抓包神器教程(4)-Charles如何设置捕获会话
================================================

### 1.简介

前边几篇宏哥介绍了Charles界面内容以及作用。今天宏哥就讲解和分享如何设置Charles后，我们就可以愉快地捕获会话，进行抓包了。因为上一篇许多小伙伴看到宏哥的Charles可以分开看到request和response，而自己的却看不到，因此有点蒙，有点疑惑。同样的版本显示的界面却是不一样的，私信问宏哥在哪里下载的，不用疑惑，不用问，宏哥也是在官网下载的。因此在介绍之前，首先解决一下上一篇小伙伴或者童鞋们私下问宏哥的问题：**如何设置显示request和response？**。

### 2.如何设置显示request和response

1.启动Charles后，点击**Edit** — **Preferences** ，如下图所示：

![](https://img2023.cnblogs.com/blog/1232840/202301/1232840-20230109153127816-1987353850.png)

2.弹出设置界面，点击**Viewers**，取消**Combine request and response**前面的勾选，如下图所示：

![](https://img2023.cnblogs.com/blog/1232840/202301/1232840-20230109153250661-400320343.png)

 3.点击**OK**保存，如下图所示：

![](https://img2023.cnblogs.com/blog/1232840/202301/1232840-20230109153408885-919251522.png)

4.点击**确定**，查看请求的**request**和**response** ，如下图所示：

![](https://img2023.cnblogs.com/blog/1232840/202301/1232840-20230109153633934-434086517.png)

若想查看request的**请求头**和**请求数据**，也可将**第2步**中的**Combine header and body viewers**前面的勾选取消，如下图所示：

![](https://img2023.cnblogs.com/blog/1232840/202301/1232840-20230109154202319-753474027.png)

 查看request的请求头和请求数据，如下图所示：

![](https://img2023.cnblogs.com/blog/1232840/202301/1232840-20230109153824701-767031869.png)

### 3.捕获会话的设备

常见的捕获会话的设备分为PC（电脑）端——web抓包和手机（Android和IOS苹果）端——APP抓包。

### 4.PC（电脑）端

电脑端我们一般抓取的都是web网站请求和响应信息。那么我们看一下如何设置进行抓包。

#### 4.1web 抓包

Charles Web抓包非常简单，启动Charles会自动与浏览器设置成代理，不需要进行过多的设置，接下来我就就是通过浏览器发送网络请求，Charles就会直接抓取到这些信息和响应信息，如下图所示：

![](https://img2022.cnblogs.com/blog/1232840/202209/1232840-20220927163252336-325154673.png)

细心地小伙伴或者童鞋们从上图可以看到宏哥的图中抓取的是http协议的web网址，因为宏哥的Charles还没有设置如果抓取https协议的web网址，会报一些错误导致演示不成功，因此宏哥使用http协议的网址进行演示。

### 5.移动（手机）端

#### 5.1App抓包

Charles抓包不仅仅可以抓取来在电脑端的HTTP请求，也能够抓取来自App发出的HTTP请求，但是手机抓包需要在电脑端配置下，并且同时需要手机和电脑在同一网络下。

##### 5.1.1电脑端设置

1.启动安装好的Charles抓包工具。

2.查看电脑IP地址。

方法一： 打开”运行”（快捷键：win+R键；或者在任务栏的”搜索”按钮中查找并点击”运行”），输入“cmd”后进入命令行窗口，在命令行窗口中输入”ipconfig”命令查看IP ，如下图所示：

![](https://img2022.cnblogs.com/blog/1232840/202209/1232840-20220927170142300-1450625673.png)

方法二： 在charles中查看 ：Help -> Local IP Address ，如下图所示：

![](https://img2022.cnblogs.com/blog/1232840/202209/1232840-20220927170604507-1516872773.gif)

3.点击【Proxy】–>【Proxy Settings】我们在设置下端口号“9999”（Charles和Fiddler一样默认的端口也是8888）。宏哥这里是为了避免Charles和Fiddler想要同时启用都用8888这个端口引起端口冲突的问题，所以提前设置成9999。如下图所示：

![](https://img2022.cnblogs.com/blog/1232840/202209/1232840-20220927171427652-127106660.gif)

4.点击Proxy-->Proxy Settings，勾选“Enabling transparent HTTP proxying”，点击“OK”，其实这一步设置不设置都可以，宏哥试了一下，对抓取http包不影响，当然了就更不会影响https包的抓取了。如下图所示：

![](https://img2022.cnblogs.com/blog/1232840/202209/1232840-20220928161549202-754285900.gif)

##### 5.1.2移动端设置

**（1）Android手机**

手机上进行设置：同一个wifi下设置代理，安卓应该是长按连接的WIFI，点击“修改网络”。填写服务器地址：计算机的IP（192.168.0.163），端口8888；如下图所示：

![](https://images2017.cnblogs.com/blog/1140207/201710/1140207-20171003163420552-1698144110.png)

**（2）iOS手机**

1.打开手机的设置页面；选择【无线局域网】，如下图所示：

![](https://ask.qcloudimg.com/http-save/yehe-8223537/70ef2c85630e26a26128860b60045e6f.jpeg?imageView2/2/w/1620)

2.IOS点击连接的WIFI后面的感叹号，如下图所示：

![](https://ask.qcloudimg.com/http-save/yehe-8223537/3a466791eb79547b61065888e4aca55b.jpeg?imageView2/2/w/1620)

3. 点击【配置代理】–>【手动】，如下图所示：

![](https://ask.qcloudimg.com/http-save/yehe-8223537/14600f8dae5af7f294342c2c10ece233.jpeg?imageView2/2/w/1620)

4. 输入本机【IP地址（192.168.1.75）】以及端口号【9999】，这是我本机的，根据自己情况合理配置，如下图所示：

![](https://ask.qcloudimg.com/http-save/yehe-8223537/e9daabf571686c2f970f4735c9d29bd8.jpeg?imageView2/2/w/1620)

5.配置好后，点击【存储】即可！！！

6.接下里验证下手机请求，当我们看到Charles里能抓到这个连接，就说明配置没问题，看到unknown，这个不要紧，那是我们没有安装针对手机端的证书，手机端HTTPS证书安装宏哥后边会有详细介绍，这里简单说明一下原因一笔带过，其实和Fiddler差不多，一样的思路，但是此时应该是可以抓取Http协议的包的。

![](https://ask.qcloudimg.com/http-save/yehe-8223537/3cc4e3e8c136a744a928a0a8b1b58e40.jpeg?imageView2/2/w/1620)

### 6.小结

 好了，今天就简单的说明一些配置和技巧，后边关于手机端，宏哥会单独列出章节进行详细讲解。小伙伴或者童鞋们在这里先入入门有个印象就好。

    为了方便大家在移动端也能看到我分享的博文，现已注册个人微信公众号，扫描左下方二维码即可，欢迎大家关注，有时间会及时分享相关技术博文。  
    为了方便大家互动讨论相关技术问题，现已组建专门的微信群，由于微信群满100，请您扫描右下方宏哥个人微信二维码拉你进群（请务必备注：已关注公众号进群）平时上班忙（和你一样），所以加好友不及时，请稍安勿躁~，欢迎大家加入这个大家庭，我们一起畅游知识的海洋。  
    感谢您花时间阅读此篇文章,如果您觉得这篇文章你学到了东西也是为了犒劳下博主的码字不易不妨打赏一下吧，让博主能喝上一杯咖啡，在此谢过了！  
    如果您觉得阅读本文对您有帮助，请点一下左下角“推荐”按钮，您的“推荐”将是我最大的写作动力！另外您也可以选择【**关注我**】，可以很方便找到我！  
    本文版权归作者和博客园共有，来源网址：[https://www.cnblogs.com/du-hong](https://www.cnblogs.com/du-hong) 欢迎各位转载，但是未经作者本人同意，转载文章之后必须在文章页面明显位置给出作者和原文连接，否则保留追究法律责任的权利！

![个人微信公众号](https://img2018.cnblogs.com/common/1741949/201911/1741949-20191119095948011-608816619.png) ![个人微信](https://img2018.cnblogs.com/common/1741949/201911/1741949-20191106101257091-849954564.png)