---
layout: post
title: "Tomcatæ·±å…¥æµ…å‡ºâ€”â€”Servlet(äºŒ)"
date: "2022-07-05T12:49:09.275Z"
---
Tomcatæ·±å…¥æµ…å‡ºâ€”â€”Servlet(äºŒ)
======================

ä»‹ç»äº†Servletçš„ç”Ÿå‘½å‘¨æœŸã€è¿è¡Œæœºåˆ¶ï¼Œé€‚é…å™¨å’Œæ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ä»¥åŠServletçš„æ˜ å°„é—®é¢˜ï¼ŒHttpServletRequeståœ¨è¯·æ±‚è¿‡ç¨‹ä¸­posté‡åˆ°çš„é—®é¢˜...

ä¸€ã€Servletç®€ä»‹
===========

**Servletç±»æœ€ç»ˆå¼€å‘æ­¥éª¤ï¼š**

*   ç¬¬ä¸€æ­¥ï¼šç¼–å†™ä¸€ä¸ªServletç±»ï¼Œç›´æ¥ç»§æ‰¿HttpServlet
*   ç¬¬äºŒæ­¥ï¼šé‡å†™doGetæ–¹æ³•æˆ–è€…doPostæ–¹æ³•ï¼Œé‡å†™å“ªä¸ªæˆ‘è¯´çš„ç®—ï¼
*   ç¬¬ä¸‰æ­¥ï¼šå°†Servletç±»é…ç½®åˆ°web.xmlæ–‡ä»¶å½“ä¸­
*   ç¬¬å››æ­¥ï¼šå‡†å¤‡å‰ç«¯çš„é¡µé¢(formè¡¨å•)ï¼ŒæŒ‡å®šè¯·æ±‚è·¯å¾„å³å¯

* * *

*   Servletæ˜¯ä¸€ä¸ªæ¥å£ï¼Œåœ¨å®ƒçš„ä¸‹é¢æœ‰GenericServlet  
    å’ŒHttpServletä¸¤ä¸ªå®ç°ç±»  
    ![](https://img2022.cnblogs.com/blog/2816773/202207/2816773-20220705151301334-986832556.png)

**æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹GenericServletï¼š**

*   å…¶ä¸­çš„GenericServletå®ç°äº†å¾ˆå¤šæ–¹æ³•ï¼Œåªä¿ç•™äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå°±æ˜¯æˆ‘ä»¬ç»å¸¸ç”¨çš„serviceæ–¹æ³•ã€‚

![](https://img2022.cnblogs.com/blog/2816773/202207/2816773-20220705151739937-1157853533.png)

*   è¿™æˆ–è®¸å°±æ˜¯ä¸ºäº†æ›´ç®€æ´ä¸€ç‚¹å§ï¼Œæˆ‘ä»¬æ¯æ¬¡ä¸éœ€è¦åœ¨åƒå®ç°Servletæ¥å£ä¸€æ ·ï¼Œå°†å…¨éƒ¨çš„æŠ½è±¡æ–¹æ³•éƒ½å®ç°ã€‚
*   æ ¹æ®ä»–çš„ç±»å›¾å¯çŸ¥ï¼ŒHttpServletç»§æ‰¿äº†GenericServletè¿™ä¸ªç±»ï¼Œé‚£ä¹ˆå®ƒä¸ºä»€ä¹ˆè¦ç»§æ‰¿GenericServletå‘¢ï¼Ÿ

**æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹HttpServletï¼š**

    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
            String method = req.getMethod();
            long lastModified;
            if (method.equals("GET")) {
                lastModified = this.getLastModified(req);
                if (lastModified == -1L) {
                    this.doGet(req, resp);
                } else {
                    long ifModifiedSince;
                    try {
                        ifModifiedSince = req.getDateHeader("If-Modified-Since");
                    } catch (IllegalArgumentException var9) {
                        ifModifiedSince = -1L;
                    }
    
                    if (ifModifiedSince < lastModified / 1000L * 1000L) {
                        this.maybeSetLastModified(resp, lastModified);
                        this.doGet(req, resp);
                    } else {
                        resp.setStatus(304);
                    }
                }
            } else if (method.equals("HEAD")) {
                lastModified = this.getLastModified(req);
                this.maybeSetLastModified(resp, lastModified);
                this.doHead(req, resp);
            } else if (method.equals("POST")) {
                this.doPost(req, resp);
            } else if (method.equals("PUT")) {
                this.doPut(req, resp);
            } else if (method.equals("DELETE")) {
                this.doDelete(req, resp);
            } else if (method.equals("OPTIONS")) {
                this.doOptions(req, resp);
            } else if (method.equals("TRACE")) {
                this.doTrace(req, resp);
            } else {
                String errMsg = lStrings.getString("http.method_not_implemented");
                Object[] errArgs = new Object[]{method};
                errMsg = MessageFormat.format(errMsg, errArgs);
                resp.sendError(501, errMsg);
            }
    
        }
    

*   è¿™æ®µæ˜¯HttpServletä¸­å®ç°çš„Serviceæ–¹æ³•çš„æºç ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šçš„äº†è§£åˆ°ï¼ŒTomcatå·²ç»æŠŠè¿™ä¸ªServiceå†™å¥½äº†ï¼Œæˆ‘ä»¬åªéœ€è¦å»å®ç°`doGet()`ã€`doPost()`ç­‰ç­‰è¿™äº›è¯·æ±‚çš„æ–¹æ³•å°±å¯ä»¥äº†ã€‚
*   å› ä¸ºè¿™ä¸ªServiceä¼šè‡ªå·±åˆ¤æ–­ï¼Œæˆ‘ä»¬è¿›è¡Œè®¿é—®çš„æ˜¯ä»€ä¹ˆè¯·æ±‚ï¼Œç„¶åè‡ªåŠ¨æ‰¾åˆ°ç›¸åº”çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚

äºŒã€ä¸¤ç§è®¾è®¡æ¨¡å¼
========

2.1é€‚é…å™¨æ¨¡å¼
--------

**é€‚é…å™¨ï¼š**é€‚é…å™¨å°±æ˜¯ä¸€ç§é€‚é…ä¸­é—´ä»¶ï¼Œå®ƒå­˜åœ¨äºä¸åŒ¹é…çš„äºŒè€…ä¹‹é—´ï¼Œç”¨äºè¿æ¥äºŒè€…ï¼Œå°†ä¸åŒ¹é…å˜å¾—åŒ¹é…ï¼Œç®€å•ç‚¹ç†è§£å°±æ˜¯å¹³å¸¸æ‰€è§çš„è½¬æ¥å¤´ï¼Œè½¬æ¢å™¨ä¹‹ç±»çš„å­˜åœ¨ã€‚

    public interface MyInterface {
        void m1();
        void m2();
        void m3();
        void m4();
        void m5();
        void test();
        //ä½†æ˜¯è¿™ä¸ªæ¥å£ä¸­æˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•åªæœ‰test()ï¼Œæˆ‘ä»¬åœ¨å®ç°æ­¤æ¥å£çš„æ—¶å€™ï¼Œè¿˜éœ€è¦å®ç°å…¶ä»–æ–¹æ³•ï¼Œå¾ˆç´¯èµ˜ã€‚
        //æ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªé€‚é…å™¨ï¼
    }
    

    public abstract class Test implements MyInterface{
        public void m1() {
        }
    
        public void m2() {
        }
    
        public void m3() {
        }
    
        public void m4() {
        }
    
        public void m5() {
        }
        //è¿™æ˜¯ä¸€ä¸ªé€‚é…å™¨
        //åœ¨åˆ›å»ºä¸€ä¸ªæ¥å£çš„å®ç°ç±»ï¼Œæˆ‘ä»¬å°†å¸¸ç”¨çš„æ–¹æ³•è®¾ç½®ä¸ºæŠ½è±¡çš„æ–¹æ³•
        //è¿™æ ·æˆ‘ä»¬åªéœ€è¦ç»§æ‰¿è¯¥ç±»ï¼Œç„¶åå®ç°æ–¹æ³•å³å¯
        public abstract void test();
    }
    

*   è¿™æ ·åšçš„ä¼˜ç‚¹å°±æ˜¯ä¸‹æ¬¡æˆ‘ä»¬åªéœ€è¦å»ç»§æ‰¿Testç±»ï¼Œå®ç°æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„test()æ–¹æ³•å°±å¯ä»¥äº†ã€‚
*   ä½¿æˆ‘ä»¬çš„å‡å°‘äº†å†—ä½™çš„ä»£ç é‡
*   åŒæ—¶ä½ ä¹Ÿä¼šå‘ç°è¿™ä¸ªå°±å’ŒGenericServletå»ç»§æ‰¿Servletè¿™ä¸ªæ¥å£æ˜¯ä¸€æ ·çš„
*   è¿™å°±æ˜¯é€‚é…å™¨è®¾è®¡æ¨¡å¼ï¼Œå…¶å®å¾ˆç®€å•ï¼Œä¹Ÿæœ‰åˆ©äºæˆ‘ä»¬æ›´åŠ ç†è§£æŠ½è±¡ç±»çš„ä½œç”¨å’Œæ¥å£çš„ä½¿ç”¨

    public class Realize extends Test{
        public void test() {
            //è¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦å†å»å®ç°æ¥å£ä¸­çš„ å…¶ä»–æ–¹æ³•äº†
        }
    }
    

2.2 æ¨¡æ¿è®¾è®¡æ–¹æ³•æ¨¡å¼
------------

**æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼š**æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å®ƒåœ¨è¶…ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„æ¡†æ¶ï¼Œ å…è®¸å­ç±»åœ¨ä¸ä¿®æ”¹ç»“æ„çš„æƒ…å†µä¸‹é‡å†™ç®—æ³•çš„ç‰¹å®šæ­¥éª¤ã€‚

*   æ¨¡æ¿æ–¹æ³•æ¨¡å¼å»ºè®®å°†**ç®—æ³•åˆ†è§£ä¸ºä¸€ç³»åˆ—æ­¥éª¤ï¼Œ ç„¶åå°†è¿™äº›æ­¥éª¤æ”¹å†™ä¸ºæ–¹æ³•ï¼Œ æœ€ååœ¨ â€œæ¨¡æ¿æ–¹æ³•â€ ä¸­ä¾æ¬¡è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚** æ­¥éª¤å¯ä»¥æ˜¯ æŠ½è±¡çš„ï¼Œ ä¹Ÿå¯ä»¥æœ‰ä¸€äº›é»˜è®¤çš„å®ç°ã€‚ ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ç®—æ³•ï¼Œ å®¢æˆ·ç«¯éœ€è¦è‡ªè¡Œæä¾›å­ç±»å¹¶å®ç°æ‰€æœ‰çš„æŠ½è±¡æ­¥éª¤ã€‚ å¦‚æœ‰å¿…è¦è¿˜éœ€é‡å†™ä¸€äº›æ­¥éª¤ ï¼ˆä½†è¿™ä¸€æ­¥ä¸­ä¸åŒ…æ‹¬æ¨¡æ¿æ–¹æ³•è‡ªèº«ï¼‰ã€‚
    
*   è®¤çœŸçš„å»é˜…è¯»ä¸Šé¢è¿™æ®µè¯ï¼šä½ å°±ä¼šå‘ç°ä»–è¯´å°† ç®—æ³•è¿›è¡Œåˆ†è§£ï¼Œæœ€ååœ¨æ¨¡æ¿ä¸­ä¾æ¬¡è°ƒç”¨ï¼š
    
    *   æ­¤æ—¶çš„ä½ æ˜¯å¦æƒ³èµ·æˆ‘ä»¬åˆšå¼€ç¯‡ä»‹ç»çš„**HttpServlet**ï¼Ÿï¼Ÿï¼Ÿ
    *   HttpServletç»§æ‰¿äº† GenericServletç±»ï¼Œè€ŒGenericServletç±»åˆå®ç°äº†Servletæ¥å£ï¼›HttpServleté‡Œé¢çš„Service()æ–¹æ³•ä½ æ˜¯å¦è¿˜è®°å¾—?

    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
            String method = req.getMethod();
            long lastModified;
            if (method.equals("GET")) {
                lastModified = this.getLastModified(req);
                if (lastModified == -1L) {
                    this.doGet(req, resp);
                } else {
                    long ifModifiedSince;
                    try {
                        ifModifiedSince = req.getDateHeader("If-Modified-Since");
                    } catch (IllegalArgumentException var9) {
                        ifModifiedSince = -1L;
                    }
    
                    if (ifModifiedSince < lastModified / 1000L * 1000L) {
                        this.maybeSetLastModified(resp, lastModified);
                        this.doGet(req, resp);
                    } else {
                        resp.setStatus(304);
                    }
                }
            } else if (method.equals("HEAD")) {
                lastModified = this.getLastModified(req);
                this.maybeSetLastModified(resp, lastModified);
                this.doHead(req, resp);
            } else if (method.equals("POST")) {
                this.doPost(req, resp);
            } else if (method.equals("PUT")) {
                this.doPut(req, resp);
            } else if (method.equals("DELETE")) {
                this.doDelete(req, resp);
            } else if (method.equals("OPTIONS")) {
                this.doOptions(req, resp);
            } else if (method.equals("TRACE")) {
                this.doTrace(req, resp);
            } else {
                String errMsg = lStrings.getString("http.method_not_implemented");
                Object[] errArgs = new Object[]{method};
                errMsg = MessageFormat.format(errMsg, errArgs);
                resp.sendError(501, errMsg);
            }
    
        }
    

*   ä¸€å¤§å †çš„`if`ã€`else if`ã€`else` è¿™ä¸å°±æ˜¯æ‰€è°“çš„å°†ç®—æ³•åˆ†å—æç‚¼äº†å‡ºæ¥å—ï¼Ÿç„¶åæˆ‘ä»¬åªéœ€è¦å»åˆ»ç”»`doGet()`ã€`doPost()`ç­‰æ–¹æ³•ï¼Œç¨‹åºçš„ä¸»æ¡†æ¶æ˜¯ä¸å˜çš„ï¼Œåªæ˜¯å…¶ä¸­çš„ç»†èŠ‚éœ€è¦æˆ‘ä»¬è‡ªå·±å»å®ç°ã€‚
*   æˆ‘ä¸ªäººç›®å‰è§‰å¾—å’Œé€‚é…å™¨æ¨¡å¼æ¯”è¾ƒç›¸ä¼¼ï¼Œä½†ç•¥æœ‰ä¸åŒä¹‹å¤„ã€‚

ä¸‰ã€Servletå¯¹è±¡çš„å£°æ˜å‘¨æœŸ
================

3.1 Servletå¯¹è±¡æ˜¯ç”±è°æ¥ç»´æŠ¤çš„ï¼Ÿ
---------------------

*   Servletå¯¹è±¡çš„åˆ›å»ºã€ä»¥åŠå¯¹è±¡ä¸Šæ–¹æ³•çš„è°ƒç”¨ã€å¯¹è±¡çš„é”€æ¯è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬JavaWebç¨‹åºå‘˜æ˜¯æ— æƒå¹²é¢„çš„ã€‚ä½ å¯ä»¥ä»”ç»†æƒ³æƒ³ä½ ä»€ä¹ˆæ—¶å€™newå‡ºæ¥è¿‡ä¸€ä¸ªServletå¯¹è±¡ã€‚
*   Servletå¯¹è±¡çš„å£°æ˜å‘¨æœŸæ˜¯ç”±TomcatæœåŠ¡å™¨è´Ÿè´£çš„
*   TomcatæœåŠ¡å™¨æˆ‘ä»¬åˆå¯ä»¥ç§°ä¹‹ä¸ºï¼šWEBå®¹å™¨
*   WEBå®¹å™¨æ¥ç®¡ç†Servletå¯¹è±¡çš„æ­»æ´»

3.2 Servletè®¤çŸ¥å¼ºåŒ–
---------------

*   ä½ è¿˜çœŸå¯ä»¥è‡ªå·±newä¸€ä¸ªServletå¯¹è±¡ï¼Œä½†æ˜¯å¹¶ä¸å—æˆ‘ä»¬Tomcatç®¡ç†ï¼Œæ‰€ä»¥ä½ è‡ªå·±newå‡ºæ¥çš„Servletå¯¹è±¡ï¼Œæ­»æ´»å’ŒTomcatæ²¡æœ‰å…³ç³»ã€‚
*   Tomcatåˆ›å»ºçš„Servletå¯¹è±¡ï¼Œè¿™äº›Servletéƒ½ä¼šè¢«æ”¾åˆ°ä¸€ä¸ªé›†åˆå½“ä¸­ï¼ˆHashMapï¼‰ï¼Œåªæœ‰æ”¾åˆ°HashMapé›†åˆçš„Servletæ‰èƒ½å¤Ÿè¢«Tomcatå®¹å™¨ç®¡ç†ã€‚
*   Tomcatå®¹å™¨åº•å±‚åº”è¯¥æœ‰ä¸€ä¸ªHashMapè¿™æ ·çš„é›†åˆï¼Œ**åœ¨è¿™ä¸ªé›†åˆå½“ä¸­å­˜å‚¨äº†Servletå¯¹è±¡å’Œè¯·æ±‚è·¯å¾„ä¹‹é—´çš„å…³ç³»**ï¼Œæˆ‘æƒ³æ­¤æ—¶ä½ æ›´èƒ½å¤Ÿæƒ³åˆ°ä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯åœ¨xmlä¸­å¦‚æ­¤å®šä¹‰ï¼Ÿ

![](https://img2022.cnblogs.com/blog/2816773/202207/2816773-20220705155602862-861155337.png)

*   æˆ‘ä»¬å¯ä»¥å°†Servletå¯¹è±¡ç§°ä¹‹ä¸ºå‡å•ä¾‹æ¨¡å¼ï¼Œå› ä¸ºServletåªæœ‰ä¸€ä¸ªå¯¹è±¡å‘€ã€‚ğŸ”
*   é…ç½®åœ¨web.xmlå¯¹åº”Servletç¨‹åºçš„æ ‡ç­¾ä¸‹æ·»åŠ `<load-on-startup>1</load-on-startup>`é…ç½®ï¼ŒæŒ‡å®šæ”¹Servletå¯¹è±¡åœ¨Webåº”ç”¨å¯åŠ¨æ—¶åˆ›å»º

3.3 å…³äºServletä¸­çš„æ–¹æ³•
-----------------

*   é€šè¿‡Servletä¸­çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥äº†è§£åˆ°å®ƒçš„ç”Ÿå‘½å‘¨æœŸã€è¿è¡Œæœºåˆ¶ã€‚
*   æ— å‚æ•°æ„é€ æ–¹æ³•ã€initæ–¹æ³•åªåœ¨ç¬¬ä¸€æ¬¡ç”¨æˆ·å‘é€è¯·æ±‚çš„æ—¶å€™æ‰§è¡Œ

![](https://img2022.cnblogs.com/blog/2816773/202207/2816773-20220705160154884-1228897216.png)

*   åªè¦ç”¨æˆ·å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œserviceæ–¹æ³•å¿…ç„¶ä¼šè¢«Tomcatè°ƒç”¨ä¸€æ¬¡ã€‚
    
*   å…³äºServletç±»ä¸­æ–¹æ³•çš„è°ƒç”¨æ¬¡æ•°ï¼š
    
    *   æ„é€ æ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡
    *   initæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡
    *   serviceæ–¹æ³•ï¼šç”¨æˆ·å‘é€næ¬¡è¯·æ±‚æ‰§è¡Œnæ¬¡
    *   destroyæ–¹æ³•ï¼šåªæ‰§è¡Œä¸€æ¬¡

**ä»€ä¹ˆæ—¶å€™ä½¿ç”¨destroyæ–¹æ³•ï¼š**

*   é€šå¸¸åœ¨destroyæ–¹æ³•å½“ä¸­ï¼Œè¿›è¡Œèµ„æºçš„å…³é—­ï¼Œé©¬ä¸Šå¯¹è±¡è¦è¢«é”€æ¯äº†ï¼Œè¿˜æœ‰ä»€ä¹ˆæ²¡æœ‰å…³é—­çš„ï¼ŒæŠ“ç´§æ—¶é—´å…³é—­èµ„æºã€‚

å››ã€Servletæ˜ å°„é—®é¢˜
=============

*   åªè¦æ˜¯å‰ç«¯å‘é€çš„è¯·æ±‚ï¼Œå°±å¿…é¡»è¦å†™é¡¹ç›®åï¼
*   å½“æˆ‘ä»¬è¿›è¡Œè½¬å‘çš„æ—¶å€™éœ€è¦åŠ ä¸Š"/"ï¼š`request.getRequestDispatcher('/b');`
*   å½“æˆ‘ä»¬åœ¨web.xmlä¸­é…ç½®è·¯å¾„æ—¶ï¼Œéœ€è¦åŠ ä¸Š`<url-pattern>/helloServlet</url-pattern>`

**url-patternåŒ¹é…è§„åˆ™ï¼š**

*   **"/"ï¼š**å¼±çš„ å…¨è·¯å¾„åŒ¹é…
*   **".do"ï¼š**ä»¥ç‰¹æ®Šæ–¹å¼ç»“å°¾çš„åŒ¹é…
*   **"/\*"ï¼š**å¼ºçš„ å…¨è·¯å¾„åŒ¹é…
*   **"/hello/\*"ï¼š**æœ‰å‰ç¼€çš„ æ‰€ä»¥åŒ¹é…

äº”ã€HttpServletRequest
====================

*   é¦–å…ˆHttpServletRequestè¿™ä¸ªæ¥å£å®ç°äº†ServletRequestæ¥å£ï¼Œé‚£ä¹ˆä»–ä»¬ä¸¤ä¸ªæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ
    *   **HttpServletRequestï¼š**è¿™ä¸ªåå­—å¸¦æœ‰httpï¼Œæ‰€ä»¥å®ƒçš„é‡Œé¢å°±æœ‰ä¸€äº›å…³äºå¯¹æµè§ˆå™¨çš„å¤„ç†æ–¹æ³•ï¼›ä¾‹å¦‚
    *   ![](https://img2022.cnblogs.com/blog/2816773/202207/2816773-20220705161737708-1921657969.png)

5.1 GETè¯·æ±‚å‚æ•°
-----------

â— åœ¨æµè§ˆå™¨çš„urlé‡Œå‘é€ï¼Œä»¥æŸ¥è¯¢å­—ç¬¦ä¸²æ–¹å¼æ‹¼æ¥å‚æ•°ï¼ˆ?key=value&key1=value1ï¼‰  
â— ä½¿ç”¨Ajaxï¼Œè®¾ç½®è¯·æ±‚ç±»å‹ä¸ºGETï¼Œåœ¨è¯·æ±‚urlåæ‹¼æ¥æŸ¥è¯¢å­—ç¬¦ä¸²  
â— ç”¨formè¡¨å•å‘é€

        /**
         * GETï¼Œå‘é€çš„è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚è¡Œå†…ï¼Œ
         * è¯·æ±‚è¡Œçš„ä¿¡æ¯ä¼šç”±Tomcatè‡ªåŠ¨è§£ç  ï¼ˆutf-8ï¼‰
         */
        @Override
        protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
            System.out.println("HTTPServletOne doGet");
            // 1 è·å–è¯·æ±‚å‚æ•°
            System.out.println("æ ¹æ®getParameterè·å–è¯·æ±‚å‚æ•°å€¼ ï¼š"+req.getParameter("name"));
            // 2è·å–æ‰€æœ‰å‚æ•°å
            Enumeration<String> paras = req.getParameterNames();
            String s = null;
            while (paras.hasMoreElements()) {
                s = paras.nextElement();
                System.out.println("æ ¹æ®getParameterNameså¾—åˆ°çš„å‚æ•°åï¼š"+s +"å‚æ•°å€¼ï¼š"+ req.getParameter(s));
            }
        }
    

5.2 POSTè¯·æ±‚å‚æ•°
------------

â— formè¡¨å•ä¼ è¾“ï¼ŒæŒ‡å®šè¯·æ±‚æ–¹å¼ä¸ºPOSTï¼Œé»˜è®¤Content-Typeä¸ºapplication/x-www-form-urlencoded

        /**
         * å‘é€POSTè¯·æ±‚ï¼Œè¯·æ±‚å‚æ•°éƒ½åœ¨è¯·æ±‚ä½“é‡Œ
         * è¯·æ±‚ä½“çš„å†…å®¹ç”±Servletè¿›è¡Œè§£æï¼Œé»˜è®¤ç¼–ç è§„èŒƒä¸ºISO
         * å¿…é¡»æŒ‡å®šè¯·æ±‚å¤´ Content-Type
         */
        @Override
        protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
            System.out.println("HTTPServletOne doPost");
            // 0 è®¾ç½®è¯·æ±‚å¤„ç†å­—ç¬¦é›†
            req.setCharacterEncoding("utf-8");
            // 1.è·å–è¯·æ±‚å‚æ•°
            System.out.println("æ ¹æ®getParameterè·å–è¯·æ±‚å‚æ•°å€¼ ï¼š"+req.getParameter("name"));
        }
    

â— Ajaxä¼ è¾“ï¼ŒæŒ‡å®šè¯·æ±‚æ–¹å¼ä¸ºPOSTï¼Œå¿…é¡»æ·»åŠ Content-Typeä¸ºapplication/x-www-form-urlencoded;charset=utf-8

        /**
         * å‘é€POSTè¯·æ±‚ï¼Œè¯·æ±‚å‚æ•°éƒ½åœ¨è¯·æ±‚ä½“é‡Œ
         * è¯·æ±‚ä½“çš„å†…å®¹ç”±Servletè¿›è¡Œè§£æï¼Œé»˜è®¤ç¼–ç è§„èŒƒä¸ºISO
         */
        @Override
        protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
            System.out.println("HTTPServletOne doPost");
            // 0 è®¾ç½®è¯·æ±‚å¤„ç†å­—ç¬¦é›†
            req.setCharacterEncoding("utf-8");
            // 1 è·å–JSONæ•°æ®
            // 2 readerè¾“å…¥æµï¼Œ æ˜¯ä»è¯·æ±‚ä½“å¼€å§‹è¯»çš„
            BufferedReader reader = req.getReader();
            String s = null;
            StringBuilder sb = new StringBuilder();
            while ((s = reader.readLine()) != null) {
                sb.append(s);
            }
            String json = sb.toString();
            // 3 é€šè¿‡FastJson å·¥å…·è¿›è¡Œè§£æ
            Person person = JSON.parseObject(json, Person.class);
            System.out.println(person);
        }
    

â— é™„ä¸Šå‰ç«¯ä»£ç 

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
        <script type="text/javascript">
            function onGet() {
                //ajax
                var xhr = new XMLHttpRequest();
                xhr.open("GET","http://localhost:8080/httpServlet01?name=123&age=12");
                xhr.send();
            }
            function onPost() {
                //ajax
                //ç”¨GETæ–¹å¼å‘é€çš„è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚è¡Œå†…ï¼Œè¯·æ±‚è¡Œå†…çš„ä¿¡æ¯ä¼šç”±Tomcatè‡ªåŠ¨è§£ç ï¼ˆutf-8ï¼‰
                //å¦‚æœç”¨POSTè¯·æ±‚ï¼Œæ‰€æœ‰å‚æ•°éƒ½æ”¾åœ¨äº†è¯·æ±‚ä½“é‡Œï¼Œ
                //ä½†æ˜¯è¯·æ±‚ä½“çš„å†…å®¹ä¸æ˜¯Tomcatè§£æçš„ï¼Œ æ˜¯ç”±Servletè¿›è¡Œè§£æçš„ï¼Œé»˜è®¤çš„ç¼–ç è§„èŒƒä¸ºISO
                //åˆ™éœ€è¦å£°æ˜è¯·æ±‚å¤´æ ¼å¼ï¼šapplication/x-www-form-urlencoded
                //è¡¨å•å‘é€çš„è¯ ä¼šé»˜è®¤åŠ ä¸Šè¿™ä¸ªç±»å‹
                var xhr = new XMLHttpRequest();
                xhr.open("POST","http://localhost:8080/httpServlet01");
                xhr.setRequestHeader("Content-Type","application/json;charset=utf-8")
                xhr.send("{'name':'123'}");
            }
            function onPut() {
                //ajax
                var xhr = new XMLHttpRequest();
                xhr.open("PUT","http://localhost:8080/httpServlet01");
                xhr.send();
            }
            function onDelete() {
                //ajax
                var xhr = new XMLHttpRequest();
                xhr.open("DELETE","http://localhost:8080/httpServlet01");
                xhr.send();
            }
        </script>
    </head>
    <body>
        <h1>Hello,Servlet!</h1>
        <button onclick="onGet()">å‘é€GETè¯·æ±‚</button>
        <button onclick="onPost()">å‘é€POSTè¯·æ±‚</button>
        <button onclick="onPut()">å‘é€PUTè¯·æ±‚</button>
        <button onclick="onDelete()">å‘é€DELETEè¯·æ±‚</button>
    </body>
    </html>
    

å…­ã€ç»“å°¾
====

*   å¯¹äºTomcatçš„Servletå†…å®¹å°±æ€»ç»“è¿™ä¹ˆå¤šï¼Œè‹¥æƒ³æ·±å…¥å­¦ä¹ ç­‰å¾…åç»­æ›´æ–°ã€‚
*   æˆ‘å°†ä¼šç»§ç»­æ›´æ–°å…³äºJavaæ–¹å‘çš„å­¦ä¹ çŸ¥è¯†ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…³æ³¨ä¸€ä¸‹ã€‚
*   æ–‡ç« å†™å¾—æ¯”è¾ƒèµ°å¿ƒï¼Œç”¨äº†å¾ˆé•¿æ—¶é—´ï¼Œç»å¯¹ä¸æ˜¯copyè¿‡æ¥çš„ï¼
*   å°Šé‡æ¯ä¸€ä½å­¦ä¹ çŸ¥è¯†çš„äººï¼ŒåŒæ—¶ä¹Ÿå°Šé‡æ¯ä¸€ä½åˆ†äº«çŸ¥è¯†çš„äººã€‚
*   ğŸ˜ä½ çš„ç‚¹èµä¸å…³æ³¨ï¼Œæ˜¯æˆ‘åŠªåŠ›å‰è¡Œçš„æ— é™åŠ¨åŠ›ã€‚ğŸ¤©