---
layout: post
title: "Go | é—­åŒ…çš„ä½¿ç”¨"
date: "2022-12-06T10:17:45.247Z"
---
Go | é—­åŒ…çš„ä½¿ç”¨
==========

é—­åŒ…å°±æ˜¯ ä¸€ä¸ªå‡½æ•°å’Œå…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆçš„ä¸€ä¸ªæ•´ä½“ï¼Œå¥½å¤„å°±æ˜¯ä¿å­˜å¼•ç”¨çš„å˜é‡ï¼Œä¸‹æ¬¡ç»§ç»­ä½¿ç”¨ï¼Œä¸ä¼šé”€æ¯ã€‚

é—­åŒ…åŸºæœ¬ä»‹ç»
======

é—­åŒ…å°±æ˜¯ **ä¸€ä¸ªå‡½æ•°** å’Œå…¶ç›¸å…³çš„ **å¼•ç”¨ç¯å¢ƒ** ç»„åˆçš„ä¸€ä¸ªæ•´ä½“

**å¥½å¤„ï¼š** ä¿å­˜å¼•ç”¨çš„å˜é‡ï¼Œä¸‹æ¬¡ç»§ç»­ä½¿ç”¨ï¼Œä¸ä¼šé”€æ¯

ä¸‹é¢é€šè¿‡é—­åŒ…çš„æ–¹å¼ï¼Œå†™ä¸€ä¸ªæ•°å­—ç´¯åŠ å™¨ï¼Œä½“éªŒä¸€ä¸‹é—­åŒ…çš„å¦™å¤„ğŸ‘‡

é—­åŒ…å®ç°æ•°å­—ç´¯åŠ 
--------

    package main
    
    import "fmt"
    
    // ç´¯åŠ å™¨
    // é—­åŒ… - å‡½æ•°æŸ¯é‡ŒåŒ–
    // è¿”å›å€¼ç±»å‹ï¼š func(int) int
    func AddUpper() func(int) int {
    	var n int = 100
    	return func(i int) int {
    		n = n + i
    		return n
    	}
    }
    
    func main() {
    	f := AddUpper()
    	fmt.Println(f(1)) // 101
    	fmt.Println(f(2)) // 103
    	fmt.Println(f(3)) // 106
    }
    
    

ä»£ç è¯´æ˜
----

1.  AddUpperæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›çš„æ•°æ®ç±»å‹ **func(int) int**
    
2.  é—­åŒ…çš„è¯´æ˜
    

![](https://img2023.cnblogs.com/blog/1037867/202212/1037867-20221206133748179-197264546.png)

è¿”å›çš„æ˜¯ä¸€ä¸ª`åŒ¿åå‡½æ•°`ï¼Œä½†æ˜¯è¿™ä¸ªåŒ¿åå‡½æ•°å¼•ç”¨åˆ°äº†å‡½æ•°å¤–çš„å˜é‡ n ï¼Œå› æ­¤è¿™ä¸ªåŒ¿åå‡½æ•°å°±å’Œ n å½¢æˆä¸€ä¸ªæ•´ä½“ï¼Œæ„æˆé—­åŒ…

3.  å½“åå¤è°ƒç”¨ `f` å‡½æ•°æ—¶ï¼Œå› ä¸º n åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œä¿å­˜äº†å˜é‡çš„å€¼ï¼Œå› æ­¤æ¯è°ƒç”¨ä¸€æ¬¡å°±ç›¸å½“äºè¿›è¡Œäº†ç´¯åŠ ã€‚
    
4.  æˆ‘ä»¬è¦ææ¸…æ¥šé—­åŒ…ï¼Œå…³é”®å°±æ˜¯è¦åˆ†æ**è¿”å›çš„å‡½æ•°ä½¿ç”¨åˆ°å“ªäº›å˜é‡**
    

ä»£ç åˆ†æ
----

è¿™é‡Œæˆ‘å¼•å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡`str`ï¼Œæ¥å¸®åŠ©åˆ†æé—­åŒ…æ˜¯æ€ä¹ˆä¿å­˜å˜é‡çš„ã€‚

    package main
    
    import (
    	"fmt"
    )
    
    // ç´¯åŠ å™¨
    // é—­åŒ… - å‡½æ•°æŸ¯é‡ŒåŒ–
    // è¿”å›å€¼ç±»å‹ï¼š func(int) int
    func AddUpper() func(int) int {
    	var n int = 100
    	var str = "hello"
    	return func(i int) int {
    		n = n + i
    		fmt.Println("i=", i)
    		str += string(36) // ascii 36 = '$'
    		fmt.Printf("str==%s\n", str)
    		return n
    	}
    }
    
    func main() {
    	f := AddUpper()
    	// fmt.Println(AddUpper()(1)) // 101
    	fmt.Println("f(1)=", f(1)) // 101
    	fmt.Println("f(2)=", f(2)) // 103
    	fmt.Println("f(3)=", f(3)) // 106
    }
    
    
    i= 1
    str==hello$
    f(1)= 101
    i= 2
    str==hello$$
    f(2)= 103
    i= 3
    str==hello$$$
    f(3)= 106
    

ä»è¾“å‡ºå¯ä»¥çœ‹å‡ºæ¥ï¼Œé—­åŒ…å¼•ç”¨çš„å˜é‡`n`å’Œ`str`å¹¶æ²¡æœ‰åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™é‡å¤å£°æ˜ï¼Œè€Œæ˜¯ä¿ç•™äº†ä¸‹æ¬¡å‡½æ•°è°ƒç”¨åæ›´æ–°çš„å€¼ã€‚

é—­åŒ…æ¡ˆä¾‹
====

éœ€æ±‚ï¼š

1.  ç¼–å†™ä¸€ä¸ªå‡½æ•° makeSuffix(suffix string) ï¼Œå¯ä»¥æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶åç¼€åï¼Œå¹¶è¿”å›ä¸€ä¸ªé—­åŒ…
    
2.  è°ƒç”¨é—­åŒ…ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ–‡ä»¶åï¼Œå¦‚æœè¯¥æ–‡ä»¶åæ²¡æœ‰æŒ‡å®šåç¼€ï¼Œåˆ™è¿”å› æ–‡ä»¶å.jpg ï¼Œå¦‚æœå·²ç»æœ‰.jpgï¼Œåˆ™è¿”å›åŸæ–‡ä»¶åã€‚
    

strings.HasSuffixï¼Œè¯¥å‡½æ•°å¯ä»¥åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦æœ‰æŒ‡å®šçš„åç¼€ã€‚

ä¸Šä»£ç 
---

    package main
    
    import (
    	"fmt"
    	"strings"
    )
    
    func makeSuffix(suffix string) func(string) string {
    	return func(name string) string {
    		if !strings.HasSuffix(name, suffix) {
    			return name + suffix
    		}
    		return name
    	}
    }
    
    // ä¼ ç»Ÿå†™æ³•
    func makeSuffixV2(suffix string, name string) string {
    	if !strings.HasSuffix(name, suffix) {
    		return name + suffix
    	}
    	return name
    }
    
    func main() {
    	// é—­åŒ…è°ƒç”¨
    	f := makeSuffix(".jpg")
    	fmt.Println(f("xiao"))         // xiao.jpg
    	fmt.Println(f("xiaoxiao.jpg")) // xiaoxiao.jpg
    	fmt.Println(f("xiaoxiao.666")) // xiaoxiao.666.jpg
    
    	// ä¼ ç»Ÿå†™æ³•è°ƒç”¨
    	fmt.Println("makeSuffixV2=", makeSuffixV2(".jpg", "allblue"))  // makeSuffixV2= allblue.jpg
    	fmt.Println("makeSuffixV2=", makeSuffixV2(".jpg", "all.blue")) // makeSuffixV2= all.blue.jpg
    }
    
    

ä»£ç è¯´æ˜
----

è¿”å›çš„åŒ¿åå‡½æ•°å’Œ makeSuffix(suffix string) çš„ suffix å˜é‡ç»„åˆæˆä¸€ä¸ªé—­åŒ…

ä¼ ç»Ÿå†™æ³•å’Œé—­åŒ…å†™æ³•å®ç°æ•ˆæœä¸€æ ·ï¼Œä½†æ˜¯ï¼Œä¼ ç»Ÿå†™æ³•éœ€è¦é‡å¤å†™å˜é‡ï¼Œ æ¯”å¦‚ä¸Šé¢çš„

**makeSuffixV2(".jpg", "all.blue"))**

é—­åŒ…åˆ™è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯ä»£ç çœ‹èµ·æ¥æ›´åŠ çš„ç®€æ´

é—­åŒ…çš„å¥½å¤„ä¹‹ä¸€ï¼š å‚æ•°å¤ç”¨
-------------

å¥½å¤„ï¼š ä¿å­˜å¼•ç”¨çš„å˜é‡ï¼Œä¸‹æ¬¡ç»§ç»­ä½¿ç”¨ï¼Œä¸ä¼šé”€æ¯

å‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆé—­åŒ…ï¼‰
=========

å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š ç”œç‚¹ccçš„è¯­é›€çŸ¥è¯†åº“

![](https://img2023.cnblogs.com/blog/1037867/202212/1037867-20221206133748721-661327756.png)

æˆ‘æ˜¯ [**ç”œç‚¹cc**](https://blog.i-xiao.space/)â˜­

å¾®ä¿¡å…¬ä¼—å·ï¼šã€çœ‹è§å¦ä¸€ç§å¯èƒ½ã€‘

ä¸“æ³¨å‰ç«¯å¼€å‘ï¼Œä¹Ÿå–œæ¬¢ä¸“ç ”å„ç§è·Ÿæœ¬èŒå·¥ä½œå…³ç³»ä¸å¤§çš„æŠ€æœ¯ï¼ŒæŠ€æœ¯ã€äº§å“å…´è¶£å¹¿æ³›ä¸”æµ“åšã€‚æœ¬å·ä¸»è¦è‡´åŠ›äºåˆ†äº«ä¸ªäººç»éªŒæ€»ç»“ï¼Œå¸Œæœ›å¯ä»¥ç»™ä¸€å°éƒ¨åˆ†äººä¸€äº›å¾®å°å¸®åŠ©ã€‚

æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š[ç”œç‚¹cc](https://www.cnblogs.com/all-smile/)ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š[https://www.cnblogs.com/all-smile/p/16954994.html](https://www.cnblogs.com/all-smile/p/16954994.html)