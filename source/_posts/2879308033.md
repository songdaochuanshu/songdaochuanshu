---
layout: post
title: "é¡¹ç›®è®²è§£ä¹‹å¸¸è§å®‰å…¨æ¼æ´"
date: "2023-04-19T01:07:56.529Z"
---
é¡¹ç›®è®²è§£ä¹‹å¸¸è§å®‰å…¨æ¼æ´
===========

æœ¬æ–‡æ˜¯ä»å¼€æºé¡¹ç›® RuoYi çš„æäº¤è®°å½•æ–‡å­—æè¿°ä¸­æ ¹æ®å…³é”®å­—**æ¼æ´|å®‰å…¨|é˜»æ­¢**ç­›é€‰è€Œæ¥ã€‚æ—¨åœ¨ä¸ºå¤§å®¶ä»‹ç»æ—¥å¸¸é¡¹ç›®å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„ä¸€äº›å®‰å…¨é—®é¢˜ä»¥åŠå¦‚ä½•è§£å†³ã€‚

> é¡¹ç›®å®‰å…¨æ˜¯æ¯ä¸ªå¼€å‘äººå‘˜éƒ½éœ€è¦é‡ç‚¹å…³æ³¨çš„é—®é¢˜ã€‚å¦‚æœé¡¹ç›®æ¼æ´å¤ªå¤š,å¾ˆå®¹æ˜“é­å—é»‘å®¢æ”»å‡»ä¸ç”¨æˆ·ä¿¡æ¯æ³„éœ²çš„é£é™©ã€‚æœ¬æ–‡å°†ç»“åˆ3ä¸ªå…¸å‹æ¡ˆä¾‹ï¼Œè§£é‡Šå¸¸è§çš„å®‰å…¨æ¼æ´åŠä¿®å¤æ–¹æ¡ˆï¼Œå¸®åŠ©å¤§å®¶åœ¨é¡¹ç›®å¼€å‘ä¸­è¿›ä¸€æ­¥æé«˜å®‰å…¨æ„è¯†ã€‚

*   RuoYié¡¹ç›®åœ°å€ï¼š[https://gitee.com/y\_project/RuoYi](https://gitee.com/y_project/RuoYi)
*   åšä¸»githubåœ°å€ï¼š[https://github.com/wayn111ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨](https://github.com/wayn111%EF%BC%8C%E6%AC%A2%E8%BF%8E%E5%A4%A7%E5%AE%B6%E5%85%B3%E6%B3%A8)

ä¸€ã€é‡ç½®ç”¨æˆ·å¯†ç 
========

RuoYi é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªé‡ç½®ç”¨æˆ·å¯†ç çš„æ¥å£ï¼Œåœ¨æäº¤è®°å½• `dd37524b` ä¹‹å‰çš„ä»£ç å¦‚ä¸‹ï¼š

    @Log(title = "é‡ç½®å¯†ç ", businessType = BusinessType.UPDATE)
    @PostMapping("/resetPwd")
    @ResponseBody
    public AjaxResult resetPwd(SysUser user)
    {
        user.setSalt(ShiroUtils.randomSalt());
        user.setPassword(passwordService.encryptPassword(user.getLoginName(), 
                              user.getPassword(), user.getSalt()));
        int rows = userService.resetUserPwd(user);
        if (rows > 0)
        {
            setSysUser(userService.selectUserById(user.getUserId()));
            return success();
        }
        return error();
    }
    

å¯ä»¥çœ‹å‡ºè¯¥æ¥å£ä¼šè¯»å–ä¼ å…¥çš„ç”¨æˆ·ä¿¡æ¯ï¼Œé‡ç½®å®Œç”¨æˆ·å¯†ç åï¼Œä¼šæ ¹æ®ä¼ å…¥çš„ userId æ›´æ–°æ•°æ®åº“ä»¥åŠç¼“å­˜ã€‚

è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸ä¸¥é‡çš„å®‰å…¨é—®é¢˜å°±æ˜¯ç›²ç›®ç›¸ä¿¡ä¼ å…¥çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæ”»å‡»äººå‘˜é€šè¿‡æ¥å£æ„é€ è¯·æ±‚ï¼Œå¹¶ä¸”åœ¨ä¼ å…¥çš„ user å‚æ•°ä¸­è®¾ç½® userId ä¸ºå…¶ä»–ç”¨æˆ·çš„ userIdï¼Œé‚£ä¹ˆè¿™ä¸ªæ¥å£å°±ä¼šå¯¼è‡´æŸäº›ç”¨æˆ·çš„å¯†ç è¢«é‡ç½®å› è€Œè¢«æ”»å‡»äººå‘˜æŒæ¡ã€‚

1.1 æ”»å‡»æµç¨‹
--------

å‡å¦‚æ”»å‡»äººå‘˜æŒæ¡äº†å…¶ä»–ç”¨æˆ·çš„ userId ä»¥åŠç™»å½•è´¦å·å

1.  æ„é€ é‡ç½®å¯†ç è¯·æ±‚
2.  å°† userId è®¾ç½®æœªå…¶ä»–ç”¨æˆ·çš„ userId
3.  æœåŠ¡ç«¯æ ¹æ®ä¼ å…¥çš„ userId ä¿®æ”¹ç”¨æˆ·å¯†ç 
4.  ä½¿ç”¨æ–°çš„ç”¨æˆ·è´¦å·ä»¥åŠé‡ç½®åçš„å¯†ç è¿›è¡Œç™»å½•
5.  æ”»å‡»æˆåŠŸ

1.2 å¦‚ä½•è§£å†³
--------

åœ¨è®°å½• `dd37524b` æäº¤ä¹‹åï¼Œä»£ç æ›´æ–°å¦‚ä¸‹ï¼š

    @Log(title = "é‡ç½®å¯†ç ", businessType = BusinessType.UPDATE)
    @PostMapping("/resetPwd")
    @ResponseBody
    public AjaxResult resetPwd(String oldPassword, String newPassword)
    {
        SysUser user = getSysUser();
        if (StringUtils.isNotEmpty(newPassword)
                        && passwordService.matches(user, oldPassword))
        {
            user.setSalt(ShiroUtils.randomSalt());
            user.setPassword(passwordService.encryptPassword(
                        user.getLoginName(), newPassword, user.getSalt()));
            if (userService.resetUserPwd(user) > 0)
            {
                setSysUser(userService.selectUserById(user.getUserId()));
                return success();
            }
            return error();
        }
        else
        {
            return error("ä¿®æ”¹å¯†ç å¤±è´¥ï¼Œæ—§å¯†ç é”™è¯¯");
        }
    }
    

è§£å†³æ–¹æ³•å…¶å®å¾ˆç®€å•ï¼Œä¸è¦ç›²ç›®ç›¸ä¿¡ç”¨æˆ·ä¼ å…¥çš„å‚æ•°ï¼Œé€šè¿‡ç™»å½•çŠ¶æ€è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„userIdã€‚å¦‚ä¸Šä»£ç é€šè¿‡ `getSysUser()` æ–¹æ³•è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ userId åï¼Œå†æ ¹æ® userId é‡ç½®å¯†ç ã€‚

äºŒã€æ–‡ä»¶ä¸‹è½½
======

æ–‡ä»¶ä¸‹è½½ä½œä¸º web å¼€å‘ä¸­ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½ä¼šé‡åˆ°çš„åŠŸèƒ½ï¼Œç›¸ä¿¡å¯¹å¤§å®¶è€Œè¨€éƒ½ä¸é™Œç”Ÿã€‚RuoYi åœ¨æäº¤è®°å½• `18f6366f` ä¹‹å‰çš„ä¸‹è½½æ–‡ä»¶é€»è¾‘å¦‚ä¸‹ï¼š

    @GetMapping("common/download")
    public void fileDownload(String fileName, Boolean delete, HttpServletResponse response, HttpServletRequest request)
    {
        try
        {
            if (!FileUtils.isValidFilename(fileName))
            {
                throw new Exception(StringUtils.format(
                          "æ–‡ä»¶åç§°({})éæ³•ï¼Œä¸å…è®¸ä¸‹è½½ã€‚ ", fileName));
            }
            String realFileName = System.currentTimeMillis() + fileName.substring(fileName.indexOf("_") + 1);
            String filePath = Global.getDownloadPath() + fileName;
    
            response.setContentType(MediaType.APPLICATION_OCTET_STREAM_VALUE);
            FileUtils.setAttachmentResponseHeader(response, realFileName);
    
            FileUtils.writeBytes(filePath, response.getOutputStream());
            if (delete)
            {
                FileUtils.deleteFile(filePath);
            }
        }
        catch (Exception e)
        {
            log.error("ä¸‹è½½æ–‡ä»¶å¤±è´¥", e);
        }
    }
    
    public class FileUtils
    {
        public static String FILENAME_PATTERN = 
                      "[a-zA-Z0-9_\\-\\|\\.\\u4e00-\\u9fa5]+";
        public static boolean isValidFilename(String filename)
        {
            return filename.matches(FILENAME_PATTERN);
        }
    }
    

å¯ä»¥çœ‹åˆ°ä»£ç ä¸­åœ¨ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œä¼šåˆ¤æ–­æ–‡ä»¶åç§°æ˜¯å¦åˆæ³•ï¼Œå¦‚æœä¸åˆæ³•ä¼šæç¤º **æ–‡ä»¶åç§°({})éæ³•ï¼Œä¸å…è®¸ä¸‹è½½ã€‚** çš„å­—æ ·ã€‚å’‹ä¸€çœ‹ï¼Œå¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œåšä¸»å…¬å¸é¡¹ç›®ä¸­ä¸‹è½½æ–‡ä»¶ä¹Ÿæœ‰è¿™ç§ç±»ä¼¼ä»£ç ã€‚ä¼ å…¥ä¸‹è½½æ–‡ä»¶åç§°ï¼Œç„¶åå†æŒ‡å®šç›®å½•ä¸­æ‰¾åˆ°è¦ä¸‹è½½çš„æ–‡ä»¶åï¼Œé€šè¿‡æµå›å†™ç»™å®¢æˆ·ç«¯ã€‚

æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘ä»¬å†çœ‹ä¸€ä¸‹æäº¤è®°å½• `18f6366f` çš„æè¿°ä¿¡æ¯ï¼Œ  
![](https://files.mdnice.com/user/40549/5ce0d94f-0b8c-43fa-9b89-5beb9702ad88.png)  
ä¸çœ‹ä¸çŸ¥é“ï¼Œä¸€çœ‹å“ä¸€è·³ï¼ŒåŸæ¥å†è¿™ä¸ªæäº¤ä¹‹å‰ï¼Œé¡¹ç›®ä¸­å­˜åœ¨ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´ï¼Œè¿™é‡Œåšä¸»ç»™å¤§å®¶è®²è§£ä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šå­˜åœ¨ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´ã€‚

2.1 æ”»å‡»æµç¨‹
--------

å‡å¦‚ä¸‹è½½ç›®å½•ä¸º `/data/upload/`

1.  æ„é€ ä¸‹è½½æ–‡ä»¶è¯·æ±‚
2.  è®¾ç½®ä¸‹è½½æ–‡ä»¶åç§°ä¸º:`../../home/é‡è¦æ–‡ä»¶.txt`
3.  æœåŠ¡ç«¯å°†æ–‡ä»¶åä¸ä¸‹è½½ç›®å½•è¿›è¡Œæ‹¼æ¥ï¼Œè·å–å®é™…ä¸‹è½½æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ä¸º `/data/upload/../../home/é‡è¦æ–‡ä»¶.txt`
4.  ç”±äºä¸‹è½½æ–‡ä»¶åŒ…å« **..** å­—ç¬¦ï¼Œä¼šæ‰§è¡Œä¸Šè·³ç›®å½•çš„é€»è¾‘
5.  ä¸Šè·³ç›®å½•é€»è¾‘æ‰§è¡Œå®Œæ¯•ï¼Œå®é™…ä¸‹è½½æ–‡ä»¶ä¸º `/home/é‡è¦æ–‡ä»¶.txt`
6.  æ”»å‡»æˆåŠŸ

2.2 å¦‚ä½•è§£å†³
--------

æˆ‘ä»¬çœ‹ä¸€ä¸‹æäº¤è®°å½• `18f6366f` ä¸»è¦å¹²äº†ä»€ä¹ˆï¼Œä»£ç å¦‚ä¸‹ï¼š

    @GetMapping("common/download")
    public void fileDownload(String fileName, Boolean delete, HttpServletResponse response, HttpServletRequest request)
    {
        try
        {
            if (!FileUtils.checkAllowDownload(fileName))
            {
                throw new Exception(StringUtils.format(
                          "æ–‡ä»¶åç§°({})éæ³•ï¼Œä¸å…è®¸ä¸‹è½½ã€‚ ", fileName));
            }
            String realFileName = System.currentTimeMillis() + fileName.substring(fileName.indexOf("_") + 1);
            String filePath = Global.getDownloadPath() + fileName;
    
            response.setContentType(MediaType.APPLICATION_OCTET_STREAM_VALUE);
            FileUtils.setAttachmentResponseHeader(response, realFileName);
            FileUtils.writeBytes(filePath, response.getOutputStream());
            if (delete)
            {
                FileUtils.deleteFile(filePath);
            }
        }
        catch (Exception e)
        {
            log.error("ä¸‹è½½æ–‡ä»¶å¤±è´¥", e);
        }
    }
    
    public class FileUtils
    {
        /**
         * æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å¯ä¸‹è½½
         * 
         * @param resource éœ€è¦ä¸‹è½½çš„æ–‡ä»¶
         * @return true æ­£å¸¸ false éæ³•
         */
        public static boolean checkAllowDownload(String resource)
        {
            // ç¦æ­¢ç›®å½•ä¸Šè·³çº§åˆ«
            if (StringUtils.contains(resource, ".."))
            {
                return false;
            }
    
            // æ£€æŸ¥å…è®¸ä¸‹è½½çš„æ–‡ä»¶è§„åˆ™
            if (ArrayUtils.contains(MimeTypeUtils.DEFAULT_ALLOWED_EXTENSION,
                                FileTypeUtils.getFileType(resource)))
            {
                return true;
            }
    
            // ä¸åœ¨å…è®¸ä¸‹è½½çš„æ–‡ä»¶è§„åˆ™
            return false;
        }
    }
    ...
    public static final String[] DEFAULT_ALLOWED_EXTENSION = {
            // å›¾ç‰‡
            "bmp", "gif", "jpg", "jpeg", "png",
            // word excel powerpoint
            "doc", "docx", "xls", "xlsx", "ppt", "pptx", "html", "htm", "txt",
            // å‹ç¼©æ–‡ä»¶
            "rar", "zip", "gz", "bz2",
            // è§†é¢‘æ ¼å¼
            "mp4", "avi", "rmvb",
            // pdf
            "pdf" };
    ...
    public class FileTypeUtils
    {
        /**
         * è·å–æ–‡ä»¶ç±»å‹
         * <p>
         * ä¾‹å¦‚: ruoyi.txt, è¿”å›: txt
         *
         * @param fileName æ–‡ä»¶å
         * @return åç¼€ï¼ˆä¸å«".")
         */
        public static String getFileType(String fileName)
        {
            int separatorIndex = fileName.lastIndexOf(".");
            if (separatorIndex < 0)
            {
                return "";
            }
            return fileName.substring(separatorIndex + 1).toLowerCase();
        }
    }
    

å¯ä»¥çœ‹åˆ°ï¼Œæäº¤è®°å½• `18f6366f` ä¸­ï¼Œå°†ä¸‹è½½æ–‡ä»¶æ—¶çš„ `FileUtils.isValidFilename(fileName)` æ–¹æ³•æ¢æˆäº† `FileUtils.checkAllowDownload(fileName)` æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šæ£€æŸ¥æ–‡ä»¶åç§°å‚æ•°ä¸­æ˜¯å¦åŒ…å« **..** ï¼Œä»¥é˜²æ­¢ç›®å½•ä¸Šè·³ï¼Œç„¶åå†æ£€æŸ¥æ–‡ä»¶åç§°æ˜¯å¦å†ç™½åå•ä¸­ã€‚è¿™æ ·å°±å¯ä»¥é¿å…ä»»æ„æ–‡ä»¶ä¸‹è½½æ¼æ´ã€‚

> è·¯å¾„éå†å…è®¸æ”»å‡»è€…é€šè¿‡æ“çºµè·¯å¾„çš„å¯å˜éƒ¨åˆ†è®¿é—®ç›®å½•å’Œæ–‡ä»¶çš„å†…å®¹ã€‚åœ¨å¤„ç†æ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ç­‰æ“ä½œæ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è·¯å¾„å‚æ•°è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼Œé˜²æ­¢ç›®å½•éå†æ¼æ´ã€‚

ä¸‰ã€åˆ†é¡µæŸ¥è¯¢æ’åºå‚æ•°
==========

RuoYi é¡¹ç›®ä½œä¸ºä¸€ä¸ªåå°ç®¡ç†é¡¹ç›®ï¼Œå‡ ä¹æ¯ä¸ªèœå•éƒ½ä¼šç”¨åˆ°åˆ†é¡µæŸ¥è¯¢ï¼Œå› æ­¤é¡¹ç›®ä¸­å°è£…äº†åˆ†é¡µæŸ¥è¯¢ç±» `PageDomain`ï¼Œå…¶ä»–ä¼šè¯»å–å®¢æˆ·ç«¯ä¼ å…¥çš„ `orderByColumn` å‚æ•°ã€‚å†æäº¤è®°å½• `807b7231` ä¹‹å‰ï¼Œåˆ†é¡µæŸ¥è¯¢ä»£ç å¦‚ä¸‹ï¼š

    public class PageDomain
    {
        ...
        public void setOrderByColumn(String orderByColumn)
        {
            this.orderByColumn = orderByColumn;
        }
        ...
    }
    
    /**
     * è®¾ç½®è¯·æ±‚åˆ†é¡µæ•°æ®
     */
    public static void startPage()
    {
        PageDomain pageDomain = TableSupport.buildPageRequest();
        Integer pageNum = pageDomain.getPageNum();
        Integer pageSize = pageDomain.getPageSize();
        String orderBy = pageDomain.getOrderBy();
        Boolean reasonable = pageDomain.getReasonable();
        PageHelper.startPage(pageNum, pageSize, orderBy).setReasonable(reasonable);
    }
    
    /**
     * åˆ†é¡µæŸ¥è¯¢
     */
    @RequiresPermissions("system:post:list")
    @PostMapping("/list")
    @ResponseBody
    public TableDataInfo list(SysPost post)
    {
        startPage();
        List<SysPost> list = postService.selectPostList(post);
        return getDataTable(list);
    }
    

å¯ä»¥çœ‹åˆ°ï¼Œåˆ†é¡µæŸ¥è¯¢ä¸€èˆ¬ä¼šç›´æ¥æ¡ç”¨å°è£…å¥½çš„ `startPage()` æ–¹æ³•ï¼Œä¼šå°† `PageDomain` çš„ `orderByColumn` å±æ€§ç›´æ¥æ”¾è¿› `PageHelper` ä¸­ï¼Œæœ€åä¹Ÿå°±ä¼šæ‹¼æ¥åœ¨å®é™…çš„ SQL æŸ¥è¯¢è¯­å¥ä¸­ã€‚

3.1 æ”»å‡»æµç¨‹
--------

å‡å¦‚æ”»å‡»äººå‘˜çŸ¥é“ç”¨æˆ·è¡¨åç§°ä¸º usersï¼Œ

1.  æ„é€ åˆ†é¡µæŸ¥è¯¢è¯·æ±‚
2.  ä¼ å…¥ `orderByColumn` å‚æ•°ä¸º `1; DROP TABLE users;`
3.  å®é™…æ‰§è¡Œçš„ SQL å¯èƒ½ä¸ºï¼š`SELECT * FROM users WHERE username = 'admin' ORDER BY 1; DROP TABLE users;`
4.  æ‰§è¡Œ SQLï¼Œ`DROP TABLE users;` å®Œæ¯•ï¼Œusers è¡¨è¢«åˆ é™¤
5.  æ”»å‡»æˆåŠŸ

3.2 å¦‚ä½•è§£å†³
--------

å†æäº¤è®°å½• `807b7231` ä¹‹åï¼Œé’ˆå¯¹æ’åºå‚æ•°åšäº†è½¬ä¹‰å¤„ç†ï¼Œæœ€æ–°ä»£ç å¦‚ä¸‹ï¼Œ

    public class PageDomain
    {
        ...
        public void setOrderByColumn(String orderByColumn)
        {
            this.orderByColumn = SqlUtil.escapeSql(orderByColumn);
        }
    }
    
    /**
     * sqlæ“ä½œå·¥å…·ç±»
     * 
     * @author ruoyi
     */
    public class SqlUtil
    {
        /**
         * ä»…æ”¯æŒå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€ç©ºæ ¼ã€é€—å·ã€å°æ•°ç‚¹ï¼ˆæ”¯æŒå¤šä¸ªå­—æ®µæ’åºï¼‰
         */
        public static String SQL_PATTERN = "[a-zA-Z0-9_\\ \\,\\.]+";
    
        /**
         * æ£€æŸ¥å­—ç¬¦ï¼Œé˜²æ­¢æ³¨å…¥ç»•è¿‡
         */
        public static String escapeOrderBySql(String value)
        {
            if (StringUtils.isNotEmpty(value) && !isValidOrderBySql(value))
            {
                throw new UtilException("å‚æ•°ä¸ç¬¦åˆè§„èŒƒï¼Œä¸èƒ½è¿›è¡ŒæŸ¥è¯¢");
            }
            return value;
        }
    
        /**
         * éªŒè¯ order by è¯­æ³•æ˜¯å¦ç¬¦åˆè§„èŒƒ
         */
        public static boolean isValidOrderBySql(String value)
        {
            return value.matches(SQL_PATTERN);
        }
        ...
    }
    

å¯ä»¥çœ‹åˆ°å¯¹äº `order by` è¯­å¥åå¯ä»¥æ‹¼æ¥çš„å­—ç¬¦ä¸²åšäº†æ­£åˆ™åŒ¹é…ï¼Œä»…æ”¯æŒå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€ç©ºæ ¼ã€é€—å·ã€å°æ•°ç‚¹ï¼ˆæ”¯æŒå¤šä¸ªå­—æ®µæ’åºï¼‰ã€‚ä»¥æ­¤å¯ä»¥é¿å… `order by` åé¢æ‹¼æ¥å…¶ä»–éæ³•å­—ç¬¦ï¼Œä¾‹å¦‚ `drop|if()|union` ç­‰ç­‰ï¼Œå› è€Œå¯ä»¥é¿å… `order by` æ³¨å…¥é—®é¢˜ã€‚

> SQL æ³¨å…¥æ˜¯ Web åº”ç”¨ä¸­æœ€å¸¸è§ä¹Ÿæ˜¯æœ€ä¸¥é‡çš„æ¼æ´ä¹‹ä¸€ã€‚å®ƒå…è®¸æ”»å‡»è€…é€šè¿‡å°†SQLå‘½ä»¤æ’å…¥åˆ° Web è¡¨å•æäº¤ä¸­å®ç°ï¼Œæ•°æ®åº“ä¸­æ‰§è¡Œéæ³• SQL å‘½ä»¤ã€‚  
> æ°¸è¿œä¸è¦ä¿¡ä»»ç”¨æˆ·çš„è¾“å…¥ï¼Œç‰¹åˆ«æ˜¯åœ¨æ‹¼æ¥SQLè¯­å¥æ—¶ã€‚æˆ‘ä»¬åº”è¯¥å¯¹ç”¨æˆ·ä¼ å…¥çš„ä¸å¯æ§å‚æ•°è¿›è¡Œè¿‡æ»¤ã€‚

å››ã€æ€»ç»“
====

é€šè¿‡è¿™ä¸‰ä¸ª RuoYi é¡¹ç›®ä¸­çš„ä»£ç æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºé¡¹ç›®å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„å‡ ç‚¹:

1.  ä¸è¦ç›²ç›®ç›¸ä¿¡ç”¨æˆ·ä¼ å…¥çš„å‚æ•°ã€‚æ— è®ºæ˜¯ä¿®æ”¹å¯†ç è¿˜æ˜¯æ–‡ä»¶ä¸‹è½½,éƒ½ä¸åº”è¯¥ç›´æ¥ä½¿ç”¨ç”¨æˆ·ä¼ å…¥çš„å‚æ•°æ„é€  SQL è¯­å¥æˆ–æ‹¼æ¥è·¯å¾„,è¿™ä¼šå¯¼è‡´ SQL æ³¨å…¥åŠè·¯å¾„éå†ç­‰å®‰å…¨æ¼æ´ã€‚æˆ‘ä»¬åº”è¯¥æ ¹æ®å®é™…ä¸šåŠ¡è·å–çœŸå®çš„ç”¨æˆ· ID æˆ–å…¶ä»–å‚æ•°,ç„¶åå†è¿›è¡Œæ“ä½œã€‚
2.  SQL å‚æ•°è¦è¿›è¡Œè½¬ä¹‰ã€‚åœ¨æ‹¼æ¥ SQL è¯­å¥æ—¶,å¯¹ç”¨æˆ·ä¼ å…¥çš„ä¸å¯æ§å‚æ•°ä¸€å®šè¦è¿›è¡Œè½¬ä¹‰ï¼Œé˜²æ­¢ SQL æ³¨å…¥ã€‚
3.  è·¯å¾„è¦è¿›è¡Œæ ¡éªŒã€‚åœ¨å¤„ç†æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ç­‰æ“ä½œæ—¶,å¯¹è·¯å¾„å‚æ•°è¦è¿›è¡Œæ ¡éªŒ,é˜²æ­¢ç›®å½•éå†æ¼æ´ã€‚ä¾‹å¦‚åˆ¤æ–­è·¯å¾„ä¸­æ˜¯å¦åŒ…å« **..** å­—ç¬¦ã€‚
4.  æ¥å£è¦è®¾ç½®æƒé™ã€‚å¯¹ä¸€äº›æ•æ„Ÿæ¥å£ï¼Œä¾‹å¦‚é‡ç½®å¯†ç ,æˆ‘ä»¬éœ€è¦è®¾ç½®å¯¹åº”çš„æƒé™ï¼Œé¿å…ç”¨æˆ·è¶Šæƒè®¿é—®ã€‚
5.  è®°å½•æäº¤ä¿¡æ¯ã€‚åœ¨è®°å½•æäº¤ä¿¡æ¯æ—¶ï¼Œæœ€å¥½è¯¦ç»†æè¿°æœ¬æ¬¡æäº¤çš„å†…å®¹ï¼Œä¾‹å¦‚ä¿®å¤çš„æ¼æ´æˆ–æ–°å¢çš„åŠŸèƒ½ã€‚è¿™åœ¨åç»­ä»£ç å®¡è®¡æˆ–å›é¡¾é¡¹ç›®æäº¤å†å²æ—¶ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚
6.  å®šæœŸä»£ç å®¡è®¡ã€‚ä½œä¸ºé¡¹ç›®ç»´æŠ¤äººå‘˜ï¼Œæˆ‘ä»¬éœ€è¦å®šæœŸè¿›è¡Œä»£ç å®¡è®¡ï¼Œæ‰¾å‡ºé¡¹ç›®ä¸­å¯èƒ½å­˜åœ¨çš„æ¼æ´ï¼Œå¹¶åŠæ—¶ä¿®å¤ã€‚è¿™å¯ä»¥æœ€å¤§é™åº¦åœ°ä¿è¯é¡¹ç›®ä»£ç çš„å®‰å…¨æ€§ä¸å¥å£®æ€§ã€‚

ç»¼ä¸Šï¼Œå†™ä»£ç ä¸ä»…ä»…æ˜¯å®Œæˆéœ€æ±‚è¿™ä¹ˆç®€å•ã€‚æˆ‘ä»¬è¿˜éœ€è¦åœ¨å„ä¸ªç»†èŠ‚ä¸Šå¤šåŠ æ³¨æ„ï¼Œå¯¹ç”¨æˆ·ä¼ å…¥çš„å‚æ•°è¦ä¿æŒè­¦æƒ•ï¼Œå¯¹ SQL è¯­å¥è¦è°¨æ…æ‹¼æ¥,å¯¹è·¯å¾„è¦ä¸¥è°¨æ ¡éªŒã€‚å®šæœŸä»£ç å®¡è®¡å¯ä»¥å°½æ—©å‘ç°å¹¶ä¿®å¤é¡¹ç›®æ¼æ´ï¼Œç»™ç”¨æˆ·æ›´å®‰å…¨å¯é çš„äº§å“ã€‚å¸Œæœ›é€šè¿‡è¿™å‡ ä¸ªæ¡ˆä¾‹ï¼Œå¯ä»¥æé†’å¤§å®¶åœ¨ä»£ç ç¼–å†™è¿‡ç¨‹ä¸­è¿›ä¸€æ­¥åŠ å¼ºå®‰å…¨æ„è¯†ã€‚

åˆ°æ­¤æœ¬æ–‡è®²è§£å®Œæ¯•ï¼Œæ„Ÿè°¢å¤§å®¶é˜…è¯»ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥ç‚¹èµåŠ å…³æ³¨ï¼Œä½ çš„æ”¯æŒå°†æ˜¯æˆ‘çš„æ›´æ–°åŠ¨åŠ›ğŸ˜˜ã€‚

> å…¬ä¼—å·ã€waynblogã€‘æ¯å‘¨æ›´æ–°åšä¸»æœ€æ–°æŠ€æœ¯æ–‡ç« ï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨