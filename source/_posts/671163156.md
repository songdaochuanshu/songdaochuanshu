---
layout: post
title: "Vue3.x+element-plus+tsè¸©å‘ç¬”è®°"
date: "2022-10-20T16:36:48.154Z"
---
Vue3.x+element-plus+tsè¸©å‘ç¬”è®°
==========================

é—²èŠ
==

å‰æ®µæ—¶é—´å°é¢–åœ¨Bç«™æ‰¾äº†ä¸ªå­¦ä¹ vue3+TSçš„è§†é¢‘ï¼Œè‡ªå·±å°è¯•ç€æ­å»ºäº†ä¸€äº›åŸºç¡€ä»£ç ï¼Œåœ¨å®ç°åŠŸèƒ½çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œä¸ºäº†é˜²æ­¢è‡ªå·±é—å¿˜ï¼Œå†™ä¸ªéšç¬”è®°å½•ä¸€ä¸‹å˜»å˜»

é¡¹ç›®ä»£ç 
====

gitåœ°å€:[vue3.x-ts-element-plus--demo](https://gitee.com/lucy1028/vue3.0-ts-element-plus--demo "vue3.x-ts-element-plus--demo")

è¸©å‘é›†åˆï¼š
=====

1.æ ¹æ®Â element-plus å®˜ç½‘æç¤º [æŒ‰éœ€å¼•å…¥](https://element-plus.gitee.io/zh-CN/guide/quickstart.html#%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5) ç»„ä»¶åï¼Œé‡åˆ°ï¼šElLoadingã€ElMessageã€ElNotificationã€ElMessageBoxÂ Â æ ·å¼ä¸¢å¤±
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

èµ·å› æ˜¯å°é¢–åœ¨å°è£…Â Â axios æ—¶ï¼Œå‘ç°å¼•å…¥çš„Â  ElNotification ç»„ä»¶æ²¡æœ‰æ ·å¼ï¼Œè¡¨å•æäº¤æ—¶åŠ è½½Â  ElLoading ç»„ä»¶æœ‰æ²¡æœ‰æ ·å¼ï¼Œåæ¥é€šè¿‡é¢å‘ç™¾åº¦è§£å†³äº†è¯¥é—®é¢˜ï¼Œå˜»å˜»

### è§£å†³æ–¹æ¡ˆä¸€ï¼š

ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œä¸‹é¢ä»£ç 

npm i unplugin-element-plus -D

ç¬¬äºŒæ­¥ï¼šåœ¨ vue.config.js æ”¹ä¸º

const { defineConfig } = require('@vue/cli-service')

const AutoImport = require('unplugin-auto-import/webpack')

const Components = require('unplugin-vue-components/webpack')

const { ElementPlusResolver } = require('unplugin-vue-components/resolvers')

module.exports = defineConfig({

Â  transpileDependencies: true,

Â  configureWebpack: {

Â  Â  plugins: \[

Â  Â  Â  AutoImport({

Â  Â  Â  Â  resolvers: \[ElementPlusResolver()\],

Â  Â  Â  }),

Â  Â  Â  Components({

Â  Â  Â  Â  resolvers: \[ElementPlusResolver()\],

Â  Â  Â  }),

Â  Â  Â  require('unplugin-element-plus/webpack')({

Â  Â  Â  Â  // options

Â  Â  Â  }),

Â  Â  \],

Â  },

})

### è§£å†³æ–¹æ¡ˆäºŒï¼š

ç›´æ¥å…¨å±€å¼•å…¥Â element-plus

ç¬¬ä¸€æ­¥ï¼šä¿®æ”¹Â main.ts

import { createApp } from 'vue'

import App from './App.vue'

import router from './router'

import store from './store'

import ElementPlus from 'element-plus'

import 'element-plus/es/components/button/style/css'

createApp(App).use(store).use(router).use(ElementPlus).mount('#app')

å‚è€ƒï¼š[è®°å½•-è§£å†³element-plusè‡ªåŠ¨å¼•å…¥åElLoadingã€ElMessageã€ElNotificationã€ElMessageBoxæ ·å¼ä¸¢å¤±çš„é—®é¢˜](https://blog.csdn.net/Delete_89x/article/details/126430049)

2.åŠ¨æ€ä½¿ç”¨å›¾æ ‡ç»„ä»¶æ—¶ï¼Œå›¾æ ‡ç»„ä»¶ä¸èƒ½æ­£ç¡®æ¸²æŸ“
----------------------

èµ·å› æ˜¯å°é¢–åœ¨å°è£…èœå•ç»„ä»¶æ—¶ï¼Œè¦åŠ¨æ€éå†èœå•æ•°æ®æ ¹æ®æ•°æ®ä¸­çš„Â Â icon å€¼ï¼Œé€šè¿‡ï¼š

<component :is="menuInfo.icon" class="menu-icon" />

åŠ¨æ€æ¸²æŸ“å„è‡ªçš„èœå•å›¾æ ‡ï¼Œä½†æ˜¯æ²¡æœ‰æ¸²æŸ“å‡ºæ¥ï¼Œé€šè¿‡F12å‘ç°æ¸²æŸ“å‡ºæ¥çš„domå°±ä¸æ˜¯å›¾æ ‡ç»„ä»¶çš„domï¼Œè€Œæ˜¯è¿™æ ·çš„ï¼š

å½“å‰Â menuInfo.icon å€¼ä¸ºï¼šsetting

![](https://img2022.cnblogs.com/blog/813088/202210/813088-20221020181213885-354684635.png)

### å·¦ä¾§èœå•ç»„ä»¶

å› è€ƒè™‘åˆ°èœå•å¯èƒ½ä¸æ­¢ä¸¤çº§å¯èƒ½ä¼šæ˜¯å¤šçº§çš„æ‰€ä»¥å°é¢–å°†å…¶å°è£…æˆä»¥ä¸‹ç»„ä»¶ï¼š

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

<template>
  <div class="logo-box">XXXXç®¡ç†ç³»ç»Ÿ</div>
  <div class="menu-box">
    <el-menu
      active\-text-color="#ffd04b"
      background\-color="#545c64"
      class\="el-menu-vertical"
      :default\-active="menuActive"
      :unique\-opened="true"
      text\-color="#fff"
      @open\="handleOpen"
      @close\="handleClose"
    >
      <template v-for\="menu in menuList" :key="menu.id">
        <subMenu :menuInfo="menu" />
      </template>
    </el-menu>
  </div>
</template>

<script lang="ts" setup>
import { defineProps, computed } from "vue";
import { useStore } from "vuex";
import SubMenu from "./subMenu.vue";

const store \= useStore();
const props \= defineProps({
  menuList: {
    type: Array,
    default: () => \[\],
  },
});
const menuActive \= computed(() => {
  return store.state.setting.menuActive;
});
const handleOpen \= (key: string, keyPath: string\[\]) => {
  console.log(key, keyPath);
};
const handleClose \= (key: string, keyPath: string\[\]) => {
  console.log(key, keyPath);
};
</script>

<style lang="scss" scoped>
.logo\-box {
  height: 80px;
  display: flex;
  justify\-content: center;
  align\-items: center;
  font\-size: 20px;
  cursor: pointer;
  background\-color: #545c64;
  color: #fff;
  // background: v-bind(themeBackground);
}
.menu\-box {
  height: calc(100vh \- 80px);
  background\-color: #545c64;
}
.el\-menu-vertical {
  border\-right: none;
}
.el\-menu-vertical:not(.menu--collapse) {
  min\-height: 400px;
}
</style>

leftMenu.vue

![](https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif)![](https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif)

<template>
  <el-sub-menu v-if\="menuInfo.childs.length > 0" :index="menuInfo.id">
    <template #title>
      <el-icon :size="18">
          <component :is="menuInfo.icon" />
      </el-icon>
      <span>{{ menuInfo.m\_name }}</span>
    </template>
    <template v-for\="item in menuInfo.childs" :key="item.id">
      <sub-menu :menu-info="item" />
    </template>
  </el-sub-menu>
  <el-menu-item v-else :index="menuInfo.id"  @click="menuFun(menuInfo, menuInfo.id)" >
    <el-icon :size="18">
      <component :is="menuInfo.icon" class="menu-icon" />
    </el-icon>
    <span>{{ menuInfo.m\_name }}</span>
  </el-menu-item>
</template>
<script lang="ts" name="SubMenu" setup>
import {
  Document,
  Menu as IconMenu,
  Location,
  Setting,
  Menu,
  Grid,
} from "@element-plus/icons-vue";
import { defineProps } from "vue";
import { useRouter } from "vue-router";
import { useStore } from "vuex";

//è·¯ç”±
const router = useRouter();
//vuex
const store = useStore();
const props \= defineProps({
  menuInfo: {
    type: Object,
    default: () => {
      return {
        id: "",
        parent\_id: "",
        m\_name: "",
        icon: "",
        childs: \[\],
      };
    },
  },
});

const menuFun \= (event: any, index: string) => {
  setNav(event);
  store.dispatch("setMenuActive", { menuActive: index });
  if (event.url && event.url.length > 0) {
    router.push({
      path: event.url,
      query: {},
    });
  }
};
const setNav \= (item: any) => {
  store.dispatch("setNav", { nav: item });
};
</script>

subMenu.vue

### Â è§£å†³æ–¹æ¡ˆä¸€ï¼š

ä¿®æ”¹Â main.tsÂ 

import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'
import ElementPlus from 'element-plus'
import 'element-plus/es/components/button/style/css'
import \* as Icons from '@element-plus/icons-vue'
const app \= createApp(App)

Object.keys(Icons).forEach(key \=> {
    app.component(key, Icons\[key as keyof typeof Icons\])
})
app.use(store)
app.use(router)
app.use(ElementPlus)
app.mount('#app')

### è§£å†³æ–¹æ¡ˆäºŒï¼š

å°†Â main.ts æ”¹å›åŸæ¥çš„

import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'
createApp(App).use(store).use(router).mount('#app')
//å…¬å…±css
import './assets/css/index.scss'

å°†subMenu.vueç»„ä»¶çš„ js ä»£ç æ”¹ä¸º

import { defineComponent } from "vue";
  import {
    Document,
    Menu as IconMenu,
    Location,
    Setting,
    Menu,
    Grid,
  } from "@element-plus/icons-vue";
  import { useRouter } from "vue-router";
  import { useStore } from "vuex";
  export default defineComponent({
    components: {
      Document,
      Menu,
      Location,
      Setting,
      Grid,
    },
    props: {
      menuInfo: {
        type: Object,
        default: () => {
          return {
            id: "",
            parent\_id: "",
            m\_name: "",
            icon: "",
            childs: \[\],
          };
        },
      },
    },
    setup() {
      //è·¯ç”±
      const router = useRouter();
      //vuex
      const store = useStore();
      const menuFun \= (event: any, index: string) => {
        setNav(event);
        store.dispatch("setMenuActive", { menuActive: index });
        if (event.url && event.url.length > 0) {
          router.push({
            path: event.url,
            query: {},
          });
        }
      };
      const setNav \= (item: any) => {
        store.dispatch("setNav", { nav: item });
      };
      return {
        menuFun,
      };
    },
  });
</script>

å‚è€ƒå“ªé‡Œå¿˜è®°äº†ï¼Œç¬¬ä¸€ç§æ˜¯é¢å‘ç™¾åº¦çš„ï¼Œç¬¬äºŒç§æ˜¯å°é¢–è‡ªå·±è¯•å‡ºæ¥çš„

æ¥æ¥æ¥æ‰¾åˆ°äº†ï¼Œå‚è€ƒè¿™é‡Œï¼›[vue3 åŠ¨æ€åŠ è½½el-iconå›¾æ ‡](https://blog.csdn.net/qq_40190624/article/details/125019530)

3.vuexé¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±é—®é¢˜çš„å››ç§è§£å†³æ–¹å¼
-----------------------

### è§£å†³æ–¹æ¡ˆï¼š

ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œä»¥ä¸‹ä»£ç 

npm install --save vuex-persist

ç¬¬äºŒæ­¥ï¼šåœ¨ store ä¸‹çš„Â index.ts ä¸­å¼•å…¥å¹¶ä½¿ç”¨

import VuexPersistence from "vuex-persist";//è§£å†³é¡µé¢åˆ·æ–°vuexæ•°æ®ä¸¢å¤±
const vuexLocal \= new VuexPersistence({
  storage: window.localStorage
})
export default createStore({
  state: {
  },
  getters: {
  },
  mutations: {
  },
  actions: {
  },
  modules: modules,
  plugins: \[vuexLocal.plugin\]
})

æ›´å¤šæ–¹æ³•å‚è€ƒï¼š[vuexé¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±é—®é¢˜çš„å››ç§è§£å†³æ–¹å¼](https://blog.csdn.net/bidepanm/article/details/124686409)

4.å¦‚ä½•è‡ªåŠ¨å¼•å…¥Â Â storeÂ  ä¸‹æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œæ­¤æ–¹æ³•ä¹Ÿé€‚ç”¨äºå¼•å…¥ç»„ä»¶
----------------------------------------

æ¯”å¦‚å°é¢–è¦å®ç°åœ¨Â storeÂ ä¸‹çš„Â index.ts ä¸­è‡ªåŠ¨å¼•å…¥Â storeÂ  ä¸‹çš„Â modules ä¸­çš„æ‰€æœ‰ tsÂ 

![](https://img2022.cnblogs.com/blog/813088/202210/813088-20221020192044575-1846385406.png)

### è§£å†³æ–¹æ¡ˆï¼šÂ 

å°†Â index.ts æ”¹ä¸ºï¼š

import { createStore } from 'vuex'
import VuexPersistence from "vuex-persist";//è§£å†³é¡µé¢åˆ·æ–°vuexæ•°æ®ä¸¢å¤±
const modulesFiles = require.context('./modules', false, /\\.ts$/)

// you do not need \`import app from './modules/app'\`
// it will auto require all vuex module from modules file
const modules = modulesFiles.keys().reduce((modules: any, modulePath) => {
  // set './app.js' => 'app'
  const moduleName = modulePath.replace(/^\\.\\/(.\*)\\.\\w+$/, '$1')
  const value \= modulesFiles(modulePath)
  modules\[moduleName\] \= value.default
  return modules
}, {})
const vuexLocal \= new VuexPersistence({
  storage: window.localStorage
})
export default createStore({
  state: {
  },
  getters: {
  },
  mutations: {
  },
  actions: {
  },
  modules: modules,
  plugins: \[vuexLocal.plugin\]
})

åé¢çš„å‘ç­‰åé¢å†™äº†å†ç»§ç»­è¡¥å……ï¼Œæœ€è¿‘å°é¢–åœ¨å¿™ç€å¼„æ¥çš„ç§æ´»æ‰€ä»¥ä¹Ÿæ²¡ç»§ç»­çœ‹vue3äº†ï¼Œç­‰è¿™æ®µæ—¶é—´å¿™å®Œç»§ç»­æï¼ŒğŸ’ªæ‰“å·¥äººÂ·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·

Â æœ‰å¤§ä½¬æ‰“èµäº†å˜»å˜»ï¼Œé‚£å°±ä¸å®¢æ°”äº†å†è´´ä¸ªå›¾

![](https://img2022.cnblogs.com/blog/813088/202210/813088-20221020202158955-1465405532.jpg)

ä½œè€…ï¼š[çˆ±å–é…¸å¥¶çš„åƒè´§](http://www.cnblogs.com/yingzi1028/)

å‡ºå¤„ï¼š[http://www.cnblogs.com/yingzi1028/](http://www.cnblogs.com/yingzi1028/)

æœ¬åšå®¢æ–‡ç« å¤§å¤šä¸ºåŸåˆ›ï¼Œè½¬è½½è¯·è¯·åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚