---
layout: post
title: "【故障公告】Kubernetes 集群节点宕机造成博客站点故障（被3.5万QPS压垮）"
date: "2023-03-04T01:12:30.173Z"
---
【故障公告】Kubernetes 集群节点宕机造成博客站点故障（被3.5万QPS压垮）
===========================================

![](https://img2023.cnblogs.com/blog/35695/202303/35695-20230303190851904-384418611.png)

非常抱歉！今天 18:40-18:55 左右 Kubernetes 集群一台高配节点突然宕机，造成博客站点故障，访问时出现 `502 Bad Gateway`，由此给您带来麻烦，请您谅解。

发现故障并定位问题后，我们增加了新节点服务器并重启宕机节点服务器，之后恢复正常。

19:17 左右又出现故障，疑似有异常请求会压垮博客站点的 pod，让博客站点的所有 pod 立马全部宕机。

19:35 左右再次恢复正常。

19:45 又出现所有 pod 同时宕机的情况。

![](https://img2023.cnblogs.com/blog/35695/202303/35695-20230303195300675-1995478235.png)

的确有异常请求

> 【阿里云】【异常发生】于19:57分，您的负载均衡slb的QPS使用率指标达到312.03%(InstanceQpsUtilization)。智能监控服务提醒您：请及时关注您的相关资源是否有容量风险。请登陆阿里云控制台通过站内信查看详情

原来是有疯狂请求来袭，其中一台负载均衡的最高 QPS 超过 `3.5万`。

![](https://img2023.cnblogs.com/blog/35695/202303/35695-20230303201647046-293296396.png)