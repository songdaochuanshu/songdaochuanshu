---
layout: post
title: "åŠ¨æ€è§„åˆ’ï¼ˆäºŒï¼‰æœ€é•¿é€’å¢žå­åºåˆ—"
date: "2022-10-19T14:38:56.200Z"
---
åŠ¨æ€è§„åˆ’ï¼ˆäºŒï¼‰æœ€é•¿é€’å¢žå­åºåˆ—
==============

æœ€é•¿é€’å¢žå­åºåˆ—
=======

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢žå­åºåˆ—çš„é•¿åº¦ã€‚

å­åºåˆ— æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ`[3, 6, 2, 7]` æ˜¯æ•°ç»„ `[0, 3, 1, 6, 2, 2, 7]` çš„å­åºåˆ—ã€‚æ³¨æ„ `å­åºåˆ—` å’Œ `å­ä¸²` çš„åŒºåˆ«ï¼Œå­ä¸²ä¸€å®šæ˜¯è¿žç»­çš„ï¼Œè€Œå­åºåˆ—ä¸ä¸€å®šæ˜¯è¿žç»­çš„ã€‚

**ç¤ºä¾‹ 1ï¼š**

> è¾“å…¥ï¼šnums = \[10, 9, 2, 5, 3, 7, 101, 18\]  
> è¾“å‡ºï¼š4  
> è§£é‡Šï¼šæœ€é•¿é€’å¢žå­åºåˆ—æ˜¯ \[2, 3, 7, 101\]ï¼Œå› æ­¤é•¿åº¦ä¸º 4 ã€‚

**ç¤ºä¾‹ 2ï¼š**

> è¾“å…¥ï¼šnums = \[0, 1, 0, 3, 2, 3\]  
> è¾“å‡ºï¼š4

**ç¤ºä¾‹ 3ï¼š**

> è¾“å…¥ï¼šnums = \[7, 7, 7, 7, 7, 7, 7\]  
> è¾“å‡ºï¼š1

**æç¤ºï¼š**

> 1 <= nums.length <= 2500  
> \-104 <= nums\[i\] <= 104

**è¿›é˜¶ï¼š**

> ä½ èƒ½å°†ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é™ä½Žåˆ° O(n log(n)) å—?

æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰  
é“¾æŽ¥ï¼š[https://leetcode.cn/problems/longest-increasing-subsequence](https://leetcode.cn/problems/longest-increasing-subsequence)

tips:
-----

åŠ¨æ€è§„åˆ’é¢˜ç›®çš„æ ¸å¿ƒå°±æ˜¯æ‰¾å‡ºå¤§è§„æ¨¡ä¸Žå°è§„æ¨¡ä¹‹é—´çš„å…³ç³»ã€‚

æ‹¿`ç¤ºä¾‹1`æ¥è¯´ï¼Œ`A = [10, 9, 2, 5, 3, 7, 101, 18]`

æ¯” `A` è§„æ¨¡æ›´å°çš„æ˜¯`B = [10, 9, 2, 5, 3, 7, 101]` ï¼Œè‹¥çŸ¥é“ `B` ä¸­çš„æœ€é•¿é€’å¢žå­åºåˆ—çš„é•¿åº¦ `4` åŽèƒ½å¦**åœ¨æ­¤åŸºç¡€ä¸Š**å¿«é€ŸæŽ¨æ–­å‡º`A`çš„æœ€é•¿å­åºåˆ—ï¼Ÿæ˜¾ç„¶ä¸èƒ½ã€‚å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“ `A`æ¯” `B` å¤šå‡ºçš„å°¾éƒ¨å…ƒç´  `18`æ˜¯å¦å¯ä»¥åŠ åˆ°æŸä¸ªçŽ°æœ‰æœ€é•¿å­åºåˆ—çš„å°¾éƒ¨ï¼Œå½¢æˆæ›´é•¿çš„å­åºåˆ—ã€‚

ä¸ç®¡æ˜¯è‡ªé¡¶å‘ä¸‹çš„å‡½æ•°é€’å½’æ³•ï¼Œè¿˜æ˜¯è‡ªåº•å‘ä¸Šçš„æ•°ç»„æ³•ï¼ˆä¹Ÿå«dpæ•°ç»„æ³•ï¼ŒåŠ¨æ€è§„åˆ’ dynamic programmingï¼Œç®€ç§°dpï¼‰ï¼Œæˆ‘ä»¬æœ€æœ€å¼€å§‹åº”è¯¥åšçš„å°±æ˜¯æ˜Žç¡® `å‡½æ•°ï¼ˆè¿”å›žå€¼ï¼‰å«ä¹‰` æˆ– dpæ•°ç»„ä¸­ä¸‹æ ‡`i`ä¸Žå€¼`dp[i]`çš„å«ä¹‰ã€‚

æˆ‘ä»¬é€šå¸¸å¯ä»¥åœ¨å®šä¹‰ä¸­æ·»åŠ ä¸€äº›é™åˆ¶æ¡ä»¶ï¼Œä¾¿äºŽæˆ‘ä»¬æ‰¾å‡ºä¸åŒè§„æ¨¡ä¹‹é—´çš„é€’æŽ¨å…³ç³»ï¼ˆåŠ¨æ€è½¬ç§»æ–¹ç¨‹ï¼‰ã€‚

**å¯¹æ¯”è¿™ä¸¤ç§å®šä¹‰ï¼š**

æ˜¯å¦æ·»åŠ é™åˆ¶

å®šä¹‰

å¦

`dp[i]`ï¼šæ•°ç»„`nums[0:i+1]` ï¼ˆpythonåˆ‡ç‰‡å‰é—­åŽå¼€ï¼‰ä¸­æœ€é•¿é€’å¢žå­åºåˆ—çš„é•¿åº¦

æ˜¯

`dp[i]`ï¼šæ•°ç»„`nums[0:i+1]` ä¸­ä»¥`nums[i]` è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢žå­åºåˆ—çš„é•¿åº¦

**å°è¯•å¯»æ‰¾é€’æŽ¨å…³ç³»**

`nums = [10, 9, 2, 5, 3, 7, 101, 18]`

**ä¸åŠ é™åˆ¶ï¼š**

dp\[0\]

dp\[1\]

dp\[2\]

dp\[3\]

dp\[4\]

dp\[5\]

dp\[6\]

dp\[7\]

1

1

1

2

2

3

4

4

è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ`dp[å¤§]` çš„è®¡ç®—ä¸èƒ½ä¾èµ–å·²çŸ¥çš„`dp[å°]`ã€‚ä¸èƒ½ä¾èµ–å³ä¸èƒ½é€’æŽ¨ï¼Œæ‰€ä»¥è¿™æ˜¯ç³Ÿç³•çš„å®šä¹‰ðŸ¥´

**æ·»åŠ é™åˆ¶ï¼š**

dp\[i\]

nums\[i\]

nums\[0:i+1\]

ä»¥nums\[i\]ç»“å°¾æœ€é•¿é€’å¢žå­åºåˆ—

é•¿åº¦

dp\[0\]

10

\[10\]

\[10\]

1

dp\[1\]

9

\[10, 9\]

\[9\]

1

dp\[2\]

2

\[10, 9, 2\]

\[2\]

1

dp\[3\]

5

\[10, 9, 2, 5\]

\[2, 5\]

2

èƒ½å¦åˆ©ç”¨`dp[å°]` æŽ¨æ–­ `dp[å¤§]` â“

è‹¥`nums[i]` æ¯” `nums[x]` å¤§ï¼Œ`nums[i]` å°±å¯ä»¥åŠ åˆ°ä»¥`nums[x]`ä¸ºç»“å°¾çš„æœ€é•¿é€’å¢žåºåˆ—åŽé¢ã€‚`ä»¥nums[i]`ç»“å°¾çš„é€’å¢žå­åºåˆ—é•¿åº¦æ¯”ä»¥`nums[x]`ç»“å°¾çš„é€’å¢žå­åºåˆ—é•¿`1`

    if nums[i] > nums[æ¯”iå°]ï¼š
    	dp[i] = dp[æ¯”iå°] + 1
    

dp\[i\]

nums\[i\]

nums\[0:i+1\]

ä»¥nums\[i\]ç»“å°¾æœ€é•¿é€’å¢žå­åºåˆ—

é•¿åº¦

dp\[4\]

3 > nums\[2\]

\[10, 9, 2, 5, 3 \]

\[2\] + \[3\] = \[2, 3\]

dp\[2\]+1=2

`nums[4] = 3` ï¼Œæ¯” `nums[2] = 2` å¤§ã€‚æ‰€ä»¥`3`å¯ä»¥åŠ åˆ°ä»¥`2`ä¸ºç»“å°¾çš„é€’å¢žåºåˆ— `[2]` ä¸­ï¼Œå½¢æˆæ–°çš„é€’å¢žå­åºåˆ— `[2, 3]`ã€‚ `dp[4] = dp[2] + 1 = 2`

dp\[i\]

nums\[i\]

nums\[0:i+1\]

ä»¥nums\[i\]ç»“å°¾æœ€é•¿é€’å¢žå­åºåˆ—

é•¿åº¦

dp\[5\]

7 > nums\[4\]

\[10, 9, 2, 5, 3, 7\]

\[2, 3\] + \[7\] = \[2, 3, 7\]

dp\[4\] + 1= 3

7 > nums\[3\]

\[2, 5\] +\[7\] = \[2, 5, 7\]

dp\[3\] + 1= 3

7 > num\[2\]

\[2\] + \[7\] = \[2, 7\]

dp\[2\] + 1 = 2

max(3, 3, 2) = 3

è‹¥`nums[i]` å¤§äºŽå¤šä¸ª`nums[æ¯”iå°]`ï¼Œ`dp[i]` = max(`dp[æ¯”iå°]+1`ï¼Œ`dp[æ¯”iå°]+1`)

å·®ä¸å¤šå¯ä»¥å¯ä»£ç äº†ã€‚

ä»£ç 
--

### è‡ªåº•å‘ä¸Š dpæ•°ç»„æ³•

    nums = [10, 9, 2, 5, 3, 7, 101, 18]
    # dpæ•°ç»„
    # å®šä¹‰dpæ•°ç»„ä¸‹æ ‡å«ä¹‰
    # dp[i], ä»¥nums[i]è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢žå­åºåˆ—çš„é•¿åº¦
    # å®šä¹‰å†³å®šäº†æ•°ç»„å¤§å°
    # base case
    dp = [1] * (len(nums))
    
    # dp[å¤§] ä¾èµ–dp[å°] å…ˆè®¡ç®—di[å°]
    for i in range(1, len(nums)):
        for j in range(0, i):
            if nums[i] > nums[j]:
                dp[i] = max(dp[i], dp[j] + 1)
    

### è‡ªé¡¶å‘ä¸‹ å‡½æ•°é€’å½’æ³•

    # æœ€é•¿é€’å¢žå­åºåˆ—
    nums = [10, 9, 2, 5, 3, 7, 101, 18]
    
    # è‡ªé¡¶å‘ä¸‹æ·»åŠ å¤‡å¿˜å½•
    # base case å·²åœ¨å¤‡å¿˜å½•ä¸­
    memo = {0: 1}
    def func(n):
        # func(i) ä»£è¡¨ä»¥nums[i]è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢žå­åºåˆ—çš„é•¿åº¦
        # func(2) ä»£è¡¨ä»¥nums[2]è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢žå­åºåˆ—(2)çš„é•¿åº¦
        # func(4) ä»£è¡¨ä»¥nums[4]è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢žå­åºåˆ—(2,3)çš„é•¿åº¦
        if n in memo.keys():
            return memo[n]
        # æŸ¥çœ‹è°ƒç”¨æ¬¡æ•°,éªŒè¯å¤‡å¿˜å½•åŠŸæ•ˆ
        print("å‡½æ•°è°ƒç”¨func(", n, ")")
        max_length = 1
        for i in range(n - 1, -1, -1):
            val = func(i)
            if nums[n] > nums[i]:
                max_length = max(max_length, val + 1)
        memo[n] = max_length
        return max_length
    

### æ— å¤‡å¿˜å½•ï¼Œç”¨äºŽå¯¹æ¯”çš„ç»¿å¶

    # æœ€é•¿é€’å¢žå­åºåˆ—
    nums = [10, 9, 2, 5, 3, 7, 101, 18]
    # è‡ªå®šå‘ä¸‹è§£æ³•
    def func(n):
        # func(i) ä»£è¡¨ä»¥nums[i]è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢žå­åºåˆ—çš„é•¿åº¦
        # func(2) ä»£è¡¨ä»¥nums[2]è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢žå­åºåˆ—(2)çš„é•¿åº¦
        # func(4) ä»£è¡¨ä»¥nums[4]è¿™ä¸ªæ•°ç»“å°¾çš„æœ€é•¿é€’å¢žå­åºåˆ—(2,3)çš„é•¿åº¦
        # æŸ¥çœ‹è°ƒç”¨æ¬¡æ•°
        print("å‡½æ•°è°ƒç”¨func(", n, ")")
        if n == 0:
            return 1
        max_length = 1
        for i in range(n - 1, -1, -1):
            val = func(i)
            if nums[n] > nums[i]:
                max_length = max(max_length, val + 1)
        return max_length