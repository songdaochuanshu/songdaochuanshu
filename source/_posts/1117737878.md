---
layout: post
title: "RedisåŸºç¡€"
date: "2022-05-02T05:31:00.400Z"
---
RedisåŸºç¡€
=======

![RedisåŸºç¡€](https://img2022.cnblogs.com/blog/2608072/202205/2608072-20220502011217259-887487314.png) Pythonä¸­å¦‚ä½•æ“ä½œRedis&RedisåŸç”Ÿå‘½ä»¤ï¼Œä¸€ç¯‡å°±å¤Ÿäº†ï¼

Redis
=====

![image-20220430222551442](https://s2.loli.net/2022/04/30/CTOhvr6NiGbEl2P.png)

Redisä»‹ç»å’Œå®‰è£…
----------

redis æ˜¯ä¸€ä¸ªéå…³ç³»å‹æ•°æ®åº“(åŒºåˆ«äºmysqlå…³ç³»å‹æ•°æ®åº“ï¼Œå…³è”å…³ç³»ï¼Œå¤–é”®ï¼Œè¡¨)ï¼Œnosqlæ•°æ®åº“(not only sql:ä¸ä»…ä»…æ˜¯SQL)ï¼Œæ•°æ®å®Œå…¨å†…å­˜å­˜å‚¨(é€Ÿåº¦éå¸¸å¿«)ï¼Œå­˜æ•°æ®çš„å½¢å¼æ˜¯`key value`çš„å½¢å¼ï¼Œ

**`value`æœ‰äº”å¤§æ•°æ®ç±»å‹ï¼šå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ï¼Œhash(pythonä¸­çš„å­—å…¸)ï¼Œé›†åˆï¼Œæœ‰åºé›†åˆ**

**ä½¿ç”¨redisçš„ä¼˜åŠ¿**ï¼š

    """
    (1) é€Ÿåº¦å¿«ï¼Œå› ä¸ºæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œç±»ä¼¼äºå­—å…¸ï¼Œå­—å…¸çš„ä¼˜åŠ¿å°±æ˜¯æŸ¥æ‰¾å’Œæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)
    (2) æ”¯æŒä¸°å¯Œæ•°æ®ç±»å‹ï¼Œæ”¯æŒstringï¼Œlistï¼Œsetï¼Œsorted setï¼Œhash
    (3) æ”¯æŒäº‹åŠ¡ï¼Œæ“ä½œéƒ½æ˜¯åŸå­æ€§ï¼Œæ‰€è°“çš„åŸå­æ€§å°±æ˜¯å¯¹æ•°æ®çš„æ›´æ”¹è¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ
    (4) ä¸°å¯Œçš„ç‰¹æ€§ï¼šå¯ç”¨äºç¼“å­˜ï¼Œæ¶ˆæ¯ï¼ŒæŒ‰keyè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸåå°†ä¼šè‡ªåŠ¨åˆ é™¤
    """
    

**redis æœ€é€‚åˆçš„åœºæ™¯(ä¸»è¦åšç¼“å­˜ï¼Œæ‰€ä»¥åˆå«ç¼“å­˜æ•°æ®åº“)**

    """
    ï¼ˆ1ï¼‰ä¼šè¯ç¼“å­˜ï¼ˆSession Cacheï¼‰---ã€‹å­˜session---ã€‹é€Ÿåº¦å¿«
    ï¼ˆ2ï¼‰æ¥å£ï¼Œé¡µé¢ç¼“å­˜---ã€‹æŠŠæ¥å£æ•°æ®ï¼Œå­˜åœ¨redisä¸­
    ï¼ˆ3ï¼‰é˜Ÿåˆ—--->celeryä½¿ç”¨
    ï¼ˆ4ï¼‰æ’è¡Œæ¦œ/è®¡æ•°å™¨--->ä¸ªäººé¡µé¢è®¿é—®é‡
    ï¼ˆ5ï¼‰å‘å¸ƒ/è®¢é˜…
    """
    

### å®‰è£…

ğŸ‘‰å®˜ç½‘ï¼š[Redis](https://redis.io/)

ğŸ‘‰å®˜ç½‘ä¸‹è½½ï¼š[Download | Redis](https://redis.io/download/)

    windowsï¼šä½œè€…ä¸æ”¯æŒwindwos
    æœ¬è´¨åŸå› ï¼šrediså¾ˆå¿«ï¼Œä½¿ç”¨äº†ioå¤šè·¯å¤ç”¨ä¸­çš„epollçš„ç½‘ç»œæ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹ä¸æ”¯æŒwinï¼Œæ‰€ä»¥ä¸æ”¯æŒï¼ˆçœ‹åˆ°é«˜æ€§èƒ½çš„æœåŠ¡å™¨åŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäºioå¤šè·¯å¤ç”¨ä¸­çš„epollçš„ç½‘ç»œæ¨¡å‹ï¼Œnginxï¼‰ï¼Œå¾®è½¯åŸºäºredisæºç ï¼Œè‡ªå·±åšäº†ä¸ªrediså®‰è£…åŒ…ï¼Œä½†æ˜¯è¿™ä¸ªå®‰è£…åŒ…æœ€æ–°åªåˆ°3.xï¼Œåˆæœ‰ç¬¬ä¸‰æ–¹ç»„ç»‡åšåˆ°æœ€æ–°5.xçš„å®‰è£…åŒ…
    

ğŸ‘‰winä¸‹è½½åœ°å€ï¼š

*   æœ€æ–°5.xç‰ˆæœ¬ï¼š [https://github.com/tporadowski/redis/releases/](https://github.com/tporadowski/redis/releases/)
*   æœ€æ–°3.xç‰ˆæœ¬ï¼š[https://github.com/microsoftarchive/redis/releases](https://github.com/microsoftarchive/redis/releases)

### å›¾å½¢åŒ–å·¥å…·å®‰è£…

RDBï¼š[https://github.com/uglide/RedisDesktopManager/releases](https://github.com/uglide/RedisDesktopManager/releases)

redisæœåŠ¡çš„å¯åŠ¨ä¸å…³é—­
-------------

**Windowså¯åŠ¨æœåŠ¡ç«¯ï¼š**

1.  æ‰¾åˆ°æœåŠ¡é¢æ¿ï¼Œç‚¹å‡»å¯åŠ¨
    
2.  å‘½ä»¤å¯åŠ¨ï¼š
    
        redis-server redis.windows-service.conf
        # redis-server é…ç½®æ–‡ä»¶
        
    

**Windowså¯åŠ¨å®¢æˆ·ç«¯ï¼š**

    å‘½ä»¤è¡Œï¼šredis-cli -p ç«¯å£ -h åœ°å€
    å®¢æˆ·ç«¯ï¼šrdbè¿æ¥
    

![image-20220430221924039](https://s2.loli.net/2022/05/01/t6zknAsjGIpPQ8c.png)

![image-20220430222220558](https://s2.loli.net/2022/05/01/xJz7cPw4rgtC9qn.png)

**æ³¨æ„ï¼š**ä¸€ä¸ªé”®æœ€å¤§èƒ½å­˜å‚¨ 512MB

* * *

Pythonè¿æ¥redis
=============

**Pythonè¿æ¥rediséœ€è¦ä¸‹è½½æ¨¡å—`redis`**

*   å®‰è£…æ¨¡å—ï¼š`pip install redis`

**è¿æ¥æœ¬åœ°ç¤ºä¾‹ï¼Œä¹Ÿå¯ä»¥è¿æ¥è¿œç«¯**

> **æ–¹å¼ä¸€ï¼šRediså®ä¾‹åŒ–**

    	from redis import Redis
    
    # æ™®é€šè¿æ¥
    conn = Redis(
        host="localhost", # è¿æ¥æœ¬åœ°/è¿œç«¯
        port=6379,  # ç«¯å£
        db=0,  # æ•°æ®åº“
        password=None, # å¯†ç 
    )
    conn.set('name','HammerZe')
    print(conn.get('name')) # b'HammerZe'
    

> **æ–¹å¼äºŒï¼šä½¿ç”¨è¿æ¥æ± **

    # è¿æ¥æ± è¿æ¥
    # ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ± 
    POOL = redis.ConnectionPool(max_connections=10,host="localhost",port=6379, db=0)
    # ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨æ± ï¼Œä»æ± ä¸­æ‹¿ä¸€ä¸ªè¿æ¥
    conn = redis.Redis(connection_pool=POOL)
    print(conn.get('name')) # b'HammerZe'
    """
    è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä½¿ç”¨POOLå¿…é¡»æ˜¯å•ä¾‹æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´POOLå¿…é¡»æ˜¯å•ä¾‹çš„ä¸”å…¨å±€åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œæ— è®ºç¨‹åºæ€ä¹ˆæ‰§è¡Œï¼ŒPOOLå§‹ç»ˆæ˜¯åŒä¸€ä¸ªå¯¹è±¡!æ‰€ä»¥å»ºè®®æŠŠæ„é€ è¿æ¥æ± çš„ä»£ç å•ç‹¬æ”¾å…¥ä¸€ä¸ªpyæ–‡ä»¶ä¸­ï¼Œå› ä¸ºå¯¼å…¥pyæ–‡ä»¶å°±æ˜¯å¤©ç„¶çš„å•ä¾‹æ¨¡å¼ï¼ŒåŒä¸€ä¸ªpyæ–‡ä»¶æ˜¯ä¸€ä¸ªå¯¹è±¡(åŸç†æ˜¯å¯¼å…¥çš„æ—¶å€™é€šè¿‡.pycç¼–è¯‘äº†)
    """
    
    # POOLå•ä¾‹æ¨¡å¼
    '''redis_pool.py'''
    import redis
    POOL = redis.ConnectionPool(max_connections=10,host="localhost",port=6379, db=0)
    '''å¯¼å…¥ä½¿ç”¨'''
    import redis
    from redis_pool import POOL
    # ç¬¬äºŒæ­¥ï¼Œä½¿ç”¨æ± ï¼Œä»æ± ä¸­æ‹¿ä¸€ä¸ªè¿æ¥
    conn = redis.Redis(connection_pool=POOL)
    print(conn.get('name')) # b'HammerZe'
    
    # å¤šçº¿ç¨‹
    from threading import Thread
    import redis
    import time
    from redis_pool import POOL  
    def get_name():
        conn=redis.Redis(connection_pool=POOL)
        print(conn.get('name'))
    for i in range(10):
        t=Thread(target=get_name)
        t.start()
    
    time.sleep(2)
    '''
    æ³¨æ„ï¼š
      pyæ–‡ä»¶ä½œä¸ºè„šæœ¬æ–‡ä»¶çš„æ—¶å€™ï¼Œä¸èƒ½ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼Œåªèƒ½ä½¿ç”¨ç»å¯¹å¯¼å…¥ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼Œè¦ä»ç¯å¢ƒå˜é‡ä¸­å¼€å§‹å¯¼èµ·
      åœ¨pycharmä¸­å³é”®è¿è¡Œçš„è„šæœ¬æ‰€åœ¨çš„ç›®å½•ï¼Œå°±ä¼šè¢«åŠ å…¥åˆ°ç¯å¢ƒå˜é‡
    '''
    

![image-20220501114619370](https://s2.loli.net/2022/05/01/yNuIShpzfZobeUV.png)

redisäº”å¤§æ•°æ®ç±»å‹ï¼šå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ï¼Œhashï¼Œé›†åˆï¼Œæœ‰åºé›†åˆï¼Œä¸‹é¢ä»‹ç»äº”å¤§æ•°æ®ç±»å‹çš„åŸºæœ¬æ“ä½œï¼š

Redis é”®(key)
============

Redis é”®å‘½ä»¤ç”¨äºç®¡ç† redis çš„é”®

è¯­æ³•ï¼š`å‘½ä»¤ é”®å`

> demoï¼š

    127.0.0.1:6379> SET mykey myvalue
    OK
    127.0.0.1:6379> DEL mykey
    (integer) 1
    # åœ¨ä»¥ä¸Šå®ä¾‹ä¸­ DEL æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œ mykey æ˜¯ä¸€ä¸ªé”®ã€‚ å¦‚æœé”®è¢«åˆ é™¤æˆåŠŸï¼Œå‘½ä»¤æ‰§è¡Œåè¾“å‡º (integer) 1ï¼Œå¦åˆ™å°†è¾“å‡º (integer) 0
    

Redis keys å¸¸è§å‘½ä»¤
---------------

åºå·

å‘½ä»¤åŠæè¿°

1

[DEL key](https://www.runoob.com/redis/keys-del.html) è¯¥å‘½ä»¤ç”¨äºåœ¨ key å­˜åœ¨æ—¶åˆ é™¤ keyã€‚

2

[DUMP key](https://www.runoob.com/redis/keys-dump.html) åºåˆ—åŒ–ç»™å®š key ï¼Œå¹¶è¿”å›è¢«åºåˆ—åŒ–çš„å€¼ã€‚

3

[EXISTS key](https://www.runoob.com/redis/keys-exists.html) æ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨ã€‚

4

[EXPIRE key](https://www.runoob.com/redis/keys-expire.html) seconds ä¸ºç»™å®š key è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä»¥ç§’è®¡ã€‚

5

[EXPIREAT key timestamp](https://www.runoob.com/redis/keys-expireat.html) EXPIREAT çš„ä½œç”¨å’Œ EXPIRE ç±»ä¼¼ï¼Œéƒ½ç”¨äºä¸º key è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ ä¸åŒåœ¨äº EXPIREAT å‘½ä»¤æ¥å—çš„æ—¶é—´å‚æ•°æ˜¯ UNIX æ—¶é—´æˆ³(unix timestamp)ã€‚

6

[PEXPIRE key milliseconds](https://www.runoob.com/redis/keys-pexpire.html) è®¾ç½® key çš„è¿‡æœŸæ—¶é—´ä»¥æ¯«ç§’è®¡ã€‚

7

[PEXPIREAT key milliseconds-timestamp](https://www.runoob.com/redis/keys-pexpireat.html) è®¾ç½® key è¿‡æœŸæ—¶é—´çš„æ—¶é—´æˆ³(unix timestamp) ä»¥æ¯«ç§’è®¡

8

[KEYS pattern](https://www.runoob.com/redis/keys-keys.html) æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼( pattern)çš„ key ã€‚

9

[MOVE key db](https://www.runoob.com/redis/keys-move.html) å°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“ db å½“ä¸­ã€‚

10

[PERSIST key](https://www.runoob.com/redis/keys-persist.html) ç§»é™¤ key çš„è¿‡æœŸæ—¶é—´ï¼Œkey å°†æŒä¹…ä¿æŒã€‚

11

[PTTL key](https://www.runoob.com/redis/keys-pttl.html) ä»¥æ¯«ç§’ä¸ºå•ä½è¿”å› key çš„å‰©ä½™çš„è¿‡æœŸæ—¶é—´ã€‚

12

[TTL key](https://www.runoob.com/redis/keys-ttl.html) ä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›ç»™å®š key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(TTL, time to live)ã€‚

13

[RANDOMKEY](https://www.runoob.com/redis/keys-randomkey.html) ä»å½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›ä¸€ä¸ª key ã€‚

14

[RENAME key newkey](https://www.runoob.com/redis/keys-rename.html) ä¿®æ”¹ key çš„åç§°

15

[RENAMENX key newkey](https://www.runoob.com/redis/keys-renamenx.html) ä»…å½“ newkey ä¸å­˜åœ¨æ—¶ï¼Œå°† key æ”¹åä¸º newkey ã€‚

16

\[SCAN cursor [MATCH pattern\] \[COUNT count\]](https://www.runoob.com/redis/keys-scan.html) è¿­ä»£æ•°æ®åº“ä¸­çš„æ•°æ®åº“é”®ã€‚

17

[TYPE key](https://www.runoob.com/redis/keys-type.html) è¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹ã€‚

Rediså­—ç¬¦ä¸²æ“ä½œ
==========

**è¯­æ³•ï¼š`å‘½ä»¤ é”®å`**

Redis å­—ç¬¦ä¸²å‘½ä»¤
-----------

ä¸‹è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„ redis å­—ç¬¦ä¸²å‘½ä»¤ï¼š

åºå·

å‘½ä»¤åŠæè¿°

1

[SET key value](https://www.runoob.com/redis/strings-set.html) è®¾ç½®æŒ‡å®š key çš„å€¼ã€‚

2

[GET key](https://www.runoob.com/redis/strings-get.html) è·å–æŒ‡å®š key çš„å€¼ã€‚

3

[GETRANGE key start end](https://www.runoob.com/redis/strings-getrange.html) è¿”å› key ä¸­å­—ç¬¦ä¸²å€¼çš„å­å­—ç¬¦

4

[GETSET key value](https://www.runoob.com/redis/strings-getset.html) å°†ç»™å®š key çš„å€¼è®¾ä¸º value ï¼Œå¹¶è¿”å› key çš„æ—§å€¼(old value)ã€‚

5

[GETBIT key offset](https://www.runoob.com/redis/strings-getbit.html) å¯¹ key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œè·å–æŒ‡å®šåç§»é‡ä¸Šçš„ä½(bit)ã€‚

6

\[MGET key1 [key2..\]](https://www.runoob.com/redis/strings-mget.html) è·å–æ‰€æœ‰(ä¸€ä¸ªæˆ–å¤šä¸ª)ç»™å®š key çš„å€¼ã€‚

7

[SETBIT key offset value](https://www.runoob.com/redis/strings-setbit.html) å¯¹ key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œè®¾ç½®æˆ–æ¸…é™¤æŒ‡å®šåç§»é‡ä¸Šçš„ä½(bit)ã€‚

8

[SETEX key seconds value](https://www.runoob.com/redis/strings-setex.html) å°†å€¼ value å…³è”åˆ° key ï¼Œå¹¶å°† key çš„è¿‡æœŸæ—¶é—´è®¾ä¸º seconds (ä»¥ç§’ä¸ºå•ä½)ã€‚

9

[SETNX key value](https://www.runoob.com/redis/strings-setnx.html) åªæœ‰åœ¨ key ä¸å­˜åœ¨æ—¶è®¾ç½® key çš„å€¼ã€‚

10

[SETRANGE key offset value](https://www.runoob.com/redis/strings-setrange.html) ç”¨ value å‚æ•°è¦†å†™ç»™å®š key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œä»åç§»é‡ offset å¼€å§‹ã€‚

11

[STRLEN key](https://www.runoob.com/redis/strings-strlen.html) è¿”å› key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼çš„é•¿åº¦ã€‚

12

\[MSET key value [key value ...\]](https://www.runoob.com/redis/strings-mset.html) åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ã€‚

13

\[MSETNX key value [key value ...\]](https://www.runoob.com/redis/strings-msetnx.html) åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ï¼Œå½“ä¸”ä»…å½“æ‰€æœ‰ç»™å®š key éƒ½ä¸å­˜åœ¨ã€‚

14

[PSETEX key milliseconds value](https://www.runoob.com/redis/strings-psetex.html) è¿™ä¸ªå‘½ä»¤å’Œ SETEX å‘½ä»¤ç›¸ä¼¼ï¼Œä½†å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½® key çš„ç”Ÿå­˜æ—¶é—´ï¼Œè€Œä¸æ˜¯åƒ SETEX å‘½ä»¤é‚£æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚

15

[INCR key](https://www.runoob.com/redis/strings-incr.html) å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å¢ä¸€ã€‚

16

[INCRBY key increment](https://www.runoob.com/redis/strings-incrby.html) å°† key æ‰€å‚¨å­˜çš„å€¼åŠ ä¸Šç»™å®šçš„å¢é‡å€¼ï¼ˆincrementï¼‰ ã€‚

17

[INCRBYFLOAT key increment](https://www.runoob.com/redis/strings-incrbyfloat.html) å°† key æ‰€å‚¨å­˜çš„å€¼åŠ ä¸Šç»™å®šçš„æµ®ç‚¹å¢é‡å€¼ï¼ˆincrementï¼‰ ã€‚

18

[DECR key](https://www.runoob.com/redis/strings-decr.html) å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å‡ä¸€ã€‚

19

[DECRBY key decrement](https://www.runoob.com/redis/strings-decrby.html) key æ‰€å‚¨å­˜çš„å€¼å‡å»ç»™å®šçš„å‡é‡å€¼ï¼ˆdecrementï¼‰ ã€‚

20

[APPEND key value](https://www.runoob.com/redis/strings-append.html) å¦‚æœ key å·²ç»å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ APPEND å‘½ä»¤å°†æŒ‡å®šçš„ value è¿½åŠ åˆ°è¯¥ key åŸæ¥å€¼ï¼ˆvalueï¼‰çš„æœ«å°¾ã€‚

**demo**

    # è®¾ç½®å€¼
    127.0.0.1:6379> set name lxz
    OK
    # è·å–å€¼
    127.0.0.1:6379> get name
    "lxz"
    # è·å–å­å­—ç¬¦ä¸²
    127.0.0.1:6379> getrange name 0 1
    "lx"
    # è®¾ç½®æ–°å€¼ï¼Œè¿”å›æ—§å€¼
    127.0.0.1:6379> getset name HammerZe
    "lxz"
    # è·å–å¤šä¸ªå€¼
    127.0.0.1:6379> mget name age
    1) "HammerZe"
    2) "18"
    
    

Pythonæ“ä½œredisï¼Œä½¿ç”¨rediså­—ç¬¦ä¸²å‘½ä»¤
--------------------------

    """
    1 set(name, value, ex=None, px=None, nx=False, xx=False)
         exï¼Œè¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
         pxï¼Œè¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
         nxï¼Œå¦‚æœè®¾ç½®ä¸ºTrueï¼Œåˆ™åªæœ‰nameä¸å­˜åœ¨æ—¶ï¼Œå½“å‰setæ“ä½œæ‰æ‰§è¡Œ,å€¼å­˜åœ¨ï¼Œå°±ä¿®æ”¹ä¸äº†ï¼Œæ‰§è¡Œæ²¡æ•ˆæœ
         xxï¼Œå¦‚æœè®¾ç½®ä¸ºTrueï¼Œåˆ™åªæœ‰nameå­˜åœ¨æ—¶ï¼Œå½“å‰setæ“ä½œæ‰æ‰§è¡Œï¼Œå€¼å­˜åœ¨æ‰èƒ½ä¿®æ”¹ï¼Œå€¼ä¸å­˜åœ¨ï¼Œä¸ä¼šè®¾ç½®æ–°å€¼
    2 setnx(name, value)
    2 setex(name, value, time)
    3 psetex(name, time_ms, value)
    4 mset(*args, **kwargs)
    5 get(name)
    5 mget(keys, *args)
    6 getset(name, value)
    7 getrange(key, start, end)
    8 setrange(name, offset, value)
    9 setbit(name, offset, value)
    10 getbit(name, offset)
    11 bitcount(key, start=None, end=None)
    12 bitop(operation, dest, *keys)
    13 strlen(name)
    14 incr(self, name, amount=1)
    15 incrbyfloat(self, name, amount=1.0)
    16 decr(self, name, amount=1)
    17 append(key, value)
    """
    

    import redis
    conn = redis.Redis(host="localhost",port=6379,db=0, )
    

**setç›¸å…³æ“ä½œ**

    # conn.set('name','Hans') # å­˜å€¼
    # conn.setex('age',5,18) # è®¾ç½®è¿‡æœŸæ—¶é—´5ç§’
    # conn.psetex('age',5000,18) # è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º5000æ¯«ç§’
    # print(conn.mget('name','age'))  # å–å€¼
    # conn.setnx('text','python')
    # conn.setnx('text','redis') # nxä¸ºtrueï¼Œtextå­˜åœ¨æ— æ³•ä¿®æ”¹å€¼ï¼Œä¸å­˜åœ¨å¯ä»¥ä¿®æ”¹
    # conn.set('text','redis1',xx=True) # xxä¸ºtrue,textä¸å­˜ä¹‹æ— æ³•ä¿®æ”¹ï¼Œå­˜åœ¨å¯ä»¥ä¿®æ”¹
    # conn.mset({'text':'Linux','text1':'Python'}) # æ‰¹é‡è®¾ç½®
    # conn.setrange('hobby',0,'ball')  # ä»0ä½ç½®å¼€å§‹è®¾ç½®ball
    

**getç›¸å…³æ“ä½œ**

    # print(conn.get('text')) # b'Linux'
    # print(conn.mget(['text','text1'])) # [b'Linux', b'Python']
    # print(conn.mget('text','text1'))   # [b'Linux', b'Python']
    # print(conn.getset('name','monkey')) # è·å–åŸæ¥çš„nameï¼Œå¹¶è®¾ç½®æˆæ–°å€¼ï¼Œb'Hans'
    # print(conn.get('name')) # b'monkey'
    '''è·å–å­—èŠ‚'''
    # print(conn.getrange('name',0,1)) # b'mo'
    # conn.set('name1','å¤§å¸…é€¼')
    # print(conn.getrange('name1',0,2).decode('utf8')) # å¤§
    

**å…¶ä»–æ“ä½œ**

    """ç»Ÿè®¡å­—ç¬¦ä¸²é•¿åº¦"""
    # è‹±æ–‡monkey
    # print(conn.strlen('name')) # 6
    # æ±‰å­—å¤§å¸…é€¼
    # print(conn.strlen('name1')) # 9
    """å¢å€¼age+=1"""
    # print(conn.incr('age'))
    """å‡å€¼age-=1"""
    # print(conn.decr('age'))
    """å°¾éƒ¨è¿½åŠ """
    # print(conn.append('name','nb'))  # monkeynb
    

Redis å“ˆå¸Œæ“ä½œ
==========

Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ fieldï¼ˆå­—æ®µï¼‰ å’Œ valueï¼ˆå€¼ï¼‰ çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ï¼Œç±»ä¼¼pythonçš„å­—å…¸ï¼›

Redis ä¸­æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 232 - 1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰

> demoï¼šè®¾ç½®æè¿°nameçš„ä¿¡æ¯åˆ°å“ˆå¸Œè¡¨testä¸­

    127.0.0.1:6379> hmset test name "hash" description "hashtable for test"
    OK
    127.0.0.1:6379> hgetall test
    1) "name"
    2) "hash"
    3) "description"
    4) "hashtable for test"
    127.0.0.1:6379>
    

**Hashå¸¸ç”¨æ–¹æ³•**

åºå·

å‘½ä»¤åŠæè¿°

1

\[HDEL key field1 [field2\]](https://www.runoob.com/redis/hashes-hdel.html) åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå“ˆå¸Œè¡¨å­—æ®µ

2

[HEXISTS key field](https://www.runoob.com/redis/hashes-hexists.html) æŸ¥çœ‹å“ˆå¸Œè¡¨ key ä¸­ï¼ŒæŒ‡å®šçš„å­—æ®µæ˜¯å¦å­˜åœ¨ã€‚

3

[HGET key field](https://www.runoob.com/redis/hashes-hget.html) è·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼ã€‚

4

[HGETALL key](https://www.runoob.com/redis/hashes-hgetall.html) è·å–åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®š key çš„æ‰€æœ‰å­—æ®µå’Œå€¼

5

[HINCRBY key field increment](https://www.runoob.com/redis/hashes-hincrby.html) ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æ•´æ•°å€¼åŠ ä¸Šå¢é‡ increment ã€‚

6

[HINCRBYFLOAT key field increment](https://www.runoob.com/redis/hashes-hincrbyfloat.html) ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æµ®ç‚¹æ•°å€¼åŠ ä¸Šå¢é‡ increment ã€‚

7

[HKEYS key](https://www.runoob.com/redis/hashes-hkeys.html) è·å–æ‰€æœ‰å“ˆå¸Œè¡¨ä¸­çš„å­—æ®µ

8

[HLEN key](https://www.runoob.com/redis/hashes-hlen.html) è·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„æ•°é‡

9

\[HMGET key field1 [field2\]](https://www.runoob.com/redis/hashes-hmget.html) è·å–æ‰€æœ‰ç»™å®šå­—æ®µçš„å€¼

10

\[HMSET key field1 value1 [field2 value2 \]](https://www.runoob.com/redis/hashes-hmset.html) åŒæ—¶å°†å¤šä¸ª field-value (åŸŸ-å€¼)å¯¹è®¾ç½®åˆ°å“ˆå¸Œè¡¨ key ä¸­ã€‚

11

[HSET key field value](https://www.runoob.com/redis/hashes-hset.html) å°†å“ˆå¸Œè¡¨ key ä¸­çš„å­—æ®µ field çš„å€¼è®¾ä¸º value ã€‚

12

[HSETNX key field value](https://www.runoob.com/redis/hashes-hsetnx.html) åªæœ‰åœ¨å­—æ®µ field ä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½®å“ˆå¸Œè¡¨å­—æ®µçš„å€¼ã€‚

13

[HVALS key](https://www.runoob.com/redis/hashes-hvals.html) è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼ã€‚

14

\[HSCAN key cursor [MATCH pattern\] \[COUNT count\]](https://www.runoob.com/redis/hashes-hscan.html) è¿­ä»£å“ˆå¸Œè¡¨ä¸­çš„é”®å€¼å¯¹ã€‚

**demo**

    127.0.0.1:6379> hdel test name
    (integer) 1
    127.0.0.1:6379> hget test name
    (nil)
    127.0.0.1:6379> hgetall test
    1) "description"
    2) "hashtable for test"
    127.0.0.1:6379> hget test description
    "hashtable for test"
    127.0.0.1:6379> hkeys test
    1) "description"
    127.0.0.1:6379> hlen test
    (integer) 1
    127.0.0.1:6379> hmget test description
    1) "hashtable for test"
    127.0.0.1:6379> hmset test name "HammerZe" age 18
    OK
    127.0.0.1:6379> hmget test name description age
    1) "HammerZe"
    2) "hashtable for test"
    3) "18"
    127.0.0.1:6379> hset test name HammerZEZE
    (integer) 0
    127.0.0.1:6379> hvals test
    1) "hashtable for test"
    2) "HammerZEZE"
    3) "18"
    

Pythonæ“ä½œredisï¼Œä½¿ç”¨rediså“ˆå¸Œå‘½ä»¤
-------------------------

> **å¸¸ç”¨æ–¹æ³•ï¼Œéƒ½ä»¥hå¼€å¤´ï¼Œå­˜å…¥å¤šè¡Œæ•°æ®æ— åº**

    hset(name, key, value,mapping,items)  # è®¾ç½®å€¼/å¤šä¸ªå€¼
    hmset(name, mapping)  # æ‰¹é‡è®¾ç½®å¤šä¸ªå€¼
    hget(name,key)   # è·å–å€¼
    hmget(name, keys, *args)  # è·å–å¤šä¸ªå€¼
    hgetall(name)  # è·å–æ‰€æœ‰å€¼
    hlen(name)  # è·å–é•¿åº¦ï¼ˆé”®å€¼å¯¹ä¸ªæ•°ï¼‰
    hkeys(name)  # è·å–æ‰€æœ‰key
    hvals(name)  # è·å–æ‰€æœ‰valueå€¼
    hexists(name, key) # åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨äºå“ˆå¸Œè¡¨ä¸­
    hdel(name,*keys) # åˆ é™¤ä¸€ä¸ªå€¼/å¤šä¸ªå€¼
    hincrby(name, key, amount=1) # ç´¯åŠ ï¼Œé€šè¿‡æŒ‡å®šamountçš„å€¼
    hincrbyfloat(name, key, amount=1.0) # ç´¯åŠ æµ®ç‚¹æ•°
    hscan(name, cursor=0, match=None, count=None) # è·å–éƒ¨åˆ†å€¼
    '''
    cursorï¼šæ¸¸æ ‡ï¼Œcursor=0ï¼Œä»£è¡¨ä»ä½ç½®0å¼€å§‹å–
    matchï¼šåŒ¹é…è§„åˆ™
    countï¼šå–å¤šå°‘æ¡æ•°æ®
    æ³¨æ„ï¼šå¦‚æœå–100æ¡ï¼Œé‚£ä¹ˆä¸‹æ¬¡å–ä¼šåŸºäºè¿™æ¬¡çš„æ¸¸æ ‡ä½ç½®ç»§ç»­å¾€ä¸‹å–
    '''
    hscan_iter(name, match=None, count=None) # å–éƒ¨åˆ†å€¼ï¼Œä¼˜åŒ–äºhscanï¼Œå¯ä»¥ä¸€æ¬¡å–æ‰€æœ‰ï¼Œä¹Ÿä¼˜åŒ–äºhgetallè®¾ç½®countçš„å€¼ä¸€èˆ¬ä¸ä¼šæ’‘çˆ†å†…å­˜ï¼Œå†…éƒ¨ä½¿ç”¨çš„ç”Ÿæˆå™¨yield
    

**demo**

    import redis
    
    conn = redis.Redis(host="localhost",port=6379,db=1)
    # conn.hset('test','name','HammerZe') # è®¾ç½®ä¸€ä¸ªå€¼
    # conn.hset('test',mapping={'age':19,'hobby':'ball'})  # è®¾ç½®å¤šä¸ªå€¼
    # print(conn.hget('test', 'name'))  # è·å–å€¼---->b'HammerZe'
    # print(conn.hmget('test',['name','age'])) # [b'HammerZe', b'19']
    # print(conn.hgetall('test'))  # è·å–æ‰€æœ‰å€¼---ã€‹{b'name': b'HammerZe', b'age': b'19', b'hobby': b'ball'}
    # print(conn.hlen('test'))  # è·å–é”®å€¼å¯¹ä¸ªæ•°---->3
    # print(conn.hkeys('test'))  # è·å–æ‰€æœ‰key--->[b'name', b'age', b'hobby']
    # print(conn.hvals('test'))  # è·å–æ‰€æœ‰value---->[b'HammerZe', b'19', b'ball']
    # print(conn.hexists('test','name'))  # åˆ¤æ–­è¯¥å“ˆå¸Œè¡¨ä¸­æ˜¯å¦æœ‰è¯¥key---->True
    # print(conn.hdel('test','name'))  # åˆ é™¤å€¼
    # print(conn.hincrby('test','age',amount=2))  # ç´¯åŠ ,æ¯æ¬¡åŠ 2å²  --->21
    # print(conn.hincrbyfloat('test','age',amount=2.2))  # ç´¯åŠ æµ®ç‚¹æ•°  --->23.2
    
    # hscanè·å–éƒ¨åˆ†å€¼
    # å†™å…¥å€¼
    # for i in range(1000):
    #     conn.hset('test1',f"key-->{i}",i)
    # hscanè·å–å€¼
    # res=conn.hscan('test1', cursor=0, count=10)
    # print(res)
    # print(len(res[1]))  # 100
    
    # hscan_iter: #å…¨å–å‡ºæ‰€æœ‰å€¼ï¼Œåˆ†æ‰¹å–ï¼Œä¸æ˜¯ä¸€æ¬¡æ€§å…¨å–å›æ¥ï¼Œå‡å°å†…å­˜å ç”¨
    # res =conn.hscan_iter('test1',count=10)
    # print(res)  # <generator object ScanCommands.hscan_iter at 0x0000015B14BD2D58>
    # for i in res:
    #     print(i)
    

Redis åˆ—è¡¨æ“ä½œ
==========

Redisåˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰

ä¸€ä¸ªåˆ—è¡¨æœ€å¤šå¯ä»¥åŒ…å« 232 - 1 ä¸ªå…ƒç´  (4294967295, æ¯ä¸ªåˆ—è¡¨è¶…è¿‡40äº¿ä¸ªå…ƒç´ )ã€‚

**Redis åˆ—è¡¨å‘½ä»¤**

ä¸‹è¡¨åˆ—å‡ºäº†åˆ—è¡¨ç›¸å…³çš„åŸºæœ¬å‘½ä»¤ï¼š

åºå·

å‘½ä»¤åŠæè¿°

1

\[BLPOP key1 [key2 \] timeout](https://www.runoob.com/redis/lists-blpop.html) ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚

2

\[BRPOP key1 [key2 \] timeout](https://www.runoob.com/redis/lists-brpop.html) ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚

3

[BRPOPLPUSH source destination timeout](https://www.runoob.com/redis/lists-brpoplpush.html) ä»åˆ—è¡¨ä¸­å¼¹å‡ºä¸€ä¸ªå€¼ï¼Œå°†å¼¹å‡ºçš„å…ƒç´ æ’å…¥åˆ°å¦å¤–ä¸€ä¸ªåˆ—è¡¨ä¸­å¹¶è¿”å›å®ƒï¼› å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚

4

[LINDEX key index](https://www.runoob.com/redis/lists-lindex.html) é€šè¿‡ç´¢å¼•è·å–åˆ—è¡¨ä¸­çš„å…ƒç´ 

5

[LINSERT key BEFORE|AFTER pivot value](https://www.runoob.com/redis/lists-linsert.html) åœ¨åˆ—è¡¨çš„å…ƒç´ å‰æˆ–è€…åæ’å…¥å…ƒç´ 

6

[LLEN key](https://www.runoob.com/redis/lists-llen.html) è·å–åˆ—è¡¨é•¿åº¦

7

[LPOP key](https://www.runoob.com/redis/lists-lpop.html) ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ 

8

\[LPUSH key value1 [value2\]](https://www.runoob.com/redis/lists-lpush.html) å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨

9

[LPUSHX key value](https://www.runoob.com/redis/lists-lpushx.html) å°†ä¸€ä¸ªå€¼æ’å…¥åˆ°å·²å­˜åœ¨çš„åˆ—è¡¨å¤´éƒ¨

10

[LRANGE key start stop](https://www.runoob.com/redis/lists-lrange.html) è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ 

11

[LREM key count value](https://www.runoob.com/redis/lists-lrem.html) ç§»é™¤åˆ—è¡¨å…ƒç´ 

12

[LSET key index value](https://www.runoob.com/redis/lists-lset.html) é€šè¿‡ç´¢å¼•è®¾ç½®åˆ—è¡¨å…ƒç´ çš„å€¼

13

[LTRIM key start stop](https://www.runoob.com/redis/lists-ltrim.html) å¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œä¿®å‰ª(trim)ï¼Œå°±æ˜¯è¯´ï¼Œè®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œä¸åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚

14

[RPOP key](https://www.runoob.com/redis/lists-rpop.html) ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›å€¼ä¸ºç§»é™¤çš„å…ƒç´ ã€‚

15

[RPOPLPUSH source destination](https://www.runoob.com/redis/lists-rpoplpush.html) ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†è¯¥å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨å¹¶è¿”å›

16

\[RPUSH key value1 [value2\]](https://www.runoob.com/redis/lists-rpush.html) åœ¨åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå€¼

17

[RPUSHX key value](https://www.runoob.com/redis/lists-rpushx.html) ä¸ºå·²å­˜åœ¨çš„åˆ—è¡¨æ·»åŠ å€¼

**demo**

    127.0.0.1:6379> lpush testlist redis
    (integer) 1
    127.0.0.1:6379> lpush testlist mysql
    (integer) 2
    127.0.0.1:6379> lpush testlist python
    (integer) 3
    127.0.0.1:6379> lrange testlist 0 3
    1) "python"
    2) "mysql"
    3) "redis"
    
    # å¼¹å‡ºå€¼ï¼Œå¦‚æœæ²¡æœ‰10ç§’åè¿”å›nil
    127.0.0.1:6379> blpop testlist 10
    1) "testlist"
    2) "python"
    127.0.0.1:6379> blpop testlist 10
    1) "testlist"
    2) "mysql"
    127.0.0.1:6379> blpop testlist 10
    1) "testlist"
    2) "redis"
    127.0.0.1:6379> blpop testlist 10
    (nil)
    (10.07s)
    

Pythonæ“ä½œredisï¼Œä½¿ç”¨rediså“ˆå¸Œå‘½ä»¤
-------------------------

> å¸¸è§æ–¹æ³•

    PSï¼šå›¾å½¢ç•Œé¢çœ‹åˆ°çš„ ä¸Šé¢æ˜¯å·¦ï¼Œä¸‹é¢æ˜¯å³
    lpush(name,values)   # ä»åˆ—è¡¨å·¦è¾¹æ’å…¥
    lpushx(name,value)   # ä»åˆ—è¡¨å·¦è¾¹æ’å…¥ï¼Œå¦‚æœå­˜åœ¨ï¼Œæ‰èƒ½æ“ä½œ
    llen(name)          # æ±‚é•¿åº¦
    linsert(name, where, refvalue, value) # æŒ‡å®šä½ç½®æ’å…¥å€¼ 
    r.lset(name, index, value)  # å¯¹nameå¯¹åº”çš„listä¸­çš„æŸä¸€ä¸ªç´¢å¼•ä½ç½®é‡æ–°èµ‹å€¼
    r.lrem(name, count,value)  # åˆ é™¤ 
    '''
    nameï¼šlistå
    valueï¼šè¦åˆ é™¤çš„å€¼
    num=0ï¼šè¦åˆ é™¤æ‰€æœ‰æŒ‡å®šçš„å€¼
    num=1ï¼šåˆ é™¤ä¸€ä¸ª
    num=2ï¼šåˆ é™¤ä¸¤ä¸ª
    num=-2ï¼šä»åå¾€å‰åˆ 2ä¸ª
    '''
    lpop(name)  # ä»å·¦ä¾§å¼¹å‡º
    rpop(name)  # ä»å³ä¾§å¼¹å‡º
    lindex(name, index)  # è·å–ç´¢å¼•ä½ç½®ä¸ºindexçš„å€¼lindex('list',0)
    lrange(name, start, end) # èŒƒå›´å–ï¼Œå…¨é—­åŒºé—´
    ltrim(name, start, end)   # ä¿ç•™start-endèŒƒå›´å†…çš„å€¼ï¼Œç§»é™¤å…¶ä»–å€¼
    rpoplpush(src, dst) # ä»ä¸€ä¸ªåˆ—è¡¨å–å‡ºæœ€å³è¾¹çš„å…ƒç´ ï¼ŒåŒæ—¶å°†å…¶æ·»åŠ åˆ°å¦å¤–ä¸€ä¸ªåˆ—è¡¨çš„æœ€å·¦è¾¹
    blpop(keys, timeout) # ä»å·¦è¾¹å¼¹å‡ºå€¼ï¼Œå¦‚æœæ²¡æœ‰timeoutç§’åè¿”å›nil(ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ï¼Œæ¶ˆæ¯é˜Ÿåˆ—)
    brpoplpush(src, dst, timeout=0)
    

**demo**

    import redis
    
    conn = redis.Redis(host="localhost",port=6379,db=2)
    
    # conn.lpush('mylist','Hammer1','Hammer2')
    # conn.rpush('mylist','Hammer3')
    # conn.lpushx('mylist','Hammer4')  # å­˜åœ¨name,ä»å·¦è¾¹æ’å…¥æˆåŠŸ
    # print(conn.llen('mylist'))  # 4
    # conn.linsert('mylist','before','Hammer4','Hammer5') # åœ¨è°å‰æ’å…¥
    # conn.linsert('mylist','after','Hammer5','Hammer6')  # åœ¨è°åæ’å…¥
    # conn.lset('mylist',0,'ä½ç½®0é‡æ–°èµ‹å€¼')
    # conn.lrem('mylist',1,'ä½ç½®0é‡æ–°èµ‹å€¼')  # ä»å·¦ä¾§åˆ é™¤ç¬¬ä¸€ä¸ªå€¼
    # conn.lrem('mylist',-1,'Hammer3')  # ä»å³ä¾§åˆ é™¤ç¬¬ä¸€ä¸ªå€¼
    # conn.lrem('mylist','0','Hammer')  # ä»0å¼€å§‹,åé¢Hammerå…¨åˆ 
    # res = conn.lpop('mylist') # ä»å·¦å¾€å¤–å¼¹å‡º
    # print(res) # b'Hammer5'
    # print(conn.lindex('mylist',1))  # è·å–ç´¢å¼•ä¸º1çš„å€¼---> b'Hammer2'
    # print(conn.lrange('mylist',0,1))  # è·å–èŒƒå›´å†…çš„å€¼,[b'Hammer4', b'Hammer2']
    # conn.ltrim('mylist',0,1) # é™¤äº†èŒƒå›´å†…çš„,éƒ½åˆ é™¤
    # conn.blpop('mylist',timeout=2)  # é˜»å¡å¼å¼¹å‡º,å¦‚æœæ²¡æœ‰å€¼ï¼Œä¼šä¸€ç›´é˜»å¡
    # ä½œç”¨ï¼Œå¯ä»¥å®ç°åˆ†å¸ƒå¼çš„ç³»ç»Ÿ---ã€‹åˆ†å¸ƒå¼çˆ¬è™«
    # çˆ¬ç½‘é¡µï¼Œè§£ææ•°æ®ï¼Œå­˜å…¥æ•°æ®åº“ä¸€æ¡é¾™ï¼Œä¸€ä¸ªç¨‹åºåš
    # å†™ä¸€ä¸ªç¨‹åºï¼Œä¸“é—¨çˆ¬ç½‘é¡µ---ã€‹ä¸­é—´é€šè¿‡redisçš„åˆ—è¡¨åšä¸­è½¬
    # å†å†™ä¸€ä¸ªç¨‹åºä¸“é—¨è§£æç½‘é¡µå­˜å…¥æ•°æ®åº“
    

Pythonå†…ä½¿ç”¨Rediså…¬å…±æ“ä½œ
==================

**å…¬å…±æ“ä½œä¸ç±»å‹æ— å…³**

> å¸¸ç”¨æ–¹æ³•

    delete(*names)  # åˆ é™¤å•ä¸ªnameæˆ–è€…å¤šä¸ªname
    exists(name)  # åˆ¤æ–­æ˜¯å¦å­˜åœ¨name
    keys(pattern='*')  # è·å–åŒ¹é…çš„keyï¼Œä¸å†™é»˜è®¤è·å–æ‰€æœ‰ï¼Œæ”¯æŒæ¨¡ç³ŠåŒ¹é…
    '''
    æ¨¡ç³ŠæŸ¥è¯¢ï¼š
    ?ä»£è¡¨åŒ¹é…å•ä¸ª
    *ä»£è¡¨åŒ¹é…ä»»æ„é•¿åº¦
    [ab]åŒ¹é…abï¼šhel[ab]lo
    '''
    expire(name ,time)  # è®¾ç½®è¿‡æœŸæ—¶é—´
    rename(src, dst)  # nameé‡å‘½åï¼ŒsrcåŸæ¥çš„ï¼Œdstæ–°çš„
    move(name, db)  # æŠŠæŒ‡å®šçš„nameç§»åŠ¨åˆ°æŒ‡å®šdbä¸‹
    randomkey()  # éšæœºè¿”å›keyå€¼
    type(name)   # æŸ¥çœ‹valueç±»å‹
    

**demo**

    import  redis
    conn = redis.Redis(host="localhost",port=6379,db=0)
    
    # conn.delete('age','test')  # åˆ é™¤ageå’Œtest
    # print(conn.exists('age'))  # 0
    # print(conn.exists('name','name1'))  # è¿”å›å­˜åœ¨çš„ä¸ªæ•°--->2
    # conn.expire('name',3)  # è®¾ç½®3ç§’å,nameè¿‡æœŸ
    # conn.rename('hobby','myhobby')  # é‡å‘½å
    # conn.move('text',db=1)  # ç§»åŠ¨textåˆ°db1ä¸‹
    # print(conn.randomkey())  # éšæœºè¿”å›key
    # print(conn.type('text1'))  # b'string'
    

Redis ç®¡é“
========

**Redisæ˜¯éå…³ç³»å‹æ•°æ®åº“ï¼Œæœ¬èº«æ˜¯ä¸æ”¯æŒäº‹åŠ¡ï¼Œredisä¸­çš„ç®¡é“å¯ä»¥å®ç°äº‹åŠ¡çš„æ”¯æŒï¼Œè¦ä¹ˆéƒ½æˆåŠŸè¦ä¹ˆéƒ½å¤±è´¥ï¼Œé‚£ä¹ˆå®ç°çš„åŸç†å°±æ˜¯æ”¾å…¥ä¸€ä¸ªç®¡é“ä¸­ä¸€æ¬¡æ€§æ‰§è¡Œï¼›**

    import redis
    
    pool = redis.ConnectionPool() # åˆ›å»ºæ± 
    conn = redis.Redis(connection_pool=pool)  # å®ä¾‹åŒ–
    
    pipe = conn.pipeline(transaction=True)
    pipe.multi()  # ç®¡é“ç­‰å¾…æ”¾å…¥å¤šæ¡å‘½ä»¤
    # ä»¥åç”¨pipeä»£æ›¿connæ“ä½œ
    pipe.set('name', 'HammerZe')
    
    pipe.set('role', 'nb')
    
    # åˆ°æ­¤æ˜¯å¾€ç®¡é“ä¸­æ”¾äº†å‘½ä»¤ï¼Œè¿˜æ²¡æ‰§è¡Œï¼Œç›´åˆ°ä¸‹é¢çš„å‘½ä»¤
    pipe.execute() # ä¸€æ¬¡æ€§æ‰§è¡Œç®¡é“ä¸­çš„æ‰€æœ‰å‘½ä»¤
    
    """
    å¦‚æœæ˜¯é›†ç¾¤ç¯å¢ƒï¼Œä¸æ”¯æŒç®¡é“ï¼Œæ•°æ®è¿‡äºåˆ†æ•£ï¼Œ"é”ä¸ä½"
    """
    

* * *

ã€å¾…ç»­ã€‘