---
layout: post
title: "TS åŸºç¡€åŠåœ¨ Vue ä¸­çš„å®è·µï¼šTypeScript éƒ½å‘å¸ƒ 5.0 ç‰ˆæœ¬å•¦ï¼Œç°åœ¨ä¸å­¦æ›´å¾…ä½•æ—¶ï¼"
date: "2023-03-30T01:10:19.037Z"
---
TS åŸºç¡€åŠåœ¨ Vue ä¸­çš„å®è·µï¼šTypeScript éƒ½å‘å¸ƒ 5.0 ç‰ˆæœ¬å•¦ï¼Œç°åœ¨ä¸å­¦æ›´å¾…ä½•æ—¶ï¼
=================================================

æœ¬æ–‡ä¸»è¦ä»‹ç»TSåŸºç¡€åŠåœ¨Vueä¸­çš„å®è·µï¼Œé™„èµ ã€ŠJSé¡¹ç›®è½¬TSæŒ‡å—ã€‹ï¼Œæ—¨åœ¨å¸®åŠ©è¿˜åœ¨ä½¿ç”¨JSçš„æœ‹å‹å¿«é€Ÿä½¿ç”¨TSï¼Œäº«å—TSå¸¦æ¥çš„ä¸æ»‘ä½“éªŒã€‚

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Kagolï¼Œ[OpenTiny](https://opentiny.design/) å¼€æºç¤¾åŒºè¿è¥ï¼Œ[TinyVue](https://github.com/opentiny/tiny-vue) è·¨ç«¯ã€è·¨æ¡†æ¶ç»„ä»¶åº“æ ¸å¿ƒè´¡çŒ®è€…ï¼Œä¸“æ³¨äºå‰ç«¯ç»„ä»¶åº“å»ºè®¾å’Œå¼€æºç¤¾åŒºè¿è¥ã€‚

å¾®è½¯äº3æœˆ16æ—¥å‘å¸ƒäº† TypeScript 5.0Â ç‰ˆæœ¬ã€‚å¾®è½¯è¡¨ç¤ºæ–°ç‰ˆæœ¬ä½“ç§¯æ›´å°ã€å¼€å‘è€…æ›´å®¹æ˜“ä¸Šæ‰‹ä¸”è¿è¡Œé€Ÿåº¦æ›´å¿«ã€‚

æ ¹æ® The Software House å‘å¸ƒçš„ã€Š2022 å‰ç«¯å¼€å‘å¸‚åœºçŠ¶æ€è°ƒæŸ¥æŠ¥å‘Šã€‹æ•°æ®æ˜¾ç¤ºï¼Œä½¿ç”¨ TypeScript çš„äººæ•°å·²ç»è¾¾åˆ° 84%ï¼Œå’Œ 2021 å¹´ç›¸æ¯”å¢åŠ äº† 7 ä¸ªç™¾åˆ†ç‚¹ã€‚

TypeScript å¯è°“é€å¹´ç«çƒ­ï¼Œä½¿ç”¨è€…å‘ˆç°é€å¹´ä¸Šå‡çš„è¶‹åŠ¿ï¼Œå†ä¸å­¦èµ·æ¥å°±è¯´ä¸è¿‡å»ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/763b928360ba4880a96304469f2c06b8~tplv-k3u1fbpfcp-watermark.image?)

é€šè¿‡æœ¬æ–‡ä½ å°†æ”¶è·ï¼š

*   é€šè¿‡äº†è§£ TS çš„å››å¤§å¥½å¤„ï¼Œè¯´æœè‡ªå·±ä¸‹å®šå†³å¿ƒå­¦ä¹  TS
*   5 åˆ†é’Ÿå­¦ä¹  TS æœ€åŸºç¡€å’Œå¸¸ç”¨çš„çŸ¥è¯†ç‚¹ï¼Œå¿«é€Ÿå…¥é—¨ï¼ŒåŒ…æ•™åŒ…ä¼š
*   äº†è§£å¦‚ä½•åœ¨ Vue ä¸­ä½¿ç”¨ TypeScriptï¼Œç»™ Vue2 å¼€å‘è€…åˆ‡æ¢åˆ° Vue3 + TypeScript æä¾›æœ€åŸºæœ¬çš„å‚è€ƒ
*   å¦‚ä½•å°†ç°æœ‰çš„ JS é¡¹ç›®æ”¹é€ æˆ TS é¡¹ç›®

1 å­¦ä¹  TS çš„å¥½å¤„
-----------

### 1.1 å¥½å¤„ä¸€ï¼šç´§è·Ÿæ½®æµï¼šè®©è‡ªå·±çœ‹èµ·æ¥å¾ˆé…·

å¦‚æœä½ æ²¡å­¦è¿‡ TS  
ä½ çš„å‰ç«¯æœ‹å‹ï¼šéƒ½ 2023 å¹´äº†ï¼Œä½ è¿˜ä¸ä¼š TSï¼Ÿç»™ä½ ä¸€ä¸ªçœ¼è‰²ä½ è‡ªå·±æ„Ÿæ‚Ÿå§

å¦‚æœä½ å­¦è¿‡ TS  
ä½ çš„å‰ç«¯æœ‹å‹ï¼šå“‡ï¼Œä½ ä»¬çš„é¡¹ç›®å·²ç»ç”¨ä¸Š Vue3 + TS å•¦ï¼Œçœ‹èµ·æ¥çœŸæ£’ï¼æ•™æ•™æˆ‘å§

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac93d18687914b68aaba4f53e99934a3~tplv-k3u1fbpfcp-watermark.image?)

å¦‚æœè¯´ä¸Šé¢é‚£ä¸ªå¥½å¤„å¤ªè™šäº†ï¼Œé‚£ä¸‹é¢çš„3æ¡å¥½å¤„å¯éƒ½æ˜¯å®å®åœ¨åœ¨èƒ½è®©è‡ªå·±å—ç›Šçš„ã€‚

### 1.2 å¥½å¤„äºŒï¼šæ™ºèƒ½æç¤ºï¼šæå‡å¼€å‘è€…ä½“éªŒå’Œæ•ˆç‡

å½“å¾ªç¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„æ—¶ï¼Œå¯¹è±¡çš„å±æ€§åˆ—è¡¨å¯ä»¥ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œä¸ç”¨åˆ°å¯¹è±¡çš„å®šä¹‰ä¸­å»æŸ¥è¯¢è¯¥å¯¹è±¡æœ‰å“ªäº›å±æ€§ã€‚

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/baeec5f0a648462d96d246f20d18d625~tplv-k3u1fbpfcp-watermark.image?)

é€šè¿‡è°ƒç”¨åå°æ¥å£è·å–çš„å¼‚æ­¥æ•°æ®ä¹Ÿå¯ä»¥é€šè¿‡TSç±»å‹è¿›è¡Œæ™ºèƒ½æç¤ºï¼Œè¿™æ ·ç›¸å½“äºé›†æˆäº†æ¥å£æ–‡æ¡£ï¼Œåç»­åå°ä¿®æ”¹å­—æ®µï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å‘ç°ã€‚

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f3f4feb89e2488bad58a72e3084b110~tplv-k3u1fbpfcp-watermark.image?)

Vue ç»„ä»¶çš„å±æ€§å’Œäº‹ä»¶éƒ½å¯ä»¥æ™ºèƒ½æç¤ºã€‚

ä¸‹å›¾æ˜¯æˆ‘ä»¬ [OpenTiny](https://github.com/opentiny/tiny-vue) è·¨ç«¯è·¨æ¡†æ¶å‰ç«¯ç»„ä»¶åº“ä¸­çš„ Alert ç»„ä»¶ï¼Œå½“åœ¨ç»„ä»¶æ ‡ç­¾ä¸­è¾“å…¥ `des` æ—¶ï¼Œä¼šè‡ªåŠ¨æç¤º `description` å±æ€§ï¼›å½“è¾“å…¥ `@c` æ—¶ï¼Œä¼šè‡ªåŠ¨æç¤º `@close` äº‹ä»¶ã€‚

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0d61e0a1dbe42f087be606c071090cc~tplv-k3u1fbpfcp-watermark.image?)

### 1.3 å¥½å¤„ä¸‰ï¼šé”™è¯¯æ ‡è®°ï¼šä»£ç å“ªé‡Œæœ‰é—®é¢˜ä¸€çœ¼å°±çŸ¥é“

åœ¨ JS é¡¹ç›®ä½¿ç”¨ä¸å­˜åœ¨çš„å¯¹è±¡å±æ€§ï¼Œåœ¨ç¼–ç é˜¶æ®µä¸å®¹æ˜“çœ‹å‡ºæ¥ï¼Œåˆ°è¿è¡Œæ—¶æ‰ä¼šæŠ¥é”™ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4fceb00a88d04ec1a0788a25c772dde4~tplv-k3u1fbpfcp-watermark.image?)

åœ¨ TS é¡¹ç›®ä½¿ç”¨ä¸å­˜åœ¨çš„å¯¹è±¡å±æ€§ï¼Œåœ¨IDEä¸­ä¼šæœ‰çº¢è‰²æ³¢æµªçº¿æ ‡è®°ï¼Œé¼ æ ‡ç§»ä¸Šå»èƒ½çœ‹åˆ°å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c68990f2697a4799bd078fdda32d4923~tplv-k3u1fbpfcp-watermark.image?)

åœ¨ JS é¡¹ç›®ï¼Œè°ƒç”¨æ–¹æ³•æ—¶æ‹¼é”™å•è¯ä¸å®¹æ˜“è¢«å‘ç°ï¼Œè¦åœ¨è¿è¡Œæ—¶æ‰ä¼šå°†é”™è¯¯æš´éœ²å‡ºæ¥ã€‚

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4ca1418afa1642e7841841122956c478~tplv-k3u1fbpfcp-watermark.image?)

åœ¨ TS é¡¹ç›®ä¼šæœ‰çº¢è‰²æ³¢æµªçº¿æç¤ºï¼Œä¸€çœ¼å°±çœ‹å‡ºæ‹¼é”™å•è¯ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6d1dab83c118496190863c8aa971b9aa~tplv-k3u1fbpfcp-watermark.image?)

### 1.4 å¥½å¤„å››ï¼šç±»å‹çº¦æŸï¼šç”¨æˆ‘çš„ä»£ç å°±å¾—å¬æˆ‘çš„

ä½ å†™äº†ä¸€ä¸ªå·¥å…·å‡½æ•° getType ç»™åˆ«äººç”¨ï¼Œé™å®šå‚æ•°åªèƒ½æ˜¯æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œè¿™æ—¶å¦‚æœä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„äººä¼ å…¥å…¶ä»–å­—ç¬¦ä¸²ï¼Œå°±ä¼šæœ‰çº¢è‰²æ³¢æµªçº¿æç¤ºã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/17ecc715b138410988e220dee4c7aaf2~tplv-k3u1fbpfcp-watermark.image?)

Vue ç»„ä»¶ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥é™å®šç»„ä»¶ props çš„ç±»å‹ï¼Œç»„ä»¶çš„ä½¿ç”¨è€…å¦‚æœä¼ å…¥ä¸æ­£ç¡®çš„ç±»å‹ï¼Œå°†ä¼šæœ‰é”™è¯¯æç¤ºï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬ [OpenTiny](https://opentiny.design) çš„ Alert ç»„ä»¶ï¼Œclosable åªèƒ½ä¼ å…¥ Boolean å€¼ï¼Œå¦‚æœä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å°±ä¼šæœ‰é”™è¯¯æç¤ºã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9a5fbf42935486281035cccb2931096~tplv-k3u1fbpfcp-watermark.image?)

2 æç®€ TS åŸºç¡€ï¼Œ5åˆ†é’Ÿå­¦ä¼š
----------------

ä»¥ä¸‹å†…å®¹è™½ç„¶ä¸å¤šï¼Œä½†åŒ…å«äº†å®é™…é¡¹ç›®å¼€å‘ä¸­æœ€å®ç”¨çš„éƒ¨åˆ†ï¼Œå¯¹äº TS å…¥é—¨è€…æ¥è¯´ä¹Ÿæ˜¯èƒ½å¾ˆå¿«å­¦ä¼šçš„ï¼Œå­¦ä¸ä¼šçš„æ‰¾æˆ‘ï¼Œæ‰‹æŠŠæ‰‹æ•™ï¼ŒåŒ…æ•™åŒ…ä¼šï¼Œæœ‰æ‰‹å°±ä¼šå†™ã€‚

### 2.1 åŸºæœ¬ç±»å‹

ç”¨å¾—è¾ƒå¤šçš„ç±»å‹å°±ä¸‹é¢5ä¸ªï¼Œæ›´å¤šç±»å‹è¯·å‚è€ƒï¼š[TSå®˜ç½‘æ–‡æ¡£](https://www.typescriptlang.org/docs/handbook/2/basic-types.html)

*   å¸ƒå°” boolean
*   æ•°å€¼ number
*   å­—ç¬¦ä¸² string
*   ç©ºå€¼ voidï¼šè¡¨ç¤ºæ²¡æœ‰ä»»ä½•è¿”å›å€¼çš„å‡½æ•°
*   ä»»æ„ anyï¼šè¡¨ç¤ºä¸è¢«ç±»å‹æ£€æŸ¥

ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼š

    let isDone: boolean = false;
    
    let myFavoriteNumber: number = 6;
    
    let myName: string = 'Kagol';
    
    function alertName(name: string): void {  
      console.log(`My name is ${name}`);  
    }
    

é»˜è®¤æƒ…å†µä¸‹ï¼Œname ä¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼æˆ string ç±»å‹ï¼Œæ­¤æ—¶å¦‚æœç»™å®ƒèµ‹å€¼ä¸ºä¸€ä¸ª number ç±»å‹çš„å€¼ï¼Œä¼šå‡ºç°é”™è¯¯æç¤ºã€‚

    let name = 'Kagol'  
    name = 6
    

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5576548c27764fa2b6b8011c76ca2e57~tplv-k3u1fbpfcp-watermark.image?)

å¦‚æœç»™ name è®¾ç½® any ç±»å‹ï¼Œè¡¨ç¤ºä¸åšç±»å‹æ£€æŸ¥ï¼Œè¿™æ—¶é”™è¯¯æç¤ºæ¶ˆå¤±ã€‚

    let name: any = 'Kagol'  
    name = 6
    

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/87d302560a7948318b6fefe14f82f5e7~tplv-k3u1fbpfcp-watermark.image?)

### 2.2 å‡½æ•°

ä¸»è¦å®šä¹‰å‡½æ•°å‚æ•°å’Œè¿”å›å€¼ç±»å‹ã€‚

çœ‹ä¸€ä¸‹ä¾‹å­ï¼š

    const sum = (x: number, y: number): number => {  
      return x + y  
    }
    

ä»¥ä¸Šä»£ç åŒ…å«ä»¥ä¸‹ TS æ ¡éªŒè§„åˆ™ï¼š

*   è°ƒç”¨ sum å‡½æ•°æ—¶ï¼Œå¿…é¡»ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œå¤šä¸€ä¸ªæˆ–è€…å°‘ä¸€ä¸ªéƒ½ä¸è¡Œ
*   å¹¶ä¸”è¿™ä¸¤ä¸ªå‚æ•°çš„ç±»å‹è¦ä¸º number ç±»å‹
*   ä¸”å‡½æ•°çš„è¿”å›å€¼ä¸º number ç±»å‹

å°‘å‚æ•°ï¼š

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75df53ee931f472cb009009291d583d1~tplv-k3u1fbpfcp-watermark.image?)

å¤šå‚æ•°ï¼š

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8cdc55e1cdf04e68aedf9e351dcd735b~tplv-k3u1fbpfcp-watermark.image?)

å‚æ•°ç±»å‹é”™è¯¯ï¼š

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a679a107d2f64670a0bd23e1f191cc28~tplv-k3u1fbpfcp-watermark.image?)

è¿”å›å€¼ï¼š

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5105a22702ed461f9a56507b69cfb5d0~tplv-k3u1fbpfcp-watermark.image?)

ç”¨é—®å· `?` å¯ä»¥è¡¨ç¤ºè¯¥å‚æ•°æ˜¯å¯é€‰çš„ã€‚

    const sum = (x: number, y?: number): number => {  
      return x + (y || 0);  
    }  
    
    sum(1)  
    

å¦‚æœå°† y å®šä¹‰ä¸ºå¯é€‰å‚æ•°ï¼Œåˆ™è°ƒç”¨ sum å‡½æ•°æ—¶å¯ä»¥åªä¼ å…¥ä¸€ä¸ªå‚æ•°ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯é€‰å‚æ•°å¿…é¡»æ¥åœ¨å¿…éœ€å‚æ•°åé¢ã€‚æ¢å¥è¯è¯´ï¼Œå¯é€‰å‚æ•°åé¢ä¸å…è®¸å†å‡ºç°å¿…éœ€å‚æ•°äº†ã€‚

ç»™ y å¢åŠ é»˜è®¤å€¼ 0 ä¹‹åï¼Œy ä¼šè‡ªåŠ¨ç±»å‹æ¨å¯¼æˆ number ç±»å‹ï¼Œä¸éœ€è¦åŠ  number ç±»å‹ï¼Œå¹¶ä¸”ç”±äºæœ‰é»˜è®¤å€¼ï¼Œä¹Ÿä¸éœ€è¦åŠ å¯é€‰å‚æ•°ã€‚

    const sum = (x: number, y = 0): number => {  
      return x + y  
    }
    
    sum(1)  
    sum(1, 2)  
    

### 2.3 æ•°ç»„

æ•°ç»„ç±»å‹æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹å¼ï¼š

*   `ç±»å‹ + æ–¹æ‹¬å·` è¡¨ç¤ºæ³•
*   `æ³›å‹` è¡¨ç¤ºæ³•

    // `ç±»å‹ + æ–¹æ‹¬å·` è¡¨ç¤ºæ³•
    let fibonacci: number[] = [1, 1, 2, 3, 5]
    
    // æ³›å‹è¡¨ç¤ºæ³•
    let fibonacci: Array<number> = [1, 1, 2, 3, 5]
    

è¿™ä¸¤ç§éƒ½å¯ä»¥è¡¨ç¤ºæ•°ç»„ç±»å‹ï¼Œçœ‹è‡ªå·±å–œå¥½è¿›è¡Œé€‰æ‹©å³å¯ã€‚

å¦‚æœæ˜¯ç±»æ•°ç»„ï¼Œåˆ™ä¸å¯ä»¥ç”¨æ•°ç»„çš„æ–¹å¼å®šä¹‰ç±»å‹ï¼Œå› ä¸ºå®ƒä¸æ˜¯çœŸçš„æ•°ç»„ï¼Œéœ€è¦ç”¨ interface è¿›è¡Œå®šä¹‰

    
    interface IArguments {
    Â  [index: number]: any;
    Â  length: number;
    Â  callee: Function;
    }
    
    function sum() {
    Â  let args: IArguments = arguments
    }
    

`IArguments` ç±»å‹å·²åœ¨ TypeScript ä¸­å†…ç½®ï¼Œç±»ä¼¼çš„è¿˜æœ‰å¾ˆå¤šï¼š

    let body: HTMLElement = document.body;
    
    let allDiv: NodeList = document.querySelectorAll('div');
    
    document.addEventListener('click', function(e: MouseEvent) {
    Â  // Do something
    });
    

å¦‚æœæ•°ç»„é‡Œçš„å…ƒç´ ç±»å‹å¹¶ä¸éƒ½æ˜¯ç›¸åŒçš„æ€ä¹ˆåŠå‘¢ï¼Ÿ

è¿™æ—¶ any ç±»å‹å°±å‘æŒ¥ä½œç”¨å•¦å•¦

    let list: any[] = ['OpenTiny', 112, { website: 'https://opentiny.design/' }];
    

### 2.4 æ¥å£

æ¥å£ç®€å•ç†è§£å°±æ˜¯ä¸€ä¸ªå¯¹è±¡çš„â€œè½®å»“â€

    interface IResourceItem {
    Â  name: string;
    Â  value?: string | number;
    Â  total?: number;
    Â  checked?: boolean;
    }
    

æ¥å£æ˜¯å¯ä»¥ç»§æ‰¿æ¥å£çš„

    interface IClosableResourceItem extends IResourceItem {
    Â  closable?: boolean;
    }
    

è¿™æ · IClosableResourceItem å°±åŒ…å«äº† IResourceItem å±æ€§å’Œè‡ªå·±çš„ closable å¯é€‰å±æ€§ã€‚

æ¥å£ä¹Ÿæ˜¯å¯ä»¥è¢«ç±»å®ç°çš„

    interface Alarm {
    Â  alert(): void;
    }
    
    class Door {
    }
    
    class SecurityDoor extends Door implements Alarm {
    Â  alert() {
    Â  Â  console.log('SecurityDoor alert')
    Â  }
    }
    
    

å¦‚æœç±»å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œå´ä¸å†™å…·ä½“çš„å®ç°ä»£ç ï¼Œåˆ™ä¼šæœ‰é”™è¯¯æç¤º

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b891a77be1944ceb90f8884bc637d1a8~tplv-k3u1fbpfcp-watermark.image?)

### 2.5 è”åˆç±»å‹ & ç±»å‹åˆ«å

è”åˆç±»å‹æ˜¯æŒ‡å–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ï¼Œè€Œç±»å‹åˆ«åå¸¸ç”¨äºè”åˆç±»å‹ã€‚

çœ‹ä»¥ä¸‹ä¾‹å­ï¼š

    // è”åˆç±»å‹
    let myFavoriteNumber: string | number
    myFavoriteNumber = 'six'
    myFavoriteNumber = 6
    
    // ç±»å‹åˆ«å
    type FavoriteNumber = string | number
    let myFavoriteNumber: FavoriteNumber
    

å½“ TypeScript ä¸ç¡®å®šä¸€ä¸ªè”åˆç±»å‹çš„å˜é‡åˆ°åº•æ˜¯å“ªä¸ªç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®æ­¤è”åˆç±»å‹çš„æ‰€æœ‰ç±»å‹é‡Œå…±æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼š

    function getLength(something: string | number): number {
    Â  return something.length
    }
    
    // index.ts(2,22): error TS2339: Property 'length' does not exist on type 'string | number'.
    // Â  Property 'length' does not exist on type 'number'.
    

ä¸Šä¾‹ä¸­ï¼Œlength ä¸æ˜¯ string å’Œ number çš„å…±æœ‰å±æ€§ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚

è®¿é—® string å’Œ number çš„å…±æœ‰å±æ€§æ˜¯æ²¡é—®é¢˜çš„ï¼š

    function getString(something: string | number): string {
    Â  return something.toString()
    }
    

### 2.6 ç±»å‹æ–­è¨€

ç±»å‹æ–­è¨€ï¼ˆType Assertionï¼‰å¯ä»¥ç”¨æ¥æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ªå€¼çš„ç±»å‹ã€‚

è¯­æ³•ï¼šå€¼ as ç±»å‹ï¼Œæ¯”å¦‚ï¼š`(animal as Fish).swim()`

ç±»å‹æ–­è¨€ä¸»è¦æœ‰ä»¥ä¸‹ç”¨é€”ï¼š

*   å°†ä¸€ä¸ªè”åˆç±»å‹æ–­è¨€ä¸ºå…¶ä¸­ä¸€ä¸ªç±»å‹
*   å°†ä¸€ä¸ªçˆ¶ç±»æ–­è¨€ä¸ºæ›´åŠ å…·ä½“çš„å­ç±»
*   å°†ä»»ä½•ä¸€ä¸ªç±»å‹æ–­è¨€ä¸º any
*   å°† any æ–­è¨€ä¸ºä¸€ä¸ªå…·ä½“çš„ç±»å‹

æˆ‘ä»¬ä¸€ä¸ªä¸ªæ¥çœ‹ã€‚

ç”¨é€”1ï¼šå°†ä¸€ä¸ªè”åˆç±»å‹æ–­è¨€ä¸ºå…¶ä¸­ä¸€ä¸ªç±»å‹

    interface Cat {
    Â  name: string;
    Â  run(): void;
    }
    
    interface Fish {
    Â  name: string;
    Â  swim(): void;
    }
    
    const animal: Cat | Fish = new Animal()
    animal.swim()
    

animal æ˜¯ä¸€ä¸ªè”åˆç±»å‹ï¼Œå¯èƒ½æ˜¯çŒ« Catï¼Œä¹Ÿå¯èƒ½æ˜¯é±¼ Fishï¼Œå¦‚æœç›´æ¥è°ƒç”¨ swim æ–¹æ³•æ˜¯è¦å‡ºç°é”™è¯¯æç¤ºçš„ï¼Œå› ä¸ºçŒ«ä¸ä¼šæ¸¸æ³³ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b9b5a03b530446aa9376be78b1e7f5d~tplv-k3u1fbpfcp-watermark.image?)

è¿™æ—¶ç±»å‹æ–­è¨€å°±æ´¾ä¸Šç”¨åœºå•¦å•¦ï¼Œå› ä¸ºè°ƒç”¨çš„æ˜¯ swim æ–¹æ³•ï¼Œé‚£è‚¯å®šæ˜¯é±¼ï¼Œæ‰€ä»¥ç›´æ¥æ–­è¨€ä¸º Fish å°±ä¸ä¼šå‡ºç°é”™è¯¯æç¤ºã€‚

    const animal: Cat | Fish = new Animal()
    (animal as Fish).swim()
    

ç”¨é€”2ï¼šå°†ä¸€ä¸ªçˆ¶ç±»æ–­è¨€ä¸ºæ›´åŠ å…·ä½“çš„å­ç±»

    
    class ApiError extends Error {
    Â  code: number = 0;
    }
    
    class HttpError extends Error {
    Â  statusCode: number = 200;
    }
    
    function isApiError(error: Error) {
    Â  if (typeof (error as ApiError).code === 'number') {
    Â  Â  return true;
    Â  }
    Â  return false;
    }
    

ApiError å’Œ HttpError éƒ½ç»§æ‰¿è‡ª Error çˆ¶ç±»ï¼Œerror å˜é‡çš„ç±»å‹æ˜¯ Errorï¼Œå»å– code å˜é‡è‚¯å®šæ˜¯ä¸è¡Œï¼Œå› ä¸ºå–çš„æ˜¯ code å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ–­è¨€ä¸º ApiError ç±»å‹ã€‚

ç”¨é€”3ï¼šå°†ä»»ä½•ä¸€ä¸ªç±»å‹æ–­è¨€ä¸º any

è¿™ä¸ªéå¸¸æœ‰ç”¨ï¼Œçœ‹ä¸€ä¸‹ä¾‹å­ï¼š

    function getCacheData(key: string): any {
    Â  return (window as any).cache[key];
    }
    
    interface Cat {
    Â  name: string;
    Â  run(): void;
    }
    
    const tom = getCacheData('tom') as Cat;
    

getCacheData æ˜¯ä¸€ä¸ªå†å²é—ç•™å‡½æ•°ï¼Œä¸æ˜¯ä½ å†™çš„ï¼Œç”±äºä»–è¿”å› any ç±»å‹ï¼Œå°±ç­‰äºæ”¾å¼ƒäº† TS çš„ç±»å‹æ£€éªŒï¼Œå‡å¦‚ tom æ˜¯ä¸€åªçŒ«ï¼Œé‡Œé¢æœ‰ name å±æ€§å’Œ `run()` æ–¹æ³•ï¼Œä½†ç”±äºè¿”å› any ç±»å‹ï¼Œ`tom.` æ˜¯æ²¡æœ‰ä»»ä½•æç¤ºçš„ã€‚

å¦‚æœå°†å…¶æ–­è¨€ä¸º Cat ç±»å‹ï¼Œå°±å¯ä»¥ `ç‚¹` å‡º name å±æ€§å’Œ `run()` æ–¹æ³•ã€‚

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4912680d794b48b1b6f6e946568b7323~tplv-k3u1fbpfcp-watermark.image?)

ç”¨é€”4ï¼šå°† any æ–­è¨€ä¸ºä¸€ä¸ªå…·ä½“çš„ç±»å‹

è¿™ä¸ªæ¯”è¾ƒå¸¸è§çš„åœºæ™¯æ˜¯ç»™ window æŒ‚åœ¨ä¸€ä¸ªè‡ªå·±çš„å˜é‡å’Œæ–¹æ³•ã€‚

    window.foo = 1;
    
    // index.ts:1:8 - error TS2339: Property 'foo' does not exist on type 'Window & typeof globalThis'.
    
    (window as any).foo = 1;
    
    

ç”±äº window ä¸‹æ²¡æœ‰ foo å˜é‡ï¼Œç›´æ¥èµ‹å€¼ä¼šæœ‰é”™è¯¯æç¤ºï¼Œå°† window æ–­è¨€ä¸º any å°±æ²¡é—®é¢˜å•¦å•¦ã€‚

### 2.7 å…ƒç»„

æ•°ç»„åˆå¹¶äº†ç›¸åŒç±»å‹çš„å¯¹è±¡ï¼Œè€Œå…ƒç»„ï¼ˆTupleï¼‰åˆå¹¶äº†ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚

    let tom: [string, number] = ['Tom', 25];
    

ç»™å…ƒç»„ç±»å‹èµ‹å€¼æ—¶ï¼Œæ•°ç»„æ¯ä¸€é¡¹çš„ç±»å‹éœ€è¦å’Œå…ƒç»„å®šä¹‰çš„ç±»å‹å¯¹åº”ä¸Šã€‚

å½“èµ‹å€¼æˆ–è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ æ—¶ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹ï¼š

    let tom: [string, number];
    
    tom[0] = 'Tom';
    tom[1] = 25;
    
    tom[0].slice(1);
    tom[1].toFixed(2);
    

ä¹Ÿå¯ä»¥åªèµ‹å€¼å…¶ä¸­ä¸€é¡¹ï¼š

    let tom: [string, number];
    tom[0] = 'Tom';
    

ä½†æ˜¯å½“ç›´æ¥å¯¹å…ƒç»„ç±»å‹çš„å˜é‡è¿›è¡Œåˆå§‹åŒ–æˆ–è€…èµ‹å€¼çš„æ—¶å€™ï¼Œéœ€è¦æä¾›æ‰€æœ‰å…ƒç»„ç±»å‹ä¸­æŒ‡å®šçš„é¡¹ã€‚

    let tom: [string, number];
    tom = ['Tom'];
    // Property '1' is missing in type '[string]' but required in type '[string, number]'.
    

å½“æ·»åŠ è¶Šç•Œçš„å…ƒç´ æ—¶ï¼Œå®ƒçš„ç±»å‹ä¼šè¢«é™åˆ¶ä¸ºå…ƒç»„ä¸­æ¯ä¸ªç±»å‹çš„è”åˆç±»å‹ï¼š

    let tom: [string, number];
    tom = ['Tom', 25];
    tom.push('male');
    
    tom.push(true);
    // Argument of type 'true' is not assignable to parameter of type 'string | number'.
    

push å­—ç¬¦ä¸²å’Œæ•°å­—éƒ½å¯ä»¥ï¼Œå¸ƒå°”å°±ä¸è¡Œã€‚

### 2.8 æšä¸¾

æšä¸¾ï¼ˆEnumï¼‰ç±»å‹ç”¨äºå–å€¼è¢«é™å®šåœ¨ä¸€å®šèŒƒå›´å†…çš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸€å‘¨åªèƒ½æœ‰ä¸ƒå¤©ï¼Œé¢œè‰²é™å®šä¸ºçº¢ç»¿è“ç­‰ã€‚

    enum Days {Sun, Mon, Tue, Wed, Thu, Fri, Sat}
    

æšä¸¾æˆå‘˜ä¼šè¢«èµ‹å€¼ä¸ºä» 0 å¼€å§‹é€’å¢çš„æ•°å­—ï¼ŒåŒæ—¶ä¹Ÿä¼šå¯¹æšä¸¾å€¼åˆ°æšä¸¾åè¿›è¡Œåå‘æ˜ å°„ï¼š

    console.log(Days.Sun === 0) // true
    console.log(Days[0] === 'Sun') // true
    console.log('Days', Days)
    

æ‰‹åŠ¨èµ‹å€¼ï¼šæœªæ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹ä¼šæ¥ç€ä¸Šä¸€ä¸ªæšä¸¾é¡¹é€’å¢ã€‚

    enum Days {Sun = 7, Mon = 1, Tue, Wed, Thu, Fri, Sat}
    

### 2.9 ç±»

ç»™ç±»åŠ ä¸Š TypeScript çš„ç±»å‹å¾ˆç®€å•ï¼Œä¸æ¥å£ç±»ä¼¼ï¼š

    class Animal {
    Â  name: string
    Â  constructor(name: string) {
    Â  Â  this.name = name
    Â  }
    Â  sayHi(welcome: string): string {
    Â  Â  return `${welcome} My name is ${this.name}`
    Â  }
    }
    

ç±»çš„è¯­æ³•æ¶‰åŠåˆ°è¾ƒå¤šæ¦‚å¿µï¼Œè¯·å‚è€ƒï¼š

*   [https://es6.ruanyifeng.com/#docs/class](https://es6.ruanyifeng.com/#docs/class)
*   [https://ts.xcatliu.com/advanced/class.html](https://ts.xcatliu.com/advanced/class.html)

### 2.10 æ³›å‹

æ³›å‹ï¼ˆGenericsï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§ã€‚

å¯ä»¥ç®€å•ç†è§£ä¸ºå®šä¹‰å‡½æ•°æ—¶çš„å½¢å‚ã€‚

è®¾æƒ³ä»¥ä¸‹åœºæ™¯ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª print å‡½æ•°ï¼Œè¾“å…¥ä»€ä¹ˆï¼ŒåŸæ ·æ‰“å°ï¼Œå‡½æ•°çš„å…¥å‚å’Œè¿”å›å€¼ç±»å‹æ˜¯ä¸€è‡´çš„ã€‚

ä¸€å¼€å§‹åªéœ€è¦æ‰“å°å­—ç¬¦ä¸²ï¼š

    function print(arg: string): string {
    Â  return arg
    }
    

åé¢éœ€æ±‚å˜äº†ï¼Œé™¤äº†èƒ½æ‰“å°å­—ç¬¦ä¸²ï¼Œè¿˜è¦èƒ½æ‰“å°æ•°å­—ï¼š

    function print(arg: string | number): string | number {
    Â  return arg
    }
    

å‡å¦‚éœ€æ±‚åˆå˜äº†ï¼Œè¦æ‰“å°å¸ƒå°”å€¼ã€å¯¹è±¡ã€æ•°ç»„ï¼Œç”šè‡³è‡ªå®šä¹‰çš„ç±»å‹ï¼Œæ€ä¹ˆåŠï¼Œå†™ä¸€ä¸²è”åˆç±»å‹ï¼Ÿæ˜¾ç„¶æ˜¯ä¸å¯å–çš„ï¼Œç”¨ anyï¼Ÿé‚£å°±å¤±å»äº† TS ç±»å‹æ ¡éªŒèƒ½åŠ›ï¼Œæ²¦ä¸º JSã€‚

function print(arg: any): any {  
Â  return arg  
}

è§£å†³è¿™ä¸ªé—®é¢˜çš„å®Œç¾æ–¹æ³•å°±æ˜¯æ³›å‹ï¼

print åé¢åŠ ä¸Šä¸€å¯¹å°–æ‹¬å·ï¼Œé‡Œé¢å†™ä¸€ä¸ª Tï¼Œè¿™ä¸ª T å°±ç±»ä¼¼æ˜¯ä¸€ä¸ªç±»å‹çš„å½¢å‚ã€‚

è¿™ä¸ªç±»å‹å½¢å‚å¯ä»¥åœ¨å‡½æ•°å…¥å‚é‡Œç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨å‡½æ•°è¿”å›å€¼ä½¿ç”¨ï¼Œç”šè‡³ä¹Ÿå¯ä»¥åœ¨å‡½æ•°ä½“é‡Œé¢çš„å˜é‡ã€å‡½æ•°é‡Œé¢ç”¨ã€‚

    function print<T>(arg: T): T {
    Â  return arg
    }
    

é‚£ä¹ˆå®å‚å“ªé‡Œæ¥ï¼Ÿç”¨çš„æ—¶å€™ä¼ è¿›æ¥ï¼

    const res = print<number>(123)
    

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ³›å‹æ¥çº¦æŸåç«¯æ¥å£å‚æ•°ç±»å‹ã€‚

    import axios from 'axios'
    
    interface API {
    Â  '/book/detail': {
    Â  Â  Â  id: number,
    Â  },
    Â  '/book/comment': {
    Â  Â  Â  id: number
    Â  Â  Â  comment: string
    Â  }
    Â  ...
    }
    
    function request<T extends keyof API>(url: T, obj: API[T]) {
    Â  return axios.post(url, obj)
    }
    
    request('/book/comment', {
    Â  id: 1,
    Â  comment: 'éå¸¸æ£’ï¼'
    })
    

ä»¥ä¸Šä»£ç å¯¹æ¥å£è¿›è¡Œäº†çº¦æŸï¼š

*   url åªèƒ½æ˜¯ API ä¸­å®šä¹‰è¿‡çš„ï¼Œå…¶ä»– url éƒ½ä¼šæç¤ºé”™è¯¯

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2485db8d0ad047a79f0defa846373286~tplv-k3u1fbpfcp-watermark.image?)

*   æ¥å£å‚æ•° obj å¿…é¡»å’Œ url èƒ½å¯¹åº”ä¸Šï¼Œä¸èƒ½å°‘å±æ€§ï¼Œå±æ€§ç±»å‹ä¹Ÿä¸èƒ½é”™

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91a1261517d44802b22ef29d47be6583~tplv-k3u1fbpfcp-watermark.image?)

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bcf9fc556b46435bbaa0dfe29cb9764a~tplv-k3u1fbpfcp-watermark.image?)

è€Œä¸”è°ƒç”¨ request æ–¹æ³•æ—¶ï¼Œä¹Ÿä¼šæç¤º url å¯ä»¥é€‰æ‹©å“ªäº›

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/57f407a7d69d456f9d902cc35467597f~tplv-k3u1fbpfcp-watermark.image?)

å¦‚æœåå°æ”¹äº†æ¥å£å‚æ•°åï¼Œæˆ‘ä»¬ä¸€çœ¼å°±çœ‹å‡ºæ¥äº†ï¼Œéƒ½ä¸ç”¨å»æ‰¾æ¥å£æ–‡æ¡£ï¼Œæ˜¯ä¸æ˜¯å¾ˆå‰å®³ï¼

æ³›å‹çš„ä¾‹å­å‚è€ƒäº†å‰ç«¯é˜¿æ—çš„æ–‡ç« ï¼š

*   [è½»æ¾æ‹¿ä¸‹ TS æ³›å‹](https://juejin.cn/post/7064351631072526350)

3 TS åœ¨ Vue ä¸­çš„å®è·µ
---------------

### 3.1 å®šä¹‰ç»„ä»¶ props çš„ç±»å‹

ä¸ä½¿ç”¨ setup è¯­æ³•ç³–

    export default defineComponent({
      props: {
        items: {
          type: Object as PropType<IResourceItem[]>,
          default() {
            return []
          }
        },
        span: {
          type: Number,
          default: 4
        },
        gap: {
          type: [String, Number] as PropType<string | number>,
          default: '12px'
        },
        block: {
          type: Object as PropType<Component>,
          default: TvpBlock
        },
        beforeClose: Function as PropType<() => boolean>
      }
    })
    

ä½¿ç”¨ setup è¯­æ³•ç³– â€“ runtime å£°æ˜

    import { PropType, Component } from 'vue'
    
    const props = defineProps({
      items: {
        type: Object as PropType<IResourceItem[]>,
        default() {
          return []
        }
      },
      span: {
        type: Number,
        default: 4
      },
      gap: {
        type: [String, Number] as PropType<string | number>,
        default: '12px'
      },
      block: {
        type: Object as PropType<Component>,
        default: TvpBlock
      },
      beforeClose: Function as PropType<() => boolean>
    })
    

ä½¿ç”¨ setup è¯­æ³•ç³– â€“ type-based å£°æ˜

    import { Component, withDefaults } from 'vue'
    
    interface Props {
      items: IResourceItem[]
      span: number
      gap: string | number
      block: Component
      beforeClose: () => void
    }
    
    const props = withDefaults(defineProps<Props>(), {
      items: () => [],
      span: 4,
      gap: '12px',
      block: TvpBlock
    })
    

IResourceItemï¼š

    interface IResourceItem {
      name: string;
      value?: string | number;
      total?: number;
      checked?: boolean;
      closable?: boolean;
    }
    

### 3.2 å®šä¹‰ emits ç±»å‹

ä¸ä½¿ç”¨ setup è¯­æ³•ç³–

    export default defineComponent({
      emits: ['change', 'update'],
      setup(props, { emit }) {
        emit('change')
      }
    })
    

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/26fccfbbb5554f168008ed18e25087d3~tplv-k3u1fbpfcp-watermark.image?)

ä½¿ç”¨ setup è¯­æ³•ç³–

    <script setup lang="ts">
    // runtime
    const emit = defineEmits(['change', 'update'])
    
    // type-based
    const emit = defineEmits<{
      (e: 'change', id: number): void
      (e: 'update', value: string): void
    }>()
    </script>
    

### 3.3 å®šä¹‰ ref ç±»å‹

é»˜è®¤ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æ¨å¯¼

    import { ref } from 'vue'
    
    // inferred type: Ref<number>
    const year = ref(2020)
    
    // => TS Error: Type 'string' is not assignable to type 'number'.
    year.value = '2020'
    

ä¸¤ç§å£°æ˜ ref ç±»å‹çš„æ–¹æ³•

    import { ref } from 'vue'
    import type { Ref } from 'vue'
    
    // æ–¹å¼ä¸€
    const year: Ref<string | number> = ref('2020')
    year.value = 2020 // ok!
    
    // æ–¹å¼äºŒ
    // resulting type: Ref<string | number>
    const year = ref<string | number>('2020')
    year.value = 2020 // ok!
    

### 3.4 å®šä¹‰ reactive ç±»å‹

é»˜è®¤ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æ¨å¯¼

    import { reactive } from 'vue'
    
    // inferred type: { title: string }
    const book = reactive({ title: 'Vue 3 Guide' })
    

ä½¿ç”¨æ¥å£å®šä¹‰æ˜ç¡®çš„ç±»å‹

    import { reactive } from 'vue'
    
    interface Book {
      title: string
      year?: number
    }
    
    const book: Book = reactive({ title: 'Vue 3 Guide' })
    

### 3.5 å®šä¹‰ computed ç±»å‹

é»˜è®¤ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹æ¨å¯¼

    import { ref, computed } from 'vue'
    
    const count = ref(0)
    
    // inferred type: ComputedRef<number>
    const double = computed(() => count.value * 2)
    
    // => TS Error: Property 'split' does not exist on type 'number'
    const result = double.value.split('')
    

ä¸¤ç§å£°æ˜ computed ç±»å‹çš„æ–¹æ³•

    import { ComputedRef, computed } from 'vue'
    
    
    const double: ComputedRef<number> = computed(() => {
      // type error if this doesn't return a number
    })
    
    const double = computed<number>(() => {
      // type error if this doesn't return a number
    })
    

### 3.6 å®šä¹‰ provide/inject ç±»å‹

provide

    import { provide, inject } from 'vue'
    import type { InjectionKey } from 'vue'
    
    // å£°æ˜ provide çš„å€¼ä¸º string ç±»å‹
    const key = Symbol() as InjectionKey<string>
    
    provide(key, 'foo') // providing non-string value will result in error
    

inject

    // è‡ªåŠ¨æ¨å¯¼ä¸º string ç±»å‹
    const foo = inject(key) // type of foo: string | undefined
    // æ˜ç¡®æŒ‡å®šä¸º string ç±»å‹
    const foo = inject<string>('foo') // type: string | undefined
    // å¢åŠ é»˜è®¤å€¼
    const foo = inject<string>('foo', 'bar') // type: string
    // ç±»å‹æ–­è¨€ä¸º string
    const foo = inject('foo') as string
    

### 3.7 å®šä¹‰æ¨¡æ¿å¼•ç”¨çš„ç±»å‹

    <script setup lang="ts">
    import { ref, onMounted } from 'vue'
    const el = ref<HTMLInputElement | null>(null)
    onMounted(() => {
      el.value?.focus()
    })
    </script>
    <template>
      <input ref="el" />
    </template>
    

### 3.8 å®šä¹‰ç»„ä»¶æ¨¡æ¿å¼•ç”¨çš„ç±»å‹

å®šä¹‰ä¸€ä¸ª MyModal ç»„ä»¶

    <!-- MyModal.vue -->
    <script setup lang="ts">
    import { ref } from 'vue'
    
    const isContentShown = ref(false)
    const open = () => (isContentShown.value = true)
    defineExpose({
      open
    })
    </script>
    

åœ¨ App.vue ä¸­å¼•ç”¨ MyModal ç»„ä»¶

    <!-- App.vue -->
    <script setup lang="ts">
    import MyModal from './MyModal.vue'
    
    const modal = ref<InstanceType<typeof MyModal> | null>(null)
    const openModal = () => {
      modal.value?.open()
    }
    </script>
    

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e93a2ca9b954aa18be7efcdecc3e364~tplv-k3u1fbpfcp-watermark.image?)

å‚è€ƒ Vue å®˜ç½‘æ–‡æ¡£ï¼š

*   [TypeScript with Composition API](https://vuejs.org/guide/typescript/composition-api.html)

4 JS é¡¹ç›®è½¬ TS
-----------

è¿˜æ˜¯ä½¿ç”¨ JS çš„åŒå­¦æœ‰ç¦å•¦ï¼ä¸ºäº†è®©å¤§å®¶å¿«é€Ÿç”¨ä¸Š TSï¼Œäº«å— TS çš„ä¸æ»‘ä½“éªŒï¼Œæˆ‘æ•´ç†äº†ä¸€ä»½`ã€ŠJS é¡¹ç›®æ”¹é€ æˆ TS é¡¹ç›®æŒ‡å—ã€‹`ã€‚æœ‰äº†è¿™ä»½æ­¥éª¤æŒ‡å—ï¼ŒJS é¡¹ç›®è½¬ TS ä¸å†æ˜¯éš¾äº‹ï¼

æˆ‘ä»¬æ–°å¼€æºçš„ [TinyVue](https://opentiny.design/tiny-vue) ç»„ä»¶åº“ï¼Œå°±ä½¿ç”¨è¿™ä»½`ã€ŠJS é¡¹ç›®æ”¹é€ æˆ TS é¡¹ç›®æŒ‡å—ã€‹`ï¼ŒæˆåŠŸåœ°ç”± JS é¡¹ç›®æ”¹é€ æˆäº† TS é¡¹ç›®ï¼Œæ‚„æ‚„åœ°å‘Šè¯‰å¤§å®¶ï¼š

*   [TinyVue](https://github.com/opentiny/tiny-vue) æ˜¯ä¸€å¥—è·¨ç«¯ã€è·¨æ¡†æ¶çš„ä¼ä¸šçº§ UI ç»„ä»¶åº“ï¼Œæ”¯æŒ Vue 2 å’Œ Vue 3ï¼Œæ”¯æŒ PC ç«¯å’Œç§»åŠ¨ç«¯ã€‚
*   åœ¨å†…éƒ¨ç»è¿‡9å¹´æŒç»­æ‰“ç£¨ï¼ŒæœåŠ¡äºåä¸ºå†…å¤–éƒ¨ä¸Šåƒä¸ªé¡¹ç›®ã€‚
*   ç›®å‰ä»£ç é‡è¶…è¿‡`10ä¸‡è¡Œ`ã€‚

è¿™ä¹ˆåºå¤§çš„ä»£ç é‡éƒ½èƒ½ä» JS è½¬ TSï¼Œå…¶ä»–å°è§„æ¨¡çš„é¡¹ç›®æ›´æ˜¯ä¸åœ¨è¯ä¸‹ã€‚

ä¸ºäº†éªŒè¯è‡ªå·±çš„çŒœæƒ³ï¼Œæˆ‘åˆåœ¨ GitHub æ‰¾åˆ°äº†ä¸€ä¸ª6å¹´å‰çš„ Vue2 + JS é¡¹ç›®ï¼Œç›®å‰æ—©å·²ä¸å†ç»´æŠ¤ï¼Œæ‰“ç®—å°è¯•å°†å…¶æ”¹é€ æˆ TS é¡¹ç›®ï¼Œç»“æœæŒ‰ç…§è¿™ä»½æŒ‡å—ï¼Œ1ä¸ªå°æ—¶ä¸ç”¨å°±æå®šå•¦å•¦

[https://github.com/liangxiaojuan/vue-todos](https://github.com/liangxiaojuan/vue-todos)

è¿™ä¸ªé¡¹ç›®çš„æ•ˆæœå›¾é•¿è¿™æ ·ï¼š

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58afe2ae92e5403aa03fcf2fb431e821~tplv-k3u1fbpfcp-watermark.image?)

æˆ‘å·²ç»æäº† issueï¼Œçœ‹ä¸‹ä½œè€…æ˜¯å¦åŒæ„æ”¹é€ æˆ TSï¼ŒåŒæ„çš„è¯ï¼Œæˆ‘ç«‹é©¬å°±æ˜¯ä¸€ä¸ª PR è¿‡å»ï¼

è¯ä¸å¤šè¯´ï¼Œå¤§å®¶æœ‰éœ€è¦çš„ï¼Œå¯ç›´æ¥æ‹¿èµ°ï¼

### ã€ŠJS é¡¹ç›®æ”¹é€ æˆ TS é¡¹ç›®æŒ‡å—ã€‹

JS é¡¹ç›®æ”¹é€ æˆ TS æ­¥éª¤ï¼š

1.  å®‰è£… TSï¼š`npm i typescript ts-loader -D`
2.  å¢åŠ  TS é…ç½®æ–‡ä»¶ï¼š`tsconfig.json`
3.  ä¿®æ”¹æ–‡ä»¶åç¼€åï¼š`x.js -> x.ts`
4.  `x.vue` æ–‡ä»¶å¢åŠ  langï¼š`<script lang="ts">`
5.  `vite.config.js` é…ç½®åç¼€å
6.  å‡çº§ä¾èµ–ï¼Œä¿®æ”¹æœ¬åœ°å¯åŠ¨å’Œæ„å»ºè„šæœ¬
7.  æ·»åŠ  `loader` / `plugin` ç­‰
8.  é€æ­¥è¡¥å……ç±»å‹å£°æ˜

tsconfig.ts

    {
      "compilerOptions": {
        "target": "ESNext",
        "useDefineForClassFields": true,
        "module": "ESNext",
        "moduleResolution": "Node",
        "strict": true,
        "jsx": "preserve",
        "sourceMap": true,
        "resolveJsonModule": true,
        "isolatedModules": true,
        "esModuleInterop": true,
        "lib": ["ESNext", "DOM"],
        "skipLibCheck": true
      },
      "include": [
        "src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"
      ]
    }
    

é…ç½®æ–‡ä»¶åç¼€åï¼Œå¢åŠ  `.ts` å’Œ `.tsx`

    extensions: ['.js', '.vue', '.json', '.ts', 'tsx'],
    

å…¥å£æ–‡ä»¶è¦ç”± `main.js` æ”¹æˆ `main.ts`

    entry: {
      app: './src/main.ts'
    },
    

éœ€è¦é…ç½®ä¸‹ loader

    {
    Â  test: /\.tsx?$/,
    Â  loader: 'ts-loader',
    Â  exclude: /node_modules/,
    Â  options: {
    Â  Â  appendTsSuffixTo: [/\.vue$/]
    Â  },
    Â  include: [resolve('src')]
    }
    

ä»¥åŠ plugin

    const { VueLoaderPlugin } = require('vue-loader')
    
    plugins: [
      new VueLoaderPlugin()
    ],
    

å®Œæˆä¹‹åï¼Œå…ˆæµ‹è¯•ä¸‹é¡¹ç›®æ˜¯å¦èƒ½æ­£å¸¸å¯åŠ¨å’Œæ„å»ºï¼š`npm run dev` / `npm run build`

éƒ½æ²¡é—®é¢˜ä¹‹åï¼Œæœ¬æ¬¡ TS é¡¹ç›®æ”¹é€ å°±å®Œæˆå¤§éƒ¨åˆ†å•¦å•¦ï¼

åç»­å°±æ˜¯é€æ­¥è¡¥å……ä»£ç æ¶‰åŠåˆ°çš„å˜é‡å’Œå‡½æ•°çš„ç±»å‹å£°æ˜å³å¯ã€‚

æ”¹é€ è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æ¬¢è¿ç•™è¨€è®¨è®ºï¼Œå¸Œæœ›ä½ ä¹Ÿèƒ½å°½å¿«äº«å— TS çš„ä¸æ»‘å¼€å‘è€…ä½“éªŒï¼

TinyVue æ‹›å‹Ÿè´¡çŒ®è€…å•¦
--------------

å¦‚æœä½ å¯¹æˆ‘ä»¬çš„è·¨ç«¯è·¨æ¡†æ¶ç»„ä»¶åº“ [TinyVue](https://github.com/opentiny/tiny-vue) æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å‚ä¸åˆ°æˆ‘ä»¬çš„å¼€æºç¤¾åŒºä¸­æ¥ï¼Œä¸€èµ·å°†å®ƒå»ºè®¾å¾—æ›´å¥½ï¼

å‚ä¸ TinyVue ç»„ä»¶åº“å»ºè®¾ï¼Œä½ å°†æ”¶è·ï¼š

ç›´æ¥çš„ä»·å€¼ï¼š

*   é€šè¿‡æ‰“é€ ä¸€ä¸ªè·¨ç«¯ã€è·¨æ¡†æ¶çš„ç»„ä»¶åº“é¡¹ç›®ï¼Œå­¦ä¹ æœ€æ–°çš„ `Monorepo` + `Vite` + `Vue3` + `TypeScript` æŠ€æœ¯
*   å­¦ä¹ ä» 0 åˆ° 1 æ­å»ºä¸€ä¸ªè‡ªå·±çš„ç»„ä»¶åº“çš„æ•´å¥—æµç¨‹å’Œæ–¹æ³•è®ºï¼ŒåŒ…æ‹¬ç»„ä»¶åº“å·¥ç¨‹åŒ–ã€ç»„ä»¶çš„è®¾è®¡å’Œå¼€å‘ç­‰
*   ä¸ºè‡ªå·±çš„ç®€å†å’ŒèŒä¸šç”Ÿæ¶¯æ·»å½©ï¼Œå‚ä¸è¿‡ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œè¿™æœ¬èº«å°±æ˜¯å—é¢è¯•å®˜é’ççš„äº®ç‚¹
*   ç»“è¯†ä¸€ç¾¤ä¼˜ç§€çš„ã€çƒ­çˆ±å­¦ä¹ ã€çƒ­çˆ±å¼€æºçš„å°ä¼™ä¼´ï¼Œå¤§å®¶ä¸€èµ·æ‰“é€ ä¸€ä¸ªä¼Ÿå¤§çš„äº§å“

é•¿è¿œçš„ä»·å€¼ï¼š

*   æ‰“é€ ä¸ªäººå“ç‰Œï¼Œæå‡ä¸ªäººå½±å“åŠ›
*   åŸ¹å…»è‰¯å¥½çš„ç¼–ç ä¹ æƒ¯
*   è·å¾—åä¸ºäº‘ [OpenTiny](https://opentiny.design/) å¼€æºç¤¾åŒºçš„è£èª‰&è®¤å¯å’Œå®šåˆ¶å°ç¤¼ç‰©
*   æˆä¸º PMC & Committer ä¹‹åè¿˜èƒ½å‚ä¸ OpenTiny æ•´ä¸ªå¼€æºç”Ÿæ€çš„å†³ç­–å’Œé•¿è¿œè§„åˆ’ï¼ŒåŸ¹å…»è‡ªå·±çš„ç®¡ç†å’Œè§„åˆ’èƒ½åŠ›  
    æœªæ¥æœ‰æ›´å¤šæœºä¼šå’Œå¯èƒ½

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ed49b40da291491586b54e82c159826d~tplv-k3u1fbpfcp-watermark.image?)

å¾€æœŸæ´»åŠ¨ç¤¼å“åŠè´¡çŒ®è€…çš„åé¦ˆï¼š

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f3ba8b65600b47feaf49e2035cac9ab3~tplv-k3u1fbpfcp-watermark.image?)

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18d1b463adff4c9c95efdc1997bccd5f~tplv-k3u1fbpfcp-watermark.image?)

è”ç³»æˆ‘ä»¬
----

å¦‚æœä½ å¯¹æˆ‘ä»¬ [OpenTiny](https://opentiny.design/) çš„å¼€æºé¡¹ç›®æ„Ÿå…´è¶£ï¼Œæ¬¢è¿æ·»åŠ å°åŠ©æ‰‹å¾®ä¿¡ï¼šopentiny-officialï¼Œæ‹‰ä½ è¿›ç¾¤ï¼Œä¸€èµ·äº¤æµå‰ç«¯æŠ€æœ¯ï¼Œä¸€èµ·ç©å¼€æºã€‚

å®˜ç½‘ï¼š[https://opentiny.design/](https://opentiny.design/)

GitHubä»“åº“ï¼š[https://github.com/opentiny/](https://github.com/opentiny)

TinyVueï¼š[https://github.com/opentiny/tiny-vue](https://github.com/opentiny/tiny-vue)ï¼ˆæ¬¢è¿ Star ğŸŒŸï¼‰