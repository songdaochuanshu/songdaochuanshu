---
layout: post
title: "Java开发学习(四十五)----MyBatisPlus查询语句之映射匹配兼容性"
date: "2022-11-29T16:25:15.334Z"
---
Java开发学习(四十五)----MyBatisPlus查询语句之映射匹配兼容性
========================================

### 1、映射匹配兼容性

我们已经能从表中查询出数据，并将数据封装到模型类中，这整个过程涉及到一张表和一个模型类:

![](https://img2022.cnblogs.com/blog/1126989/202207/1126989-20220714204151476-268354995.png)

之所以数据能够成功的从表中获取并封装到模型对象中，原因是表的字段列名和模型类的属性名一样。那么问题就来了:

#### 问题1:表字段与编码属性设计不同步

当表的列名和模型类的属性名发生不一致，就会导致数据封装不到模型对象，这个时候就需要其中一方做出修改，那如果前提是两边都不能改又该如何解决?

MyBatisPlus给我们提供了一个注解`@TableField`,使用该注解可以实现模型类属性名和表的列名之间的映射关系

![](https://img2022.cnblogs.com/blog/1126989/202207/1126989-20220714204216129-1268050659.png)

#### 问题2:编码中添加了数据库中未定义的属性

当模型类中多了一个数据库表不存在的字段，就会导致生成的sql语句中在select的时候查询了数据库不存在的字段，程序运行就会报错，错误信息为:

**Unknown column '多出来的字段名称' in 'field list'**

具体的解决方案用到的还是`@TableField`注解，它有一个属性叫`exist`，设置该字段是否在数据库表中存在，如果设置为false则不存在，生成sql语句查询的时候，就不会再查询该字段了。

![](https://img2022.cnblogs.com/blog/1126989/202207/1126989-20220714204255348-1248574414.png)

#### 问题3：采用默认查询开放了更多的字段查看权限

查询表中所有的列的数据，就可能把一些敏感数据查询到返回给前端，这个时候我们就需要限制哪些字段默认不要进行查询。解决方案是`@TableField`注解的一个属性叫`select`，该属性设置默认是否需要查询该字段的值，true(默认值)表示默认查询该字段，false表示默认不查询该字段。

![](https://img2022.cnblogs.com/blog/1126989/202207/1126989-20220714204318233-759319375.png)

#### 知识点1：@TableField

名称

@TableField

类型

**属性注解**

位置

模型类属性定义上方

作用

设置当前属性对应的数据库表中的字段关系

相关属性

value(默认)：设置数据库表字段名称 exist:设置属性在数据库表字段中是否存在，默认为true，此属性不能与value合并使用 select:设置属性是否参与查询，此属性与select()映射配置不冲突

#### 问题4:表名与编码开发设计不同步

该问题主要是表的名称和模型类的名称不一致，导致查询失败，这个时候通常会报如下错误信息:

**Table 'databaseName.tableName' doesn't exist**,翻译过来就是数据库中的表不存在。

![](https://img2022.cnblogs.com/blog/1126989/202207/1126989-20220714204425741-821268004.png)

解决方案是使用MyBatisPlus提供的另外一个注解`@TableName`来设置表与模型类之间的对应关系。

![](https://img2022.cnblogs.com/blog/1126989/202207/1126989-20220714204452728-1107773690.png)

#### 知识点2：@TableName

名称

@TableName

类型

**类注解**

位置

模型类定义上方

作用

设置当前类对应于数据库表关系

相关属性

value(默认)：设置数据库表名称

本文来自博客园，作者：[|旧市拾荒|](https://www.cnblogs.com/xiaoyh/)，转载请注明原文链接：[https://www.cnblogs.com/xiaoyh/p/16468199.html](https://www.cnblogs.com/xiaoyh/p/16468199.html)