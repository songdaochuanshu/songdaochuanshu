---
layout: post
title: " ä½¿ç”¨â€œçº¯â€Servletåšä¸€ä¸ªå•è¡¨çš„CRUDæ“ä½œ"
date: "2023-04-11T01:05:03.757Z"
---
ä½¿ç”¨â€œçº¯â€Servletåšä¸€ä¸ªå•è¡¨çš„CRUDæ“ä½œ
========================

ä½¿ç”¨â€œçº¯â€Servletåšä¸€ä¸ªå•è¡¨çš„CRUDæ“ä½œ
------------------------

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718893-1017227300.png)

æ¯åšä¸€æ–‡æ¡ˆ
-----

    åº„å­è¯´:"ç‹¬å¾€ç‹¬æ¥ï¼Œæ˜¯è°“ç‹¬æœ‰ã€‚ç‹¬æœ‰ä¹‹äººï¼Œæ˜¯è°“è‡³è´µ"ã€‚çƒ­é—¹æ˜¯åˆ«äººçš„ç‹‚æ¬¢ï¼Œè€Œå­¤ç‹¬æ˜¯è‡ªå·±çš„è‡ªç”±ã€‚
    ç›¸èšæ€»æ˜¯çŸ­æš‚ï¼Œå”¯å­¤ç‹¬ç»µé•¿ï¼Œå­¦ä¼šå­¤ç‹¬ä¸ºä¼ï¼Œæ‰èƒ½æ‰¾åˆ°æµ®ä¸–æ¸…æ¬¢ã€‚
    é‡‘åº¸æ›¾ç¬”ä¸‹äººç‰©è¯´ï¼š"å¤©ä¸Šçš„ç™½äº‘èšäº†åˆèšï¼Œæ•£äº†åˆæ•£ï¼Œäººç”Ÿç¦»åˆï¼Œäº¦å¤å¦‚æ–¯ã€‚" äººç”Ÿä¸€ä¸–ï¼Œæ‰€æœ‰çš„äººæ¥äººå¾€ï¼Œ
    èšæ•£ç¦»åˆï¼Œéƒ½æ˜¯ç¼˜åˆ†ä½¿ç„¶ã€‚ç¼˜æ¥ä¾¿èšï¼Œç¼˜å°½åˆ™æ•£ï¼Œèšæ˜¯ä¸€å›¢ç«ï¼Œæ•£æ˜¯æ»¡å¤©æ˜Ÿã€‚å¾€åä½™ç”Ÿï¼Œä¸å­¤ç‹¬å’Œè§£ï¼Œåšè‡ªå·±çš„çŸ¥éŸ³ã€‚
    
    éƒ½è¯´å¹¸ç¦çš„æ ·å­åƒç¯‡ä¸€å¾‹ï¼Œä¸å¹¸çš„äººå´å„æœ‰å„çš„ä¸å¹¸ã€‚å¾ˆå¤šäººéƒ½åªèƒ½çœ‹åˆ°åˆ«äººæ‰€æ‹¥æœ‰çš„ï¼Œå´æ²¡çœ‹åˆ°äººæ‰€å¤±å»çš„ã€‚
    æ²¡æœ‰äººçš„ç”Ÿæ´»æ˜¯çœŸæ­£çš„å®¹æ˜“ã€‚å½“ä½ ç«™åœ¨æ¡¥ä¸Šçœ‹é£æ™¯çš„æ—¶å€™ï¼Œå¯èƒ½è‡ªå·±äº¦æ˜¯åˆ«äººçœ¼ä¸­çš„é£æ™¯ã€‚
    æ‰€ä»¥ä¸å¿…ç¾¡æ…•åˆ«äººï¼Œçæƒœç°åœ¨æ‰€æ‹¥æœ‰çš„ï¼Œè¿‡å¥½è‡ªå·±çš„äººç”Ÿæ‰æœ€é‡è¦ã€‚
                     
                                     â€”â€”â€”â€”â€”â€”   ã€Šä¸€ç¦…å¿ƒçµåº™è¯­ã€‹
    

@

ç›®å½•

*   [ä½¿ç”¨â€œçº¯â€Servletåšä¸€ä¸ªå•è¡¨çš„CRUDæ“ä½œ](#ä½¿ç”¨çº¯servletåšä¸€ä¸ªå•è¡¨çš„crudæ“ä½œ)
*   [æ¯åšä¸€æ–‡æ¡ˆ](#æ¯åšä¸€æ–‡æ¡ˆ)
*   [1\. é¡¹ç›®è¯´æ˜](#1-é¡¹ç›®è¯´æ˜)
*   [2\. å…·ä½“å¯¹åº”çš„åŠŸèƒ½çš„ä»£ç å®ç°](#2-å…·ä½“å¯¹åº”çš„åŠŸèƒ½çš„ä»£ç å®ç°)
    *   [2.1 å‡†å¤‡å·¥ä½œï¼š](#21-å‡†å¤‡å·¥ä½œ)
    *   [2.2 æ¨¡å—ç›®å½•ç»“æ„](#22-æ¨¡å—ç›®å½•ç»“æ„)
    *   [2.3 å·¥å…·ç±» DBUtil](#23-å·¥å…·ç±»-dbutil)
    *   [2.4 åŠŸèƒ½ä¸€ï¼š index.html è¯¥é¡¹ç›®çš„æ¬¢è¿é¡µé¢å¦‚ä¸‹ï¼š](#24-åŠŸèƒ½ä¸€-indexhtml-è¯¥é¡¹ç›®çš„æ¬¢è¿é¡µé¢å¦‚ä¸‹)
    *   [2.5 åŠŸèƒ½äºŒï¼šéƒ¨é—¨åˆ—è¡¨ DeptListServlet](#25-åŠŸèƒ½äºŒéƒ¨é—¨åˆ—è¡¨-deptlistservlet)
    *   [2.6 åŠŸèƒ½ä¸‰ï¼šæŸ¥çœ‹éƒ¨é—¨è¯¦æƒ… DeptDetailServlet](#26-åŠŸèƒ½ä¸‰æŸ¥çœ‹éƒ¨é—¨è¯¦æƒ…-deptdetailservlet)
    *   [2.7 åŠŸèƒ½å››ï¼šåˆ é™¤éƒ¨é—¨ DeptDelServlet](#27-åŠŸèƒ½å››åˆ é™¤éƒ¨é—¨-deptdelservlet)
    *   [2.8 åŠŸèƒ½äº”ï¼šæ–°å¢éƒ¨é—¨ DeptSaveServlet](#28-åŠŸèƒ½äº”æ–°å¢éƒ¨é—¨-deptsaveservlet)
    *   [2.9 åŠŸèƒ½å…­ï¼šè·³è½¬åˆ°ä¿®æ”¹éƒ¨é—¨çš„é¡µé¢ DepEditServlet](#29-åŠŸèƒ½å…­è·³è½¬åˆ°ä¿®æ”¹éƒ¨é—¨çš„é¡µé¢-depeditservlet)
    *   [2.10 åŠŸèƒ½ä¸ƒï¼šä¿®æ”¹éƒ¨é—¨ DeptSaveServlet](#210-åŠŸèƒ½ä¸ƒä¿®æ”¹éƒ¨é—¨-deptsaveservlet)
*   [3\. æœ€åçš„ web.xml é…ç½®ä¿¡æ¯](#3-æœ€åçš„-webxml-é…ç½®ä¿¡æ¯)
*   [4\. ä¼˜åŒ–æ–¹æ¡ˆï¼š @WebServlet æ³¨è§£ + æ¨¡æ¿æ–¹æ³•](#4-ä¼˜åŒ–æ–¹æ¡ˆ-webservlet-æ³¨è§£--æ¨¡æ¿æ–¹æ³•)
*   [5\. æ€»ç»“ï¼š](#5-æ€»ç»“)
*   [6\. æœ€åï¼š](#6-æœ€å)

1\. é¡¹ç›®è¯´æ˜
--------

**ä»‹ç»ï¼š** è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ **çº¯ç²¹** çš„ **Servlet** å®Œæˆå•è¡¨ã€å¯¹éƒ¨é—¨çš„ã€‘çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚ï¼ˆB/Sç»“æ„çš„ã€‚ï¼‰

**ç»“æ„å›¾**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718966-1313826760.png)

**åˆå§‹çš„æ¬¢è¿é¡µé¢**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718933-1634407953.png)

**éƒ¨é—¨åˆ—è¡¨é¡µé¢**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718982-758238431.png)

**éƒ¨é—¨è¯¦æƒ…**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718930-901813532.png)

**ä¿®æ”¹éƒ¨é—¨**  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718930-1372465724.png)

**åˆ é™¤éƒ¨é—¨ï¼š**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718909-525950457.png)

**æ–°å¢éƒ¨é—¨ï¼š**

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718931-829699655.png)

2\. å…·ä½“å¯¹åº”çš„åŠŸèƒ½çš„ä»£ç å®ç°
----------------

### 2.1 å‡†å¤‡å·¥ä½œï¼š

1.  é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨æ•°æ®åº“ï¼Œå­˜å‚¨æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ•°æ®åº“æ˜¯ **MYSQL** ã€‚
2.  æˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ªåä¸º `dept`çš„æ•°æ®è¡¨ï¼Œå¹¶æ’å…¥ä¸€äº›æ•°æ®ã€‚

    create table dept (
      depton int primary key,
      dname varchar(255),
      loc varchar(255)
    );
    
    insert into dept(depton,dname,loc) values(10,'xiaoShouBu','BEIJING');
    insert into dept(depton,dname,loc) values(20,'YanFaBu','SHANGHAI');
    insert into dept(depton,dname,loc) values(30,'JisShuBu','GUANGZHOU');
    insert into dept(depton,dname,loc) values(40,'MeiTiBu','SHENZHEN');
    select * from dept;
    

**å°æŠ€å·§ï¼š** MySQL åœ¨ cmd å‘½ä»¤ä¸­ï¼Œæ‰¹é‡æ‰§è¡Œ sqlè¯­å¥çš„æ–¹æ³•ï¼šå¦‚ä¸‹ï¼Œé¦–å…ˆå°†ç¼–å†™å¥½çš„ `.sql` æ–‡ä»¶å­˜å‚¨èµ·æ¥ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718985-354506354.png)

å†æ‰“å¼€cmd è¿›å…¥å‘½ä»¤çª—å£ï¼Œå†è¿›å…¥åˆ°Mysqlå½“ä¸­ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š

    source åæ¥æ–‡ä»¶è·¯å¾„(è¦æ‰§è¡Œçš„æ‰¹é‡çš„.sqlæ–‡ä»¶)
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718916-1996333079.png)

å½“å‰æ•°æ®è¡¨ `dept` çš„ä¿¡æ¯å†…å®¹å¦‚ä¸‹ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718976-1757334761.png)

3.  ä¸ºè¯¥æ¨¡å—å¯¼å…¥ MYSQLçš„ JDBC çš„ `jar` åŒ…ã€‚

**æ³¨æ„ï¼š** å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨ Tomcat æœåŠ¡å™¨å½“ä¸­éƒ¨ç½²é¡¹ç›®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ `WEB-INF` çš„ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `lib` çš„ç›®å½•æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾ç›¸å…³çš„ ä¾èµ–`jar` åŒ…ï¼Œæ³¨æ„è·¯å¾„ä½ç½®ä¸å¯ä»¥ä¿®æ”¹ï¼Œç›®å½•æ–‡ä»¶å¿…é¡»ä¸º `lib` ä¸ç„¶ï¼Œå½“ä½ å¯åŠ¨çš„Tocmat æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•æ‰¾åˆ°è¯¥å¯¹åº”çš„ ä¾èµ–jar åŒ…çš„ã€‚å…·ä½“å¦‚ä¸‹ï¼Œæˆ‘ä»¬å°† Mysqlå¯¹åº”çš„ jdbc jar åŒ…å¯¼å…¥å…¶ä¸­ã€‚

*   åˆ›å»ºä¸€ä¸ªwebappï¼ˆç»™è¿™ä¸ªwebappæ·»åŠ servlet-api.jarå’Œjsp-api.jaråˆ°classpathå½“ä¸­ã€‚ï¼‰
*   å‘webappä¸­æ·»åŠ è¿æ¥æ•°æ®åº“çš„jaråŒ…ï¼ˆmysqlé©±åŠ¨ï¼‰
    *   å¿…é¡»åœ¨WEB-INFç›®å½•ä¸‹æ–°å»ºlibç›®å½•ï¼Œç„¶åå°†mysqlçš„é©±åŠ¨jaråŒ…æ‹·è´åˆ°è¿™ä¸ªlibç›®å½•ä¸‹ã€‚è¿™ä¸ªç›®å½•åå¿…é¡»å«åšlibï¼Œå…¨éƒ¨å°å†™çš„ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718932-982351702.png)

### 2.2 æ¨¡å—ç›®å½•ç»“æ„

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718895-1453177444.png)

### 2.3 å·¥å…·ç±» DBUtil

è¿™é‡Œå› ä¸ºæˆ‘ä»¬è¦è¿æ¥æ•°æ®åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªè¿æ¥Mysql æ•°æ®åº“çš„ å·¥å…·ç±»ï¼Œè¿™é‡Œæˆ‘ä»¬åä¸ºä¸€ä¸ª `DBUtil` çš„å·¥å…·ç±»ã€‚

è¿™é‡Œæˆ‘ä»¬é€šè¿‡è¯»å–é…ç½®`jdbc.properties`çš„é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œ**æ³¨å†Œç›¸å¯¹åº”çš„Mysqlé©±åŠ¨** ã€‚

å¦‚ä¸‹æ˜¯ç›¸å…³: jdbc.properties çš„é…ç½®ä¿¡æ¯

    driver=com.mysql.cj.jdbc.Driver
    url=jdbc:mysql://localhost:3306/test
    user=root
    password=123
    

å†ç¼–å†™å¥½ç›¸å…³çš„ï¼šDBUtil ç±» ï¼Œå…·ä½“ä»£ç çš„ç¼–å†™å†…å®¹å¦‚ä¸‹ï¼š

    package com.RainbowSea.DBUtil;
    
    
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    import java.sql.Statement;
    import java.util.ResourceBundle;
    
    /**
     * JDBCå·¥å…·ç±»
     */
    public class DBUtil {
    
        // é™æ€å˜é‡ï¼Œåœ¨ç±»åŠ è½½æ—¶æ‰§è¡Œ
        // éƒ½æ˜¯ä¸€äº›ä» jdbc.properties è¯»å–åˆ°çš„é…ç½®æ–‡ä»¶çš„ä¿¡æ¯
        // è¯¥æ–¹æ³•ä»…ä»…åªä¼šè¯»å– â€œ.properties" çš„åç¼€çš„æ–‡ä»¶ï¼Œæ³¨æ„ï¼šé»˜è®¤æ˜¯ä»srcç›®å½•å¼€å§‹çš„ï¼Œæœ‰å­ç›®å½•éœ€è¦å†™æ˜å­ç›®å½•
        private static ResourceBundle bundle = ResourceBundle.getBundle("com/RainbowSea/resources/jdbc");
        private static String driver = bundle.getString("driver"); // æ ¹æ®propertiesä¸­çš„nameè¯»å–å¯¹åº”çš„valueå€¼
        private static String url = bundle.getString("url");
        private static String user = bundle.getString("user");
        private static String password = bundle.getString("password");
    
    
        static {
            // æ³¨å†Œé©±åŠ¨(æ³¨å†Œé©±åŠ¨åªéœ€è¦æ³¨å†Œä¸€æ¬¡ï¼Œæ”¾åœ¨é™æ€ä»£ç å½“ä¸­ï¼ŒDBUtilç±»åŠ è½½çš„æ—¶å€™æ‰§è¡Œ)
            // "com.mysql.jdbc.Driver"æ˜¯è¿æ¥æ•°æ®åº“çš„é©±åŠ¨ï¼Œä¸èƒ½å†™æ­»ï¼Œå› ä¸ºä»¥åå¯èƒ½è¿˜ä¼šè¿æ¥Oracleæ•°æ®åº“ã€‚
            // OCPå¼€é—­åŸåˆ™: å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼ˆä»€ä¹ˆæ˜¯ç¬¦åˆ OCPå‘¢ï¼Ÿåœ¨è¿›è¡ŒåŠŸèƒ½æ‰©å±•çš„æ—¶å€™ï¼Œä¸éœ€è¦ä¿®æ”¹javaæºä»£ç ï¼‰
            // Class.forName("com.mysql.jdbc.Driver")
    
            try {
                Class.forName(driver);  // åŠ è½½é©±åŠ¨
            } catch (ClassNotFoundException e) {
                throw new RuntimeException(e);
            }
    
        }
    
    
        /**
         * è·å–æ•°æ®åº“è¿æ¥
         * @return Connection
         */
        public static Connection getConnection() throws SQLException {
            return DriverManager.getConnection(url,user,password);
        }
    
    
        /**
         * å…³é—­è¿æ¥
         * @param connection
         * @param statement
         * @param resultSet
         */
        public static void close(Connection connection, Statement statement, ResultSet resultSet) {
            // æ³¨æ„ï¼šåˆ†å¼€try,æœ€åä½¿ç”¨çš„èµ„æºï¼Œä¼˜å…ˆå…³é—­
            if(resultSet != null) {
                try {
                    resultSet.close();
                } catch (SQLException e) {
                    throw new RuntimeException(e);
                }
            }
    
            if(statement != null) {
                try {
                    statement.close();
                } catch (SQLException e) {
                    throw new RuntimeException(e);
                }
            }
    
    
            if(connection != null) {
                try {
                    connection.close();
                } catch (SQLException e) {
                    throw new RuntimeException(e);
                }
            }
        }
    }
    
    

### 2.4 åŠŸèƒ½ä¸€ï¼š index.html è¯¥é¡¹ç›®çš„æ¬¢è¿é¡µé¢å¦‚ä¸‹ï¼š

é»˜è®¤åœ¨ web å½“ä¸­ï¼Œä¸€ä¸ªå…¨å±€é…ç½®ä¿¡æ¯å½“ä¸­ï¼Œä¼šå°†åä¸º `index.html` çš„æ–‡ä»¶ï¼Œè®¾ç½®ä¸ºè¯¥é¡¹ç›®çš„æ¬¢è¿é¡µé¢ã€‚ç›¸åº”çš„å…·ä½“å†…å®¹å¤§å®¶å¯ä»¥ç§»æ­¥è‡³ ğŸ”œğŸ”œğŸ”œ [å…³äºWebçš„æ¬¢è¿é¡µé¢çš„å¼€å‘è®¾ç½®\_ChinaRainbowSeaçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_61635597/article/details/129838633)

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>æ¬¢è¿ä½¿ç”¨OAç³»ç»Ÿ</title>
    </head>
    <body>
        <!--æ³¨æ„ï¼šå¯¹åº”å‰ç«¯çš„èµ„æºè·å–åŸºæœ¬ä¸Šéƒ½æ˜¯è¦åŠ é¡¹ç›®åçš„ï¼Œå¹¶ä¸”è¦"/"å¼€å§‹-->
        <a href="/servlet09/dept/list/">æŸ¥çœ‹éƒ¨é—¨åˆ—è¡¨</a>
    </body>
    </html>
    

### 2.5 åŠŸèƒ½äºŒï¼šéƒ¨é—¨åˆ—è¡¨ DeptListServlet

æ³¨æ„ï¼šå› ä¸ºæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯ **çº¯ Servlet** ç¼–å†™çš„ä¸€ä¸ªé¡¹ç›®ï¼Œæ‰€ä»¥åœ¨åç«¯æƒ³è¦å°†ç›¸å…³çš„ `HTML` æ ‡ç­¾ç›¸åº”åˆ°å‰ç«¯æµè§ˆå™¨ï¼Œè¢«æµè§ˆå™¨æ¸²æŸ“çš„è¯ï¼Œåˆ™éœ€è¦ç‰¹æ®Šçš„æ–¹æ³•ï¼šå¦‚ä¸‹

    // è®¾ç½®å°†åç«¯çš„å­—ç¬¦ä¸²çš„ html æ ‡ç­¾ç›¸åº”åˆ°æµè§ˆå™¨ç«¯æ‰§è¡Œå¤„ç†ï¼Œå¹¶è®¾ç½®ç›¸åº”çš„å­—ç¬¦é›†ç¼–ç 
    response.setContentType("text/html;charSet=UTF-8");
    PrintWriter writer = response.getWriter();
    

**æ€è·¯:**

1.  åœ¨**DeptListServlet**ç±»çš„**doGet**æ–¹æ³•ä¸­è¿æ¥æ•°æ®åº“ï¼ŒæŸ¥è¯¢æ‰€æœ‰çš„éƒ¨é—¨ï¼ŒåŠ¨æ€çš„å±•ç¤ºéƒ¨é—¨åˆ—è¡¨é¡µé¢.

*   åˆ†æ html é¡µé¢ä¸­å“ªéƒ¨åˆ†æ˜¯å›ºå®šæ­»çš„ï¼Œå“ªéƒ¨åˆ†æ˜¯éœ€è¦åŠ¨æ€å±•ç¤ºçš„ã€‚
    
*   **htmlé¡µé¢ä¸­çš„å†…å®¹æ‰€æœ‰çš„åŒå¼•å·è¦æ›¿æ¢æˆå•å¼•å·ï¼Œå› ä¸ºout.print("")è¿™é‡Œæœ‰ä¸€ä¸ªåŒå¼•å·ï¼Œå®¹æ˜“å†²çªã€‚**
    
*   ç°åœ¨å†™å®Œè¿™ä¸ªåŠŸèƒ½ä¹‹åï¼Œä½ ä¼šæœ‰ä¸€ç§æ„Ÿè§‰ï¼Œæ„Ÿè§‰å¼€å‘å¾ˆç¹çï¼Œåªä½¿ç”¨servletå†™ä»£ç å¤ªç¹çäº†
    

2.  æˆ‘ä»¬éœ€è¦è¿æ¥æ•°æ®åº“ï¼Œä»æ•°æ®åº“ä¸­è·å–åˆ°æ•°æ®ï¼Œæ˜¾ç¤ºåˆ°å‰ç«¯æµè§ˆå™¨å½“ä¸­ã€‚
3.  æ³¨æ„æˆ‘ä»¬è¿™é‡Œä¸Šé¢çš„ index.html ä¸­æ˜¯é€šè¿‡è¶…é“¾æ¥çš„æ–¹å¼ï¼Œè·³è½¬åˆ°è¯¥ éƒ¨é—¨åˆ—è¡¨é¡µé¢çš„ã€‚è¶…é“¾æ¥æ˜¯ doGet è¯·æ±‚ã€‚

    package com.RainbowSea.servlet;
    
    import com.RainbowSea.DBUtil.DBUtil;
    import jakarta.servlet.ServletException;
    import jakarta.servlet.http.HttpServlet;
    import jakarta.servlet.http.HttpServletRequest;
    import jakarta.servlet.http.HttpServletResponse;
    
    
    import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    
    
    /**
     * éƒ¨é—¨åˆ—è¡¨
     */
    public class DeptListServlet extends HttpServlet {
    
        /*
        è¯´æ˜ï¼šè¿™é‡Œä½¿ç”¨äº†doGet,å’Œ goPost çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬å‰ç«¯çš„ DeptSaveServlet çš„æ–°å¢éƒ¨é—¨ï¼Œ
        çš„è¯·æ±‚æ˜¯doPost,ä» doPost è¯·æ±‚  "è½¬å‘"å‡ºæ¥çš„åŒæ ·æ˜¯ doPostè¯·æ±‚çš„ï¼Œè€Œ é‡å®šå‘å°±æ˜¯doGetè¯·æ±‚äº†ï¼Œæ— è®ºæ˜¯doPost,doGetè¯·æ±‚éƒ½æ˜¯
        æ‰€ä»¥è¿™é‡Œä¸ºäº†ï¼Œå¤„ç†æ¥å—åˆ° DeptSaveServlet çš„æ–°å¢éƒ¨é—¨çš„ "è½¬å‘"è¯·æ±‚ï¼Œå†™äº†ä¸€ä¸ªdoPost è¯·æ±‚å¤„ç†
         */
    
    
        // ä¼˜åŒ–ï¼Œå°†è½¬å‘ï¼Œæ›¿æ¢æˆäº† é‡å®šå‘çš„æœºåˆ¶ï¼Œï¼ˆé‡å®šå‘çš„æœºåˆ¶ï¼‰æ˜¯è‡ªå‘åˆ°æµè§ˆå™¨å‰ç«¯çš„åœ°å€æ ä¸Šçš„ï¼Œåè‡ªå‘çš„æ‰§è¡Œ
        // åœ°å€æ ä¸Šæ˜¯ doGet è¯·æ±‚çš„ï¼Œå°±ä¸éœ€è¦ doPost è¯·æ±‚äº†ã€‚
       /* @Override
        protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                IOException {
            doGet(request, response); // è°ƒç”¨æœ¬èº«è¿™é‡Œçš„doGet()è¯·æ±‚
    
        }*/
    
        /*
            å› ä¸ºæˆ‘ä»¬å‰ç«¯ä½¿ç”¨çš„æ˜¯ <a>è¶…é“¾æ¥ï¼Œæ˜¯goGetè¯·æ±‚æ‰€ä»¥ï¼Œ
            å‰åç«¯çš„è¯·æ±‚ä¿æŒä¸€è‡´ã€‚
             */
        @Override
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                IOException {
            // è®¾ç½®å‰ç«¯æµè§ˆå™¨æ˜¾ç¤ºçš„æ ¼å¼ç±»å‹ï¼Œä»¥åŠç¼–ç 
            response.setContentType("text/html;charSet=UTF-8");
            PrintWriter writer = response.getWriter();
            Connection connection = null;
            PreparedStatement preparedStatement = null;
            ResultSet resultSet = null;
    
            // è·å–åˆ°è¯¥webappçš„é¡¹ç›®æ ¹è·¯å¾„ï¼šä¹Ÿå°±æ˜¯åœ¨Tomcat å½“ä¸­è®¾ç½®çš„è®¿é—®çš„é¡¹ç›®è·¯å¾„
            // æ³¨æ„çš„æ˜¯: getContextPath()è·å–è¿”å›çš„è·¯å¾„æ˜¯å¸¦æœ‰ "/é¡¹ç›®å"çš„ï¼Œæ‰€ä»¥ä¸è¦å¤šå†™äº† / 
            String contextPath = request.getContextPath();
    
    
            int i = 0;
    
            writer.println("     <!DOCTYPE html>");
            writer.println("<html lang='en'>");
    
            writer.println("<head>");
            writer.println("    <meta charset='UTF-8'>");
            writer.println("   <title>éƒ¨é—¨åˆ—è¡¨é¡µé¢</title>");
            writer.println("</head>");
    
            writer.println("    <script type = 'text/javascript' >");
            writer.println("            function del(dno) {");
            // å¼¹å‡ºç¡®è®¤æ¡†,ç”¨æˆ·ç‚¹å‡»ç¡®å®šï¼Œè¿”å›true,ç‚¹å‡»å–æ¶ˆè¿”å›false
            writer.println("        var ok = window.confirm('äº²,åˆ äº†ä¸å¯æ¢å¤å“¦!');");
            writer.println("        if (ok) {");
            // å‘é€è¯·æ±‚è¿›è¡Œåˆ é™¤æ•°æ®çš„æ“ä½œ
            // åœ¨jsä»£ç å½“ä¸­å¦‚ä½•å‘é€è¯·æ±‚ç»™æœåŠ¡
            // document.location.href='è¯·æ±‚è·¯å¾„
            // document.location = 'è¯·æ±‚è·¯å¾„'")
            // window.location.href = 'è¯·æ±‚è·¯å¾„
            // window.location = 'è¯·æ±‚è·¯å¾„'
            // æ³¨æ„æ˜¯æ ¹æ®æ‰€ä¼ çš„éƒ¨é—¨ç¼–å·åˆ é™¤æ•°æ®çš„
            writer.println("             document.location.href = '" + contextPath + "/dept/delete?deptno=' + dno");
            writer.println("          }");
            writer.println("       }");
            writer.println("</script >");
    
            writer.println("<body>");
            writer.println("    <h1 align='center'>éƒ¨é—¨åˆ—è¡¨</h1>");
            writer.println("   <table border='1px' align='center' width='50%'>");
            writer.println("      <tr>");
            writer.println("          <th>åºå·</th>");
            writer.println("         <th>éƒ¨é—¨ç¼–å·</th>");
            writer.println("         <th>éƒ¨é—¨åç§°</th>");
            writer.println("     </tr>");
    
            try {
                // è¿æ¥æ•°æ®åº“ï¼ŒæŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨:
                // 1. æ³¨å†Œé©±åŠ¨,è·å–è¿æ¥
                connection = DBUtil.getConnection();
                // 2. è·å–æ“ä½œæ•°æ®åº“å¯¹è±¡ï¼Œé¢„ç¼–è¯‘sqlè¯­å¥
                String sql = "select depton as det,dname,loc from dept"; // åœ¨mysqlä¸­æµ‹è¯•ä¸€ä¸‹æ˜¯å¦æ­£ç¡®
                preparedStatement = connection.prepareStatement(sql);
    
                // 3. æ‰§è¡Œsqlè¯­å¥
                resultSet = preparedStatement.executeQuery();
    
                // 4. å¤„ç†æŸ¥è¯¢ç»“æœé›†
                while (resultSet.next()) {
                    String det = resultSet.getString("det");  // æœ‰åˆ«åè¦ä½¿ç”¨åˆ«å
                    String dname = resultSet.getString("dname");
                    String loc = resultSet.getString("loc");
    
                    writer.print("			<tr>");
                    writer.print("				<td>" + (++i) + "</td>");
                    writer.print("				<td>" + det + "</td>");
                    writer.print("				<td>" + dname + "</td>");
                    writer.print("				<td>");
                    writer.print("					<a href='javascript:void(0)' onclick= 'del(" + det + ")'>åˆ é™¤</a>");
                    // å°†éƒ¨é—¨ç¼–å·ä¼ è¿‡å»ï¼Œç”¨æˆ·æ•°æ®åº“æŸ¥è¯¢ä¿®æ”¹
                    writer.print("					<a href='"+contextPath+"/dept/edit?deptno="+det+"'>ä¿®æ”¹</a>");
                    //æ³¨æ„è¿™é‡Œçš„æ˜¯å‰ç«¯çš„èµ„æºï¼Œéœ€è¦åŠ é¡¹ç›®åï¼Œä½†æ˜¯è¿™é‡Œçš„é¡¹ç›®åæˆ‘ä»¬é€šè¿‡ getContestPath()æ–¹æ³•åŠ¨æ€è·å–
                    // å¹¶ä¸”å°†éƒ¨é—¨åä¼ è¿‡å»ï¼Œå†ä»æ•°æ®åº“å½“ä¸­æŸ¥æ‰¾å‡ºæ¥å¯¹åº”çš„éƒ¨é—¨çš„è¯¦ç»†ä¿¡æ¯ï¼šæ³¨æ„: ?(é—´éš”) Httpä¼ è¾“åè®®
                    writer.print("					<a href='" + contextPath + "/dept/detail?deptno=" + det + "'>è¯¦æƒ…</a>");
                    writer.print("				</td>");
                    writer.print("			</tr>");
                }
            } catch (SQLException e) {
                throw new RuntimeException(e);
            } finally {
    
                // 5. å…³é—­èµ„æº
                DBUtil.close(connection, preparedStatement, resultSet);
            }
    
            writer.println("</table>");
            writer.println("<hr>");
            // å‰ç«¯çš„èµ„æºè·¯å¾„è®¿é—®éœ€è¦åŠ é¡¹ç›®å
            writer.println("<a href='" + contextPath + "/add.html'>æ–°å¢éƒ¨é—¨</a>");
            writer.println("</body>");
            writer.println("</html>");
    
        }
    }
    
    

### 2.6 åŠŸèƒ½ä¸‰ï¼šæŸ¥çœ‹éƒ¨é—¨è¯¦æƒ… DeptDetailServlet

å»ºè®®ï¼šä»å‰ç«¯å¾€åç«¯ä¸€æ­¥ä¸€æ­¥å®ç°ã€‚é¦–å…ˆè¦è€ƒè™‘çš„æ˜¯ï¼Œç”¨æˆ·ç‚¹å‡»çš„æ˜¯ä»€ä¹ˆï¼Ÿç”¨æˆ·ç‚¹å‡»çš„ä¸œè¥¿åœ¨å“ªé‡Œï¼Ÿ

ä¸€å®šè¦å…ˆæ‰¾åˆ°ç”¨æˆ·ç‚¹çš„â€œè¯¦æƒ…â€åœ¨å“ªé‡Œã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è¶…é“¾æ¥çš„å½¢å¼å¤„ç†

    <a href='å†™ä¸€ä¸ªè·¯å¾„'>è¯¦æƒ…</a>
    

è¯¦æƒ… æ˜¯éœ€è¦è¿æ¥æ•°æ®åº“çš„ï¼Œæ‰€ä»¥è¿™ä¸ªè¶…é“¾æ¥ç‚¹å‡»ä¹‹åä¹Ÿæ˜¯éœ€è¦æ‰§è¡Œä¸€æ®µjavaä»£ç çš„ã€‚æ‰€ä»¥è¦å°†è¿™ä¸ªè¶…é“¾æ¥çš„è·¯å¾„ä¿®æ”¹ä¸€ä¸‹ã€‚

æ³¨æ„ï¼šä¿®æ”¹è·¯å¾„ä¹‹åï¼Œè¿™ä¸ªè·¯å¾„æ˜¯éœ€è¦åŠ é¡¹ç›®åçš„ã€‚"/servlet09/dept/detail"

æŠ€å·§ï¼š

    out.print("<a href='"+contextPath+"/dept/detail?deptno="+deptno+"'>è¯¦æƒ…</a>");
    

**é‡ç‚¹ï¼šå‘æœåŠ¡å™¨æäº¤æ•°æ®çš„æ ¼å¼ï¼š`uri?name=value&name=value&name=value&name=value` ã€‚è¿™é‡Œçš„é—®å·ï¼Œå¿…é¡»æ˜¯è‹±æ–‡çš„é—®å·ã€‚ä¸èƒ½ä¸­æ–‡çš„é—®å·ã€‚**

**æ€è·¯ï¼š**

ä¸­æ–‡æ€è·¯ï¼ˆæ€è·¯æ¥æºäºï¼šä½ è¦åšä»€ä¹ˆï¼Ÿç›®æ ‡ï¼šæŸ¥çœ‹éƒ¨é—¨è¯¦ç»†ä¿¡æ¯ã€‚ï¼‰  
ç¬¬ä¸€æ­¥ï¼šè·å–éƒ¨é—¨ç¼–å·  
ç¬¬äºŒæ­¥ï¼šæ ¹æ®éƒ¨é—¨ç¼–å·æŸ¥è¯¢æ•°æ®åº“ï¼Œè·å–è¯¥éƒ¨é—¨ç¼–å·å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯ã€‚  
ç¬¬ä¸‰æ­¥ï¼šå°†éƒ¨é—¨ä¿¡æ¯å“åº”åˆ°æµè§ˆå™¨ä¸Šã€‚ï¼ˆæ˜¾ç¤ºä¸€ä¸ªè¯¦æƒ…ã€‚ï¼‰

    package com.RainbowSea.servlet;
    
    import com.RainbowSea.DBUtil.DBUtil;
    import jakarta.servlet.ServletException;
    import jakarta.servlet.http.HttpServlet;
    import jakarta.servlet.http.HttpServletRequest;
    import jakarta.servlet.http.HttpServletResponse;
    
    import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    
    
    /**
     * éƒ¨é—¨è¯¦æƒ…
     */
    public class DeptDetailServlet extends HttpServlet {
    
        // å‰ç«¯è¶…è¿æ¥æ˜¯ doGet()è¯·æ±‚
        @Override
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                IOException {
            // è®¾ç½®å‰ç«¯æµè§ˆå™¨æ ¼å¼ç±»å‹å’Œå­—ç¬¦é›†ç¼–ç 
            response.setContentType("text/html;charSet=UTF-8");
            PrintWriter writer = response.getWriter();
            Connection connection = null;
            PreparedStatement preparedStatement = null;
            ResultSet resultSet = null;
            //ä¸­æ–‡æ€è·¯ï¼ˆæ€è·¯æ¥æºäºï¼šä½ è¦åšä»€ä¹ˆï¼Ÿç›®æ ‡ï¼šæŸ¥çœ‹éƒ¨é—¨è¯¦ç»†ä¿¡æ¯ã€‚ï¼‰
            // ç¬¬ä¸€æ­¥ï¼šè·å–éƒ¨é—¨ç¼–å·
            // ç¬¬äºŒæ­¥ï¼šæ ¹æ®éƒ¨é—¨ç¼–å·æŸ¥è¯¢æ•°æ®åº“ï¼Œè·å–è¯¥éƒ¨é—¨ç¼–å·å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯ã€‚
            // ç¬¬ä¸‰æ­¥ï¼šå°†éƒ¨é—¨ä¿¡æ¯å“åº”åˆ°æµè§ˆå™¨ä¸Šã€‚ï¼ˆæ˜¾ç¤ºä¸€ä¸ªè¯¦æƒ…ã€‚ï¼‰
    
    
            // 1.
            // http://127.0.0.1:8080/servlet09/dept/detail?deptno=40
            String deptno = request.getParameter("deptno");  // æ³¨æ„æ˜¯æˆ‘ä»¬å‰ç«¯æäº¤çš„æ•°æ®ï¼Œå»ºè®®å¤åˆ¶name
    
            try {
                // 2. è¿æ¥æ•°æ®åº“ï¼Œæ ¹æ®éƒ¨é—¨ç¼–å·æŸ¥è¯¢æ•°æ®åº“
                // 1.æ³¨å†Œé©±åŠ¨ï¼Œè¿æ¥æ•°æ®åº“
                connection = DBUtil.getConnection();
    
                // 2. é¢„ç¼–è¯‘SQLè¯­å¥,sqlè¦æµ‹è¯•
                String sql = "select dname,loc from dept where depton = ?";  // ? å ä½ç¬¦
                preparedStatement = connection.prepareStatement(sql);
    
                // 3. å¡«å……å ä½ç¬¦,çœŸæ­£æ‰§è¡Œsqlè¯­å¥
                preparedStatement.setString(1, deptno);
                resultSet = preparedStatement.executeQuery();
    
                // 4. å¤„ç†æŸ¥è¯¢ç»“æœé›†
                while (resultSet.next()) {
                    String dname = resultSet.getString("dname");
                    String loc = resultSet.getString("loc");
    
    
                    // æ³¨æ„å°† â€œåŒå¼•å·è½¬æ¢ä¸ºå•å¼•å·ï¼Œå› ä¸ºåœ¨Javaå½“ä¸­ä¸å¯ä»¥åµŒå¥—å¤šä¸ªåŒå¼•å·ï¼Œé™¤éæ˜¯å­—ç¬¦ä¸²çš„æ‹¼æ¥
                    // æ‰€ä»¥ä½¿ç”¨ 'å•å¼•å·
                    writer.println("    <body>");
                    writer.println("  <h1>éƒ¨é—¨è¯¦æƒ…</h1>");
                    writer.println("              éƒ¨é—¨ç¼–å·: " + deptno + " <br>");
                    writer.println("          éƒ¨é—¨åç§°: " + dname + "<br>");
                    writer.println("     éƒ¨é—¨ä½ç½®: " + loc + "<br>");
                    writer.println("  <input type='button' value='åé€€' onclick='window.history.back()'  />");
    
                }
            } catch (SQLException e) {
                throw new RuntimeException(e);
            } finally {
                // 5. é‡Šæ”¾èµ„æº
                DBUtil.close(connection, preparedStatement, resultSet);
            }
    
    
            writer.println("</body>");
            writer.println("</html>");
        }
    }
    
    

### 2.7 åŠŸèƒ½å››ï¼šåˆ é™¤éƒ¨é—¨ DeptDelServlet

æ€ä¹ˆå¼€å§‹ï¼Ÿä»å“ªé‡Œå¼€å§‹ï¼Ÿä»å‰ç«¯é¡µé¢å¼€å§‹ï¼Œç”¨æˆ·ç‚¹å‡»åˆ é™¤æŒ‰é’®çš„æ—¶å€™ï¼Œåº”è¯¥æç¤ºç”¨æˆ·æ˜¯å¦åˆ é™¤ã€‚å› ä¸ºåˆ é™¤è¿™ä¸ªåŠ¨ä½œæ˜¯æ¯”è¾ƒå±é™©çš„ã€‚**ä»»ä½•ç³»ç»Ÿåœ¨è¿›è¡Œåˆ é™¤æ“ä½œä¹‹å‰ï¼Œæ˜¯å¿…é¡»è¦æç¤ºç”¨æˆ·çš„ï¼Œå› ä¸ºè¿™ä¸ªåˆ é™¤çš„åŠ¨ä½œæœ‰å¯èƒ½æ˜¯ç”¨æˆ·è¯¯æ“ä½œã€‚ï¼ˆåœ¨å‰ç«¯é¡µé¢ä¸Šå†™JSä»£ç ï¼Œæ¥æç¤ºç”¨æˆ·æ˜¯å¦åˆ é™¤ã€‚ï¼‰**

    <a href="javascript:void(0)" onclick="del(30)" >åˆ é™¤</a>
    <script type="text/javascript">
    	function del(dno){
    		if(window.confirm("äº²ï¼Œåˆ äº†ä¸å¯æ¢å¤å“¦ï¼")){
    			document.location.href = "/oa/dept/delete?deptno=" + dno;
    		}
    	}
    </script>
    

ä»¥ä¸Šçš„å‰ç«¯ç¨‹åºè¦å†™åˆ°åç«¯çš„javaä»£ç å½“ä¸­ï¼šDeptListServletç±»çš„doGetæ–¹æ³•å½“ä¸­ï¼Œä½¿ç”¨out.print()æ–¹æ³•ï¼Œå°†ä»¥ä¸Šçš„å‰ç«¯ä»£ç è¾“å‡ºåˆ°æµè§ˆå™¨ä¸Šã€‚

åˆ é™¤æˆåŠŸæˆ–è€…å¤±è´¥çš„æ—¶å€™çš„ä¸€ä¸ªå¤„ç†ï¼ˆè¿™é‡Œæˆ‘ä»¬ä¸€å¼€å§‹ä½¿ç”¨çš„é€‰æ‹©çš„æ˜¯è½¬å‘ï¼Œåé¢ä¼˜åŒ–ä½¿ç”¨çš„æ˜¯é‡å®šå‘æœºåˆ¶ã€‚ï¼‰

åˆ é™¤æˆåŠŸï¼šæˆ‘ä»¬è·³è½¬åˆ°éƒ¨é—¨åˆ—è¡¨å½“ä¸­ã€‚DeptListServlet

åˆ é™¤å¤±è´¥ï¼šæˆ‘ä»¬è·³è½¬åˆ°ä¸€ä¸ªå¤±è´¥çš„é¡µé¢å½“ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬å°†è¯¥å¤±è´¥çš„é¡µé¢åä¸º: error.html é¡µé¢å¦‚ä¸‹ï¼š

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>error</title>
    </head>
    <body>
    <h1> æ“ä½œå¤±è´¥: </h1>
    <a href='/servlet09/dept/list/' onclick="window.history.back()">è¿”å›</a>
    </body>
    </html>
    

å…·ä½“çš„ Servlet ç¼–å†™å¦‚ä¸‹

    package com.RainbowSea.servlet;
    
    import com.RainbowSea.DBUtil.DBUtil;
    import jakarta.servlet.ServletException;
    import jakarta.servlet.http.HttpServlet;
    import jakarta.servlet.http.HttpServletRequest;
    import jakarta.servlet.http.HttpServletResponse;
    
    import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.SQLException;
    
    
    /**
     * åˆ é™¤éƒ¨é—¨
     */
    public class DeptDelServlet extends HttpServlet {
    
    
        /*
        æ³¨æ„å‰ç«¯æ˜¯è¶…é“¾æ¥çš„æ–¹å¼ï¼šæ˜¯getè¯·æ±‚
         */
        @Override
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                IOException {
            response.setContentType("text/html;charSet=UTF-8");
            PrintWriter writer = response.getWriter();
            request.setCharacterEncoding("UTF-8");
    
            // æ€è·¯:
            /*
            æ ¹æ®éƒ¨é—¨ç¼–å·åˆ é™¤ä¿¡æ¯ï¼Œ
            åˆ é™¤æˆåŠŸï¼Œè·³è½¬å›åŸæ¥çš„éƒ¨é—¨åˆ—è¡¨é¡µé¢
            åˆ é™¤å¤±è´¥ï¼Œè·³è½¬åˆ é™¤å¤±è´¥çš„é¡µé¢
             */
    
            Connection connection = null;
            PreparedStatement preparedStatement = null;
    
            // è®°å½•åˆ é™¤æ•°æ®åº“çš„è¡Œæ•°
            int count = 0;
    
            // è·å–åˆ°å‰ç«¯æäº¤çš„æ•°æ®
            String deptno = request.getParameter("deptno");
    
    
            // è¿æ¥æ•°æ®åº“è¿›è¡Œåˆ é™¤æ“ä½œ
    
            try {
                // 1.æ³¨å†Œé©±åŠ¨ï¼Œè¿æ¥æ•°æ®åº“
                connection = DBUtil.getConnection();
    
                // å¼€å¯äº‹åŠ¡ï¼ˆå–æ¶ˆè‡ªåŠ¨æäº¤æœºåˆ¶ï¼‰,å®ç°å¯å›æ»š
                connection.setAutoCommit(false);
    
                // 2. é¢„ç¼–è¯‘sqlè¯­å¥,sqlæµ‹è¯•
                String sql = "delete from dept where depton = ?"; // ? å ä½ç¬¦
                preparedStatement = connection.prepareStatement(sql);
    
                // 3. å¡«å……å ä½ç¬¦ï¼ŒçœŸæ­£çš„æ‰§è¡Œsqlè¯­å¥
                preparedStatement.setString(1, deptno);
                // è¿”å›å½±å“æ•°æ®åº“çš„è¡Œæ•°
                count = preparedStatement.executeUpdate();
                connection.commit();  // æ‰‹åŠ¨æäº¤æ•°æ®
            } catch (SQLException e) {
                // é‡åˆ°å¼‚å¸¸å›æ»š
                if (connection != null) {
                    try {
                        // äº‹åŠ¡çš„å›æ»š
                        connection.rollback();
                    } catch (SQLException ex) {
                        throw new RuntimeException(ex);
                    }
                }
                throw new RuntimeException(e);
            } finally {
                // 4. é‡Šæ”¾èµ„æº
                // å› ä¸ºè¿™é‡Œæ˜¯åˆ é™¤æ•°æ®ï¼Œæ²¡æœ‰æŸ¥è¯¢æ“ä½œï¼Œæ‰€ä»¥ æ²¡æœ‰ ResultSet å¯ä»¥ä¼ null
                DBUtil.close(connection, preparedStatement, null);
            }
    
            if (count == 1) {
                // åˆ é™¤æˆåŠŸ
                // ä»ç„¶è·³è½¬åˆ°éƒ¨é—¨åˆ—è¡¨é¡µé¢
                // éƒ¨é—¨åˆ—è¡¨é¡µé¢çš„æ˜¾ç¤ºéœ€è¦æ‰§è¡Œå¦å¤–ä¸€ä¸ªServletï¼Œæ€ä¹ˆåŠï¼Œå¯ä»¥ä½¿ç”¨è·³è½¬ï¼Œä¸è¿‡è¿™é‡Œæœ€åæ˜¯ä½¿ç”¨é‡å®šå‘
                // æ³¨æ„ï¼šè½¬å‘æ˜¯åœ¨æœåŠ¡å™¨é—´çš„ï¼Œæ‰€ä»¥ä¸è¦åŠ â€œé¡¹ç›®åâ€ è€Œæ˜¯ / + web.xml æ˜ å°„çš„è·¯å¾„å³å¯
                //request.getRequestDispatcher("/dept/list/").forward(request,response);
    
                // ä¼˜åŒ–ï¼šä½¿ç”¨é‡å®šå‘æœºåˆ¶ æ³¨æ„: é‡å®šå‘æ˜¯è‡ªå‘åˆ°å‰ç«¯çš„åœ°å€æ ä¸Šçš„ï¼Œå‰ç«¯æ‰€ä»¥éœ€è¦æŒ‡æ˜é¡¹ç›®å
                // æ³¨æ„: request.getContextPath() è¿”å›çš„æ ¹è·¯å¾„æ˜¯ï¼ŒåŒ…å«äº† "/" çš„
                response.sendRedirect(request.getContextPath() + "/dept/list/");
            } else {
                // åˆ é™¤å¤±è´¥
                // webå½“ä¸­çš„ htmlèµ„æºï¼Œè¿™é‡Œçš„ "/" è¡¨ç¤º web ç›®å½•
                //request.getRequestDispatcher("/error.html/").forward(request, response);
    
                // ä¼˜åŒ–ï¼Œä½¿ç”¨é‡å®šå‘
                response.sendRedirect(request.getContextPath() + "/error.html/");
            }
    
    
        }
    }
    
    

### 2.8 åŠŸèƒ½äº”ï¼šæ–°å¢éƒ¨é—¨ DeptSaveServlet

**æ€è·¯ï¼š**

è·å–åˆ°å‰ç«¯ form è¡¨å•æäº¤çš„æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä»¬ form è¡¨å• ä¸­çš„ metod = post è®¾ç½®ä¸ºäº† doPost è¯·æ±‚ã€‚

å†è¿æ¥æ•°æ®åº“ï¼Œæ·»åŠ ä¸€æ¡è®°å½•ã€‚

æ·»åŠ æˆåŠŸï¼šæˆ‘ä»¬è·³è½¬åˆ°éƒ¨é—¨åˆ—è¡¨å½“ä¸­ã€‚DeptListServlet

æ·»åŠ å¤±è´¥ï¼šæˆ‘ä»¬è·³è½¬åˆ°ä¸€ä¸ªå¤±è´¥çš„é¡µé¢å½“ä¸­ã€‚è¿™é‡Œæˆ‘ä»¬å°†è¯¥å¤±è´¥çš„é¡µé¢åä¸º: error.html

**æ³¨æ„ç‚¹ï¼š**

> æœ€åä¿å­˜æˆåŠŸä¹‹åï¼Œè·³è½¬åˆ° /dept/list çš„æ—¶å€™ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ `è½¬å‘` æœºåˆ¶çš„è¯ï¼Œè¿™é‡Œå› ä¸ºä½ æ˜¯ä» `doPost` è¯·æ±‚ `è½¬å‘`è¿‡å»çš„(è½¬å‘æ˜¯ä¸€æ¬¡è¯·æ±‚ï¼Œä¹‹å‰æ˜¯postï¼Œä¹‹åè¿˜æ˜¯postï¼Œå› ä¸ºå®ƒæ˜¯ä¸€æ¬¡è¯·æ±‚ã€‚)ï¼Œæ‰€ä»¥å¯¹åº”æ¥æ”¶è¯¥ doPost è¯·æ±‚çš„ä¹Ÿè¦æ˜¯ doPost æ–¹æ³•å¤„ç†è¯¥è¯·æ±‚ï¼Œä¸ç„¶ä¼šæŠ¥ `405` é”™è¯¯ã€‚
> 
> è€ŒåŒæ—¶ï¼šè¿™æ—¶å€™æ¥æ”¶è¯¥ `è½¬å‘` çš„ /dept/list Servletå½“ä¸­åªæœ‰ä¸€ä¸ªdoGetæ–¹æ³•ã€‚å°±ä¼šæŠ¥ `405` é”™è¯¯ã€‚
> 
> æ€ä¹ˆè§£å†³ï¼Ÿä¸¤ç§æ–¹æ¡ˆ
> 
> *   ç¬¬ä¸€ç§ï¼šåœ¨/dept/list Servletä¸­æ·»åŠ doPostæ–¹æ³•ï¼Œç„¶ååœ¨doPostæ–¹æ³•ä¸­è°ƒç”¨doGetã€‚
> *   ç¬¬äºŒç§ï¼šä½¿ç”¨`é‡å®šå‘`çš„æ–¹å¼ï¼Œè¿›è¡Œè·³è½¬ï¼Œé‡å®šå‘çš„æœºåˆ¶æ˜¯æ”¹å˜æµè§ˆå™¨çš„è¯·æ±‚è·¯å¾„URLï¼Œè®©æµè§ˆå™¨é‡æ–°å‘é€è·³è½¬ä¹‹åçš„ URL åœ°å€ï¼Œè¯¥æ–¹å¼æ˜¯ä»æµè§ˆå™¨åœ°å€æ ä¸Šè·³è½¬çš„ï¼Œæ‰€ä»¥æ˜¯ `doGet` è¯·æ±‚ï¼Œå°±ä¸è¦ç¼–å†™ `doPost` è¯·æ±‚äº†ã€‚

å…·ä½“ä»£ç ç¼–å†™å¦‚ä¸‹ï¼š

    package com.RainbowSea.servlet;
    
    import com.RainbowSea.DBUtil.DBUtil;
    import jakarta.servlet.ServletException;
    import jakarta.servlet.http.HttpServlet;
    import jakarta.servlet.http.HttpServletRequest;
    import jakarta.servlet.http.HttpServletResponse;
    
    import java.io.IOException;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.SQLException;
    
    
    /**
     * å¢åŠ éƒ¨é—¨æ•°æ®
     */
    public class DeptSaveServlet extends HttpServlet {
        // å‰ç«¯æ˜¯æ³¨å†Œä¿¡æ¯ï¼Œæ˜¯post è¯·æ±‚
        @Override
        protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                IOException {
            /*
            æ€è·¯:
             è·å–åˆ°å‰ç«¯çš„æäº¤çš„æ•°æ®ï¼Œæ³¨æ„ ç¼–ç è®¾ç½®post è¯·æ±‚
             è¿æ¥æ•°æ®åº“: è¿›è¡Œæ·»åŠ æ•°æ®
             æ·»åŠ æˆåŠŸ: è¿”å›éƒ¨é—¨åˆ—è¡¨é¡µé¢
             æ·»åŠ å¤±è´¥: è¿”å›å¤±è´¥çš„é¡µé¢
             */
    
            request.setCharacterEncoding("UTF-8");
    
            // è·å–åˆ°å‰ç«¯çš„æ•°æ®ï¼Œå»ºè®® name ä½¿ç”¨å¤åˆ¶
            String deptno = request.getParameter("deptno");
            String dname = request.getParameter("dname");
            String loc = request.getParameter("loc");
    
            // è¿æ¥æ•°æ®åº“ï¼Œæ·»åŠ æ•°æ®
            Connection connection = null;
            PreparedStatement preparedStatement = null;
            // å½±å“æ•°æ®åº“çš„è¡Œæ•°
            int count = 0;
    
            try {
                // 1. æ³¨å†Œé©±åŠ¨ï¼Œè¿æ¥æ•°æ®åº“
                connection = DBUtil.getConnection();
    
                // 2. è·å–æ“ä½œæ•°æ®åº“å¯¹è±¡ï¼Œé¢„ç¼–è¯‘sqlè¯­å¥ï¼ŒSqlæµ‹è¯•
                String sql = "insert into dept(depton,dname,loc) values(?,?,?)";
                preparedStatement = connection.prepareStatement(sql);
    
                // 3. å¡«å……å ä½ç¬¦, çœŸæ­£æ‰§è¡Œsqlè¯­å¥ï¼Œ
                // æ³¨æ„ï¼š å ä½ç¬¦çš„å¡«å……æ˜¯ä» 1 å¼€å§‹çš„ï¼ŒåŸºæœ¬ä¸Šæ•°æ®åº“ç›¸å…³çš„èµ·å§‹ä¸‹æ ‡ç´¢å¼•éƒ½æ˜¯ä» 1ä¸‹æ ‡å¼€å§‹çš„
                preparedStatement.setString(1, deptno);
                preparedStatement.setString(2, dname);
                preparedStatement.setString(3, loc);
    
                // è¿”å›å½±å“æ•°æ®åº“çš„è¡Œæ•°
                count = preparedStatement.executeUpdate();
    
                // 5.é‡Šæ”¾èµ„æº
            } catch (SQLException e) {
                throw new RuntimeException(e);
            } finally {
                DBUtil.close(connection, preparedStatement, null);
            }
    
            // ä¿å­˜æˆåŠŸï¼Œè¿”å›éƒ¨é—¨åˆ—è¡¨é¡µé¢
            if (count == 1) {
                // è¿™é‡Œåº”è¯¥ä½¿ç”¨ï¼Œé‡å®šå‘
                // è¿™é‡Œç”¨çš„è½¬å‘ï¼Œæ˜¯æœåŠ¡å™¨å†…éƒ¨çš„ï¼Œä¸è¦åŠ é¡¹ç›®å
                //request.getRequestDispatcher("/dept/list/").forward(request, response);
    
                // é‡å®šå‘
                response.sendRedirect(request.getContextPath() + "/dept/list/");
            } else {
                // ä¿å­˜å¤±è´¥
                // webå½“ä¸­çš„ htmlèµ„æºï¼Œè¿™é‡Œçš„ "/" è¡¨ç¤º web ç›®å½•
                //request.getRequestDispatcher("/error.html").forward(request, response);
    
                response.sendRedirect(request.getContextPath() + "/error.html");
            }
    
    
        }
    }
    
    

### 2.9 åŠŸèƒ½å…­ï¼šè·³è½¬åˆ°ä¿®æ”¹éƒ¨é—¨çš„é¡µé¢ DepEditServlet

**æ€è·¯:**  
è·å–åˆ°æäº¤çš„è¿‡æ¥çš„ éƒ¨é—¨ç¼–å·  
æ ¹æ®éƒ¨é—¨ç¼–å·ä¿®æ”¹ä¿¡æ¯ï¼Œæ³¨æ„ï¼šéƒ¨é—¨ç¼–å·æ˜¯å”¯ä¸€çš„ä¸è¦è¢«ä¿®æ”¹äº†  
è¿æ¥æ•°æ®åº“ï¼ŒæŸ¥è¯¢åˆ°ç›¸å…³ä¿¡æ¯æ˜¾ç¤ºåˆ°æµè§ˆå™¨é¡µé¢å½“ä¸­ï¼Œæ–¹ä¾¿ç”¨æˆ·ä¿®æ”¹

å…·ä½“çš„ä»£ç ç¼–å†™å¦‚ä¸‹

    package com.RainbowSea.servlet;
    
    import com.RainbowSea.DBUtil.DBUtil;
    import jakarta.servlet.ServletException;
    import jakarta.servlet.http.HttpServlet;
    import jakarta.servlet.http.HttpServletRequest;
    import jakarta.servlet.http.HttpServletResponse;
    
    import java.io.IOException;
    import java.io.PrintWriter;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    
    
    /**
     * è·³è½¬åˆ°ä¿®æ”¹éƒ¨é—¨çš„é¡µé¢
     */
    public class DepEditServlet extends HttpServlet {
        // è¶…é“¾æ¥æ˜¯ doGet()è¯·æ±‚
    
        // http://127.0.0.1:8080/servlet09/dept/edit?deptno=10
        @Override
        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                IOException {
            response.setContentType("text/html;charSet=UTF-8");
            PrintWriter writer = response.getWriter();
    
            writer.println("     <!DOCTYPE html>");
            writer.println("<html lang='en'>");
    
            writer.println("<head>");
            writer.println("    <meta charset='UTF-8'>");
            writer.println("   <title>éƒ¨é—¨åˆ—è¡¨é¡µé¢</title>");
            writer.println("</head>");
            writer.println("<body>");
            writer.println("    <h1>ä¿®æ”¹éƒ¨é—¨</h1>");
    
    
            writer.println("   <form action='"+request.getContextPath()+"/dept/modify' method='post'>");
    
    
    
            /*
            æ€è·¯:
            è·å–åˆ°æäº¤çš„è¿‡æ¥çš„ éƒ¨é—¨ç¼–å·
            æ ¹æ®éƒ¨é—¨ç¼–å·ä¿®æ”¹ä¿¡æ¯ï¼Œæ³¨æ„ï¼šéƒ¨é—¨ç¼–å·æ˜¯å”¯ä¸€çš„ä¸è¦è¢«ä¿®æ”¹äº†
            è¿æ¥æ•°æ®åº“ï¼ŒæŸ¥è¯¢åˆ°ç›¸å…³ä¿¡æ¯æ˜¾ç¤ºåˆ°æµè§ˆå™¨é¡µé¢å½“ä¸­ï¼Œæ–¹ä¾¿ç”¨æˆ·ä¿®æ”¹
             */
    
            String deptno = request.getParameter("deptno");
    
            // è¿æ¥æ•°æ®åº“
            Connection connection = null;
            PreparedStatement preparedStatement = null;
            ResultSet resultSet = null;
    
            try {
                // 1. æ³¨å†Œé©±åŠ¨ï¼Œè¿æ¥æ•°æ®åº“
                connection = DBUtil.getConnection();
    
                // 2. è·å–åˆ°æ“ä½œæ•°æ®åº“å¯¹è±¡ï¼Œé¢„ç¼–è¯‘SQLè¯­å¥ï¼Œsqlæµ‹è¯•
                String sql = "select dname,loc from dept where depton = ?";
    
                preparedStatement = connection.prepareStatement(sql);
    
                // 3. å¡«å……å ä½ç¬¦ï¼ŒçœŸæ­£æ‰§è¡Œsqlè¯­å¥
                preparedStatement.setString(1, deptno);
                resultSet = preparedStatement.executeQuery();
    
                // 4. å¤„ç†æŸ¥è¯¢ç»“æœé›†
                while (resultSet.next()) {
                    String dname = resultSet.getString("dname");  // æŸ¥è¯¢ä½¿ç”¨çš„åˆ«åï¼Œè¦ç”¨åˆ«å
                    String loc = resultSet.getString("loc");
    
                    // <!-- readonly è¡¨ç¤ºåªè¯»ï¼Œä¸å¯ä¿®æ”¹çš„ä½œç”¨
                    writer.println("      éƒ¨é—¨ç¼–å·: <input type='text' name='deptno' value='" + deptno + "' readonly /><br>");
                    writer.println("     éƒ¨é—¨åç§°: <input type='text' name='dname' value=" + dname + " /><br>");
                    writer.println("    éƒ¨é—¨ä½ç½®: <input type='text' name='loc' value=" + loc + " /><br>");
    
                }
            } catch (SQLException e) {
                throw new RuntimeException(e);
            } finally {
                // 5.é‡Šæ”¾èµ„æºï¼Œæœ€åä½¿ç”¨çš„ä¼˜å…ˆå…³é—­ï¼ˆå› ä¸ºå¦‚æœæ˜¯å…³é—­ä¼˜å…ˆä½¿ç”¨çš„è¯ï¼Œå†æœ€åé¢ä½¿ç”¨çš„å¯èƒ½éœ€è¦å‰é¢çš„èµ„æºï¼Œæ‰èƒ½æ‰§è¡Œï¼‰
                DBUtil.close(connection, preparedStatement, resultSet);
            }
    
            writer.println(" <input type='submit' value='ä¿®æ”¹' />");
            writer.println(" </form>");
            writer.println("</body>");
            writer.println("</html>");
    
    
        }
    }
    
    

### 2.10 åŠŸèƒ½ä¸ƒï¼šä¿®æ”¹éƒ¨é—¨ DeptSaveServlet

**æ€è·¯:**

è·å–åˆ°å‰ç«¯çš„æäº¤çš„æ•°æ®ï¼Œæ³¨æ„ ç¼–ç è®¾ç½®post è¯·æ±‚  
è¿æ¥æ•°æ®åº“: è¿›è¡Œæ·»åŠ æ•°æ®  
æ·»åŠ æˆåŠŸ: è¿”å›éƒ¨é—¨åˆ—è¡¨é¡µé¢  
æ·»åŠ å¤±è´¥: è¿”å›å¤±è´¥çš„é¡µé¢

å…·ä½“çš„ä»£ç ç¼–å†™å¦‚ä¸‹ï¼š

    package com.RainbowSea.servlet;
    
    import com.RainbowSea.DBUtil.DBUtil;
    import jakarta.servlet.ServletException;
    import jakarta.servlet.http.HttpServlet;
    import jakarta.servlet.http.HttpServletRequest;
    import jakarta.servlet.http.HttpServletResponse;
    
    import java.io.IOException;
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.SQLException;
    
    
    /**
     * å¢åŠ éƒ¨é—¨æ•°æ®
     */
    public class DeptSaveServlet extends HttpServlet {
        // å‰ç«¯æ˜¯æ³¨å†Œä¿¡æ¯ï¼Œæ˜¯post è¯·æ±‚
        @Override
        protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException,
                IOException {
            /*
            æ€è·¯:
             è·å–åˆ°å‰ç«¯çš„æäº¤çš„æ•°æ®ï¼Œæ³¨æ„ ç¼–ç è®¾ç½®post è¯·æ±‚
             è¿æ¥æ•°æ®åº“: è¿›è¡Œæ·»åŠ æ•°æ®
             æ·»åŠ æˆåŠŸ: è¿”å›éƒ¨é—¨åˆ—è¡¨é¡µé¢
             æ·»åŠ å¤±è´¥: è¿”å›å¤±è´¥çš„é¡µé¢
             */
    
            request.setCharacterEncoding("UTF-8");
    
            // è·å–åˆ°å‰ç«¯çš„æ•°æ®ï¼Œå»ºè®® name ä½¿ç”¨å¤åˆ¶
            String deptno = request.getParameter("deptno");
            String dname = request.getParameter("dname");
            String loc = request.getParameter("loc");
    
            // è¿æ¥æ•°æ®åº“ï¼Œæ·»åŠ æ•°æ®
            Connection connection = null;
            PreparedStatement preparedStatement = null;
            // å½±å“æ•°æ®åº“çš„è¡Œæ•°
            int count = 0;
    
            try {
                // 1. æ³¨å†Œé©±åŠ¨ï¼Œè¿æ¥æ•°æ®åº“
                connection = DBUtil.getConnection();
    
                // 2. è·å–æ“ä½œæ•°æ®åº“å¯¹è±¡ï¼Œé¢„ç¼–è¯‘sqlè¯­å¥ï¼ŒSqlæµ‹è¯•
                String sql = "insert into dept(depton,dname,loc) values(?,?,?)";
                preparedStatement = connection.prepareStatement(sql);
    
                // 3. å¡«å……å ä½ç¬¦, çœŸæ­£æ‰§è¡Œsqlè¯­å¥ï¼Œ
                // æ³¨æ„ï¼š å ä½ç¬¦çš„å¡«å……æ˜¯ä» 1 å¼€å§‹çš„ï¼ŒåŸºæœ¬ä¸Šæ•°æ®åº“ç›¸å…³çš„èµ·å§‹ä¸‹æ ‡ç´¢å¼•éƒ½æ˜¯ä» 1ä¸‹æ ‡å¼€å§‹çš„
                preparedStatement.setString(1, deptno);
                preparedStatement.setString(2, dname);
                preparedStatement.setString(3, loc);
    
                // è¿”å›å½±å“æ•°æ®åº“çš„è¡Œæ•°
                count = preparedStatement.executeUpdate();
    
                // 5.é‡Šæ”¾èµ„æº
            } catch (SQLException e) {
                throw new RuntimeException(e);
            } finally {
                DBUtil.close(connection, preparedStatement, null);
            }
    
            // ä¿å­˜æˆåŠŸï¼Œè¿”å›éƒ¨é—¨åˆ—è¡¨é¡µé¢
            if (count == 1) {
                // è¿™é‡Œåº”è¯¥ä½¿ç”¨ï¼Œé‡å®šå‘
                // è¿™é‡Œç”¨çš„è½¬å‘ï¼Œæ˜¯æœåŠ¡å™¨å†…éƒ¨çš„ï¼Œä¸è¦åŠ é¡¹ç›®å
                //request.getRequestDispatcher("/dept/list/").forward(request, response);
    
                // é‡å®šå‘
                response.sendRedirect(request.getContextPath() + "/dept/list/");
            } else {
                // ä¿å­˜å¤±è´¥
                // webå½“ä¸­çš„ htmlèµ„æºï¼Œè¿™é‡Œçš„ "/" è¡¨ç¤º web ç›®å½•
                //request.getRequestDispatcher("/error.html").forward(request, response);
    
                response.sendRedirect(request.getContextPath() + "/error.html");
            }
    
    
        }
    }
    
    

3\. æœ€åçš„ web.xml é…ç½®ä¿¡æ¯
--------------------

    <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"
             version="4.0">
    
    
        <!--     æŸ¥çœ‹éƒ¨é—¨åˆ—è¡¨-->
        <servlet>
            <!--        æ³¨æ„: ä¸¤ä¸ªnameå€¼è¦ä¿æŒä¸€è‡´-->
            <servlet-name>list</servlet-name>
            <servlet-class>com.RainbowSea.servlet.DeptListServlet</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>list</servlet-name>
            <!--        æ³¨æ„æ˜¯: / å¼€å§‹-->
            <url-pattern>/dept/list/</url-pattern>
        </servlet-mapping>
    
    
        <!--    éƒ¨é—¨è¯¦æƒ…-->
        <servlet>
            <servlet-name>detail</servlet-name>
            <servlet-class>com.RainbowSea.servlet.DeptDetailServlet</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>detail</servlet-name>
            <url-pattern>/dept/detail</url-pattern>
        </servlet-mapping>
    
    
        <!--    åˆ é™¤éƒ¨é—¨-->
        <servlet>
            <servlet-name>delete</servlet-name>
            <servlet-class>com.RainbowSea.servlet.DeptDelServlet</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>delete</servlet-name>
            <!--        / å¼€å§‹-->
            <url-pattern>/dept/delete</url-pattern>
        </servlet-mapping>
    
        <!--    æ–°å¢éƒ¨é—¨-->
        <servlet>
            <servlet-name>save</servlet-name>
            <servlet-class>com.RainbowSea.servlet.DeptSaveServlet</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>save</servlet-name>
            <url-pattern>/dept/save</url-pattern>
        </servlet-mapping>
    
        <!--    è·³è½¬åˆ°ä¿®æ”¹éƒ¨é—¨-->
        <servlet>
            <!--        ä¸¤ä¸ª name ä¿æŒä¸€è‡´-->
            <servlet-name>edit</servlet-name>
            <servlet-class>com.RainbowSea.servlet.DepEditServlet</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>edit</servlet-name>
            <!--        "/" å¼€å§‹-->
            <url-pattern>/dept/edit</url-pattern>
        </servlet-mapping>
    
    
        <!--    ä¿®æ”¹éƒ¨é—¨ä¿¡æ¯-->
        <servlet>
            <servlet-name>modify</servlet-name>
            <servlet-class>com.RainbowSea.servlet.DeptModifyServlet</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>modify</servlet-name>
            <url-pattern>/dept/modify</url-pattern>
        </servlet-mapping>
    
    </web-app>
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083718943-1875099387.png)

4\. ä¼˜åŒ–æ–¹æ¡ˆï¼š @WebServlet æ³¨è§£ + æ¨¡æ¿æ–¹æ³•
-------------------------------

ç”±äºè®¾è®¡åˆ°æ–‡ç« çš„ç¯‡å¹…è¿‡å¤šï¼Œå¤§å®¶æƒ³è¦äº†è§£çš„å¯ä»¥ç§»æ­¥è‡³ï¼šğŸ”œğŸ”œğŸ”œ [Servletæ³¨è§£çš„ä½¿ç”¨ï¼Œç®€åŒ–é…ç½® ä»¥åŠï¼Œä½¿ç”¨æ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ä¼˜åŒ–oaé¡¹ç›®\_ChinaRainbowSeaçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_61635597/article/details/130065076?spm=1001.2014.3001.5501)

5\. æ€»ç»“ï¼š
-------

1.  æ¯æ¬¡å‰ç«¯æäº¤çš„æ•°æ®éƒ½é€šè¿‡æµè§ˆå™¨ **F12** æ£€æŸ¥çš„æ–¹å¼ï¼ŒæŸ¥çœ‹æˆ‘ä»¬æäº¤çš„æ•°æ®æ˜¯å¦ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œæ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚
    
2.  æ¯æ¬¡åç«¯ä»å‰ç«¯æµè§ˆå™¨è·å–åˆ°çš„æ•°æ®ï¼ŒåŒæ ·éƒ½æ˜¯éœ€è¦æ‰“å°æˆ–è€…è°ƒè¯•çœ‹çœ‹ï¼Œæˆ‘ä»¬è·å–çš„æ•°æ®æ˜¯å¦å­˜åœ¨é”™è¯¯ï¼Œæˆ–è€…ä¹±ç çš„æƒ…å†µã€‚
    
3.  å¦‚æœå¯¹SQLè¯­å¥ä¸å¤ªç†Ÿç»ƒçš„è¯ï¼Œå»ºè®®æ— è®ºæ˜¯å¦æ˜¯ç®€å•çš„ SQLè¯­å¥éƒ½ï¼Œå¯ä»¥å…ˆåœ¨å¯¹åº”çš„æ•°æ®åº“ä¸­è¿è¡Œæµ‹è¯•çœ‹çœ‹ï¼Œæ˜¯å¦å­˜åœ¨é”™è¯¯ã€‚
    
4.  å°½å¯èƒ½çš„åšåˆ°ï¼Œæ¯å®ç°ä¸€ç‚¹åŠŸèƒ½å°±æµ‹è¯•ä¸€ä¸‹ï¼Œæ˜¯å¦å­˜åœ¨é”™è¯¯ï¼Œè€Œä¸æ˜¯ä¸€é¡¿æ“ä½œä¸‹æ¥ï¼Œè™½ç„¶æ‰€ä»¥ä»£ç éƒ½ç¼–å†™å®Œäº†ï¼Œä½†æ˜¯åˆ°æœ€åæµ‹è¯•çš„æ—¶å€™ï¼Œä¸€å † BUG ã€‚
    
5.  æˆ‘ä»¬åº”è¯¥æ€ä¹ˆå»å®ç°ä¸€ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ
    
    *   å»ºè®®ï¼šä½ å¯ä»¥ä»åç«¯å¾€å‰ç«¯ä¸€æ­¥ä¸€æ­¥å†™ã€‚ä¹Ÿå¯ä»¥ä»å‰ç«¯ä¸€æ­¥ä¸€æ­¥å¾€åç«¯å†™ã€‚éƒ½å¯ä»¥ã€‚ä½†æ˜¯åƒä¸‡è¦è®°ä½ä¸è¦æƒ³èµ·æ¥ä»€ä¹ˆå†™ä»€ä¹ˆã€‚ä½ å†™ä»£ç çš„è¿‡ç¨‹æœ€å¥½æ˜¯ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šç¨‹åºæ‰§è¡Œåˆ°å“ªé‡Œï¼Œä½ å°±å†™å“ªé‡Œã€‚è¿™æ ·ä¸€ä¸ªé¡ºåºæµä¸‹æ¥ä¹‹åï¼ŒåŸºæœ¬ä¸Šä¸ä¼šå‡ºç°ä»€ä¹ˆé”™è¯¯ã€æ„å¤–ã€‚
    *   ä»å“ªé‡Œå¼€å§‹ï¼Ÿ
        *   å‡è®¾ä»å‰ç«¯å¼€å§‹ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯ä»ç”¨æˆ·ç‚¹å‡»æŒ‰é’®é‚£é‡Œå¼€å§‹çš„
6.  åˆ†ææ¸…æ¥šå“ªé‡Œä½¿ç”¨çš„æ˜¯ `doGet` è¯·æ±‚ ï¼Œå“ªé‡Œä½¿ç”¨çš„æ˜¯ `doPost` è¯·æ±‚ã€‚
    
7.  åˆ†ææ¸…æ¥šå“ªé‡Œä½¿ç”¨çš„æ˜¯ `æœåŠ¡å™¨ç«¯çš„è½¬å‘` ï¼Œå“ªé‡Œä½¿ç”¨çš„æ˜¯ `é‡å®šå‘`æœºåˆ¶ã€‚
    
8.  æ³¨æ„ï¼š åœ¨æœåŠ¡å™¨å½“éœ€è¦ä½¿ç”¨åˆ°çš„ `jar` åŒ…ï¼Œå¿…é¡»åœ¨ `WEB-INF` çš„ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `lib` çš„ç›®å½•æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾ç›¸å…³çš„ ä¾èµ–`jar` åŒ…ï¼Œæ³¨æ„è·¯å¾„ä½ç½®ä¸å¯ä»¥ä¿®æ”¹ï¼Œç›®å½•æ–‡ä»¶å¿…é¡»ä¸º `lib` ä¸ç„¶ï¼Œå½“ä½ å¯åŠ¨çš„Tocmat æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•æ‰¾åˆ°è¯¥å¯¹åº”çš„ ä¾èµ–jar åŒ…çš„ã€‚
    

6\. æœ€åï¼š
-------

> é™äºè‡ªèº«æ°´å¹³ï¼Œå…¶ä¸­å­˜åœ¨çš„é”™è¯¯ï¼Œå¸Œæœ›å¤§å®¶ï¼Œç»™äºˆæŒ‡æ•™ï¼ŒéŸ©ä¿¡ç‚¹å…µâ€”â€”å¤šå¤šç›Šå–„ï¼Œè°¢è°¢å¤§å®¶ï¼Œæ±Ÿæ¹–å†è§ï¼Œåä¼šæœ‰æœŸï¼ï¼ï¼
> 
> ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img2023.cnblogs.com/blog/3084824/202304/3084824-20230411083719081-678550606.gif)