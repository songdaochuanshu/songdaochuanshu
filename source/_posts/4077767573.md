---
layout: post
title: "[æ’åºç®—æ³•] å¿«é€Ÿæ’åº (C++) (å«ä¸‰ç§å†™æ³•)"
date: "2022-11-20T14:16:01.149Z"
---
\[æ’åºç®—æ³•\] å¿«é€Ÿæ’åº (C++) (å«ä¸‰ç§å†™æ³•)
===========================

å¿«é€Ÿæ’åºè§£é‡Š
======

**å¿«é€Ÿæ’åº** _**Quick Sort**_ ä¸å½’å¹¶æ’åºä¸€æ ·ï¼Œä¹Ÿæ˜¯å…¸å‹çš„åˆ†æ²»æ³•çš„åº”ç”¨ã€‚ (å¦‚æœæœ‰å¯¹ å½’å¹¶æ’åºè¿˜ä¸äº†è§£çš„ç«¥é‹ï¼Œå¯ä»¥çœ‹çœ‹è¿™é‡Œå“Ÿ~ [å½’å¹¶æ’åº](https://www.cnblogs.com/MAKISE004/p/16908457.html))â¤â¤â¤

### å¿«é€Ÿæ’åºçš„åˆ†æ²»æ¨¡å¼

1ã€é€‰å–åŸºå‡†å€¼ï¼Œè·å–åˆ’åˆ†ä½ç½®ã€‚å°†åŸæ•°ç»„ _**a\[l, r\]**_ åˆ’åˆ†ä¸ºä¸¤ä¸ªå­æ•°ç»„ _**a\[l, mid - 1\]**_ å’Œ _**a\[mid + 1, r\]**_ã€‚åœ¨å‰ä¸€ä¸ªæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½å°äºç­‰äº _**a\[mid\]**_ï¼Œåä¸€ä¸ªæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ éƒ½å¤§äºç­‰äº _**a\[mid\]**_ã€‚è€Œæ­¤æ—¶çš„ _**a\[mid\]**_ çš„å€¼å°±æ˜¯æˆ‘ä»¬æ‰€å–çš„åŸºå‡†å€¼ï¼Œ_**mid**_ å°±æ¯æ¬¡åˆ’åˆ†çš„ä½ç½®ï¼›

2ã€é€’å½’è°ƒç”¨å¿«é€Ÿæ’åºå‡½æ•°ï¼Œåˆ†åˆ«å¯¹ä¸¤ä¸ªå­æ•°ç»„ _**a\[l, mid - 1\]**_ å’Œ _**a\[mid + 1, r\]**_ æ’åºï¼›

3ã€å¿«é€Ÿæ’åºæˆ‘ä»¬æ˜¯åœ¨åŸæ•°ç»„ä¸Šè¿›è¡Œæ“ä½œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸éœ€è¦åˆå¹¶ï¼Œæœ€å _**a\[l, r\]**_ å·²ç»æœ‰åºã€‚

### å¿«é€Ÿæ’åºçš„ä¸‰ç§å†™æ³•

å¿«é€Ÿæ’åºæ¯”è¾ƒæ™®åŠçš„æœ‰ä¸‰ç§å†™æ³•ï¼Œåˆ†åˆ«æ˜¯ **å·¦å³æŒ‡é’ˆæ³• æŒ–å‘æ³•** å’Œ **å‰åæŒ‡é’ˆæ³•**ã€‚ä¸»è¦æ˜¯**å–å¾—åˆ’åˆ†ä½ç½®å®ç°çš„æ–¹æ³•æœ‰æ‰€ä¸åŒ**ã€‚  
æ¥ä¸‹æ¥ä¼šé€ä¸ªä»‹ç»è¿™ä¸‰ç§å¿«é€Ÿæ’åºçš„å†™æ³•ã€‚

* * *

  

å·¦å³æŒ‡é’ˆæ³•
=====

å·¦å³æŒ‡é’ˆæ³•æ­¥éª¤
-------

1ã€é¦–å…ˆ æˆ‘ä»¬ä¸€èˆ¬é€‰å–æœ€å·¦è¾¹çš„å…ƒç´ ä½œä¸ºåŸºå‡†å€¼ _**key**_ã€‚

2ã€ç„¶åæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªå˜é‡ _**i**_ å’Œ _**j**_ã€‚  
å…¶ä¸­ _**i**_ ä¸ºå·¦æŒ‡é’ˆ(å…¶å®ä¸æ˜¯æŒ‡é’ˆå•¦ï¼Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿è¿™ä¹ˆå«å®ƒğŸ˜‹)ï¼Œåˆå§‹ i = 0ã€‚ _**j**_ ä¸ºå³æŒ‡é’ˆï¼Œåˆå§‹ j = r - 1ï¼Œå‘å·¦éå†ä¸æ–­æ‰¾åˆ°å°äºåŸºå‡†å€¼ _**key**_ çš„å…ƒç´ ã€‚

3ã€æˆ‘ä»¬**å…ˆåŠ¨å³æŒ‡é’ˆ** _**j**_ å‘å·¦éå†ç›´åˆ°æ‰¾åˆ°å°äºå½“å‰åŸºå‡†å€¼ _**key**_ çš„å…ƒç´ ï¼›ç„¶åæˆ‘ä»¬**å†åŠ¨å·¦æŒ‡é’ˆ** _**i**_ å‘å³éå†ç›´åˆ°æ‰¾åˆ°å¤§äºå½“å‰åŸºå‡†å€¼ _**key**_ çš„å…ƒç´ ã€‚  
å½“ _**i**_ å’Œ _**j**_ åˆ†åˆ«æ‰¾åˆ°å®ƒä»¬è¦æ‰¾çš„å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸¤ä¸ªå…ƒç´ è¿›è¡Œä½ç½®äº¤æ¢ã€‚( _**åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬è¦ä¿æŒ i < j**_ )

4ã€é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æœ€åæˆ‘ä»¬å¯çˆ±çš„å·¦å³æŒ‡é’ˆç›¸é‡ï¼Œè¿™æ—¶æˆ‘ä»¬å†å°†åŸºå‡†å€¼ _**key**_ï¼Œæ”¾åˆ°è¿™ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„ä½ç½®ã€‚æ­¤æ—¶æˆ‘ä»¬å°±å¾—åˆ°äº†å½“å‰åˆ’åˆ†çš„ä½ç½®ï¼ŒåŸºå‡†å€¼ _**key**_ ä¹Ÿå®Œæˆäº†å½’ä½ã€‚

### å·¦å³æŒ‡é’ˆæ³•ç§»åŠ¨æŒ‡é’ˆå…ˆåé¡ºåºé—®é¢˜

åœ¨ä¸Šè¿°æ­¥éª¤ä¸­ï¼Œæœ‰äº›äººä¼šæ„Ÿåˆ°ç–‘æƒ‘ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬å†ç§»åŠ¨æŒ‡é’ˆæ—¶ï¼Œæ¯æ¬¡éƒ½è¦ **å…ˆç§»åŠ¨å³æŒ‡é’ˆ**ï¼Œ**å†ç§»åŠ¨å·¦æŒ‡é’ˆ**ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼ŸğŸ˜•ğŸ˜•ğŸ˜•

åœ¨å–åŸºå‡†å€¼æ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯å°†åºåˆ—çš„æœ€å·¦è¾¹ä½ç½®çš„å…ƒç´ ä½œä¸ºåŸºå‡†å€¼ã€‚æˆ‘ä»¬æ¯æ¬¡äº¤æ¢å®Œå…ƒç´ åï¼Œå·¦å³æŒ‡é’ˆéƒ½ä¼šç»§ç»­å¯»æ‰¾ä»–ä»¬è¦æ‰¾çš„å€¼ï¼Œè§‚æ„Ÿä¸Šå°±æ˜¯ç›¸äº’é è¿‘ã€‚è€Œé—®é¢˜å°±å‡ºåœ¨æˆ‘ä»¬**é€€å‡ºå¾ªç¯çš„é‚£ä¸€åˆ»**ã€‚

æˆ‘ä»¬ä¸€ç›´ä¿æŒ _**i < j**_ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¼šåœ¨ _**i == j**_ æ—¶é€€å‡ºå¾ªç¯ã€‚å‡è®¾ åœ¨æŸæ¬¡äº¤æ¢ä¹‹åï¼Œ**æ­¤æ—¶** _**j**_ **æŒ‡å‘çš„æ˜¯äº¤æ¢ä¹‹åçš„ä¸€ä¸ªå¤§äºåŸºå‡†å€¼çš„å…ƒç´ **ï¼Œå¦‚æœæˆ‘ä»¬å…ˆåŠ¨å·¦æŒ‡é’ˆ _**i**_ å»å¯»æ‰¾ä¸€ä¸ªå¤§äºåŸºå‡†å€¼çš„å…ƒç´ ï¼Œç„¶é¹…è¿˜æœªæ‰¾åˆ°å°±å·²ç»å’Œå³æŒ‡é’ˆ _**j**_ ç›¸é‡äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦é€€å‡ºå¾ªç¯ï¼Œäº¤æ¢åŸºå‡†å€¼ _**key**_ åˆ°å½“å‰ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„ä½ç½®ã€‚  
**ä½†æ˜¯!!!**ï¼Œæ­¤æ—¶ _**i**_ å’Œ _**j**_ æŒ‡å‘çš„æ˜¯å¤§äºåŸºå‡†å€¼çš„å…ƒç´ ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿›è¡Œäº¤æ¢åŸºå‡†å€¼ä½ç½®æ“ä½œåï¼Œè¿™ä¸ªå¤§äºåŸºå‡†å€¼çš„å…ƒç´ å°±è¢«æ¢åˆ°äº†åºåˆ—çš„æœ€å·¦ç«¯ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™æ—¶å€™å‡ºç°äº†éå¸¸éå¸¸éå¸¸ä¸¥é‡çš„é”™è¯¯ã€‚

é‚£å¦‚æœæˆ‘ä»¬å…ˆåŠ¨å³æŒ‡é’ˆ _**j**_ï¼Œå»å¯»æ‰¾ä¸€ä¸ªå°äºåŸºå‡†å€¼çš„å…ƒç´ ï¼Œç„¶é¹…æ²¡æœ‰æ‰¾åˆ°å°±å·²ç»å’Œå·¦æŒ‡é’ˆ _**i**_ ç›¸é‡äº†ï¼Œè¿™ä¸ªæ—¶å€™é€€å‡ºå¾ªç¯ï¼Œ_**i**_ å’Œ _**j**_ æŒ‡å‘çš„ä¸€å®šæ˜¯ä¸€ä¸ªå°äºç­‰äºåŸºå‡†å€¼çš„å€¼ã€‚

ç©¶å…¶åŸå› ï¼Œè¿™å…¶å®æ˜¯æˆ‘ä»¬å–æœ€å·¦è¾¹çš„å…ƒç´ ä½œä¸ºåŸºå‡†å€¼å¯¼è‡´çš„ã€‚æˆ‘ä»¬éœ€è¦ä¿è¯æ¯æ¬¡äº¤æ¢è¿‡æ¥çš„å…ƒç´ æ˜¯å°äºç­‰äºåŸºå‡†å€¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬**å…ˆåŠ¨å³æŒ‡é’ˆ**ï¼Œ**å†åŠ¨å·¦æŒ‡é’ˆ**ã€‚

* * *

  

å·¦å³æŒ‡é’ˆæ³•åŠ¨æ€æ¼”ç¤º
---------

### æˆ‘ä»¬ä»¥åºåˆ— \[3,14,6,1,2,17,7\] ä¸ºä¾‹è¿›è¡ŒåŠ¨æ€æ¼”ç¤ºã€‚(åé¢è¿˜ä¼šæœ‰å…ˆåŠ¨å·¦æŒ‡é’ˆçš„é”™è¯¯æ¼”ç¤º)

### å·¦å³æŒ‡é’ˆæ³•æ­£ç¡®æ¼”ç¤º

![](https://img2022.cnblogs.com/blog/3039354/202211/3039354-20221120200252546-567967815.png)

### å·¦å³æŒ‡é’ˆæ³•é”™è¯¯æ¼”ç¤º

![](https://img2022.cnblogs.com/blog/3039354/202211/3039354-20221120200309567-62512051.png)

* * *

  

å·¦å³æŒ‡é’ˆæ³•æ ¸å¿ƒä»£ç 
---------

    //å·¦å³æŒ‡é’ˆæ³•  
    int Partition_Hoare(vector<int> &a, int left, int right){
        int i = left;
        int j = right;
        int key = a[left];
    
        while(i != j){
            while(i < j && a[j] >= key)      	 //å‘å·¦æ‰¾åˆ°å°äºåŸºå‡†å€¼çš„å€¼çš„ä¸‹æ ‡
                j--;
            while(i < j && a[i] <= key)      	 //å‘å³æ‰¾åˆ°å¤§äºåŸºå‡†å€¼çš„å€¼çš„ä¸‹æ ‡
                i++;
    	swap(a[i], a[j]);
    	}
        /*   iç­‰äºjæ—¶è·³å‡ºå¾ªç¯ å½“å‰åŸºå‡†å€¼æ­¤æ—¶åœ¨ä¸‹æ ‡ä¸ºiçš„ä½ç½®(åˆé€‚çš„ä½ç½®)   */
        swap(a[left], a[i]);	                 //æœ€å·¦è¾¹çš„å…ƒç´ å˜ä¸ºå¤„äºå½“å‰åˆé€‚ä½ç½®çš„å…ƒç´ ,æŠŠåŸºå‡†å€¼æ”¾åœ¨åˆé€‚ä½ç½®                                                 
        return i;                                  //è¿”å›åˆé€‚ä½ç½®(i,jéƒ½å¯ä»¥)
    }
    

* * *

  

æŒ–å‘æ³•
===

æŒ–å‘æ³•æ­¥éª¤
-----

æŒ–å‘æ³•é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ¯æ¬¡æŒ–ä¸€ä¸ªå‘å¡«å…¥å…ƒç´ ä½¿å…¶å½’ä½ã€‚å’Œå·¦å³æŒ‡é’ˆæ³•ä¸€æ ·ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦ä¸¤ä¸ªå˜é‡ _**i**_ å’Œ _**j**_ã€‚  
1ã€æˆ‘ä»¬ä¸€èˆ¬å–æœ€å·¦è¾¹çš„å…ƒç´ ä¸ºåŸºå‡†å€¼ï¼Œç„¶ååœ¨åŸºå‡†å€¼å¤„æŒ–ç©º(æŒ–å‘)

2ã€å…ˆåŠ¨å³æŒ‡é’ˆ _**j**_ å‘å·¦æ‰¾åˆ°ä¸€ä¸ªå°äºåŸºå‡†å€¼çš„å…ƒç´ ï¼Œç„¶åå°†å…¶å¡«å…¥å…ˆå‰æŒ–çš„å‘ä¸­ï¼ŒåŒæ—¶ _**j**_ æŒ‡å‘çš„ä½ç½®ä¹Ÿå¤šå‡ºæ¥ä¸€ä¸ªå‘ä½ã€‚

3ã€å†åŠ¨å·¦æŒ‡é’ˆ _**i**_ å‘å³æ‰¾åˆ°ä¸€ä¸ªå¤§äºåŸºå‡†å€¼çš„å…ƒç´ ï¼Œç„¶åå°†å…¶å¡«å…¥å…ˆå‰æŒ–çš„å‘ä¸­ï¼ŒåŒæ—¶ _**i**_ æŒ‡å‘çš„ä½ç½®åˆå¤šå‡ºæ¥ä¸€ä¸ªå‘ä½ã€‚

4ã€é‡å¤ä¸Šè¿°æ“ä½œï¼Œç›´åˆ°æœ€åä¸¤ä¸ªæŒ‡é’ˆç›¸é‡ï¼Œæ­¤æ—¶å†åœ¨è¿™ä¸ªå‘ä½ä¸Šå¡«å…¥åŸºå‡†å€¼ï¼Œå³å®Œæˆäº†åŸºå‡†å€¼çš„å½’ä½ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆ’åˆ†çš„ä½ç½®ã€‚

_(å…·ä½“å®ç°è¿™ä¸ªæŒ–å‘å¡«å‘çš„æ–¹å¼å¯ä»¥æ˜¯å…ƒç´ å€¼çš„è¦†ç›–ï¼Œä¹Ÿå¯ä»¥æ˜¯å…ƒç´ äº¤æ¢çš„å½¢å¼ï¼Œåœ¨åé¢çš„æ ¸å¿ƒä»£ç ä¸­ä¼šç»™å‡ºè¿™ä¸¤ç§æ–¹å¼)_

æŒ–å‘æ³•åŠ¨æ€æ¼”ç¤º
-------

### æˆ‘ä»¬ä»¥åºåˆ— \[3,14,6,1,2,17,7\] ä¸ºä¾‹è¿›è¡ŒåŠ¨æ€æ¼”ç¤ºã€‚

### å›¾(1)

![](https://img2022.cnblogs.com/blog/3039354/202211/3039354-20221120201745515-1870665393.png)

### å›¾(2)

![](https://img2022.cnblogs.com/blog/3039354/202211/3039354-20221120201803028-1927612119.png)

* * *

  

æŒ–å‘æ³•æ ¸å¿ƒä»£ç 
-------

    //æŒ–å‘æ³•1  
    int Partition_DigI(vector<int> &a, int left, int right){
        int i = left;
        int j = right;
        int key = a[left];
    
        while(i != j){
    	while(i < j && a[j] >= key)          //å¿…é¡»å…ˆåŠ¨å³è¾¹çš„ å› ä¸ºå–çš„åŸºå‡†å€¼åœ¨å·¦è¾¹
    	    j--;                             //å‘å·¦å¯»æ‰¾ç›´åˆ°æ‰¾åˆ°æ¯”åŸºå‡†å€¼å°çš„
    	a[i] = a[j];                         //æŒ–å‘ å¡«å…¥æ¯”åŸºå‡†å€¼å°çš„å€¼
    
    	while(i < j && a[i] <= key)          //å†åŠ¨å·¦è¾¹çš„
    	    i++;                             //å‘å³å¯»æ‰¾ç›´åˆ°æ‰¾åˆ°æ¯”åŸºå‡†å€¼å¤§çš„ 
    	a[j] = a[i];                         //æŒ–å‘ å¡«å…¥æ¯”åŸºå‡†å€¼å¤§çš„å€¼
        }
        /*   iç­‰äºjæ—¶è·³å‡ºå¾ªç¯ ä¸‹æ ‡ä¸ºiçš„ä½ç½®å³ä¸ºåˆé€‚çš„æ’å…¥ä½ç½®   */
        a[i] = key;                              //åœ¨i,jç›¸é‡çš„åœ°æ–¹å¡«å…¥åŸºå‡†å€¼
        return i;
    }
    
    //æŒ–å‘æ³•2 
    int Partition_DigII(vector<int> &a, int left, int right){
        int i = left;                            //ä»å·¦è¾¹å¼€å§‹
        int j = right;                           //ä»å³è¾¹å¼€å§‹
        int key = a[left];                       //å°†æœ€å·¦è¾¹çš„æ•°è®¾ä¸ºåŸºå‡†å€¼	
    
        while(i != j){                           
    	while(i < j && a[j] >= key)          //å¿…é¡»å…ˆåŠ¨å³è¾¹çš„ å› ä¸ºå–çš„åŸºå‡†å€¼åœ¨å·¦è¾¹
    	    j--;                             //å‘å·¦å¯»æ‰¾ç›´åˆ°æ‰¾åˆ°æ¯”åŸºå‡†å€¼å°çš„
    	swap(a[i], a[j]);                    //äº¤æ¢
    	i++;                                 //çœ‹ä¸‹ä¸€ä¸ªï¼ˆå¯ä»¥çœç•¥ï¼‰
    
    	while(i < j && a[i] <= key)          //å†åŠ¨å·¦è¾¹çš„
    	    i++;                             //å‘å³å¯»æ‰¾ç›´åˆ°æ‰¾åˆ°æ¯”åŸºå‡†å€¼å¤§çš„    
    	swap(a[i], a[j]);                    //äº¤æ¢
    	j--;                                 //çœ‹ä¸‹ä¸€ä¸ªï¼ˆå¯ä»¥çœç•¥ï¼‰
        }  
        /* ä¸€è½®å¾ªç¯ååŸºå‡†å€¼æ‰€åœ¨ä½ç½®å·¦è¾¹çš„æ•°éƒ½æ¯”åŸºå‡†å€¼å°,å³è¾¹çš„éƒ½æ¯”åŸºå‡†å€¼å¤§ */
        /*   iç­‰äºjæ—¶è·³å‡ºå¾ªç¯ å½“å‰åŸºå‡†å€¼æ­¤æ—¶åœ¨ä¸‹æ ‡ä¸ºiçš„ä½ç½®(åˆé€‚çš„ä½ç½®)   */                       
        return i;                                //è¿”å›åŸºå‡†å€¼åˆé€‚ä½ç½®
    }
    

* * *

  

å‰åæŒ‡é’ˆæ³•
=====

å‰åæŒ‡é’ˆæ³•æ­¥éª¤
-------

å‰åæŒ‡é’ˆæ³•åŒæ ·éœ€è¦ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæ˜¯ _**pre**_ï¼Œä¸€ä¸ªæ˜¯ _**curr**_ã€‚_**pre**_ æœ€åæ‰¾åˆ°çš„æ˜¯åˆ’åˆ†åå·¦åŠéƒ¨åˆ†æœ€åä¸€ä¸ªå°äºåŸºå‡†å€¼çš„å…ƒç´ ã€‚  
1ã€ä¸€å¼€å§‹æˆ‘ä»¬ä¸€èˆ¬å°†å‰æŒ‡é’ˆ _**pre**_ æŒ‡å‘å¾…æ’åºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒåæŒ‡é’ˆ _**curr**_ æŒ‡å‘ _**pre**_ åé¢çš„ä¸€ä¸ªå…ƒç´ ã€‚

2ã€ç„¶åæˆ‘ä»¬è®© åæŒ‡é’ˆ _**curr**_ å»å¯»æ‰¾å°äºå½“å‰åŸºå‡†å€¼çš„å…ƒç´ ï¼Œè‹¥æ‰¾åˆ°è¿™ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶éœ€è¦å°†è¿™ä¸ªå°äºåŸºå‡†å€¼çš„å…ƒç´ å’Œå½“å‰ å‰æŒ‡é’ˆ _**pre**_ åä¸€ä¸ªçš„ä½ç½®çš„å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œå³ä¸ _**pre + 1**_ ä½ç½®çš„å…ƒç´ è¿›è¡Œäº¤æ¢ï¼ŒåŒæ—¶å‰æŒ‡é’ˆ _**pre**_ ä¹Ÿå¾€åç§»åŠ¨ä¸€æ­¥ã€‚

3ã€åœ¨ä¸Šè¿°è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦ä¿æŒ _**curr <= r**_ï¼Œå½“ _**curr > r**_ é€€å‡ºå¾ªç¯æ—¶ï¼Œéœ€è¦å°†å½“å‰ _**pre**_ æ‰€æŒ‡å‘çš„å…ƒç´ å’ŒåŸºå‡†å€¼è¿›è¡Œäº¤æ¢ã€‚æœ€åè¿”å›è¿™ä¸ªpreï¼Œå³ä¸ºæˆ‘ä»¬åˆ’åˆ†çš„ä½ç½®ã€‚

* * *

  

å‰åæŒ‡é’ˆæ³•åŠ¨æ€æ¼”ç¤º
---------

### æˆ‘ä»¬ä»¥åºåˆ— \[3,14,6,1,2,17,7\] ä¸ºä¾‹è¿›è¡ŒåŠ¨æ€æ¼”ç¤ºã€‚

### å›¾(1)

![](https://img2022.cnblogs.com/blog/3039354/202211/3039354-20221120203738510-1690193373.png)

### å›¾(2)

![](https://img2022.cnblogs.com/blog/3039354/202211/3039354-20221120203745963-695196626.png)

* * *

  

å‰åæŒ‡é’ˆæ³•æ ¸å¿ƒä»£ç 
---------

    //å‰åæŒ‡é’ˆæ³•  
    int Partition_PreAndCurr(vector<int> &a, int left, int right){
        int pre = left;                          //preæœ€åæ‰¾åˆ°å·¦åŠéƒ¨åˆ†æœ€åä¸€ä¸ªå°äºåŸºå‡†å€¼çš„å…ƒç´ 
        int curr = pre + 1;                      //curræ‰¾åˆ°preæŒ‡å‘å…ƒç´ ä¹‹åçš„ä¸‹ä¸€ä¸ªå°äºåŸºå‡†å€¼çš„å…ƒç´ 
        int key = a[left];
    
        while(curr <= right){
    	if(a[curr] < key && ++pre != curr)   //å½“a[curr]>=keyæ—¶preä¿æŒä¸åŠ¨,ç›´åˆ°æœ€åcurræ‰¾åˆ°ä¸‹ä¸€ä¸ªå°äºåŸºå‡†å€¼çš„å…ƒç´ 
    	    swap(a[curr], a[pre]);           //preå¾€åç§»åŠ¨åˆ°å…¶ä¸‹ä¸€ä¸ªä½ç½®,å¹¶äº¤æ¢å‰åæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ 
    	curr++;
        }
        swap(a[left], a[pre]);                   //æœ€åå°†åŸºå‡†å€¼å’Œæ­¤æ—¶å¤„äºpreä½ç½®çš„å°äºåŸºå‡†å€¼çš„å…ƒç´ äº¤æ¢
        return pre;
    }
    

* * *

  

å¿«é€Ÿæ’åºæ—¶é—´å¤æ‚åº¦
=========

å‡è®¾æ—¶é—´å¤æ‚åº¦ä¸º _**T(n)**_ã€‚åœ¨è¿›è¡Œå–å¾—åˆ’åˆ†ä½ç½®ä¸Šæˆ‘ä»¬éœ€è¦æ¶ˆè€— _**O(n)**_ çš„æ—¶é—´ï¼Œåœ¨é€’å½’è°ƒç”¨å¿«é€Ÿæ’åºå‡½æ•°ä¸Šï¼Œæœ€å¥½æƒ…å†µä¸‹å¦‚æœæ¯æ¬¡æˆ‘ä»¬å–å¾—çš„åˆ’åˆ†ä½ç½®ä¸ºn/2çš„ä½ç½®ï¼Œå³æ¶ˆè€—äº† _**2T(n/2)**_ çš„æ—¶é—´ã€‚æœ€åæƒ…å†µä¸‹å¦‚æœæ¯æ¬¡æˆ‘ä»¬å–å¾—çš„åˆ’åˆ†ä½ç½®ä¸ºé¦–æˆ–å°¾çš„ä½ç½®ï¼Œå³æ¶ˆè€— _**T(n-1)+T(0)**_çš„æ—¶é—´ã€‚  
æ•…æ—¶é—´å¤æ‚åº¦å¦‚ä¸‹

### æœ€ä¼˜æ—¶é—´å¤æ‚åº¦

![](https://img2022.cnblogs.com/blog/3039354/202211/3039354-20221120205648639-367871772.png)

### æœ€åæ—¶é—´å¤æ‚åº¦

![](https://img2022.cnblogs.com/blog/3039354/202211/3039354-20221120205705145-688818162.png)

* * *

  

å–åŸºå‡†å€¼ä¼˜åŒ–
======

å¦‚ä½•é«˜æ•ˆå–åŸºå‡†å€¼
--------

å¯¹äºå–åŸºå‡†å€¼ï¼Œæˆ‘ä»¬å‘ç° å¦‚æœå½“å‰æ‰€å–çš„åŸºå‡†å€¼æ°å¥½æ˜¯å½“å‰åºåˆ—ä¸­æœ€å°çš„æ•°æˆ–è€…æœ€å¤§çš„æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„åˆ’åˆ†ä½ç½®å¿…ç„¶æ˜¯é¦–æˆ–å°¾çš„ä½ç½®ï¼Œå¦‚æœæ¯æ¬¡éƒ½è¿™ä¸ªäºšç±½ï¼Œæˆ‘ä»¬æ¶ˆè€—çš„æ—¶é—´ä¼šéå¸¸çš„å¤šï¼Œè¿™æ˜¾ç„¶å°±æ˜¯æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦çš„çŠ¶å†µã€‚

### é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å°½é‡åœ°é¿å…è¿™ä»¶äº‹å‘¢ï¼ŸğŸ¤”ğŸ¤”ğŸ¤”

æˆ‘ä»¬è‡ªç„¶ä¼šæƒ³åˆ°éšæœºå–æ•°ï¼Œè¿™å›ºç„¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åŠæ³•ï¼Œä½†æ˜¯è¿™ä¸ªä¸–ç•Œå……æ»¡äº†æ— é™å¯èƒ½æ€§ã€‚å‡å¦‚æˆ‘ä»¬åŸå…ˆæœ€å·¦è¾¹çš„å…ƒç´ å¹¶ä¸æ˜¯æœ€å°æˆ–æœ€å¤§çš„ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯éšæœºå–åˆ°çš„å…ƒç´ å´æ°å¥½æ˜¯é‚£ä¸ªæœ€å°æˆ–æœ€å¤§çš„å…ƒç´ å‘¢ï¼Ÿ

_(å½“ç„¶éšæœºå–æ•°è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯å€¼å¾—å°è¯•çš„ï¼Œåç»­ç¨‹åºä¸­æˆ‘ä¸ä¼šç”¨è¿™ä¸ªæ–¹å¼å®ç°å–åŸºå‡†å€¼çš„ä¼˜åŒ–ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œåªéœ€è¦æŠŠå–åŸºå‡†å€¼çš„å‡ è¡Œä»£ç æ”¹æˆå¦‚ä¸‹å°±å¯ä»¥äº†)_

    int random = rand() % (right - left + 1) + left;  
    swap(a[random], a[left]);
    int key = a[left]
    

### ä¸ºäº†é¿å…è¿™ç§å……æ»¡æˆå‰§æ€§çš„æƒ…å†µï¼Œæˆ‘ä»¬é‡‡å– **ä¸‰æ•°å–ä¸­** çš„æ–¹æ³•å–åŸºå‡†å€¼ã€‚

ä¸‰æ•°å–ä¸­ï¼Œå°±æ˜¯å–åºåˆ—ä¸­çš„æœ€å·¦è¾¹ï¼Œä¸­é—´ï¼Œä»¥åŠæœ€å³è¾¹ä¸‰ä¸ªæ•°è¿›è¡Œæ¯”è¾ƒï¼Œä»¥è¿™ä¸‰ä¸ªæ•°å¤§å°ä¸ºä¸­çš„å…ƒç´ ä½œä¸ºåŸºå‡†å€¼ã€‚è¿™æ ·å¯ä»¥æ›´å¤§ç¨‹åº¦ä¸Šé¿å…åˆ’åˆ†ä½ç½®ä¸å¥½çš„æƒ…å†µï¼Œå³ä½¿å…¶å¹¶ä¸èƒ½å½»åº•é¿å…ï¼Œä½†æ˜¯æ˜¯ä¸€ä¸ªå¾ˆå¥½åœ°åŠæ³•ã€‚

* * *

  

å–åŸºå‡†å€¼ä¼˜åŒ–æ ¸å¿ƒä»£ç 
----------

    int GetMid(int a[], int left, int right){
    	int mid = (left + right)>>1;   
    	if(a[left] < a[mid])
    	    if(a[mid] < a[right])
    		return mid;                      //midä¸ºä¸­é—´å€¼
    	    else
    		if(a[left] < a[right])
    		    return right;                //rightä¸ºä¸­é—´å€¼
    		else
    		    return left;                 //leftä¸ºä¸­é—´å€¼
    	else
    	    if(a[mid] > a[right])
    		return mid;                      //midä¸ºä¸­é—´å€¼
    	    else
    		if(a[left] > a[right])
    		    return right;                //rightä¸ºä¸­é—´å€¼
    		else
    		    return left;                 //leftä¸ºä¸­é—´å€¼
    }
    
    

* * *

  

å®Œæ•´ç¨‹åºæºä»£ç 
=======

    #include<iostream>
    #include<vector>
    #include<time.h>
    using namespace std;
    
    /*                               1                                  */
    //å·¦å³æŒ‡é’ˆæ³•  
    int Partition_Hoare(vector<int> &a, int left, int right){
    	int i = left;
    	int j = right;
    	int key = a[left];
    
    	while(i != j){
    	    while(i < j && a[j] >= key)      	 //å‘å·¦æ‰¾åˆ°å°äºåŸºå‡†å€¼çš„å€¼çš„ä¸‹æ ‡
                    j--;
                while(i < j && a[i] <= key)      	 //å‘å³æ‰¾åˆ°å¤§äºåŸºå‡†å€¼çš„å€¼çš„ä¸‹æ ‡
                    i++;
    	    swap(a[i], a[j]);
    	}
    	/*   iç­‰äºjæ—¶è·³å‡ºå¾ªç¯ å½“å‰åŸºå‡†å€¼æ­¤æ—¶åœ¨ä¸‹æ ‡ä¸ºiçš„ä½ç½®(åˆé€‚çš„ä½ç½®)   */
    	swap(a[left], a[i]);	                 //æœ€å·¦è¾¹çš„å…ƒç´ å˜ä¸ºå¤„äºå½“å‰åˆé€‚ä½ç½®çš„å…ƒç´ ,æŠŠåŸºå‡†å€¼æ”¾åœ¨åˆé€‚ä½ç½®                                     
    	return i;                                //è¿”å›åˆé€‚ä½ç½®(i,jéƒ½å¯ä»¥)
    }
    
    
    
    /*                                 2                                */
    //æŒ–å‘æ³•1  
    int Partition_DigI(vector<int> &a, int left, int right){
        int i = left;
        int j = right;
        int key = a[left];
    
        while(i != j){
    	while(i < j && a[j] >= key)          //å¿…é¡»å…ˆåŠ¨å³è¾¹çš„ å› ä¸ºå–çš„åŸºå‡†å€¼åœ¨å·¦è¾¹
    	    j--;                             //å‘å·¦å¯»æ‰¾ç›´åˆ°æ‰¾åˆ°æ¯”åŸºå‡†å€¼å°çš„
    	a[i] = a[j];                         //æŒ–å‘ å¡«å…¥æ¯”åŸºå‡†å€¼å°çš„å€¼
    
    	while(i < j && a[i] <= key)          //å†åŠ¨å·¦è¾¹çš„
    	    i++;                             //å‘å³å¯»æ‰¾ç›´åˆ°æ‰¾åˆ°æ¯”åŸºå‡†å€¼å¤§çš„ 
    	a[j] = a[i];                         //æŒ–å‘ å¡«å…¥æ¯”åŸºå‡†å€¼å¤§çš„å€¼
        }
        /*   iç­‰äºjæ—¶è·³å‡ºå¾ªç¯ ä¸‹æ ‡ä¸ºiçš„ä½ç½®å³ä¸ºåˆé€‚çš„æ’å…¥ä½ç½®   */
        a[i] = key;                              //åœ¨i,jç›¸é‡çš„åœ°æ–¹å¡«å…¥åŸºå‡†å€¼
        return i;
    }
    
    //æŒ–å‘æ³•2 
    int Partition_DigII(vector<int> &a, int left, int right){
        int i = left;                            //ä»å·¦è¾¹å¼€å§‹
        int j = right;                           //ä»å³è¾¹å¼€å§‹
        int key = a[left];                       //å°†æœ€å·¦è¾¹çš„æ•°è®¾ä¸ºåŸºå‡†å€¼	
    
        while(i != j){                           
    	while(i < j && a[j] >= key)          //å¿…é¡»å…ˆåŠ¨å³è¾¹çš„ å› ä¸ºå–çš„åŸºå‡†å€¼åœ¨å·¦è¾¹
    	    j--;                             //å‘å·¦å¯»æ‰¾ç›´åˆ°æ‰¾åˆ°æ¯”åŸºå‡†å€¼å°çš„
    	swap(a[i], a[j]);                    //äº¤æ¢
    	i++;                                 //çœ‹ä¸‹ä¸€ä¸ªï¼ˆå¯ä»¥çœç•¥ï¼‰
    
    	while(i < j && a[i] <= key)          //å†åŠ¨å·¦è¾¹çš„
    	    i++;                             //å‘å³å¯»æ‰¾ç›´åˆ°æ‰¾åˆ°æ¯”åŸºå‡†å€¼å¤§çš„    
    	swap(a[i], a[j]);                    //äº¤æ¢
    	j--;                                 //çœ‹ä¸‹ä¸€ä¸ªï¼ˆå¯ä»¥çœç•¥ï¼‰
    	}  
    	/* ä¸€è½®å¾ªç¯ååŸºå‡†å€¼æ‰€åœ¨ä½ç½®å·¦è¾¹çš„æ•°éƒ½æ¯”åŸºå‡†å€¼å°,å³è¾¹çš„éƒ½æ¯”åŸºå‡†å€¼å¤§ */
        /*   iç­‰äºjæ—¶è·³å‡ºå¾ªç¯ å½“å‰åŸºå‡†å€¼æ­¤æ—¶åœ¨ä¸‹æ ‡ä¸ºiçš„ä½ç½®(åˆé€‚çš„ä½ç½®)   */                       
        return i;                                //è¿”å›åŸºå‡†å€¼åˆé€‚ä½ç½®
    }
    
    
    
    /*                               3                                  */
    //å‰åæŒ‡é’ˆæ³•  
    int Partition_PreAndCurr(vector<int> &a, int left, int right){
        int pre = left;                          //preæœ€åæ‰¾åˆ°å·¦åŠéƒ¨åˆ†æœ€åä¸€ä¸ªå°äºåŸºå‡†å€¼çš„å…ƒç´ 
        int curr = pre + 1;                      //curræ‰¾åˆ°preæŒ‡å‘å…ƒç´ ä¹‹åçš„ä¸‹ä¸€ä¸ªå°äºåŸºå‡†å€¼çš„å…ƒç´ 
        int key = a[left];
    
        while(curr <= right){
    	if(a[curr] < key && ++pre != curr)   //å½“a[curr]>=keyæ—¶preä¿æŒä¸åŠ¨
    	    swap(a[curr], a[pre]);           //preå¾€åç§»åŠ¨åˆ°å…¶ä¸‹ä¸€ä¸ªä½ç½®,å¹¶äº¤æ¢å‰åæŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ 
    	curr++;
        }
        swap(a[left], a[pre]);                   //æœ€åå°†åŸºå‡†å€¼å’Œæ­¤æ—¶å¤„äºpreä½ç½®çš„å°äºåŸºå‡†å€¼çš„å…ƒç´ äº¤æ¢
        return pre;
    }
    
    
    
    /*                               4                                  */
    //å–åŸºå‡†å€¼çš„ä¼˜åŒ–    ä¸‰æ•°å–ä¸­
    int GetMid(int a[], int left, int right){
    	int mid = (left + right)>>1;   
    	if(a[left] < a[mid])
    	    if(a[mid] < a[right])
    		return mid;                      //midä¸ºä¸­é—´å€¼
    	    else
    		if(a[left] < a[right])
    		    return right;                //rightä¸ºä¸­é—´å€¼
    		else
    		    return left;                 //leftä¸ºä¸­é—´å€¼
    	else
    	    if(a[mid] > a[right])
    		return mid;                      //midä¸ºä¸­é—´å€¼
    	    else
    		if(a[left] > a[right])
    		    return right;                //rightä¸ºä¸­é—´å€¼
    		else
    		    return left;                 //leftä¸ºä¸­é—´å€¼
    }
    
    
    //å·¦å³æŒ‡é’ˆæ³• ä¸‰æ•°å–ä¸­ä¼˜åŒ–
    int Partition_Better(vector<int> &a, int left, int right){
        int pos = GetMid(a, left, right);
        swap(a[pos], a[left]);                   //å°†å–å¾—çš„åŸºå‡†å€¼å’Œç¬¬ä¸€ä¸ªä½ç½®äº¤æ¢
    
        int i = left;
        int j = right;
        int key = a[left];
    	
        while(i != j){
    	while(i < j && a[j] >= key)
    	    j--;
    	while(i < j && a[i] <= key)
    	    i++;
    	swap(a[i], a[j]);
        }
    
        swap(a[i], a[left]);
        return i;
    }
    
    
    
    /*******************************************************************/
    void Quick_Sort(vector<int> &a, int left, int right){
        if( left >= right )
    	return;   
    
        //int i = Partition_Hoare(a, left ,right); //åˆ†å‰²    C(n) = n - 1
        //int i = Partition_DigI(a, left, right);
        //int i = Partition_DigII(a, left, right);
        //int i = Partition_PreAndCurr(a, left, right);
    
        int i = Partition_Better(a, left, right);   
        Quick_Sort(a, left, i - 1);              //é€’å½’å·¦è¾¹çš„éƒ¨åˆ†   
        Quick_Sort(a, i + 1, right);             //é€’å½’å³è¾¹çš„éƒ¨åˆ†  
    }  
    
    
    void show(vector<int> &v){
        for(auto &x : v)
    	cout<<x<<" ";
        cout<<endl;
    }
    
    
    main(){
        vector<int> v;
        srand((int)time(0));
        int n = 50;
        while(n--)
    	v.push_back(rand() % 100 + 1);
        show(v);
    
        Quick_Sort(v, 0, v.size() - 1);
    
        cout<<endl<<endl;
        show(v);
    }
    

* * *

  

### ç¨‹åºè¿è¡Œç»“æœå›¾

![](https://img2022.cnblogs.com/blog/3039354/202211/3039354-20221120212157370-1124856742.png)

ä¸€åˆ‡éƒ½æ˜¯å‘½è¿çŸ³ä¹‹é—¨çš„é€‰æ‹©ï¼Œæœ¬æ–‡ç« æ¥æºäºåšå®¢å›­ï¼Œä½œè€…ï¼š[AmÎ±deus](https://www.cnblogs.com/MAKISE004/)ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š[https://www.cnblogs.com/MAKISE004/p/16909610.html](https://www.cnblogs.com/MAKISE004/p/16909610.html)