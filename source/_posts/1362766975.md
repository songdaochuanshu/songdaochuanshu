---
layout: post
title: "ç°ä»£ CSS ä¹‹é«˜é˜¶å›¾ç‰‡æ¸éšæ¶ˆå¤±æœ¯"
date: "2022-12-06T06:20:58.274Z"
---
ç°ä»£ CSS ä¹‹é«˜é˜¶å›¾ç‰‡æ¸éšæ¶ˆå¤±æœ¯
=================

åœ¨è¿‡å¾€ï¼Œæˆ‘ä»¬æƒ³è¦å®ç°ä¸€ä¸ªå›¾ç‰‡çš„æ¸éšæ¶ˆå¤±ã€‚æœ€å¸¸è§çš„è«è¿‡äºæ•´ä½“é€æ˜åº¦çš„å˜åŒ–ï¼Œåƒæ˜¯è¿™æ ·ï¼š

    <div class="img"></div>
    

    
    div {
        width: 300px;
        height: 300px;
        background: url(image.jpg);
        transition: .4s;
    }
    .img:hover {
        opacity: 0;
    }
    

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/beeb6bcd5ca94e89be97e15a93aa8333~tplv-k3u1fbpfcp-zoom-1.image)

ä½†æ˜¯ï¼ŒCSS çš„åŠŸèƒ½å¦‚æ­¤å¼ºå¤§çš„ä»Šå¤©ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ CSS å®ç°çš„æ¸éšæ•ˆæœå·²ç»ä¸å†æ˜¯å¦‚æ­¤çš„ç®€å•ã€‚

æƒ³æƒ³çœ‹ï¼Œä¸‹é¢è¿™æ ·ä¸€ä¸ªæ•ˆæœï¼Œæ˜¯ CSS èƒ½å¤Ÿå®ç°çš„ä¹ˆï¼Ÿ

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e407b814e4204deabbc8435b57cbd480~tplv-k3u1fbpfcp-watermark.image?)

ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼æœ¬æ–‡å°±å°†ä¸€æ­¥ä¸€æ­¥ï¼Œä»é›¶å¼€å§‹ï¼Œä»…ä»…ä½¿ç”¨ä¸€ä¸ªæ ‡ç­¾ï¼Œå®ç°ä¸Šè¿°çš„å›¾ç‰‡æ¸éšæ•ˆæœã€‚

è¿™é‡Œï¼Œæœ‰ä¸¤ä¸ªæ ¸å¿ƒçš„ç‚¹ï¼š

1.  å¦‚ä½•å°†ä¸€å¼ å›¾ç‰‡åˆ‡å‰²çš„è¿™ä¹ˆç»†ï¼Œåˆ‡å‰²æˆè¿™ä¹ˆå¤šå—ï¼Ÿ
2.  åŸºäºä¸Šè¿° ï¼ˆ1ï¼‰çš„åŸºç¡€ä¸Šï¼Œåˆè¯¥å¦‚ä½•åˆ†åˆ«æ§åˆ¶è¿™äº›å°å—çš„ç‹¬ç«‹éšè—å’Œå±•ç¤ºå‘¢ï¼Ÿ

è«æ…Œï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥è§£å†³ä»–ä»¬ã€‚

å¼ºå¤§çš„ Mask
--------

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° Maskã€‚

åœ¨ CSS ä¸­ï¼Œmask å±æ€§å…è®¸ä½¿ç”¨è€…é€šè¿‡é®ç½©æˆ–è€…è£åˆ‡ç‰¹å®šåŒºåŸŸçš„å›¾ç‰‡çš„æ–¹å¼æ¥éšè—ä¸€ä¸ªå…ƒç´ çš„éƒ¨åˆ†æˆ–è€…å…¨éƒ¨å¯è§åŒºåŸŸã€‚

### è¯­æ³•

æœ€åŸºæœ¬ï¼Œä½¿ç”¨ mask çš„æ–¹å¼æ˜¯å€ŸåŠ©å›¾ç‰‡ï¼Œç±»ä¼¼è¿™æ ·ï¼š

    {
        /* Image values */
        mask: url(mask.png);                       /* ä½¿ç”¨ä½å›¾æ¥åšé®ç½© */
        mask: url(masks.svg#star);                 /* ä½¿ç”¨ SVG å›¾å½¢ä¸­çš„å½¢çŠ¶æ¥åšé®ç½© */
    }
    

å½“ç„¶ï¼Œä½¿ç”¨å›¾ç‰‡çš„æ–¹å¼åæ–‡ä¼šå†è®²ã€‚å€ŸåŠ©å›¾ç‰‡çš„æ–¹å¼å…¶å®æ¯”è¾ƒç¹çï¼Œå› ä¸ºæˆ‘ä»¬é¦–å…ˆè¿˜å¾—å‡†å¤‡ç›¸åº”çš„å›¾ç‰‡ç´ æï¼Œé™¤äº†å›¾ç‰‡ï¼Œmask è¿˜å¯ä»¥æ¥å—ä¸€ä¸ªç±»ä¼¼ background çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯æ¸å˜ã€‚

ç±»ä¼¼å¦‚ä¸‹ä½¿ç”¨æ–¹æ³•ï¼š

    {
        mask: linear-gradient(#000, transparent)                      /* ä½¿ç”¨æ¸å˜æ¥åšé®ç½© */
    }
    

é‚£è¯¥å…·ä½“æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œä¸Šè¿°æˆ‘ä»¬åˆ›é€ äº†ä¸€ä¸ªä»é»‘è‰²åˆ°é€æ˜æ¸å˜è‰²ï¼Œæˆ‘ä»¬å°†å®ƒè¿ç”¨åˆ°å®é™…ä¸­ï¼Œä»£ç ç±»ä¼¼è¿™æ ·ï¼š

ä¸‹é¢è¿™æ ·ä¸€å¼ å›¾ç‰‡ï¼Œå åŠ ä¸Šä¸€ä¸ªä»é€æ˜åˆ°é»‘è‰²çš„æ¸å˜ï¼Œ

    {
        background: url(image.png) ;
        mask: linear-gradient(90deg, transparent, #fff);
    }
    

![image](https://user-images.githubusercontent.com/8554143/85300767-8fb30b00-b4d9-11ea-8598-2e44813ac685.png)

åº”ç”¨äº† mask ä¹‹åï¼Œå°±ä¼šå˜æˆè¿™æ ·ï¼š

![image](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6be95c5056447db9093eaef7dd8bdfe~tplv-k3u1fbpfcp-zoom-1.image)

è¿™ä¸ª DEMOï¼Œå¯ä»¥å…ˆç®€å•äº†è§£åˆ° mask çš„åŸºæœ¬ç”¨æ³•ã€‚

è¿™é‡Œå¾—åˆ°äº†ä½¿ç”¨ mask æœ€é‡è¦ç»“è®ºï¼š**å›¾ç‰‡ä¸ mask ç”Ÿæˆçš„æ¸å˜çš„ transparent çš„é‡å éƒ¨åˆ†ï¼Œå°†ä¼šå˜å¾—é€æ˜ã€‚**

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„æ¸å˜ä½¿ç”¨çš„æ˜¯ `linear-gradient(90deg, transparent, #fff)`ï¼Œè¿™é‡Œçš„ `#fff` çº¯è‰²éƒ¨åˆ†å…¶å®æ¢æˆä»»æ„é¢œè‰²éƒ½å¯ä»¥ï¼Œä¸å½±å“æ•ˆæœã€‚

[CodePen Demo -- ä½¿ç”¨ MASK çš„åŸºæœ¬ä½¿ç”¨](https://codepen.io/Chokcoco/pen/YzwZbLQ)

### ä½¿ç”¨ mask å®ç° hover éšè—å›¾ç‰‡

äº†è§£äº† mask çš„ç®€å•ç”¨æ³•åï¼Œæˆ‘ä»¬æ¥çœ‹è¿™æ ·ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ”¹é€ ä¸‹ä¸Šè¿°çš„ç¬¬ä¸€ä¸ª DEMOã€‚

    <div class="img"></div>
    

    div {
        width: 300px;
        height: 300px;
        background: url(image.jpg);
    }
    .img:hover {
        mask: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0));
    }
    

æ˜¯çš„ï¼Œåˆ©ç”¨ Maskï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿå¯ä»¥å¾—åˆ°è¿‘ä¼¼çš„æ¶ˆå¤±æ•ˆæœï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4d420747528845dea1531a4f9bfe6463~tplv-k3u1fbpfcp-zoom-1.image)

> å¦‚æœå¯¹äº Mask ä½ è¿˜ä¸äº†è§£ï¼Œä½ éœ€è¦é¦–å…ˆçœ‹çœ‹è¿™ç¯‡ï¼š[å¥‡å¦™çš„ CSS MASK](https://github.com/chokcoco/iCSS/issues/80)

å½“ç„¶ï¼Œå¯¹äºç°åœ¨è¿™ä¸ªæ•ˆæœï¼Œæœ‰ä¸ªå¾ˆå¤§çš„ç¼ºé™·ï¼Œé‚£å°±æ˜¯ç¼ºå°‘äº†åŠ¨ç”»ã€‚å›¾ç‰‡æ˜¯ç¬é—´æ¶ˆå¤±çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»™ä¸Šè¿°çš„å€ŸåŠ© mask å®ç°çš„å›¾ç‰‡æ¶ˆå¤±æ•ˆæœæ·»åŠ ä¸ŠåŠ¨ç”»ã€‚

è€Œè¿™ï¼Œå°±éœ€è¦ç”¨ä¸Š CSS @property äº†ã€‚

å¼ºå¤§çš„ CSS @property
-----------------

CSS @propertyï¼Œå¤§å®¶åº”è¯¥ä¸é‚£ä¹ˆé™Œç”Ÿäº†ã€‚

@property CSS at-rule æ˜¯ CSS Houdini API çš„ä¸€éƒ¨åˆ†, å®ƒå…è®¸å¼€å‘è€…æ˜¾å¼åœ°å®šä¹‰ä»–ä»¬çš„ CSS è‡ªå®šä¹‰å±æ€§ï¼Œå…è®¸è¿›è¡Œå±æ€§ç±»å‹æ£€æŸ¥ã€è®¾å®šé»˜è®¤å€¼ä»¥åŠå®šä¹‰è¯¥è‡ªå®šä¹‰å±æ€§æ˜¯å¦å¯ä»¥è¢«ç»§æ‰¿ã€‚

å¦‚æœä½ å¯¹ CSS @property è¿˜æœ‰æ‰€ç–‘æƒ‘ï¼Œå»ºè®®ä½ å…ˆå¿«é€Ÿè¯»ä¸€è¯»è¿™ç¯‡æ–‡ç«  -- [CSS @propertyï¼Œè®©ä¸å¯èƒ½å˜å¯èƒ½](https://github.com/chokcoco/iCSS/issues/109)

å›åˆ°æˆ‘ä»¬çš„æ­£é¢˜ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç»™ä¸Šè¿°ä½¿ç”¨ Mask çš„ä»£ç ï¼Œæ·»åŠ ä¸ŠåŠ¨ç”»ï¼Œæˆ‘ä»¬æœŸæœ›ä»£ç å¤§æ¦‚æ˜¯è¿™æ ·ï¼š

    div {
        width: 300px;
        height: 300px;
        background: url(image.jpg);
        mask: linear-gradient(rgba(0, 0, 0, 1), rgba(0, 0, 0, 1));
    }
    .img:hover {
        mask: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0));
    }
    

è¿™é‡Œï¼Œmask çš„æ˜¯ä» `mask: linear-gradient(rgba(0, 0, 0, 1), rgba(0, 0, 0, 1))` å‘ `mask: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0))` å˜åŒ–çš„ã€‚

ä½†æ˜¯å®é™…ä¸Šï¼Œè¿™æ ·å¹¶ä¸ä¼šäº§ç”Ÿä»»ä½•çš„åŠ¨ç”»æ•ˆæœã€‚

åŸå› åœ¨äºï¼Œæˆ‘ä»¬ Mask å±æ€§æœ¬èº«æ˜¯ä¸æ”¯æŒè¿‡æ¸¡åŠ¨ç”»çš„ï¼

ä½†æ˜¯ï¼Œåˆ©ç”¨ä¸Š CSS @propertyï¼Œæ•´ä¸ªæ•ˆæœå°±ä¸ä¸€æ ·äº†ã€‚å€ŸåŠ©ï¼ŒCSS @propertyï¼Œæˆ‘ä»¬æ”¹é€ ä¸€ä¸‹ä»£ç ï¼š

    @property --m-0 {
       syntax: "<number>";
       initial-value: 1;
       inherits: false;
    }
    div {
        width: 300px;
        height: 300px;
        background: url(image.jpg);
        mask: linear-gradient(90deg, rgba(0, 0, 0, var(--m-0)), rgba(0, 0, 0, var(--m-0)));
        transition: --m-0 0.5s;
    }
    div:hover {
        --m-0: 0;
    }
    

æˆ‘ä»¬åˆ©ç”¨ CSS @property å®šä¹‰äº†ä¸€ä¸ªåä¸º `--m-0` çš„å˜é‡ï¼Œç„¶åï¼Œæˆ‘ä»¬å°†æ•´ä¸ªåŠ¨ç”»è¿‡æ¸¡æ•ˆæœèµ‹äºˆäº†è¿™ä¸ªå˜é‡ï¼Œè€Œä¸æ˜¯æ•´ä¸ª maskã€‚

åˆ©ç”¨è¿™ä¸ªå°æŠ€å·§ï¼Œæˆ‘ä»¬å°±å¯ä»¥æˆåŠŸçš„å®ç°åŸºäº mask å±æ€§çš„åŠ¨ç”»æ•ˆæœï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/558043f3308d4accb09bd9a29eb4384b~tplv-k3u1fbpfcp-watermark.image?)

å€ŸåŠ©å¤šé‡ mask åˆ†å‰²å›¾ç‰‡
--------------

åˆ°äº†è¿™ä¸€æ­¥ï¼Œåé¢çš„æ­¥éª¤å…¶å®å°±å¾ˆæ˜æœ—äº†ã€‚

ç”±äº mask æ‹¥æœ‰å’Œ background ä¸€æ ·çš„ç‰¹æ€§ã€‚å› æ­¤ï¼Œmask æ˜¯å¯ä»¥æœ‰å¤šé‡ mask çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å¤šä¸ªä¸åŒçš„ mask æ•ˆæœç»™åŒä¸€ä¸ªå…ƒç´ ã€‚

ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¸Šé¢çš„æ•ˆæœåªæœ‰ä¸€é‡ maskï¼Œæˆ‘ä»¬ç¨å¾®æ·»åŠ ä¸€äº› mask ä»£ç ï¼Œè®©å®ƒå˜æˆ 2 é‡ maskï¼š

    @property --m-0 {
       syntax: "<number>";
       initial-value: 1;
       inherits: false;
    }
    @property --m-1 {
       syntax: "<number>";
       initial-value: 1;
       inherits: false;
    }
    div {
        mask: 
            linear-gradient(90deg, rgba(0, 0, 0, var(--m-0)), rgba(0, 0, 0, var(--m-0))),
            linear-gradient(90deg, rgba(0, 0, 0, var(--m-1)), rgba(0, 0, 0, var(--m-1)));
        mask-size: 50% 100%;
        mask-position: left, right;
        mask-repeat: no-repeat;
        transition: 
            --m-0 0.3s,
            --m-1 0.25s 0.15s;
    }
    div:hover {
        --m-0: 0;
        --m-1: 0;
    }
    

è¿™æ ·ï¼Œæˆ‘ä»¬çš„æ­¥éª¤å¤§æ¦‚æ˜¯ï¼š

1.  é¦–å…ˆå°† mask ä¸€åˆ†ä¸ºäºŒï¼Œå·¦å³ä¸¤è¾¹å„ä¸€ä¸ª
2.  ç„¶åï¼Œè®¾ç½®äº†ä¸¤ä¸ªåŸºäº CSS @property çš„å˜é‡ï¼Œ`--m-0` å’Œ `--m-0`
3.  ç„¶åï¼Œç»™å®ƒä»¬è®¾ç½®äº†ä¸åŒçš„è¿‡æ¸¡æ—¶é—´å’Œè¿‡æ¸¡å»¶è¿Ÿæ—¶é—´
4.  åœ¨ hover çš„ä¸€ç¬é—´ï¼Œå†å°†è¿™ä¸¤ä¸ªå˜é‡çš„å€¼ï¼Œéƒ½ç½®ä¸º 0ï¼Œä¹Ÿå°±æ˜¯å®ç° `linear-gradient(90deg, rgba(0, 0, 0, 1), rgba(0, 0, 0, 1))` åˆ° `linear-gradient(90deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0))` çš„å˜åŒ–ï¼Œç”¨äºéšè—å¯¹åº” mask å—
5.  ç”±äºè®¾ç½®äº†ä¸åŒçš„è¿‡æ¸¡æ—¶é—´å’Œå»¶è¿Ÿæ—¶é—´ï¼Œæ•´ä½“ä¸Šçœ‹ä¸Šå»ï¼Œæ•´ä¸ªåŠ¨ç”»å°±åˆ†æˆäº†ä¸¤éƒ¨åˆ†

çœ‹çœ‹æ•ˆæœï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d4d5f182ae348d08bc97c84b3f1aaeb~tplv-k3u1fbpfcp-watermark.image?)

### ç»§ç»­åˆ‡å‰²ä¸º 4 é‡ mask

å¥½ï¼Œæ—¢ç„¶ 2 é‡ mask æ•ˆæœæ²¡é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å†è¿›ä¸€æ­¥ï¼Œå°†æ•´ä¸ªæ•ˆæœåˆ‡å‰²ä¸º 4 ä¸ª maskã€‚ä»£ç è¿˜æ˜¯å¦‚æ³•ç‚®åˆ¶ï¼Œè¿™é‡Œæˆ‘å†è´´ä¸Šæ ¸å¿ƒä»£ç ï¼š

    @property --m-0 {
       syntax: "<number>";
       initial-value: 1;
       inherits: false;
    }
    @property --m-1 {
       syntax: "<number>";
       initial-value: 1;
       inherits: false;
    }
    @property --m-2 {
       syntax: "<number>";
       initial-value: 1;
       inherits: false;
    }
    @property --m-3 {
       syntax: "<number>";
       initial-value: 1;
       inherits: false;
    }
    div {
        mask: 
            linear-gradient(90deg, rgba(0, 0, 0, var(--m-0)), rgba(0, 0, 0, var(--m-0))),
            linear-gradient(90deg, rgba(0, 0, 0, var(--m-1)), rgba(0, 0, 0, var(--m-1))),
            linear-gradient(90deg, rgba(0, 0, 0, var(--m-2)), rgba(0, 0, 0, var(--m-2))),
            linear-gradient(90deg, rgba(0, 0, 0, var(--m-3)), rgba(0, 0, 0, var(--m-3)));
        mask-size: 50% 50%;
        mask-repeat: no-repeat;
        mask-position: left top, right top, left bottom, bottom right;
        transition: 
            --m-0 0.3s,
            --m-1 0.15s 0.1s,
            --m-2 0.25s 0.21s,
            --m-3 0.19s 0.15s;
    }
    div:hover {
        --m-0: 0;
        --m-1: 0;
        --m-2: 0;
        --m-3: 0;
    }
    

è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° 4 å—åˆ†å‰²å›¾ç‰‡çš„ mask æ¶ˆå¤±æ•ˆæœï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad21a3f0f2dc41a285c4f16bec3d795b~tplv-k3u1fbpfcp-watermark.image?)

å¥½ï¼Œå†ä¾æ¬¡ç±»æ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°åˆ†å‰²ä¸º 9 å—çš„ï¼Œåˆ†å‰²ä¸º 16 å—çš„ã€‚ç”±äºä»£ç å¤ªå¤šï¼Œå°±ç®€å•çœ‹çœ‹æ•ˆæœï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91f43d8d95614c11bf15cfffd92ddf8b~tplv-k3u1fbpfcp-watermark.image?)

[CodePen Demo -- åŸºäº @property å’Œ mask çš„å›¾ç‰‡æ¸éšæ¶ˆå¤±æœ¯](https://codepen.io/Chokcoco/pen/rNKGpvL)

åŸºäº SCSS ç®€åŒ–ä»£ç 
------------

é‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ†å‰²ä¸º 100 å—å‘¢ï¼Ÿæˆ–è€… 400 å—å‘¢ï¼Ÿè¿˜è¦æ‰‹å†™è¿™äº›ä»£ç å—ï¼Ÿ

å½“ç„¶ä¸éœ€è¦ï¼Œç”±äºä¸Šé¢çš„ä»£ç çš„è§„å¾‹éå¸¸çš„æ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©é¢„å¤„ç†å™¨å¾ˆå¥½çš„å°è£…æ•´ä¸ªæ•ˆæœã€‚ä»è€Œå¿«é€Ÿçš„å®ç°åˆ‡å‰²æˆä»»æ„è§„åˆ™å—æ•°çš„æ•ˆæœã€‚

å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š

    $count: 400;
    $sqrt: 20;
    $per: 100% / $sqrt;
    $width: 300px;
    $perWid: 15;
    
    @for $i from 1 to ($count + 1) {
        @property --m-#{$i} {
           syntax: "<number>";
           initial-value: 1;
           inherits: false;
        }
    }
    @function bgSet($n) {
        $bg : radial-gradient(rgba(0, 0, 0, var(--m-1)), rgba(0, 0, 0, var(--m-1)));
        
        @for $i from 2 through $n {         
            $bg: $bg, radial-gradient(rgba(0, 0, 0, var(--m-#{$i})), rgba(0, 0, 0, var(--m-#{$i})));
        }
        
        @return $bg;
    }
    @function positionSet($n) {
        $bgPosition: ();
    
        @for $i from 0 through ($n) {   
            @for $j from 0 through ($n - 1) {  
                $bgPosition: $bgPosition, #{$i * $perWid}px #{$j * $perWid}px;
            }
        }
        
        @return $bgPosition;
    }
    @function transitionSet($n) {
        $transition: --m-1 0.1s 0.1s;
    
        @for $i from 1 through $n {   
            $transition: $transition, --m-#{$i} #{random(500)}ms #{random(500)}ms;
        }
        
        @return $transition;
    }
    div {
        width: $width;
        height: $width;
        background: url(image.jpg);
        mask: bgSet($count);
        mask-size: $per $per;
        mask-repeat: no-repeat;
        mask-position: positionSet($sqrt); 
        transition: transitionSet($count);
    }
    div:hover {
        @for $i from 1 through $count {         
            --m-#{$i}: 0;
        }
    }
    

è¿™é‡Œï¼Œç®€å•è§£é‡Šä¸€ä¸‹ï¼Œä»¥ç”Ÿæˆ 400 å—å°å—ä¸ºä¾‹å­ï¼š

0.  æœ€ä¸Šé¢çš„ SCSS å˜é‡å®šä¹‰ä¸­ï¼Œ
    *   `$count` æ˜¯æˆ‘ä»¬æœ€ç»ˆç”Ÿæˆçš„å—æ•°
    *   `$sqrt` æ˜¯æ¯è¡Œä»¥åŠæ¯åˆ—ä¼šæ‹¥æœ‰çš„å—æ•°
    *   `$per` æ˜¯æ¯ä¸€å—å æ•´ä½“å›¾ç‰‡å…ƒç´ çš„ç™¾åˆ†æ¯”å€¼
    *   `$width` æ˜¯æ•´ä¸ªå›¾ç‰‡çš„å®½é«˜å€¼
    *   `$perWid` æ˜¯æ¯ä¸€å—çš„å®½é«˜å€¼
1.  åˆ©ç”¨äº†æœ€ä¸Šé¢çš„ä¸€æ®µå¾ªç¯å‡½æ•°ï¼Œæ‰¹é‡çš„ç”Ÿæˆ CSS @property å˜é‡ï¼Œä» `--m-0` åˆ° `--m-400`
2.  `@function bgSet($n) {}` æ˜¯ç”Ÿæˆ 400 å— mask ç‰‡æ®µ
3.  `@function positionSet($n)` æ˜¯ç”Ÿæˆ 400 å— mask çš„ mask-positionï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆ 400 æ®µä¸åŒå®šä½ï¼Œè®© 400 å— mask åˆšå¥½è¦†ç›–æ•´ä¸ªå›¾ç‰‡
4.  `@function transitionSet($n) {}` æ˜¯éšæœºè®¾ç½®æ¯ä¸ªå—çš„åŠ¨ç”»æ—¶é—´å’Œå»¶è¿Ÿæ—¶é—´
5.  ä»£ç æœ€ä¸‹é¢ï¼Œè¿˜æœ‰ä¸€æ®µå¾ªç¯å‡½æ•°ï¼Œç”Ÿæˆ 400 ä¸ª CSS @property å˜é‡çš„ hover å€¼ï¼Œå½“ hover çš„æ—¶å€™ï¼Œå…¨éƒ¨å˜æˆ 0

è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº† 400 åˆ†å—çš„æ¸éšæ•ˆæœã€‚æ•ˆæœå¦‚ä¸‹ï¼š

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79221469cd984213b384854622abd5a9~tplv-k3u1fbpfcp-watermark.image?)

[CodePen Demo -- åŸºäº @property å’Œ mask çš„å›¾ç‰‡æ¸éšæ¶ˆå¤±æœ¯](https://codepen.io/Chokcoco/pen/MWXEVEz)

### è°ƒæ•´è¿‡æ¸¡å˜é‡ï¼Œæ§åˆ¶æ–¹å‘

å½“ç„¶ï¼Œä¸Šé¢æˆ‘ä»¬çš„å¯¹æ¯ä¸€ä¸ªå°å—çš„ transition çš„è¿‡æ¸¡æ—¶é—´å’Œè¿‡æ¸¡å»¶è¿Ÿæ—¶é—´çš„è®¾ç½®ï¼Œéƒ½æ˜¯éšæœºçš„ï¼š

    @function transitionSet($n) {
        $transition: --m-1 0.1s 0.1s;
    
        @for $i from 1 through $n {   
            $transition: $transition, --m-#{$i} #{random(500)}ms #{random(500)}ms;
        }
        
        @return $transition;
    }
    

æˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡ä¸€å®šçš„æ§åˆ¶ï¼Œè®©è¿‡æ¸¡æ•ˆæœä¸é‚£ä¹ˆéšæœºï¼Œè­¬å¦‚æœ‰ä¸€å®šçš„æ–¹å‘æ„Ÿã€‚

ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡è®©åŠ¨ç”»çš„å»¶è¿Ÿæ—¶é—´ä¸ `$i`ï¼Œä¹Ÿå°±æ˜¯ mask å°å—çš„ index æŒ‚é’©ï¼š

    @function transitionSet($n) {
        $transition: --m-1 0.1s 0.1s;
    
        @for $i from 1 through $n {   
            $transition: $transition, --m-#{$i} #{100 + random(500)}ms #{($i / 50) * random(100)}ms;
        }
        
        @return $transition;
    }
    

é‚£ä¹ˆï¼Œæ•´ä¸ªåŠ¨ç”»çš„æ–¹å‘å°±æ˜¯ä»å·¦å¾€å³é€æ¸æ¶ˆå¤±ï¼š

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8a6b61dfe69f4d35a10eebd1ad417b9e~tplv-k3u1fbpfcp-watermark.image?)

[CodePen Demo -- åŸºäº @property å’Œ mask çš„å›¾ç‰‡æ¸éšæ¶ˆå¤±æœ¯ 2](https://codepen.io/Chokcoco/pen/zYaELOm)

å½“ç„¶ï¼Œæœ‰æ„æ€çš„æ˜¯ï¼Œè¿™ä¸ªæ•ˆæœï¼Œä¸ä»…ä»…èƒ½å¤Ÿè¿ç”¨åœ¨å›¾ç‰‡ä¸Šï¼Œå®ƒå…¶å®å¯ä»¥ä½œç”¨åœ¨ä»»ä½•å…ƒç´ ä¹‹ä¸Šï¼

è­¬å¦‚ï¼Œæˆ‘ä»¬æœ‰çš„åªæ˜¯ä¸€æ®µçº¯æ–‡æœ¬ï¼ŒåŒæ ·é€‚ç”¨è¿™ä¸ªæ•ˆæœï¼š

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b42707d7bcb45e9a52bcefbbf5a2254~tplv-k3u1fbpfcp-watermark.image?)

[CodePen Demo -- åŸºäº @property å’Œ mask çš„æ–‡æœ¬æ¸éšæ¶ˆå¤±æœ¯](https://codepen.io/Chokcoco/pen/qBKPgZY)

æ€»ç»“
--

åˆ°è¿™é‡Œï¼Œç®€å•æ€»ç»“ä¸€ä¸‹ã€‚æœ¬æ–‡ï¼Œæˆ‘ä»¬æ ¸å¿ƒåˆ©ç”¨äº† CSS @propery å’Œ maskï¼Œå®ç°äº†ä¸€äº›åŸæœ¬çœ‹ä¸Šå»éœ€è¦éå¸¸å¤š div æ‰èƒ½å®ç°æˆ–è€…æ˜¯éœ€è¦å€ŸåŠ© Canvas æ‰èƒ½å®ç°çš„æ•ˆæœã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å€ŸåŠ©äº† SCSS é¢„å¤„ç†å™¨ï¼Œåœ¨å¯»æ‰¾åˆ°è§„å¾‹åï¼Œæå¤§çš„ç®€åŒ–äº† CSS ä»£ç çš„ä¹¦å†™é‡ã€‚

åˆ°ä»Šå¤©ï¼Œå¼ºå¤§çš„ CSS å·²ç»å…è®¸æˆ‘ä»¬å»åšè¶Šæ¥è¶Šå¤šæ›´æœ‰æ„æ€çš„åŠ¨æ•ˆï¼ŒCSS @propery å’Œ mask è¿™ä¸¤ä¸ªå±æ€§åœ¨ç°ä»£ CSS å‘æŒ¥äº†éå¸¸é‡è¦çš„ä½œç”¨ï¼Œéå¸¸å»ºè®®å¤§å®¶è®¤çœŸæŒæ¡ä»¥ä¸‹è¿™ä¸¤ä¸ªå±æ€§ã€‚

æœ€å
--

å¥½äº†ï¼Œæœ¬æ–‡åˆ°æ­¤ç»“æŸï¼Œå¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ˜ƒ

å¦‚æœè¿˜æœ‰ä»€ä¹ˆç–‘é—®æˆ–è€…å»ºè®®ï¼Œå¯ä»¥å¤šå¤šäº¤æµï¼ŒåŸåˆ›æ–‡ç« ï¼Œæ–‡ç¬”æœ‰é™ï¼Œæ‰ç–å­¦æµ…ï¼Œæ–‡ä¸­è‹¥æœ‰ä¸æ­£ä¹‹å¤„ï¼Œä¸‡æœ›å‘ŠçŸ¥ã€‚