---
layout: post
title: "åŸºäºbatè„šæœ¬çš„å‰ç«¯å‘å¸ƒæµç¨‹è®¾è®¡ä¸å®ç°"
date: "2022-06-02T09:19:59.550Z"
---
åŸºäºbatè„šæœ¬çš„å‰ç«¯å‘å¸ƒæµç¨‹è®¾è®¡ä¸å®ç°
===================

å†™åœ¨å‰é¢
----

æœ¬æ–‡å¤§è‡´å‘è¯»è€…ä»‹ç»äº†æ¥¼ä¸‹å‡ ç‚¹çŸ¥è¯†ï¼Œå¸Œæœ›åœ¨ç¼–å†™batè„šæœ¬æ—¶å€™èƒ½å¤Ÿå¸®åˆ°è¯»è€…ï¼Œå¦‚æœèƒ½å¤Ÿæœ‰æ‰€å¯è¿ªï¼Œé‚£å°±æ›´å¥½äº†ã€‚

*   batè„šæœ¬çš„ç›¸å…³çŸ¥è¯†å’Œæ¡ˆä¾‹ç¼–å†™
*   ç”¨windowsè‡ªå¸¦çš„å‘½ä»¤å‹ç¼©æ–‡ä»¶
*   windowså’Œlinuxæ–‡ä»¶ä¼ è¾“
*   å¦‚ä½•å…å¯†ç ç™»å½•Linux
*   å‰ç«¯å‘å¸ƒæµç¨‹çš„ä¼˜åŒ–

èƒŒæ™¯ä»‹ç»
----

ç¬”è€…ç›®å‰æ‰€åœ¨çš„å¼€å‘å›¢é˜Ÿï¼Œç”±äºä¸€äº›é™åˆ¶ï¼Œæ²¡æœ‰ç›¸å…³çš„devOpså®è·µï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æŒç»­é›†æˆã€è‡ªåŠ¨éƒ¨ç½²ä»€ä¹ˆäº‹äº†ã€‚å¾ˆå¤šæ—¶å€™ï¼Œè¿˜æ˜¯ä¾é äººåŠ›æ‰‹åŠ¨æŒ¡æ“æ§ï¼Œå…ˆè¿è¡Œè¯¸å¦‚`yarn build`æˆ–è€…`npm run build`ä¹‹ç±»çš„`npm script`å»æ„å»ºç›¸å…³çš„å‰ç«¯é¡¹ç›®ï¼Œç„¶åé€‰ä¸­distæ–‡ä»¶å¤¹ï¼Œè¿›è¡Œç›¸å…³çš„å‹ç¼©ï¼Œå·®ä¸€ç‚¹çš„å°±ç›´æ¥å‘½å`dist.zip`å¥½ä¸€ç‚¹çš„å°±å¸¦ä¸Šä¸ªæ—¶é—´æ–¹ä¾¿å›æº¯ï¼Œæ¯”å¦‚`app-202206012002.zip`è¿™ç§ï¼Œç„¶åæ‰“å¼€ç›¸å…³çš„ftpå·¥å…·ï¼ŒæŠŠå‹ç¼©å¥½çš„åŒ…ä¼ åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œæœ€ååœ¨æœåŠ¡å™¨ä¸Šè§£å‹ï¼Œæ”¾åˆ°nginxæŒ‡å®šçš„htmlç›®å½•ä¸‹ï¼Œè¿™ä¸€è¶Ÿå‘ç‰ˆå°±ç®—æ˜¯é½æ´»äº†ã€‚

è¿™ç§æ¨¡å¼æ¯”å¦‚å°±ä¸€ä¸ªé¡¹ç›®ï¼Œé‚£ä½ è¦æ˜¯èƒ½å¤Ÿæ¥å—ï¼Œæ—¶é—´ä¹Ÿå¤Ÿå……è£•é‚£å°±è¿™ä¹ˆæå§ï¼Œä¹Ÿæ— å¯åšéçš„ã€‚ä½†æ˜¯è¦æ˜¯æœ‰å¥½å¤šä¸ªè¿™ç§é¡¹ç›®è¿™ä¹ˆæï¼ŒçœŸè®©äººå‘•åğŸ¤®å•Šï¼Œå¥½tmæ¶å¿ƒå•Šï¼Œç¨‹åºå‘˜æœ¬èº«åœ¨åšçš„ä¸€ä»¶äº‹æƒ…ï¼Œåº”è¯¥æ˜¯æŠŠä¸€ä»¶ç¹ççš„æˆ–è€…è¯´æ˜¯å¤æ‚çš„äº‹æƒ…ç®€å•åŒ–ï¼Œè€Œä¸æ˜¯éšæ³¢é€æµï¼Œä»»ç”±äº‹æƒ…å˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€ä»¥è‡´åˆ°äº†æœ€åä¸å¯æ§ï¼Œé‚£å°±å¤ªé¸¡è‚‹äº†ã€‚

Larry Wallï¼ˆæ‹‰é‡Œ Â· æ²ƒå°”ï¼‰æ›¾ç»è¯´è¿‡ç¨‹åºå‘˜çš„ä¸‰å¤§ç¾å¾·ï¼šæ‡’æƒ°ï¼Œæ€¥åˆ‡ï¼Œå‚²æ…¢ï¼ˆlaziness, impatience, hubrisï¼‰ã€‚æ¥¼ä¸Šçš„åšæ³•æ˜¾ç„¶ä¸æ˜¯å¾ˆå°Šé‡ï¼ˆæ‡’æƒ°ï¼‰ç¾å¾·å•Šï¼Œäºæ˜¯æˆ‘å¼€å§‹è ¢è ¢æ¬²åŠ¨åœ°æ„æ€é¢ è¦†æ¥¼ä¸Šçš„å‘å¸ƒæ¨¡å¼ã€‚

æˆ‘ç‰©è‰²åˆ°äº†å¥½å‡ ä½é€‰æ‰‹ï¼Œä¸€ä½æ˜¯baté€‰æ‰‹ï¼Œä¸€ä½æ˜¯cmdé€‰æ‰‹ï¼Œè¿˜æœ‰jsé€‰æ‰‹ï¼Œpyé€‰æ‰‹ç­‰ç­‰ï¼Œç»è¿‡ç›¸å…³çš„æƒè¡¡ï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©ç¼–å†™batï¼ˆæ‰¹å¤„ç†ï¼‰æ¥è§£å†³æ¥¼ä¸Šçš„é—®é¢˜ã€‚

æˆ‘ä¸ºä»€ä¹ˆç›¸ä¸­baté€‰æ‰‹æ¥è§£å†³æ¥¼ä¸Šçš„é—®é¢˜ï¼Ÿ
--------------------

ç¬¬ä¸€ä¸ªå°±æ˜¯ï¼Œæˆ‘ä»¬åœ¨è§£å†³å½“å‰é—®é¢˜çš„æ—¶å€™ï¼Œå°½é‡ä¸è¦å¼•å…¥ä¸€äº›æ–°äº‹ç‰©å»å¢åŠ é—®é¢˜æœ¬èº«çš„å¤æ‚åº¦ï¼ŒåŸºäºæ¥¼ä¸Šè¿™ä»¶äº‹æœ¬èº«å°±æ˜¯æ•²æ•²å‘½ä»¤è¡Œï¼ˆåŒ…æ‹¬ä½ è¯´å‹ç¼©ã€ä¸Šä¼ ï¼Œæœ¬è´¨ä¸Šä¸å°±æ˜¯ä¸€æ¡å‘½ä»¤å˜›ï¼‰ï¼Œæ‰€ä»¥jsé€‰æ‰‹ã€pyé€‰æ‰‹passã€‚ç¬¬äºŒä¸ªå°±æ˜¯ï¼Œæˆ‘ä»¬å°½é‡è¦åšçš„å…¼å®¹æ€§è¶³å¤Ÿå¥½ï¼Œbatå’Œcmdç”¨èµ·æ¥å…¶å®éƒ½å·®ä¸å¤šçš„ï¼Œä½†ä½ ä¸€å®šè¦æ·±ç©¶å®ƒä»¬ï¼Œæˆ‘ç†äº†ä¸‹å®ƒä»¬çš„åŒºåˆ«å¤§è‡´æ˜¯è¿™æ ·å­çš„

*   batï¼ˆms dosæ‰¹å¤„ç†è„šæœ¬ï¼‰åŸºäºdosè®¾è®¡ï¼Œæ›´é€šç”¨ä¸€ç‚¹
*   cmdï¼ˆwindows ntå‘½ä»¤è„šæœ¬ï¼‰åªèƒ½åœ¨windows2000ä»¥ä¸Šç³»ç»Ÿè¿è¡Œï¼Œä½†æ˜¯å‘½ä»¤ä¸°å¯Œ

æ‰€ä»¥ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘æœ€åé€‰æ‹©ç¼–å†™ä¸€ä¸ªdosæ‰¹å¤„ç†è„šæœ¬æ¥è§£å†³æ¥¼ä¸Šçš„é—®é¢˜ã€‚

æœ‰å“ªäº›äººæœºäº¤äº’çš„æ–¹æ¡ˆå¯ä»¥å®ç°ï¼Ÿ
---------------

*   æ–¹æ¡ˆä¸€ï¼šå½“ç”¨æˆ·è¿è¡Œç›¸å…³batè„šæœ¬çš„æ—¶å€™ï¼Œå¯ä»¥è®©ç”¨æˆ·è¾“å…¥å¯¹åº”çš„é¡¹ç›®åç§°ï¼Œç„¶åå»åŒ¹é…å¯¹åº”çš„é¡¹ç›®ï¼Œå†æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œç„¶åæ‰§è¡Œå‹ç¼©å‘½ä»¤ï¼Œå†ä¸Šä¼ åˆ°linuxæœåŠ¡å™¨
*   æ–¹æ¡ˆäºŒï¼šè€ƒè™‘åˆ°é¡¹ç›®æœ‰å¯èƒ½å¾ˆé•¿ï¼Œä¸ºäº†ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œç°åœ¨ç»Ÿä¸€è®©ç”¨æˆ·è¾“å…¥æ•°å­—ï¼Œæ‰§è¡Œç›¸å…³çš„é€»è¾‘ï¼Œæ¯”å¦‚1ã€æ‰§è¡Œappé¡¹ç›®æ„å»ºï¼Œ2ã€æ‰§è¡Œbizé¡¹ç›®æ„å»ºï¼Œ3ã€æ‰§è¡Œappå’Œbizé¡¹ç›®æ„å»ºï¼Œç„¶ååœ¨è¿›è¡Œç›¸å…³çš„å‹ç¼©ä¸Šä¼ æ“ä½œã€‚
*   æŠŠé¡¹ç›®çš„ç²’åº¦æ”¾åˆ°å­é¡¹ç›®ä¸­å»ï¼Œæ¯”å¦‚NoteWebä¸‹é¢æœ‰appï¼Œbizï¼Œfinä¸‰ä¸ªå­é¡¹ç›®ï¼Œæ¯ä¸ªå­é¡¹ç›®å†™ä¸€ä¸ªæ„å»ºè„šæœ¬ï¼Œåœ¨çˆ¶é¡¹ç›®ä¸­ï¼Œå†™çš„ç€æ€¥ä¸€ç‚¹å°±æ— è„‘æ„å»ºï¼Œæ¯ä¸ªé¡¹ç›®éƒ½runä¸€æŠŠï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å‚è€ƒæ¥¼ä¸Šçš„æ–¹æ¡ˆä¸€ã€äºŒåšç›¸åº”çš„ä¼˜åŒ–

batè„šæœ¬çŸ¥è¯†ç§‘æ™®
---------

*   `@echo off` å…³é—­å›æ˜¾
*   `setlocal enabledelayedexpansion` è®¾ç½®å»¶è¿Ÿå˜é‡
*   `@REM ç”¨æ¥å†™æ³¨é‡Šçš„`
*   `chcp 65001` ä½¿ç”¨utf-8ç¼–ç ï¼Œè¿™æ ·ä¸­æ–‡å°±ä¸ä¼šä¹±ç äº†ï¼Œ
*   `cls` æ¸…å±
*   `cd /D %~dp0` è¿›å…¥å½“å‰ç›®å½•
*   `echo è¿™ä¸ªæ˜¯ç”¨æ¥è¾“å‡ºçš„`
*   `color 0A` è®¾ç½®æ–‡å­—æ˜¾ç¤ºçš„é¢œè‰²æ˜¯ ä¸€æŠ¹â€œåŸè°…è‰²â€
*   `set /p input_source=` Â è®²è¾“å…¥çš„å€¼èµ‹å€¼ç»™å˜é‡input\_source

ä»¥ä¸Šåˆ—ä¸¾çš„æ˜¯å¸¸ç”¨çš„batè„šæœ¬çŸ¥è¯†ï¼Œå…·ä½“çš„å»ºè®®è¯»è€…é˜…è¯»å¸®åŠ©æ–‡æ¡£æ¥è¿›è¡Œäº†è§£ç›¸å…³çš„å‘½ä»¤ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚

deploy.batè„šæœ¬çš„ç¼–å†™
---------------

### å¦‚ä½•å®ç°æ•°å­—èœå•ï¼Ÿ

è¿™é‡Œçš„æ€è·¯æ˜¯è®©ç”¨æˆ·è¾“å…¥å¯¹åº”çš„æ•°å­—ï¼Œç„¶åè®²å‚æ•°ä¼ ç»™execBuildæ–¹æ³•æ‰§è¡Œç›¸å…³çš„é€»è¾‘ï¼ˆæ„å»ºæ‰“åŒ…ï¼Œå‹ç¼©ï¼Œä¸Šä¼ ï¼‰

    @echo off
    setlocal enabledelayedexpansion 
    color 0A
    @REM ä¸­ç”µæ±‡èé¡¹ç›®æ„å»ºè„šæœ¬ï¼ŒZheng JiangTao(jiangt.zheng@sunyard.com)
    chcp 65001
    cls
    cd /D %~dp0
    echo ==========(âˆ©â€¢Ì€Ï‰â€¢Ì)âŠƒ-*â‹†ä¸­ç”µæ±‡èé¡¹ç›®æ„å»ºè„šæœ¬â‹†*-âŠ‚(â€¢Ì€Ï‰â€¢Ìâˆ©)==========
    :start
    echo ä¸­ç”µæ±‡èé¡¹ç›®æ•°å­—èœå•:
    echo ã€1ã€‘app, ã€2ã€‘biz, ã€3ã€‘fin
    echo.
    echo ã€4ã€‘appã€biz, ã€5ã€‘appã€fin
    echo.
    echo ã€6ã€‘bizã€fin,ã€7ã€‘appã€bizã€fin,
    echo.
    echo ã€0ã€‘é€€å‡º
    echo.
    echo è¯·æŒ‰æç¤ºè¾“å…¥ç›¸åº”çš„æ•°å­—è¿›è¡Œç›¸å…³çš„é¡¹ç›®æ„å»ºæ“ä½œ:
    set /p input_source=
    if !input_source!== 0 ( echo é€€å‡ºæˆåŠŸ )
    if !input_source!== 1 ( call :execBuild app )
    if !input_source!== 2 ( call :execBuild biz )
    if !input_source!== 3 ( call :execBuild fin )
    if !input_source!== 4 ( call :execBuild app,biz )
    if !input_source!== 5 ( call :execBuild app,fin )
    if !input_source!== 6 ( call :execBuild biz,fin )
    if !input_source!== 7 ( call :execBuild app,biz,fin )
    
    echo ========*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*ä¸­ç”µæ±‡èé¡¹ç›®æ„å»ºè„šæœ¬*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*========
    :finish
    exit /b
    

### å¦‚ä½•å®ç°æ‰“åŒ…æ–‡ä»¶å‹ç¼©ï¼Ÿ

å¸‚é¢ä¸Šå¸¸è§çš„å‹ç¼©è½¯ä»¶æœ‰winRarã€7-Zipç­‰ç­‰ï¼Œä¸€ä¸ªæ€è·¯æ˜¯è®¾ç½®å¯¹åº”å®‰è£…çš„è½¯ä»¶çš„binç›®å½•åˆ°ç¯å¢ƒå˜é‡ï¼Œç„¶åå»æŸ¥é˜…å¯¹åº”çš„APIï¼Œæ‰§è¡Œç›¸å…³çš„æ‰“åŒ…å‹ç¼©å‘½ä»¤ï¼Œä½†æ˜¯é—®é¢˜å°±æ¥äº†ï¼Œä½ å“ªèƒ½çŸ¥é“ç”¨æˆ·è£…çš„æ˜¯winRarè¿˜æ˜¯7-Zipï¼Œè¿˜æ˜¯360å‹ç¼©å‘¢ï¼Œæ‰€ä»¥ä½ å°±éœ€è¦å†™ä¸€ä¸ªå…¼å®¹çš„æ–¹æ³•æ¥æŠ¹å¹³è¿™ä¸ªé—®é¢˜ï¼Œå…ˆå»æŸ¥æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„æ–‡ä»¶ç›®å½•ï¼Œæœ‰çš„è¯æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œç„¶åæ‰§è¡Œå¯¹åº”çš„å‹ç¼©å‘½ä»¤ï¼Œè¿™æ ·å­å¾ˆç¹çï¼Œä¸‡ä¸€å®ƒä¸€ä¸ªä¹Ÿæ²¡æœ‰è£…å‘¢ï¼Ÿè€Œä¸”ä¹Ÿè¿èƒŒäº†ä¸Šé¢è¯´çš„ï¼ˆæ‡’æƒ°ï¼‰ç¾å¾·ã€‚

æ‰€ä»¥åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¯•å›¾é€šè¿‡windowsè‡ªèº«çš„ä¸€äº›æ–¹æ³•å»å‹ç¼©æ–‡ä»¶ï¼Œçš‡å¤©ä¸è´Ÿèµ¶è·¯äººï¼Œæˆ‘åœ¨csdnä¸Šçœ‹åˆ°ä¸€ç¯‡å¸–å­[https://blog.csdn.net/d\_r\_l\_t/article/details/100584748](https://blog.csdn.net/d_r_l_t/article/details/100584748)ï¼Œäºæ˜¯æˆ‘æ‘¸ç€è¿™ä½å¤§å“¥çš„æ–‡ä»¶å‹ç¼©è¿‡æ²³ï¼Œå…·ä½“çš„è¯»è€…å¯ä»¥ç‚¹å¼€é˜…è¯»ä¸‹ï¼Œæˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚

åˆ›å»ºä¸€ä¸ª`zip.vbs`è„šæœ¬

    Set objArgs = WScript.Arguments
    ZipFile = objArgs(0)
     
    ' Create empty ZIP file and open for adding
    CreateObject("Scripting.FileSystemObject").CreateTextFile(ZipFile, True).Write "PK" & Chr(5) & Chr(6) & String(18, vbNullChar)
    Set zip = CreateObject("Shell.Application").NameSpace(ZipFile)
     
    ' Add all files/directories to the .zip file
    For i = 1 To objArgs.count-1
      zip.CopyHere(objArgs(i))
      WScript.Sleep 10000 'REQUIRED!! (Depending on file/dir size)
    Next
    

é‚£ä¹ˆå‹ç¼©å°±ç®€å•åˆ°æ‰§è¡Œä¸€æ¡å‘½ä»¤å°±å¥½äº†ï¼Œä¾‹å¦‚ï¼š`cscript ../zip.vbs dest.zip src`

### å¦‚ä½•ä¸Šä¼ åˆ°linuxæœåŠ¡å™¨ï¼Ÿ

scpå‘½ä»¤å¯ä»¥è¿›è¡Œè®¡ç®—æœºé—´çš„æ–‡ä»¶ä¼ è¾“ï¼Œå…·ä½“çš„ä¾‹å¦‚ `scp app-202206012112.zip root@122.51.52.169:/root/nginx/html-auxre/zdhr/app`å°±æ˜¯æŠŠapp-202206012112.zipä¼ åˆ°æœåŠ¡å™¨122.51.52.169çš„/root/nginx/html-auxre/zdhr/appç›®å½•ä¸‹ï¼Œå½“ç„¶è¿™é‡Œä¼šè®©ä½ è¾“å…¥å¯†ç ã€‚

### å¦‚ä½•è§£å†³æ¯æ¬¡æ‰§è¡Œscpå‘½ä»¤éƒ½è¦è¾“å…¥å¯†ç ï¼ˆè§£å†³å…å¯†ç™»å½•ï¼‰ï¼Ÿ

å…¶å®è¿™é‡Œå†™ä¸€ä¸ªauth.batè„šæœ¬å°±å¥½äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š

    @echo off
    ssh-keygen -t rsa
    cd C:\Users\%USERNAME%\.ssh
    type id_rsa.pub >> authorized_keys
    xcopy /Q/Y/F/S "C:\Users\%USERNAME%\.ssh\id_rsa.pub" ".\authorized_keys"
    xcopy /Q/Y/F/S "C:\Users\%USERNAME%\.ssh\id_rsa.pub" ".\id_rsa.pub"
    scp id_rsa.pub authorized_keys root@122.51.52.169:/root/.ssh
    

æœ€åå®Œæ•´çš„ä»£ç æ˜¯è¿™æ ·å­çš„ï¼Œå›¾ä¸­ipä¸ºäº†ä¿å¯†å·²ç»åšäº†çå†™å¤„ç†ï¼Œè¯»è€…å¯ä»¥æ‹¿å»å‚è€ƒåº”ç”¨åˆ°è‡ªå·±æˆ–è€…å…¬å¸çš„é¡¹ç›®ä¸­ï¼ˆè¿™é‡Œï¼Œå¦‚æœæ˜¯åœ¨ä¸€äº›å›½ä¼ã€é“¶è¡Œå•ä½ï¼Œé‚£æ‰¹å¤„ç†å°±å¾ˆæœ‰ç”¨äº†ï¼Œæ¯•ç«Ÿæ²¡ç½‘.jpgï¼‰

    @echo off
    setlocal enabledelayedexpansion 
    color 0A
    @REM ä¸­ç”µæ±‡èé¡¹ç›®æ„å»ºè„šæœ¬ï¼ŒZheng JiangTao(jiangt.zheng@sunyard.com)
    chcp 65001
    cls
    cd /D %~dp0
    echo ==========(âˆ©â€¢Ì€Ï‰â€¢Ì)âŠƒ-*â‹†ä¸­ç”µæ±‡èé¡¹ç›®æ„å»ºè„šæœ¬â‹†*-âŠ‚(â€¢Ì€Ï‰â€¢Ìâˆ©)==========
    :start
    echo ä¸­ç”µæ±‡èé¡¹ç›®æ•°å­—èœå•:
    echo ã€1ã€‘app, ã€2ã€‘biz, ã€3ã€‘fin
    echo.
    echo ã€4ã€‘appã€biz, ã€5ã€‘appã€fin
    echo.
    echo ã€6ã€‘bizã€fin,ã€7ã€‘appã€bizã€fin,
    echo.
    echo ã€0ã€‘é€€å‡º
    echo.
    echo è¯·æŒ‰æç¤ºè¾“å…¥ç›¸åº”çš„æ•°å­—è¿›è¡Œç›¸å…³çš„é¡¹ç›®æ„å»ºæ“ä½œ:
    set /p input_source=
    if !input_source!== 0 ( echo é€€å‡ºæˆåŠŸ )
    if !input_source!== 1 ( call :execBuild app )
    if !input_source!== 2 ( call :execBuild biz )
    if !input_source!== 3 ( call :execBuild fin )
    if !input_source!== 4 ( call :execBuild app,biz )
    if !input_source!== 5 ( call :execBuild app,fin )
    if !input_source!== 6 ( call :execBuild biz,fin )
    if !input_source!== 7 ( call :execBuild app,biz,fin )
    
    echo ========*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*ä¸­ç”µæ±‡èé¡¹ç›®æ„å»ºè„šæœ¬*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*========
    :finish
    exit /b 
    
    :execBuild
    setlocal
    set exec_a=%~1
    set exec_b=%~2
    set exec_c=%~3
    set prefix=NotePBL
    set exec_a_src="%~dp0%prefix%-%exec_a%\dist"
    set exec_b_src="%~dp0%prefix%-%exec_b%\dist"
    set exec_c_src="%~dp0%prefix%-%exec_c%\dist"
    set cur_date=%date:~3,4%%date:~8,2%%date:~11,2%%time:~0,2%%time:~3,2%%time:~6,2%
    set exec_a_dist="%~dp0%prefix%-%exec_a%\%exec_a%-%cur_date%.zip"
    set exec_b_dist="%~dp0%prefix%-%exec_b%\%exec_b%-%cur_date%.zip"
    set exec_c_dist="%~dp0%prefix%-%exec_c%\%exec_a%-%cur_date%.zip"
    if "%exec_a%" == "" (
      @REM Do Nothing
    ) else ( 
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*æ„å»º%prefix%-%exec_a%å¼€å§‹*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      cd /D %~dp0\%prefix%-%exec_a%
      call npm run build
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*æ„å»º%prefix%-%exec_a%ç»“æŸ*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*%exec_a%-%cur_date%.zipå¼€å§‹æ‰“åŒ…*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      call cscript ../zip.vbs %exec_a_dist% %exec_a_src%
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*%exec_a%-%cur_date%.zipæ‰“åŒ…å®Œæˆ*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*ä¸Šä¼ %prefix%-%exec_a%å¼€å§‹*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      scp %exec_a%-%cur_date%.zip root@122.51.52.169:/root/nginx/html-auxre/zdhr/%exec_a%
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*ä¸Šä¼ %prefix%-%exec_a%ç»“æŸ*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
    )
    if "%exec_b%" == "" ( 
      @REM Do Nothing
    ) else ( 
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*æ„å»º%prefix%-%exec_b%å¼€å§‹*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      cd /D %~dp0\%prefix%-%exec_b%
      call npm run build
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*æ„å»º%prefix%-%exec_b%ç»“æŸ*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*%exec_b%-%cur_date%.zipå¼€å§‹æ‰“åŒ…*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      call cscript ../zip.vbs %exec_b_dist% %exec_b_src%
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*%exec_b%-%cur_date%.zipæ‰“åŒ…å®Œæˆ*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*ä¸Šä¼ %prefix%-%exec_b%å¼€å§‹*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      scp %exec_b%-%cur_date%.zip root@122.51.52.169:/root/nginx/html-auxre/zdhr/%exec_b%
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*ä¸Šä¼ %prefix%-%exec_b%ç»“æŸ*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
    )
    if "%exec_c%" == "" ( 
      @REM Do Nothing
    ) else ( 
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*æ„å»º%prefix%-%exec_c%å¼€å§‹*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      cd /D %~dp0\%prefix%-%exec_c%
      call npm run build
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*æ„å»º%prefix%-%exec_c%ç»“æŸ*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*%exec_c%-%cur_date%.zipå¼€å§‹æ‰“åŒ…*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      call cscript ../zip.vbs %exec_c_dist% %exec_c_src%
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*%exec_c%-%cur_date%.zipæ‰“åŒ…å®Œæˆ*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*ä¸Šä¼ %prefix%-%exec_c%å¼€å§‹*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
      scp %exec_c%-%cur_date%.zip root@122.51.52.169:/root/nginx/html-auxre/zdhr/%exec_c%
      echo "*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*ä¸Šä¼ %prefix%-%exec_c%ç»“æŸ*:à®Ù©(à¹‘Â´áµ•`)Û¶à®:*"
    )
    goto:eof
    

### å®ç°æ•ˆæœ

å¯èƒ½ç»†å¿ƒçš„è¯»è€…ä¼šå‘ç°ï¼Œæ€ä¹ˆæ²¡æœ‰æ„å»ºè¿™ä¸€æ­¥å•Šï¼Œè¿™é‡Œä¸ºäº†æ›´ç›´è§‚çš„è®©å¤§å®¶çœ‹åˆ°æ•ˆæœï¼Œæˆ‘åœ¨è¿è¡Œçš„æ—¶å€™æŠŠ`npm run build` æ³¨é‡Šæ‰äº†å› ä¸ºå®ƒæ‰“å‡ºæ¥çš„æ—¥å¿—å¤ªå¤šäº†ï¼Œåˆ·å±äº†ï¼Œå°±æŠŠå®ƒå»æ‰ï¼Œå±•ç¤ºä¸‹æ•´ä½“çš„æ•ˆæœï¼Œå›¾ä¸­åº”è¯¥æ˜¯å‹ç¼©åˆ°ä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨çš„æ•ˆæœ

![](https://img2022.cnblogs.com/blog/2055171/202206/2055171-20220602100039970-541409419.png)

æœ€å
--

æ¥¼ä¸Šçš„è„šæœ¬å°±ä½œä¸ºæŠ›ç –å¼•ç‰ï¼Œå¸Œæœ›èƒ½å¤Ÿåœ¨å‰ç«¯å‘åŒ…æ–¹é¢å¸®åŠ©åˆ°è¯»è€…ï¼Œè§£æ”¾åŠ³åŠ¨åŠ›ã€‚å…¶å®æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ç»§ç»­ä¼˜åŒ–çš„ï¼Œæ¯”å¦‚è¯´ï¼Œåœ¨CPUå’Œå†…å­˜ç†æƒ³çš„çŠ¶æ€ä¸‹ï¼Œæˆ‘èƒ½ä¸èƒ½å¼€ä¸‰ä¸ªå°çª—å£å»åˆ†åˆ«å¹¶è¡Œæ‰§è¡Œä¸‰ä¸ªé¡¹ç›®çš„æ„å»ºï¼Œç„¶åæŠŠé¡¹ç›®çš„æ„å»ºå’Œä¸Šä¼ è§£è€¦ï¼Œè¿™æ ·å­è®¾è®¡ä¼šæ›´ç¬¦åˆè½¯ä»¶è®¾è®¡çš„æ€æƒ³ï¼Œæ›´åŠ é²æ£’ã€‚

[![çŸ¥è¯†å…±äº«è®¸å¯åè®®](https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png)](http://creativecommons.org/licenses/by-nc-sa/4.0/)  
æœ¬ä½œå“é‡‡ç”¨[çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®](http://creativecommons.org/licenses/by-nc-sa/4.0/)è¿›è¡Œè®¸å¯ã€‚