---
layout: post
title: "typescriptä½¿ç”¨å…¥é—¨åŠreact+tså®æˆ˜"
date: "2022-04-09T07:17:04.407Z"
---
typescriptä½¿ç”¨å…¥é—¨åŠreact+tså®æˆ˜
=========================

### tsä»‹ç»

TypeScriptæ˜¯ä¸€ç§ç”±å¾®è½¯å¼€å‘çš„è‡ªç”±å’Œå¼€æºçš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œè€Œä¸”æœ¬è´¨ä¸Šå‘è¿™ä¸ªè¯­è¨€æ·»åŠ äº†å¯é€‰çš„é™æ€ç±»å‹å’ŒåŸºäºç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚

#### ä¸jså…³ç³»

![image.png](https://cdn.nlark.com/yuque/0/2022/png/368498/1649345155194-129dcacc-5f36-4aaa-956a-eb2f721f0695.png#clientId=u14a319d1-03eb-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=371&id=uf90958e7&margin=%5Bobject%20Object%5D&name=image.png&originHeight=352&originWidth=408&originalType=binary&ratio=1&rotation=0&showTitle=false&size=69177&status=done&style=none&taskId=u447b3cb0-d263-47ff-9143-3ba754e0f33&title=&width=430)

#### tsä¸jsåŒºåˆ«

TypeScript

JavaScript

JavaScript çš„è¶…é›†ï¼Œç”¨äºè§£å†³å¤§å‹é¡¹ç›®çš„ä»£ç å¤æ‚æ€§

ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œç”¨äºåˆ›å»ºåŠ¨æ€ç½‘é¡µã€‚

å¼ºç±»å‹ï¼Œæ”¯æŒé™æ€å’ŒåŠ¨æ€ç±»å‹

åŠ¨æ€å¼±ç±»å‹è¯­è¨€

å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´å‘ç°å¹¶çº æ­£é”™è¯¯

åªèƒ½åœ¨è¿è¡Œæ—¶å‘ç°é”™è¯¯

ä¸å…è®¸æ”¹å˜å˜é‡çš„æ•°æ®ç±»å‹

å˜é‡å¯ä»¥è¢«èµ‹äºˆä¸åŒç±»å‹çš„å€¼

#### ä½¿ç”¨tså¥½å¤„ï¼Ÿ

*   è§„èŒƒæˆ‘ä»¬çš„ä»£ç ï¼Œç¼–è¯‘é˜¶æ®µå‘ç°é”™è¯¯ï¼Œåœ¨åŸç”ŸåŸºç¡€ä¸ŠåŠ äº†ä¸€å±‚å®šä¹‰
*   tsæ˜¯jsçš„ç±»å‹åŒ–è¶…é›†ï¼Œæ”¯æŒæ‰€æœ‰jsï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ é™æ€ç±»å‹å’Œé¢å‘å¯¹è±¡æ€æƒ³
*   é™æ€ç±»å‹ï¼Œå®šä¹‰ä¹‹åå°±ä¸èƒ½æ”¹å˜

#### tsç¼ºç‚¹

*   ä¸èƒ½è¢«æµè§ˆå™¨ç†è§£ï¼Œéœ€è¦è¢«ç¼–è¯‘æˆ JS
*   æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬
*   ä»£ç é‡å¢åŠ 

### ç¯å¢ƒå®‰è£…

    npm install -g typescript 
    // yarnæ–¹å¼  
    yarn global add typescript
    
    // æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ
    tsc -v
    
    // ç¼–è¯‘tsæ–‡ä»¶
    tsc index.ts
    

vscodeä¸­ç›‘å¬tsæ–‡ä»¶è‡ªåŠ¨ç¼–è¯‘

    // 1. åˆå§‹åŒ–tsconfig.jsonæ–‡ä»¶
    tsc --init 
    
    2. å·¦ä¸Šè§’èœå•ç‚¹å‡»ç»ˆç«¯->è¿è¡Œä»»åŠ¡->ç‚¹å‡»typescript->é€‰æ‹©tscç›‘è§†tsconfigæ–‡ä»¶
    

### åŸºç¡€ç±»å‹

#### booleanã€number å’Œ string ç±»å‹

*   boolean

    let isDone: boolean = false;
    // let isDone: boolean = "123"; //Type 'string' is not assignable to type 'boolean'
    

èµ‹å€¼ä¸å®šä¹‰çš„ä¸ä¸€è‡´ï¼Œä¼šæŠ¥é”™ï¼Œé™æ€ç±»å‹è¯­è¨€çš„ä¼˜åŠ¿å°±ä½“ç°å‡ºæ¥äº†ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æå‰å‘ç°ä»£ç ä¸­çš„é”™è¯¯ã€‚

*   number

    let decimal: number = 6;
    

*   string

    let color: string = "blue";
    

#### æ•°ç»„ç±»å‹

    let list: number[] = [1, 2, 3];
    // let list: Array<number> = [1, 2, 3];
    
    // æ•°ç»„é‡Œçš„é¡¹å†™é”™ç±»å‹ä¼šæŠ¥é”™
    let list: number[] = [1, 2, "3"]; // error
    
    // push æ—¶ç±»å‹å¯¹ä¸ä¸Šä¼šæŠ¥é”™
    list.push(4)
    list.push("4") // error
    

å¦‚æœæ•°ç»„æƒ³æ¯ä¸€é¡¹æ”¾å…¥ä¸åŒç±»å‹æ•°æ®ï¼Œæ€ä¹ˆåŠï¼Ÿé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…ƒç»„ç±»å‹

#### å…ƒç»„ç±»å‹

å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚

    let x: [string, number] = ["hello", 10];
    
    // å†™é”™ç±»å‹ä¼šæŠ¥é”™
    let x: [string, number] = [10, "hello"];  // Error
    
    // è¶Šç•Œä¼šæŠ¥é”™
    let x: [string, number] = ["hello", 10, 110];  // Error
    
    // ä½¿ç”¨ push æ—¶ï¼Œä¸ä¼šæœ‰è¶Šç•ŒæŠ¥é”™ï¼Œä½†æ˜¯åªèƒ½ push å®šä¹‰çš„ number æˆ–è€… string ç±»å‹
    x.push("hello2")
    x.push(11)
    console.log(x) //['hello', 10, 'hello2', 11]
    
    // push ä¸€ä¸ªæ²¡æœ‰å®šä¹‰çš„ç±»å‹ï¼ŒæŠ¥é”™
    x.push(true) // error
    

#### undefined å’Œ null ç±»å‹

    let u:undefined = undefined  
    let n:null = null
    

é»˜è®¤æƒ…å†µä¸‹ null å’Œ undefined æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ undefined èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ã€‚

    let age: number = null
    let realName: string = undefined
    

ä½†æ˜¯å¦‚æœæŒ‡å®šäº† --strictNullChecks æ ‡è®°ï¼Œnull å’Œ undefined åªèƒ½èµ‹å€¼ç»™ void å’Œå®ƒä»¬å„è‡ªï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚

#### anyã€unknown å’Œ void ç±»å‹

*   any

ä¸æ¸…æ¥šç”¨ä»€ä¹ˆç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ any ç±»å‹

    let notSure: any = 4
    notSure = "maybe a string"     // å¯ä»¥æ˜¯ string ç±»å‹
    notSure = false                // ä¹Ÿå¯ä»¥æ˜¯ boolean ç±»å‹
    
    notSure.name                   // å¯ä»¥éšä¾¿è°ƒç”¨å±æ€§å’Œæ–¹æ³•
    notSure.getName()
    

ä¸è¿‡ï¼Œä¸å»ºè®®ä½¿ç”¨ anyï¼Œä¸ç„¶å°±ä¸§å¤±äº† TS çš„æ„ä¹‰ã€‚

*   unknown

ä¸å»ºè®®ä½¿ç”¨ anyï¼Œå½“æˆ‘ä¸çŸ¥é“ä¸€ä¸ªç±»å‹å…·ä½“æ˜¯ä»€ä¹ˆæ—¶ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ

å¯ä»¥ä½¿ç”¨ unknown ç±»å‹

æŠŠ param å®šä¹‰ä¸º any ç±»å‹ï¼ŒTS å°±èƒ½ç¼–è¯‘é€šè¿‡ï¼Œæ²¡æœ‰æŠŠæ½œåœ¨çš„é£é™©æš´éœ²å‡ºæ¥ï¼Œä¸‡ä¸€ä¼ çš„ä¸æ˜¯ number ç±»å‹ï¼Œä¸å°±æ²¡æœ‰è¾¾åˆ°é¢„æœŸäº†å—ã€‚

    function divide(param: any) {
      return param / 2;
    }
    

æŠŠ param å®šä¹‰ä¸º unknown ç±»å‹ ï¼ŒTS ç¼–è¯‘å™¨å°±èƒ½æ‹¦ä½æ½œåœ¨é£é™©  
å› ä¸ºä¸çŸ¥é“ param çš„ç±»å‹ï¼Œä½¿ç”¨è¿ç®—ç¬¦ /ï¼Œå¯¼è‡´æŠ¥é”™ã€‚

    function divide(param: unknown) {
      return param / 2;   // error
    }
    

é…åˆç±»å‹æ–­è¨€ï¼Œå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜

    function divide(param: unknown) {
      return param as number / 2;
    }
    

*   void

voidç±»å‹ä¸ any ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚  
æ¯”å¦‚å‡½æ•°æ²¡æœ‰æ˜ç¡®è¿”å›å€¼ï¼Œé»˜è®¤è¿”å› Void ç±»å‹

    function welcome(): void {
      console.log('hello')
    }
    

#### never ç±»å‹

neverç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚

æœ‰äº›æƒ…å†µä¸‹å€¼ä¼šæ°¸ä¸å­˜åœ¨ï¼Œæ¯”å¦‚ï¼Œ

*   å¦‚æœä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ—¶æŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°æ°¸è¿œä¸å­˜åœ¨è¿”å›å€¼ï¼Œå› ä¸ºæŠ›å‡ºå¼‚å¸¸ä¼šç›´æ¥ä¸­æ–­ç¨‹åºè¿è¡Œã€‚
*   å‡½æ•°ä¸­æ‰§è¡Œæ— é™å¾ªç¯çš„ä»£ç ï¼Œä½¿å¾—ç¨‹åºæ°¸è¿œæ— æ³•è¿è¡Œåˆ°å‡½æ•°è¿”å›å€¼é‚£ä¸€æ­¥ã€‚

    // å¼‚å¸¸
    function fn(msg: string): never { 
      throw new Error(msg)
    }
    
    // æ­»å¾ªç¯
    function fn(): never { 
      while (true) {}
    }
    

### æšä¸¾

*   æšä¸¾çš„æ„ä¹‰åœ¨äºï¼Œå¯ä»¥å®šä¹‰ä¸€äº›å¸¦åå­—çš„å¸¸é‡é›†åˆï¼Œæ¸…æ™°åœ°è¡¨è¾¾æ„å›¾å’Œè¯­ä¹‰ï¼Œæ›´å®¹æ˜“åœ°ç†è§£ä»£ç å’Œè°ƒè¯•ã€‚
*   å¸¸ç”¨äºå’Œåç«¯è”è°ƒæ—¶ï¼ŒåŒºåˆ†åç«¯è¿”å›çš„ä¸€äº›ä»£è¡¨çŠ¶æ€è¯­ä¹‰çš„æ•°å­—æˆ–å­—ç¬¦ä¸²ï¼Œé™ä½é˜…è¯»ä»£ç æ—¶çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚

#### åŸºæœ¬ä½¿ç”¨

å®šä¹‰ä¸€ä¸ªæ•°å­—æšä¸¾

    enum Color {
      Red,
      Green,
      Blue,
    }
    console.log(Color.Red) // 0
    console.log(Color.Green) // 1
    console.log(Color.Blue) // 2
    console.log(Color[0]) // Red
    

ç‰¹ç‚¹ï¼š

*   æ•°å­—é€’å¢ï¼Œæšä¸¾æˆå‘˜ä¼šè¢«èµ‹å€¼ä¸ºä» 0 å¼€å§‹é€’å¢çš„æ•°å­—
*   åå‘æ˜ å°„ï¼Œæšä¸¾ä¼šå¯¹æšä¸¾å€¼åˆ°æšä¸¾åè¿›è¡Œåå‘æ˜ å°„ï¼Œ

å¦‚æœæšä¸¾ç¬¬ä¸€ä¸ªå…ƒç´ èµ‹æœ‰åˆå§‹å€¼ï¼Œå°±ä¼šä»åˆå§‹å€¼å¼€å§‹é€’å¢

    enum Color {
      Red=3,
      Green,
      Blue,
    }
    console.log(Color.Red) // 3
    console.log(Color.Green) // 4
    console.log(Color.Blue) // 5
    

#### æ‰‹åŠ¨èµ‹å€¼

å®šä¹‰ä¸€ä¸ªæšä¸¾æ¥ç®¡ç†å¤–å–çŠ¶æ€ï¼Œåˆ†åˆ«æœ‰å·²ä¸‹å•ï¼Œé…é€ä¸­ï¼Œå·²æ¥æ”¶ä¸‰ä¸ªçŠ¶æ€ã€‚

    enum Status {
      Buy = 1,
      Send,
      Receive
    }
    console.log(Status.Buy)      // 1
    console.log(Status.Send)     // 2
    console.log(Status.Receive)     // 3
    

ä½†æœ‰æ—¶å€™åç«¯ç»™ä½ è¿”å›çš„æ•°æ®çŠ¶æ€æ˜¯ä¹±çš„ï¼Œå°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨èµ‹å€¼ã€‚  
æ¯”å¦‚åç«¯è¯´ Buy æ˜¯ 100ï¼ŒSend æ˜¯ 20ï¼ŒReceive æ˜¯ 1ï¼Œå°±å¯ä»¥è¿™ä¹ˆå†™ï¼š

    enum Status {
      Buy = 100,
      Send = 20,
      Receive = 1
    }
    console.log(Status.Buy)      // 100
    console.log(Status.Send)     // 20
    console.log(Status.Receive)     // 1
    

#### è®¡ç®—æˆå‘˜

æšä¸¾ä¸­çš„æˆå‘˜å¯ä»¥è¢«è®¡ç®—

    enum FileAccess {
      // constant members
      None,
      Read    = 1 << 1,
      Write   = 1 << 2,
      ReadWrite  = Read | Write,
      // computed member
      G = "123".length
    }
    console.log(FileAccess.None)       // 0
    console.log(FileAccess.Read)       // 2   -> 010
    console.log(FileAccess.Write)      // 4   -> 100
    console.log(FileAccess.ReadWrite)  // 6   -> 110
    console.log(FileAccess.G)       // 3
    

#### å­—ç¬¦ä¸²æšä¸¾

å­—ç¬¦ä¸²æšä¸¾æ„ä¹‰åœ¨äºï¼Œæä¾›æœ‰å…·ä½“è¯­ä¹‰çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°ç†è§£ä»£ç å’Œè°ƒè¯•ã€‚

    enum Direction {
      Up = "UP",
      Down = "DOWN",
      Left = "LEFT",
      Right = "RIGHT",
    }
    const value = 'UP'
    if (value === Direction.Up) {
        // do something
    }
    

#### å¸¸é‡æšä¸¾

å¸¸é‡æšä¸¾ç¼–è¯‘å‡ºæ¥çš„ JS ä»£ç ä¼šç®€æ´å¾ˆå¤šï¼Œæé«˜äº†æ€§èƒ½ã€‚å¸¸é‡æšä¸¾ä¸å…è®¸åŒ…å«è®¡ç®—æˆå‘˜

    const enum Direction {
      Up = "UP",
      Down = "DOWN",
      Left = "LEFT",
      Right = "RIGHT",
    }
    const value = 'UP'
    if (value === Direction.Up) {
        // do something
    }
    

ä¼šè¢«ç¼–è¯‘æˆï¼š

    const value = 'UP';
    if (value === "UP" /* Up */) {
        // do something
    }
    

ä¸å†™constä¼šè¢«ç¼–è¯‘æˆï¼š

    (function (Direction) {
        Direction["Up"] = "UP";
        Direction["Down"] = "DOWN";
        Direction["Left"] = "LEFT";
        Direction["Right"] = "RIGHT";
    })(Direction || (Direction = {}));
    const value = 'UP';
    if (value === Direction.Up) {
        // do something
    }
    

è¿™ä¸€å †å®šä¹‰æšä¸¾çš„é€»è¾‘ä¼šåœ¨ç¼–è¯‘é˜¶æ®µä¼šè¢«åˆ é™¤ï¼Œå¸¸é‡æšä¸¾æˆå‘˜åœ¨ä½¿ç”¨çš„åœ°æ–¹è¢«å†…è”è¿›å»ã€‚

#### æšä¸¾ç±»å‹

å½“æšä¸¾ä½œä¸ºç±»å‹æ—¶ï¼Œè¡¨ç¤ºè¯¥å±æ€§åªèƒ½ä¸ºæšä¸¾ä¸­çš„æŸä¸€ä¸ªæˆå‘˜

    enum SEX{
        man = 'ç”·',
        woman = 'å¥³',
        unknown = 'æœªçŸ¥'
    }
    let arr:Array<SEX> = [SEX.man,SEX.woman]
    let s:SEX = SEX.man
    console.log(s); // ç”·
    

### æ¥å£

åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ¥å£ï¼ˆInterfacesï¼‰æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œè€Œå…·ä½“å¦‚ä½•è¡ŒåŠ¨éœ€è¦ç”±ç±»ï¼ˆclassesï¼‰å»å®ç°ï¼ˆimplementï¼‰ã€‚

åœ¨tsä¸­ï¼Œæ¥å£é™¤äº†å¯ç”¨äºå¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ä»¥å¤–ï¼Œä¹Ÿå¸¸ç”¨äºå¯¹ã€Œå¯¹è±¡çš„å½¢çŠ¶ï¼ˆShapeï¼‰ã€è¿›è¡Œæè¿°ã€‚

æ¥å£ä¸€èˆ¬é¦–å­—æ¯å¤§å†™

#### å®šä¹‰å¯¹è±¡ç±»å‹

å®šä¹‰å¯¹è±¡ç±»å‹ï¼Œå¯ä»¥å¯¹å¯¹è±¡å½¢çŠ¶è¿›è¡Œæè¿°ï¼Œæ¥å£å’Œå¯¹è±¡å½¢çŠ¶å¿…é¡»ä¿æŒä¸€è‡´

    interface IntfPerson {
        name: string;
        age: number;
    }
    
    const jack: IntfPerson = {
        name: 'jack',
        age: 25
    }
    
    // ç¼ºå°‘æˆ–å¤šå‡ºå±æ€§éƒ½ä¼šæŠ¥é”™
    const jack: IntfPerson = {
        name: 'jack'
    }
    const jack: IntfPerson = {
        name: 'jack',
        age: 25,
        city: 'æ·±åœ³'
    }
    

#### å¯é€‰å±æ€§

å¦‚æœä¸éœ€è¦å®Œå…¨åŒ¹é…å½¢çŠ¶ï¼Œå¯ä»¥ä½¿ç”¨å¯é€‰å±æ€§

    interface IntfPerson {
        name: string;
        age?: number;
    }
    const jack: IntfPerson = {
        name: 'jack'
    }
    

#### åªè¯»å±æ€§

æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å¯¹è±¡ä¸­çš„ä¸€äº›å­—æ®µåªèƒ½åœ¨åˆ›å»ºçš„æ—¶å€™è¢«èµ‹å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ readonly å®šä¹‰åªè¯»å±æ€§

    interface IntfPerson {
        readonly id: number;
        name: string;
        age?: number;
    }
    
    let jack: IntfPerson = {
        id: 89757,
        name: 'Tom',
    };
    
    // æŠ¥é”™
    jack.id = 9527;
    

#### æè¿°å‡½æ•°ç±»å‹

interface ä¹Ÿå¯ä»¥ç”¨æ¥æè¿°å‡½æ•°ç±»å‹

    interface ISum {
        (x:number,y:number):number
    }
    
    const add:ISum = (num1, num2) => {
        return num1 + num2
    }
    console.log(add(1,2)); // 3
    

### ç±»

#### es6ä¸­ç±»çš„ç”¨æ³•

å…ˆäº†è§£ä¸‹es6ä¸­ç±»çš„ç”¨æ³•ï¼š

*   ä½¿ç”¨ class å®šä¹‰ç±»ï¼Œä½¿ç”¨ constructor å®šä¹‰æ„é€ å‡½æ•°
*   é€šè¿‡ new ç”Ÿæˆæ–°å®ä¾‹çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ã€‚

    class Animal {
      public name;
      constructor(name:string) {
          this.name = name;
      }
      sayHi() {
          return `My name is ${this.name}`;
      }
    }
    let a = new Animal('Kerry');
    console.log(a.sayHi()); // My name is Kerry
    

1.  ç±»çš„ç»§æ‰¿  
    ä½¿ç”¨ extends å…³é”®å­—å®ç°ç»§æ‰¿ï¼Œå­ç±»ä¸­ä½¿ç”¨ super å…³é”®å­—æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°å’Œæ–¹æ³•

    class Cat extends Animal {
      constructor(name:string) {
        super(name); // è°ƒç”¨çˆ¶ç±»çš„ constructor(name)
        console.log(this.name);
      }
      sayHi() {
        return 'Meow, ' + super.sayHi(); // è°ƒç”¨çˆ¶ç±»çš„ sayHi()
      }
    }
    
    let c = new Cat('Tom'); // Tom
    console.log(c.sayHi()); // Meow, My name is Tom
    

2.  å­˜å–å™¨  
    ä½¿ç”¨ getter å’Œ setter å¯ä»¥æ”¹å˜å±æ€§çš„èµ‹å€¼å’Œè¯»å–è¡Œä¸º

    class Animal {
      constructor(name:string) {
        this.name = name;
      }
      get name() {
        return 'Kerry';
      }
      set name(value) {
        console.log('setter: ' + value);
      }
    }
    
    let a = new Animal('Kitty'); // setter: Kitty
    a.name = 'Tom'; // setter: Tom
    console.log(a.name); // Kerry
    

3.  é™æ€æ–¹æ³•  
    ä½¿ç”¨ static ä¿®é¥°ç¬¦ä¿®é¥°çš„æ–¹æ³•ç§°ä¸ºé™æ€æ–¹æ³•ï¼Œå®ƒä»¬ä¸éœ€è¦å®ä¾‹åŒ–ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ç±»æ¥è°ƒç”¨ï¼š

    class Animal {
      static cry() {
        console.log('ä¼šå“­'); // ä¼šå“­
      }
    }
    Animal.cry(); 
    
    // æŠ¥é”™
    const animal = new Animal()
    animal.cry() // error
    

#### es7ä¸­ç±»çš„ç”¨æ³•

1.  å®ä¾‹å±æ€§  
    ES6 ä¸­å®ä¾‹çš„å±æ€§åªèƒ½é€šè¿‡æ„é€ å‡½æ•°ä¸­çš„ this.xxx æ¥å®šä¹‰ï¼ŒES7 ææ¡ˆä¸­å¯ä»¥ç›´æ¥åœ¨ç±»é‡Œé¢å®šä¹‰ï¼š

    class Animal {
      name = 'Kerry';
      constructor() {
        // ...
      }
    }
    
    let a = new Animal();
    console.log(a.name); // Kerry
    

2.  é™æ€å±æ€§  
    ES7 ææ¡ˆä¸­ï¼Œå¯ä»¥ä½¿ç”¨ static å®šä¹‰ä¸€ä¸ªé™æ€å±æ€§ï¼š

    class Animal {
      static num = 42;
    
      constructor() {
        // ...
      }
    }
    
    console.log(Animal.num); // 42
    

#### tsä¸­ç±»çš„ç”¨æ³•

1.  ç±»ä¿®é¥°ç¬¦

tsé‡Œé¢å®šä¹‰å±æ€§çš„æ—¶å€™ï¼Œæä¾›äº†ä¸‰ç§ä¿®é¥°ç¬¦

publicï¼šå…¬æœ‰ï¼Œåœ¨ç±»é‡Œé¢ã€å­ç±»ã€ç±»å¤–é¢éƒ½å¯ä»¥è®¿é—®  
protectedï¼šä¿æŠ¤ç±»å‹ï¼Œåœ¨ç±»é‡Œé¢ã€å­ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œåœ¨ç±»å¤–é¢æ²¡æ³•è®¿é—®  
privateï¼šç§æœ‰ï¼Œåœ¨ç±»é‡Œé¢å¯ä»¥è®¿é—®ï¼Œå­ç±»ã€ç±»å¤–éƒ¨éƒ½æ²¡æ³•è®¿é—®

å±æ€§å¦‚æœä¸åŠ ä¿®é¥°ç¬¦ï¼Œé»˜è®¤å°±æ˜¯å…¬æœ‰public

    class Person {
      public name:string
      // protected name:string
      // private name:string
      constructor(name:string){
        this.name = name
      }
      run():string{
        return `${this.name}åœ¨è¿åŠ¨`
      }
    }
    
    class Web extends Person {
      constructor(name:string){
        super(name) // åˆå§‹åŒ–çˆ¶ç±»çš„æ„é€ å‡½æ•°
      }
      run():string{
        return `${this.name}åœ¨è¿åŠ¨-å­ç±»`
      }
      work(): string {
        return `${this.name}åœ¨å·¥ä½œ`
      }
    }
    const w = new Web('kerry')
    console.log(w.run()); // kerryåœ¨è¿åŠ¨-å­ç±»
    console.log(w.work()); // kerryåœ¨å·¥ä½œ
    console.log(w.name); // kerry
    

2.  æŠ½è±¡ç±»

*   æŠ½è±¡ç±»æ˜¯ä¸å…è®¸è¢«å®ä¾‹åŒ–

    abstract class Animal {
      public name;
      public constructor(name:string) {
        this.name = name;
      }
    }
    let a = new Animal('Kerry'); // error
    

*   æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•å¿…é¡»è¢«å­ç±»å®ç°

    abstract class Animal {
      public name;
      public constructor(name:string) {
        this.name = name;
      }
      public abstract sayHi():void;
    }
    
    class Cat extends Animal {
      public sayHi() {
        console.log(`Meow, My name is ${this.name}`);
      }
    }
    let cat = new Cat('Kerry');
    

*   ç»™ç±»æ·»åŠ ç±»å‹

    class Animal {
      name: string;
      constructor(name: string) {
        this.name = name;
      }
      sayHi(): string {
        return `My name is ${this.name}`;
      }
    }
    
    let a: Animal = new Animal('Kerry');
    console.log(a.sayHi()); // My name is Kerry
    

### æ¥å£å’Œç±»

#### ç±»å®ç°æ¥å£

ä¸€èˆ¬æ¥è®²ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿è‡ªå¦ä¸€ä¸ªç±»ï¼Œæœ‰æ—¶å€™ä¸åŒç±»ä¹‹é—´å¯ä»¥æœ‰ä¸€äº›å…±æœ‰çš„ç‰¹æ€§ï¼Œè¿™æ—¶å€™å°±å¯ä»¥æŠŠç‰¹æ€§æå–æˆæ¥å£ï¼ˆinterfacesï¼‰ï¼Œ  
ç”¨ implements å…³é”®å­—æ¥å®ç°ï¼Œå¤§å¤§æé«˜äº†é¢å‘å¯¹è±¡çš„çµæ´»æ€§

è¿™é‡Œä¸¾ä¸ªä¾‹å­ï¼š  
é—¨æ˜¯ä¸€ä¸ªç±»ï¼Œé˜²ç›—é—¨æ˜¯é—¨çš„å­ç±»ã€‚å¦‚æœé˜²ç›—é—¨æœ‰ä¸€ä¸ªæŠ¥è­¦å™¨çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„ç»™é˜²ç›—é—¨æ·»åŠ ä¸€ä¸ªæŠ¥è­¦æ–¹æ³•ã€‚è¿™æ—¶å€™å¦‚æœæœ‰å¦ä¸€ä¸ªç±»ï¼Œè½¦ï¼Œä¹Ÿæœ‰æŠ¥è­¦å™¨çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥è€ƒè™‘æŠŠæŠ¥è­¦å™¨æå–å‡ºæ¥ï¼Œä½œä¸ºä¸€ä¸ªæ¥å£ï¼Œé˜²ç›—é—¨å’Œè½¦éƒ½å»å®ç°å®ƒ

    interface Alarm {
        alert(): void;
    }
    
    class Door {
    }
    
    class SecurityDoor extends Door implements Alarm {
        alert() {
            console.log('SecurityDoor alert');
        }
    }
    
    class Car implements Alarm {
        alert() {
            console.log('Car alert');
        }
    }
    

#### ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£

    interface Alarm {
        alert(): void;
    }
    
    interface Light {
        lightOn(): void;
        lightOff(): void;
    }
    
    class Car implements Alarm, Light {
        alert() {
            console.log('Car alert');
        }
        lightOn() {
            console.log('Car light on');
        }
        lightOff() {
            console.log('Car light off');
        }
    }
    

#### æ¥å£ç»§æ‰¿æ¥å£

    interface Alarm {
        alert(): void;
    }
    
    interface LightableAlarm extends Alarm {
        lightOn(): void;
        lightOff(): void;
    }
    
    class Car implements LightableAlarm {
        lightOn(): void {
            console.log('Car light on');
        }
        lightOff(): void {
            console.log('Car light off');
        }
        alert(): void {
            console.log('Car light on');
        }
    }
    

### ç±»å‹æ–­è¨€å’Œç±»å‹æ¨è®º

#### ç±»å‹æ–­è¨€

è¯­æ³•ï¼šå€¼ as ç±»å‹  
ä½¿ç”¨æ–­è¨€ï¼Œç›®çš„æ˜¯å‘Šè¯‰tsï¼Œæˆ‘æ¯”ä½ æ›´æ¸…æ¥šè¿™ä¸ªå‚æ•°æ˜¯ä»€ä¹ˆç±»å‹ï¼Œä»¥æ­¤é˜²æ­¢æŠ¥é”™

    function getLength(arg: number | string): number {
        const str = arg as string
        if (str.length) {
            return str.length
        } else {
            const number = arg as number
            return number.toString().length
        }
    }
    console.log(getLength(123)); // 3
    console.log(getLength("123")); // 3
    
    // éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæŠŠä¸€ä¸ªç±»å‹æ–­è¨€æˆè”åˆç±»å‹ä¸­ä¸å­˜åœ¨çš„ç±»å‹åˆ™ä¼šæŠ¥é”™
    function getLength(arg: number | string): number {
        return (arg as number[]).length // error
    }
    

#### ç±»å‹æ¨è®º

tsé‡Œï¼Œåœ¨æœ‰äº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œç±»å‹æ¨è®ºä¼šå¸®åŠ©æä¾›ç±»å‹ã€‚

*   å®šä¹‰æ—¶ä¸èµ‹å€¼ï¼Œtsä¼šè‡ªåŠ¨æ¨å¯¼æˆ any ç±»å‹

    let a
    a = 18
    a = 'hello'
    

*   åˆå§‹åŒ–å˜é‡

    // å› ä¸ºèµ‹å€¼çš„æ—¶å€™èµ‹çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥tsè‡ªåŠ¨æ¨å¯¼å‡ºuserNameæ˜¯ä¸€ä¸ªstringç±»å‹ã€‚
    let userName = 'lin'
    // userName = 123  //å†ä¿®æ”¹æ—¶ä¼šæŠ¥é”™
    

*   è®¾ç½®é»˜è®¤å‚æ•°å€¼

    // ä¼šè‡ªåŠ¨æ¨å¯¼ä¸ºnumberç±»å‹
    function printAge(num = 18) {
        console.log(num)
        return num
    }
    printAge(20)
    // printAge("Kerry") // error
    

*   å‡½æ•°è¿”å›å€¼

    // å®šä¹‰æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼Œä¼šè‡ªåŠ¨æ¨å¯¼è¿”å›å€¼ä¸ºvoidç±»å‹
    function welcome() {
        console.log('hello')
    }
    welcome()
    

### è”åˆç±»å‹ã€äº¤å‰ç±»å‹å’Œç±»å‹åˆ«å

*   è”åˆç±»å‹ | æ˜¯æŒ‡å¯ä»¥å–å‡ ç§ç±»å‹ä¸­çš„ä»»æ„ä¸€ç§ï¼Œè€Œäº¤å‰ç±»å‹ & æ˜¯æŒ‡æŠŠå‡ ç§ç±»å‹åˆå¹¶èµ·æ¥ã€‚
*   äº¤å‰ç±»å‹å’Œ interface çš„ extends éå¸¸ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†å®ç°å¯¹è±¡å½¢çŠ¶çš„ç»„åˆå’Œæ‰©å±•ã€‚

#### è”åˆç±»å‹

å¦‚æœå¸Œæœ›ä¸€ä¸ªå˜é‡å¯ä»¥æ”¯æŒå¤šç§ç±»å‹ï¼Œå°±å¯ä»¥ç”¨è”åˆç±»å‹ï¼ˆunion typesï¼‰æ¥å®šä¹‰ã€‚

ä¾‹å¦‚ï¼Œä¸€ä¸ªå˜é‡æ—¢æ”¯æŒ number ç±»å‹ï¼Œåˆæ”¯æŒ string ç±»å‹

    // è”åˆç±»å‹å¤§å¤§æé«˜äº†ç±»å‹çš„å¯æ‰©å±•æ€§
    let num: number | string | boolean
    
    num = 8
    num = 'eight'
    num = true
    

#### äº¤å‰ç±»å‹

å¦‚æœè¦å¯¹å¯¹è±¡å½¢çŠ¶è¿›è¡Œæ‰©å±•ï¼Œå¯ä»¥ä½¿ç”¨äº¤å‰ç±»å‹ &  
æ¯”å¦‚ Person æœ‰ name å’Œ age çš„å±æ€§ï¼Œè€Œ Student åœ¨ name å’Œ age çš„åŸºç¡€ä¸Šè¿˜æœ‰ grade å±æ€§  
è¿™å’Œç±»çš„ç»§æ‰¿æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œè¿™æ · Student å°±ç»§æ‰¿äº† Person ä¸Šçš„å±æ€§ï¼Œ

    interface Person {
        name: string
        age: number
    }
    
    type Student = Person & { grade: number }
    

#### ç±»å‹åˆ«å

ç±»å‹åˆ«åï¼Œå°±æ˜¯ç»™ç±»å‹èµ·ä¸ªåˆ«åã€‚ç±»å‹åˆ«åç”¨ type å…³é”®å­—æ¥ä¹¦å†™ï¼Œæœ‰äº†ç±»å‹åˆ«åï¼Œæˆ‘ä»¬ä¹¦å†™ TS çš„æ—¶å€™å¯ä»¥æ›´åŠ æ–¹ä¾¿ç®€æ´ã€‚  
æ¯”å¦‚è¿™ä¸ªä¾‹å­ï¼ŒgetName è¿™ä¸ªå‡½æ•°æ¥æ”¶çš„å‚æ•°å¯èƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¯èƒ½æ˜¯å‡½æ•°

    type Name = string
    type NameResolver = () => string
    type NameOrResolver = Name | NameResolver          // è”åˆç±»å‹
    function getName(n: NameOrResolver): Name {
        if (typeof n === 'string') {
            return n
        }
        else {
            return n()
        }
    }
    // è°ƒç”¨
    console.log(getName('kerry')); // kerry
    console.log(getName(() => 'kerry')); // kerry
    

### type å’Œ interface

èƒ½ç”¨interfaceå°±ç”¨interfaceï¼Œå®ç°ä¸äº†å†è€ƒè™‘ç”¨type

#### ç›¸åŒç‚¹1ï¼šéƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°

*   æè¿°ä¸€ä¸ªå¯¹è±¡

    type IntfPerson = {
        name: string
        age: number
    }
    interface IntfPerson {
        name: string
        age: number
    }
    
    const person: IntfPerson = {
        name: 'kerry',
        age: 18
    }
    

*   æè¿°ä¸€ä¸ªå‡½æ•°

    type addType = (num1:number,num2:number) => number
    
    interface addType {
        (num1:number,num2:number):number
    }
    const add:addType = (num1, num2) => {
        return num1 + num2
    }
    

#### ç›¸åŒç‚¹2ï¼šéƒ½å¯ä»¥å®ç°ç»§æ‰¿

interface ä½¿ç”¨ extends å®ç°ç»§æ‰¿ï¼Œ type ä½¿ç”¨äº¤å‰ç±»å‹å®ç°ç»§æ‰¿

æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª IntfPerson ç±»å‹å’Œ Student ç±»å‹ï¼ŒStudent ç»§æ‰¿è‡ª IntfPerson

    // interface ç»§æ‰¿ interface
    interface Person { 
        name: string 
      }
      interface Student extends Person { 
        grade: number 
      }
    
    // type ç»§æ‰¿ type
    type IntfPerson = { 
        name: string 
    }
    type Student = IntfPerson & { grade: number  }   // ç”¨äº¤å‰ç±»å‹
    
    
    // interface ç»§æ‰¿ type
    type IntfPerson = { 
        name: string 
    }
    
    interface Student extends IntfPerson { 
        grade: number 
    }
    
    
    // type ç»§æ‰¿ interface
    interface IntfPerson { 
        name: string 
    }
    
    type Student = IntfPerson & { grade: number  }   // ç”¨äº¤å‰ç±»å‹
    

#### ä¸åŒç‚¹1ï¼štype å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹ã€è”åˆç±»å‹ã€äº¤å‰ç±»å‹ã€å…ƒç»„ï¼Œinterface ä¸è¡Œ

    åŸºæœ¬ç±»å‹
    type Name = string
    // è”åˆç±»å‹
    type Name = string | number
    // å…ƒç»„
    type Name = [string, number]
    äº¤å‰ç±»å‹
    interface IntfPerson { 
        name: string 
    }
    type Student = IntfPerson & { grade: number  }
    
    let myName:Name = 'kerry'
    let myName:Name = 123
    let myName:Name = ['kerry',2]
    let kerry:Student = {
        name:'kerry',
        grade: 1
    }
    

#### ä¸åŒç‚¹2: interfaceå¯ä»¥å£°æ˜åˆå¹¶ï¼Œtypeä¸è¡Œ

    interface User{
        nage: string,
        age: number,
    }
    interface User{
        sex: string
    }
    
    let user: User = {
        nage: 'å°æ˜',
        age: 10,
        sex: 'ç”·'
    }
    

### æ³›å‹

æ³›å‹æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“ç±»å‹ï¼Œè€Œæ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹ã€‚å¯ä»¥ä½¿å¾—è¾“å…¥è¾“å‡ºç±»å‹ç»Ÿä¸€ï¼Œä¸”å¯ä»¥è¾“å…¥è¾“å‡ºä»»ä½•ç±»å‹ã€‚

#### åŸºæœ¬ç”¨æ³•

å®šä¹‰ä¸€ä¸ªprintå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªstringç±»å‹å‚æ•°å¹¶è¿”å›ä¸€ä¸ªstringç±»å‹

*   ä¸ä½¿ç”¨æ³›å‹ï¼š

    function print(arg:string):string {
        console.log(arg)
        return arg
    }
    

å‡å¦‚è¿™æ—¶å€™åˆå¤šäº†ä¸€ä¸ªnumberç±»å‹ï¼Œåˆ™éœ€è¦è¿™æ ·å†™

    function print(arg:string | number):string | number {
        console.log(arg)
        return arg
    }
    const result:string | number = print(123)
    console.log('result',result); // 123
    

*   ä½¿ç”¨æ³›å‹è§£å†³

    function print<T>(arg:T):T {
        console.log(arg)
        return arg
    }
    
    // ä¸¤ç§æ–¹å¼ä½¿ç”¨ï¼š
    // æ–¹å¼1ï¼šå®šä¹‰è¦ä½¿ç”¨çš„ç±»å‹
    const result = print<number>(123)
    
    // æ–¹å¼2ï¼šä½¿ç”¨tsç±»å‹è‡ªåŠ¨æ¨æ–­
    const result = print(123)
    

#### æ¥å£ä¸­ä½¿ç”¨æ³›å‹ï¼Œå®šä¹‰å‡½æ•°ç±»å‹

    interface IGeneric<T> {
        (arg: T): void
    }
      
    function fn<T>(arg: T): void {
        console.log(arg);
    }
      
    let myFn: IGeneric<number> = fn;
    myFn(13); //13
    

#### åœ¨ç±»ä¸­ä½¿ç”¨æ³›å‹

å®šä¹‰ä¸€ä¸ªæ ˆï¼Œæœ‰å…¥æ ˆå’Œå‡ºæ ˆä¸¤ä¸ªæ–¹æ³•ï¼Œå¦‚æœæƒ³å…¥æ ˆå’Œå‡ºæ ˆçš„å…ƒç´ ç±»å‹ç»Ÿä¸€ï¼Œå†™æ³•å¦‚ä¸‹ï¼š

    class Stack<T> {
        private data: T[] = []
        push(item:T) {
            return this.data.push(item)
        }
        pop():T | undefined {
            return this.data.pop()
        }
    }
    
    å…¥æ ˆå’Œå‡ºæ ˆæ˜¯numberç±»å‹
    const s1 = new Stack<number>()
    s1.push(1)
    console.log(s1.pop()); // 1
    

#### æ³›å‹çº¦æŸ

å‡è®¾ç°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œæ‰“å°ä¼ å…¥å‚æ•°çš„é•¿åº¦

    function printLength<T>(arg: T): T {
        console.log(arg.length) // å› ä¸ºä¸ç¡®å®š T æ˜¯å¦æœ‰ length å±æ€§ï¼Œä¼šæŠ¥é”™
        return arg
    }
    printLength([1,2,3])
    

ç»“åˆinterfaceï¼Œé€šè¿‡extendsæ¥å®ç°æ³›å‹çº¦æŸ

    interface ILength {
        length: number
    }
    function printLength<T extends ILength>(arg: T): T {
        console.log(arg.length)
        return arg
    }
    printLength([1,2,3])
    

### è£…é¥°å™¨

#### å®šä¹‰

*   è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜ã€æ–¹æ³•ã€å±æ€§æˆ–å‚æ•°ä¸Šï¼Œå¯ä»¥ä¿®æ”¹ç±»çš„è¡Œä¸ºã€‚
*   é€šä¿—è®²è£…é¥°å™¨å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ³¨å…¥åˆ°ç±»ã€æ–¹æ³•ã€å±æ€§å‚æ•°ä¸Šæ¥æ‰©å±•ç±»ã€å±æ€§ã€æ–¹æ³•ã€å‚æ•°çš„åŠŸèƒ½
*   å¸¸è§çš„è£…é¥°å™¨æœ‰ï¼šç±»è£…é¥°å™¨ã€å±æ€§è£…é¥°å™¨ã€æ–¹æ³•è£…é¥°å™¨ã€å‚æ•°è£…é¥°å™¨
*   è£…é¥°å™¨çš„å†™æ³•ï¼šæ™®é€šè£…é¥°å™¨ï¼ˆä¸å¯ä¼ å‚ï¼‰ã€è£…é¥°å™¨å·¥å‚ï¼ˆå¯ä¼ å‚ï¼‰

#### ç±»è£…é¥°å™¨ï¼šæ™®é€šè£…é¥°å™¨

    function logClass(parmas:any){
      parmas.prototype.apiUrl = "http://www.baidu.com"
    }
    
    @logClass
    class HttpClient {
      constructor(){
      }
    
      getData(){
    
      }
    }
    
    const http:any = new HttpClient()
    console.log(http.apiUrl) // http://www.baidu.com
    

#### ç±»è£…é¥°å™¨ï¼šè£…é¥°å™¨å·¥å‚

    function logClass(parmas:string){
      return function(target:any){
        console.log(parmas)
        console.log(target)
      }
    }
    
    @logClass('hello')
    class HttpClient {
      constructor(){
      }
    
      getData(){
    
      }
    }
    

consoleæ‰“å°å‡ºæ¥ç»“æœï¼š

    hello
    index.js:134 class HttpClient {
        constructor() {
        }
        getData() {
        }
    }
    

#### å±æ€§è£…é¥°å™¨

æ¥æ”¶2ä¸ªå‚æ•°ï¼Œtargetå½“å‰ç±»çš„åŸå‹å¯¹è±¡ï¼Œattrå½“å‰å±æ€§åç§°

    function logClass(parmas:string){
      return function(target:any){
        console.log(parmas)
        console.log(target)
      }
    }
    
    function logProperty(params:string){
      return function(target:any,attr:any){
        console.log(target) // å½“å‰ç±»çš„åŸå‹å¯¹è±¡
        console.log(attr) // url 
        // ä¿®æ”¹å±æ€§å€¼
        target[attr] = params
      }
    }
    
    @logClass('hello')
    class HttpClient {
    
      @logProperty('http://api.xxx.com')
      public url: string | undefined
      constructor(){
      }
    
      getData(){
        console.log(this.url) // http://api.xxx.com
      }
    }
    
    const http = new HttpClient()
    http.getData()
    

#### æ–¹æ³•è£…é¥°å™¨

æ–¹æ³•è£…é¥°å™¨æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š1. targetå½“å‰ç±»åŸå‹çš„å¯¹è±¡ 2. å½“å‰æ–¹æ³•å Â 3. å½“å‰æ–¹æ³•çš„æè¿°ç¬¦

    function get(params:string){
      return function(target:any,methodName:any,desc:any){
        console.log(target) // å½“å‰ç±»çš„åŸå‹å¯¹è±¡
        console.log(methodName) // æ–¹æ³•å 
        console.log(desc) // æè¿°ç¬¦ 
        // å’Œç±»è£…é¥°å™¨ä¸€æ ·ï¼Œå¯ä»¥æ‰©å±•å½“å‰ç±»å±æ€§å’Œæ–¹æ³•
        target.apiUrl='xxxx'
        target.run=function(){
          console.log('run')
        }
    
        // ä¿®æ”¹è£…é¥°å™¨çš„æ–¹æ³•  æŠŠè£…é¥°å™¨æ–¹æ³•é‡Œä¼ å…¥çš„æ‰€æœ‰å‚æ•°æ”¹ä¸ºstringç±»å‹
        // 1. ä¿å­˜å½“å‰æ–¹æ³• 2. å‚æ•°å¤„ç†å¹¶è°ƒç”¨oMethodæ–¹æ³•
        const oMethod = desc.value
        desc.value = function(...args:any[]){
          args = args.map((value)=>{
            return String(value)
          })
          // è°ƒç”¨oMethodæ–¹æ³•ï¼Œå¹¶å°†å‚æ•°argsä¼ å…¥
          // ä¸callä¸åŒï¼Œcallæ¥å—å‚æ•°åˆ—è¡¨ï¼Œapplyæ¥å—æ•°ç»„å½¢å¼å‚æ•°
          oMethod.apply(this,args)
        }
      }
    }
    
    class HttpClient {
      public url: string | undefined
      constructor(){
      }
    
      @get('http://api.xxx.com')
      getData(...args:any[]){
        console.log(args); // ['123', '122']
        console.log('æˆ‘æ˜¯getDataé‡Œé¢çš„æ–¹æ³•')
      }
    }
    
    const http:any = new HttpClient()
    console.log(http.apiUrl);
    http.run()
    
    http.getData(123,'123')
    

#### æ–¹æ³•å‚æ•°è£…é¥°å™¨

å‚æ•°è£…é¥°å™¨ä¼šåœ¨è¿è¡Œæ—¶å½“åšå‡½æ•°è¢«è°ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°è£…é¥°å™¨ä¸ºç±»çš„åŸå‹å¢åŠ ä¸€äº›å…ƒç´ æ•°æ®ï¼Œä¼ å…¥3ä¸ªå‚æ•°ï¼š

1.  å¯¹äºé™æ€æˆå‘˜æ¥è¯´ï¼Œæ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡
2.  æ–¹æ³•çš„åå­—
3.  å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­çš„ç´¢å¼•

    function logParams(params:any){
      return function(target:any,methodName:any,paramsIndex:any){
        console.log(params); // uuid
        console.log(target); // {constructor: Æ’, getData: Æ’}
        console.log(methodName); // getData
        console.log(paramsIndex); // 0
    
        // ç»™ç±»çš„åŸå‹å¢åŠ å±æ€§
        target.apiUrl = params
      }
    }
    
    class HttpClient {
      public url: string | undefined
      constructor(){
      }
    
      getData(@logParams('uuid') uuid:any){
        console.log(uuid);
      }
    }
    
    const http:any = new HttpClient()
    http.getData(123456)
    console.log(http.apiUrl); // uuid
    

#### è£…é¥°å™¨æ‰§è¡Œé¡ºåº

    function logClass1(parmas:string){
      return function(target:any){
        console.log('ç±»è£…é¥°å™¨1')
      }
    }
    
    function logClass2(parmas:string){
      return function(target:any){
        console.log('ç±»è£…é¥°å™¨2')
      }
    }
    
    function logAttr(parmas?:string){
      return function(target:any,attrName:any){
        console.log('å±æ€§è£…é¥°å™¨')
      }
    }
    
    function logMethod(parmas?:string){
      return function(target:any,methodName:any,desc:any){
        console.log('æ–¹æ³•è£…é¥°å™¨')
      }
    }
    
    function logParams1(parmas?:string){
      return function(target:any,methodName:any,paramsIndex:any){
        console.log('æ–¹æ³•å‚æ•°è£…é¥°å™¨1')
      }
    }
    
    function logParams2(parmas?:string){
      return function(target:any,methodName:any,paramsIndex:any){
        console.log('æ–¹æ³•å‚æ•°è£…é¥°å™¨2')
      }
    }
    
    @logClass1('hello')
    @logClass2('hello')
    class HttpClient {
    
      @logAttr()
      public apiUrl:string | undefined
      constructor(){
      }
    
      @logMethod()
      getData(){
    
      }
    
      setData(@logParams1() attr1:any,@logParams2() attr2:any){
    
      }
    }
    
    const http = new HttpClient()
    

æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ‰§è¡Œé¡ºåºæ˜¯ï¼š

å±æ€§>æ–¹æ³•>æ–¹æ³•å‚æ•°>ç±»

å¦‚æœæœ‰å¤šä¸ªåŒæ ·çš„è£…é¥°å™¨ï¼Œå®ƒä¼šå…ˆæ‰§è¡Œåé¢çš„

### å£°æ˜æ–‡ä»¶å’Œå†…ç½®å¯¹è±¡

#### å£°æ˜æ–‡ä»¶

å½“ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œå¾ˆå¤šä¸‰æ–¹åº“ä¸æ˜¯ç”¨ TS å†™çš„ï¼Œæˆ‘ä»¬éœ€è¦å¼•ç”¨å®ƒçš„å£°æ˜æ–‡ä»¶ï¼Œæ‰èƒ½è·å¾—å¯¹åº”çš„ä»£ç è¡¥å…¨ã€æ¥å£æç¤ºç­‰åŠŸèƒ½ã€‚

*   declare

åœ¨tsä¸­å¦‚æœç›´æ¥ä½¿ç”¨Vueï¼Œå°±ä¼šæŠ¥é”™

    const app = new Vue({
      el: '#app',
      data: {
        message: 'Hello Vue!'
      }
    })
    

è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ declare å…³é”®å­—æ¥å®šä¹‰ Vue çš„ç±»å‹ï¼Œè¿™æ ·å°±ä¸ä¼šæŠ¥é”™äº†

    interface VueOption {
        el: string,
        data: any
    }
    
    declare class Vue {
        options: VueOption
        constructor(options: VueOption)
    }
    
    const app = new Vue({
      el: '#app',
      data: {
        message: 'Hello Vue!'
      }
    })
    

*   .d.tsæ–‡ä»¶

é€šå¸¸æˆ‘ä»¬ä¼šæŠŠå£°æ˜è¯­å¥æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼ˆxxx.d.tsï¼‰ä¸­ï¼Œè¿™å°±æ˜¯å£°æ˜æ–‡ä»¶ï¼Œä»¥ .d.ts ä¸ºåç¼€ã€‚  
ä¸€èˆ¬æ¥è¯´ï¼Œts ä¼šè§£æé¡¹ç›®ä¸­æ‰€æœ‰çš„ \*.ts æ–‡ä»¶ï¼Œå½“ç„¶ä¹ŸåŒ…å«ä»¥ .d.ts ç»“å°¾çš„æ–‡ä»¶ã€‚

*   ä½¿ç”¨ä¸‰æ–¹åº“

åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ï¼Œå¦‚æœç¤¾åŒºå·²ç»ä¸ºå…¶æä¾›äº†å¯¹åº”çš„ç±»å‹æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸éœ€è¦è‡ªå·±å†å£°æ˜ä¸€æ¬¡äº†ï¼Œç›´æ¥å®‰è£…å³å¯

ä¾‹å¦‚ï¼š

    // å®‰è£… lodash çš„ç±»å‹åŒ…
    npm install @types/lodash -D
    

#### å†…ç½®å¯¹è±¡

JavaScriptä¸­æœ‰å¾ˆå¤šå†…ç½®å¯¹è±¡ï¼Œå®ƒä»¬å¯ä»¥ç›´æ¥åœ¨ TypeScript ä¸­å½“åšå®šä¹‰å¥½äº†çš„ç±»å‹ã€‚  
å†…ç½®å¯¹è±¡æ˜¯æŒ‡æ ¹æ®æ ‡å‡†åœ¨å…¨å±€ä½œç”¨åŸŸ global ä¸Šå­˜åœ¨çš„å¯¹è±¡ï¼Œè¿™é‡Œçš„æ ‡å‡†æŒ‡çš„æ˜¯ ECMAcript å’Œå…¶ä»–ç¯å¢ƒï¼ˆæ¯”å¦‚DOMï¼‰çš„æ ‡å‡†ã€‚

1.  ECMAScriptçš„å†…ç½®å¯¹è±¡  
    Arrayã€Booleanã€Numberã€Stringã€Dateã€RegExpã€Error

    const nums: Array<number> = [1,2,3]
    
    const date: Date = new Date()
    
    const err: Error = new Error('Error!');
    
    const reg: RegExp = /abc/;
    

2.  BOMå’ŒDOMçš„å†…ç½®å¯¹è±¡  
    Windowã€Documentã€HTMLElementã€DocumentFragmentã€Eventã€NodeList

    let body: HTMLElement = document.body
    
    let allDiv: NodeList = document.querySelectorAll('div');
    
    document.addEventListener('click', (e: MouseEvent) => {
        e.preventDefault()
      // Do something
    });
    

### \[

\]([http://localhost:3000/](http://localhost:3000/))

### tså®æˆ˜

æˆ‘ä»¬ä½¿ç”¨react+tså®ç°ä¸€ä¸ªtodo ListåŠŸèƒ½

åŠŸèƒ½åŒ…æ‹¬ï¼š

*   æŸ¥çœ‹ä»»åŠ¡åˆ—è¡¨
*   æ·»åŠ ã€åˆ é™¤ä»»åŠ¡
*   å®Œæˆä»»åŠ¡

#### å…ˆçœ‹æ•ˆæœå›¾

![image.png](https://cdn.nlark.com/yuque/0/2022/png/368498/1649324571532-17fbb4a6-897c-4c5e-8a8d-bad549a0150b.png#clientId=ua4cf7d7c-d200-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=239&id=IkDKV&margin=%5Bobject%20Object%5D&name=image.png&originHeight=302&originWidth=429&originalType=binary&ratio=1&rotation=0&showTitle=false&size=36943&status=done&style=none&taskId=uc9b3b92e-7728-487d-8960-eacaa79d35d&title=&width=339.5)

#### åˆå§‹åŒ–ä¸€ä¸ªreacté¡¹ç›®

[https://create-react-app.dev/](https://create-react-app.dev/)

1.  åˆå§‹åŒ–ä¸€ä¸ªtypescripté¡¹ç›®

    yarn create react-app react-ts-demo --template typescript
    

2.  è¿è¡Œé¡¹ç›®

    cd react-ts-demo & yarn start
    

3.  æµè§ˆå™¨è®¿é—®ï¼š[http://localhost:3000/](http://localhost:3000/)

#### ä»£ç å®ç°

1.  åˆ›å»ºä¸€ä¸ªçˆ¶ç»„ä»¶todolist

    export interface ITodoItem {
        taskName: string,
        status: TaskStatus
    }
    
    // React.FCè¡¨ç¤ºreactçš„ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œæ˜¯React.FunctionComponentçš„ç®€å†™å½¢å¼
    const TodoList:React.FC = ()=>{
    
      const [list, setList] = useState<Array<ITodoItem>>([])
      const [inputValue, setInputValue] = useState<string>("")
    
      const updateList = (list:ITodoItem[])=>{
        setList(list)
        saveTaskList(list)
      }
    
      const handleAdd = ()=>{
        if(!inputValue.trim()){
            return alert("è¾“å…¥ä¸èƒ½ä¸ºç©º")
        }
        let [...newList] = list;
        newList.push({
            taskName: inputValue,
            status: TaskStatus.PENDING
        })
        updateList(newList)
        setInputValue("")
      }
    
    
      const handleStart = (index:number)=>{
        let [...newList] = list;
        newList = newList.map((item,indx)=>{
            if(indx === index){
                return {
                    ...item,
                    status: TaskStatus.IN_PROGRESS
                }
            }
            return item
        })
        updateList(newList)
      }
    
      const handleComplete = (index:number)=>{
        let [...newList] = list;
        newList = newList.map((item,indx)=>{
            if(indx === index){
                return {
                    ...item,
                    status: TaskStatus.COMPLETED
                }
            }
            return item
        })
        updateList(newList)
      }
    
    
      const handleDel = (index:number)=>{
        let [...newList] = list;
        newList.splice(index,1)
        updateList(newList)
      }
    
      // åˆå§‹åŒ–åˆ—è¡¨æ•°æ®
      useEffect(() => {
        const list = getTaskList()
        setList(list)
      }, [])
      
      
      return (
        <div className={styles.container}>
            <h1 className={styles.title}>TODO LIST</h1>
            <div className={styles.form}>
                <input className={styles.textInput} type="text" value={inputValue} placeholder="è¾“å…¥ä»»åŠ¡å" onChange={(e)=>setInputValue(e.target.value)}/>
                <button className={styles.addBtn} onClick={handleAdd}>æ·»åŠ ä»»åŠ¡</button>
            </div>
            <div className={styles.list}>
                {list.map((item,index)=> {
                    return <TodoItem key={index} index={index} item={item} handleStart={handleStart} handleComplete={handleComplete} handleDel={handleDel}/>
                })}
            </div>
        </div>
      )
    }
    
    export default TodoList;
    

2.  åˆ›å»ºä¸€ä¸ªå­ç»„ä»¶todoItemå¹¶åœ¨çˆ¶ç»„ä»¶ä¸­å¼•å…¥

    interface IProps {
        index: number
        item: ITodoItem
        handleStart: (index: number) => void
        handleComplete: (index: number) => void
        handleDel: (index: number) => void
    }
    
    // å¯¹äºæ¥æ”¶çš„ç»„ä»¶å‚æ•°ï¼Œéœ€è¦å®šä¹‰å‚æ•°ç±»å‹
    const TodoItem:React.FC<IProps> = ({index,item,handleStart,handleComplete,handleDel})=>{
        return (
            <div className={styles.taskItem}>
                <div className={styles.name}>{item.taskName}</div>
                <div className={styles.statusText}>
                    {item.status===TaskStatus.PENDING && <span className={styles.pending}>å¾…å¼€å§‹</span>}
                    {item.status===TaskStatus.IN_PROGRESS && <span className={styles.inProgress}>è¿›è¡Œä¸­</span>}
                    {item.status===TaskStatus.COMPLETED && <span className={styles.completed}>å·²å®Œæˆ</span>}
                </div>
                <div className={styles.btns}>
                    {item.status===TaskStatus.PENDING && (
                        <button className={styles.btn} onClick={()=>handleStart(index)}>å¼€å§‹</button>
                    )}
                    {item.status===TaskStatus.IN_PROGRESS && (
                        <button className={styles.btn} onClick={()=>handleComplete(index)}>å®Œæˆ</button>
                    )}
                    <button className={styles.btn} onClick={()=>handleDel(index)}>åˆ é™¤</button>
                </div>
            </div>
        )
    }
    
    export default TodoItem
    

3.  æ•°æ®ä¿å­˜å’Œè·å–

æˆ‘ä»¬åœ¨ç¬¬ä¸€æ¬¡è¿›å…¥çš„æ—¶å€™è·å–åˆå§‹åŒ–æ•°æ®

    const getTaskList = ()=> {
        const taskList = localStorage.getItem("taskList")
        if(taskList){
            return JSON.parse(taskList)
        }
        return []
    }
    
    // åˆå§‹åŒ–åˆ—è¡¨æ•°æ®
      useEffect(() => {
        const list = getTaskList()
        setList(list)
      }, [])
    

æ·»åŠ ã€å®Œæˆä»¥åŠåˆ é™¤çš„æ—¶å€™ä¿å­˜å’Œæ›´æ–°æ•°æ®

    const saveTaskList = (list: ITodoItem[])=>{
        localStorage.setItem('taskList',JSON.stringify(list))
    }
    
    const updateList = (list:ITodoItem[])=>{
        setList(list)
        saveTaskList(list)
      }
    

ä¸Šé¢ä»£ç æˆ‘å·²ç»ä¸Šä¼ åˆ°githubï¼Œæ¬¢è¿starğŸ‘ğŸ»

*   [react-ts-demo](https://github.com/fozero/react-ts-demo)

### å‚è€ƒé˜…è¯»

*   [typescriptä¸­æ–‡ç½‘ç«™](https://www.tslang.cn/docs/home.html)
*   [TypeScript å…¥é—¨æ•™ç¨‹](http://ts.xcatliu.com/)
*   [ã€Œ1.9Wå­—æ€»ç»“ã€ä¸€ä»½é€šä¿—æ˜“æ‡‚çš„ TS æ•™ç¨‹ï¼Œå…¥é—¨ + å®æˆ˜ï¼](https://mp.weixin.qq.com/s/gzgZPOS84BTICIGh-V4N1w?forceh5=1)
*   [é˜®ä¸€å³°çš„ECMAScript6 Classçš„ç”¨æ³•](https://es6.ruanyifeng.com/#docs/class)
*   [åœ¨çº¿ç¼–å†™tsä»£ç ](https://www.typescriptlang.org/play)

ä½œè€…ï¼šfozero  
æ–‡ç« å‡ºå¤„ï¼šhttps://www.cnblogs.com/fozero  
å£°æ˜ï¼šæœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚