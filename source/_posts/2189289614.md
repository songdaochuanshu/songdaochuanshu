---
layout: post
title: "VScode开发STM32/GD32单片机-MakeFile工程JlinkRTT配置"
date: "2022-10-08T15:22:50.601Z"
---
VScode开发STM32/GD32单片机-MakeFile工程JlinkRTT配置
------------------------------------------

本次使用开发板为STM32F401CCU6，使用CubeMX配置一个Makefile工程

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008215630290-1299052396.png)

 配置时候为内部时钟

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008215656701-1688805291.png)

 工程选择makefile工程类型

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008215719854-58439945.png)

只生成需要的文件

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008215928813-73899573.png)

 用VSCode打开后显示很多波浪线

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008220033554-1604768691.png)

 选择快编辑头文件路径配置

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008220115249-982107312.png)

 在如下位置添加使用HAL库并且加上支持的芯片

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008225934250-720249356.png)

 把makefile如下位置的代码修改为

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008220938414-380096069.png)

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008221008813-1198532000.png)

 编译完成后如下所示

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008221104892-230859068.png)

 配置LED灯来查看工程是否正常

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008221528398-1868988330.png)添加如下代码

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008221741544-84232896.png)

  重新生成代码后编译，然后打开JFlash下载程序

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008221900376-1960004820.png)

 选择点击target下选项链接单片机

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008222234139-1257064423.png)

 打开工程路径下的hex文件

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008222310757-283784662.png)

 然后下载

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008222329035-1134738459.png)

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008222353160-2025605654.png)

 复位开发板然后可以看到LED灯不停闪烁

接下来天添加JlinkRTT代码，从Jlink的安装路径下找到，解压

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008222547606-1686082390.png)

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008222632314-1614498320.png)

 将RTT文件夹复制到工程路径下

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008222716895-217026280.png)

 修改makefile文件

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008222828156-1572107630.png)

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008222922782-1535732128.png)

 重新编译后缺少如下文件

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008223009133-582185560.png)

 在Jlink安装目录下的配置文件拷贝到工程中

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008223045836-632089805.png)

 修改路径

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008223136313-237846822.png)

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008223204241-898264558.png)

 在main.h中添加如下文件

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008223306544-585172237.png)

 在如下位置添加

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008230040950-308545237.png)

 在主函数中添加如下代码

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008231305982-1604267866.png)

 编译完成重新下载到开发板，下载后重启开发板，然后打开

![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008231512538-1575846927.png)

 ![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008231541494-4670690.png)

 可以从RTT Viewer中看到调试信息![](https://img2022.cnblogs.com/blog/2416267/202210/2416267-20221008231707602-48343308.png)

有你相伴此生无憾！

posted on 2022-10-08 23:19  [梦想之每天进步一点点](https://www.cnblogs.com/723687715-Q/)  阅读(0)  评论(0)  [编辑](https://i.cnblogs.com/EditPosts.aspx?postid=16770652)  [收藏](javascript:void(0))  [举报](javascript:void(0))