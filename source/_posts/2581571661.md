---
layout: post
title: "买条新内存给台式机扩容，没想到出现玄学花屏"
date: "2022-11-01T17:29:24.181Z"
---
买条新内存给台式机扩容，没想到出现玄学花屏
=====================

背景
--

我目前的配置是i5-8400，16G内存（两条威刚8G 2400）

![image-20221101101011261](https://blog.sblt.deali.cn:9000/media/blog/f5bc2cedec64e99c/image-20221101101011261.png)

然后在日常使用中，16G内存已经捉襟见肘了，无论是Android开发还是后端开发，每次编译都卡得很

正好双十一，就想着买条16G内存来扩容，组个32G的双通道。

某东看了一圈，2400的16G内存基本绝迹了，只能选择2666的，我想着主板会自动把2666降频到2400，问题应该不大吧~

然后以白菜价入手了某国产杂牌内存~

开始
--

啪的一下，很快啊

某东快递隔日到，这速度点赞~

简单开箱一下

![image-20221101102439809](https://blog.sblt.deali.cn:9000/media/blog/f5bc2cedec64e99c/image-20221101102439809.png)

拆开包装，挺简陋的~

![image-20221101102711691](https://blog.sblt.deali.cn:9000/media/blog/f5bc2cedec64e99c/image-20221101102711691.png)

这马甲还可以

立刻装上去试试

安装的时候才发现，原来我电脑上的内存一直插错位置了

B360M主板只支持双通道，有四条内存槽，1234，12是通道A，34是通道B，我之前把两条内存都插在12号槽里，血亏啊~

直接把新内存插在3号槽，开机！

很好一次点亮

用娱乐大师测一下评分

提升巨大~

![image-20221101110726519](https://blog.sblt.deali.cn:9000/media/blog/f5bc2cedec64e99c/image-20221101110726519.png)

内存评分直接翻倍

CPU和显卡评分也有不小的提升

看来双通道对性能的提升还是蛮大的

检测了一下发现3条内存都是2666mhz了

难道是自动给我超频了？？

先不管了，能用就行，2400超到2666应该没啥问题，吧？

出问题
---

当我以为可以就这么舒服的用下去的时候

问题来了

直接蓝屏+花屏了

![image-20221101110845810](https://blog.sblt.deali.cn:9000/media/blog/f5bc2cedec64e99c/image-20221101110845810.png)

有点慌，第一反应是新买的内存有问题

因为我之前也遇到过这种加了内存然后花屏的情况

熟练地打开机箱，拆下新内存条

用回原来的俩内存条，正常

OK，本来申请个退货，然后到这也就完事了。

然而……

折腾
--

既然发现原本两条8G内存不是以双通道的方式接入

那这肯定不能忍

拔掉新内存之后，我立刻把原本插在12号的内存，换成13号槽，组成双通道

结果发现无法开机

惊了，难道之前自动给我超频到2666时把旧的内存给超坏了？？

按理说不太可能吧，内存没这么容易坏

然后我就一条一条试

发现这些内存单独使用都是没问题的

然后逐步二二配对，试了一下，也都能正常点亮

于是我先把原本的威刚8G马甲条 + 新买的16G组双通道，用个半小时试试，看了一下频率依旧是2666，果不其然，不到半小时就花屏了

这时可以确定是频率的问题，进入BIOS，手动把内存频率设置为2400，插上三条内存，正常点亮，开机发现频率变成2133，正常使用

但是2133性能也太捞了

又进去BIOS，开启XMP

> XMP全称是Intel Extreme Memory Profile。是Intel在2007年9月推出的内存认证标准。它适用于DDR3和最新的DDR4。Intel宣称可以"让您对RAM 和可兼容的 DDR3/DDR4 内存进行超频。"
> 
> 在XMP技术出现之前，内存的超频已经广泛存在了。需求首先来自游戏玩家，他们真的在实践奥运精神，要求更快、更强，以便在联机游戏里面更好的虐别人。为此，内存厂商为此生产了各种游戏内存，可以工作在其默认频率之上。但那时这种内存条兼容性比较差，游戏玩家不得不在BIOS里面反复调整各种时序，才能稳定的运行游戏。各种主板的兼容性也存在很大问题，这种主板可以工作，别家出的就不一定可以。
> 
> Intel感受到了这种市场的需求，在2007年9月推出XMP内存认证标准。它的原理是在SPD上扩展了两组profile。
> 
> （SPD是每个DIMM上都的，一块小的存储芯片（EEPROM），上面详细记录了包括CL-tRCD-tRP-tRAS-CMD等等很多参数，还有生产厂家的代码等等，这也是BIOS为什么能知道我们插了哪种内存的原因。）
> 
> 第一组profile一般是标称的频率速度，也就是高频条包装上保证能够达到的速度。第二组一般是更高的极限频率。
> 
> 内存厂商负责验证这两组profile和不同芯片组的兼容性，并把内存及该设定送交Intel测试。Intel测试后会予以XMP认证，并公布在官方网站上（参考资料1）.
> 
> 它的工作原理十分简单直接，BIOS的内存初始化程序负责从SPD中读取该XMP数据块。并按照其要求而不是training的结果设置各种参数。

重启，频率回到2400，以为终于舒服了，但还是天真了

用了不久，又花屏了

这下终于反应过来了

确实是这两组内存不太兼容

再次拆机，把两条旧的去掉，只有一条16G的新内存

这次就稳定多了，用了两个小时，直到我的App编译了一个新版本发布，都很正常……

小结
--

虽然还没完全搞清楚问题所在

但我也大概猜出了个七七八八

首先，新买的杂牌内存应该没问题

其次，两条旧的内存应该也没问题

为什么会花屏，应该主板CPU对双通道内存的要求比较高，一般需要同批次相同颗粒的内存条才行

这也就解释了为啥我两条旧的内存组双通道也会掉到2133的频率

强行开启XMP，拉到2400，没什么用，只会造成系统不稳定

* * *

（赶上双十一了）

于是，最后我又下单了一条杂牌16G内存

这俩旧的8G内存，可能会考虑出掉~

最后
--

今天中午开机发现

![image-20221101164054840](https://blog.sblt.deali.cn:9000/media/blog/f5bc2cedec64e99c/image-20221101164054840.png)

我的Windows系统寄了

还好我是双系统，还有个Ubuntu

进入Ubuntu看了下Windows盘的文件都没问题

好奇怪，不知道是哪里的问题

等今晚来修复一下吧~

![image-20221101164147701](https://blog.sblt.deali.cn:9000/media/blog/f5bc2cedec64e99c/image-20221101164147701.png)

> PS：今年双十一显卡还是很贵，告辞

微信公众号：「程序设计实验室」 专注于互联网热门新技术探索与团队敏捷开发实践，包括架构设计、机器学习与数据分析算法、移动端开发、Linux、Web前后端开发等，欢迎一起探讨技术，分享学习实践经验。