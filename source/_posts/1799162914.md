---
layout: post
title: "ã€è®¾è®¡æ¨¡å¼ã€‘Javaè®¾è®¡æ¨¡å¼ - å‘½ä»¤æ¨¡å¼"
date: "2022-09-27T18:32:02.694Z"
---
ã€è®¾è®¡æ¨¡å¼ã€‘Javaè®¾è®¡æ¨¡å¼ - å‘½ä»¤æ¨¡å¼
=====================

å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰æ˜¯ä¸€ç§æ•°æ®é©±åŠ¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚è¯·æ±‚ä»¥å‘½ä»¤çš„å½¢å¼åŒ…è£¹åœ¨å¯¹è±¡ä¸­ï¼Œå¹¶ä¼ ç»™è°ƒç”¨å¯¹è±¡ã€‚è°ƒç”¨å¯¹è±¡å¯»æ‰¾å¯ä»¥å¤„ç†è¯¥å‘½ä»¤çš„åˆé€‚çš„å¯¹è±¡ï¼Œå¹¶æŠŠè¯¥å‘½ä»¤ä¼ ç»™ç›¸åº”çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰§è¡Œå‘½ä»¤ã€‚

Javaè®¾è®¡æ¨¡å¼ - å‘½ä»¤æ¨¡å¼
===============

> ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢  
> ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°  
> ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·  
> ğŸ† [ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº](https://blog.csdn.net/qq_43843951) [@æ€’æ”¾å§å¾·å¾·](https://www.cnblogs.com/lyd-code/)  
> ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼

![image](https://img2022.cnblogs.com/blog/1954113/202209/1954113-20220927235440783-687065858.jpg)

ç›®å½•

*   [Javaè®¾è®¡æ¨¡å¼ - å‘½ä»¤æ¨¡å¼](#javaè®¾è®¡æ¨¡å¼---å‘½ä»¤æ¨¡å¼)
    *   [ç®€ä»‹](#ç®€ä»‹)
    *   [å‘½ä»¤æ¨¡å¼è§£æ](#å‘½ä»¤æ¨¡å¼è§£æ)
        *   [å‘½ä»¤æ¨¡å¼è§’è‰²å’ŒèŒè´£](#å‘½ä»¤æ¨¡å¼è§’è‰²å’ŒèŒè´£)
    *   [å‘½ä»¤æ¨¡å¼å®ä¾‹](#å‘½ä»¤æ¨¡å¼å®ä¾‹)
        *   [â‘ ã€å®šä¹‰å‘½ä»¤è§’è‰²](#å®šä¹‰å‘½ä»¤è§’è‰²)
        *   [â‘¡ã€å®šä¹‰ç©ºå‘½ä»¤](#å®šä¹‰ç©ºå‘½ä»¤)
        *   [â‘¢ã€å®šä¹‰æ¥å—è€…](#å®šä¹‰æ¥å—è€…)
        *   [â‘£ã€å®šä¹‰å®ç°ç±»](#å®šä¹‰å®ç°ç±»)
        *   [â‘¤ã€å®šä¹‰é¥æ§å™¨](#å®šä¹‰é¥æ§å™¨)
        *   [â‘¥ã€æµ‹è¯•](#æµ‹è¯•)

ç®€ä»‹
--

å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰æ˜¯ä¸€ç§æ•°æ®é©±åŠ¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚è¯·æ±‚ä»¥å‘½ä»¤çš„å½¢å¼åŒ…è£¹åœ¨å¯¹è±¡ä¸­ï¼Œå¹¶ä¼ ç»™è°ƒç”¨å¯¹è±¡ã€‚è°ƒç”¨å¯¹è±¡å¯»æ‰¾å¯ä»¥å¤„ç†è¯¥å‘½ä»¤çš„åˆé€‚çš„å¯¹è±¡ï¼Œå¹¶æŠŠè¯¥å‘½ä»¤ä¼ ç»™ç›¸åº”çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰§è¡Œå‘½ä»¤ã€‚  
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â â€”â€”â€”â€” èœé¸Ÿè”ç›Ÿ

å‘½ä»¤æ¨¡å¼è§£æ
------

å‘½ä»¤æ¨¡å¼ä¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªæ¥å£å¯¹è±¡ï¼Œç”±å„ç§åŠŸèƒ½å»å®ç°å…¶æ–¹æ³•ï¼Œåœ¨è¯¦ç»†å‘½ä»¤ç±»ä¸­ï¼Œé€šè¿‡èšåˆçš„æ–¹å¼å°†å…·ä½“æ–¹æ³•è¿›è¡ŒæŠ½å–è°ƒç”¨ã€‚  
UMLå›¾ï¼š  
![image](https://img2022.cnblogs.com/blog/1954113/202209/1954113-20220927235518451-1612205714.jpg)

### å‘½ä»¤æ¨¡å¼è§’è‰²å’ŒèŒè´£

1)ã€Invokerï¼šè°ƒç”¨è€…è§’è‰²  
2)ã€Commandï¼šå‘½ä»¤è§’è‰²ï¼Œéœ€è¦æ‰§è¡Œçš„æ‰€æœ‰å‘½ä»¤ï¼Œï¼ˆæŠ½è±¡ç±»æˆ–æ¥å£ï¼‰  
3)ã€Receiverï¼šå‘½ä»¤æ¥å—è€…ï¼ŒçŸ¥é“å¦‚ä½•å®æ–½æ‰§è¡ŒæŸä¸ªå‘½ä»¤  
4)ã€ConcreteCommandï¼šå°†ä¸€ä¸ªæ¥å—å¯¹è±¡å’Œä¸€ä¸ªå‘½ä»¤ç›¸äº’ç»‘å®šï¼Œè°ƒç”¨å…·ä½“åº”æ“ä½œçš„æ–¹æ³•ã€‚

å‘½ä»¤æ¨¡å¼å®ä¾‹
------

é€šè¿‡æ™ºèƒ½å®¶å±…çš„ä¾‹å­æ¥å­¦ä¹ å‘½ä»¤æ¨¡å¼ï¼Œæœ‰ä¸€ä¸ªé¥æ§å™¨ï¼Œä¸Šé¢é›†æˆäº†å¥½å¤šå°è®¾å¤‡çš„å¼€å…³æ“ä½œï¼Œæœ‰ç¯å…‰ã€ç”µè§†ç­‰æ§åˆ¶æŒ‰é’®ã€‚é‡‡ç”¨å‘½ä»¤æ¨¡å¼æ¥ç®¡ç†æ§åˆ¶ï¼Œå…·ä½“ä»¥ä¸‹ä¸€æ­¥ä¸€æ­¥è§£æã€‚é¦–å…ˆçœ‹çœ‹å…·ä½“çš„ç±»å›¾ï¼š  
![image](https://img2022.cnblogs.com/blog/1954113/202209/1954113-20220927235549539-525715037.png)

æœ¬æ¬¡çš„ç±»ç»“æ„çœ‹èµ·æ¥æ¯”è¾ƒå¤æ‚ï¼Œå…¶å®åŸç†éƒ½æ˜¯Javaé¢å‘å¯¹è±¡ã€‚

> æœ¬æ¬¡å®éªŒé€šè¿‡å®šä¹‰å‘½ä»¤æ¥å£ï¼Œé‡Œé¢åŒ…å«æ‰§è¡Œçš„å‘½ä»¤ï¼Œåœ¨é€šè¿‡å„ç§å„æ ·è®¾å¤‡å»å®ç°å‘½ä»¤æ¥å£åŠå…¶æ–¹æ³•ï¼Œä¸åŒè®¾å¤‡çš„ä¸åŒæ“ä½œï¼Œå¦‚å¼€ã€å…³ï¼Œå„ç§è§†ä¸ºä¸€ä¸ªç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­å®ç°ä¸åŒçš„æ“ä½œæ–¹æ³•ï¼Œè™½ç„¶å‘½ä»¤ä¸åŒï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡èšåˆçš„æ–¹å¼ï¼Œä½¿ç”¨å‘½ä»¤æ¥å—è€…ç±»ä¸­å»å®ç°å…·ä½“çš„ä¸åŒæ–¹æ³•è¿›è¡Œåˆ†åˆ«è°ƒç”¨ã€‚æœ€åå®šä¹‰é¥æ§å™¨å®šä¹‰å‘½ä»¤ç»„å¹¶ä¸”ä¸ºæŒ‰é’®å»ç»‘å®šç›¸åº”çš„å®ç°å‘½ä»¤ã€‚

ä»£ç å¦‚ä¸‹ï¼Œä¼šä¸€æ­¥ä¸€æ­¥è§£é‡Šã€‚

### â‘ ã€å®šä¹‰å‘½ä»¤è§’è‰²

å‘½ä»¤è§’è‰²å¯ä»¥æ˜¯æ¥å£ä¹Ÿå¯ä»¥æ˜¯æŠ½è±¡ç±»ï¼Œæ ¹æ®æœ¬æ¬¡çš„æ¡ˆä¾‹è®¾è®¡ä¸ºæ¥å£ã€‚

> åªæœ‰ä¸€ä¸ªæ‰§è¡Œæ–¹æ³•ã€‚

    package com.lyd.demo.command;
    
    /**
     * @Author: lyd
     * @Description: æ¥å£ - å‘½ä»¤
     * @Date: 2022-09-03
     */
    public interface Command {
        public void execute(); // æ‰§è¡Œæ–¹æ³•
    }
    
    

### â‘¡ã€å®šä¹‰ç©ºå‘½ä»¤

> å®šä¹‰ç©ºå‘½ä»¤æ˜¯ä¸ºäº†é˜²æ­¢åˆ¤ç©º

    package com.lyd.demo.command;
    /**
     * @Author: lyd
     * @Description: ç©ºå‘½ä»¤æ–¹æ³•ï¼Œç®€åŒ–ç©ºåˆ¤æ–­
     * @Date: 2022-09-03
     */
    public class NoCommand implements Command {
        @Override
        public void execute() {
        }
    }
    

### â‘¢ã€å®šä¹‰æ¥å—è€…

> æ¥æ”¶è€…å°±æ˜¯å…·ä½“çš„å®ç°æ–¹æ³•ã€‚

    package com.lyd.demo.command.light;
    /**
     * @Author: lyd
     * @Description: è¢«èšåˆç±»ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£ç»†èŠ‚æ‰§è¡Œæ–¹æ³•
     * @Date: 2022-09-03
     */
    public class LightReceive {
        public void on() {
            System.out.println(" ç¯å…‰å·²æ‰“å¼€... ");
        }
        public void off() {
            System.out.println(" ç¯å…‰å·²å…³é—­... ");
        }
    }
    

### â‘£ã€å®šä¹‰å®ç°ç±»

> ç¯å…‰æ‰“å¼€ç±»ï¼Œé€šè¿‡èšåˆæ–¹å¼è·å–å…·ä½“å®ç°æ–¹æ³•ï¼›ç¯å…‰å®ç°ç±»å®ç°å‘½ä»¤æ¥å£ï¼Œå®ç°æ‰§è¡Œæ–¹æ³•ï¼ˆè°ƒç”¨èšåˆç±»ä¸­çš„æ‰“å¼€æ–¹æ³•ï¼‰

    package com.lyd.demo.command.light;
    import com.lyd.demo.command.Command;
    /**
     * @Author: lyd
     * @Description: å®ç°ç±» - ç‚¹ç¯æ‰“å¼€ç±»
     * @Date: 2022-09-03
     */
    public class LightOnCommand implements Command {
        // èšåˆ
        LightReceive lightReceive;
        public LightOnCommand(LightReceive lightReceive) {
            this.lightReceive = lightReceive;
        }
        @Override
        public void execute() { // ç¯å…‰æ‰“å¼€å‘½ä»¤åªéœ€è¦è°ƒç”¨ç¯å…‰å¼€å¯çš„æ–¹æ³•
            lightReceive.on();
        }
    }
    

å…³é—­å‘½ä»¤ä¹Ÿæ˜¯å¦‚æ­¤è®¾ç½®ï¼Œè¿™é‡Œä¸ç²˜è´´ä»£ç äº†

### â‘¤ã€å®šä¹‰é¥æ§å™¨

> å› ä¸ºé¥æ§å™¨æœ‰è®¸å¤šè®¾å¤‡çš„å¼€å…³ï¼Œå®šä¹‰ç›¸åº”å¼€å…³æŒ‰é’®çš„å‘½ä»¤ç»„ï¼Œé€šè¿‡æ„é€ æ–¹æ³•å»åˆå§‹åŒ–ï¼Œå¹¶æŠŠç¾æ ¼å°”å¯¹è±¡å®ä¾‹åŒ–ä¸ºç©ºå‘½ä»¤å¯¹è±¡ã€‚é€šè¿‡setCommandæ–¹æ³•æ¥ç»‘å®šæŒ‰é’®å’Œå‘½ä»¤ï¼ŒonButtonæ˜¯æ¨¡æ‹ŸæŒ‰ä¸‹å¼€å…³æ—¶å€™è°ƒç”¨çš„æ–¹æ³•ã€‚

    package com.lyd.demo.controller;
    import com.lyd.demo.command.Command;
    import com.lyd.demo.command.NoCommand;
    /**
     * @Author: lyd
     * @Description: é¥æ§å™¨
     * @Date: 2022-09-03
     */
    public class RemoteController {
        // å¼€æŒ‰é’®çš„å‘½ä»¤ç»„
        Command[] onCommand;
        // å…³é—­å‘½ä»¤ç»„
        Command[] offCommand;
        public RemoteController() { // å‡è®¾æœ‰èˆå°è®¾å¤‡ï¼Œæ¯å°è®¾å¤‡éƒ½æ˜¯å¼€å…³å‘½ä»¤
            onCommand = new Command[5];
            offCommand = new Command[5];
    
            // åˆå§‹åŒ–
            for (int i=0; i<5; i++) {
                onCommand[i] = new NoCommand();
                offCommand[i] = new NoCommand();
            }
        }
        /**
         * ç»™æŒ‰é’®è®¾ç½®å‘½ä»¤
         * @param no ç¼–å·-ä»£è¡¨è®¾å¤‡
         * @param onCommand - å¼€å‘½ä»¤
         * @param offCommand - å…³å‘½ä»¤
         */
        public void setCommand(int no, Command onCommand, Command offCommand) {
            this.onCommand[no] = onCommand;
            this.offCommand[no] = offCommand;
        }
        /**
         * æŒ‰ä¸‹å¼€æŒ‰é’®
         * @param no æ ¹æ®ç¼–å·å»è°ƒç”¨å“ªä¸ªè®¾å¤‡çš„æ‰§è¡Œæ–¹æ³•
         */
        public void onButton(int no) {
            onCommand[no].execute();
        }
        /**
         * æŒ‰ä¸‹å…³æŒ‰é’®
         * @param no æ ¹æ®ç¼–å·å»è°ƒç”¨å“ªä¸ªè®¾å¤‡çš„æ‰§è¡Œæ–¹æ³•
         */
        public void offButton(int no) {
            offCommand[no].execute();
        }
    }
    

### â‘¥ã€æµ‹è¯•

ä»¥ä¸Šä»‹ç»åªæ˜¯å†™äº†ä¸€ç§è®¾å¤‡ï¼Œè¿˜å¯ä»¥ç›´æ¥æ·»åŠ å…¶ä»–è®¾å¤‡ï¼Œå¹¶ä¸éœ€è¦æ”¹åŠ¨å…¶ä»–ç±»ã€‚  
ç»“æ„å›¾ï¼š  
![image](https://img2022.cnblogs.com/blog/1954113/202209/1954113-20220927235608941-1160971701.png)

ä»£ç å¦‚ä¸‹ï¼š

    package com.lyd.demo.test;
    
    import com.lyd.demo.command.light.LightOffCommand;
    import com.lyd.demo.command.light.LightOnCommand;
    import com.lyd.demo.command.light.LightReceive;
    import com.lyd.demo.command.tv.TvOffCommand;
    import com.lyd.demo.command.tv.TvOnCommand;
    import com.lyd.demo.command.tv.TvReceive;
    import com.lyd.demo.controller.RemoteController;
    
    /**
     * @Author: lyd
     * @Description: æµ‹è¯•ç±»
     * @Date: 2022-09-03
     */
    public class CommandTest {
        public static void main(String[] args) {
            // åˆ›å»ºç¯å…‰çš„æ¥å—è€… - å…·ä½“æ–¹æ³•ç±»
            LightReceive lightReceive = new LightReceive();
            // åˆ›å»ºç¯å…‰çš„å‘½ä»¤
            LightOnCommand lightOnCommand = new LightOnCommand(lightReceive);
            LightOffCommand lightOffCommand = new LightOffCommand(lightReceive);
            // åˆ›å»ºé¥æ§å™¨
            RemoteController remoteController = new RemoteController();
            // ç»‘å®šå‘½ä»¤åˆ°ç›¸åº”çš„æŒ‰é’®ä¸­
            remoteController.setCommand(0, lightOnCommand, lightOffCommand); // ç»‘å®š
            // æµ‹è¯•
            System.out.println("æŒ‰ä¸‹å¼€ç¯æŒ‰é’®ã€‹ã€‹ã€‹ã€‹ã€‹");
            remoteController.onButton(0); // 0 ä»£è¡¨æ˜¯ç¯å…‰æŒ‰é’®
            System.out.println("æŒ‰ä¸‹å…³ç¯æŒ‰é’®ã€‹ã€‹ã€‹ã€‹ã€‹");
            remoteController.offButton(0);
    
            TvReceive tvReceive = new TvReceive();
            TvOnCommand tvOnCommand = new TvOnCommand(tvReceive);
            TvOffCommand tvOffCommand = new TvOffCommand(tvReceive);
            remoteController.setCommand(1, tvOnCommand, tvOffCommand);
            System.out.println("æŒ‰ä¸‹å¼€å¯ç”µè§†æŒ‰é’®ã€‹ã€‹ã€‹ã€‹ã€‹");
            remoteController.onButton(1);
            System.out.println("æŒ‰ä¸‹å…³é—­ç”µè§†æŒ‰é’®ã€‹ã€‹ã€‹ã€‹ã€‹");
            remoteController.offButton(1);
        }
    }
    

è¿è¡Œç»“æœï¼š  
![image](https://img2022.cnblogs.com/blog/1954113/202209/1954113-20220927235623765-974416645.png)

ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¯èƒ½æœ‰äº›è¯­è¨€ä¸æ˜¯å¾ˆé€šç•…ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ä¸€é”®ä¸‰è¿å“¦ï¼ğŸ‘

ä»Šå¤©çš„å†…å®¹çœ‹èµ·æ¥å¹¶ä¸ç®€å•ï¼Œä½†å®è´¨ä¸Šé™¤äº†è®¾è®¡æ¨¡å¼çš„æ€è·¯ï¼Œå…¶å®å°±æ˜¯Javaçš„é¢å‘å¯¹è±¡çŸ¥è¯†ï¼Œåªè¦è‚¯åŠ¨æ‰‹å¤šæ•²ï¼Œå°±å®¹æ˜“ç†è§£ã€‚