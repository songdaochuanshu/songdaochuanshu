---
layout: post
title: "Grafana 系列文章（八）：Grafana Explore 中的 Inspector"
date: "2023-02-05T10:15:52.378Z"
---
Grafana 系列文章（八）：Grafana Explore 中的 Inspector
============================================

> 👉️**URL:** [https://grafana.com/docs/grafana/latest/explore/explore-inspector/](https://grafana.com/docs/grafana/latest/explore/explore-inspector/)
> 
> 📝**Description:**
> 
> Explore 中的检查器 (Inspector). 检查器可以帮助你理解你的查询并排除故障。你可以检查原始数据，把这些数据导出到一个 csv 文件中。

检查器帮助你了解你的查询并排除故障。你可以检查原始数据，将这些数据导出到逗号分隔的数值（CSV）文件，以 TXT 格式导出日志结果，并查看查询请求。

检查器 UI
------

检查器有以下标签。

*   **统计选项卡** - 显示你的查询需要多长时间，以及它返回多少数据。
*   **查询标签** -显示 Grafana 查询数据源时向服务器发出的请求。
*   **JSON 标签** - 允许你查看和复制 JSON 数据和 JSON 数据框架结构。
*   **数据标签** - 显示查询返回的原始数据。
*   **错误选项卡** - 显示错误。只有当查询返回错误时才可见。

Inspector tasks
---------------

你可以在 Explore 检查器中执行各种任务。

### 打开检查器

1.  运行你想检查的查询。
2.  单击**检查器**按钮。

检查器窗格在屏幕的底部打开。

### 检查原始查询结果

你可以查看原始查询结果，也就是查询在表中返回的数据。

在**检查器**标签中，点击**数据**标签。

对于多个查询或查询多个节点，有额外的选项。

*   **显示数据框**：选择你要查看的结果集数据。
*   **按时间连接的系列**：一次查看你所有查询的原始数据，每列一个结果集。你可以点击一列标题来对数据进行排序。

### 下载原始查询结果为 CSV

Grafana 会在你的默认浏览器下载位置生成一个 CSV 文件。你可以在你选择的查看器中打开它。

1.  在**检查器**选项卡中，按照 [检查原始查询结果](#%E6%A3%80%E6%9F%A5%E5%8E%9F%E5%A7%8B%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C)中的说明进行原始查询结果。
2.  细化查询设置，直到你能看到你想输出的原始数据。
3.  点击**下载 CSV**。

为了下载一个专门针对 Excel 格式的 CSV 文件，请展开**数据选项**，然后在点击**下载 CSV**选项之前，启用**下载 Excel**的开关。

### 将日志结果下载为 TXT 格式

Grafana 会在你的默认浏览器下载位置生成一个 TXT 文件。你可以在你选择的查看器中打开它。

1.  打开检查器。
2.  如上所述，检查日志查询结果。
3.  单击**下载日志**。

### 下载 trace 结果

根据数据源类型，Grafana 为 trace 结果生成一个 JSON 文件，支持的格式为 Jaeger、Zipkin 或 OTLP 格式。

1.  打开检查器。
2.  检查跟踪查询结果 [如上所述](#%E6%A3%80%E6%9F%A5%E5%8E%9F%E5%A7%8B%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C)。
3.  点击**下载 trace**。

### 检查查询性能

统计选项卡显示统计信息，告诉你你的查询需要多长时间，你发送了多少次查询，以及返回的行的数量。这些信息可以帮助你解决查询的问题，特别是当任何数字意外地高或低时。

1.  打开检查器。
2.  导航到**统计**标签。

统计数据是以只读格式显示的。

### 查看 JSON model

你可以浏览和导出数据以及数据框架 JSON 模型。

1.  在检查器面板上，点击**JSON**标签。
2.  从选择源下拉菜单中，选择以下选项之一。
    *   **数据** - 显示一个 JSON 对象，代表返回给 Explore 的数据。
    *   **DataFrame 结构** -显示原始结果集。
3.  你可以展开或折叠 JSON 的部分内容来查看单独的部分。你也可以点击**复制到剪贴板**选项来复制 JSON 主体，并将其粘贴到另一个应用程序。

### 查看对数据源的原始请求和响应

1.  打开检查器面板，然后点击**查询**标签。
2.  点击**刷新**。

Grafana 会将查询发送到服务器并显示结果。你可以钻研查询的特定部分，展开或折叠所有的查询，或将数据复制到剪贴板，以便在其他应用程序中使用。

Grafana 系列文章
------------

[Grafana 系列文章](https://ewhisper.cn/tags/Grafana/)

> _三人行, 必有我师; 知识共享, 天下为公._ 本文由东风微鸣技术博客 [EWhisper.cn](https://EWhisper.cn) 编写.