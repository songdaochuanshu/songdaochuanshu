---
layout: post
title: "ã€Java8æ–°ç‰¹æ€§ã€‘- Lambdaè¡¨è¾¾å¼"
date: "2022-10-06T05:37:08.333Z"
---
ã€Java8æ–°ç‰¹æ€§ã€‘- Lambdaè¡¨è¾¾å¼
=====================

Lambda è¡¨è¾¾å¼ï¼ˆlambda expressionï¼‰æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ŒLambdaè¡¨è¾¾å¼åŸºäºæ•°å­¦ä¸­çš„Î»æ¼”ç®—å¾—åï¼Œç›´æ¥å¯¹åº”äºå…¶ä¸­çš„lambdaæŠ½è±¡ï¼ˆlambda abstractionï¼‰ï¼Œå³æ²¡æœ‰å‡½æ•°åçš„å‡½æ•°ã€‚Lambdaè¡¨è¾¾å¼å¯ä»¥è¡¨ç¤ºé—­åŒ…ï¼ˆæ³¨æ„å’Œæ•°å­¦ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ä¸åŒï¼‰ã€‚

Java8æ–°ç‰¹æ€§ - Lambdaè¡¨è¾¾å¼
====================

> ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢  
> ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°  
> ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·  
> ğŸ† [ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº](https://blog.csdn.net/qq_43843951) [@æ€’æ”¾å§å¾·å¾·](https://www.cnblogs.com/lyd-code/)  
> ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼

![lambdaè¡¨è¾¾å¼.jpg](https://ucc.alicdn.com/pic/developer-ecology/9d0ed3d919134b03848139ee074cc0e0.jpg)

ç®€ä»‹
--

Lambda è¡¨è¾¾å¼ï¼ˆlambda expressionï¼‰æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ŒLambdaè¡¨è¾¾å¼åŸºäºæ•°å­¦ä¸­çš„Î»æ¼”ç®—å¾—åï¼Œç›´æ¥å¯¹åº”äºå…¶ä¸­çš„lambdaæŠ½è±¡ï¼ˆlambda abstractionï¼‰ï¼Œå³æ²¡æœ‰å‡½æ•°åçš„å‡½æ•°ã€‚Lambdaè¡¨è¾¾å¼å¯ä»¥è¡¨ç¤ºé—­åŒ…ï¼ˆæ³¨æ„å’Œæ•°å­¦ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ä¸åŒï¼‰ã€‚è¿™æ˜¯æ¥è‡ªç™¾åº¦ç™¾ç§‘å¯¹lambdaçš„ä»‹ç»ï¼Œå®é™…ä¸Šlambdaå°±æ˜¯ç®€åŒ–äº†åŒ¿åå‡½æ•°çš„ç¼–å†™ï¼Œåªéœ€ä¸€è¡Œä»£ç å°±èƒ½ä»£æ›¿ç¹æ‚çš„ä»£ç ã€‚  
lambdaä¸»è¦æ˜¯å¯ä»¥éå¸¸ç®€æ´çš„å½¢å¼è°ƒç”¨æˆ‘ä»¬çš„åŒ¿åå‡½æ•°æ¥å£ã€‚

ç®€å•ä¾‹å­
----

é¦–å…ˆå£°æ˜ä¸€ä¸ªæ¥å£ï¼Œå¹¶ä¸”ç¼–å†™å®ç°ç±»å®ç°è¿™ä¸ªæ¥å£

    // UserService
    public interface UserService {
        void add();
    }
    // UserServiceImpl
    public class UserServiceImpl implements UserService {
        @Override
        public void add() {
            System.out.println("UserServiceImpl --- add");
        }
    }
    

ä¸€èˆ¬æ¥è¯´æ˜¯é€šè¿‡newå®ç°ç±»ä»è€Œæ‹¿åˆ°å®ç°ä¸­çš„addæ–¹æ³•ï¼Œå¦‚æœé€šè¿‡newæ¥å£ç±»å°±éœ€è¦ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å½¢å¼è°ƒç”¨æ¥å£ã€‚IDEAä¼šæç¤ºä½¿ç”¨lambdaè¡¨è¾¾å¼ã€‚  
![image.png](https://ucc.alicdn.com/pic/developer-ecology/34068f479b374b58a9ad0a08c4b1cd98.png)

å¦‚ä¸‹ä»£ç å¯ä»¥çœ‹ä¸€ä¸‹å¯¹æ¯”ã€‚

    public static void main(String[] args) {
        UserService userService = new UserServiceImpl();
        userService.add();
    
        UserService user = new UserService() {
            @Override
            public void add() {
                // åŒ¿åå†…éƒ¨æ¥å£ä¸šåŠ¡é€»è¾‘
                System.out.println("åŒ¿åå†…éƒ¨æ¥å£ä¸šåŠ¡é€»è¾‘");
            }
        };
    
        // Lamdbaè¡¨è¾¾å¼
        UserService user2 = () -> System.out.println("åŒ¿åå†…éƒ¨æ¥å£ä¸šåŠ¡é€»è¾‘");
        user2.add();
    }
    

Lambdaè¡¨è¾¾å¼çš„è§„èŒƒ
------------

Javaä¸­çš„Lambdaè¡¨è¾¾å¼çš„è§„èŒƒï¼Œå¿…é¡»æ˜¯ä¸ºå‡½æ•°æ¥å£ã€‚

### ä½¿ç”¨å‡½æ•°å¼æ¥å£

ä½¿ç”¨Lambdaè¡¨è¾¾å¼ä¾èµ–äºå‡½æ•°å¼æ¥å£ï¼š  
1ã€ä½¿ç”¨@FunctionalInterfaceæ³¨è§£æ¥å£°æ˜å‡½æ•°æ¥å£  
2ã€åœ¨è¿™ä¸ªå‡½æ•°æ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•  
3ã€åœ¨å‡½æ•°æ¥å£ä¸­å¯ä»¥å®šä¹‰objectç±»ä¸­çš„æ–¹æ³•  
4ã€å¯ä»¥æœ‰é™æ€æ–¹æ³•  
\***å‡½æ•°å¼æ¥å£(Functional Interface)** å°±æ˜¯ä¸€ä¸ªæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªéæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚  
æ›´å¤šå‡½æ•°å¼æ¥å£å¯ä»¥æŸ¥çœ‹èœé¸Ÿè”ç›Ÿï¼š[https://www.runoob.com/java/java8-functional-interfaces.html](https://www.runoob.com/java/java8-functional-interfaces.html)

### å‡½æ•°å¼æ¥å£çš„å®šä¹‰

é€šè¿‡@FunctionalInterfaceæ³¨è§£å£°æ˜æ¥å£ç±»ï¼Œåœ¨javaä¸­ä¹Ÿæœ‰è®¸å¤šå†…ç½®çš„å‡½æ•°æ¥å£ï¼Œè¯¦æƒ…çœ‹èœé¸Ÿè”ç›Ÿã€‚

    @FunctionalInterface // å£°æ˜å‡½æ•°å¼æ¥å£
    public interface UserService {
        void add();
    
        String toString(); // Objectç±»ä¸­çš„æ–¹æ³•
    
        static void hello() { // é™æ€æ–¹æ³•
            System.out.println("hello");
        }
    }
    

Lambdaè¡¨è¾¾å¼çš„åŸºç¡€è¯­æ³•
--------------

### è¡¨è¾¾å¼æ ¼å¼

(å‚æ•°) -> {æ–¹æ³•ä½“}

### æ ¼å¼è¯´æ˜

()ï¼šå­˜æ”¾å‚æ•°ï¼Œç•™ç©ºå°±ä»£è¡¨æ²¡æœ‰å‚æ•°ã€‚å‡½æ•°æ¥å£çš„å‚æ•°åˆ—è¡¨ï¼Œä¸éœ€è¦å†™ç±»å‹ï¼Œéœ€è¦å®šä¹‰å‚æ•°åç§°ã€‚  
\->ï¼šæ˜¯æ–°å¼•å…¥çš„è¯­æ³•æ ¼å¼ï¼Œä»£è¡¨æŒ‡å‘åŠ¨ä½œã€‚  
{}ï¼šæ–¹æ³•ä½“

### æ— å‚æ–¹æ³•è°ƒç”¨

åœ¨æ¥å£ç±»ä¸­å£°æ˜ä¸€ä¸ªæ— å‚çš„æŠ½è±¡æ–¹æ³•ï¼Œé€šè¿‡lambdaè¡¨è¾¾å¼æ¥å®Œæˆè°ƒç”¨ã€‚()ä¸éœ€è¦å­˜æ”¾å‚æ•°ï¼Œæœ€åå°†ä¼šè¿”å›ä¸€ä¸ªå®ç°ç±»å¯¹è±¡ã€‚åœ¨é€šè¿‡è°ƒç”¨å¯¹è±¡çš„getæ–¹æ³•ã€‚

    // åŒ¿åå†…éƒ¨æ¥å£ä¸šåŠ¡é€»è¾‘
    UserService user2 = () -> System.out.println("åŒ¿åå†…éƒ¨æ¥å£ä¸šåŠ¡é€»è¾‘");
    user2.get();
    

æ›´åŠ ç®€ä¾¿çš„å†™æ³•

    ((UserService)() -> System.out.println("åŒ¿åå†…éƒ¨æ¥å£ä¸šåŠ¡é€»è¾‘")).get();
    

### å«å‚æ•°æ–¹æ³•è°ƒç”¨

åœ¨MathServiceå®šä¹‰ä¸€ä¸ªå«æœ‰å‚æ•°çš„æŠ½è±¡æ–¹æ³•ï¼ŒåŸæœ¬çš„æ–¹å¼é€šè¿‡åŒ¿åå†…éƒ¨æ¥å£ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨lambdaè¡¨è¾¾å¼æ›´åŠ ç®€ä¾¿ï¼Œå¹¶ä¸”å¯ä»¥çœå»{}ï¼Œä¹Ÿä¸éœ€è¦returnã€‚

    MathService math = new MathService() {
        @Override
        public Integer add(int a, int b) {
            return a + b;
        }
    };
    
    MathService mathService = (a, b) -> a + b;
    
    System.out.println(mathService.add(1, 1));
    

æ–¹æ³•å¼•å…¥
----

### è§„åˆ™

æ–¹æ³•å¼•å…¥éœ€è¦éµå¾ªè§„èŒƒï¼šæ–¹æ³•å‚æ•°åˆ—è¡¨ã€è¿”å›ç±»å‹ä¸å‡½æ•°æ¥å£å‚æ•°åˆ—è¡¨ä¸è¿”å›ç±»å‹å¿…é¡»  
è¦ä¿æŒä¸€è‡´ã€‚  
æ–¹æ³•å¼•å…¥çš„è§„åˆ™ï¼š  
Â Â Â Â Â Â Â é™æ€æ–¹æ³•å¼•å…¥ï¼š ç±»å::ï¼ˆé™æ€ï¼‰æ–¹æ³•åç§°  
Â Â Â Â Â Â Â å¯¹è±¡æ–¹æ³•å¼•å…¥ï¼š ç±»å:: å®ä¾‹æ–¹æ³•åç§°  
Â Â Â Â Â Â Â å®ä¾‹æ–¹æ³•å¼•å…¥ï¼šnewå¯¹è±¡ å¯¹è±¡å®ä¾‹::æ–¹æ³•å¼•å…¥  
Â Â Â Â Â Â Â æ„é€ å‡½æ•°å¼•å…¥ï¼šç±»å::new  
æ–¹æ³•å¼•ç”¨æä¾›äº†éå¸¸æœ‰ç”¨çš„è¯­æ³•ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨å·²æœ‰çš„javaç±»æˆ–å¯¹è±¡çš„æ–¹æ³•æˆ–æ„é€ å™¨ã€‚æ–¹æ³•å¼•ç”¨å…¶å®ä¹Ÿç¦»ä¸å¼€Lambdaè¡¨è¾¾å¼ï¼Œ  
ä¸lambdaè”åˆä½¿ç”¨ ï¼Œæ–¹æ³•å¼•ç”¨å¯ä»¥ä½¿è¯­è¨€çš„æ„é€ æ›´åŠ ç´§å‡‘ç®€æ´ï¼Œå‡å°‘å†—ä½™ä»£ç ã€‚æ–¹æ³•å¼•ç”¨æä¾›éå¸¸æœ‰ç”¨çš„è¯­æ³•ï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨å·²æœ‰çš„javaç±»æˆ–è€…å¯¹è±¡ä¸­æ–¹æ³•æˆ–è€…æ„é€ å‡½æ•°ï¼Œ  
æ–¹æ³•å¼•ç”¨éœ€è¦é…åˆLambdaè¡¨è¾¾å¼è¯­æ³•ä¸€èµ·ä½¿ç”¨å‡å°‘ä»£ç çš„å†—ä½™æ€§é—®é¢˜ã€‚  
![1664976332232.png](https://ucc.alicdn.com/pic/developer-ecology/a499433939cf4a40a9e68f3d01d9ca19.png)

å®ä¾‹
--

### æ„é€ å™¨å¼•ç”¨

é€šè¿‡æ„é€ å™¨å¼•ç”¨å®ä¾‹åŒ–å¯¹è±¡ï¼Œ

    public static void main(String[] args) {
        // ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»
        CarService carService = new CarService() {
            @Override
            public Car getCar() {
                return null;
            }
        };
        // ä½¿ç”¨å¼•ç”¨æ–¹æ³•
        CarService car = Car::new;
        car.getCar();
    }
    public class Car {
        private String name;
        private String brand;
    
        public Car() {
        }
    }
    public interface CarService {
        Car getCar();
    }
    

### é™æ€æ–¹æ³•å¼•å…¥

    UserService u = UserService::hello;
    u.get();
    

åœ¨userserviceä¸­ï¼Œæœ‰ä¸€ä¸ªæŠ½è±¡getæ–¹æ³•å’Œä¸€ä¸ªé™æ€æ–¹æ³•

    @FunctionalInterface
    public interface UserService {
        void get();
        static void hello() {
            System.out.println("hello");
        }
    }
    

è¿è¡Œåä¼šè¾“å‡ºhello

    hello
    
    Process finished with exit code 0
    

### å¯¹è±¡æ–¹æ³•å¼•å…¥

è¿™æ˜¯ä¸€ç§æ›´ä¸ºæ–¹ä¾¿çš„å†™æ³•ï¼Œ æˆ‘è®°å¾—åœ¨mybatis-plusä½¿ç”¨è‡ªå¸¦æ¡ä»¶æŸ¥è¯¢çš„æ—¶å€™ä¼šç”¨åˆ°è¿™ç§æ–¹å¼ï¼Œä»¥ä¸‹ç”¨ç®€å•ä¾‹å­æ¥å®ç°ã€‚java8ä¸­æä¾›äº†public interface Function<T, R>çš„ç±»ï¼Œè¿™ä¸ªç±»ä¹Ÿæ˜¯ä½¿ç”¨@FunctionalInterfaceæ³¨è§£ï¼Œå¯è§ä¹Ÿæ˜¯å‡½æ•°å¼æ¥å£ã€‚  
ä»£ç ï¼š

    // åœ¨carä¸­å£°æ˜ä¸€ä¸ªæ–¹æ³•
    public class Car {
        public String Info() {
            return "ä¿æ—¶æ· - å¸•æ‹‰æ¢…æ‹‰";
        }
    }
    // å‡½æ•°å¼æ¥å£
    @FunctionalInterface
    public interface CarInFoService {
        String getCar(Car car);
    }
    

æµ‹è¯•é‡‡ç”¨äº†ä¸‰ç§æ–¹å¼è¿›è¡Œæ¯”è¾ƒ

    public class LambdaTest4 {
        public static void main(String[] args) {
            System.out.println("**************åŒ¿åå†…éƒ¨ç±»**************");
            CarInFoService carInFoService = new CarInFoService() {
                @Override
                public String getCar(Car car) {
                    return car.Info();
                }
            };
            System.out.println(carInFoService.getCar(new Car()));
            System.out.println("**************lambda**************");
            CarInFoService carInFoService2 = (car) -> car.Info();
            System.out.println(carInFoService2.getCar(new Car()));
            System.out.println("**************å¯¹è±¡æ–¹æ³•å¼•å…¥**************");
            CarInFoService carInFoService3 = Car::Info;
            System.out.println(carInFoService3.getCar(new Car()));
    
            // R apply(T t); T  applyæ–¹æ³•ä¼ é€’çš„å‚æ•°ç±»å‹ ï¼š R apply æ–¹æ³•è¿”å›çš„ç±»å‹
            Function<String, Integer> function = String::length;
            System.out.println(function.apply("lyd_code"));
        }
    }
    

ç»“æœ  
![image.png](https://ucc.alicdn.com/pic/developer-ecology/a7c9af1c0caf4830a742d7b692440194.png)

Lambdaè¡¨è¾¾å¼éå†
-----------

é€šè¿‡foreachå¾ªç¯éå†ï¼ŒforEachå®é™…ä¸Šéœ€è¦ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»Consumer<? super E>ã€‚  
![image.png](https://ucc.alicdn.com/pic/developer-ecology/154a2b560edc48b3913d6d7ba12507b8.png)  
ä»£ç å¦‚ä¸‹

    public class LambdaTest5 {
        public static void main(String[] args) {
            ArrayList<String> list = new ArrayList<>();
            list.add("lyd");
            list.add("tom");
            list.add("jack");
            list.forEach(new Consumer<String>() {
                @Override
                public void accept(String s) {
                    System.out.println("name: " + s);
                }
            });
            System.out.println("lambdaè¡¨è¾¾å¼");
            /**
             * sï¼šéå†é“¾è¡¨æ‰€å¾—åˆ°çš„å…ƒç´ å­—ç¬¦ä¸²
             */
            list.forEach(s -> System.out.println("name: " + s));
        }
    }
    

æµ‹è¯•ç»“æœ  
![image.png](https://ucc.alicdn.com/pic/developer-ecology/0fe5f1262e8f41f682ac2b2987acfbcb.png)

Lambdaæ’åº
--------

é€šè¿‡ComparatoråŒ¿åå†…éƒ¨ç±»

    public class LambdaTest6 {
        public static void main(String[] args) {
            ArrayList<Student> students = new ArrayList<>();
            students.add(new Student("lyd", 99));
            students.add(new Student("lkj", 55));
            students.add(new Student("llm", 67));
            students.add(new Student("lss", 87));
    
    //        students.sort(new Comparator<Student>() {
    //            @Override
    //            public int compare(Student o1, Student o2) {
    //                return o1.getScore() - o2.getScore();
    //            }
    //        });
    
            students.sort((o1, o2) -> o1.getScore() - o2.getScore());
    
            students.forEach(student -> System.out.println("name: " + student.getName() + " score: " + student.getScore()));
        }
    }
    

ç»“æœ  
![image.png](https://ucc.alicdn.com/pic/developer-ecology/45b40c197b314d03aa5f33874b237705.png)

ä¸ºäº†å†™å¥½åšå®¢ï¼ŒåŒ…æ‹¬ä»£ç ã€æ–‡å­—ï¼Œæˆ‘æ˜¯ç»è¿‡æ–Ÿé…Œäº†çš„ï¼Œå¦‚æœæœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ï¼æ„Ÿè°¢è§‚çœ‹ï¼  
ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ç‚¹èµå“¦ï¼ğŸ‘