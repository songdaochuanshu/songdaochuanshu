---
layout: post
title: "git中 gitignore 忽略文件操作"
date: "2022-10-14T06:09:37.185Z"
---
git中 gitignore 忽略文件操作
=====================

通常，`.gitignore`文件被放置在存储库的根目录中。根目录也称为父目录和当前工作目录。根文件夹包含组成项目的所有文件和其他文件夹。也就是说，您可以将它放在存储库中的任何文件夹中。你甚至可以有多个`.gitignore`文件。

在macOS或者Linux系统中创建`.gitignore`文件可以使用命令行，打开终端，然后使用`cd`命令导航到包含项目的根文件夹，并输入以下命令为您的目录创建一个`.gitignore`文件:

\>touch .gitignore

  
  
默认情况下，名称前面带点(`.`)的文件是隐藏的。

单独使用`ls`命令时，隐藏文件是不可见的。要从命令行查看所有文件，包括隐藏文件，使用`-a`标志和`ls`命令，如下所示:

\>ls -a

  
**.gitignore文件包含的内容**

你应该考虑添加到.gitignore文件中的文件类型是不需要提交的任何文件。出于安全原因，您可能不希望提交它们，或者因为它们对您来说是本地的，因此对于与您从事同一项目的其他开发人员来说是不必要的。

以下这些内容可能会包含在文件中:

*   操作系统文件。每个操作系统(如macOS、Windows和Linux)都会生成特定于系统的隐藏文件，其他开发人员不需要使用这些文件，因为他们的系统也会生成这些文件。例如，在macOS上，Finder生成一个`. ds_store`文件，其中包括用户对文件夹外观和显示的首选项，例如图标的大小和位置。
    
*   由代码编辑器和IDE (IDE代表集成开发环境)等应用程序生成的配置文件。这些文件是根据您、您的配置和您的首选项设置定制的。
    
*   从项目中使用的编程语言或框架自动生成的文件，以及编译后的特定于代码的文件，如`.o`文件。
    
*   包管理器生成的文件夹，比如npm的`node_modules`文件夹。这是一个用于保存和跟踪本地安装的每个包的依赖项的文件夹。
    
*   包含敏感数据和个人信息的文件。此类文件的一些例子是带有您的凭证(用户名和密码)的文件和带有环境变量的文件，如`.env`文件(`.env`文件包含需要保持安全和私有的API密钥)。
    
*   运行时文件，如`.log`文件。它们提供关于操作系统的使用活动和错误的信息，以及操作系统中发生的事件的历史记录。

  
**如何忽略Git中的文件和文件夹** 

如果您只想忽略一个特定的文件，则需要提供从项目根目录到该文件的完整路径。

例如，如果你想忽略根目录下的一个text.txt文件，你可以这样做:

\>/text.txt

如果您想忽略位于根目录下`test`目录中的`text.txt`文件，您可以执行以下操作:

\>/test/text.txt

上面内容也可这样写:

\>test/text.txt

如果您想要忽略所有具有特定名称的文件，则需要写入文件的字面名称。

例如，如果你想忽略任何`text.txt`文件，你可以在`.gitignore`中添加以下内容:

\>text.txt

在这种情况下，您不需要提供特定文件的完整路径。此模式将忽略位于项目中任何位置的具有该特定名称的所有文件。

要忽略一个完整的目录及其所有内容，你需要在目录名的最后加上斜杠`/`:

\>test/

该命令将忽略位于项目中任何位置的名为`test`的目录(包括该目录中的其他文件和其他子目录)。

需要注意的是，如果只写文件的名称，或者只写目录的名称而不加斜杠`/`，那么该模式将匹配具有该名称的任何文件或目录:

\# matches any files and directories with the name test
\>test

如果您想忽略以特定单词开头的任何文件或目录，该怎么办?

假设您希望忽略所有名称以img开头的文件和目录。要做到这一点，你需要指定你想要忽略的名称，后面跟着\*通配符选择器，就像这样:

\>img\*

该命令将忽略所有名称以`img`开头的文件和目录。

但是，如果您想忽略任何以特定单词结尾的文件或目录，该怎么办呢?

如果希望忽略以特定文件扩展名结尾的所有文件，则需要使用`*`通配符选择器，后面跟着要忽略的文件扩展名。

例如，如果你想忽略所有以`.md`文件扩展名结尾的markdown文件，你可以在`.gitignore`文件中添加以下内容:

\>\*.md

该模式将匹配项目中任何以`.md`扩展名结尾的文件。

前面介绍了如何忽略以特定后缀结尾的所有文件。如果您想要做一个例外，并且有一个带有该后缀的文件不想忽略，会发生什么情况呢?

假设你在`.gitignore`文件中添加了以下内容:

.md

该模式忽略所有以`.md`结尾的文件，但您不希望Git忽略`README.md`文件。

要做到这一点，您需要使用带有感叹号的否定模式，`!`，来使该文件失效,否则该文件将会被忽略:

\# ignores all .md files
.md

# does not ignore the README.md file
!README.md

对于`.gitignore`文件中的这两种模式，所有以`.md`结尾的文件都会被忽略，除了`README.md`文件。

要注意的是，如果忽略整个目录，此模式将不起作用。

假设你忽略了所有的测试目录:

    test/

假设在一个测试文件夹中，有一个文件，例如`.Md`，你不想忽视的。

你**不能**像这样对一个被忽略的目录中的文件进行否定:

\# ignore all directories with the name test
test/

# trying to negate a file inside an ignored directory won't work
!test/example.md

  
**如何忽略之前提交的文件**

最好的做法是创建一个.gitignore文件，其中包含创建新存储库时要忽略的所有文件和不同的文件模式——在提交之前。

Git只能忽略尚未提交到存储库的未跟踪文件。

如果您在过去已经提交了一个文件，但希望没有提交该怎么办?

假设您不小心提交了一个存储环境变量的`.env`文件。

你首先需要更新`.gitignore`文件以包含`.env`文件:

\# add .env file to .gitignore
echo ".env" >> .gitignore

现在，你需要告诉Git不要跟踪这个文件，把它从索引中删除(如果是文件夹需要添加`-r`选项):

git rm --cached .env

`git rm`命令和`--cached`选项一起从存储库中删除文件，但不删除实际的文件。这意味着该文件作为一个被忽略的文件保留在您的本地系统和工作目录中。

`git status`将显示该文件已不在存储库中，而输入`ls`命令将显示该文件存在于本地文件系统中。

如果希望从存储库和本地系统中删除文件，请忽略`--cached`选项。

接下来，使用`git add`命令将`.gitignore`添加到暂存区:

git add .gitignore

最后，使用`git commit`命令提交`.gitignore`文件:

git commit -m "update ignored files"

如有问题请给我留言！