---
layout: post
title: "手绘地图制作的关键点之“导航智能纠偏”"
date: "2022-09-11T09:19:28.923Z"
---
手绘地图制作的关键点之“导航智能纠偏”
===================

![手绘地图制作的关键点之“导航智能纠偏”](https://img2022.cnblogs.com/blog/435509/202209/435509-20220911154154211-1110092165.png) 可以说，没有智能纠偏，定位就无法真正的投入使用，无法产生真正的实用价值。

这里再来聊一聊关于手绘地图导航的智能纠偏问题。

其实这个问题，在《手绘​地图制作的关键点之“实时导航”》一文中，已经有过简述，这里再来细聊一下。本文纯属方案探讨，也是景运管家手绘地图智慧导览系统的导航功能的具体实现，但不作为技术标准。

作者：景运管家 ● 轻轻的烟雾（z281099678）

![](https://file.weijingtong.net/uploades/images/article/37/20220911/151023_396379.jpg_640x3200.jpg)  

**一、智能纠偏的原因**

1.设备因素

终端导航设备（一般是手机）的定位，不可能达到十分精确。即便是军用，也会有一个误差区间，而民用当然误差会更大一些。其中原因大体上可能为如下几类：

一是出于安全、保密等因素，不允许民用设备定位过于精准；

二是出于成本因素，要达到高精度的定位，不单对于终端设备（手机）的性能要求很高，对于定位卫星的要求也很高；

三是技术原因，目前的技术从根本上来说，不可能达到分米、厘米级别的精度。当然，从这个角度来说，“精度”本身也是一个模糊的概念，达到十米级、米级算是高精度吗，到底精度要达到多少才是所谓的“高精度”？这就已经不是一个技术问题了。

而换个角度来说，对于民用，过高的定位精度需求其实并无多大意义。比如最常用的导航使用场景来说，定位精度达到了几米甚至十几米，完全几乎不影响正常使用。比如导航到某个饭店、某个学校大门等，绝大部分目的地，使用者都可以在几米、十几米甚至几十米之外发现，而过于精确的定位在这时其实就几乎没有实质意义了（这里强调的过于精确，如精确到米级甚至更高）。

2.常见原因

而一些常见的因素，更会放大设备因素导致的误差，比如设备本身的性能千差万别、当地信号的强弱、天气状况、是否有高大遮挡物等情况。因此导致设备的定位，不会是一个固定的值，而是在一个区间范围内不停的变化。

因此，如果按照手机返回的经纬度来定位，则用户会非常快速的在一定范围内不停跳跃。这容易让人感觉非常不解，当然也很影响体验，严重降低实用效果。

因此，智能纠偏就显得至关重要，需要设计方案来进行处理。![](https://file.weijingtong.net/uploades/images/article/37/20220911/145829_252619.gif)

设备没有移动，但是系统返回的经纬度一直在不停的变化  

**二、智能纠偏的现象**

既然设备不能做到稳定而高精准的定位，那在导航软件的使用上，有没有什么证据可以证明也使用了智能纠偏吗？我个人认为答案是肯定的。比如说这些现象：

1.位置初始化

当打开导航软件的时候，在初始化的时候，经常能看到自己的位置会做几次跳跃。

2.导航路线切换

当使用导航模式的时候，特别是驾车时，经常会有这样的场景：本来正常路线是向右上高架，但是驾驶人走错道而直行了。这时候导航软件并不会立即发现，而是显示定位跟随着正常的路线向右上高架，一直要偏离到较远的距离时，导航软件好像才“如梦初醒”一样反应过来，重新规划切换路线。

这一点表现，特别的说明智能纠偏的现象。在最开始驾驶人走错路线的时候，导航软件会认为这是设备的定位出现了“正常的偏差”，因此智能的纠偏到了“正确的路线”上。只不过这种时刻，智能纠偏反而是真正的出错了。![](https://file.weijingtong.net/uploades/images/article/37/20220911/145918_540513.png)

**三、智能纠偏的技术方案**

智能纠偏既然是“势在必行”的方案，那具体如何实现智能纠偏呢？我认为，这是一个比较复杂的问题。需要综合考虑。大致会有这几个方面因素：

1.地图平台系统预置的路线

当用户定位初始化完成后，地图系统会判断用户当前位置最近的路线，而用户规划了导航路线之后，系统就会寻找最近的路线的点位，当用户处于导航状态而且开始移动之后， 地图就会把用户的位置自动“锁定”到系统预置的路线点位之上。![](https://file.weijingtong.net/uploades/images/article/37/20220911/145947_239492.jpg_640x3200.jpg)

2.用户的前进方向、速度、海拔、地形等因素

虽然系统把导航状态的用户位置“锁定”到了路线点位上，但是用户在路线上的位置的更新和移动，还需要结合用户的设备本身定位及当前前进速度来计算。

比如设备偶尔会出现定位误差较大的点，对于这样的异常状况，系统算法会识别出来，并做过滤及纠偏处理。不会让用户感觉到自己突然“飞”到一个很远的地方去了。而具体如何纠偏，就需要结合用户当前的各种状态：

根据用户是前进方向，判断当前的移动方位；根据用户的速度，结合用户所在的海拔、地形等因素，计算当前移动的距离，再通过用户上次的位置，就能综合计算出当前应该所在的位置，把用户的位置控制在真实而友好的位置。

当然，对于确实偏移过大的情况，也不能强行纠偏。因为这种情况，我们其实是不知道到底是用户确实已经偏离太大，还是手机定位出现的较大误差。这时可以根据实际情况提示用户已经偏移路线，或者待手机定位自动恢复正常。

**四、智能纠偏的效果**

通过智能纠偏，清洗过滤掉异常定位，增加了定位精度，加强了定位的稳定度，极大的提升了用户体验。甚至可以说，没有智能纠偏，定位就无法真正的投入使用，无法产生真正的实用价值。因此智能纠偏的效果，可以说从根本上决定和发挥了定位的真正使用价值。

下面两个对比图，可以明显的看出，定位的误差已经达到米级其实（这是一个小学的门口，注意看地上的交叉的标线）。

![](https://file.weijingtong.net/uploades/images/article/37/20220911/150002_809711.png)![](https://file.weijingtong.net/uploades/images/article/37/20220911/150013_869160.png)

手绘地图制作系列文章：

1、[景区手绘地图（电子地图、智慧导览系统）如何制作](https://zhuanlan.zhihu.com/p/545799211) ：https://zhuanlan.zhihu.com/p/545799211

2、[景区手绘地图的绘制流程](https://zhuanlan.zhihu.com/p/547783146)：https://zhuanlan.zhihu.com/p/547783146

3、[手绘地图制作的关键点之“图层覆盖”](https://zhuanlan.zhihu.com/p/550856377)： https://zhuanlan.zhihu.com/p/550856377

4、[手绘地图制作的关键点之“实时导航”](https://zhuanlan.zhihu.com/p/554833306)：https://zhuanlan.zhihu.com/p/554833306

5、[手绘地图制作实例详解：如何从0到功能丰富的智慧导览系统](https://zhuanlan.zhihu.com/p/557800271)：https://zhuanlan.zhihu.com/p/557800271