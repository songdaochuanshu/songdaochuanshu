---
layout: post
title: "VUEï¼šå¼•å…¥è…¾è®¯åœ°å›¾å¹¶å®ç°è½¨è¿¹åŠ¨ç”»"
date: "2022-09-22T15:22:55.109Z"
---
VUEï¼šå¼•å…¥è…¾è®¯åœ°å›¾å¹¶å®ç°è½¨è¿¹åŠ¨ç”»
-----------------

Posted on 2022-09-22 15:07Â  [ä¹¦ä¸­æ«å¶](https://www.cnblogs.com/zy-mg/)Â  é˜…è¯»(290)Â  è¯„è®º(3)Â  [ç¼–è¾‘](https://i.cnblogs.com/EditPosts.aspx?postid=16719382)Â  [æ”¶è—](javascript:void(0))Â  [ä¸¾æŠ¥](javascript:void(0))

![VUEï¼šå¼•å…¥è…¾è®¯åœ°å›¾å¹¶å®ç°è½¨è¿¹åŠ¨ç”»](https://img2022.cnblogs.com/blog/1924142/202209/1924142-20220922150620249-34769391.png) VUEï¼šå¼•å…¥è…¾è®¯åœ°å›¾å¹¶å®ç°è½¨è¿¹åŠ¨ç”»

[è…¾è®¯ä½ç½®æœåŠ¡JavaScript API](https://lbs.qq.com/webApi/javascriptGL/glGuide/glBasic)

#### æ•ˆæœï¼š

![](https://img2022.cnblogs.com/blog/1924142/202209/1924142-20220922150522670-729966434.gif)

#### å¼•å…¥æ­¥éª¤ï¼š

1.  åœ¨ html ä¸­é€šè¿‡å¼•å…¥ script æ ‡ç­¾åŠ è½½APIæœåŠ¡
2.  åœ¨ä¸€ä¸ªç›’å­å…ƒç´  div ä¸­é¢„å…ˆå‡†å¤‡åœ°å›¾å®¹å™¨ï¼Œå¹¶åœ¨CSSæ ·å¼ä¸­å®šä¹‰åœ°å›¾(å®¹å™¨)æ˜¾ç¤ºå¤§å°
3.  åˆ›å»ºå¹¶æ˜¾ç¤ºåœ°å›¾çš„ä»£ç 
4.  åˆ›å»ºåŠ¨ç”»å’Œæ ‡è®°

##### 1\. åœ¨ html ä¸­é€šè¿‡å¼•å…¥ script æ ‡ç­¾åŠ è½½APIæœåŠ¡

      <script src="https://map.qq.com/api/gljs?v=1.exp&key=ä½ ç”³è¯·çš„è…¾è®¯åœ°å›¾åº”ç”¨key"></script>
    

##### 2\. åœ¨bodyä¸­é¢„å…ˆå‡†å¤‡åœ°å›¾å®¹å™¨ï¼Œå¹¶åœ¨CSSæ ·å¼ä¸­å®šä¹‰åœ°å›¾(å®¹å™¨)æ˜¾ç¤ºå¤§å°

     <div id="container"></div>
    
      #container {
        width: 100%;
        height: calc(100vh - 280px);
        border-radius: 10px;
        overflow: hidden;
      }
    
    

##### 3\. åˆ›å»ºå¹¶æ˜¾ç¤ºåœ°å›¾çš„ä»£ç 

       mounted() {
          this.initMap()
        },
    
       methods: {
          initMap() {
            //è®¾ç½®åœ°å›¾ä¸­å¿ƒç‚¹
            let center = new TMap.LatLng(39.984104, 116.307503);
            // åˆå§‹åŒ–åœ°å›¾
            this.map = new TMap.Map('container', {
              zoom: 15,
              center: center,
              // baseMap: {  // è®¾ç½®å«æ˜Ÿåœ°å›¾
              //   type: 'satellite'
              // }
            });
            this.polylineLayer = new TMap.MultiPolyline({
              map:this.map, // ç»˜åˆ¶åˆ°ç›®æ ‡åœ°å›¾
              // æŠ˜çº¿æ ·å¼å®šä¹‰
              styles: {
                style_blue: new TMap.PolylineStyle({
                  color: '#ff8d00', // çº¿å¡«å……è‰²
                  width: 4, // æŠ˜çº¿å®½åº¦
                  borderWidth: 2, // è¾¹çº¿å®½åº¦
                  borderColor: '#FFF', // è¾¹çº¿é¢œè‰²
                  lineCap: 'round', // çº¿ç«¯å¤´æ–¹å¼
                  eraseColor: 'rgb(172,172,172)',//æ“¦é™¤è·¯å¾„çš„é¢œè‰²
                }),
              },
              geometries: [
                {
                  id: 'erasePath',
                  styleId: 'style_blue',
                  paths: this.path,
                },
              ],
            });
            this.marker = new TMap.MultiMarker({
              map:this.map, // ç»˜åˆ¶åˆ°ç›®æ ‡åœ°å›¾
              styles: {
                'car-down': new TMap.MarkerStyle({
                  width: 40,
                  height: 40,
                  anchor: {
                    x: 20,
                    y: 20,
                  },
                  faceTo: 'map',
                  rotate: 180,
                  src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/car.png',
                }),
                start: new TMap.MarkerStyle({
                  width: 25,
                  height: 35,
                  anchor: {x: 16, y: 32},
                  src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/start.png',
                }),
                end: new TMap.MarkerStyle({
                  width: 25,
                  height: 35,
                  anchor: {x: 16, y: 32},
                  src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/end.png',
                }),
              },
              geometries: [
                {
                  id: 'car',
                  styleId: 'car-down',
                  position: new TMap.LatLng(39.98481500648338, 116.30571126937866),
                },
                {
                  id: 'start',
                  styleId: 'start',
                  position: new TMap.LatLng(39.98481500648338, 116.30571126937866),
                },
                {
                  id: 'end',
                  styleId: 'end',
                  position: new TMap.LatLng(39.978813710266024, 116.31699800491333),
                },
              ],
            });
          }
        }
    

##### 4\. åˆ›å»ºåŠ¨ç”»å’Œæ ‡è®°

         // æš‚åœåŠ¨ç”»
         pauseMove() {
            this.marker.pauseMove()
          },
         // åœæ­¢åŠ¨ç”»
          resumeMove() {
            this.marker.resumeMove()
          },
         // å¼€å§‹åŠ¨ç”»
          startCar() {
            // ä½¿ç”¨marker ç§»åŠ¨æ¥å£ï¼Œ https://lbs.qq.com/webApi/javascriptGL/glDoc/glDocMarker
            //è°ƒç”¨moveAlongåŠ¨ç”» æ‰§è¡Œæ ‡è®°ç‚¹åŠ¨ç”»å¼€å§‹
            this.marker.moveAlong(
              {
                car: {
                  path: this.path,//ç§»åŠ¨è·¯å¾„çš„åæ ‡ä¸²
                  // duration:8000,//å®Œæˆç§»åŠ¨æ‰€éœ€çš„æ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’
                  speed: 250, //speedä¸ºæŒ‡å®šé€Ÿåº¦ï¼Œæ­£æ•´æ•°ï¼Œå•ä½ï¼šåƒç±³/å°æ—¶
                },
              },
              {
                autoRotation: true,//è‡ªåŠ¨æ—‹è½¬
              }
            );
            //ç›‘å¬äº‹ä»¶å
            this.marker.on('moving', (e) => {
              var passedLatLngs = e.car && e.car.passedLatLngs;
              if (passedLatLngs) {
                // ä½¿ç”¨è·¯çº¿æ“¦é™¤æ¥å£ eraseTo, https://lbs.qq.com/webApi/javascriptGL/glDoc/glDocVector
                this.polylineLayer.eraseTo(
                  'erasePath',
                  passedLatLngs.length - 1,
                  passedLatLngs[passedLatLngs.length - 1]
                );
              }
            });
    
          },
    

* * *

#### åœ°å›¾ç»„ä»¶å®Œæ•´ä»£ç 

    <template>
      <section>
        <el-button style="margin: 15px" size="mini" type="danger" @click="startCar">å¼€å§‹</el-button>
        <el-button style="margin: 15px" size="mini" type="danger" @click="pauseMove">æš‚åœ</el-button>
        <el-button style="margin: 15px" size="mini" type="info" @click="resumeMove">ç»§ç»­</el-button>
        <div id="container"></div>
      </section>
    </template>
    
    <script>
      export default {
        name: "mk-map",
        data() {
          return {
            map: null,
            path: [
              new TMap.LatLng(39.98481500648338, 116.30571126937866),
              new TMap.LatLng(39.982266575222155, 116.30596876144409),
              new TMap.LatLng(39.982348784165886, 116.3111400604248),
              new TMap.LatLng(39.978813710266024, 116.3111400604248),
              new TMap.LatLng(39.978813710266024, 116.31699800491333),
              new TMap.LatLng(39.988813710266024, 116.31699800491333),
              new TMap.LatLng(39.989813710266024, 116.31699800491333),
              new TMap.LatLng(39.990813710266024, 116.31699800491333),
              new TMap.LatLng(39.98481500648338, 116.30571126937866),
            ],
            polylineLayer: null,
            marker: null
          }
        },
        mounted() {
          this.initMap()
        },
        methods: {
          pauseMove() {
            this.marker.pauseMove()
          },
          resumeMove() {
            this.marker.resumeMove()
          },
          startCar() {
            // ä½¿ç”¨marker ç§»åŠ¨æ¥å£ï¼Œ https://lbs.qq.com/webApi/javascriptGL/glDoc/glDocMarker
            //è°ƒç”¨moveAlongåŠ¨ç”» æ‰§è¡Œæ ‡è®°ç‚¹åŠ¨ç”»å¼€å§‹
            this.marker.moveAlong(
              {
                car: {
                  path: this.path,//ç§»åŠ¨è·¯å¾„çš„åæ ‡ä¸²
                  // duration:8000,//å®Œæˆç§»åŠ¨æ‰€éœ€çš„æ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’
                  speed: 250, //speedä¸ºæŒ‡å®šé€Ÿåº¦ï¼Œæ­£æ•´æ•°ï¼Œå•ä½ï¼šåƒç±³/å°æ—¶
                },
              },
              {
                autoRotation: true,//è‡ªåŠ¨æ—‹è½¬
              }
            );
            //ç›‘å¬äº‹ä»¶å
            this.marker.on('moving', (e) => {
              var passedLatLngs = e.car && e.car.passedLatLngs;
              if (passedLatLngs) {
                // ä½¿ç”¨è·¯çº¿æ“¦é™¤æ¥å£ eraseTo, https://lbs.qq.com/webApi/javascriptGL/glDoc/glDocVector
                this.polylineLayer.eraseTo(
                  'erasePath',
                  passedLatLngs.length - 1,
                  passedLatLngs[passedLatLngs.length - 1]
                );
              }
            });
    
          },
          initMap() {
            //è®¾ç½®åœ°å›¾ä¸­å¿ƒç‚¹
            let center = new TMap.LatLng(39.984104, 116.307503);
            // åˆå§‹åŒ–åœ°å›¾
            this.map = new TMap.Map('container', {
              zoom: 15,
              center: center,
              // baseMap: {  // è®¾ç½®å«æ˜Ÿåœ°å›¾
              //   type: 'satellite'
              // }
            });
            this.polylineLayer = new TMap.MultiPolyline({
              map:this.map, // ç»˜åˆ¶åˆ°ç›®æ ‡åœ°å›¾
              // æŠ˜çº¿æ ·å¼å®šä¹‰
              styles: {
                style_blue: new TMap.PolylineStyle({
                  color: '#ff8d00', // çº¿å¡«å……è‰²
                  width: 4, // æŠ˜çº¿å®½åº¦
                  borderWidth: 2, // è¾¹çº¿å®½åº¦
                  borderColor: '#FFF', // è¾¹çº¿é¢œè‰²
                  lineCap: 'round', // çº¿ç«¯å¤´æ–¹å¼
                  eraseColor: 'rgb(172,172,172)',//æ“¦é™¤è·¯å¾„çš„é¢œè‰²
                }),
              },
              geometries: [
                {
                  id: 'erasePath',
                  styleId: 'style_blue',
                  paths: this.path,
                },
              ],
            });
            this.marker = new TMap.MultiMarker({
              map:this.map, // ç»˜åˆ¶åˆ°ç›®æ ‡åœ°å›¾
              styles: {
                'car-down': new TMap.MarkerStyle({
                  width: 40,
                  height: 40,
                  anchor: {
                    x: 20,
                    y: 20,
                  },
                  faceTo: 'map',
                  rotate: 180,
                  src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/car.png',
                }),
                start: new TMap.MarkerStyle({
                  width: 25,
                  height: 35,
                  anchor: {x: 16, y: 32},
                  src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/start.png',
                }),
                end: new TMap.MarkerStyle({
                  width: 25,
                  height: 35,
                  anchor: {x: 16, y: 32},
                  src: 'https://mapapi.qq.com/web/lbs/javascriptGL/demo/img/end.png',
                }),
              },
              geometries: [
                {
                  id: 'car',
                  styleId: 'car-down',
                  position: new TMap.LatLng(39.98481500648338, 116.30571126937866),
                },
                {
                  id: 'start',
                  styleId: 'start',
                  position: new TMap.LatLng(39.98481500648338, 116.30571126937866),
                },
                {
                  id: 'end',
                  styleId: 'end',
                  position: new TMap.LatLng(39.978813710266024, 116.31699800491333),
                },
              ],
            });
          }
        }
      }
    </script>
    
    <style lang="scss" scoped>
      #container {
        width: 100%;
        height: calc(100vh - 280px);
        border-radius: 10px;
        overflow: hidden;
      }
    </style>
    
    

ç”Ÿæ´»çš„ä¸€åˆ‡ä¸å¦‚æ„ï¼Œéƒ½ä¼šéšæ—¶é—´æ¶ˆå¤±æ®†å°½ï¼Œæ‰¬èµ·å¾®ç¬‘ï¼Œæ¡ç´§æ‹³å¤´ä¸ºè‡ªå·±åŠ æ²¹ï¼ï¼ğŸ