---
layout: post
title: "Azure DevOps Server ç”¨æˆ·ç»„åŠ å…¥ Azure AD Domain Service ç®¡ç†ç”¨æˆ·"
date: "2022-11-26T03:23:47.071Z"
---
Azure DevOps Server ç”¨æˆ·ç»„åŠ å…¥ Azure AD Domain Service ç®¡ç†ç”¨æˆ·
======================================================

ä¸€ï¼Œå¼•è¨€
----

ã€€ã€€ä»Šå¤©æˆ‘ä»¬ç»§ç»­è®²è§£ Azure DevOps Server çš„å†…å®¹ï¼Œå¯¹äºç®¡ç†ç”¨æˆ·ç»„é™¤äº†åœ¨ Azure DevOps Server æœåŠ¡å™¨ä¸Šæ·»åŠ ç®¡ç†å‘˜æ–¹å¼å¤–ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–æ–¹å¼ï¼ŒAzure DevOps éœ€è¦åŠ å…¥Azure ADDS æœåŠ¡åŸŸåï¼ŒAzure DevOps Server çš„ç®¡ç†å‘˜ç»„æ˜¯å¦‚ä½•æ§åˆ¶çš„ï¼Œå¸¦ç€è¿™äº›ç–‘é—®ï¼Œè®©æˆ‘ä»¬å¼€å§‹ä»Šå¤©çš„åˆ†äº«è¯¾ç¨‹å§ï¼

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221126110101475-1506519818.png)

\-------------------- æˆ‘æ˜¯åˆ†å‰²çº¿ --------------------

### [**1ï¼ŒAzure DevOps Server å…¥é—¨å®è·µä¸å®‰è£…éƒ¨ç½²**](https://www.cnblogs.com/AllenMaster/p/16842466.html)

### [2ï¼ŒAzure DevOps Server è®¾ç½®é¡¹ç›®ç®¡ç†ç”¨æˆ·ï¼Œç”¨æˆ·ç»„](https://www.cnblogs.com/AllenMaster/p/16876760.html)

### [3ï¼ŒAzure DevOps Server ç”¨æˆ·ç»„åŠ å…¥ Azure AD Domain Service ç®¡ç†ç”¨æˆ·](https://www.cnblogs.com/AllenMaster/p/16917620.html)

äºŒï¼Œæ­£æ–‡
----

1ï¼Œé…ç½® Azure AD Domain Service

ç™»å½•åˆ° Azure Portalï¼Œæœç´¢ â€œAzure AD Doamin Servicesâ€ï¼Œå¹¶ç‚¹å‡» â€œCreateâ€

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123111552919-576053234.png)

è¾“å…¥ä»¥ä¸‹å‚æ•°ï¼š

Resource groupï¼šâ€œWeb\_Test\_AD\_DomainService\_RGâ€

DNS domain nameï¼šâ€œcloudapp-devops.comâ€ï¼ˆ**DNS é»˜è®¤åŸŸåï¼šé»˜è®¤å†…ç½®ç›®å½•.onmicrosoft.com**Â ï¼‰

Regionï¼šâ€œEast Asiaâ€

SKUï¼šâ€œStandardâ€

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125214800191-308359263.png)

ç‚¹å‡» â€œNextâ€ è®¾ç½® NetWorking

Virtual network é€‰æ‹©åˆ›å»ºæ–°çš„ï¼šâ€œaadds-vnetâ€

Subnet é€‰æ‹©åˆ›å»ºæ–°çš„ï¼šâ€œaadds-subnetï¼ˆ10.1.0.0.24ï¼‰â€

ç‚¹å‡» â€œReview + createâ€ è¿›è¡Œåˆ›å»ºé¢„æ ¡éªŒ

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123114106963-1363270096.png)

æ ¡éªŒé€šè¿‡åï¼Œç‚¹å‡» â€œCreateâ€ è¿›è¡Œåˆ›å»º

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125235456113-82079870.png)

ç­‰å¾…åˆ›å»ºå®Œæˆåï¼Œç‚¹å‡» â€œGo to resourceâ€ è·³è½¬åˆ°è¯¥èµ„æº

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123151256682-1766690722.png)

### 2ï¼Œè®¾ç½® AAD DC ç®¡ç†å‘˜

é€‰æ‹© â€œSetting =ã€‹Synchroniaztionâ€ ï¼Œå¼€å¯ â€œSynchroniaztion scopeâ€ é…ç½®ï¼Œç‚¹å‡» â€œ+ Add groupsâ€ ï¼Œé€‰æ‹© â€œAADâ€

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123231352840-734528965.png)

ä¸º AAD DC Administrator ç»„æ·»åŠ æˆå‘˜ï¼Œé€‰æ‹© â€œAzure Active Directoryâ€

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123162212370-1011345420.png)

é€‰æ‹© â€œAll groupâ€ï¼Œç‚¹å‡» â€œAAD DC Administratorâ€Â  è¿›å…¥ Group å†…éƒ¨

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123163137262-2027587998.png)

æ·»åŠ ç»„æˆå‘˜ â€œwangwuâ€

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125233912597-1242560492.png)

### 3ï¼Œåˆ›å»º VNET Peering å»ºç«‹è™šæ‹Ÿç½‘ç»œä¹‹é—´çš„è¿æ¥

é€‰æ‹© Azure DevOps Server è™šæ‹Ÿæœºçš„ VNETï¼Œé€‰æ‹© â€œSetting =ã€‹Peeringsâ€ï¼Œç‚¹å‡» â€œ+ Addâ€ æ·»åŠ è™šæ‹Ÿç½‘ç»œå¯¹ç­‰äº’è¿

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123185120504-185426194.png)

è¾“å…¥ä»¥ä¸‹å‚æ•°ï¼š

This virtual network

ã€€ã€€Peering link nameï¼šâ€œDevOps\_ToLink\_DomainServiceâ€

Remote virtual network

ã€€ã€€peering link nameï¼šâ€œDomainService\_ToLink\_DevOpsâ€

Virtual networkï¼šâ€œaadds-vnetâ€

ç‚¹å‡» â€œAddâ€Â 

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123194513665-1424326308.png)

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123194550867-1686853157.png)

åˆ›å»ºå®Œæ¯•åï¼Œå¯ä»¥çœ‹åˆ°åˆ›å»ºå¥½çš„ Peerings è®°å½•

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221123200332062-1231712486.png)

### 3ï¼ŒAzure DevOps Server åŠ å…¥ "devops.com" çš„æœåŠ¡åŸŸ

ç™»å½•åˆ° Aazure DevOps Server çš„è™šæ‹Ÿæœºä¸­ï¼Œæ‰“å¼€ç³»ç»Ÿè®¾ç½®ï¼ŒåŠ å…¥ â€œcloudapp-devops.comâ€ åŸŸï¼Œç‚¹å‡» â€œOKâ€ è¿›è¡ŒéªŒè¯ã€‚

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125234542960-1542909124.png)

ä½¿ç”¨ â€œwangwuâ€ è´¦å·ç™»å½•æˆåŠŸåï¼Œéœ€è¦é‡å¯ç”µè„‘ã€‚

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221126000447129-835456865.png)

åŠ å…¥æˆåŠŸæ˜¾ç¤ºåŸŸåœ°å€ â€œcloudapp-devops.comâ€

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125200127807-1346872056.png)

### 4ï¼ŒAD DS ç®¡ç†ç»„ç”¨æˆ·å¹¶å…¥Azure DevOps Server ç®¡ç†ç»„

æ‰“å¼€ Azure DevOps Server ç®¡ç†æ§åˆ¶å°ï¼Œç‚¹å‡» â€œAddâ€ æ·»åŠ ç®¡ç†å‘˜è´¦å·

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125210526329-542680012.png)

ç‚¹å‡» â€œSearchâ€ è¿›è¡Œæœç´¢

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125210833714-1637114964.png)

åœ¨ Select User é¡µé¢ç‚¹å‡» â€œAdvancedâ€ã€‚

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125210911420-1623376430.png)

**è¿™ä¸ªæ—¶å€™è¦æ³¨æ„äº†ï¼Œå› ä¸ºå½“å‰æœåŠ¡å™¨å·²åŠ å…¥äº† Azure ADS äº†ï¼Œéœ€è¦æ ¡éªŒåŸŸè´¦å·ã€‚**

æˆ‘ä»¬ä½¿ç”¨ â€œwangwuâ€ è¿™ä¸ªè´¦å·è¿›è¡Œæ ¡éªŒæ“ä½œ

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125211512300-1918615754.png)

æ‰¾åˆ° â€œwangwuâ€ ç‚¹å‡» â€œOKâ€

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125211716231-1694357449.png)

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125211646040-1866922650.png)

æ·»åŠ å®Œæˆåï¼Œç®¡ç†å‘˜åˆ—è¡¨ä¸­å°±å¯ä»¥çœ‹åˆ° â€œwangwuâ€è¿™ä¸ªç”¨æˆ·äº†

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125211853186-164782270.png)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°æµè§ˆå™¨ç›´æ¥è®¿é—® Azure DevOps Server çš„åœ°å€ï¼Œä½¿ç”¨æ–°åŠ çš„åŸŸè´¦å·è¿›è¡Œç™»åœºæ“ä½œ

![](https://img2022.cnblogs.com/blog/1996262/202211/1996262-20221125213240168-475830887.png)

Bingoï¼ŒæˆåŠŸï¼ï¼ï¼ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘

ä¸‰ï¼Œç»“å°¾
----

ã€€ä»Šå¤©æˆ‘ä»¬ç»“åˆä¹‹å‰è®²è¿‡çš„VM åŠ å…¥Azure ADDS æœåŠ¡åŸŸå’Œä¸åŒè™šæ‹Ÿç½‘ç»œåˆ©ç”¨ â€œVNET Peeringâ€ è¿›è¡Œç½‘ç»œäº’è”ä¸¤å—å†…å®¹å®ç°äº†Â Azure AD Domain Service ç®¡ç†ç»„ç”¨æˆ·é€šè¿‡åŸŸæ§çš„æ–¹å¼å¹¶å…¥Â Azure DevOps Server ç®¡ç†ç”¨æˆ·ç»„ã€‚å­¦ä»¥è‡´ç”¨ï¼Œå¤§å®¶å¤šå¤šè¿ç»­ï¼Œè®²ä¹‹å‰å­¦åˆ°çš„å†…å®¹èæ±‡è´¯é€šã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†ç»§ç»­ä»‹ç» Azure DevOps Server çš„ç›¸å…³å†…å®¹ï¼ŒåŠ å…¥Azure ADDSåŸŸä¸­é‡åˆ°çš„é—®é¢˜ã€‚

æœ¬æ–‡æ‰€åˆ†äº«çš„å†…å®¹ä¹Ÿå­˜åœ¨ç€å¾ˆå¤šæˆ‘è‡ªå·±çš„ä¸€äº›ç†è§£ï¼Œæœ‰ç†è§£ä¸åˆ°ä½çš„ï¼Œæœ›åŒ…å«ï¼Œå¹¶ä¸”æŒ‡å‡ºä¸è¶³ä¹‹å¤„ï¼ï¼ï¼ï¼ï¼

å‚è€ƒé“¾æ¥ï¼š[åˆ›å»ºæœåŠ¡æ‰˜ç®¡åŸŸ](https://learn.microsoft.com/en-us/azure/active-directory-domain-services/tutorial-create-instance?WT.mc_id=AZ-MVP-5004191)ï¼Œ[å°†VMåŠ å…¥æœåŠ¡æ‰˜ç®¡åŸŸ](https://learn.microsoft.com/en-us/azure/active-directory-domain-services/join-windows-vm?WT.mc_id=AZ-MVP-5004191)ï¼ŒAzure Virtual Netwok å¯¹ç­‰äº’è¿ç½‘ç»œ

ä½œè€…ï¼š[Allen](https://www.cnblogs.com/AllenMaster)Â 

ç‰ˆæƒï¼šè½¬è½½è¯·åœ¨æ–‡ç« æ˜æ˜¾ä½ç½®æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚å¦‚å‘ç°é”™è¯¯ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ã€‚

ä½œè€…ï¼šAllen ç‰ˆæƒï¼šè½¬è½½è¯·åœ¨æ–‡ç« æ˜æ˜¾ä½ç½®æ³¨æ˜ä½œè€…åŠå‡ºå¤„ã€‚å¦‚å‘ç°é”™è¯¯ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ã€‚