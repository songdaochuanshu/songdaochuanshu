---
layout: post
title: "ã€D01ã€‘Djangoä¸­å®ç°å¸¦è¿›åº¦æ¡çš„å€’è®¡æ—¶åŠŸèƒ½ï¼ˆç®€æ˜“ç‰ˆï¼‰"
date: "2023-04-13T01:03:48.026Z"
---
ã€D01ã€‘Djangoä¸­å®ç°å¸¦è¿›åº¦æ¡çš„å€’è®¡æ—¶åŠŸèƒ½ï¼ˆç®€æ˜“ç‰ˆï¼‰
=============================

é¦–å…ˆè¯´æ˜ç®€æ˜“ç‰ˆæ˜¯åªæœ‰ä¸€ä¸ª **å€’è®¡æ—¶** å’Œä¸€ä¸ª **è¿›åº¦æ¡**ï¼Œé¡µé¢åŠ è½½åè‡ªåŠ¨å¼€å§‹è®¡æ—¶ï¼Œä¸‹æ¬¡è®¡æ—¶éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢ã€‚

åç»­ä¼šæ›´æ–°å®ç°å®Œæ•´çš„å€’è®¡æ—¶åŠŸèƒ½çš„æ–‡ç« 

å‰æœŸå‡†å¤‡
====

1.  å‰ç«¯æ¡†æ¶
    
    ä½ éœ€è¦å‡†å¤‡ä¸€äº›å‰ç«¯æ¡†æ¶ï¼š**Bootstrap4** å’Œ **jQuery**  
    å®‰è£…æ–¹æ³•è¯·è‡ªè¡ŒæŸ¥é˜…å®˜æ–¹æ–‡æ¡£æˆ–æ•™ç¨‹
    
    *   Bootstrap4ï¼š[https://v4.bootcss.com/docs/getting-started/download/](https://v4.bootcss.com/docs/getting-started/download/)
        
    *   jQueryï¼š[https://www.runoob.com/jquery/jquery-install.html](https://www.runoob.com/jquery/jquery-install.html)
        
2.  ä¿è¯ä½ çš„Djangoé¡¹ç›®å·²ç»é…ç½®å®Œæ¯•ï¼ŒåŒ…æ‹¬è·¯ç”±
    

å€’è®¡æ—¶éƒ¨åˆ†
=====

å…ˆä¸Šæ•ˆæœå›¾

![](https://img2023.cnblogs.com/blog/2765564/202304/2765564-20230412195744585-2097329853.gif)

ï¼ˆemm...ä¸å¥½æ„æ€æœ‰ç‚¹ä¸‘...è‡³äºè¿™ä¸ªè¿›åº¦æ¡ä¸ºä»€ä¹ˆä¼šè·³ï¼Œæ˜¯å› ä¸ºæˆ‘å½“æ—¶å¿˜è®°æŠŠå¦ä¸€ä¸ªæ–¹æ³•æ³¨é‡Šæ‰ï¼Œå¯¼è‡´ä¸¤ä¸ªè®¡æ—¶æ–¹æ³•åŒæ—¶è¿›è¡Œï¼Œåé¢çš„ä»£ç ä¸ä¼šå‡ºç°è¿™ä¸ªé”™è¯¯ï¼‰

> ä»¥ä¸‹ä»£ç ç”±ChatGPTç”Ÿæˆ

ChatGPTç¬¬ä¸€æ¬¡ç»™çš„ä»£ç æ˜¯åœ¨è§†å›¾å‡½æ•°é‡Œå¤„ç†æ—¶é—´ï¼Œæ¯ç§’è¿”å›ä¸€æ¬¡è¯·æ±‚ç»™æµè§ˆå™¨å˜æ›´æ•°å­—ã€‚è¿™å¯¼è‡´äº†æµè§ˆå™¨ååº”ä¸è¿‡æ¥ï¼Œæ— æ³•æ¯ç§’éƒ½æ¥å—è¯·æ±‚å¹¶å“åº”ï¼Œå› æ­¤å®ç°å€’è®¡æ—¶åŠ¨æ€æ›´æ–°éœ€è¦åœ¨JavaScriptå®ç°

**views.pyï¼š**

    import time
    from django.shortcuts import render
    
    def countdown(request):
        start_time = int(time.time())
        end_time = start_time + 1500  # 25 minutes in seconds
        while int(time.time()) < end_time:
            time_left = end_time - int(time.time())
            minutes = time_left // 60
            seconds = time_left % 60
            context = {'minutes': minutes, 'seconds': seconds}
            time.sleep(1)
        context = {'minutes': 0, 'seconds': 0}
        return render(request, 'countdown.html', context)
    

çº æ­£åç»™çš„ä»£ç ï¼š

å®Œæ•´ä»£ç 
----

**views.pyï¼š**

    from django.shortcuts import render
    import datetime
    
    def countdown(request):
        now = datetime.datetime.now()
        # è®¾ç½®å€’è®¡æ—¶ç»“æŸæ—¶é—´ï¼ˆ25åˆ†é’Ÿï¼‰
        end_time = now + datetime.timedelta(minutes=25)
        context = {'end_time': end_time}
        return render(request, 'countdown.html', context)
    

**countdown.htmlï¼š**

JavaScriptä½¿ç”¨jQuery

    <!DOCTYPE html>
    <html>
      <head>
        <title>Pomodoro Timer</title>
        <meta charset="utf-8">
        <script type="text/javascript">
          function updateTimer() {
      		var now = new Date();
          	var endTime = new Date('{{ end_time|date:"c" }}');
          	var diff = endTime - now;
          	var minutes = Math.floor(diff / 60000);
          	var seconds = Math.floor((diff % 60000) / 1000);
    
          	$('#minutes').text(('0' + minutes).slice(-2));
          	$('#seconds').text(('0' + seconds).slice(-2));
    
          	if (diff > 0) {
            	setTimeout(updateTimer, 1000);
      		}
          }
    
    	$(document).ready(function() {
      		updateTimer();
    	});
    
        </script>
      </head>
      <body>
        <h1>Pomodoro Timer</h1>
        <p>Time remaining: <span id="minutes">25</span>:<span id="seconds">00</span></p>
      </body>
    </html>
    

é…ç½®å¥½å°±å¯ä»¥çœ‹åˆ°æ•°å­—æ—¶é’Ÿåœ¨è®¡æ—¶äº†ã€‚

åµŒå…¥å¼å€’è®¡æ—¶å™¨
-------

å¦å¤–ï¼ŒChatGPTæä¾›äº†åµŒå…¥å¼å€’è®¡æ—¶å™¨ç»„ä»¶æ–¹æ³•

åœ¨ä»»ä½•æ¨¡æ¿ä¸­éƒ½å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥åŠ è½½ä½ å†™çš„å€’è®¡æ—¶å™¨ï¼š

**HTMLï¼š**

    {% url 'countdown' as countdown_url %}
    <iframe src="{{ countdown_url }}" width="400" height="200"></iframe>
    

è¿™å°†åœ¨æ¨¡æ¿ä¸­åµŒå…¥ä¸€ä¸ªiframeå…ƒç´ ï¼Œå¹¶ä½¿ç”¨countdownè§†å›¾å‡½æ•°çš„URLä½œä¸ºå…¶æºã€‚å½“ç”¨æˆ·åŠ è½½é¡µé¢æ—¶ï¼Œiframeå°†æ˜¾ç¤ºå€’è®¡æ—¶å™¨ï¼Œå¹¶å¼€å§‹å€’è®¡æ—¶ã€‚

è¿›åº¦æ¡éƒ¨åˆ†
=====

**HTMLï¼š**

ChatGPTåœ¨htmlä¸­é‡å†™äº†CSSä»¥åŠæ·»åŠ äº†JSéƒ¨åˆ†ä»£ç ï¼Œæ•ˆæœååˆ†æŠ½è±¡ğŸ™‚è¿™å¾ˆéš¾è¯„

![](https://img2023.cnblogs.com/blog/2765564/202304/2765564-20230412195816639-896374384.png)

åŸæœ¬æƒ³å®ç°ä¸€ä¸ªç¯å½¢è¿›åº¦æ¡çš„å€’è®¡æ—¶ç»„ä»¶ï¼Œå› ä¸ºæ¶‰åŠå¤æ‚çš„CSSæ ·å¼ç¼–å†™ï¼Œæ‰€ä»¥åœ¨æ‰¾åˆ°åˆé€‚çš„æ’ä»¶ä¹‹å‰å…ˆç”¨Bootstrapåˆå§‹çš„è¿›åº¦æ¡æ ·å¼

ChatGPTç»™çš„ä»£ç åªæœ‰è¿™éƒ¨åˆ†æœ‰ç”¨ï¼Œè¡¨ç¤ºè¿›åº¦æ¡çš„å³æ—¶æ›´æ–°

**htmlï¼š**

    <div class="progress">
    	<div class="progress-bar" role="progressbar"></div>
    </div>
    

**JavaScriptï¼š**

    var progress = 100 - ((timeRemaining / 60) * 100) / 60;
    $(".progress-bar").css("width", progress + "%");
    

ç¨ä½œä¿®æ”¹ï¼Œå°†è¿›åº¦æ¡JSä»£ç æ•´åˆåˆ°è®¡æ—¶æ–¹æ³•é‡Œï¼š

**JavaScriptï¼š**

      function updateTimer() {
        // è·å–å½“å‰æ—¶é—´å’Œå€’è®¡æ—¶ç»“æŸæ—¶é—´
        var now = new Date();
        var startTime = new Date('{{ start_time|date:"c" }}');
        var endTime = new Date('{{ end_time|date:"c" }}');
        // è®¡ç®—æ—¶é—´å·®
        var interval = endTime - startTime;
        var diff = endTime - now;
    
        // å°†æ—¶é—´å·®è½¬æ¢ä¸ºåˆ†é’Ÿå’Œç§’æ•°
        // ä¸€åˆ†é’Ÿç­‰äº60000æ¯«ç§’ï¼ŒMath.floorå‡½æ•°å‘ä¸‹å–æ•´
        var minutes = Math.floor(diff / 60000);
        var seconds = Math.floor((diff % 60000) / 1000);
        // æ›´æ–°é¡µé¢ä¸­çš„æ—¶é—´æ˜¾ç¤º
        $('#minutes').text(('0' + minutes).slice(-2));
        $('#seconds').text(('0' + seconds).slice(-2));
    
        var progress = diff/interval*100;
        $(".progress-bar").css("width", progress + "%");
    
        // åœ¨å€’è®¡æ—¶ç»“æŸä¹‹å‰ï¼Œæ¯100æ¯«ç§’æ›´æ–°ä¸€æ¬¡æ—¶é—´
        if (diff > 0) {
          setTimeout(updateTimer, 100);
        }
      }
    
      $(function () {
        // å¼€å§‹å†™ jQuery ä»£ç ...
        // é¡µé¢åŠ è½½å®Œæˆåå¼€å§‹å€’è®¡æ—¶
        updateTimer();
      });
    

views.pyé‡Œä¹Ÿè¦ä¿®æ”¹countdownå‡½æ•°

**views.pyï¼š**

    def countdown(request):
    	# è®¾ç½®å€’è®¡æ—¶ç»“æŸæ—¶é—´ï¼ˆ25åˆ†é’Ÿï¼‰
    	start_time = datetime.datetime.now()
    	end_time = start_time + datetime.timedelta(minutes=0.2)
    	context = {
    		'start_time': start_time,
    		'end_time': end_time
    	}
    	return render(request, 'countdown.html', context)
    

ç¯å½¢è¿›åº¦æ¡æ’ä»¶
-------

[circle-progress-bar.js](https://link.zhihu.com/?target=https%3A//github.com/sqfbeijing/circle-progress-bar) æ˜¯ä¸€æ¬¾åˆ©ç”¨canvasç»˜åˆ¶åœ†ç¯è¿›åº¦æ¡çš„æ’ä»¶ï¼Œä¸ä¾èµ–ä»»ä½•åº“ã€‚

æ•ˆæœï¼šæ”¾å¤§å¤±çœŸã€ä¸‘

![](https://img2023.cnblogs.com/blog/2765564/202304/2765564-20230412200418096-990885325.png)

Bootstrapå®˜ç½‘ç²¾é€‰æ¨¡æ¿ä¸­çš„ä¸€äº›æ¨¡æ¿æœ‰ç¯å½¢è¿›åº¦æ¡ï¼Œå¯ä»¥å¯¼å…¥æ¨¡æ¿åç›´æ¥ä½¿ç”¨ã€‚