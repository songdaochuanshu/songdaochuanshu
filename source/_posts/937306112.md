---
layout: post
title: "C#å¤æ‚XMLååºåˆ—åŒ–ä¸ºå®ä½“å¯¹è±¡ä¸¤ç§æ–¹å¼"
date: "2022-04-01T20:19:07.027Z"
---
C#å¤æ‚XMLååºåˆ—åŒ–ä¸ºå®ä½“å¯¹è±¡ä¸¤ç§æ–¹å¼
====================

å‰è¨€
--

ã€€ã€€ä»Šå¤©ä¸»è¦è®²çš„æ˜¯å¦‚ä½•æŠŠé€šè¿‡æ¥å£è·å–åˆ°çš„Xmlæ•°æ®è½¬æ¢æˆï¼ˆååºåˆ—åŒ–ï¼‰æˆ‘ä»¬æƒ³è¦çš„å®ä½“å¯¹è±¡ï¼Œå½“ç„¶Xmlååºåˆ—åŒ–å’ŒJsonååºåˆ—åŒ–çš„æ–¹å¼åŸºæœ¬ä¸Šéƒ½æ˜¯å¤§åŒå°å¼‚ã€‚éƒ½æ˜¯æˆ‘ä»¬äº‹å…ˆå®šä¹‰å¥½å¯¹åº”çš„å¯¹åº”çš„Xmlå®ä½“æ¨¡å‹ï¼Œä¸è¿‡Xmlæ˜¯é€šè¿‡XmlSerializerç±»çš„ç›¸å…³ç‰¹æ€§æ¥å¯¹å®ä½“å¯¹è±¡å’Œ XMLæ–‡æ¡£ä¹‹é—´è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œçš„ã€‚åºåˆ—åŒ–å’Œååºåˆ—åŒ–å…¶å®éƒ½è¿˜å¥½ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨å°è£…å¥½çš„XmlHelperå¸®åŠ©ç±»å³å¯å®ç°ï¼Œæœ€å…³é”®çš„æ˜¯æˆ‘ä»¬è¯¥å¦‚ä½•å»å®šä¹‰è¿™äº›å®ä½“æ¨¡å‹ï¼ˆModelï¼‰ã€‚å½“ä½ é‡åˆ°å¯¹æ–¹æ¥å£ä¸€ä¸‹å­è¿”å›ä¸€å¤§ä¸²çš„Xmlæ•°æ®å¹¶ä¸”é‡Œé¢å­˜åœ¨å¾ˆå¤šä¸åŒçš„XmlèŠ‚ç‚¹ï¼Œä½ è¯¥æ€ä¹ˆåŠä¸€ä¸ªä¸€ä¸ªå»è§£æè¿™äº›èŠ‚ç‚¹åˆ°æ¨¡å‹ä¸Šå»å—ï¼Ÿæœ¬æ–‡æˆ‘ä¸»è¦è®²ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡æ‰‹å†™çš„æ–¹å¼å»å®šä¹‰Xmlçš„å®ä½“å¯¹è±¡æ¨¡å‹ç±»ï¼Œç¬¬äºŒç§æ–¹æ³•æ˜¯é€šè¿‡Visual Studioè‡ªå¸¦çš„ç”ŸæˆXmlå®ä½“å¯¹è±¡æ¨¡å‹ç±»ã€‚

éœ€è¦æ“ä½œçš„Xmlæ•°æ®
----------

> æ³¨æ„ï¼šä»¥ä¸‹æ˜¯æˆ‘ç¨å¾®ç®€åŒ–çš„Xmlæ•°æ®ï¼Œå®é™…æ•°æ®å¯èƒ½æ¯”è¿™é‡Œè¦å¤æ‚ä¸ªå¤§å‡ å€ã€‚

<?xml version="1.0" encoding="utf-8" ?>
<envelope\>
    <header\>
        <version port\="1111" host\="www.baidu.com"\>successfuly</version\>
        <timestamp\>20211216081218</timestamp\>
    </header\>
    <response type\="cities" product\="hotel"\>
        <cities\>
            <city\>
                <code value\="zg" />
                <city\_tax value\="true" />
                <names\>
                    <name language\="fr" value\="ABANO TERME - PADOUE" />
                    <name language\="en" value\="ABANO TERME - PADUE" />
                    <name language\="nl" value\="ABANO TERME - PADUE" />
                </names\>
            </city\>
            <city\>
                <code value\="hk" />
                <city\_tax value\="false" />
                <names\>
                    <name language\="fr" value\="ABBADIA SAN SALVATORE - SIENNE" />
                    <name language\="en" value\="ABBADIA SAN SALVATORE - SIENA" />
                    <name language\="nl" value\="ABBADIA SAN SALVATORE - SIENA" />
                </names\>
            </city\>
        </cities\>
    </response\>
</envelope\>

ä¸€ã€é€šè¿‡æ˜¯æ‰‹å†™çš„æ–¹å¼å»å®šä¹‰Xmlçš„å®ä½“å¯¹è±¡æ¨¡å‹ç±»
------------------------

> å½“ç„¶å‡å¦‚ä½ æœ‰è€å¿ƒã€æ—¶é—´å……è¶³å¹¶ä¸”çœ¼ç›å¥½çš„è¯å¯ä»¥ä½¿ç”¨è¿™ç§æ‰‹å†™çš„æ–¹å¼å»å®šä¹‰ï¼Œå¾ˆå¤šæƒ…å†µå†™åˆ°æœ€å¥½éƒ½ä¼šæŠŠè‡ªå·±ç»™å†™ç³Šæ¶‚äº†ï¼ˆå¯èƒ½æ˜¯æˆ‘å¹´çºªå¤§äº†çš„åŸå› ï¼‰ã€‚

namespace Practices.Models
{
    /// <summary>
    /// Envelope
    /// </summary>
    \[XmlType(TypeName = "envelope")\]
    public class CityDataModel
    {
        /// <summary>
        /// header
        /// </summary>
        \[XmlElement("header")\]
        public Header header { get; set; }

        /// <summary>
        /// response
        /// </summary>
        \[XmlElement("response")\]
        public Response response { get; set; }

    }

    /// <summary>
    /// Header
    /// </summary>
    \[XmlType(TypeName = "header")\]
    public class Header
    {
        /// <summary>
        /// version
        /// </summary>
        \[XmlElement("version")\]
        public Version version { get; set; }

        /// <summary>
        /// timestamp
        /// </summary>
        \[XmlElement("timestamp")\]
        public string timestamp { get; set; }
    }

    /// <summary>
    /// Version
    /// </summary>
    public class Version
    {
        /// <summary>
        /// port
        /// </summary>
        \[XmlAttribute("port")\]
        public string port { get; set; }

        /// <summary>
        /// host
        /// </summary>
        \[XmlAttribute("host")\]
        public string host { get; set; }

        /// <summary>
        /// valueï¼šXmlTextAttributeæŒ‡ç¤ºè¯¥å±æ€§ä½œä¸ºXMLæ–‡æœ¬å¤„ç†
        /// </summary>
        \[XmlTextAttribute()\]
        public string value { get; set; }

    }

    /// <summary>
    /// Response
    /// </summary>
    \[XmlType(TypeName = "response")\]
    public class Response
    {
        /// <summary>
        /// type
        /// </summary>
        \[XmlAttribute\]
        public string type { get; set; }

        /// <summary>
        /// product
        /// </summary>
        \[XmlAttribute\]
        public string product { get; set; }

        /// <summary>
        /// cities
        /// </summary>
        \[XmlArray("cities")\]
        public List<City> cities { get; set; }

    }

    /// <summary>
    /// class: City
    /// </summary>
    \[XmlType(TypeName = "city")\]
    public class City
    {
        /// <summary>
        /// code
        /// </summary>
        \[XmlElement("code")\]
        public Code code { get; set; }

        /// <summary>
        /// city\_tax
        /// </summary>
        \[XmlElement("city\_tax")\]
        public City\_tax city\_tax { get; set; }

        /// <summary>
        /// names
        /// </summary>
        \[XmlArray("names")\]
        public List<Name> names { get; set; }
    }

    /// <summary>
    /// class: Code
    /// </summary>
    \[XmlType(TypeName = "code")\]
    public class Code
    {
        /// <summary>
        /// 
        /// </summary>
        \[XmlAttribute("value")\]
        public string value { get; set; }

    }


    /// <summary>
    /// class: City\_tax
    /// </summary>
    \[XmlType(TypeName = "city\_tax")\]
    public class City\_tax
    {
        /// <summary>
        /// 
        /// </summary>
        \[XmlAttribute("value")\]
        public string value { get; set; }

    }

    /// <summary>
    /// class: Name
    /// </summary>
    \[XmlType(TypeName = "name")\]
    public class Name
    {
        /// <summary>
        /// 
        /// </summary>
        \[XmlAttribute("language")\]
        public string language { get; set; }

        /// <summary>
        /// 
        /// </summary>
        \[XmlAttribute("value")\]
        public string value { get; set; }

    }
}

äºŒã€é€šè¿‡Visual Studioè‡ªå¸¦çš„ç”ŸæˆXmlå®ä½“å¯¹è±¡æ¨¡å‹ç±»
--------------------------------

> Vsè¢«ç§°ä¸ºå®‡å®™æœ€å¼ºIDEä¹Ÿä¸æ˜¯æ²¡æœ‰ç†ç”±çš„ï¼Œå®ƒé›†æˆäº†å¾ˆå¤šè‡ªåŠ¨åˆ›å»ºåŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨ç”ŸæˆJsonç±»ã€Xmlç±»ç­‰ï¼Œè™½ç„¶è¯´ä½¿ç”¨Vsè‡ªåŠ¨ç”Ÿæˆçš„Xmlæ¨¡å‹å¯è¯»æ€§æœ‰ç‚¹å·®å¹¶ä¸”æœ‰äº›å†—ä½™ï¼Œä½†æ˜¯å¿«æ·çœäº‹ï¼Œåªéœ€è¦ç•¥å¾®æ”¹åŠ¨ä¸€ä¸‹å³å¯ä½¿ç”¨ã€‚

### 1ã€é¦–å…ˆCtrl+Cå¤åˆ¶ä½ éœ€è¦ç”Ÿæˆçš„Xmlæ–‡æ¡£å†…å®¹

### 2ã€æ‰¾åˆ°ç¼–è¾‘=ã€‹é€‰æ‹©æ€§ç²˜è´´=ã€‹å°†Xmlç²˜è´´ä¸ºç±»

![](https://img2022.cnblogs.com/blog/1336199/202203/1336199-20220327001703880-950316713.png)

### 3ã€ä»¥ä¸‹æ˜¯ä½¿ç”¨VSè‡ªåŠ¨ç”Ÿæˆçš„Xmlç±»

namespace Practices.Models
{

    // æ³¨æ„: ç”Ÿæˆçš„ä»£ç å¯èƒ½è‡³å°‘éœ€è¦ .NET Framework 4.5 æˆ– .NET Core/Standard 2.0ã€‚
    /// <remarks/>
    \[System.SerializableAttribute()\]
    \[System.ComponentModel.DesignerCategoryAttribute("code")\]
    //TODO:æ³¨æ„è¿™é‡Œå› ä¸ºæˆ‘æŠŠç±»åæ”¹æˆäº†æˆ‘è‡ªå®šä¹‰çš„ï¼Œæ‰€ä»¥åœ¨TypeNameè¿™é‡Œéœ€è¦å£°æ˜Xmlæ–‡æ¡£çš„èŠ‚ç‚¹å
    \[System.Xml.Serialization.XmlTypeAttribute(typeName: "envelope")\]
    \[System.Xml.Serialization.XmlRootAttribute(Namespace \= "", IsNullable = false)\]
    public partial class NewCityDataModel
    {

        private envelopeHeader headerField;

        private envelopeResponse responseField;

        /// <remarks/>
        public envelopeHeader header
        {
            get
            {
                return this.headerField;
            }
            set
            {
                this.headerField = value;
            }
        }

        /// <remarks/>
        public envelopeResponse response
        {
            get
            {
                return this.responseField;
            }
            set
            {
                this.responseField = value;
            }
        }
    }

    /// <remarks/>
    \[System.SerializableAttribute()\]
    \[System.ComponentModel.DesignerCategoryAttribute("code")\]
    \[System.Xml.Serialization.XmlTypeAttribute(AnonymousType \= true)\]
    public partial class envelopeHeader
    {

        private envelopeHeaderVersion versionField;

        private ulong timestampField;

        /// <remarks/>
        public envelopeHeaderVersion version
        {
            get
            {
                return this.versionField;
            }
            set
            {
                this.versionField = value;
            }
        }

        /// <remarks/>
        public ulong timestamp
        {
            get
            {
                return this.timestampField;
            }
            set
            {
                this.timestampField = value;
            }
        }
    }

    /// <remarks/>
    \[System.SerializableAttribute()\]
    \[System.ComponentModel.DesignerCategoryAttribute("code")\]
    \[System.Xml.Serialization.XmlTypeAttribute(AnonymousType \= true)\]
    public partial class envelopeHeaderVersion
    {

        private ushort portField;

        private string hostField;

        private string valueField;

        /// <remarks/>
        \[System.Xml.Serialization.XmlAttributeAttribute()\]
        public ushort port
        {
            get
            {
                return this.portField;
            }
            set
            {
                this.portField = value;
            }
        }

        /// <remarks/>
        \[System.Xml.Serialization.XmlAttributeAttribute()\]
        public string host
        {
            get
            {
                return this.hostField;
            }
            set
            {
                this.hostField = value;
            }
        }

        /// <remarks/>
        \[System.Xml.Serialization.XmlTextAttribute()\]
        public string Value
        {
            get
            {
                return this.valueField;
            }
            set
            {
                this.valueField = value;
            }
        }
    }

    /// <remarks/>
    \[System.SerializableAttribute()\]
    \[System.ComponentModel.DesignerCategoryAttribute("code")\]
    \[System.Xml.Serialization.XmlTypeAttribute(AnonymousType \= true)\]
    public partial class envelopeResponse
    {

        private envelopeResponseCity\[\] citiesField;

        private string typeField;

        private string productField;

        /// <remarks/>
        \[System.Xml.Serialization.XmlArrayItemAttribute("city", IsNullable = false)\]
        public envelopeResponseCity\[\] cities
        {
            get
            {
                return this.citiesField;
            }
            set
            {
                this.citiesField = value;
            }
        }

        /// <remarks/>
        \[System.Xml.Serialization.XmlAttributeAttribute()\]
        public string type
        {
            get
            {
                return this.typeField;
            }
            set
            {
                this.typeField = value;
            }
        }

        /// <remarks/>
        \[System.Xml.Serialization.XmlAttributeAttribute()\]
        public string product
        {
            get
            {
                return this.productField;
            }
            set
            {
                this.productField = value;
            }
        }
    }

    /// <remarks/>
    \[System.SerializableAttribute()\]
    \[System.ComponentModel.DesignerCategoryAttribute("code")\]
    \[System.Xml.Serialization.XmlTypeAttribute(AnonymousType \= true)\]
    public partial class envelopeResponseCity
    {

        private envelopeResponseCityCode codeField;

        private envelopeResponseCityCity\_tax city\_taxField;

        private envelopeResponseCityName\[\] namesField;

        /// <remarks/>
        public envelopeResponseCityCode code
        {
            get
            {
                return this.codeField;
            }
            set
            {
                this.codeField = value;
            }
        }

        /// <remarks/>
        public envelopeResponseCityCity\_tax city\_tax
        {
            get
            {
                return this.city\_taxField;
            }
            set
            {
                this.city\_taxField = value;
            }
        }

        /// <remarks/>
        \[System.Xml.Serialization.XmlArrayItemAttribute("name", IsNullable = false)\]
        public envelopeResponseCityName\[\] names
        {
            get
            {
                return this.namesField;
            }
            set
            {
                this.namesField = value;
            }
        }
    }

    /// <remarks/>
    \[System.SerializableAttribute()\]
    \[System.ComponentModel.DesignerCategoryAttribute("code")\]
    \[System.Xml.Serialization.XmlTypeAttribute(AnonymousType \= true)\]
    public partial class envelopeResponseCityCode
    {

        private string valueField;

        /// <remarks/>
        \[System.Xml.Serialization.XmlAttributeAttribute()\]
        public string value
        {
            get
            {
                return this.valueField;
            }
            set
            {
                this.valueField = value;
            }
        }
    }

    /// <remarks/>
    \[System.SerializableAttribute()\]
    \[System.ComponentModel.DesignerCategoryAttribute("code")\]
    \[System.Xml.Serialization.XmlTypeAttribute(AnonymousType \= true)\]
    public partial class envelopeResponseCityCity\_tax
    {

        private bool valueField;

        /// <remarks/>
        \[System.Xml.Serialization.XmlAttributeAttribute()\]
        public bool value
        {
            get
            {
                return this.valueField;
            }
            set
            {
                this.valueField = value;
            }
        }
    }

    /// <remarks/>
    \[System.SerializableAttribute()\]
    \[System.ComponentModel.DesignerCategoryAttribute("code")\]
    \[System.Xml.Serialization.XmlTypeAttribute(AnonymousType \= true)\]
    public partial class envelopeResponseCityName
    {

        private string languageField;

        private string valueField;

        /// <remarks/>
        \[System.Xml.Serialization.XmlAttributeAttribute()\]
        public string language
        {
            get
            {
                return this.languageField;
            }
            set
            {
                this.languageField = value;
            }
        }

        /// <remarks/>
        \[System.Xml.Serialization.XmlAttributeAttribute()\]
        public string value
        {
            get
            {
                return this.valueField;
            }
            set
            {
                this.valueField = value;
            }
        }
    }



}

éªŒè¯ä¸¤ä¸ªXmlç±»æ˜¯å¦èƒ½å¤Ÿååºåˆ—åŒ–æˆåŠŸ
------------------

        /// <summary>     
        /// è¯»å–Xmlæ–‡ä»¶å†…å®¹ååºåˆ—åŒ–ä¸ºæŒ‡å®šçš„å¯¹è±¡  
        /// </summary>    
        /// <param name="filePath">Xmlæ–‡ä»¶çš„ä½ç½®ï¼ˆç»å¯¹è·¯å¾„ï¼‰</param>  
        /// <returns></returns>    
        public static T DeserializeFromXml<T>(string filePath)
        {
            try
            {
                if (!File.Exists(filePath))
                    throw new ArgumentNullException(filePath + " not Exists");
                using (StreamReader reader = new StreamReader(filePath))
                {
                    XmlSerializer xs \= new XmlSerializer(typeof(T));
                    T ret \= (T)xs.Deserialize(reader);
                    return ret;
                }
            }
            catch (Exception ex)
            {
                return default(T);
            }
        }

C# XMLåŸºç¡€å…¥é—¨ï¼ˆXMLæ–‡ä»¶å†…å®¹å¢åˆ æ”¹æŸ¥æ¸…ï¼‰
------------------------

[https://www.cnblogs.com/Can-daydayup/p/16036872.htmlğŸ‘‰](https://www.cnblogs.com/Can-daydayup/p/16036872.html)

C#XmlHelperå¸®åŠ©ç±»æ“ä½œXmlæ–‡æ¡£çš„é€šç”¨æ–¹æ³•æ±‡æ€»
----------------------------

[https://www.cnblogs.com/Can-daydayup/p/16058817.htmlğŸ‘‰](https://www.cnblogs.com/Can-daydayup/p/16058817.html)Â 

.NETä¸­XMLåºåˆ—åŒ–å’Œååºåˆ—åŒ–å¸¸ç”¨ç±»å’Œç”¨æ¥æ§åˆ¶XMLåºåˆ—åŒ–çš„å±æ€§æ€»ç»“
-----------------------------------

[https://www.cnblogs.com/Can-daydayup/p/16052873.htmlğŸ‘‰](https://www.cnblogs.com/Can-daydayup/p/16052873.html)

> ä½œè€…ï¼š[è¿½é€æ—¶å…‰è€…](https://www.cnblogs.com/Can-daydayup/)
> 
> ä½œè€…ç®€ä»‹ï¼šä¸€ä¸ªçƒ­çˆ±ç¼–ç¨‹ï¼Œå–„äºåˆ†äº«ï¼Œå–œæ¬¢å­¦ä¹ ã€æ¢ç´¢ã€å°è¯•æ–°äº‹ç‰©ï¼Œæ–°æŠ€æœ¯çš„ç¨‹åºçŒ¿ã€‚
> 
> æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚å¦‚æœè¯¥ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©çš„è¯ï¼Œå¯ä»¥ç‚¹ä¸€ä¸‹å³ä¸‹è§’çš„[ã€â™¥æ¨èâ™¥ã€‘](javascript:void(0))ï¼Œå¸Œæœ›èƒ½å¤ŸæŒç»­çš„ä¸ºå¤§å®¶å¸¦æ¥å¥½çš„æŠ€æœ¯æ–‡ç« ï¼Œæ–‡ä¸­å¯èƒ½å­˜åœ¨æè¿°ä¸æ­£ç¡®æˆ–é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿æŒ‡æ­£ã€è¡¥å……ï¼Œä¸èƒœæ„Ÿæ¿€ ï¼