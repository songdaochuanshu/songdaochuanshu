---
layout: post
title: "é¢œè‰²ä¹Ÿæœ‰è·ç¦»ï¼Ÿå’‹è®¡ç®—ï¼Ÿä¸€é”®æ‰¾å‡ºä¸Šä¸‡ä¸ªæ–‡ä»¶ä¸­çš„ç›¸è¿‘é¢œè‰²å¹¶æ›¿æ¢"
date: "2022-10-13T23:27:44.242Z"
---
é¢œè‰²ä¹Ÿæœ‰è·ç¦»ï¼Ÿå’‹è®¡ç®—ï¼Ÿä¸€é”®æ‰¾å‡ºä¸Šä¸‡ä¸ªæ–‡ä»¶ä¸­çš„ç›¸è¿‘é¢œè‰²å¹¶æ›¿æ¢
=============================

![é¢œè‰²ä¹Ÿæœ‰è·ç¦»ï¼Ÿå’‹è®¡ç®—ï¼Ÿä¸€é”®æ‰¾å‡ºä¸Šä¸‡ä¸ªæ–‡ä»¶ä¸­çš„ç›¸è¿‘é¢œè‰²å¹¶æ›¿æ¢](https://img2022.cnblogs.com/blog/1785291/202210/1785291-20221013182845879-292558733.png) é¡¹ç›®ä¸­å­˜åœ¨å¤§é‡ç¡¬ç¼–ç çš„é¢œè‰²å€¼ï¼Œå¯¼è‡´éƒ¨åˆ†åœºæ™¯æ— æ³•è¾¾åˆ°åŠ¨æ€æ¢è‚¤çš„æ•ˆæžœï¼Œéœ€è¦æŠŠè¿™äº›é¢œè‰²å€¼å…¨éƒ¨æ‰¾å‡ºæ¥å¹¶æ›¿æ¢æˆå˜é‡ã€‚å†åŠ ä¸Šå…¬å¸æ­£åœ¨é£Žé£Žç«ç«çš„å®žè¡ŒUIè§„èŒƒå¤§ä¸€ç»Ÿï¼Œå¯¹è¿™ä¸ªé—®é¢˜æœ‰è¿«åˆ‡çš„è§£å†³éœ€æ±‚

ä¸€ã€èƒŒæ™¯
----

å‰æ®µæ—¶é—´åœ¨å…¬å¸é¡¹ç›®ä¸­æŽ¨è¿›å…¨å±€æ¢è‚¤ä¹‹åŽï¼Œå‘çŽ°æœ‰ä¸ªåŽé—ç—‡ã€‚é¡¹ç›®ä¸­`å­˜åœ¨å¤§é‡ç¡¬ç¼–ç çš„é¢œè‰²å€¼`ï¼Œå¯¼è‡´éƒ¨åˆ†åœºæ™¯æ— æ³•è¾¾åˆ°åŠ¨æ€æ¢è‚¤çš„æ•ˆæžœï¼Œéœ€è¦æŠŠè¿™äº›é¢œè‰²å€¼å…¨éƒ¨æ‰¾å‡ºæ¥å¹¶æ›¿æ¢æˆå˜é‡ã€‚å†åŠ ä¸Šå…¬å¸æ­£åœ¨é£Žé£Žç«ç«çš„å®žè¡ŒUIè§„èŒƒå¤§ä¸€ç»Ÿï¼Œå¯¹è¿™ä¸ªé—®é¢˜æœ‰è¿«åˆ‡çš„è§£å†³éœ€æ±‚ã€‚ç„¶è€Œå…¬å¸ä¸­çŽ°å­˜é¡¹ç›®æ•°é‡ä¼—å¤šï¼Œåœ¨`ä¸Šä¸‡ä¸ªæ–‡ä»¶`ä¸­æ‰¾å‡ºæ‰€æœ‰ç¡¬ç¼–ç çš„é¢œè‰²å€¼ï¼Œæ— å¼‚äºŽå¤§æµ·æžé’ˆã€‚ä¸”åœ¨å„ä¸šåŠ¡çº¿ç´§å¼ çš„è¿­ä»£ä¸­ï¼Œè¿˜è¦èŠ±è´¹å¤§é‡çš„äººåŠ›åŽ»æŸ¥æ‰¾æ›¿æ¢è¿™äº›è‰²å€¼æ˜Žæ˜¾æ˜¯ä¸å¤ªçŽ°å®žçš„

äºŒã€ç›®æ ‡
----

é€šè¿‡å·¥å…·åŒ–çš„æ–¹å¼ï¼Œä¸€é”®å°†é¡¹ç›®ä¸­ç¡¬ç¼–ç çš„é¢œè‰²å€¼å…¨éƒ¨æ›¿æ¢æˆç›¸åº”çš„å˜é‡ï¼ˆ`less` å˜é‡æˆ–è€… `css3` å˜é‡ï¼‰ï¼Œå‰ææ¡ä»¶æ˜¯å…¬å¸å¿…é¡»æœ‰ä¸€å¥—æ ‡å‡†çš„é…è‰²è¡¨

ä¸‰ã€å®žçŽ°æ–¹æ¡ˆ
------

#### 1ã€é…è‰²è¡¨è½¬æ¢

é¦–å…ˆï¼Œéœ€è¦å°† UI è®¾è®¡å¸ˆæä¾›çš„é…è‰²è¡¨è½¬æˆå¯¹åº”çš„å˜é‡ï¼ˆæœ¬ç¯‡æ–‡ç« ä»¥ `less` ä¸ºä¾‹ï¼Œå…¶ä»–é¢„å¤„ç†å™¨åŒç†ï¼‰ã€‚ä¾‹å¦‚è®¾è®¡å¸ˆæä¾›çš„é…è‰²è¡¨ï¼Œå¦‚ä¸‹

è‰²å·

è‰²å€¼

$ \\color{#e6f7ff}{1å·è“} $

#e6f7ff

$ \\color{#bae7ff}{2å·è“} $

#bae7ff

$ \\color{#91d5ff}{3å·è“} $

#91d5ff

$ \\color{#69c0ff}{4å·è“} $

#69c0ff

$ \\color{#40a9ff}{5å·è“} $

#40a9ff

$ \\color{#1890ff}{6å·è“} $

#1890ff

$ \\color{#096dd9}{7å·è“} $

#096dd9

$ \\color{#0050b3}{8å·è“} $

#0050b3

$ \\color{#003a8c}{9å·è“} $

#003a8c

$ \\color{#002766}{10å·è“} $

#002766

è½¬æ¢æˆ `less` å˜é‡ä¹‹åŽï¼Œå½¢å¼å¦‚ä¸‹ï¼Œå§‘ä¸”æŠŠè¿™ä¸ªæ–‡ä»¶å‘½åä¸ºï¼š`color-table.less`

    @blue-1: #e6f7ff; 
    @blue-2: #bae7ff; 
    @blue-3: #91d5ff; 
    @blue-4: #69c0ff; 
    @blue-5: #40a9ff; 
    @blue-6: #1890ff; 
    @blue-7: #096dd9; 
    @blue-8: #0050b3; 
    @blue-9: #003a8c; 
    @blue-10: #002766; 
    

#### 2ã€æ‰¾é¢œè‰²

å‰é¢å‡†å¤‡å·¥ä½œåšå¥½ä¹‹åŽï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯æ€Žä¹ˆæŠŠé¢œè‰²æ‰¾å‡ºæ¥äº†ã€‚å—¯ï¼Ÿé‚£ä¹ˆå¤šæ–‡ä»¶æ€Žä¹ˆæ‰¾ï¼Ÿå¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œå¯ä»¥é€šè¿‡ `fs.readdir`ã€`fs.readFile` é…åˆæ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒæŸ¥æ‰¾åŒ¹é…ï¼Œè¿›è€Œå¯ä»¥å¾—å‡ºä»¥ä¸‹è¡¨è¾¾å¼ï¼ˆå¯ç²¾ç¡®åŒ¹é… `rgba` ä¸Ž `hex` æ ¼å¼çš„é¢œè‰²å€¼ï¼Œæš‚`ä¸è€ƒè™‘è‹±æ–‡å­—é¢é‡é¢œè‰²ä¸Žhslæ ¼å¼`ï¼Œæ— ä»–ï¼Œé¡¹ç›®ä¸­åŸºæœ¬ä¸ç”¨ï¼‰

    /(#([0-9a-fA-F]{8}|[0-9a-fA-F]{6}|[0-9a-fA-F]{3}))|([rR][gG][Bb][Aa]?[\(]([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),){2}[\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),?[\s]*(0\.\d{1,2}|1|0)?[\)]{1})/g
    

è¿™ä¹ˆé•¿ä¸€ä¸²çœ‹ç€æ™•å—ï¼Ÿæˆ‘ä¹Ÿæ˜¯è¿™ç§æ„Ÿè§‰ï¼é‚£å’±ä»¬æŠŠå®ƒå¯è§†åŒ–ä¸€ä¸‹ï¼Œæœ€åŽé•¿è¿™æ ·ï¼š

![reg.png](https://upload-images.jianshu.io/upload_images/7412714-e906279d8ce9881c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

666ï¼Œçž¬é—´æ¸…æ™°å¤šäº†

æ­£åˆ™è¡¨è¾¾å¼æœ‰äº†ä¹‹åŽï¼Œéœ€è¦æŠŠå®ƒåˆ©ç”¨èµ·æ¥æ‰èƒ½æ‰¾åˆ°é¢œè‰²å€¼ï¼Œè¿™ä¸€å—é€»è¾‘çš„å®žçŽ°ä»£ç å¦‚ä¸‹ï¼š

    // åŒ¹é… rgba + hex æ ¼å¼é¢œè‰²å€¼æ­£åˆ™
    const HEX_AND_RGB_COLOR_REG =
      /(#([0-9a-fA-F]{8}|[0-9a-fA-F]{6}|[0-9a-fA-F]{3}))|([rR][gG][Bb][Aa]?[\(]([\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),){2}[\s]*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),?[\s]*(0?\.\d{1,2}|1|0)?[\)]{1})/g;
    
    // è¯»å–æ–‡ä»¶
    const readFile = (filePath) => {
      fs.readFile(filePath, function (err, data) {
        if (err) {
          return err;
        }
        let str = data.toString();
        
        // åŒ¹é…å‡ºæ¥çš„é¢œè‰²å€¼
        const matchColor = str.match(HEX_AND_RGB_COLOR_REG);
        console.log(matchColor);
      });
    };
    
    // è¯»å–æ–‡ä»¶å¤¹
    const readDir = (filePath) => {
      //éåŽ†ç›®æ ‡æ–‡ä»¶å¤¹
      fs.readdir(filePath + "", function (err, files) {
        if (err) {
          console.log(err);
          return err;
        }
        if (files.length !== 0) {
          files.forEach((item) => {
            const fileP = path.resolve(filePath, item);
            //åˆ¤æ–­æ–‡ä»¶çš„çŠ¶æ€ï¼Œç”¨äºŽåŒºåˆ†æ–‡ä»¶å/æ–‡ä»¶å¤¹
            fs.stat(fileP, function (err, status) {
              if (err) {
                return err;
              }
              const isFile = status.isFile(); //æ˜¯æ–‡ä»¶
              const isDir = status.isDirectory(); //æ˜¯æ–‡ä»¶å¤¹
    
              if (isFile) {
                readFile(fileP);
              }
    
              if (isDir) {
                readDir(fileP);
              }
            });
          });
        }
      });
    }
    

#### 3ã€è®¡ç®—é¢œè‰²è·ç¦»

é…è‰²è¡¨æœ‰äº†ï¼Œé¡¹ç›®ä¸­çš„é¢œè‰²ä¹Ÿæ‰¾å‡ºæ¥äº†ã€‚æŽ¥ä¸‹æ¥åˆ°äº†æœ€å…³é”®çš„ä¸€æ­¥ï¼šæŠŠé¢œè‰²ä¹‹é—´çš„ç›¸ä¼¼åº¦è®¡ç®—å‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯è¯´éœ€è¦çŸ¥é“ä¸¤ä¸ªé¢œè‰²ä¹‹é—´çš„â€œè·ç¦»â€æ‰èƒ½çŸ¥é“ä»Žé¡¹ç›®ä¸­æ‰¾å‡ºæ¥çš„è¿™ä¸ªé¢œè‰²å€¼éœ€è¦è¢«æ›¿æ¢æˆé…è‰²è¡¨ä¸­çš„å“ªä¸ªå˜é‡

åœ¨è¿™ä¹‹å‰éœ€è¦æŠŠé…è‰²è¡¨æ–‡ä»¶ `color-table.less` å¤„ç†ä¸€ä¸‹ï¼Œä½¿ä¹‹æˆä¸º `key-vlaue` çš„å¯¹è±¡å½¢å¼ï¼Œæ–¹ä¾¿åŽç»­çš„åŒ¹é…æ“ä½œ

    // è¯»å–é…è‰²è¡¨ä¸­çš„å†…å®¹
    const colorTableStr = fs.readFileSync("./color-table.less", "utf-8");
    // åŽ»é™¤è¡Œæœ«çš„åˆ†å·
    const colorTableStrNext = colorTableStr.replace(/;/g, "");
    // å°†æ¯ä¸€è¡Œæ•°æ®è£…è¿›æ•°ç»„ï¼Œå½¢å¦‚ï¼š['@blue-1: #e6f7ff', '@blue-2: #bae7ff']
    const colorTableArr = colorTableStrNext.split("\n").filter((item) => !!item);
    
    // é…è‰²è¡¨å¯¹è±¡ï¼Œå½¢å¦‚ï¼š{'#e6f7ff': '@blue-1', '#bae7ff': '@blue-2'}
    const colorVarObj = {};
    colorTableArr.forEach((item) => {
      item = item.toString();
      if (item) {
        const [key, value] = item.split(":");
        // åŽ»é™¤ç©ºæ ¼
        const val = value.replace(/\s/g, "");
        colorVarObj[val] = key;
      }
    });
    

ç»è¿‡ä¸Šè¿°å¤„ç†ä¹‹åŽçš„é…è‰²è¡¨å¯¹è±¡ `colorVarObj` æ ¼å¼ä¸ºï¼š`{'#e6f7ff': '@blue-1', '#bae7ff': '@blue-2'}`

æ—¢ç„¶æ˜¯è®¡ç®—ï¼Œé‚£è‚¯å®šå¾—æœ‰ä¸€å¥—è®¡ç®—é€»è¾‘ï¼Œé¦–å…ˆæƒ³åˆ°çš„è®¡ç®—æ–¹æ³•æ˜¯ï¼š

*   å°†é¢œè‰²å…¨éƒ¨è½¬æ¢ä¸º `RGB` æ ¼å¼ï¼›
*   ç»“åˆå…¬å¼ $ \\Delta RGB = \\sqrt{(R\_2 - R\_1)^2 + (G\_2 - G\_1)^2 + (B\_2 - B\_1)^2} $ è¿›è¡Œè®¡ç®—

è¿™ç§è®¡ç®—æ–¹æ³•å¯¹äºŽå¤§éƒ¨åˆ†é¢œè‰²æ¥è®²æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å¯¹äºŽæŸäº›é¢œè‰²å°±è¡Œä¸é€šäº†ï¼Œå‡è®¾æœ‰ä¸‹é¢è¿™ä¸€ç»„é¢œè‰²

$ \\color{#969696}{color1: rgb(150,150,150)} $  
![](https://upload-images.jianshu.io/upload_images/7412714-55c6e28fe0ea3ff0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

$ \\color{#787878}{color2: rgb(120,120,120)} $  
![](https://upload-images.jianshu.io/upload_images/7412714-0689a0dbbc16355c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

$ \\color{#AA8282}{color3: rgb(170,130,130)} $  
![](https://upload-images.jianshu.io/upload_images/7412714-12c36481bfac484e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

ä»Žè®¡ç®—ç»“æžœæ¥çœ‹ï¼Œ`color3` ä¸Ž `color1` çš„è‰²å·® `34.64`ï¼Œæ˜Žæ˜¾å°äºŽ `color2` ä¸Ž `color1` çš„è‰²å·® `51.96`ã€‚ä½†æ˜¯ä»Žè§†è§‰æ•ˆæžœä¸Šæ¥çœ‹ï¼Œ`color2` æ¯” `color3` æ›´æŽ¥è¿‘ `color1`ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•è¡Œä¸é€š

ç»è¿‡æŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒå®Œç¾Žçš„è®¡ç®—æ–¹æ¡ˆï¼š

*   å°†é¢œè‰²å…¨éƒ¨è½¬æˆ `LAB` æ ¼å¼
*   ç»“åˆ `CIEDE2000` å…¬å¼ $ \\Delta E\_{00}^\* = \\sqrt{ (\\frac{\\Delta L\\prime}{K\_LS\_L})2 + (\\frac{\\Delta C\\prime}{K\_CS\_C})2 + (\\frac{\\Delta H\\prime}{K\_HS\_H})2 + R\_T\\frac{\\Delta C^\\prime}{K\_CS\_C}\\frac{\\Delta H^\\prime}{K\_HS\_H} } $ æ¥è®¡ç®—ï¼Œè¿™ä¸ªæ–¹æ¡ˆç”¨ `js` ä»£ç å®žçŽ°ä¹‹åŽï¼Œè·Ÿ `Photoshop` çš„è‰²å·®è®¡ç®—ç»“æžœç›¸å·®æ— å‡ ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è¯´æ˜¯ä¸€æ¨¡ä¸€æ ·ã€‚

ä¸Šè¿°å…¬å¼ä¸­å„å­—æ¯ä»£è¡¨çš„å«ä¹‰åŠè®¡ç®—æ–¹æ³•ï¼š

![](https://upload-images.jianshu.io/upload_images/7412714-857df560d3c9c6aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æŽ¥ä¸‹æ¥ï¼Œå’±ä»¬æ¥ç¨å¾®å®žçŽ°ä¸€ä¸‹è¿™ä¸ªå…¬å¼ã€‚ã€‚ã€‚å¯æƒœå•Šï¼Œå·²ç»æœ‰å¤§ä½¬å®žçŽ°äº†è¿™ä¸ªè®¡ç®—å…¬å¼ï¼Œç§‰ç€ä¸é‡å¤é€ è½®å­è§‚å¿µï¼Œå°±ç›´æŽ¥ç”¨è¿™ä¸ªåº“å§ï¼ˆå…¶å®žå°±æ˜¯èƒ½åŠ›ä¸è¡Œï¼Œå®žçŽ°ä¸äº†ðŸ˜„ï¼‰ã€‚ä¼ é€é—¨ï¼š[DeltaE](https://github.com/zschuessler/DeltaE)

ä¸è¿‡å‘¢ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªå…¬å¼æŽ¥æ”¶çš„é¢œè‰²æ ¼å¼ä¸º `LAB`ï¼Œæ‰€ä»¥éœ€è¦å¯¹é¢œè‰²è¿›è¡Œè½¬æ¢ï¼Œæ‰¾äº†ä¸€åœˆç±»ä¼¼çš„ `js` åº“ï¼Œç»æµ‹è¯•å‘çŽ°è½¬æ¢å¾—å¹¶ä¸ç²¾å‡†ã€‚é‚£å’±ä»¬è‡ªå·±å®žçŽ°ä¸€ä¸‹ï¼Ÿä¸Šä»£ç ï¼š

    // rgbè½¬ä¸ºlab
    const rgb2lab = function ({ r, g, b }) {
      r /= 255.0; // rgb range: 0 ~ 1
      g /= 255.0;
      b /= 255.0;
      // gamma 2.2
      if (r > 0.04045) {
        r = Math.pow((r + 0.055) / 1.055, 2.4);
      } else {
        r = r / 12.92;
      }
      if (g > 0.04045) {
        g = Math.pow((g + 0.055) / 1.055, 2.4);
      } else {
        g = g / 12.92;
      }
      if (b > 0.04045) {
        b = Math.pow((b + 0.055) / 1.055, 2.4);
      } else {
        b = b / 12.92;
      }
      // sRGB
      let X = r * 0.436052025 + g * 0.385081593 + b * 0.143087414;
      let Y = r * 0.222491598 + g * 0.71688606 + b * 0.060621486;
      let Z = r * 0.013929122 + g * 0.097097002 + b * 0.71418547;
      // XYZ range: 0~100
      X = X * 100.0;
      Y = Y * 100.0;
      Z = Z * 100.0;
      // Reference White Point
      const ref_X = 96.4221;
      const ref_Y = 100.0;
      const ref_Z = 82.5211;
      X = X / ref_X;
      Y = Y / ref_Y;
      Z = Z / ref_Z;
      // Lab
      if (X > 0.008856) {
        X = Math.pow(X, 1 / 3.0);
      } else {
        X = 7.787 * X + 16 / 116.0;
      }
      if (Y > 0.008856) {
        Y = Math.pow(Y, 1 / 3.0);
      } else {
        Y = 7.787 * Y + 16 / 116.0;
      }
      if (Z > 0.008856) {
        Z = Math.pow(Z, 1 / 3.0);
      } else {
        Z = 7.787 * Z + 16 / 116.0;
      }
    
      const lab_L = 116.0 * Y - 16.0;
      const lab_A = 500.0 * (X - Y);
      const lab_B = 200.0 * (Y - Z);
    
      return [lab_L, lab_A, lab_B];
    };
    

çœ‹åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯æœ‰ç‚¹ç–‘æƒ‘ï¼Œä¸Šé¢é‚£ä¸€å †æ•°å­—æ€Žä¹ˆæ¥çš„ï¼Œä½ å’‹çŸ¥é“æ˜¯è¿™äº›ï¼Ÿé™„ä¸Šå‚è€ƒèµ„æ–™ï¼š[Conversion from RGB to lab](http://agri.ckcest.cn/file1/M00/02/20/Csgk0TtI926AOLTEAAkxF9dVCF8974.pdf)

ç»“åˆ `DeltaE` å…¬å¼ï¼Œå®žçŽ°é€»è¾‘å¦‚ä¸‹ï¼š

    // è®¡ç®—é¢œè‰²è·ç¦»
    const calDistance = (current, source) => {
      const [cl, ca, cb] = rgb2lab(tinyColor(current).toRgb());
      const [sl, sa, sb] = rgb2lab(tinyColor(source).toRgb());
    
      const distance = DeltaE.getDeltaE00(
        { L: cl, A: ca, B: cb },
        { L: sl, A: sa, B: sb }
      );
      return distance;
    };
    

è¿˜æ˜¯ä½¿ç”¨å‰é¢é‚£ä¸€ç»„é¢œè‰²è¿›è¡Œæµ‹è¯•è¿™ä¸ªæ–°å…¬å¼çš„è®¡ç®—æ•ˆæžœã€‚`color3` ä¸Ž `color1` çš„è‰²å·® `16.11`ï¼Œæ˜¯å¤§äºŽ `color2` ä¸Ž `color1` çš„è‰²å·® `10.82`ã€‚è®¡ç®—ç»“æžœä¸Žè§†è§‰æ•ˆæžœå®Œå…¨ä¸€è‡´ã€‚

![](https://upload-images.jianshu.io/upload_images/7412714-140d9fd519e22b6d.gif?imageMogr2/auto-orient/strip)

#### 4ã€æ›¿æ¢é¢œè‰²

ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œæ›¿æ¢é¢œè‰²å°±å¾ˆç®€å•äº†ã€‚ä½†æ˜¯ï¼Œè¦æ³¨æ„ä»¥ä¸‹ä¸‰ç‚¹ï¼š

*   **less æ–‡ä»¶**ï¼šç›´æŽ¥å°†ç›¸åº”çš„é¢œè‰²å€¼æ›¿æ¢ä¸º `color-table.less` ä¸­çš„Â `less` å˜é‡
*   **tsx æ–‡ä»¶**ï¼šç”±äºŽ `tsx` æ–‡ä»¶ä¸æ”¯æŒ `less` å˜é‡ï¼Œæ‰€ä»¥ `tsx` æ–‡ä»¶ä¸­ç¡¬ç¼–ç çš„é¢œè‰²å€¼ï¼Œå°†è¢«æ›¿æ¢ä¸º `color-table.less` ä¸­Â **less å˜é‡å¯¹åº”çš„è‰²å€¼æˆ– css3 å˜é‡**
*   **é€æ˜Žåº¦ä¸ä¸º 1 çš„ rgba é¢œè‰²å€¼**ï¼šç”±äºŽ `LAB` è‰²å½©ç©ºé—´æ²¡æœ‰é€æ˜Žåº¦ä¿¡æ¯ï¼Œæ‰€ä»¥ç»è¿‡è½¬æ¢ä¹‹åŽï¼Œ**åŽŸè‰²å€¼çš„é€æ˜Žåº¦ä¼šä¸¢å¤±**ï¼Œå¯¼è‡´è¢«è½¬æ¢ä¸ºé”™è¯¯çš„å˜é‡ã€‚æ­¤æ—¶ï¼Œéœ€è¦**ç»“åˆ less çš„ fade æ–¹æ³•è¿˜åŽŸä¸¢å¤±çš„é€æ˜Žåº¦**ï¼š`fade(${lesså˜é‡},Â ${é€æ˜Žåº¦Â *Â 100}%)`

ä»£ç å®žçŽ°å¦‚ä¸‹ï¼š

    // æ ¹æ®é¢œè‰²è·ç¦»ï¼Œå–å‡ºæœ€æŽ¥è¿‘çš„é¢œè‰²
    const nearColor = (color) => {
      const colors = Object.keys(colorVarObj);
      const distance = colors.map((item) => {
        return {
          distance: calDistance(color, item),
          color: item,
        };
      });
      let resColor = color;
      let minDis = Number.MAX_SAFE_INTEGER;
      distance.forEach((item) => {
        if (item.distance < minDis) {
          minDis = item.distance;
          resColor = item.color;
        }
      });
      // æ›¿æ¢ä¸ºlesså˜é‡
      return [colorVarObj[resColor], resColor];
    };
    
    // æ›¿æ¢é¢œè‰²
    const replaceNearColor = (str, type) => {
      let [colorVar, colorRes] = nearColor(str);
    
      let realColor = colorTableObj[colorVar] ? colorTableObj[colorVar] : str;
    
      // é€æ˜Žåº¦ä¸ä¸º1çš„é¢œè‰²ç‰¹æ®Šå¤„ç†
      const alp = tinyColor(str).getAlpha();
      if (alp !== 1) {
        const color = replaceCssVarFn(realColor);
        colorVar = `fade(${color}, ${alp * 100}%)`;
      }
    
      // å¤„ç†éžlessæ–‡ä»¶ä¸­çš„é¢œè‰²å€¼
      if (type !== 'less') {
        if (alp !== 1) {
          realColor = tinyColor(realColor).setAlpha(alp).toRgbString();
        }
        return realColor;
      }
      return colorVar;
    };
    

#### 5ã€æ•ˆæžœä½“éªŒ

åœ¨çº¿ä½“éªŒåœ°å€ï¼š[https://hxkj.vip/demo/color](https://hxkj.vip/demo/color)

github åœ°å€ï¼š[https://github.com/TangSY/near-color-change](https://github.com/TangSY/near-color-change)

![priview.png](https://upload-images.jianshu.io/upload_images/7412714-8f90dae133a187ab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

å››ã€ç»“è¯­
----

ä½œè€…ï¼šHashTang

åˆ«å¿˜äº†ç‚¹èµžã€å…³æ³¨ï¼Œæ”¯æŒä¸€ä¸‹å“¦~

æ¬¢è¿Žæé—®äº¤æµï¼

**å‚è€ƒèµ„æ–™**

> [http://zschuessler.github.io/DeltaE/learn/](http://zschuessler.github.io/DeltaE/learn/)
> 
> [https://zh.wikipedia.org/wiki/é¢œè‰²å·®å¼‚](https://zh.wikipedia.org/wiki/%E9%A2%9C%E8%89%B2%E5%B7%AE%E5%BC%82)