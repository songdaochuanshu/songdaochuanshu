---
layout: post
title: "ã€è®¾è®¡æ¨¡å¼ã€‘Javaè®¾è®¡æ¨¡å¼ - ç»„åˆæ¨¡å¼"
date: "2022-09-12T07:39:48.145Z"
---
ã€è®¾è®¡æ¨¡å¼ã€‘Javaè®¾è®¡æ¨¡å¼ - ç»„åˆæ¨¡å¼
=====================

ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰ï¼Œåˆå«éƒ¨åˆ†æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç”¨äºæŠŠä¸€ç»„ç›¸ä¼¼çš„å¯¹è±¡å½“ä½œä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ã€‚ç»„åˆæ¨¡å¼ä¾æ®æ ‘å½¢ç»“æ„æ¥ç»„åˆå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºéƒ¨åˆ†ä»¥åŠæ•´ä½“å±‚æ¬¡ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒåˆ›å»ºäº†å¯¹è±¡ç»„çš„æ ‘å½¢ç»“æ„ã€‚

Javaè®¾è®¡æ¨¡å¼ - ç»„åˆæ¨¡å¼
===============

> ğŸ˜„ ä¸æ–­å­¦ä¹ æ‰æ˜¯ç‹é“  
> ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°  
> ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·  
> ğŸ†åŸåˆ›ä½œå“ï¼Œæ›´å¤šå…³æ³¨æˆ‘CSDN: [ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº](https://blog.csdn.net/qq_43843951?spm=1011.2415.3001.5343 "ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº")  
> ğŸ‘Šå‡†å¤‡å°†åšå®¢å›­ã€CSDNä¸€èµ·è®°å½•åˆ†äº«è‡ªå·±çš„å­¦ä¹ å¿ƒå¾—ï¼ï¼ï¼  
> ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼

ç›®å½•

*   [Javaè®¾è®¡æ¨¡å¼ - ç»„åˆæ¨¡å¼](#javaè®¾è®¡æ¨¡å¼---ç»„åˆæ¨¡å¼)
    *   [ç®€ä»‹](#ç®€ä»‹)
    *   [ç»„åˆæ¨¡å¼åŸç†](#ç»„åˆæ¨¡å¼åŸç†)
    *   [ç»„åˆæ¨¡å¼å®ä¾‹](#ç»„åˆæ¨¡å¼å®ä¾‹)
        *   [â‘ ã€å®šä¹‰æŠ½è±¡ç±»-Component](#å®šä¹‰æŠ½è±¡ç±»-component)
        *   [â‘¡ã€å®šä¹‰å¶å­ç±»å’Œéå¶å­ç±»](#å®šä¹‰å¶å­ç±»å’Œéå¶å­ç±»)
        *   [â‘¢ã€æµ‹è¯•](#æµ‹è¯•)

![image](https://img2022.cnblogs.com/blog/1954113/202209/1954113-20220912152936011-1965044090.jpg)

ç®€ä»‹
--

ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰ï¼Œåˆå«éƒ¨åˆ†æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç”¨äºæŠŠä¸€ç»„ç›¸ä¼¼çš„å¯¹è±¡å½“ä½œä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ã€‚ç»„åˆæ¨¡å¼ä¾æ®æ ‘å½¢ç»“æ„æ¥ç»„åˆå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºéƒ¨åˆ†ä»¥åŠæ•´ä½“å±‚æ¬¡ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒåˆ›å»ºäº†å¯¹è±¡ç»„çš„æ ‘å½¢ç»“æ„ã€‚

ç»„åˆæ¨¡å¼åŸç†
------

é¦–å…ˆå…ˆçœ‹ä¸€ä¸‹ç»„åˆçš„UMLå›¾  
![image](https://img2022.cnblogs.com/blog/1954113/202209/1954113-20220912153026384-982037603.jpg)

> Compoentï¼šæŠ½è±¡ç±»æˆ–è€…æ¥å£ï¼Œæ˜¯ç»„åˆå¯¹è±¡å£°æ˜çš„æ¥å£ï¼Œå®ç°æ‰€æœ‰ç±»çš„é»˜è®¤è¡Œä¸ºï¼Œç”¨äºè®¿é—®ã€ç®¡ç†å­éƒ¨ä»¶ã€‚  
> Leafï¼šç»„åˆä¸­çš„å¶å­èŠ‚ç‚¹ï¼Œæœ€å°çš„ç±»  
> Compositeï¼šéå¶å­èŠ‚ç‚¹ï¼Œç”¨æ¥æ“ä½œç»„åˆå¯¹è±¡ï¼Œå­˜å‚¨å­éƒ¨ä»¶ã€‚

ç»„åˆæ¨¡å¼å®ä¾‹
------

æ¥ä¸‹æ¥ç”¨ä¸€ä¸ªä¾‹å­æ¥å­¦ä¹ ç»„åˆæ¨¡å¼ï¼Œå­¦æ ¡æœ‰å­¦é™¢ï¼Œå­¦é™¢ä¸‹æœ‰ä¸“ä¸šï¼Œè¿™å°±æ˜¯ä¸€å±‚ä¸€å±‚çš„å…³ç³»ï¼Œéœ€è¦åœ¨ä¸€ä¸ªé¡µé¢ä¸­å±•ç°å‡ºé‚£ä¸ªå­¦æ ¡æœ‰ä»€ä¹ˆå­¦é™¢ï¼Œå­¦é™¢ä¸‹æœ‰ä»€ä¹ˆä¸“ä¸šã€‚  
æ¥çœ‹ä¸€ä¸‹ä¾‹å­çš„ç±»å›¾  
![image](https://img2022.cnblogs.com/blog/1954113/202209/1954113-20220912153315057-224366718.png)

### â‘ ã€å®šä¹‰æŠ½è±¡ç±»-Component

å®šä¹‰å±æ€§ï¼Œæ„é€ å™¨ï¼Œgetsetï¼Œæ“ä½œæ–¹æ³•éœ€è¦é»˜è®¤å®ç°ï¼Œå› ä¸ºåœ¨å¶å­èŠ‚ç‚¹æ˜¯ä¸éœ€è¦å»å®ç°çš„ï¼Œå¦‚æœå®šä¹‰æˆæŠ½è±¡ç±»ï¼Œå­ç±»å°±å¿…é¡»å®ç°äº†ã€‚åœ¨å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»-æ‰“å°ä¿¡æ¯ã€‚

    package com.lyd.demo.composite;
    
    /**
     * @Author: lyd
     * @Description: æŠ½è±¡ç±»
     * @Date: 2022-08-30
     */
    public abstract class OrganizationComponent {
        private String name;
        private String description;
        public OrganizationComponent(String name, String description) {
            this.name = name;
            this.description = description;
        }
        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        }
        public String getDescription() {
            return description;
        }
        public void setDescription(String description) {
            this.description = description;
        }
        // æ·»åŠ  - å­ç±»ä¸ä¸€å®šéœ€è¦å®ç°
        public void add(OrganizationComponent organizationComponent) {
            throw new UnsupportedOperationException();
        }
        // åˆ é™¤ - å­ç±»ä¸ä¸€å®šéœ€è¦å®ç°
        public void remove(OrganizationComponent organizationComponent) {
            throw new UnsupportedOperationException();
        }
        // æ‰“å° - å­ç±»å¿…é¡»å»å®ç°
        public abstract void print();
    }
    

### â‘¡ã€å®šä¹‰å¶å­ç±»å’Œéå¶å­ç±»

å¤§å­¦ç±»ï¼šéå¶å­ï¼Œç»„åˆ é™¢ç³»ç±»ï¼›å®šä¹‰ä¸€ä¸ªæ•°ç»„æ¥å­˜æ”¾ç»„åˆå¯¹è±¡ï¼Œé€šè¿‡é‡å†™æ“ä½œæ–¹æ³•å¯¹å…¶è¿›è¡Œæ“ä½œã€‚

    package com.lyd.demo.compose;
    import com.lyd.demo.composite.OrganizationComponent;
    import java.util.ArrayList;
    import java.util.List;
    /**
     * @Author: lyd
     * @Description: å­¦æ ¡ç±» - ç»§æ‰¿OrganizationComponent - ç»„åˆ é™¢ç³»ç±»
     * @Date: 2022-08-30
     */
    public class University extends OrganizationComponent {
        // ç»„åˆ College ç±»
        List<OrganizationComponent> organizationComponents = new ArrayList<OrganizationComponent>();
        public University(String name, String description) {
            super(name, description);
        }
        /**
         * é‡å†™add
         */
        @Override
        public void add(OrganizationComponent organizationComponent) {
            organizationComponents.add(organizationComponent);
        }
        /**
         * é‡å†™remove
         */
        @Override
        public void remove(OrganizationComponent organizationComponent) {
            organizationComponents.add(organizationComponent);
        }
        @Override
        public String getName() {
            return super.getName();
        }
        @Override
        public String getDescription() {
            return super.getDescription();
        }
        // æ‰“å°åŒ…å«å­¦é™¢çš„ä¿¡æ¯
        @Override
        public void print() {
            System.out.println("< " + getName() + " >");
            // å°†æ‰€æœ‰å­¦é™¢ä¿¡æ¯æ‰“å°å‡ºæ¥
            for (OrganizationComponent o : organizationComponents) {
                o.print();
            }
        }
    }
    

å­¦é™¢ç±»ï¼šéå¶å­ï¼Œç»„åˆDepartmentç±»ï¼Œå®šä¹‰ä¸€ä¸ªæ•°ç»„æ¥å­˜æ”¾ç»„åˆå¯¹è±¡ï¼Œé€šè¿‡é‡å†™æ“ä½œæ–¹æ³•å¯¹å…¶è¿›è¡Œæ“ä½œã€‚

    package com.lyd.demo.compose;
    import com.lyd.demo.composite.OrganizationComponent;
    import java.util.ArrayList;
    import java.util.List;
    /**
     * @Author: lyd
     * @Description: å­¦é™¢ç±»
     * @Date: 2022-08-30
     */
    public class College extends OrganizationComponent {
        // ç»„åˆ Department ç±»
        List<OrganizationComponent> organizationComponents = new ArrayList<OrganizationComponent>();
        public College(String name, String description) {
            super(name, description);
        }
        /**
         * é‡å†™add
         */
        @Override
        public void add(OrganizationComponent organizationComponent) {
            organizationComponents.add(organizationComponent);
        }
        /**
         * é‡å†™remove
         */
        @Override
        public void remove(OrganizationComponent organizationComponent) {
            organizationComponents.add(organizationComponent);
        }
        @Override
        public String getName() {
            return super.getName();
        }
        @Override
        public String getDescription() {
            return super.getDescription();
        }
        // æ‰“å°åŒ…å«å­¦é™¢çš„ä¿¡æ¯
        @Override
        public void print() {
            System.out.println("< " + getName() + " >");
            // å°†æ‰€æœ‰ä¸“ä¸šä¿¡æ¯æ‰“å°å‡ºæ¥
            for (OrganizationComponent o : organizationComponents) {
                o.print();
            }
        }
    }
    

ä¸“ä¸šç±»ï¼šå¶å­èŠ‚ç‚¹ï¼Œæ²¡æœ‰ç»„åˆçš„é›†åˆï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›è¡Œæ“ä½œï¼Œåªéœ€è¦è¿›è¡Œè¾“å‡ºæ‰“å°ã€‚

    package com.lyd.demo.compose;
    import com.lyd.demo.composite.OrganizationComponent;
    /**
     * @Author: lyd
     * @Description: ä¸“ä¸šç±»
     * @Date: 2022-08-30
     */
    public class Department extends OrganizationComponent {
        // å·²ç»æ²¡æœ‰é›†åˆäº†
        public Department(String name, String description) {
            super(name, description);
        }
        @Override
        public String getName() {
            return super.getName();
        }
        @Override
        public String getDescription() {
            return super.getDescription();
        }
        // å¶å­èŠ‚ç‚¹ï¼Œå°±ä¸éœ€è¦addå’Œremove
        @Override
        public void print() {
            System.out.println(getName());
        }
    }
    

### â‘¢ã€æµ‹è¯•

    package com.lyd.demo.test;
    import com.lyd.demo.compose.College;
    import com.lyd.demo.compose.Department;
    import com.lyd.demo.compose.University;
    import com.lyd.demo.composite.OrganizationComponent;
    /**
     * @Author: lyd
     * @Description: æµ‹è¯•
     * @Date: 2022-08-30
     */
    public class ComposeTest {
        public static void main(String[] args) {
            // åˆ›å»ºå¤§å­¦
            OrganizationComponent ZheJiangUniversity = new University("æµ™æ±Ÿå¤§å­¦", "äººæ‰ä¹‹åœ°");
            // åˆ›å»ºå­¦é™¢
            OrganizationComponent ComputerCollege = new College("è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢", "-->è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢");
            OrganizationComponent OpticalCollege = new College("å…‰ç”µç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢", "-->å…‰ç”µç§‘å­¦ä¸å·¥ç¨‹å­¦é™¢");
            // åˆ›å»ºä¸“ä¸š
            Department ComputerDepartment = new Department("è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯", "--è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯");
            Department SoftWareDepartment = new Department("è½¯ä»¶å·¥ç¨‹", "--è½¯ä»¶å·¥ç¨‹");
            Department OpticalDepartment = new Department("å…‰ç”µä¿¡æ¯ç§‘å­¦ä¸å·¥ç¨‹", "--å…‰ç”µä¿¡æ¯ç§‘å­¦ä¸å·¥ç¨‹");
            // æ·»åŠ ä¸“ä¸š
            ComputerCollege.add(ComputerDepartment);
            ComputerCollege.add(SoftWareDepartment);
            OpticalCollege.add(OpticalDepartment);
            // æ·»åŠ å­¦é™¢
            ZheJiangUniversity.add(ComputerCollege);
            ZheJiangUniversity.add(OpticalCollege);
            // æ‰“å°æ‰€æœ‰
            ZheJiangUniversity.print();
            System.out.println("*******************************");
            // æ‰“å°å­¦é™¢
            ComputerCollege.print();
            System.out.println("*******************************");
            // æ‰“å°é™¢ç³»
            ComputerDepartment.print();
        }
    }
    

ç»„åˆå¯ä»¥ç†è§£æˆæ˜¯å±‚å±‚ç›¸å¥—ã€‚  
è¿è¡Œç»“æœï¼š  
![image](https://img2022.cnblogs.com/blog/1954113/202209/1954113-20220912153334955-1244722457.png)

é€šä¿—çš„è®²ï¼Œç»„åˆæ¨¡å¼å°±æ˜¯å°†å¯¹è±¡ç»„åˆåˆ°éç±»ä¸­ï¼Œåœ¨éå­ç±»ä¸­è¿›è¡Œå¯¹ä»–ä»¬çš„æ“ä½œï¼Œæœ‰ç§å±‚å±‚ç›¸å¥—çš„æ„Ÿè§‰ï¼Œå¯ä»¥é€šè¿‡æ‰“æ–­ç‚¹çš„å½¢å¼ä¸€æ­¥ä¸€æ­¥äº†è§£ã€‚

ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¯èƒ½æœ‰äº›è¯­è¨€ä¸æ˜¯å¾ˆé€šç•…ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ä¸€é”®ä¸‰è¿å“¦ï¼ğŸ‘