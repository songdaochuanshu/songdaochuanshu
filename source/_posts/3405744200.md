---
layout: post
title: "æˆ‘æ²¡èƒ½å®ç°å§‹ç»ˆåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œ task"
date: "2023-04-03T01:04:39.376Z"
---
æˆ‘æ²¡èƒ½å®ç°å§‹ç»ˆåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œ task
====================

å‰æ–‡æˆ‘ä»¬æ€»ç»“äº†åœ¨ä½¿ç”¨å¸¸é©»ä»»åŠ¡å®ç°å¸¸é©»çº¿ç¨‹æ—¶ï¼Œåº”è¯¥æ³¨æ„çš„äº‹é¡¹ã€‚ä½†æ˜¯æˆ‘ä»¬æœ€ç»ˆæ²¡æœ‰æåˆ°å¦‚ä½•åœ¨å¤„ç†å¯¹äºå¸¦æœ‰å¼‚æ­¥ä»£ç çš„åŠæ³•ã€‚æœ¬ç¯‡å°†æ¥å—ç¬”è€…å¯¹äºè¯¥å†…å®¹çš„æ€»ç»“ã€‚

å‰æ–‡æˆ‘ä»¬æ€»ç»“äº†åœ¨ä½¿ç”¨å¸¸é©»ä»»åŠ¡å®ç°å¸¸é©»çº¿ç¨‹æ—¶ï¼Œåº”è¯¥æ³¨æ„çš„äº‹é¡¹ã€‚ä½†æ˜¯æˆ‘ä»¬æœ€ç»ˆæ²¡æœ‰æåˆ°å¦‚ä½•åœ¨å¤„ç†å¯¹äºå¸¦æœ‰å¼‚æ­¥ä»£ç çš„åŠæ³•ã€‚æœ¬ç¯‡å°†æ¥å—ç¬”è€…å¯¹äºè¯¥å†…å®¹çš„æ€»ç»“ã€‚

å¦‚ä½•è¯†åˆ«å½“å‰ä»£ç è·‘åœ¨ä»€ä¹ˆçº¿ç¨‹ä¸Š
---------------

ä¸€åˆ‡å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ä½¿ç”¨ä¸€ç§ç®€å•çš„æ–¹å¼æ¥è¯†åˆ«å½“å‰ä»£ç è¿è¡Œåœ¨å“ªç§çº¿ç¨‹ä¸Šã€‚

æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯æ‰“å°å½“å‰çº¿ç¨‹åç§°å’Œçº¿ç¨‹IDæ¥è¯†åˆ«ã€‚

    private static void ShowCurrentThread(string work)
    {
        Console.WriteLine($"{work} - {Thread.CurrentThread.Name} - {Thread.CurrentThread.ManagedThreadId}");
    }
    

é€šè¿‡è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸å®¹æ˜“çš„è¯†åˆ«ä¸‰ç§ä¸åŒæƒ…å†µä¸‹çš„çº¿ç¨‹ä¿¡æ¯ã€‚

    [Test]
    public void ShowThreadMessage()
    {
        new Thread(() => { ShowCurrentThread("Custom thread work"); })
        {
            IsBackground = true,
            Name = "Custom thread"
        }.Start();
    
        Task.Run(() => { ShowCurrentThread("Task.Run work"); });
        Task.Factory.StartNew(() => { ShowCurrentThread("Task.Factory.StartNew work"); },
            TaskCreationOptions.LongRunning);
    
        Thread.Sleep(TimeSpan.FromSeconds(1));
    }
    // output
    // Task.Factory.StartNew work - .NET Long Running Task - 17
    // Custom thread work - Custom thread - 16
    // Task.Run work - .NET ThreadPool Worker - 12
    

åˆ†åˆ«ä¸ºï¼š

*   è‡ªå®šä¹‰çº¿ç¨‹ Custom thread
*   çº¿ç¨‹æ± çº¿ç¨‹ .NET ThreadPool Worker
*   ç”± Task.Factory.StartNew åˆ›å»ºçš„æ–°çº¿ç¨‹ .NET Long Running Task

å› æ­¤ï¼Œç»“åˆæˆ‘ä»¬ä¹‹å‰æ˜™èŠ±çº¿ç¨‹çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥éå¸¸ç®€å•çš„çœ‹å‡ºçº¿ç¨‹çš„åˆ‡æ¢æƒ…å†µï¼š

    [Test]
    public void ShortThread()
    {
        new Thread(async () =>
        {
            ShowCurrentThread("before await");
            await Task.Delay(TimeSpan.FromSeconds(0.5));
            ShowCurrentThread("after await");
        })
        {
            IsBackground = true,
            Name = "Custom thread"
        }.Start();
        Thread.Sleep(TimeSpan.FromSeconds(1));
    }
    // output
    // before await - Custom thread - 16
    // after await - .NET ThreadPool Worker - 6
    

æˆ‘ä»¬å¸Œæœ›åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œ Task ä»£ç 
---------------------

ä¹‹å‰æˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œæ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹å¹¶æ§åˆ¶çº¿ç¨‹çš„è¿è¡Œï¼Œå¯ä»¥ç¡®ä¿è‡ªå·±çš„ä»£ç ä¸ä¼šäºçº¿ç¨‹æ± çº¿ç¨‹äº§ç”Ÿç«äº‰ï¼Œä»è€Œä½¿å¾—æˆ‘ä»¬çš„å¸¸é©»ä»»åŠ¡èƒ½å¤Ÿç¨³å®šçš„è§¦å‘ã€‚

å½“æ—¶ç”¨äºæ¼”ç¤ºçš„é”™è¯¯ç¤ºä¾‹æ˜¯è¿™æ ·çš„ï¼š

    [Test]
    public void ThreadWaitTask()
    {
        new Thread(async () =>
        {
            ShowCurrentThread("before await");
            Task.Run(() =>
            {
                ShowCurrentThread("inner task");
            }).Wait();
            ShowCurrentThread("after await");
        })
        {
            IsBackground = true,
            Name = "Custom thread"
        }.Start();
        Thread.Sleep(TimeSpan.FromSeconds(1));
    }
    // output
    // before await - Custom thread - 16
    // inner task - .NET ThreadPool Worker - 13
    // after await - Custom thread - 16
    

è¿™ä¸ªç¤ºä¾‹å¯ä»¥æ˜æ˜¾çš„çœ‹å‡ºï¼Œä¸­é—´çš„éƒ¨åˆ†ä»£ç æ˜¯è¿è¡Œåœ¨çº¿ç¨‹æ± çš„ã€‚è¿™ç§åšæ³•ä¼šåœ¨çº¿ç¨‹æ± èµ„æºç´§å¼ çš„æ—¶å€™ï¼Œå¯¼è‡´æˆ‘ä»¬çš„å¸¸é©»ä»»åŠ¡æ— æ³•è§¦å‘ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹å¼æ¥ç¡®ä¿æˆ‘ä»¬çš„ä»£ç åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œã€‚

é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æä¸€äº›æƒ³æ³•å’Œæ•ˆæœã€‚

åŠ é…ï¼åŠ é…ï¼åŠ é…ï¼
---------

æˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œå®é™…ä¸Šï¼Œå¸¸é©»ä»»åŠ¡ä¸èƒ½ç¨³å®šè§¦å‘æ˜¯å› ä¸º Task ä¼šåœ¨çº¿ç¨‹æ± ä¸­è¿è¡Œã€‚é‚£ä¹ˆå¢åŠ çº¿ç¨‹æ± çš„å®¹é‡è‡ªç„¶å°±æ˜¯æœ€ç›´æ¥è§£å†³é«˜å³°çš„åšæ³•ã€‚ å› æ­¤ï¼Œå¦‚æœæ¡ä»¶å…è®¸çš„è¯ï¼Œç›´æ¥å¢åŠ  CPU æ ¸å¿ƒæ•°å®é™…ä¸Šæ˜¯æœ€ä¸ºæœ‰æ•ˆå’Œç®€å•çš„æ–¹å¼ã€‚

ä¸è¿‡è¿™ç§åšæ³•å¹¶ä¸é€‚ç”¨äºä¸€äº›ç±»åº“çš„ç¼–å†™è€…ã€‚æ¯”å¦‚ï¼Œä½ åœ¨ç¼–å†™æ—¥å¿—ç±»åº“ï¼Œé‚£ä¹ˆå…¶å®æ— æ³•æ¬²çŸ¥ç”¨æˆ·æ‰€å¤„çš„ç¯å¢ƒã€‚å¹¶ä¸”æ­£å¦‚å¤§å®¶æ‰€è§ï¼Œå¸‚é¢ä¸Šå‡ ä¹æ²¡æœ‰æ—¥å¿—ç±»åº“ä¸­ç”±è¯´æ˜è®©ç”¨æˆ·åªèƒ½åœ¨ä¸€å®šçš„ CPU æ ¸å¿ƒæ•°ä¸‹ä½¿ç”¨ã€‚

å› æ­¤ï¼Œå¦‚æœæ‚¨çš„å¸¸é©»ä»»åŠ¡æ˜¯åœ¨ç±»åº“ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´ä¸ºé€šç”¨çš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

è€ƒè™‘ä½¿ç”¨åŒæ­¥é‡è½½
--------

åœ¨ Task å‡ºç°ä¹‹åï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½ä¼šè€ƒè™‘ä½¿ç”¨å¼‚æ­¥é‡è½½çš„æ–¹æ³•ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯é”™è¯¯çš„åšæ³•ï¼Œå› ä¸ºè¿™å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„ä»£ç æ›´åŠ é«˜æ•ˆï¼Œæå‡ç³»ç»Ÿçš„ååé‡ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³è¦è®© Thread ç¨³å®šçš„åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œï¼Œé‚£ä¹ˆä½ éœ€è¦è€ƒè™‘ä½¿ç”¨åŒæ­¥é‡è½½çš„æ–¹æ³•ã€‚é€šè¿‡åŒæ­¥é‡è½½æ–¹æ³•ï¼Œæˆ‘ä»¬çš„ä»£ç å°†ä¸ä¼šå‡ºç°çº¿ç¨‹åˆ‡æ¢åˆ°çº¿ç¨‹æ± çš„æƒ…å†µã€‚è‡ªç„¶ä¹Ÿå°±å®ç°äº†æˆ‘ä»¬çš„ç›®çš„ã€‚

æ€»æ˜¯ä½¿ç”¨ TaskCreationOptions.LongRunning
------------------------------------

è¿™ä¸ªåŠæ³•å…¶å®å¾ˆä¸å®é™…ã€‚å› ä¸ºä»»ä½•ä¸€å±‚æ²¡æœ‰æŒ‡å®šï¼Œéƒ½ä¼šå°†ä»»åŠ¡åˆ‡æ¢åˆ°çº¿ç¨‹æ± ä¸­ã€‚

    [Test]
    public void AlwaysLogRunning()
    {
        new Thread(async () =>
        {
            ShowCurrentThread("before await");
            Task.Factory.StartNew(() =>
            {
                ShowCurrentThread("LongRunning task");
                Task.Run(() => { ShowCurrentThread("inner task"); }).Wait();
            }, TaskCreationOptions.LongRunning).Wait();
            ShowCurrentThread("after await");
        })
        {
            IsBackground = true,
            Name = "Custom thread"
        }.Start();
        Thread.Sleep(TimeSpan.FromSeconds(1));
    }
    // output
    // before await - Custom thread - 16
    // LongRunning task - .NET Long Running Task - 17
    // inner task - .NET ThreadPool Worker - 7
    // after await - Custom thread - 16
    

æ‰€ä»¥è¯´ï¼Œè¿™ä¸ªåŠæ³•å¯ä»¥ç”¨ã€‚ä½†å…¶å®å¾ˆæ€ªã€‚

è‡ªå®šä¹‰ Scheduler
-------------

è¿™æ˜¯ä¸€ç§å¯è¡Œï¼Œä½†æ˜¯éå¸¸å›°éš¾çš„åšæ³•ã€‚è™½ç„¶è¯´è‡ªå®šä¹‰ä¸ªç®€å•çš„ Scheduler ä¹Ÿä¸æ˜¯å¾ˆéš¾ï¼Œåªéœ€è¦å®ç°å‡ ä¸ªç®€å•çš„æ–¹æ³•ã€‚ä½†è¦æŒ‰ç…§æˆ‘ä»¬çš„éœ€æ±‚æ¥å®ç°è¿™ä¸ª Scheduler å¹¶ä¸ç®€å•ã€‚

æ¯”å¦‚æˆ‘ä»¬å°è¯•å®ç°ä¸€ä¸ªè¿™æ ·çš„ Schedulerï¼š

**æ³¨æ„ï¼šè¿™ä¸ª Scheduler å¹¶ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚**

    class MyScheduler : TaskScheduler
    {
        private readonly Thread _thread;
        private readonly ConcurrentQueue<Task> _tasks = new();
    
        public MyScheduler()
        {
            _thread = new Thread(() =>
            {
                while (true)
                {
                    while (_tasks.TryDequeue(out var task))
                    {
                        TryExecuteTask(task);
                    }
                }
            })
            {
                IsBackground = true,
                Name = "MyScheduler"
            };
            _thread.Start();
        }
    
        protected override IEnumerable<Task> GetScheduledTasks()
        {
            return _tasks;
        }
    
        protected override void QueueTask(Task task)
        {
            _tasks.Enqueue(task);
        }
    
        protected override bool TryExecuteTaskInline(Task task, bool taskWasPreviouslyQueued)
        {
            return false;
        }
    }
    

ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æœŸå¾…é€šè¿‡ä¸€ä¸ªå•ä¸€çš„çº¿ç¨‹æ¥æ‰§è¡Œæ‰€æœ‰çš„ä»»åŠ¡ã€‚ä½†å®é™…ä¸Šå®ƒåè€Œæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ­»é”æ¼”ç¤ºè£…ç½®ã€‚

æˆ‘ä»¬è®¾æƒ³è¿è¡Œä¸‹é¢è¿™æ®µä»£ç ï¼š

    [Test]
    public async Task TestLongRunningConfigureAwait()
    {
        var scheduler = new MyScheduler();
        await Task.Factory.StartNew(() =>
        {
            ShowCurrentThread("BeforeWait");
            Task.Factory
                .StartNew(() =>
                    {
                        ShowCurrentThread("AfterWait");
                    }
                    , CancellationToken.None, TaskCreationOptions.None, scheduler)
                .Wait();
            ShowCurrentThread("AfterWait");
        }, CancellationToken.None, TaskCreationOptions.None, scheduler);
    }
    

è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æœŸå¾…ï¼Œåœ¨ä¸€ä¸ª Task ä¸­è¿è¡Œå¦å¤–ä¸€ä¸ª Taskã€‚ä½†å®é™…ä¸Šï¼Œè¿™æ®µä»£ç ä¼šæ­»é”ã€‚

å› ä¸ºï¼Œæˆ‘ä»¬çš„ MyScheduler ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªæ­»å¾ªç¯ä¸­ï¼Œä¸æ–­çš„ä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çš„ä»»åŠ¡ä¸­ï¼Œåˆä¼šè°ƒç”¨ Wait æ–¹æ³•ã€‚

æˆ‘ä»¬ä¸å¦¨è®¾æƒ³è¿™ä¸ªçº¿ç¨‹å°±æ˜¯æˆ‘ä»¬è‡ªå·±ã€‚

1.  é¦–å…ˆï¼Œè€æ¿äº¤ä»£ç»™ä½ ä¸€ä»¶ä»»åŠ¡ï¼Œä½ æŠŠå®ƒæ”¾åˆ°é˜Ÿåˆ—ä¸­ã€‚
2.  ç„¶åä½ å¼€å§‹æ‰§è¡Œè¿™ä»¶ä»»åŠ¡ï¼Œæ‰§è¡Œåˆ°ä¸€åŠå‘ç°ï¼Œä½ éœ€è¦ç­‰å¾…ç¬¬äºŒä»¶ä»»åŠ¡çš„æ‰§è¡Œç»“æœã€‚å› æ­¤ä½ åœ¨è¿™é‡Œç­‰ç€ã€‚
3.  ä½†æ˜¯ç¬¬äºŒä»¶ä»»åŠ¡è¿™ä¸ªæ—¶å€™ä¹Ÿå¡åˆ°äº†ä½ çš„é˜Ÿåˆ—ä¸­ã€‚
4.  è¿™ä¸‹å¥½äº†ï¼Œä½ æ‰‹å¤´çš„ä»»åŠ¡åœ¨ç­‰å¾…ä½ é˜Ÿåˆ—é‡Œé¢çš„ä»»åŠ¡å®Œæˆã€‚è€Œä½ é˜Ÿåˆ—çš„ä»»åŠ¡åªæœ‰ä½ æ‰èƒ½å®Œæˆã€‚
5.  å®Œç¾å¡æ­»ã€‚

å› æ­¤ï¼Œå…¶å®å®é™…ä¸Šæˆ‘ä»¬éœ€è¦åœ¨ Wait çš„æ—¶å€™é€šçŸ¥å½“å‰çº¿ç¨‹ï¼Œæ­¤æ—¶çº¿ç¨‹è¢« Block äº†ï¼Œç„¶åè½¬è€Œä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡æ‰§è¡Œã€‚åœ¨ Task äº ThreadPool çš„é…åˆä¸­ï¼Œæ˜¯å­˜åœ¨è¿™æ ·çš„æœºåˆ¶çš„ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è‡ªå·±å®ç°çš„ MyScheduler å¹¶ä¸èƒ½ä¸ Task äº§ç”Ÿè¿™ç§é…åˆã€‚å› æ­¤éœ€è¦è€ƒè™‘è‡ªå®šä¹‰ä¸€ä¸ª Taskã€‚è·Ÿè¿›ä¸€æ­¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ AsyncMethodBuilder æ¥å®ç°å…¨å¥—çš„è‡ªå®šä¹‰ã€‚

æ˜¾ç„¶è€…æ˜¯ä¸€é¡¹ç›¸å¯¹é«˜çº§å†…å®¹ï¼ŒæœŸå¾…äº†è§£çš„è¯»è€…ï¼Œå¯ä»¥é€šè¿‡ [UniTask](https://github.com/Cysharp/UniTask)1 é¡¹ç›®æ¥äº†è§£å¦‚ä½•å®ç°è¿™æ ·çš„å…¨å¥—è‡ªå®šä¹‰ã€‚

æ€»ç»“
--

å¦‚æœä½ æœŸæœ›åœ¨å¸¸é©»çº¿ç¨‹èƒ½å¤Ÿç¨³å®šçš„è¿è¡Œä½ çš„ä»»åŠ¡ã€‚é‚£ä¹ˆï¼š

1.  åŠ é…ï¼Œä»¥é¿å…çº¿ç¨‹æ± ä¸å¤Ÿç”¨
2.  è€ƒè™‘åœ¨è¿™éƒ¨åˆ†ä»£ç ä¸­ä½¿ç”¨åŒæ­¥ä»£ç 
3.  å¯ä»¥å­¦ä¹ è‡ªå®šä¹‰ Task ç³»ç»Ÿ

å‚è€ƒ
--

*   [.NET Task æ­ç§˜ï¼ˆ2ï¼‰ï¼šTask çš„å›è°ƒæ‰§è¡Œä¸ await](https://www.cnblogs.com/eventhorizon/p/15912383.html)2
*   [Task](https://threads.whuanle.cn/3.task/)3
*   [TaskCreationOptions](https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskcreationoptions?view=net-7.0&WT.mc_id=DX-MVP-5003606)4
*   [è¿™æ ·åœ¨ C# ä½¿ç”¨ LongRunningTask æ˜¯é”™çš„](https://www.newbe.pro/Others/0x026-This-is-the-wrong-way-to-use-LongRunnigTask-in-csharp/)5
*   [async ä¸ Thread çš„é”™è¯¯ç»“åˆ](https://www.newbe.pro/Others/0x027-error-when-using-async-with-thread/)6
*   [å®ç°å¸¸é©»ä»»åŠ¡é™¤äº†é¿å…æ˜™èŠ±çº¿ç¨‹ï¼Œè¿˜éœ€è¦é¿å…é‡è¿”çº¿ç¨‹æ± ](https://www.newbe.pro/Others/0x027-error-when-using-async-with-thread/)7

æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœè§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œä¸å¦¨ç‚¹å‡»æ¨èğŸ‘æˆ–è€…åœ¨è¯„è®ºåŒºç•™ä¸‹ Markï¼Œè®©æ›´å¤šçš„äººå¯ä»¥çœ‹åˆ°ã€‚

> æ¬¢è¿å…³æ³¨ä½œè€…çš„å¾®ä¿¡å…¬ä¼—å·â€œnewbeæŠ€æœ¯ä¸“æ â€ï¼Œè·å–æ›´å¤šæŠ€æœ¯å†…å®¹ã€‚ ![å…³æ³¨å¾®ä¿¡å…¬ä¼—å·â€œnewbeæŠ€æœ¯ä¸“æ â€](https://www.newbe.pro/images/weixin_public_qrcode.png)

*   æœ¬æ–‡ä½œè€…ï¼š [newbe36524](https://www.newbe.pro/)
*   æœ¬æ–‡é“¾æ¥ï¼š [https://www.newbe.pro/Others/0x029-I-can-not-manage-to-always-run-task-on-one-thread/](https://www.newbe.pro/Others/0x029-I-can-not-manage-to-always-run-task-on-one-thread/)
*   ç‰ˆæƒå£°æ˜ï¼š æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ BY-NC-SA è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼

* * *

1.  https://github.com/Cysharp/UniTaskâ†©
    
2.  https://www.cnblogs.com/eventhorizon/p/15912383.htmlâ†©
    
3.  https://threads.whuanle.cn/3.task/â†©
    
4.  https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.taskcreationoptions?view=net-7.0&WT.mc\_id=DX-MVP-5003606â†©
    
5.  https://www.newbe.pro/Others/0x026-This-is-the-wrong-way-to-use-LongRunnigTask-in-csharp/â†©
    
6.  https://www.newbe.pro/Others/0x027-error-when-using-async-with-thread/â†©
    
7.  https://www.newbe.pro/Others/0x028-avoid-return-to-threadpool-in-longrunning-taskâ†©