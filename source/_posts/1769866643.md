---
layout: post
title: "CoaXPress 是如何只用一条线缆实现双向传输和供电的"
date: "2022-05-25T08:24:59.681Z"
---
CoaXPress 是如何只用一条线缆实现双向传输和供电的
=============================

这是个很有意思的事情，CoaXPress的全双工双向数据传输、且供电只需要一条同轴线缆，这个原理对其它串行接口的设计是非常有参考价值的，尤其是对线缆长度、数量有严格要求的场合，一条同轴线缆走天下，不要太美好！

![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525132855012-1627134686.png)

整体方案
====

![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525133308498-1573597149.png)

对图中出现的术语做一下解释：

*   Device 指camera
*   HOST 指图像采集设备
*   PRU 指power recieve unit，只在需要power on cable功能的时候才需要
*   PTU指power transfer unit，只在需要power on cable功能的时候才需要,对应是将12V电源升压到24V再到同轴线缆，会有人问为什么用24V而不是直接12V，这是因为要满足13W的功耗，12V对应的电流太大，传输线的消耗会更大，那为什么不更高呢？更高会显著增加电路成本，24V是一个折中的较好的选择
*   ΦD (包含高速串行发送器和低速串行接收器)
*   DT，Device Transceiver 用于向cable上发送高速数据、接收低速数据，这2个动作对于DT来说是同时的
*   Cd 指Device端的电容，用于滤除直流信号，完成AC耦合；
*   Zp 指电感滤波器，放在电源和数据中间，起到滤波的作用，其阻抗应当远大于线缆对应的75欧姆特征阻抗，建议取值11.5 µH (± 30 %)
*   HT HOST Transceiver 用于接收cable上高速数据、发送低速数据
*   ΦH (包含高速串行接收器和低速串行发送器)
*   Tp1，Tp2，Tp3，Tp4指电信号测试点，用于方便说明这些位置的电信号要求；

上图中的信号传输，可以对照下图理解，下图中的高速信号对应上图中的"High Speed downconnection" , 低速数据对应“Low speed upconnection”

 ,

![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525133744709-243236097.png)

 那么DT,HT电路具体如下实现呢? 我们调研了一下产业界的做法，目前只有Mecrochip有对应的集成电路芯片，对于CXP1.1，使用的是EQCO62X20系列，CXP2.1使用的是EQCO125X40系列，下图给出一个CXP1.1对应的实现框图

![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525155901252-1868051212.png)

高速信号电气要求
--------

### High Speed Connection Cable Driver 

下图是高速信号发送端在Tp2测点位置对应的电气眼图，CXP协议定义了该位置在发送测试数据时对应的电气标称值及其范围，比如信号幅度、上升下降时间、抖动

![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525143846283-823031791.png)

下表给出了对应上图中的电气规格，高速信号在75欧姆阻抗时对应的信号幅度标称600mV，这个电压是通过DT电路直接将差分信号的P给到同轴线缆，N给到地得到的。

 ![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525150150458-1203034125.png)

### High Speed Connection Cable Receiver

接收端需要放置一个HT ，即equalization电路，用来补偿线缆在不同速率下的衰减，补偿可以根据下表中的标称参考来做。

![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525152505170-622614990.png)

低速信号电气要求
--------

### 低速信号的基线漂移

由于HOST端的Zp引入的高通滤波，这会导致在低速信号(规定的20.83Mbps和41.6Mbps速率)发送时造成基线offset的偏移，即信号的高低电平会有漂移，这里虽然增大Zp值可以消除这个问题，但是出于尺寸的考虑，建议选用 11.5 µH (± 30 %)

![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525153433315-1020692574.png)

###  Low Speed Connection Cable Driver

下图是低速数据传输时，对应Tp3测点位置的测试数据电气眼图

 ![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525154137751-2138471117.png)

上述眼图对应的电气规格如下，固定了幅度、上升时间下降时间、抖动，其中幅度的典型值在130mV，这和高速信号的幅度不一样，主要是为了避免相互干扰，便于区分

![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525154232788-2041818244.png)

###  Low Speed Connection Cable Receiver

这部分需要注意，低速信号需要稳定至少10ms，当高速信号要被使能或者修改bit速率时

![](https://img2022.cnblogs.com/blog/2747207/202205/2747207-20220525154803584-2079455016.png)

FPGA, PCIe,ZYNQ, C#,C++ 2897551649@qq.com