---
layout: post
title: "CentOS 7.9 安装 MySQL 5.7.35"
date: "2022-10-06T17:34:18.694Z"
---
CentOS 7.9 安装 MySQL 5.7.35
==========================

### CentOS 7.9 安装 MySQL 5.7.35

* * *

**1** 下载地址：[https://downloads.mysql.com/archives/community/](https://downloads.mysql.com/archives/community/)

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006222645013-1113179780.png)

**2** mysql5.7.35 安装包上传到linux服务器

使用Xftp 或者wget在服务器上下载

    # 推荐使用wget
    yun install -y wget
    wget https://downloads.mysql.com/archives/get/p/23/file/mysql-5.7.35-linux-glibc2.12-x86_64.tar.gz

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006230424219-1293794319.png)

**3** 检查系统是否安装过mysql，如果没有略过此步骤

    [root@ecs-65685 ~]# rpm -qa|grep mysql

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006223705802-2008513825.png)

没有任何输出说明没有安装过mysql！

如果系统自带mysql，查询所有mysql 对应的文件夹，全部删除，使用命令：

    whereis mysql
    find / -name mysql
    rpm -qa| grep mysql

来查看所有mysql关联的目录，然后全部删除。

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006230800053-22354313.png)

**4** 卸载CentOS7系统自带mariadb

查看系统自带的Mariadb，没有略过此步骤

    rpm -qa|grep mariadb

卸载系统自带的Mariadb

因为centos7自带的mariadb 与mysql冲突，所以需要先卸载

    yum remove mariadb-libs -y

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006232503176-1841128279.png)

**5** 删除etc目录下的my.cnf

查看 /etc 目录下有没有 my.cnf 文件，如果有，删除：

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006232901535-2005927605.png)

**6** 创建用户和组

    useradd mysqlxyz -s /sbin/nologin
    id mysqlxyz

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006230943087-1468872040.png)

### 二、安装mysql5.7步骤

* * *

**1** 创建软件目录

    mkdir -p /opt/mysqlxyz/database

**2** 创建数据目录

    mkdir -p /opt/mysqlxyz/data

**3** 创建日志目录

    mkdir -p /opt/mysqlxyz/binlog

**4** 设置权限

    chown -R mysqlxyz.mysqlxyz /opt/mysqlxyz/database /opt/mysqlxyz/data /opt/mysqlxyz/binlog

 ![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006233609434-390600679.png)

**5** 解压安装mysql安装包到 /opt/mysqlxyz/database/ 目录下

tar -zxvf mysql-5.7.35-linux-glibc2.12-x86\_64.tar.gz -C /opt/mysqlxyz/database/

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006233426474-124274837.png)

 **6** 名字太长，修改为 mysql-5.7.35

    cd /opt/mysqlxyz/database
    mv mysql-5.7.35-linux-glibc2.12-x86_64/ mysql-5.7.35

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006234431386-1383534060.png)

**7** 更改mysql5.7.35 目录下所有文件夹所属的用户组、用户以及权限

    cd /opt/mysqlxyz/database/mysql-5.7.35
    chown -R mysqlxyz. *

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006234708082-1709106401.png)

**8** 设置环境变量

    vim /etc/profile
    export PATH=$PATH:/opt/mysqlxyz/database/mysql-5.7.35/bin
    source /etc/profile

**9** 查看版本

    mysql -V

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221006235547369-729329943.png)

**10** 初始化系统库表（带有临时密码）

    mysqld --initialize --user=mysqlxyz --basedir=/opt/mysqlxyz/database/mysql-5.7.35 --datadir=/opt/mysqlxyz/data

**![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221007003906437-1996622458.png)**

**11** 初始化系统库表

    mysqld --initialize-insecure --user=mysqlxyz --basedir=/opt/mysqlxyz/database/mysql-5.7.35 --datadir=/opt/mysqlxyz/data

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221007000005411-986996188.png)

联网状态或者有yum源可以直接安装缺失的包文件：

    yum install libncurses* -y

再次执行

    cd /opt/mysqlxyz/data
    mysqld --initialize-insecure --user=mysqlxyz --basedir=/opt/mysqlxyz/database/mysql-5.7.35 --datadir=/opt/mysqlxyz/data

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221007001013994-1404195688.png)

12 配置文件设置  /etc/my.cnf

    cat>/etc/my.cnf<<EOF
    [mysqld]
    user=mysqlxyz
    basedir=/opt/mysqlxyz/database/mysql-5.7.35
    datadir=/opt/mysqlxyz/data
    port=3306
    socket=/tmp/mysql57.sock
    server_id=6
    [mysql]
    socket=/tmp/mysql57.sock
    [client]
    socket=/tmp/mysql57.sock
    EOF

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221007011806071-1753357355.png)

**13** 启动脚本

    cd /opt/mysqlxyz/database/mysql-5.7.35/support-files/
    cp mysql.server /etc/init.d/mysqld
    chkconfig --add mysqld
    systemctl start mysqld

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221007004303849-553782094.png)

**14** 使用 mysqladmin 修改密码

     mysqladmin -uroot -p password iyuyi@gamil.com
     mysql -uroot -p

![](https://img2022.cnblogs.com/blog/2412541/202210/2412541-20221007012458064-1170580495.png)

CnetOS8安装mysql之后，使用mysql -uroot -p时遇到以下问题：

mysql: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory

联网状态或者有yum源可以直接安装缺失的包文件：

yum install libncurses\* -y