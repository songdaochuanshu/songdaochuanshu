---
layout: post
title: "äº‘å¼€å‘ä¸­çš„æˆ˜æ–—æœº Lafï¼Œè®©ä½ åƒå†™åšå®¢ä¸€æ ·å†™ä»£ç "
date: "2022-06-02T14:21:57.232Z"
---
äº‘å¼€å‘ä¸­çš„æˆ˜æ–—æœº Lafï¼Œè®©ä½ åƒå†™åšå®¢ä¸€æ ·å†™ä»£ç 
========================

å„ä½äº‘åŸç”Ÿæ¬ç –å¸ˆ and PPT æ¶æ„å¸ˆï¼Œä½ ä»¬æœ‰æ²¡æœ‰æƒ³è¿‡åƒå†™æ–‡ç« ä¸€æ ·æ–¹ä¾¿åœ°å†™ä»£ç å‘¢ï¼Ÿ

**æ€æ ·æ‰èƒ½åƒå†™æ–‡ç« ä¸€æ ·å†™ä»£ç ï¼Ÿ** ç†æƒ³çš„éœ€æ±‚åº”è¯¥æ˜¯å¯ä»¥åœ¨çº¿ç¼–å†™ã€è°ƒè¯•å‡½æ•°ï¼Œä¸ç”¨é‡å¯æœåŠ¡ï¼Œéšæ—¶éšåœ°åœ¨ Web ä¸ŠæŸ¥çœ‹å‡½æ•°çš„è¿è¡Œæ—¥å¿—ï¼Œæ— éœ€è¿æ¥æœåŠ¡å™¨ï¼Œæ— éœ€æŠ˜è…¾æ•°æ®åº“ã€å¯¹è±¡å­˜å‚¨ã€Nginx ç­‰ï¼Œå¯ä»¥**éšæ—¶éšåœ°ä¸Šçº¿åº”ç”¨**ï¼Œæ‹›ä¹‹å³æ¥ï¼ŒæŒ¥ä¹‹å³å»ï¼Œéšæ‰‹å‘å¸ƒï¼

è¿™æ—¶å€™æ‡‚ç‹ä¸Šçº¿äº†ï¼Œå¥½å®¶ä¼™ï¼Œè¿™ä¸å°±æ˜¯ Serverless å˜›ï¼ŒServerless çš„æ„¿æ™¯æ˜¯ç”¨æˆ·åªéœ€ä¸“æ³¨å¼€å‘æ„å›¾ï¼Œç¼–å†™å‡½æ•°ä»£ç ï¼Œå¹¶ä¸Šä¼ åˆ°ä»£ç ä»“åº“ï¼Œå…¶ä»–çš„ä¸œè¥¿ä¸éœ€è¦å…³å¿ƒï¼ŒServerless å¹³å°ä¼šè‡ªåŠ¨åˆ†é…è®¡ç®—èµ„æºï¼Œå¹¶æŒ‰éœ€è¿è¡Œå‡½æ•°ã€‚

**ä½ æ‡‚çš„çœŸå¤šï¼Œå¯æƒœå•Šï¼Œä»…æœ‰ Serverless è¿˜æ»¡è¶³ä¸äº†ä¸Šè¿°éœ€æ±‚ã€‚**

è¦æƒ³åƒå†™æ–‡ç« ä¸€æ ·å†™ä»£ç ï¼Œé™¤äº†éœ€è¦ Serverless æ¥æä¾›å‡½æ•°è®¡ç®—æœåŠ¡ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä»¥ä¸‹å‡ ä¸ªå¿…å¤‡æ¡ä»¶ï¼š

*   äº‘æ•°æ®åº“ï¼šä¸ºåº”ç”¨å¼€å‘æä¾›å¼€ç®±å³ç”¨çš„æ•°æ®åº“æœåŠ¡ï¼›
*   äº‘å­˜å‚¨ï¼šä¸ºåº”ç”¨å¼€å‘æä¾›ä¸“ä¸šçš„æ–‡ä»¶å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œå…¼å®¹ S3 å’Œå…¶ä»–å­˜å‚¨æœåŠ¡æ¥å£ï¼›
*   WebIDEï¼šåœ¨çº¿å†™ä»£ç ï¼Œå®Œå–„çš„ç±»å‹æç¤ºã€ä»£ç è‡ªåŠ¨å®Œæˆï¼Œéšæ‰‹å‘å¸ƒä¸Šçº¿ï¼

æ‡‚ç‹åˆä¸Šçº¿äº†ï¼Œè¿™ä¸ªæˆ‘ä¹Ÿæ‡‚ï¼Œè…¾è®¯äº‘å¼€å‘ã€Google Firebase ä»¥åŠ UniCloud å°±æä¾›è¿™æ ·çš„åŠŸèƒ½ã€‚

å¦‚æœæˆ‘å‘Šè¯‰ä½ ç°åœ¨æœ‰ä¸€ä¸ªå¹³å°å·²ç»ä¿±å¤‡äº†ä¸Šè¿°çš„æ‰€æœ‰æ¡ä»¶ï¼Œè€Œä¸”**å®Œå…¨å¼€æº**ï¼Œæ¯ä¸ªå¼€å‘å›¢é˜Ÿéƒ½å¯ä»¥éšæ—¶æ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„äº‘å¼€å‘å¹³å°ï¼Œä½ ä¼šä¸ä¼šå†…å¿ƒç‹‚å–œï¼Ÿ

æ˜¯çš„ï¼Œè¿™ä¸ªå¹³å°å°±æ˜¯ Lafã€‚

![åº”ç”¨åˆ—è¡¨](https://jsdelivr.icloudnative.io/gh/yangchuansheng/imghosting4@main/uPic/2022-05-15-17-38-lxSM4d.jpg)

**äººç”Ÿè‹¦çŸ­ï¼Œå‰ç«¯ç”¨ Lafï¼Œåç«¯ç”¨ Lafï¼Œäº‘å¼€å‘ç”¨æˆ·ç”¨ Lafï¼Œç‹¬ç«‹å¼€å‘è€…ç”¨ Lafï¼Œåˆåˆ›å›¢é˜Ÿç”¨ Lafï¼Œæˆ‘ä¹Ÿç”¨ Laf**ã€‚ä¸Šé“¾æ¥ğŸ”—ï¼š

*   **[https://github.com/labring/laf](https://github.com/labring/laf)**

* * *

å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒLaf åœ¨ä¸Šå‘¨äº”ä¸€å¤©å†… Star æ•°é‡å¢é•¿äº†è¿‘ 300 ä¸ªï¼Œå¹¶ä¸”åç»­è¿ç»­å‡ å¤©çš„ Star æ•°é‡å‘ˆå‚ç›´ä¸Šå‡ï¼Œç®€ç›´å°±æ˜¯ç®€ç›´äº†ã€‚

![](https://jsdelivr.icloudnative.io/gh/yangchuansheng/imghosting4@main/uPic/2022-05-15-19-34-S9wJrv.png)

ğŸ‘€ Laf æ˜¯ä»€ä¹ˆï¼Ÿ
-----------

Laf æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé›†ã€Œå‡½æ•°è®¡ç®—ã€ã€ã€Œæ•°æ®åº“ã€ã€ã€Œå¯¹è±¡å­˜å‚¨ã€ç­‰äºä¸€èº«çš„ä¸€ç«™å¼å¼€å‘å¹³å°ï¼Œå¯ä»¥å¿«é€Ÿçš„å¼€å‘å¹¶å‘å¸ƒåº”ç”¨ã€‚å®ƒåŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š

### äº‘å‡½æ•°

äº‘å‡½æ•°æ˜¯è¿è¡Œåœ¨äº‘ç«¯çš„ JavaScript ä»£ç ï¼Œç†Ÿæ‚‰ Node.js çš„å¼€å‘è€…å¯ä»¥ç›´æ¥ä¸Šæ‰‹ã€‚

äº‘å‡½æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨ Typescript ç¼–å†™ï¼Œæ— éœ€ç®¡ç†æœåŠ¡å™¨ï¼Œåœ¨å¼€å‘æ§åˆ¶å°åœ¨çº¿ç¼–å†™ã€åœ¨çº¿è°ƒè¯•ã€ä¸€é”®ä¿å­˜å³å¯è¿è¡Œåç«¯ä»£ç ã€‚

åœ¨ä½ çš„åº”ç”¨ä¸­ï¼Œå¤§å¤šæ•°æ•°æ®çš„è·å–éƒ½å¯åœ¨å®¢æˆ·ç«¯ç›´æ¥æ“ä½œæ•°æ®åº“ï¼Œä½†æ˜¯é€šå¸¸ä¸šåŠ¡ä¸­ä¼šä½¿ç”¨åˆ°ã€Œéæ•°æ®åº“æ“ä½œã€ï¼Œå¦‚æ³¨å†Œã€ç™»å½•ã€æ–‡ä»¶æ“ä½œã€äº‹åŠ¡ã€ç¬¬ä¸‰æ–¹æ¥å£ç­‰ï¼Œå¯ç›´æ¥ä½¿ç”¨äº‘å‡½æ•°å®ç°ã€‚

è¯¦æƒ…è¯·æŸ¥çœ‹[äº‘å‡½æ•°çš„æ–‡æ¡£](https://docs.lafyun.com/guide/function/)ã€‚

![äº‘å‡½æ•°](https://jsdelivr.icloudnative.io/gh/yangchuansheng/imghosting4@main/uPic/2022-05-15-17-37-0aPmsA.jpg)

### äº‘æ•°æ®åº“

å‰ç«¯å¯ä½¿ç”¨ laf-client-sdk â€œç›´è¿â€äº‘æ•°æ®åº“ï¼Œæ— éœ€ä¸æœåŠ¡ç«¯å¯¹æ¥å£ã€‚

é€šè¿‡åœ¨å¼€å‘æ§åˆ¶å°ï¼Œé…ç½®ç›¸åº”çš„è®¿é—®ç­–ç•¥ï¼Œä¹Ÿå¯ä»¥å®ç°å®¢æˆ·ç«¯å®‰å…¨æ“ä½œæ•°æ®åº“ã€‚

è¯¦æƒ…è¯·æŸ¥çœ‹[äº‘æ•°æ®åº“çš„æ–‡æ¡£](https://docs.lafyun.com/guide/db/)ã€‚

![äº‘æ•°æ®åº“](https://jsdelivr.icloudnative.io/gh/yangchuansheng/imghosting4@main/uPic/2022-05-15-17-38-yYLFyU.jpg)

### äº‘å­˜å‚¨

laf äº‘å­˜å‚¨æ˜¯åŸºç¡€ MinIO æä¾›çš„å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œlaf æä¾›äº†å®Œå…¨å…¼å®¹ MinIO (aws s3-api) çš„å¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œ åœ¨ laf oss æ–‡æ¡£ä¸Šçº¿ä¹‹å‰ï¼Œå¼€å‘è€…å®Œå…¨å¯å‚è€ƒ MinIO çš„æ–‡æ¡£æ¥ä½¿ç”¨ laf ossã€‚

![äº‘å­˜å‚¨](https://jsdelivr.icloudnative.io/gh/yangchuansheng/imghosting4@main/uPic/2022-05-15-17-37-nAxAJm.jpg)

### é™æ€æ‰˜ç®¡

laf æ”¯æŒé™æ€ç½‘ç«™çš„æ‰˜ç®¡ï¼Œå¯ä»¥å¿«é€Ÿçš„ä¸Šçº¿é™æ€ç½‘ç«™ï¼Œæ— éœ€æŠ˜è…¾ Nginxã€‚

ğŸ‘¨â€ğŸ’» è°é€‚åˆä½¿ç”¨ Laf ?
-----------------

1.  å‰ç«¯å¼€å‘è€… + `laf` = å…¨æ ˆå¼€å‘è€…ï¼Œå‰ç«¯ç§’å˜å…¨æ ˆï¼Œæˆä¸ºçœŸæ­£çš„å¤§å‰ç«¯ã€‚
    
    *   `laf` ä¸ºå‰ç«¯æä¾›äº† [laf-client-sdk](https://github.com/labring/laf/tree/main/packages/client-sdk "laf-client-sdk")ï¼Œé€‚ç”¨äºä»»ä½• js è¿è¡Œç¯å¢ƒï¼›
    *   `laf` äº‘å‡½æ•°ä½¿ç”¨ js/ts å¼€å‘ï¼Œå‰åç«¯ä»£ç æ— éš”è£‚ï¼Œæ— é—¨æ§›å¿«é€Ÿä¸Šæ‰‹ï¼›
    *   `laf` æä¾›äº†é™æ€ç½‘ç«™æ‰˜ç®¡ï¼Œå¯å°†å‰ç«¯æ„å»ºçš„ç½‘é¡µç›´æ¥åŒæ­¥éƒ¨ç½²ä¸Šæ¥ï¼Œæ— éœ€å†é…ç½®æœåŠ¡å™¨ã€Nginxã€åŸŸåç­‰ï¼›
    *   `laf` åç»­ä¼šæä¾›å¤šç§å®¢æˆ·ç«¯çš„ SDKï¼ˆFlutter/Android/iOS ç­‰ï¼‰ï¼Œä¸ºæ‰€æœ‰å®¢æˆ·ç«¯å¼€å‘è€…æä¾›åç«¯å¼€å‘æœåŠ¡å’Œä¸€è‡´çš„å¼€å‘ä½“éªŒã€‚
2.  åç«¯å¼€å‘è€…ï¼Œå¯ä»¥ä»çäº‹ä¸­è§£æ”¾å‡ºæ¥ï¼Œä¸“æ³¨äºä¸šåŠ¡æœ¬èº«ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚
    
    *   `laf` å¯ä»¥èŠ‚çº¦æœåŠ¡å™¨è¿ç»´ã€å¤šç¯å¢ƒéƒ¨ç½²å’Œç®¡ç†ç²¾åŠ›ï¼›
    *   `laf` å¯ä»¥è®©ä½ å‘Šåˆ«é…ç½®ã€è°ƒè¯• Nginxï¼›
    *   `laf` å¯ä»¥è®©ä½ å‘Šåˆ«ã€Œä¸ºæ¯ä¸ªé¡¹ç›®æ‰‹åŠ¨éƒ¨ç½²æ•°æ®åº“ã€å®‰å…¨é¡¾è™‘ç­‰é‡å¤æ€§å·¥ä½œã€ï¼›
    *   `laf` å¯ä»¥è®©ä½ å‘Šåˆ«ã€Œä¿®æ”¹ä¸€æ¬¡ã€å‘å¸ƒåŠå¤©ã€çš„é‡å¤ç¹ççš„è¿­ä»£ä½“éªŒï¼›
    *   `laf` å¯ä»¥è®©ä½ éšæ—¶éšåœ°åœ¨ Web ä¸ŠæŸ¥çœ‹å‡½æ•°çš„è¿è¡Œæ—¥å¿—ï¼Œä¸å¿…å†è¿æ¥æœåŠ¡å™¨ï¼Œè´¹ç¥è´¹çœ¼ç¿»æ‰¾ï¼›
    *   `laf` å¯ä»¥è®©ä½ ã€Œåƒå†™åšå®¢ä¸€æ ·å†™ä¸€ä¸ªå‡½æ•°ã€ï¼Œæ‹›ä¹‹å³æ¥ï¼ŒæŒ¥ä¹‹å³å»ï¼Œéšæ‰‹å‘å¸ƒï¼
3.  äº‘å¼€å‘ç”¨æˆ·ï¼Œè‹¥ä½ æ˜¯å¾®ä¿¡äº‘å¼€å‘ç”¨æˆ·ï¼Œä½ ä¸ä»…å¯ä»¥è·å¾—æ›´å¼ºå¤§ã€å¿«é€Ÿçš„å¼€å‘ä½“éªŒï¼Œè¿˜ä¸è¢«å¾®ä¿¡äº‘å¼€å‘å¹³å°é”å®šã€‚
    
    *   ä½ å¯ä»¥ä¸ºå®¢æˆ·æä¾›æºç äº¤ä»˜ï¼Œä¸ºå®¢æˆ·ç§æœ‰éƒ¨ç½²ä¸€å¥— `laf` + ä½ çš„äº‘å¼€å‘åº”ç”¨ï¼Œè€Œä½¿ç”¨é—­æºçš„äº‘å¼€å‘æœåŠ¡ï¼Œæ— æ³•äº¤ä»˜å¯ç‹¬ç«‹è¿è¡Œçš„æºç ï¼›
    *   ä½ å¯ä»¥æ ¹æ®æœªæ¥çš„éœ€è¦ï¼Œéšæ—¶å°†è‡ªå·±çš„äº§å“éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œ`laf` æ˜¯å¼€æºå…è´¹çš„ï¼›
    *   ä½ ç”šè‡³å¯ä»¥ä¿®æ”¹ã€è®¢åˆ¶è‡ªå·±çš„äº‘å¼€å‘å¹³å°ï¼Œ`laf` æ˜¯å¼€æºçš„ã€é«˜åº¦å¯æ‰©å±•çš„ã€‚
4.  Node.js å¼€å‘è€…ï¼Œ`laf` æ˜¯ä½¿ç”¨ Node.js å¼€å‘çš„ï¼Œä½ å¯ä»¥æŠŠ `laf` å½“æˆä¸€ä¸ªæ›´æ–¹ä¾¿çš„ Node.js å¼€å‘å¹³å° or æ¡†æ¶ã€‚
    
    *   ä½ å¯ä»¥åœ¨çº¿ç¼–å†™ã€è°ƒè¯•å‡½æ•°ï¼Œä¸ç”¨é‡å¯æœåŠ¡ï¼Œä¸€é”®å‘å¸ƒå³å¯ç”¨ï¼›
    *   ä½ å¯ä»¥åœ¨çº¿æŸ¥çœ‹ã€æ£€ç´¢å‡½æ•°è°ƒç”¨æ—¥å¿—ï¼›
    *   ä½ å¯ä»¥ä¸å¿…æŠ˜è…¾æ•°æ®åº“ã€å¯¹è±¡å­˜å‚¨ã€Nginxï¼Œéšæ—¶éšåœ°è®©ä½ çš„åº”ç”¨ä¸Šçº¿ï¼›
    *   ä½ å¯ä»¥éšæ‰‹å°†ä¸€æ®µ Node.js ä»£ç ä¸Šäº‘ï¼Œæ¯”å¦‚ä¸€æ®µçˆ¬è™«ï¼Œä¸€æ®µç›‘æ§ä»£ç ï¼Œåƒå†™åšå®¢ä¸€æ ·å†™ Nodeï¼
5.  ç‹¬ç«‹å¼€å‘è€…ã€åˆåˆ›åˆ›ä¸šå›¢é˜Ÿï¼Œ èŠ‚çº¦æˆæœ¬ï¼Œå¿«é€Ÿå¼€å§‹ï¼Œä¸“æ³¨ä¸šåŠ¡ã€‚
    
    *   å‡å°‘å¯åŠ¨é¡¹ç›®å¼€å‘çš„æµç¨‹ï¼Œå¿«é€Ÿå¯åŠ¨ï¼Œç¼©çŸ­äº§å“éªŒè¯å‘¨æœŸï¼›
    *   æå¤§ç¨‹åº¦æé«˜è¿­ä»£é€Ÿåº¦ï¼Œéšæ—¶åº”å¯¹å˜åŒ–ï¼Œéšæ—¶å‘å¸ƒï¼›
    *   ä¸“æ³¨äºäº§å“ä¸šåŠ¡æœ¬èº«ï¼Œå¿«é€Ÿæ¨å‡ºæœ€å°å¯ç”¨äº§å“ (MVP)ï¼Œå¿«é€Ÿè¿›è¡Œäº§å“ã€å¸‚åœºéªŒè¯ï¼›
    *   ä¸€ä¸ªäºº + `laf` = å›¢é˜Ÿã€‚

ğŸ’¥ Laf èƒ½ç”¨æ¥åšä»€ä¹ˆï¼Ÿ
--------------

> `laf` æ˜¯åº”ç”¨çš„åç«¯å¼€å‘å¹³å°ï¼Œç†è®ºä¸Šå¯ä»¥åšä»»ä½•åº”ç”¨ï¼

1.  ä½¿ç”¨ laf å¿«é€Ÿå¼€å‘å¾®ä¿¡å°ç¨‹åº / å…¬ä¼—å·ï¼š ç”µå•†ã€ç¤¾äº¤ã€å·¥å…·ã€æ•™è‚²ã€é‡‘èã€æ¸¸æˆã€çŸ­è§†é¢‘ã€ç¤¾åŒºã€ä¼ä¸šç­‰åº”ç”¨ï¼
    
    *   å¾®ä¿¡å°ç¨‹åºå¼ºè¦æ±‚ https è®¿é—®ï¼Œå¯ç›´æ¥ä½¿ç”¨ \[lafyun.com\]ï¼›([http://www.lafyun.com](http://www.lafyun.com) "lafyun.com") åˆ›å»ºåº”ç”¨ï¼Œä¸ºå°ç¨‹åºæä¾› https çš„æ¥å£æœåŠ¡ï¼›
    *   å¯å°†åº”ç”¨çš„ h5 é¡µé¢å’Œç®¡ç†ç«¯ (admin) ç›´æ¥éƒ¨ç½²åˆ°å¯ç”± `laf` é™æ€æ‰˜ç®¡ï¼›
    *   å°† h5 ç›´æ¥æ‰˜ç®¡åˆ° `laf` ä¸Šï¼Œå°†åˆ†é…çš„ä¸“ç”¨åŸŸåé…ç½®åˆ°å…¬ä¼—å·å³å¯åœ¨çº¿è®¿é—®ï¼›
    *   ä½¿ç”¨äº‘å‡½æ•°å®ç°å¾®ä¿¡æˆæƒã€æ”¯ä»˜ç­‰ä¸šåŠ¡ï¼›
    *   ä½¿ç”¨äº‘å­˜å‚¨å­˜å‚¨è§†é¢‘ã€å¤´åƒç­‰ç”¨æˆ·æ•°æ®ã€‚
2.  å¼€å‘ Android or iOS åº”ç”¨ã€‚
    
    *   ä½¿ç”¨äº‘å‡½æ•°ã€äº‘æ•°æ®åº“ã€äº‘å­˜å‚¨è¿›è¡Œä¸šåŠ¡å¤„ç†ï¼›
    *   åº”ç”¨çš„åç«¯ç®¡ç† (admin) ç›´æ¥éƒ¨ç½²åˆ°å¯ç”± `laf` é™æ€æ‰˜ç®¡ï¼›
    *   å¯ä½¿ç”¨äº‘å‡½æ•°å®ç°å¾®ä¿¡æˆæƒã€æ”¯ä»˜ã€çƒ­æ›´æ–°ç­‰ä¸šåŠ¡ã€‚
3.  éƒ¨ç½²ä¸ªäººåšå®¢ã€ä¼ä¸šå®˜ç½‘ã€‚
    
    *   å°† vuepress / hexo / hugo ç­‰é™æ€ç”Ÿæˆçš„åšå®¢ï¼Œä¸€é”®éƒ¨ç½²åˆ° `laf` é™æ€æ‰˜ç®¡ä¸Šï¼Œ è§ [laf-cli](https://github.com/labring/lafcli "laf-cli")
    *   å¯ä½¿ç”¨äº‘å‡½æ•°æ¥å¤„ç†ç”¨æˆ·ç•™è¨€ã€è¯„è®ºã€è®¿é—®ç»Ÿè®¡ç­‰ä¸šåŠ¡
    *   å¯ä½¿ç”¨äº‘å‡½æ•°æ‰©å±•åšå®¢çš„å…¶å®ƒèƒ½åŠ›ï¼Œå¦‚è¯¾ç¨‹ã€æŠ•ç¥¨ã€æé—®ç­‰
    *   å¯ä½¿ç”¨äº‘å­˜å‚¨å­˜å‚¨è§†é¢‘ã€å›¾ç‰‡
    *   å¯ä½¿ç”¨äº‘å‡½æ•°åšçˆ¬è™«ã€æ¨é€ç­‰åŠŸèƒ½
4.  ä¼ä¸šä¿¡æ¯åŒ–å»ºè®¾ï¼šä¼ä¸šç§æœ‰éƒ¨ç½²ä¸€å¥— `laf` äº‘å¼€å‘å¹³å°
    
    *   å¿«é€Ÿå¼€å‘ä¼ä¸šå†…éƒ¨ä¿¡æ¯åŒ–ç³»ç»Ÿï¼Œå¯å¿«é€Ÿä¸Šçº¿ã€ä¿®æ”¹ã€è¿­ä»£ï¼Œé™æˆæœ¬
    *   æ”¯æŒå¤šåº”ç”¨ã€å¤šè´¦æˆ·ï¼Œä¸åŒéƒ¨é—¨ã€ä¸åŒç³»ç»Ÿï¼Œå³å¯éš”ç¦»ï¼Œäº¦å¯è¿é€š
    *   å¯å€ŸåŠ© `laf` ç¤¾åŒºç”Ÿæ€ï¼Œç›´æ¥ä½¿ç”¨ç°å­˜çš„ `laf` åº”ç”¨ï¼Œå¼€ç®±å³ç”¨ï¼Œé™æˆæœ¬
    *   `laf` å¼€æºå…è´¹ï¼Œæ²¡æœ‰æŠ€æœ¯é”å®šçš„é¡¾è™‘ï¼Œå¯è‡ªç”±è®¢åˆ¶å’Œä½¿ç”¨
5.  ä¸ªäººå¼€å‘è€…çš„ã€Œæ‰‹è¾¹äº‘ã€
    
    *   `laf` è®©å¼€å‘è€…éšæ‰‹å†™çš„ä¸€æ®µä»£ç ï¼Œç¬é—´å…·å¤‡éšæ‰‹ä¸Šäº‘çš„èƒ½åŠ›
    *   å°±åƒåœ¨ä½ æ‰‹æœºçš„å¤‡å¿˜å½•éšæ‰‹æ•²ä¸‹ä¸€æ®µæ–‡å­—ï¼Œè‡ªåŠ¨åŒæ­¥åˆ°äº‘ç«¯ï¼Œä¸”å¯è¢«å…¨ç½‘è®¿é—®å’Œæ‰§è¡Œ
    *   `laf` æ˜¯æ¯ä¸ªå¼€å‘è€…çš„â€œçƒ‚ç¬”å¤´â€ï¼Œåƒè®°äº‹ä¸€æ ·å†™ä¸ªå‡½æ•°
    *   `laf` æ˜¯æ¯ä¸ªå¼€å‘è€…çš„â€œç§äººåŠ©ç†â€ï¼Œæ¯”å¦‚éšæ—¶å¯ä»¥å†™ä¸€ä¸ªå®šæ—¶å‘é€çŸ­ä¿¡ã€é‚®ä»¶é€šçŸ¥çš„å‡½æ•°
6.  å…¶å®ƒ
    
    *   æœ‰ç”¨æˆ·æŠŠ `laf` äº‘å­˜å‚¨å½“ç½‘ç›˜ä½¿ç”¨
    *   æœ‰ç”¨æˆ·æŠŠ `laf` åº”ç”¨å½“æˆä¸€ä¸ªæ—¥å¿—æœåŠ¡å™¨ï¼Œæ”¶é›†å®¢æˆ·ç«¯æ—¥å¿—æ•°æ®ï¼Œä½¿ç”¨äº‘å‡½æ•°åšåˆ†æç»Ÿè®¡
    *   æœ‰ç”¨æˆ·ç”¨ `laf` æ¥è·‘çˆ¬è™«ï¼ŒæŠ“å–ä¸‰æ–¹æ–°é—»å’Œå’¨è®¯ç­‰å†…å®¹
    *   æœ‰ç”¨æˆ·ä½¿ç”¨ `laf` äº‘å‡½æ•°åš webhookï¼Œç›‘å¬ Git ä»“åº“æäº¤æ¶ˆæ¯ï¼Œæ¨é€åˆ°é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ç¾¤
    *   æœ‰ç”¨æˆ·ä½¿ç”¨ `laf` äº‘å‡½æ•°åšæ‹¨æµ‹ï¼Œå®šæ—¶æ£€æŸ¥çº¿ä¸ŠæœåŠ¡çš„å¥åº·çŠ¶æ€
    *   ...

> æœªæ¥ï¼Œ`lafyun.com` ä¼šä¸Šçº¿ä¸€ä¸ªåº”ç”¨å¸‚åœºï¼Œæ±‡æ€»æ”¶é›†è¿™äº›åº”ç”¨ï¼Œè®© `laf` ç”¨æˆ·ä¸€é”®å³å¯ä½¿ç”¨æµ·é‡åº”ç”¨ !

ğŸš€ å¦‚ä½•å¿«é€Ÿå¼€å§‹ï¼Ÿ
----------

ä¸‹é¢æˆ‘ä»¬å°†åœ¨ [lafyun.com](https://www.lafyun.com "lafyun.com") ä¸Šï¼Œé€šè¿‡å¼€å‘ä¸€ä¸ªç®€å•çš„ã€Œç”¨æˆ·ç™»å½•/æ³¨å†Œã€çš„åŠŸèƒ½ï¼Œå¿«é€Ÿä½“éªŒ `laf` äº‘å¼€å‘ã€‚

### å‡†å¤‡å·¥ä½œ

1.  ä½ éœ€è¦åœ¨ [lafyun.com](https://www.lafyun.com "lafyun.com") ä¸Šæ³¨å†Œä¸€ä¸ªè´¦æˆ·ï¼›
2.  ç™»å½•åˆ° [lafyun.com](https://www.lafyun.com "lafyun.com") æ§åˆ¶å° ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„ `æ–°å»º` æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªç©ºåº”ç”¨ï¼›
3.  å¾…åº”ç”¨æˆåŠŸå¯åŠ¨åï¼Œç‚¹å‡»å³ä¾§ ã€Œå¼€å‘ã€ æŒ‰é’®ï¼Œè¿›å…¥åº”ç”¨çš„ã€Œå¼€å‘æ§åˆ¶å°ã€ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åœ¨ã€Œå¼€å‘æ§åˆ¶å°ã€ è¿›è¡Œç¬¬ä¸€ä¸ª `laf` åº”ç”¨çš„åŠŸèƒ½å¼€å‘ã€‚

### ç¼–å†™äº‘å‡½æ•°

æœ¬ç¤ºä¾‹ä¼šç¼–å†™ä¸¤ä¸ªäº‘å‡½æ•°ï¼š`register` å¤„ç†æ³¨å†Œè¯·æ±‚ï¼Œ`login` å¤„ç†ç™»å½•è¯·æ±‚ã€‚

#### ç”¨æˆ·æ³¨å†Œäº‘å‡½æ•°

åœ¨ã€Œäº‘å‡½æ•°ã€ç®¡ç†é¡µé¢ï¼Œç‚¹å‡» ã€Œæ–°å»ºå‡½æ•°ã€ï¼Œåˆ›å»ºæ³¨å†Œäº‘å‡½æ•° `register`ã€‚ç„¶åç‚¹å‡» `register` å‡½æ•°å³ä¾§çš„ ã€Œå¼€å‘ã€æŒ‰é’®ï¼Œè¿›å…¥ WebIDEï¼Œç¼–å†™ä»¥ä¸‹ä»£ç ï¼š

    import cloud from '@/cloud-sdk'
    import { createHash } from 'crypto'
    
    exports.main = async function (ctx: FunctionContext) {
      const username = ctx.body?.username || ''
      const password = ctx.body?.password || ''
    
      // check param
      if (!/[a-zA-Z0-9]{3,16}/.test(username)) return { error: 'invalid username' }
      if (!/[a-zA-Z0-9]{3,16}/.test(password))  return { error: 'invalid password' }
    
      // check username existed
      const db = cloud.database()
      const exists = await db.collection('users')
        .where({ username: username })
        .count()
    
      if(exists.total > 0) return { error: 'username already existed'}
    
      // add user
      const { id } = await db.collection('users')
        .add({
          username: username,
          password: createHash('sha256').update(password).digest('hex'),
          created_at: new Date()
        })
    
      console.log('user registered: ', id)
      return { data: id }
    }
    

ç‚¹å‡»å³ä¸Šè§’çš„ ã€Œæ˜¾ç¤ºè°ƒè¯•é¢æ¿ã€(Ctrl/Cmd + B) å³å¯è°ƒè¯•è¿è¡Œã€‚

![](https://jsdelivr.icloudnative.io/gh/yangchuansheng/imghosting4@main/uPic/2022-05-15-17-42-nObUwD.png)

ç‚¹å‡» ã€Œä¿å­˜ã€ & ã€Œå‘å¸ƒã€ å‡½æ•°å³å‘å¸ƒä¸Šçº¿ï¼

#### ç”¨æˆ·ç™»å½•äº‘å‡½æ•°

åŒä¸Šï¼Œåˆ›å»º `login` äº‘å‡½æ•°ï¼Œç¼–å†™ä»¥ä¸‹ä»£ç ï¼š

    import cloud from '@/cloud-sdk'
    import { createHash } from 'crypto'
    
    exports.main = async function (ctx: FunctionContext) {
      const username = ctx.body?.username || ''
      const password = ctx.body?.password || ''
    
      // check user login
      const db = cloud.database()
      const res = await db.collection('users')
        .where({
          username: username,
          password: createHash('sha256').update(password).digest('hex')
        })
        .getOne()
    
      if (!res.data)
        return { error: 'invalid username or password' }
      
      // generate jwt token
      const user_id = res.data._id
      const payload = {
        uid: user_id,
        exp: Math.floor(Date.now() / 1000) + 60 * 60 * 24 * 7
      }
    
      const access_token = cloud.getToken(payload)
    
      return {
        uid: res.data._id,
        access_token: access_token
      }
    }
    

ç‚¹å‡»å³ä¸Šè§’çš„ ã€Œæ˜¾ç¤ºè°ƒè¯•é¢æ¿ã€(Ctrl/Cmd + B) å³å¯è°ƒè¯•è¿è¡Œã€‚

![](https://jsdelivr.icloudnative.io/gh/yangchuansheng/imghosting4@main/uPic/2022-05-15-17-44-UeMARG.png)

ç‚¹å‡» ã€Œä¿å­˜ã€ & ã€Œå‘å¸ƒã€ å‡½æ•°å³å‘å¸ƒä¸Šçº¿ï¼

### ä½¿ç”¨ curl è°ƒç”¨äº‘å‡½æ•°

æœ€åå¯ä»¥é€šè¿‡äº‘å‡½æ•°åˆ—è¡¨é¡µé¢ï¼ŒæŸ¥çœ‹ & å¤åˆ¶äº‘å‡½æ•°çš„è°ƒç”¨åœ°å€ï¼Œ æˆ–å°†ä»¥ä¸‹ curl å‘½ä»¤ä¸­çš„ `APPID` æ›¿æ¢æˆä½ çš„ APPID åæ‰§è¡Œï¼š

    # æ³¨å†Œç”¨æˆ·
    $ curl -X POST -H "Content-Type: application/json" -d '{"username": "admin", "password": "admin"}' https://APPID.lafyun.com/register
    
    # ç”¨æˆ·ç™»é™†
    $ curl -X POST -H "Content-Type: application/json" -d '{"username": "admin", "password": "admin"}' https://APPID.lafyun.com/login
    

APPID å¯ä»¥åœ¨ lafyun.com çš„æ¬¢è¿é¡µé¢æ‰¾åˆ°ã€‚

![](https://jsdelivr.icloudnative.io/gh/yangchuansheng/imghosting4@main/uPic/2022-05-15-17-46-MYxQht.png)

### åœ¨å‰ç«¯é¡¹ç›®ä¸­ä½¿ç”¨äº‘å‡½æ•°

åœ¨ä½ çš„å‰ç«¯é¡¹ç›®ä¸­å®‰è£… laf client sdk:

    $ npm install laf-client-sdk
    

æœ€åï¼Œå¯ä»¥åœ¨ä½ çš„ Vue/React/Angular/å°ç¨‹åº é¡µé¢ä¸­è°ƒç”¨è¿™ä¸¤ä¸ªäº‘å‡½æ•°å®Œæˆå…·ä½“çš„ç™»å½•æ³¨å†ŒåŠŸèƒ½ï¼ä¾‹å¦‚ï¼š

    // user.ts
    
    import { Cloud } from 'laf-client-sdk'
    
    const cloud = new Cloud({ 
      baseUrl: "https://APPID.lafyun.com",
      getAccessToken: () => localStorage.getItem('access_token')
    })
    
    // regiser function
    export async function register(username: string, password: string) {
      const res = await cloud.invoke('register', {
        username: username,
        password: password
      })
    
      return res
    }
    
    // login function
    export async function login(username: string, password: string) {
      const res = await cloud.invoke('login', {
        username: username,
        password: password
      })
    
      if(res.access_token) {
        // save token
        localStorage.setItem('access_token', res.access_token)
      }
    
      return res
    }
    

### æ³¨æ„äº‹é¡¹

*   æˆ‘ä»¬å¯ä»¥åœ¨å¼€å‘æ§åˆ¶å°ï¼ŒæŸ¥çœ‹äº‘å‡½æ•°çš„è°ƒç”¨æ—¥å¿—ï¼Œåœ¨çº¿è°ƒè¯•ç­‰ï¼›
*   å¦‚æœè°ƒç”¨è¿”å› 404ï¼Œè¯·æ£€æŸ¥å‡½æ•°åæ˜¯å¦æ‹¼å†™é”™è¯¯ï¼Œæˆ–è€…äº‘å‡½æ•°æ˜¯å¦å·²ç»å‘å¸ƒã€‚

ğŸ“ æ€»ç»“
-----

è¿ç»´åŒå­¦ä¸åç«¯åŒå­¦è¯·æ³¨æ„ï¼Œç”±äº Laf è¿‡äºå¼ºæ‚ï¼Œä½ ä»¬ä¸å†éœ€è¦æŠ˜è…¾åŸºç¡€æ¶æ„å’Œåç«¯æœåŠ¡ï¼Œå¾ˆå¯èƒ½ä¼šå› ä¸ºå·¥ä½œé‡ä¸é¥±å’Œè€Œé¢ä¸´è¢«è£çš„é£é™©ï¼æ³¨æ„æ§åˆ¶é£é™©ï¼