---
layout: post
title: "Three.js è¿›é˜¶ä¹‹æ—…ï¼šç‰©ç†æ•ˆæœ-ç¢°æ’å’Œå£°éŸ³ ğŸ’¥"
date: "2023-02-15T06:21:56.303Z"
---
Three.js è¿›é˜¶ä¹‹æ—…ï¼šç‰©ç†æ•ˆæœ-ç¢°æ’å’Œå£°éŸ³ ğŸ’¥
===========================

![Three.js è¿›é˜¶ä¹‹æ—…ï¼šç‰©ç†æ•ˆæœ-ç¢°æ’å’Œå£°éŸ³ &#128165;](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085442458-812219640.png) æœ¬æ–‡å†…å®¹ä¸»è¦æ±‡æ€»å¦‚ä½•åœ¨ Three.js åˆ›å»ºçš„ 3D ä¸–ç•Œä¸­æ·»åŠ ç‰©ç†æ•ˆæœï¼Œä½¿å…¶æ›´åŠ çœŸå®ã€‚æ‰€è°“ç‰©ç†æ•ˆæœæŒ‡çš„æ˜¯å¯¹è±¡ä¼šæœ‰é‡åŠ›ï¼Œå®ƒä»¬å¯ä»¥ç›¸äº’ç¢°æ’ï¼Œæ–½åŠ åŠ›ä¹‹åå¯ä»¥ç§»åŠ¨ï¼Œè€Œä¸”é€šè¿‡é“°é“¾å’Œæ»‘å—è¿˜å¯ä»¥åœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­åœ¨å¯¹è±¡ä¸Šæ–½åŠ çº¦æŸã€‚ é€šè¿‡æœ¬æ–‡çš„é˜…è¯»ï¼Œä½ å°†å­¦ä¹ åˆ°å¦‚ä½•ä½¿ç”¨ Cannon.js åœ¨ Three.js ä¸­åˆ›å»ºä¸€ä¸ª 3D ç‰©ç†ä¸–ç•Œï¼Œå¹¶åœ¨ç‰©ç†ä¸–ç•Œæ›´æ–°å¯¹è±¡ã€è”ç³»æè´¨ã€æ–½åŠ å¤–åŠ›ã€å¤„ç†å¤šä¸ªç‰©ä½“ä¸­æ·»åŠ ç‰©ä½“ä¹‹é—´çš„ç¢°æ’æ•ˆæœï¼Œé€šè¿‡æ£€æµ‹ç¢°æ’æ¿€çƒˆç¨‹åº¦æ¥æ·»åŠ æ’å‡»å£°éŸ³ç­‰ã€‚

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215084741564-965578875.png)

**å£°æ˜ï¼šæœ¬æ–‡æ¶‰åŠå›¾æ–‡å’Œæ¨¡å‹ç´ æä»…ç”¨äºä¸ªäººå­¦ä¹ ã€ç ”ç©¶å’Œæ¬£èµï¼Œè¯·å‹¿äºŒæ¬¡ä¿®æ”¹ã€éæ³•ä¼ æ’­ã€è½¬è½½ã€å‡ºç‰ˆã€å•†ç”¨ã€åŠè¿›è¡Œå…¶ä»–è·åˆ©è¡Œä¸ºã€‚**

æ‘˜è¦
--

æœ¬æ–‡å†…å®¹ä¸»è¦æ±‡æ€»å¦‚ä½•åœ¨ `Three.js` åˆ›å»ºçš„ `3D` ä¸–ç•Œä¸­æ·»åŠ ç‰©ç†æ•ˆæœï¼Œä½¿å…¶æ›´åŠ çœŸå®ã€‚**æ‰€è°“ç‰©ç†æ•ˆæœæŒ‡çš„æ˜¯å¯¹è±¡ä¼šæœ‰é‡åŠ›ï¼Œå®ƒä»¬å¯ä»¥ç›¸äº’ç¢°æ’ï¼Œæ–½åŠ åŠ›ä¹‹åå¯ä»¥ç§»åŠ¨ï¼Œè€Œä¸”é€šè¿‡é“°é“¾å’Œæ»‘å—è¿˜å¯ä»¥åœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­åœ¨å¯¹è±¡ä¸Šæ–½åŠ çº¦æŸã€‚** é€šè¿‡æœ¬æ–‡çš„é˜…è¯»ï¼Œä½ å°†å­¦ä¹ åˆ°å¦‚ä½•ä½¿ç”¨ `Cannon.js` åœ¨ `Three.js` ä¸­åˆ›å»ºä¸€ä¸ª `3D` ç‰©ç†ä¸–ç•Œï¼Œå¹¶åœ¨ç‰©ç†ä¸–ç•Œæ›´æ–°å¯¹è±¡ã€è”ç³»æè´¨ã€æ–½åŠ å¤–åŠ›ã€å¤„ç†å¤šä¸ªç‰©ä½“ä¸­æ·»åŠ ç‰©ä½“ä¹‹é—´çš„ç¢°æ’æ•ˆæœï¼Œé€šè¿‡æ£€æµ‹ç¢°æ’æ¿€çƒˆç¨‹åº¦æ¥æ·»åŠ æ’å‡»å£°éŸ³ç­‰ã€‚

æ•ˆæœ
--

æœ¬æ–‡æœ€ç»ˆå°†å®ç°å¦‚ä¸‹æ‰€ç¤ºçš„æ•ˆæœï¼Œç‚¹å‡» `DAT.GUI` ä¸­åˆ›å»ºç«‹æ–¹ä½“ `ğŸŸ¦` å’Œçƒä½“ `ğŸŸ¡` çš„æŒ‰é’®ï¼Œå¯¹åº”çš„ç‰©ä½“å°†åœ¨æ‹¥æœ‰é‡åŠ›çš„ä¸‰ç»´ä¸–ç•Œä¸­å è½ï¼Œç‰©ä½“ä¸åœ°é¢åŠç‰©ä½“ä¸ç‰©ä½“ä¹‹é—´å‘ç”Ÿç¢°æ’æ—¶å¯ä»¥äº§ç”Ÿä¸ç¢°æ’å¼ºåº¦åŒ¹é…çš„æ’å‡»éŸ³é¢‘ `ğŸ”Š`ï¼Œç‚¹å‡»é‡ç½®æŒ‰é’®ï¼Œåˆ›å»ºçš„ç‰©ä½“å°†è¢«æ¸…é™¤ã€‚

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215084755559-1093658002.gif)

æ‰“å¼€ä»¥ä¸‹é“¾æ¥ï¼Œåœ¨çº¿é¢„è§ˆæ•ˆæœï¼Œå¤§å±è®¿é—®æ•ˆæœæ›´ä½³ã€‚

*   `ğŸ‘â€ğŸ—¨` åœ¨çº¿é¢„è§ˆåœ°å€ï¼š[https://dragonir.github.io/physics-cannon](https://dragonir.github.io/physics-cannon/)

æœ¬ä¸“æ ç³»åˆ—ä»£ç æ‰˜ç®¡åœ¨ `Github` ä»“åº“[ã€threejs-odesseyã€‘](https://github.com/dragonir/threejs-odessey)ï¼Œ**åç»­æ‰€æœ‰ç›®å½•ä¹Ÿéƒ½å°†åœ¨æ­¤ä»“åº“ä¸­æ›´æ–°**ã€‚

> `ğŸ”—` ä»£ç ä»“åº“åœ°å€ï¼šgit@github.com:dragonir/threejs-odessey.git

åŸç†
--

åœ¨[ä¸“æ ](https://juejin.cn/column/7140122697622618119)ä¹‹å‰çš„åŸç†å’Œç¤ºä¾‹å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ä½¿ç”¨å…‰ç…§ã€é˜´å½±ã€`Raycaster` ç­‰ç‰¹æ€§ç”Ÿæˆä¸€äº›ç®€å•çš„ç‰©ç†æ•ˆæœï¼Œä½†æ˜¯å¦‚æœéœ€è¦å®ç°åƒ**ç‰©ä½“å¼ åŠ›ã€æ‘©æ“¦åŠ›ã€æ‹‰ä¼¸ã€åå¼¹**ç­‰ç‰©ç†æ•ˆæœæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›ä¸“ä¸šçš„ç‰©ç†ç‰¹æ€§å¼€æºåº“æ¥å®ç°ã€‚

ä¸ºäº†å®ç°ç‰©ç†æ•ˆæœï¼Œæˆ‘ä»¬å°†åœ¨ `Three.js` ä¸­åˆ›å»ºä¸€ä¸ªç‰©ç†ä¸–ç•Œï¼Œå®ƒçº¯ç²¹æ˜¯ç†è®ºæ€§è´¨çš„ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥çœ‹åˆ°å®ƒï¼Œä½†æ˜¯åœ¨å…¶ä¸­ï¼Œä¸‰ç»´ç‰©ä½“å°†äº§ç”Ÿæ‰è½ã€ç¢°æ’ã€æ‘©æ“¦ã€æ»‘åŠ¨ç­‰ç‰©ç†ç‰¹æ€§ã€‚å…·ä½“åŸç†æ˜¯å½“æˆ‘ä»¬åœ¨ `Three.js` ä¸­åˆ›å»ºä¸€ä¸ªç½‘æ ¼æ¨¡å‹æ—¶ï¼ŒåŒæ—¶ä¼šå°†å…¶æ·»åŠ åˆ°ç‰©ç†ä¸–ç•Œä¸­ï¼Œåœ¨æ¯ä¸€å¸§æ¸²æŸ“ä»»ä½•å†…å®¹ä¹‹å‰æˆ‘ä»¬ä¼šå‘Šè¯‰ç‰©ç†ä¸–ç•Œå¦‚ä½•è‡ªè¡Œæ›´æ–°ï¼Œç„¶åæˆ‘ä»¬å°†è·å–ç‰©ç†ä¸–ç•Œä¸­æ›´æ–°çš„ä½ç§»å’Œæ—‹è½¬åæ ‡æ•°æ®ï¼Œå°†å…¶åº”ç”¨åˆ° `Three.js` ä¸‰ç»´ç½‘æ ¼ä¸­ã€‚

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215084822427-762329004.gif)

### åº“

å·²ç»æœ‰å¾ˆå¤šåŠŸèƒ½å®Œå¤‡çš„ç‰©ç†ç‰¹æ€§åº“ï¼Œæˆ‘ä»¬å°±æ²¡å¿…è¦é‡å¤é€ è½®å­äº†ã€‚ç‰©ç†ç‰¹æ€§åº“å¯ä»¥åˆ†ä¸º `2D` åº“å’Œ `3D` åº“ï¼Œè™½ç„¶æˆ‘ä»¬æ˜¯ä½¿ç”¨ `Three.js` å¼€å‘ä¸‰ç»´åŠŸèƒ½ï¼Œä½†æ˜¯æœ‰äº› `2Dåº“` åœ¨ä¸‰ç»´ä¸–ç•Œä¸­åŒæ ·æ˜¯é€‚ç”¨çš„è€Œä¸”å®ƒä»¬çš„æ€§èƒ½ä¼šæ›´å¥½ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å¼€å‘çš„ç‰©ç†åŠŸèƒ½æ˜¯ç¢°æ’ç±»çš„ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ `2D` åº“ï¼Œæ¯”å¦‚[Ouigo Let's play](http://letsplay.ouigo.com/)å°±æ˜¯ä¸€ä¸ªä½¿ç”¨ `2D` åº“å¼€å‘çš„ä¼˜ç§€ç¤ºä¾‹ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„ç‰©ç†ç‰¹æ€§åº“ã€‚

å¯¹äº `3D` ç‰©ç†åº“ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ä¸ªï¼š

*   **Ammo.js**
    
    *   å®˜ç½‘ï¼š[http://schteppe.github.io/ammo.js-demos/](http://schteppe.github.io/ammo.js-demos/)
    *   ä»“åº“ï¼š[https://github.com/kripken/ammo.js/](https://github.com/kripken/ammo.js/)
    *   æ–‡æ¡£ï¼š[https://github.com/kripken/ammo.js/#readme](https://github.com/kripken/ammo.js/#readme)
    *   `Bullet` ä¸€ä¸ªä½¿ç”¨ `C++` ç¼–å†™çš„ç‰©ç†å¼•æ“çš„ `JavaScript` ç›´æ¥ç§»æ¤
    *   åŒ…æ¯”è¾ƒé‡é‡çº§ï¼Œå½“å‰ä»ç„¶ç”±ç¤¾åŒºæ›´æ–°ç»´æŠ¤
*   **Cannon.js**
    
    *   å®˜ç½‘ï¼š[https://schteppe.github.io/cannon.js/](https://schteppe.github.io/cannon.js/)
    *   ä»“åº“ï¼š[https://github.com/schteppe/cannon.js](https://github.com/schteppe/cannon.js)
    *   æ–‡æ¡£ï¼š[http://schteppe.github.io/cannon.js/docs/](http://schteppe.github.io/cannon.js/docs/)
    *   æ¯” `Ammo.js` æ›´åŠ è½»é‡çº§ï¼Œä½¿ç”¨èµ·æ¥æ›´èˆ’æœ
    *   ä¸»è¦ç”±ä¸€ä¸ªå¼€å‘è€…ç»´æŠ¤ï¼Œå·²ç»å¤šå¹´æœªæ›´æ–°ï¼Œæœ‰ä¸€ä¸ªç»´æŠ¤çš„ `fork` æ˜¯ `cannon-es`
*   **Oimo.js**
    
    *   å®˜ç½‘ï¼š[https://lo-th.github.io/Oimo.js/](https://lo-th.github.io/Oimo.js/)
    *   ä»“åº“ï¼š[https://github.com/lo-th/Oimo.js](https://github.com/lo-th/Oimo.js)
    *   æ–‡æ¡£ï¼š[http://lo-th.github.io/Oimo.js/docs.html](http://lo-th.github.io/Oimo.js/docs.html)
    *   æ¯” `Ammo.js` è½»é‡ä¸”æ›´å®¹æ˜“å…¥æ‰‹
    *   ä¸»è¦ç”±ä¸€ä¸ªå¼€å‘è€…ç»´æŠ¤ï¼Œå·²ç»æœ‰ä¸¤å¹´æ²¡æœ‰æ›´æ–°

å¯¹äº `2D` ç‰©ç†åº“ï¼Œæœ‰å¾ˆå¤šï¼Œä¸‹é¢åˆ—å‡ºäº†æ¯”è¾ƒæµè¡Œçš„å‡ ä¸ªï¼š

*   **Matter.js**
    
    *   å®˜ç½‘ï¼š[https://brm.io/matter-js/](https://brm.io/matter-js/)
    *   ä»“åº“ï¼š[https://github.com/liabru/matter-js](https://github.com/liabru/matter-js)
    *   æ–‡æ¡£ï¼š[https://brm.io/matter-js/docs/](https://brm.io/matter-js/docs/)
    *   ä¸»è¦ç”±ä¸€ä¸ªå¼€å‘è€…ç»´æŠ¤ï¼Œç›®å‰ä»åœ¨æ›´æ–°ä¸­
*   **P2.js**
    
    *   å®˜ç½‘ï¼š[https://schteppe.github.io/p2.js/](https://schteppe.github.io/p2.js/)
    *   ä»“åº“ï¼š[https://github.com/schteppe/p2.js](https://github.com/schteppe/p2.js)
    *   æ–‡æ¡£ï¼š[http://schteppe.github.io/p2.js/docs/](http://schteppe.github.io/p2.js/docs/)
    *   ä¸»è¦ç”±ä¸€ä¸ªå¼€å‘è€…ç»´æŠ¤ï¼Œå·²ç»æœ‰2å¹´æ²¡æœ‰æ›´æ–°
*   **Planck.js**
    
    *   å®˜ç½‘ï¼š[https://piqnt.com/planck.js/](https://piqnt.com/planck.js/)
    *   ä»“åº“ï¼š[https://github.com/shakiba/planck.js](https://github.com/shakiba/planck.js)
    *   æ–‡æ¡£ï¼š[https://github.com/shakiba/planck.js/tree/master/docs](https://github.com/shakiba/planck.js/tree/master/docs)
    *   ä¸»è¦ç”±ä¸€ä¸ªå¼€å‘è€…ç»´æŠ¤ï¼Œç›®å‰ä»åœ¨æ›´æ–°ä¸­
*   **Box2D.js**
    
    *   å®˜ç½‘ï¼š[http://kripken.github.io/box2d.js/demo/webgl/box2d.html](http://kripken.github.io/box2d.js/demo/webgl/box2d.html)
    *   ä»“åº“ï¼š[https://github.com/kripken/box2d.js/](https://github.com/kripken/box2d.js/)
    *   æ–‡æ¡£ï¼šæ— 
    *   ä¸»è¦ç”±ä¸€ä¸ªå¼€å‘è€…ç»´æŠ¤ï¼Œç›®å‰ä»åœ¨æ›´æ–°ä¸­

æœ¬æ–‡å†…å®¹åŠç¤ºä¾‹å°†ä½¿ç”¨ `Cannon.js` åº“ï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“ç†è§£å’Œä½¿ç”¨ï¼Œå¯¹äºå…¶ä»–åº“ï¼Œä½¿ç”¨åŸç†åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œå¤§å®¶æ„Ÿå…´è¶£çš„è¯å¯ä»¥è‡ªè¡Œå°è¯•ã€‚

### Cannon.js

`Cannon.js` æ˜¯ä¸€ä¸ª `3D` ç‰©ç†å¼•æ“ï¼Œé€šè¿‡ä¸ºç‰©ä½“èµ‹äºˆçœŸå®çš„ç‰©ç†å±æ€§çš„æ–¹å¼æ¥è®¡ç®—è¿åŠ¨ã€æ—‹è½¬å’Œç¢°æ’æ£€æµ‹ã€‚`Cannon.js` ç›¸è¾ƒäºå…¶ä»–å¸¸è§çš„ç‰©ç†å¼•æ“æ¥è¯´ï¼Œæ¯”è¾ƒè½»é‡çº§è€Œä¸”å®Œå…¨é€šè¿‡ `JavaScript` æ¥å®ç°ã€‚ä¸»è¦æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

*   åˆšä½“åŠ¨åŠ›å­¦
*   ç¦»æ•£ç¢°æ’æ£€æµ‹
*   æ¥è§¦ã€æ‘©æ“¦å’Œæ¢å¤
*   ç‚¹åˆ°ç‚¹çº¦æŸã€é“°é“¾çº¦æŸã€é”ç´§è£…ç½®çº¦æŸç­‰
*   `Gauss-Seidel` çº¦æŸæ±‚è§£å™¨ä¸å­¤å²›åˆ†å‰²ç®—æ³•
*   ç¢°æ’è¿‡æ»¤
*   åˆšä½“ä¼‘çœ 
*   å®éªŒæ€§ `SPH` æµä½“æ”¯æŒ
*   å„ç§å½¢çŠ¶å’Œç¢°æ’ç®—æ³•

### Cannon-es

`Cannon.js` åº“å·²ç»å¤šå¹´æ²¡æœ‰æ›´æ–°äº†ï¼Œä½†æ˜¯å¦ä¸€åº“ `Cannon-es` å…‹éš†äº†åŸä»“åº“å¹¶è‡´åŠ›äºé•¿æœŸæ›´æ–°ç»´æŠ¤æ–°çš„ä»“åº“ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å®‰è£…å¹¶ä½¿ç”¨ï¼Œ`Cannon-es` ç”¨æ³•å’Œ `Cannon.js` ç”¨æ³•æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚

*   `Git` ä»“åº“ï¼š[https://github.com/pmndrs/cannon-es](https://github.com/pmndrs/cannon-es)
*   `NPM` åœ°å€ï¼š[https://www.npmjs.com/package/cannon-es](https://www.npmjs.com/package/cannon-es)

å®ç°
--

> `ğŸš©` æœ¬æ–‡ç¤ºä¾‹åŠç›¸å…³æ•™ç¨‹ç¿»è¯‘å¹¶æ•´ç†è‡ª [three.js journey](https://threejs-journey.com/) ç›¸å…³è¯¾ç¨‹ã€‚

### å¼€å§‹

å®‰è£…å¹¶å¼•å…¥

    npm install cannon --save
    // æˆ–
    npm install --save cannon-es
    

    import CANNON from 'cannon';
    // æˆ–
    import * as CANNON from 'cannon-es';
    

åˆå§‹åŒ–åœºæ™¯æ˜¯ä¸€ä¸ªå¹³é¢ `ğŸŸ©` å’Œä¸€ä¸ªçƒä½“ `ğŸŸ¡`ï¼Œä¸ºäº†æ›´å¥½è§‚å¯Ÿç‰©ç†ç‰¹æ€§ï¼Œå·²ç»å¼€å¯äº†é˜´å½±æ•ˆæœã€‚

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215084919191-802449651.png)

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `WebGL` åˆ›å»ºä¸€ä¸ªæ— é‡åŠ›çš„å¤ªç©ºåœºæ™¯ï¼Œä½†æ˜¯ä¸ºäº†æ¨¡æ‹Ÿåœ°çƒç¯å¢ƒ `ğŸŒ` ï¼Œå°±éœ€è¦æ·»åŠ **é‡åŠ›**ï¼Œåœ¨ `Cannon.js` ä¸­å¯ä»¥é€šè¿‡ä¿®æ”¹ `gravity` å±æ€§å€¼æ¥å®ç°ï¼Œå®ƒæ˜¯ä¸€ä¸ª `Cannon.js Vec3` å€¼ï¼Œå’Œ `Three.js` ä¸­çš„ `Vector3` ä¸€æ ·ï¼Œå®ƒåŒ…å« `x`ã€`y`ã€`z` å±æ€§ä¸”æ‹¥æœ‰ä¸€ä¸ª `set(...)` æ–¹æ³•

    world.gravity.set(0, -9.82, 0);
    

æˆ‘ä»¬ä½¿ç”¨ `-9.82` ä½œä¸ºé‡åŠ›çš„ `y` å€¼ï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯**åœ°çƒçš„é‡åŠ›ç³»æ•°**ï¼Œå¦‚æœä½ æƒ³è®©ç‰©ç†å è½çš„æ›´æ…¢æˆ–è€…æƒ³åˆ›å»ºä¸€ä¸ªç«æ˜Ÿé‡åŠ›ç¯å¢ƒ `ğŸª` ï¼Œå°±å¯ä»¥æŠŠå®ƒæ”¹ä¸ºå…¶ä»–æ•°å€¼ã€‚

### åŸºç¡€

#### ä¸–ç•Œ

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª `Cannon.js` ä¸–ç•Œï¼š

    const world = new CANNON.World();
    

#### å¯¹è±¡

æˆ‘ä»¬åœ¨åœºæ™¯ä¸­å·²ç»åˆ›å»ºäº†ä¸€ä¸ªçƒä½“ï¼Œç°åœ¨æ¥åœ¨ `Cannon.js` ä¸–ç•Œä¸­åˆ›å»ºä¸€ä¸ªçƒä½“ã€‚ä¸ºäº†å®ç°å®ƒï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»åˆ›å»ºä¸€ä¸ª**åˆšä½“Body**ï¼Œåˆšä½“æ˜¯ä¸€ç§ç®€å•çš„å¯¹è±¡ï¼Œå¯ä»¥å è½å’Œå…¶ä»–åˆšä½“äº§ç”Ÿç¢°æ’ã€‚åˆ›å»ºåˆšæå‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å†³å®šåˆšä½“çš„å½¢çŠ¶ï¼Œæœ‰å¾ˆå¤šå½¢çŠ¶å¯é€‰ï¼Œæ¯”å¦‚ `Box`ã€`Cylinder`ã€`Plane` ç­‰ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå’Œ `Three.js` ä¸­çƒä½“ç›¸åŒåŠå¾„çš„**çƒçŠ¶åˆšä½“**ï¼š

    const sphereShape = new CANNON.Sphere(0.5);
    

ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªåˆå§‹åŒ– `mass` è´¨é‡åŠ `position` ä½ç½®çš„ `Body` åˆšä½“ï¼š

    const sphereBody = new CANNON.Body({
      mass: 1,
      position: new CANNON.Vec3(0, 3, 0),
      shape: sphereShape
    });
    

æœ€åï¼Œæˆ‘ä»¬é€šè¿‡ `addBody(...)` æ–¹æ³•å°†åˆ›å»ºçš„åˆšä½“æ·»åŠ åˆ°ä¸–ç•Œä¸­ï¼š

    world.addBody(sphereBody);
    

æ­¤æ—¶æŸ¥çœ‹é¡µé¢å¯ä»¥çœ‹åˆ°æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ›´æ–° `Cannon.js` ä¸–ç•Œå’Œ `Three.js` çƒä½“åæ ‡ã€‚ä¸ºæ›´æ–°ç‰©ç†ä¸–ç•Œ`world`ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨æ—¶é—´æ­¥é•¿`step(...)`æ–¹æ³•ã€‚

#### æ›´æ–°

ç°åœ¨éœ€è¦å®ç°æ›´æ–° `Cannon.js` ä¸–ç•Œå’Œ `Three.js` åœºæ™¯ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨ `step(...)` æ–¹æ³•ï¼Œä¸ºäº†ä½¿å…¶ç”Ÿæ•ˆï¼Œå¿…é¡»æä¾›ä¸€ä¸ªå›ºå®šæ—¶é—´æ­¥é•¿ã€è‡ªä¸Šæ¬¡è°ƒç”¨å‡½æ•°ä»¥æ¥ç»è¿‡çš„æ—¶é—´ã€ä»¥åŠæ¯ä¸ªå‡½æ•°è°ƒç”¨å¯æ‰§è¡Œçš„æœ€å¤§å›ºå®šæ­¥éª¤æ•°ä½œä¸ºå‚æ•°ã€‚

    step(dt, [timeSinceLastCalled], [maxSubSteps=10])
    

*   `dt`ï¼šå›ºå®šæ—¶é—´æˆ³ï¼Œè¦ä½¿ç”¨çš„å›ºå®šæ—¶é—´æ­¥é•¿
*   `[timeSinceLastCalled]`ï¼šè‡ªä¸Šæ¬¡è°ƒç”¨å‡½æ•°ä»¥æ¥ç»è¿‡çš„æ—¶é—´
*   `[maxSubSteps=10]`ï¼šæ¯ä¸ªå‡½æ•°è°ƒç”¨å¯æ‰§è¡Œçš„æœ€å¤§å›ºå®šæ­¥éª¤æ•°

> `ğŸš©` å…³äºæ—¶é—´æ­¥é•¿åŸç†ï¼Œå¯æŸ¥çœ‹[æ­¤æ–‡ç« ](https://gafferongames.com/post/fix_your_timestep/)

åœ¨åŠ¨ç”»å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ä»¥ `60fps` è¿è¡Œï¼Œå› æ­¤å°†ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®ä¸º `1/60`ï¼Œè¿™ä¸ªè®¾ç½®åœ¨æ›´é«˜æˆ–æ›´ä½å¸§ç‡çš„æƒ…å†µä¸‹éƒ½èƒ½ä»¥ç›¸åŒé€Ÿåº¦è¿è¡Œï¼›å¯¹äºç¬¬äºŒä¸ªå‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—è‡ªä¸Šä¸€å¸§ä»¥æ¥ç»è¿‡äº†å¤šå°‘æ—¶é—´ï¼Œé€šè¿‡å°†å‰ä¸€å¸§çš„ `elapsedTime` å‡å»å½“å‰ `elapsedTime` æ¥è·å¾—ï¼Œä¸è¦ç›´æ¥ä½¿ç”¨ `Clock` ç±»ä¸­çš„ `getDelta()` æ–¹æ³•ï¼Œå› ä¸ºæ— æ³•å¾—åˆ°é¢„æœŸçš„ç»“æœè¿˜ä¼šå¼„ä¹±å†…éƒ¨é€»è¾‘ï¼›ç¬¬ä¸‰ä¸ªè¿­ä»£å‚æ•°ï¼Œå¯ä»¥éšä¾¿è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¿è¡Œä½“éªŒæ˜¯å¦ä¸æ»‘å¹¶ä¸é‡è¦ã€‚

    const clock = new THREE.Clock();
    let oldElapsedTime = 0;
    
    const tick = () => {
      const elapsedTime = clock.getElapsedTime();
      const deltaTime = elapsedTime - oldElapsedTime;
      oldElapsedTime = elapsedTime;
      //æ›´æ–°ç‰©ç†ä¸–ç•Œ
      world.step(1/60,deltaTime,3)
      controls.update()
      renderer.render(scene, camera)
      window.requestAnimationFrame(tick)
    }
    

æ­¤æ—¶æŸ¥çœ‹é¡µé¢ï¼Œçœ‹èµ·æ¥ä»ç„¶æ²¡æœ‰å˜åŒ–ï¼Œä½†å®é™…ä¸Šç‰©ç†ä¸–ç•Œä¸­çš„çƒä½“åˆšä½“ `sphereBody` æ­£åœ¨ä¸æ–­ä¸‹å ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ‰“å°æ—¥å¿— `ğŸ“œ` å¯ä»¥è§‚å¯Ÿåˆ°ã€‚

    console.log(sphereBody.position.y);
    

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215084940756-1228456176.png)

ç°åœ¨æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç‰©ç†ä¸–ç•Œçš„ `sphereBody` åˆšä½“åæ ‡æ¥æ›´æ–° `Three.js` ä¸­çš„çƒä½“ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä¸¤ç§æ–¹æ³•å®ç°è¯¥åŠŸèƒ½ï¼š

    // æ–¹æ³•ä¸€
    sphere.position.x = sphereBody.position.x;
    sphere.position.y = sphereBody.position.y;
    sphere.position.z = sphereBody.position.z;
    // æ–¹æ³•äºŒ
    sphere.position.copy(sphereBody.position);
    

> `ğŸš©` copyæ–¹æ³•åœ¨ Vector2ã€Vector3ã€Eulerã€Quaternion ç”šè‡³ Materialã€Object3Dã€Geometry ç­‰ç±»ä¸­éƒ½æ˜¯å¯ç”¨çš„ã€‚

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215084951907-1421122797.gif)

æ­¤æ—¶å°±èƒ½çœ‹åˆ°å°çƒ `ğŸŸ¡` å è½çš„æ•ˆæœï¼Œä½†æ˜¯å®ƒç›´æ¥ç©¿è¿‡äº†åœ°é¢ï¼Œå› ä¸ºç°åœ¨ä»…åœ¨ `Three.js` åœºæ™¯ä¸­æ·»åŠ äº†åœ°é¢ï¼Œè€Œæ²¡æœ‰åœ¨ `Cannon.js` ç‰©ç†ä¸–ç•Œä¸­åˆ›å»ºåœ°é¢çš„åˆšä½“ã€‚

ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å¹³é¢å½¢çŠ¶ `Plane` æ¥åˆ›å»ºåœ°é¢åˆšä½“ï¼Œ**åœ°é¢ä¸åº”è¯¥å—åˆ°ç‰©ç†ä¸–ç•Œé‡åŠ›çš„å½±å“è€Œä¸‹æ²‰ï¼Œå®ƒåº”è¯¥æ˜¯ä¿æŒé™æ­¢ä¸åŠ¨çš„**ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•å°† `mass` è®¾ç½®ä¸º `0` æ¥å®ç°ï¼š

    const floorShape = new CANNON.Plane();
    const floorBody = new CANNON.Body();
    floorBody.mass = 0;
    floorBody.addShape(floorShape);
    world.addBody(floorBody);
    

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085001401-1803091945.gif)

æ­¤æ—¶ä½ ä¼šå‘ç°å°çƒ `ğŸŸ¡` å è½çš„æ–¹å‘å˜äº†ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬é¢„æœŸçš„ç»“æœï¼Œå®ƒåº”è¯¥è½åˆ°åœ°é¢ä¸Šã€‚å› ä¸ºç‰©ç†ä¸–ç•Œä¸­æ·»åŠ çš„å¹³é¢æ˜¯é¢å‘ç›¸æœº `ğŸ“·` çš„ï¼Œæˆ‘ä»¬éœ€è¦åƒåœ¨ `Three.js` ä¸­æ—‹è½¬å¹³é¢ä¸€æ ·å¯¹å®ƒè¿›è¡Œæ—‹è½¬ã€‚åœ¨ `Cannon.js` ä¸­ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨å››å…ƒæ•° `Quaternion` æ¥å¯¹åˆšä½“è¿›è¡Œæ—‹è½¬ï¼Œå¯ä»¥é€šè¿‡ `setFromAxisAngle(...)` æ–¹æ³•ï¼š

*   ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ—‹è½¬è½´
*   ç¬¬äºŒä¸ªå‚æ•°æ˜¯è§’åº¦

    floorBody.quaternion.setFromAxisAngle(new CANNON.Vec3(- 1, 0, 0), Math.PI * 0.5);
    

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085012309-395291304.gif)

ç°åœ¨å¯ä»¥çœ‹åˆ°å°çƒ `ğŸŸ¡` ä»é«˜å¤„ä¸‹è½å¹¶ä¸”åœåœ¨åœ°é¢ä¸Šï¼Œå› ä¸ºåœ°é¢æ˜¯é™æ­¢ä¸åŠ¨çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨ `Cannon.js` ä¸­çš„åœ°é¢æ¥æ›´æ–° `Three.js` ä¸­çš„åœ°é¢ã€‚

### è”ç³»æè´¨

ä»ä¸Šå›¾å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œå°çƒ `ğŸŸ¡` å è½åˆ°åœ°é¢åå¹¶æ²¡æœ‰åå¤å¼¹è·³ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹è®¾ç½® `Cannon.js` ä¸­çš„ `Material` å’Œ `ContactMaterial` æ¥**æ·»åŠ æ‘©æ“¦å’Œå¼¹è·³**æ•ˆæœã€‚

ä¸€ä¸ª `Material` ä»…ä»…æ˜¯ä¸€ä¸ªç±»ï¼Œä½ å¯ä»¥ç”¨å®ƒåˆ›å»ºä¸€ç§æè´¨å¹¶å‘½ååå°†å®ƒå…³è”åˆ° `Body` åˆšä½“ä¸Šï¼Œå¯¹äºåœºæ™¯ä¸­æ‰€æœ‰çš„æè´¨ï¼Œéƒ½å¯ä»¥é€šè¿‡æ­¤æ–¹æ³•è¿›è¡Œåˆ›å»ºã€‚æ¯”å¦‚ï¼Œå‡è®¾ä¸–ç•Œä¸­çš„æ‰€æœ‰ç‰©ä½“éƒ½æ˜¯**å¡‘æ–™æè´¨**çš„ï¼Œæ­¤æ—¶ä½ åªéœ€åˆ›å»ºä¸€ç§æè´¨å³å¯ï¼Œå¯ä»¥å°†å®ƒå‘½åä¸º `default` æˆ– `plastic`ï¼›å¦‚æœåœºæ™¯ä¸­åœ°é¢å’Œå°çƒæ˜¯ä¸åŒæè´¨çš„ï¼Œå°±éœ€è¦æ ¹æ®å®ƒä»¬çš„ç±»å‹åˆ›å»ºå¤šç§æè´¨ã€‚ä¸‹é¢æˆ‘ä»¬ä¸ºç¤ºä¾‹ä¸­çš„ä¸¤ç±»ç‰©ä½“åˆ†åˆ«åˆ›å»ºåä¸ºæ··å‡åœŸ `concrete` å’Œ å¡‘æ–™ `plastic` çš„æè´¨ï¼š

    const concreteMaterial = new CANNON.Material('concrete');
    const plasticMaterial = new CANNON.Material('plastic');
    

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆ›å»ºçš„ä¸¤ç§æè´¨æ¥åˆ›å»ºè”ç³»æè´¨ `ContactMaterial`ï¼Œå®ƒæ˜¯ä¸¤ç§æè´¨çš„ç»„åˆï¼ŒåŒ…å«å¯¹è±¡ç¢°æ’æ—¶çš„å±æ€§ã€‚ç„¶åä½¿ç”¨ `addContactMaterial(...)` æ–¹æ³•å°†å®ƒæ·»åŠ åˆ°ä¸–ç•Œä¸­ï¼š

    const concretePlasticContactMaterial = new CANNON.ContactMaterial(
      concreteMaterial,
      plasticMaterial,
      {
        friction: 0.1,
        restitution: 0.7
      }
    )
    world.addContactMaterial(concretePlasticContactMaterial)
    

    ContactMaterial (material1, material2 , [options])
    

*   å‰ä¸¤ä¸ªå‚æ•°æ˜¯æè´¨
*   ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç¢°æ’å±æ€§å¯¹è±¡ï¼ŒåŒ…å«æ‘©æ“¦ç³»æ•°å’Œæ¢å¤ç³»æ•°ï¼Œä¸¤è€…çš„é»˜è®¤å€¼å‡ä¸º `0.3`

æ¥ç€æˆ‘ä»¬å°†åˆ›å»ºå¥½çš„ `Material` åº”ç”¨åˆ° `Body` ä¸Šï¼Œå¯ä»¥åœ¨å®ä¾‹åŒ–ä¸»ä½“æ—¶ç›´æ¥ä¼ é€’æè´¨ï¼Œä¹Ÿå¯ä»¥åœ¨å®ä¾‹åŒ–ä¹‹åä½¿ç”¨æè´¨å±æ€§ä¼ é€’æè´¨ã€‚ç°åœ¨å¯ä»¥çœ‹åˆ°å°çƒ `ğŸŸ¡` ä¸‹è½ååœ¨åœæ­¢ä¹‹å‰ä¼šè¿”å›å¼¹è·³å¤šæ¬¡ï¼š

    const sphereBody = new CANNON.Body({
      material: plasticMaterial
    })
    // æˆ–è€…
    const floorBody = new CANNON.Body()
    floorBody.material = concreteMaterial
    

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085025900-1219323315.gif)

åœºæ™¯ä¸­ä¸€èˆ¬ä¼šæœ‰å¤šç§æè´¨ `Materials` çš„ç‰©ä½“ï¼Œä¸ºæ¯ç§ä¸¤ä¸¤ç»„åˆåˆ›å»º `ContactMaterial` ä¼šè´¹æ—¶è´¹è§£ï¼Œä¸ºäº†ç®€åŒ–è¿™ä¸€æ“ä½œï¼Œæˆ‘ä»¬æ¥ä½¿ç”¨ä¸€ç§é»˜è®¤æè´¨æ¥æ›¿æ¢åˆ›å»ºè”ç³»æè´¨æ—¶çš„ä¸¤ç§æè´¨ï¼Œå¹¶å°†å®ƒåº”ç”¨åˆ°æ‰€æœ‰åˆšä½“ä¸Šï¼š

    const defaultMaterial = new CANNON.Material('default');
    const defaultContactMaterial = new CANNON.ContactMaterial(
      defaultMaterial,
      defaultMaterial,
      {
        friction: 0.1,
        restitution: 0.7
      }
    );
    world.addContactMaterial(defaultContactMaterial)l
    sphereBody.material = defaultMaterial;
    floorBody.material = defaultMaterial;
    

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085036185-791559023.gif)

å¯ä»¥è§‚å¯Ÿåˆ°æ•ˆæœæ˜¯ç›¸åŒçš„ã€‚æˆ–è€…æˆ‘ä»¬ç›´æ¥è®¾ç½®ä¸–ç•Œçš„é»˜è®¤è”ç³»æè´¨`defaultContactMaterial` å±æ€§ï¼Œç„¶åç§»é™¤ `sphereBody` å’Œ `floorBody` çš„ `material` å±æ€§ï¼Œè¿™æ ·**ä¸–ç•Œä¸­çš„æ‰€æœ‰æè´¨å°±éƒ½æ˜¯ç›¸åŒçš„é»˜è®¤æè´¨**ã€‚

    world.defaultContactMaterial = defaultContactMaterial;
    

### æ–½åŠ å¤–åŠ›

å¯¹ä¸€ä¸ªåˆšä½“ `Body` æœ‰ä»¥ä¸‹å‡ ç§æ–½åŠ å¤–åŠ›çš„æ–¹æ³•ï¼š

*   `applyForce(force, worldPoint)`ï¼šä»ç©ºé—´ä¸­çš„ä¸€ä¸ªç‰¹æ®Šç‚¹å¯¹åˆšä½“æ–½åŠ åŠ›ï¼ˆä¸ä¸€å®šåœ¨åˆšä½“çš„è¡¨é¢ï¼‰ï¼Œæ¯”å¦‚å°±åƒé£æ¨åŠ¨æ‰€æœ‰ç‰©ä½“ä¸€æ ·ï¼Œæˆ–å¾®å¼±ä½†çªç„¶çš„åŠ›æ¨å‘å¤šç±³è¯ºéª¨ç‰Œï¼Œæˆ–è€…åƒå¼ºçƒˆä¸”çªç„¶çš„åŠ›æŠŠæ„¤æ€’çš„å°é¸Ÿæ¨å‘åŸå ¡ä¸€æ ·ã€‚
    *   `force`ï¼šåŠ›çš„å¤§å° `Vec3`
    *   `worldPoint`ï¼šæ–½åŠ åŠ›çš„ä¸–ç•Œç‚¹ `Vec3`
*   `applyImpulse`ï¼šç±»ä¼¼äº `applyForce`ï¼Œä½†å®ƒä¸æ˜¯å› ä¸ºå¢åŠ å¯¼è‡´åŠ é€Ÿåº¦æ”¹å˜ï¼Œè€Œæ˜¯ç›´æ¥ä½œç”¨äºåŠ é€Ÿåº¦ã€‚
*   `applyLocalForce(force, localPoint)`ï¼šä¸ `applyForce` ç›¸åŒï¼Œä½†æ˜¯åæ ‡ç³»æ˜¯åˆšä½“çš„å±€éƒ¨åæ ‡ï¼Œå³ `(0, 0, 0)` å°†æ˜¯åˆšä½“çš„ä¸­ç‚¹ï¼Œä»ç‰©ä½“çš„å†…éƒ¨æ–½åŠ›ã€‚
    *   `force`ï¼šè¦åº”ç”¨çš„åŠ›å‘é‡ `Vec3`
    *   `localPoint`ï¼šåˆšä½“ä¸­ä¸­è¦æ–½åŠ åŠ›çš„å±€éƒ¨ç‚¹ `Vec3`
*   `applyLocalImpulse`ï¼šä¸ `applyImpulse` ç›¸åŒï¼Œä½†æ˜¯åæ ‡ç³»æ˜¯åˆšä½“çš„å±€éƒ¨åæ ‡ï¼Œå³ä»ç‰©ä½“çš„å†…éƒ¨æ–½åŠ›ã€‚

ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ `applyLocalForce(...)` æ¥ä¸ºå°çƒåˆšä½“ `sphereBody` å¼€å§‹æ—¶æ–½åŠ ä¸€ä¸ªå°å†²å‡»åŠ›ï¼š

    sphereBody.applyLocalForce(new CANNON.Vec3(150, 0, 0), new CANNON.Vec3(0, 0, 0));
    

å¯ä»¥çœ‹åˆ°å°çƒ `ğŸŸ¡` å‘å³å¼¹è·³å¹¶æ»šåŠ¨ã€‚

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085046651-1790294235.gif)

ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ `applyForce(...)` æ–¹æ³•æ¥æ–½åŠ ä¸€ç‚¹é£åŠ› `ğŸŒ¬` ï¼Œå› ä¸ºé£æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå› æ­¤åœ¨æ›´æ–° `World` ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ç§åŠ›æ–½åŠ åˆ°æ¯ä¸€å¸§ã€‚è¦æ­£ç¡®åº”ç”¨æ­¤åŠ›ï¼Œå—åŠ›ç‚¹åº”è¯¥æ˜¯å°çƒçš„ä½ç½® `sphereBody.position`ï¼š

    const tick = () => {
      // ...
      sphereBody.applyForce(new CANNON.Vec3(- 0.5, 0, 0), sphereBody.position)
      world.step(1 / 60, deltaTime, 3)
      // ...
    }
    

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085138510-1193243570.gif)

### å¤„ç†å¤šä¸ªç‰©ä½“

å¯¹ä¸€ä¸ªæˆ–ä¸¤ä¸ªç‰©ä½“æ·»åŠ ç‰©ç†æ•ˆæœæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯ä¸ºå¾ˆå¤šä¸ªç‰©ä½“éƒ½æŒ‰ä¸Šè¿°æ–¹æ³•æ·»åŠ å°±ä¼šéå¸¸å¤æ‚ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ª**è‡ªåŠ¨åŒ–å¤„ç†æ–¹æ³•**ã€‚

#### è‡ªåŠ¨å¤„ç†å‡½æ•°

é¦–å…ˆï¼Œç§»é™¤æˆ–æ³¨é‡Šæ‰ `Cannon.js` ä¸–ç•Œå’Œ `Three.js` ä¸­çš„çƒä½“ï¼Œè¿˜æœ‰åŠ¨ç”»å‡½æ•° `tick()` ä¸­çƒä½“çš„è®¾ç½®ï¼Œç„¶ååˆ›å»ºä¸€ä¸ª `createSphere` æ–¹æ³•æ¥ç”Ÿæˆå°çƒï¼š

    const createSphere = (radius, position) => {
      // Three.js mesh
      const mesh = new THREE.Mesh(
        new THREE.SphereGeometry(radius, 20, 20),
        new THREE.MeshStandardMaterial({
          metalness: 0.4,
          roughness: 0.4,
          color: 0xfffc00
        })
      );
      mesh.castShadow = true;
      mesh.position.copy(position);
      scene.add(mesh);
    
      // Cannon.js body
      const shape = new CANNON.Sphere(radius);
      const body = new CANNON.Body({
        mass: 1,
        position: new CANNON.Vec3(0, 3, 0),
        shape: shape,
        material: defaultMaterial
      });
      body.position.copy(position);
      world.addBody(body);
    }
    

æ¥ç€ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªå°çƒ `ğŸŸ¡` ï¼Œå…¶ä¸­ `position` å‚æ•°ä¸å¿…æ˜¯ `Three.js` ä¸­çš„ `Vector3` æˆ–è€… `Cannon.js` ä¸­çš„ `Vec3`ï¼Œåªéœ€ä½¿ç”¨ `x, y ,z` å³å¯ï¼š

    createSphere(0.5, { x: 0, y: 3, z: 0 });
    

å¯ä»¥çœ‹åˆ°åœ°é¢é¡¶éƒ¨çš„åˆ›å»ºçš„å°çƒï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬ç§»é™¤äº†å°† `Cannon.js` ä¸–ç•Œä¸­å°çƒçš„ `position` æ‹·è´åˆ° `Three.js` ä¸­çš„æ–¹æ³•ï¼Œç°åœ¨çš„å°çƒ**æš‚æ—¶æ²¡æœ‰ç‰©ç†ä¸‹å æ•ˆæœ**ã€‚

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085121752-173332828.gif)

#### ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡æ•°ç»„

ä¸ºäº†ä½¿æ‰¹é‡åˆ›å»ºçš„å°çƒå¾—åˆ°æ›´æ–°ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ `objectsToUpdate` åœ¨åˆ›å»ºå‡½æ•°ä¸­ä¿å­˜å®ƒä»¬ï¼š

    const objectsToUpdate = [];
    const createSphere = (radius, position) => {
      // ...
      objectsToUpdate.push({
        mesh,
        body
      });
    }
    

ç„¶ååœ¨åŠ¨ç”»æ–¹æ³• `tick()` ä¸­æ‰¹é‡å°†å°çƒçš„ `body.position` æ‹·è´åˆ° `mesh.position`ï¼š

    const tick = () => {
      // ...
      for (const object of objectsToUpdate) {
        object.mesh.position.copy(object.body.position);
      }
    }
    

æ­¤æ—¶ï¼Œæ‰¹é‡åˆ›å»ºçš„å°çƒ `ğŸŸ¡` ä¹Ÿæœ‰ç‰©ç†æ•ˆæœäº†ã€‚

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085151902-2079881351.gif)

#### æ·»åŠ Dat.GUI

ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œæˆ‘ä»¬ç»™é¡µé¢æŒ‰å¦‚ä¸‹æ–¹å¼æ·»åŠ  `Dat.GUI` è°ƒè¯•å·¥å…·ï¼Œå¹¶æ·»åŠ ä¸€ä¸ª `createSphere` æ¥åœ¨åœºæ™¯ä¸­åˆ›å»ºå¤šä¸ªå°çƒï¼š

    const gui = new dat.GUI();
    const debugObject = {};
    debugObject.createSphere = () => {
    // ä½¿ç”¨éšæœºæ•°åˆ›å»ºéšæœºå¤§å°å’Œä½ç½®çš„å°çƒ
    createSphere(
      Math.random() * 0.5,
      {
        x: (Math.random() - 0.5) * 3,
        y: 3,
        z: (Math.random() - 0.5) * 3
      }
    )
    }
    gui.add(debugObject, 'createSphere');
    

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085201863-147875599.gif)

#### ä¼˜åŒ–

å› ä¸º `Three.js` ç½‘æ ¼ `Mesh` çš„ `geometry` å’Œ `material` éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åº”è¯¥å°†å…¶ç§»å‡º `createSphere` æ–¹æ³•ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨ `radius` æ¥åˆ›å»ºå‡ ä½•ä½“çš„ï¼Œä¸ºäº†å…¼å®¹ä¹‹å‰çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼å°† `SphereGeometry` åŠå¾„è®¾ç½®ä¸º `1`ï¼Œå¹¶ä½¿ç”¨ `scale` æ¥è°ƒæ•´å‡ ä½•ä½“çš„å¤§å°ï¼Œå¾—åˆ°çš„ç»“æœå’Œä¸Šé¢æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯**æ€§èƒ½å¾—ä»¥æå‡**ï¼š

    const sphereGeometry = new THREE.SphereGeometry(1, 20, 20);
    const sphereMaterial = new THREE.MeshStandardMaterial({
      metalness: 0.4,
      roughness: 0.4,
      color: 0xfffc00
    });
    
    const createSphere = (radius, position) => {
      const mesh = new THREE.Mesh(sphereGeometry, sphereMaterial);
      mesh.castShadow = true;
      mesh.scale.set(radius, radius, radius);
      mesh.position.copy(position);
      scene.add(mesh)
    // ...
    }
    

### æ·»åŠ ç«‹æ–¹ä½“

ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„æµç¨‹æ·»åŠ ä¸€ä¸ªåˆ›å»ºç«‹æ–¹ä½“ `ğŸŸ¦` çš„æ–¹æ³• `createBox`ï¼Œå…¶ä¸­ä¼ å…¥çš„å‚æ•°å°†æ˜¯ `width`ï¼Œ`height`ï¼Œ`depth`ï¼Œ`position`ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`Cannon.js` ä¸­åˆ›å»º`Box` ä¸ `Three.js` åˆ›å»º `Box` ä¸åŒï¼Œåœ¨ `Three.js` ä¸­ï¼Œåˆ›å»ºå‡ ä½•ä½“`BoxBufferGeometry` åªéœ€è¦ç›´æ¥æä¾›ç«‹æ–¹ä½“çš„å®½é«˜æ·±å°±è¡Œï¼Œ**ä½†æ˜¯åœ¨Cannon.jsä¸­ï¼Œå®ƒæ˜¯æ ¹æ®ç«‹æ–¹ä½“å¯¹è§’çº¿è·ç¦»çš„ä¸€åŠæ¥è®¡ç®—ç”Ÿæˆå½¢çŠ¶ï¼Œå› æ­¤å…¶å®½é«˜æ·±å¿…é¡»ä¹˜ä»¥0.5**ã€‚

    // åˆ›å»ºç«‹æ–¹ä½“
    const boxGeometry = new THREE.BoxGeometry(1, 1, 1);
    const boxMaterial = new THREE.MeshStandardMaterial({
      metalness: 0.4,
      roughness: 0.4,
      color: 0x0091ff
    })
    const createBox = (width, height, depth, position) => {
      // Three.js ç½‘æ ¼
      const mesh = new THREE.Mesh(boxGeometry, boxMaterial);
      mesh.scale.set(width, height, depth);
      mesh.castShadow = true;
      mesh.position.copy(position);
      scene.add(mesh);
      // Cannon.js åˆšä½“
      const shape = new CANNON.Box(new CANNON.Vec3(width * 0.5, height * 0.5, depth * 0.5))
      const body = new CANNON.Body({
        mass: 1,
        position: new CANNON.Vec3(0, 3, 0),
        shape: shape,
        material: defaultMaterial
      })
      body.position.copy(position);
      world.addBody(body);
      // ä¿å­˜åœ¨æ›´æ–°å¯¹è±¡æ•°ç»„ä¸­
      objectsToUpdate.push({ mesh, body });
    }
    
    createBox(1, 1.5, 2, { x: 0, y: 3, z: 0 });
    
    // æ·»åŠ åˆ°DAT.GUI
    debugObject.createBox = () => {
      createBox(
        Math.random(),
        Math.random(),
        Math.random(),
        {
          x: (Math.random() - 0.5) * 3,
          y: 3,
          z: (Math.random() - 0.5) * 3
        }
      )
    }
    gui.add(debugObject, 'createBox');
    

å…ˆç§»é™¤åˆ›å»ºå°çƒçš„æ–¹æ³•ï¼Œé¡µé¢è¿è¡Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„ç»“æœï¼š

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085216929-993636323.gif)

ç°åœ¨å¯ä»¥åˆ›å»ºéšæœºçš„ç«‹æ–¹ä½“äº†ï¼Œä½†æ˜¯çœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªä¸å¤ªé€¼çœŸæ˜¯ä¸æ˜¯ï¼Ÿå› ä¸ºç«‹æ–¹ä½“æ‰ä¸‹æ¥åæ²¡æœ‰ç¿»è½¬ï¼ŒåŸå› æ˜¯ `Three.js` ä¸­çš„ç½‘æ ¼æ²¡æœ‰åƒ `Cannon.js` ä¸­çš„åˆšä½“ä¸€æ ·æ—‹è½¬ï¼Œåœ¨çƒä½“çš„ç¤ºä¾‹ä¸­æˆ‘ä»¬æ²¡æœ‰å‘ç°æ˜¯å› ä¸ºæ— è®ºçƒä½“æ˜¯å¦æ—‹è½¬éƒ½æ˜¯å’ŒåŸæ¥ä¸€æ ·çš„ï¼Œè€Œåœ¨ç«‹æ–¹ä½“ä¸­ä¸ä¸€æ ·ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å°†åˆšä½“çš„ `quaternion` å±æ€§æ‹·è´åˆ°ç½‘æ ¼çš„ `quaternion` å±æ€§æ¥å®ç°ï¼Œå°±åƒä¹‹å‰æ‹·è´ä½ç½®å±æ€§ `position` ä¸€æ ·ï¼š

    const tick = () => {
      // ...
      for (const object of objectsToUpdate) {
        object.mesh.position.copy(object.body.position);
        object.mesh.quaternion.copy(object.body.quaternion);
      }
      // ...
    }
    

ç°åœ¨ç«‹æ–¹ä½“ `ğŸŸ¦` å è½æ—¶çš„æ—‹è½¬ä¹Ÿæ­£å¸¸äº†ã€‚

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085227699-858861608.gif)

### æ€§èƒ½ä¼˜åŒ–

#### Broadphase `âœ‚`

æµ‹è¯•ç‰©ä½“ä¹‹é—´çš„ç¢°æ’æ—¶ï¼Œä¸€ç§æ–¹æ³•æ˜¯æ£€æµ‹ä¸€ä¸ªåˆšä½“ä¸å¦å¤–æ‰€æœ‰å…¶ä»–åˆšä½“ä¹‹é—´çš„ç¢°æ’ï¼Œè™½ç„¶è¿™ä¸€æ“ä½œå¾ˆå®¹æ˜“å®ç°ï¼Œä½†æ˜¯éå¸¸è€—è´¹æ€§èƒ½ã€‚æ­¤æ—¶å°±éœ€è¦ `Broadphase`ï¼Œå®ƒä¼šåœ¨æµ‹è¯•ä¹‹å‰å¯¹åˆšä½“è¿›è¡Œç²—ç•¥çš„åˆ†ç±»ï¼Œæƒ³è±¡ä¸€ä¸‹ï¼Œä¸¤å †ç›¸è·å¾ˆè¿œçš„ç«‹æ–¹ä½“ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ä¸€å †ç«‹æ–¹ä½“æ¥æµ‹è¯•å¦ä¸€å †ç«‹æ–¹ä½“ä¹‹é—´çš„ç¢°æ’å…³ç³»èƒ½ï¼Œå®ƒä»¬ç›¸è·å¾ˆè¿œï¼Œä¸ä¼šå‘ç”Ÿç¢°æ’ï¼Œå› æ­¤å°±æ²¡å¿…è¦æµ‹è¯•æ¥è€—è´¹æ€§èƒ½ã€‚

åœ¨ `Cannon.js` ä¸­å…±æœ‰ `3` ç§ `Broadphase` ç®—æ³•ï¼š

*   `NaiveBroadphase`ï¼šæµ‹è¯•æ¯ä¸ªåˆšä½“ä¸å…¶ä»–æ‰€æœ‰åˆšä½“ä¹‹é—´çš„ç¢°æ’ï¼Œé»˜è®¤ç®—æ³•ã€‚
*   `GridBroadphase`ï¼š ä½¿ç”¨å››è¾¹å½¢æ …æ ¼è¦†ç›– `world`ï¼Œä»…é’ˆå¯¹åŒä¸€æ …æ ¼æˆ–ç›¸é‚»æ …æ ¼ä¸­çš„å…¶ä»–åˆšä½“è¿›è¡Œç¢°æ’æµ‹è¯•ã€‚
*   `SAPBroadphase`ï¼šæ‰«æå‰ªæç®—æ³•ï¼Œåœ¨å¤šä¸ªæ­¥éª¤çš„ä»»æ„è½´ä¸Šæµ‹è¯•åˆšä½“ã€‚

`NaiveBroadphase` æ˜¯é»˜è®¤æ£€æµ‹æ–¹æ³•ï¼Œä½†æ˜¯æ¨èä½¿ç”¨ `SAPBroadphase` ç®—æ³•ï¼Œè™½ç„¶è¿™ç§ç®—æ³•æœ‰æ—¶å¯èƒ½ä¼šäº§ç”Ÿæ£€æµ‹ä¸ä¼šå‘ç”Ÿç¢°æ’çš„é”™è¯¯ï¼Œä½†æ˜¯å®ƒçš„æ£€æµ‹é€Ÿåº¦éå¸¸å¿«ã€‚é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼Œç®€å•è®¾ç½® `world.broadphase` å±æ€§å³å¯ä¿®æ”¹ç¢°æ’æ£€æµ‹ç®—æ³•ï¼š

    world.broadphase = new CANNON.SAPBroadphase(world);
    

#### Sleep `ğŸ’¤`

å³ä½¿æˆ‘ä»¬ä½¿ç”¨æ”¹è¿›çš„ `Broadphase` ç¢°æ’æ£€æµ‹ç®—æ³•ï¼Œæœ‰å¯èƒ½æ‰€æœ‰çš„åˆšä½“éƒ½ä¼šè¢«æ£€æµ‹ï¼Œå³ä½¿æ˜¯é‚£äº›ä¸å†å‘ç”Ÿç§»åŠ¨çš„åˆšä½“ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç§°ä¸º `Sleep` çš„ç‰¹æ€§ï¼Œå½“åˆšä½“çš„é€Ÿåº¦é€æ¸å˜å°ä¸å†å‘ç”Ÿç§»åŠ¨ï¼Œå®ƒå°±ä¼šè¿›å…¥ç¡çœ çŠ¶æ€ï¼Œæ­¤æ—¶å°±ä¸ä¼šå¯¹å®ƒè¿›è¡Œç¢°æ’æ£€æµ‹ï¼Œé™¤éä½¿ç”¨ä»£ç è®©å…¶æ–½åŠ ä¸€ä¸ªè¶³å¤Ÿçš„åŠ›å†æ¬¡è¿åŠ¨æˆ–æœ‰å…¶å®ƒçš„åˆšä½“å‡»ä¸­å®ƒã€‚å¯ä»¥é€šè¿‡å¯¹ `world` è®¾ç½® `allowSleep` å±æ€§ä¸º `true` æ¥å®ç°ï¼š

    world.allowSleep = true;
    

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `sleepSpeedLimit`ã€`sleepTimeLimit` å±æ€§å¯¹ç¡çœ é€Ÿåº¦å’Œæ—¶é—´è¿›è¡Œè¯¦ç»†è®¾ç½®ï¼Œä½†æ˜¯ä¸€èˆ¬ä¸ä¼šæ”¹å˜é»˜è®¤å€¼ã€‚

### äº‹ä»¶

å¯ä»¥å¯¹åˆšä½“çš„äº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œæ¯”å¦‚ä½ æƒ³åœ¨ç‰©ä½“å‘ç”Ÿç¢°æ’æ—¶æ’­æ”¾å‘»åŸæˆ–è€…åœ¨å°„å‡»æ¸¸æˆä¸­æ£€æµ‹æ˜¯å¦å‘½ä¸­æ•Œäººç­‰æƒ…å†µä¸‹æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ä½ å¯ä»¥åœ¨åˆšä½“ä¸Šç›‘å¬ `colide`ã€`sleep`ã€`wakeup` ç­‰äº‹ä»¶ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸‹å½“åœºæ™¯ä¸­çš„å°çƒ `ğŸŸ¡` å’Œç«‹æ–¹ä½“ `ğŸŸ¦` äº’ç›¸ä¹‹é—´å‘ç”Ÿç¢°æ’æ—¶æ’­æ”¾å£°éŸ³ `ğŸ”Š` çš„åŠŸèƒ½ã€‚é¦–å…ˆåœ¨ `JavaScript` ä¸­åˆ›å»ºéŸ³é¢‘ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–¹æ³•æ¥æ’­æ”¾å®ƒã€‚

> `ğŸš©` æœ‰äº›æµè§ˆå™¨æ¯”å¦‚ `Chrome` é»˜è®¤ä¼šé™éŸ³ `ğŸ”•` é™¤éç”¨æˆ·ä¸é¡µé¢å‘ç”Ÿäº¤äº’ï¼Œä¾‹å¦‚ç‚¹å‡»ä»»æ„åŒºåŸŸï¼Œæ‰€ä»¥ä¸è¦æ‹…å¿ƒé¦–æ¬¡åŠ è½½æ—¶ä¸æ’­æ”¾å£°éŸ³çš„é—®é¢˜

    const hitSound = new Audio('/sounds/hit.mp3');
    const playHitSound = () => {
      // æ’­æ”¾æ—¶é—´é‡ç½®ä¸º0ï¼Œè§£å†³å¤šæ¬¡è°ƒç”¨æ—¶å£°éŸ³é—´æ–­é—®é¢˜
      hitSound.currentTime = 0
      hitSound.play()
    }
    

ç„¶ååœ¨åˆ›å»ºç«‹æ–¹ä½“æ–¹æ³• `createBox` ä¸­è°ƒç”¨ï¼š

    const createBox = (width, height, depth, position) => {
      // ...
      body.addEventListener('collide', playHitSound);
      // ...
    }
    

![](https://img2023.cnblogs.com/blog/772544/202302/772544-20230215085240826-1063850472.png)

æ­¤æ—¶ï¼Œå½“ç«‹æ–¹ä½“ `ğŸŸ¦` æ’å‡»åˆ°åœ°é¢æˆ–ç›¸äº’ç¢°æ’æ—¶å¯ä»¥å¬åˆ°æ’å‡»å£°éŸ³ `ğŸ”Š`ï¼Œçœ‹èµ·æ¥ä¼¼ä¹æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å½“æ·»åŠ å¤šä¸ªç«‹æ–¹ä½“æ—¶ï¼Œæˆ‘ä»¬ä¼šå¬åˆ°å¾ˆå¤šç«‹æ–¹ä½“ä¹‹é—´ç›¸äº’æ’å‡»çš„å£°éŸ³æ˜¯ä¸€æ ·çš„ï¼Œè€Œç°å®ä¸­çš„å£°éŸ³åº”è¯¥æ˜¯æ ¹æ®å£°éŸ³éšç€ç«‹æ–¹ä½“ä¹‹é—´çš„æ’å‡»ç¨‹åº¦è€Œä¸åŒï¼Œæ’å‡»ç¨‹åº¦è¶³å¤Ÿå°çš„è¯å°±å¬ä¸åˆ°å£°éŸ³ã€‚ä¸ºäº†è·å–æ’å‡»çš„å¼ºåº¦ï¼Œæˆ‘ä»¬éœ€è¦è·å–æ’å‡»ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹ç»™ `playHitSound` æ–¹æ³•æ·»åŠ å‚æ•° `collision` çš„æ–¹å¼æ¥è·å–æ’å‡»ä¿¡æ¯ï¼š

    const playHitSound = (collision) => {
    const impactStrength = collision.contact.getImpactVelocityAlongNormal();
      // åªæœ‰æ’å‡»å¼ºåº¦è¶³å¤Ÿå¤§æ—¶æ‰æ’­æ”¾æ’å‡»éŸ³é¢‘
      if (impactStrength > 1.5) {
        // ä¸ºäº†æ›´åŠ çœŸå®ï¼Œå¯ä»¥ç»™éŸ³é‡æ·»åŠ ä¸€äº›éšæœºæ€§
        hitSound.volume = Math.random();
        hitSound.currentTime = 0;
        hitSound.play();
      }
    }
    

ç„¶ååœ¨åˆ›å»ºçƒä½“çš„æ–¹æ³• `createSphere` ä¸­åŒæ ·è°ƒç”¨æ’­æ”¾æ’å‡»éŸ³é¢‘æ–¹æ³•ï¼š

    const createSphere = (radius, position) => {
      // ...
      body.addEventListener('collide', playHitSound)
      // ...
    }
    

### ç§»é™¤ç‰©ä½“

å½“é¡µé¢ä¸Šæ·»åŠ è¿‡å¤šç‰©ä½“æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ `Dat.GUI` æ·»åŠ ä¸€ä¸ªé‡ç½®æŒ‰é’®æ¥ç§»é™¤å·²æ·»åŠ çš„ç‰©ä½“ï¼Œé€šè¿‡éå† `objectsToUpdate` æ•°ç»„ï¼Œå°†æ¯ä¸ªæ•°ç»„é¡¹å¯¹åº”çš„çš„ `object.body` ä» ç‰©ç†ä¸–ç•Œ `world` ä¸­ç§»é™¤ï¼Œå°† `object.mesh` ä» `Three.js` åœºæ™¯ä¸­ç§»é™¤ï¼Œå¹¶æ¸…é™¤ `collide` ç¢°æ’äº‹ä»¶çš„ `eventListener`ï¼š

    debugObject.reset = () => {
      for (const object of objectsToUpdate) {
        object.body.removeEventListener('collide', playHitSound);
        world.removeBody(object.body);
        scene.remove(object.mesh);
      }
    }
    gui.add(debugObject, 'reset');
    

æ€»ç»“
--

æœ¬æ–‡ä¸­ä¸»è¦åŒ…å«çš„çŸ¥è¯†ç‚¹åŒ…æ‹¬ï¼š

*   `Three.js` ä¸­æ·»åŠ ç‰©ç†æ•ˆæœåŸºæœ¬åŸç†
*   å¸¸ç”¨ `3D` ä¸ `2D` ç‰©ç†ç‰©ç†å¼•æ“æ±‡æ€»
*   `Cannon.js` ä¸ `Cannon-es` å®‰è£…ä¸å¼•ç”¨
*   ç‰©ç†ä¸–ç•Œåˆ›å»ºã€å¯¹è±¡æ›´æ–°ã€è”ç³»æè´¨ã€æ–½åŠ å¤–åŠ›ã€å¤„ç†å¤šä¸ªç‰©ä½“
*   ç¢°æ’äº‹ä»¶ç›‘å¬ã€éŸ³é¢‘æ·»åŠ 
*   æ€§èƒ½ä¼˜åŒ–ã€ç‰©ç†ä¸–ç•Œç§»é™¤ç‰©ä½“ç­‰

> æƒ³äº†è§£å…¶ä»–å‰ç«¯çŸ¥è¯†æˆ–å…¶ä»–æœªåœ¨æœ¬æ–‡ä¸­è¯¦ç»†æè¿°çš„**Web 3D**å¼€å‘æŠ€æœ¯ç›¸å…³çŸ¥è¯†ï¼Œå¯é˜…è¯»æˆ‘å¾€æœŸçš„æ–‡ç« ã€‚å¦‚æœæœ‰ç–‘é—®å¯ä»¥åœ¨è¯„è®ºä¸­**ç•™è¨€**ï¼Œå¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸è¦å¿˜äº†**ä¸€é”®ä¸‰è¿å“¦ ğŸ‘**ã€‚

é™„å½•
--

*   \[1\]. [ğŸŒ´ Three.js æ‰“é€ ç¼¤çº·å¤æ—¥3Dæ¢¦ä¸­æƒ…å²›](https://juejin.cn/post/7102215670477094925)
*   \[2\]. [ğŸ”¥ Three.js å®ç°ç‚«é…·çš„èµ›åšæœ‹å…‹é£æ ¼3Dæ•°å­—åœ°çƒå¤§å±](https://juejin.cn/post/7124116814937718797)
*   \[3\]. [ğŸ¼ Three.js å®ç°2022å†¬å¥¥ä¸»é¢˜3Dè¶£å‘³é¡µé¢ï¼Œå«å†°å¢©å¢©](https://juejin.cn/post/7060292943608807460)
*   \[4\]. [ğŸ¦Š Three.js å®ç°3Då¼€æ”¾ä¸–ç•Œå°æ¸¸æˆï¼šé˜¿ç‹¸çš„å¤šå…ƒå®‡å®™](https://juejin.cn/post/7081429595689320478)
*   \[5\]. [ğŸ† æ˜é‡‘1000ç²‰ï¼ä½¿ç”¨Three.jså®ç°ä¸€ä¸ªåˆ›æ„çºªå¿µé¡µé¢](https://juejin.cn/post/7143039765725020167)
*   `...`
*   [ã€Three.js è¿›é˜¶ä¹‹æ—…ã€‘ç³»åˆ—ä¸“æ è®¿é—® ğŸ‘ˆ](https://juejin.cn/column/7140122697622618119)
*   [æ›´å¤šå¾€æœŸã€3Dã€‘ä¸“æ è®¿é—® ğŸ‘ˆ](https://juejin.cn/column/7049923956257587213)
*   [æ›´å¤šå¾€æœŸã€å‰ç«¯ã€‘ä¸“æ è®¿é—® ğŸ‘ˆ](https://juejin.cn/column/7021076460089638926)

å‚è€ƒ
--

*   \[1\]. [three.js journey](https://threejs-journey.com/)
*   \[2\]. [threejs.org](https://threejs.org)

> æœ¬æ–‡ä½œè€…ï¼šdragonir æœ¬æ–‡åœ°å€ï¼š[https://www.cnblogs.com/dragonir/p/17121487.html](https://www.cnblogs.com/dragonir/p/17121487.html)