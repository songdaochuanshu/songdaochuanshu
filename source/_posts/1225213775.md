---
layout: post
title: "Docker | åˆ¶ä½œtomcaté•œåƒå¹¶éƒ¨ç½²é¡¹ç›®"
date: "2022-10-14T19:21:16.116Z"
---
Docker | åˆ¶ä½œtomcaté•œåƒå¹¶éƒ¨ç½²é¡¹ç›®
========================

æœ¬æ–‡è®²è§£å¦‚ä½•åˆ¶ä½œè‡ªå·±çš„tomcaté•œåƒï¼Œå¹¶ä½¿ç”¨tomcatéƒ¨ç½²é¡¹ç›®

> æœ¬æ–‡è®²è§£å¦‚ä½•åˆ¶ä½œè‡ªå·±çš„tomcaté•œåƒï¼Œå¹¶ä½¿ç”¨tomcatéƒ¨ç½²é¡¹ç›®

åŸæ–™å‡†å¤‡ï¼š
-----

tomcatã€jdkå®‰è£…åŒ…ï¼Œdockerfileæ–‡ä»¶

æ­¥éª¤
--

### 1ã€å‡†å¤‡å‹ç¼©åŒ…

jdk-8u301-linux-x64.tar.gz -> jdk1.8.0\_301

apache-tomcat-7.0.107.tar.gz -> apache-tomcat-7.0.107

![](https://img2022.cnblogs.com/blog/1037867/202210/1037867-20221014122832629-324047319.png)

### 2ã€ç¼–å†™dockerfileæ–‡ä»¶

> å®˜æ–¹æŒ‡å®šå‘½å`Dockerfile`ï¼Œè¿™æ ·æ„å»ºçš„æ—¶å€™ä¸ç”¨åŠ `-f`å‚æ•°æŒ‡å®šæ–‡ä»¶

    FROM centos
    MAINTAINER xiao<find_onepiece@163.com>
    
    COPY readme.txt /usr/local/readme.txt
    
    ADD jdk-8u301-linux-x64.tar.gz /usr/local
    ADD apache-tomcat-7.0.107.tar.gz /usr/local
    
    RUN yum -y install vim
    
    ENV MYPATH /usr/local
    
    WORKDIR $MYPATH
    ENV JAVA_HOME /usr/local/jdk1.8.0_301
    ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
    ENV CATALINA_HOME /usr/local/apache-tomcat-7.0.107
    ENV CATALINE_BASH /usr/local/apache-tomcat-7.0.107
    ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINE_HOME/bin
    
    EXPOSE 8080
    
    CMD /usr/local/apache-tomcat-7.0.107/bin/startup.sh && tail -f /usr/local/apache-tomcat-7.0.107/bin/logs/catalina.out
    
    

### 3ã€æ‰§è¡Œæ„å»º

    docker build -t diytomcat . # è‡ªåŠ¨å¯»æ‰¾Dockerfileæ–‡ä»¶
    

**æ„å»ºæˆåŠŸ:**

Successfully built e68ad8caa2a4

Successfully tagged diytomcat:latest

![](https://img2022.cnblogs.com/blog/1037867/202210/1037867-20221014122834110-440385037.png)

### 4ã€å¯åŠ¨å®¹å™¨

`/webapps/test` éƒ¨ç½²çš„é¡¹ç›®è·¯å¾„ï¼Œæµè§ˆå™¨è®¿é—®`ip:port/test`

    docker run -it -p 9090:8080 --name xiaoTomcat -v /home/xiao/build/tomcat/test:/usr/local/apache-tomcat-7.0.107/webapps/test -v /home/xiao/build/tomcat/tomcatlogs/:/usr/local/apache-tomcat-7.0.107/logs diytomcat
    

### 5ã€è®¿é—®æŸ¥çœ‹

æ•°æ®å·æŒ‚è½½æˆåŠŸ

![](https://img2022.cnblogs.com/blog/1037867/202210/1037867-20221014122834573-1333957966.png)

### 6ã€å‘å¸ƒé¡¹ç›®

å·²ç»æŒ‚è½½äº†æ•°æ®å·ï¼Œæ‰€ä»¥ç¼–å†™å®¿ä¸»æœºçš„é¡¹ç›®æ–‡ä»¶å°±å¯ä»¥äº†

åœ¨æŒ‚è½½è·¯å¾„ `/home/xiao/build/tomcat/test` ä¸‹

1.  æ–°å»ºæ–‡ä»¶ `web.xml`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

    <?xml version="1.0" encoding="UTF-8"?>
    <web-app version="2.4" 
        xmlns="http://java.sun.com/xml/ns/j2ee" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
            http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    </web-app>
    

2.  æ–°å»ºæ–‡ä»¶ `index.jsp`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

    <%@ page contentType="text/html;charset=UTF-8" language="java" %>
    <html>
    <body>
    <h2>Hello World!</h2>
    <h2>xiao</h2>
    <%
    System.out.println("my tomcat project logs");
    %>
    </body>
    </html>
    

### 7ã€æµè§ˆå™¨è®¿é—®

urlï¼š`ip:port/test`

![](https://img2022.cnblogs.com/blog/1037867/202210/1037867-20221014122835005-850659916.png)

### 8ã€æŸ¥çœ‹æ—¥å¿—å·

`tail -f catalina.out`

![](https://img2022.cnblogs.com/blog/1037867/202210/1037867-20221014122835492-166993546.png)

å®Œæˆä»æ„å»ºé•œåƒåˆ°éƒ¨ç½²é¡¹ç›®ğŸˆğŸˆ
----------------

* * *

æˆ‘æ˜¯ [**ç”œç‚¹cc**](https://blog.i-xiao.space/)

çƒ­çˆ±å‰ç«¯ï¼Œä¹Ÿå–œæ¬¢ä¸“ç ”å„ç§è·Ÿæœ¬èŒå·¥ä½œå…³ç³»ä¸å¤§çš„æŠ€æœ¯ï¼ŒæŠ€æœ¯ã€äº§å“å…´è¶£å¹¿æ³›ä¸”æµ“åšï¼Œç­‰å¾…ç€ä¸€ä¸ªåˆ›ä¸šæœºä¼šã€‚æœ¬å·ä¸»è¦è‡´åŠ›äºåˆ†äº«ä¸ªäººç»éªŒæ€»ç»“ï¼Œå¸Œæœ›å¯ä»¥ç»™ä¸€å°éƒ¨åˆ†äººä¸€äº›å¾®å°å¸®åŠ©ã€‚

å¸Œæœ›èƒ½å’Œå¤§å®¶ä¸€èµ·åŠªåŠ›è¥é€ ä¸€ä¸ªè‰¯å¥½çš„å­¦ä¹ æ°›å›´ï¼Œä¸ºäº†ä¸ªäººå’Œå®¶åº­ã€ä¸ºäº†æˆ‘å›½çš„äº’è”ç½‘ç‰©è”ç½‘æŠ€æœ¯ã€æ•°å­—åŒ–è½¬å‹ã€æ•°å­—ç»æµå‘å±•åšä¸€ç‚¹ç‚¹è´¡çŒ®ã€‚**æ•°é£æµäººç‰©è¿˜çœ‹ä¸­å›½ã€çœ‹ä»Šæœã€çœ‹ä½ æˆ‘ã€‚**

æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š[ç”œç‚¹cc](https://www.cnblogs.com/all-smile/)ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š[https://www.cnblogs.com/all-smile/p/16791251.html](https://www.cnblogs.com/all-smile/p/16791251.html)