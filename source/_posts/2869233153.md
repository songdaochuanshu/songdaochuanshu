---
layout: post
title: "æˆ‘ç”¨ AntV/S2 ä¹°äº†ä¸€å¥—æˆ¿"
date: "2022-06-06T05:18:31.647Z"
---
æˆ‘ç”¨ AntV/S2 ä¹°äº†ä¸€å¥—æˆ¿
================

![æˆ‘ç”¨ AntV/S2 ä¹°äº†ä¸€å¥—æˆ¿](https://img2022.cnblogs.com/blog/992047/202206/992047-20220606125326479-2116832032.png) ä»‹ç»äº†ç¨‹åºçŒ¿å¦‚ä½•ä½¿ç”¨è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†ï¼Œé€‰è´­æ»¡æ„çš„æˆ¿æºã€‚

èƒŒæ™¯
--

ç»è¿‡ä¸€å¹´å¤šçš„æ‘‡å·ï¼Œæˆ‘åœ¨å‰ä¸¤å¤©æ”¶åˆ°äº†æŸç½‘çº¢ç›˜çš„æ‘‡ä¸­é€šçŸ¥ã€‚è¿˜æ²‰æµ¸åœ¨æ‘‡ä¸­æˆ¿å±‹å–œæ‚¦ä¸­çš„æˆ‘ï¼Œå¾ˆå¿«è¢«å”®æˆ¿é¡¾é—®å‘ŠçŸ¥é€‰æˆ¿çš„äººå¾ˆå¤šï¼Œæ¯ä½è´­æˆ¿è€…çš„é€‰æˆ¿æ—¶é—´éƒ½å¾ˆçŸ­ï¼Œå¿…é¡» ä¸€åˆ†é’Ÿå†… å¿«é€Ÿé€‰æˆ¿ã€‚å¹¶ä¸”ï¼Œæ’åœ¨ 400 å¤šå·çš„æˆ‘ï¼Œåœ¨é€‰æˆ¿æ—¶æ— æ³•å¾—çŸ¥å‰é¢é€‰æˆ¿è€…çš„å®æ—¶ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œæˆ‘é¦–å…ˆè¦ä» 1000 å¤šå¥—æˆ¿æºä¸­ï¼ŒæŠŠä¸æ»¡è¶³è¦æ±‚çš„æˆ¿æºéƒ½æ’é™¤æ‰ã€‚åŠ ä¸Šç°åœºé€‰æˆ¿æ—¶é—´çŸ­ï¼Œéœ€è¦åœ¨åˆ†åˆ†ä¸­å®Œæˆè¿™ä¸Šç™¾ä¸‡çš„äº¤æ˜“ï¼Œæ€•è‡ªå·±è¿‡äºç´§å¼ ï¼Œå¿…é¡»å¾—å‡†å¤‡ä¸€ä¸ªç®€å•å¯é çš„å°æŠ„ã€‚  
åˆšå¥½æœ€è¿‘åœ¨åšçš„ä¸€ä¸ªå¤šç»´è¡¨æ ¼é¡¹ç›®å°±å¾ˆé€‚ç”¨äºè¿™ä¸ªåœºæ™¯ï¼Œé¦–å…ˆå®ƒå…·æœ‰æ–¹ä¾¿çš„ç­›é€‰åŠŸèƒ½ï¼Œèƒ½è¿‡æ»¤æ‰ä¸æƒ³è¦çš„æˆ¿å‹ï¼ˆæ—¥ç…§çŸ­ï¼Œä¸´è¡—ç­‰ï¼‰ã€‚å…¶æ¬¡ï¼Œå®ƒå¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå¿«é€Ÿæ‰¾åˆ°é’Ÿæ„æˆ¿æºçš„æ¥¼æ ‹ã€å•å…ƒã€æ¥¼å±‚ç­‰èŒƒå›´ã€‚äºæ˜¯æˆ‘å¿«é€Ÿè¡ŒåŠ¨ï¼Œå¼€å§‹æ­å»ºå¿«é€Ÿé€‰æˆ¿çš„å¤šç»´è¡¨æ ¼ã€‚

### çŸ¥è¯†æ‹“å±•

å¤šç»´è¡¨ä¿—ç§°äº¤å‰è¡¨ï¼Œç”±åˆ—å’Œè¡Œç»„æˆçš„**åŒå‘è¡¨**ã€‚ç›¸å¯¹äºæ™®é€šè¡¨æ ¼ï¼Œå…·æœ‰èƒ½å¤Ÿ**æ„é€ **ã€**æ±‡æ€»**åŠ**æ˜¾ç¤ºå¤§é‡æ•°æ®**çš„ä¼˜åŠ¿ã€‚è€Œæˆ‘ä»¬çš„[**AntV/S2**](http://github.com/antvis/S2) ä¸­æ‹¥æœ‰è¿™ä¸¤ç§è¡¨æ ¼ï¼Œæ»¡è¶³ä½ æ‰€æœ‰éœ€æ±‚ ğŸ¤©

äº¤å‰è¡¨

æ™®é€šè¡¨æ ¼

![image.png](https://img2022.cnblogs.com/blog/992047/202206/992047-20220606131601177-1532391972.png "å›¾1ï¼šäº¤å‰è¡¨")

![image.png](https://img2022.cnblogs.com/blog/992047/202206/992047-20220606131601094-1364093464.png "å›¾2ï¼šæ˜ç»†è¡¨")

æ­å»ºå¯è§†åŒ–demo
---------

### æ•°æ®å‡†å¤‡

æˆ‘é€šè¿‡å¼€å‘å•†å’Œä¸‡èƒ½çš„äº’è”ç½‘æ”¶é›†åˆ°äº†`æ¥¼æ ‹`ã€`å•å…ƒ`ã€`æˆ¿å·`ã€`æ¥¼å±‚`ã€ `æˆ¿å±‹ç±»å‹` ã€`æ˜¯å¦ä¸´è¡—`ã€`æœå‘`ã€`é¢ç§¯` è¿™å‡ ä¸ªç»´åº¦çš„æ•°æ®ã€‚  
**æ•°æ®å±•ç¤º**

    [
      {
        "name": "21#", // æ¥¼æ ‹
        "unit": "1å•å…ƒ",  // å•å…ƒ
        "building": 1,  // æˆ¿å· 
        "level": 2, // æ¥¼å±‚
        "property": "å…¬å¯“", // æˆ¿å±‹ç±»å‹
        "nearStreet": false, // æ˜¯å¦ä¸´è¡—
        "toward": "ä¸œ", // æœå‘
        "area": 111,  // é¢ç§¯
        "score": 7  // è¯„åˆ†
      },
      {
        "name": "21#",
        "unit": "1å•å…ƒ",
        "building": 2,
        "level": 12,
        "property": "ä½å®…",
        "nearStreet": true,
        "toward": "ä¸œ",
        "area": 123,
        "score": 7
      },
      ...
    ]
    

### åˆå§‹åŒ–è¡¨æ ¼

> ä½¿ç”¨ `S2` å¿«é€Ÿæ­å»ºæŠ¥è¡¨ã€‚

**ä»£ç å®ç°**

    import React from "react";
    import ReactDOM from "react-dom";
    import { SheetComponent } from "@antv/s2-react";
    import '@antv/s2-react/dist/style.min.css';
    
    // 1. æ·»åŠ é…ç½®
    const s2Options = {
      width: 700,
      height: 580,
    }
    
    // 2. é…ç½®æ•°æ®
    const dataCfg = {
      data: data, // å¡«å…¥å‡†å¤‡å¥½çš„ houses.json 
      describe: 'å¦‚ä½•ä½¿ç”¨ S2 ä¹°æˆ¿',
      fields: {
        rows: [  // è¡Œå¤´ç»´åº¦
          'name',
          'unit',
          'building',
          'level',
          'nearStreet',
          'toward',
          'property',
        ],
        columns: [], // åˆ—å¤´ç»´åº¦
        values: ['area'], // æ•°å€¼
      },
      meta: [
        {
          field: 'name',
          name: 'æ¥¼æ ‹',
        },
        {
          field: 'unit',
          name: 'å•å…ƒå·',
        },
        ...
      ]
    }
    
    // 3. æ¸²æŸ“
    ReactDOM.render(
      <SheetComponent
        dataCfg={dataCfg}
        options={options}
      />,
      document.getElementById('container')
    );
    

**å±•ç¤ºæ•ˆæœ**  
![image.png](https://img2022.cnblogs.com/blog/992047/202206/992047-20220606131601100-888118908.png "å›¾3ï¼šåˆå§‹åŒ–è¡¨æ ¼")  

### è¿‡æ»¤æˆ¿æº

> åˆ—ä¸¾é€‰æˆ¿éœ€æ±‚ï¼Œå¼•å…¥ `Ant Design` ä¸­çš„ `Select` ç»„ä»¶å®ç°**ç­›é€‰**å™¨ï¼Œ å¿«é€Ÿè¿‡æ»¤ä¸ç†æƒ³çš„æˆ¿æºã€‚

**åˆ—ä¸¾é€‰æˆ¿éœ€æ±‚**

*   æˆ¿å±‹**ç±»å‹ä¸ºä½å®…**ï¼šæˆéƒ½çš„é˜³å…‰ç°å¸¸çš„çè´µï¼Œå…¬å¯“ï¼ˆå±…ä½ç”¨åœ°ï¼Œæˆ¿å±‹äº§æƒä»ä¸º 70å¹´ï¼‰çš„è¯å†¬è‡³æ—¥ç…§ä¸è¶³ 3 æ—¶/å¤© ã€‚
*   å› ä¸ºå¯¹å™ªéŸ³æ•æ„Ÿï¼Œæ‰€ä»¥å¸Œæœ›æˆ¿å±‹**ä¸ä¸´è¡—**ã€‚
*   å¸Œæœ›è´­ä¹°ä¸€ä¸ªä¸å¤ªæ‹¥æŒ¤çš„å¥—ä¸‰ï¼Œæ‰€ä»¥é¢ç§¯è®¾ç½®åˆ°äº†\*\* 100~130 å¹³\*\*ã€‚
*   æœ€åæ˜¯æ¥¼å±‚ï¼Œä¸€æ ‹æ¥¼æœ€å¥½çš„æ¥¼å±‚æ˜¯ 2/3 å¤„é«˜åº¦ï¼ˆ30å±‚çš„è¯ï¼Œ20å±‚è¾ƒå¥½ï¼‰ã€‚å› ä¸ºæˆéƒ½å‘¨è¾¹å­˜åœ¨ä¸€äº›åœ°éœ‡å¸¦ï¼Œæ‰€ä»¥æˆ‘å‘ä¸‹å…¼å®¹èƒ½åŠ›ä¹Ÿæ¯”è¾ƒå¼ºã€‚ä½†æ˜¯ï¼Œå¤ªçŸ®äº†å¯èƒ½ä¼šè¢«ğŸŒ² é®æŒ¡ï¼ŒèšŠå­å¤šï¼Œé¸Ÿå«å£°æ¼äººç­‰é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œæ¥¼å±‚æœ€ç»ˆé”å®šåœ¨\*\* 6~30 å±‚\*\*ã€‚

![Large GIF (834x828).gif](https://img2022.cnblogs.com/blog/992047/202206/992047-20220606131601168-383254568.gif "å›¾4ï¼šç­›é€‰æˆ¿æº")

### æŸ¥çœ‹æ±‡æ€»æˆ¿æº

> ä½¿ç”¨ S2 å­—æ®µçš„åˆ†é¡µåŠŸèƒ½ï¼Œå¸®åŠ©æˆ‘å®æ—¶æŸ¥çœ‹ç†æƒ³æˆ¿æºæ±‡æ€»æ•°ã€‚

**ä»£ç å®ç°**

    ...
    
    const s2Options = {
      width: 700,
      height: 580,
      pagination: { // åˆ†é¡µé…ç½®
        pageSize: 50,
        current: 1,
      },
    }
    
    ReactDOM.render(
      <SheetComponent
        dataCfg={dataCfg}
        options={options}
        showPagination={true} // æ‰“å¼€ S2 å†…ç½®çš„åˆ†é¡µåŠŸèƒ½
      />,
      document.getElementById('container')
    );
    

**å±•ç¤ºæ•ˆæœ**  
![image.png](https://img2022.cnblogs.com/blog/992047/202206/992047-20220606131601086-528876148.png "å›¾5ï¼šåˆ†é¡µåŠŸèƒ½")  

### æ’åºè®©æ•°æ®æ›´æ¸…æ™°

> åˆ©ç”¨ S2 ç»„å†…æ’åºåŠŸèƒ½ï¼Œè®©`æ¥¼æ ‹`ã€`å•å…ƒ`ã€`æˆ¿å·`ã€`æ¥¼å±‚` å±•ç¤ºæ›´åŠ æ¸…æ™°æœ‰åº

**ä»£ç å®ç°**

    ...
    
    const header = {
      advancedSortCfg: { open: true }, // æ‰“å¼€é«˜çº§åŠŸèƒ½
    };
    
    // é…ç½®æ•°æ®ä¸­æ·»åŠ æ’åº
    const dataCfg = {
      ...
      sortParams:  [
      {
        sortFieldId: 'name', 
        sortMethod: 'ASC', // æŒ‰é¦–å­—æ¯è¿›è¡Œå‡é™åº
      },
      {
        sortFieldId: 'unit',
        sortMethod: 'ASC',
      },
      {
        sortFieldId: 'level',
        sortFunc: (params) => { // è‡ªå®šä¹‰å‡é™åº
          const {data} = params;
          return data.sort((a, b) => {
            const aNum = last(a.split(ID_SEPARATOR));
            const bNum = last(b.split(ID_SEPARATOR));
            return  bNum - aNum;
          });
        }
      }]
    }
        
    ReactDOM.render(
      <SheetComponent
        dataCfg={dataCfg}
        options={options}
      />,
      document.getElementById('container')
    );
    

**å±•ç¤ºæ•ˆæœ**  
![image.png](https://img2022.cnblogs.com/blog/992047/202206/992047-20220606131601075-1938077148.png "å›¾6ï¼šæ’åºåŠŸèƒ½")  

### é‡ç‚¹æ ‡è®°ç†æƒ³æˆ·å‹

> ä½¿ç”¨å­—æ®µæ ‡è®°åŠŸèƒ½ï¼ŒğŸ“Œ ç†æƒ³æˆ·å‹ã€‚

*   120å¹³çš„ğŸ¡ ï¼Œæˆ¿å‹æ–¹æ­£ï¼Œå¾—æˆ¿ç‡é«˜ã€‚æ˜¯æˆ‘é‡ç‚¹æ ‡è®°çš„å¯¹è±¡ã€‚
*   123å¹³çš„ğŸ¡ ï¼Œå—åŒ—é€šé€ï¼Œæˆ¿å‹åˆç†ã€‚ä¹Ÿæ˜¯æˆ‘é‡ç‚¹æ ‡è®°çš„å¯¹è±¡ã€‚

**ä»£ç å®ç°**

    ...
    
    const s2Options = {
      width: 700,
      height: 580,
      pagination: { // åˆ†é¡µé…ç½®
        pageSize: 50,
        current: 1,
      },
      conditions: {
        // èƒŒæ™¯ (background) å­—æ®µæ ‡è®°
        background: [
          {
            field: 'area',
            mapping(value) {
              if (value === 123 || value === 119) {
                return {
                  // fill æ˜¯èƒŒæ™¯å­—æ®µæ ‡è®°ä¸‹å”¯ä¸€å¿…é¡»çš„å­—æ®µï¼Œç”¨äºæŒ‡å®šæ–‡æœ¬é¢œè‰²
                  fill: '#b8e1ff',
                };
              }
              return {
                fill: '#fff'
              };
            },
          },
        ],
      },
    };
    
    ReactDOM.render(
      <SheetComponent
        dataCfg={dataCfg}
        options={options}
        header={header} // é…ç½®è¡¨å¤´
      />,
      document.getElementById('container')
    );
    

**å±•ç¤ºæ•ˆæœ**  
![image.png](https://img2022.cnblogs.com/blog/992047/202206/992047-20220606131601168-1357596007.png "å›¾7ï¼šå­—æ®µæ ‡è®°")  
\*\*ğŸ“Š æŸ¥çœ‹å®Œæ•´ \*\*[**S2 å®˜æ–¹è´­æˆ¿demo**](https://s2.antv.vision/zh/examples/case/data-preview#house)  

### ğŸ“é€‰æˆ¿ä¼˜å…ˆçº§ï¼š

*   æ ¹æ®ä»¥ä¸Šç­›é€‰åªæœ‰ 149 æ¡æ»¡è¶³éœ€æ±‚ï¼Œè€Œå¯¹äº 400 å¤šå·çš„æˆ‘ï¼Œè¿˜æ˜¯å¾ˆéš¾é€‰åˆ°ã€‚ä½†æ˜¯ï¼Œæˆ‘è¿˜æ˜¯é¦–å…ˆè®°å½•ä¸‹æ»¡è¶³ä»¥ä¸Šè¦æ±‚çš„ç¬¬ä¸€ä¼˜å…ˆçº§æˆ¿å±‹ã€‚  
    :::info  
    **ç¬¬ä¸€ä¼˜å…ˆçº§ ï¼ˆ149å¥—ï¼‰  
    **21#2-1ï¼š 26~30  
    22#1-2ï¼š 6~30  
    ...  
    :::
    
*   ç„¶åé€æ¸æ”¾å®½è¦æ±‚ï¼Œé€‰å‡ºç¬¬äºŒã€ä¸‰ä¼˜å…ˆçº§çš„æˆ¿å­çš„èŒƒå›´ã€‚  
    :::info  
    **ç¬¬ä¸€ä¼˜å…ˆçº§ ï¼ˆ149å¥—ï¼‰  
    **21#2-1ï¼š 26~30  
    22#1-2ï¼š 6~30  
    ...
    

**ç¬¬äºŒä¼˜å…ˆçº§ ï¼ˆ237å¥—ï¼‰**  
15#1-3: 24~29  
15#1-4: 22~29  
...  
:::  

### å‡ºå‘é€‰æˆ¿

æˆ‘å¸¦ç€èŒƒå›´å°æŠ„ï¼Œå‡ºå‘é€‰æˆ¿å•¦ã€‚ç›¸å¯¹äºå…¶ä»–è´­æˆ¿è€…çš„çŠ¹è±«ä¸å†³ï¼Œæ‰‹æ¡â€œå®å…¸â€çš„æˆ‘ï¼Œèƒ¸æœ‰æˆç«¹ï¼Œæœ€ç»ˆæˆåŠŸæ¡æ¼ç¬¬äºŒä¼˜å…ˆçº§ä¸­çš„æˆ¿å±‹ğŸ’ƒã€‚  
![image.png](https://img2022.cnblogs.com/blog/992047/202206/992047-20220606131601092-1811266742.png)  

æœ€åçš„æœ€å
-----

> [GitHub star â­ï¸ğŸŒŸ](https://github.com/antvis/S2) çš„ç›†å‹ï¼Œ èµ é€[è´­æˆ¿æ”»ç•¥](https://codesandbox.io/s/s2-house-template-4jgz7q?file=/config.ts)ä¸€å¥—

æƒ³ä½“éªŒå¤šç»´è¡¨æ ¼å¼ºå¤§çš„åˆ†æå’Œçœ‹æ•°åŠŸèƒ½å—ï¼Ÿ**æ¬¢è¿ä½¿ç”¨ **[**AntV/S2**](https://s2.antv.vision/)****  
æˆ‘ä»¬çš„** **[**AntV/S2**](https://s2.antv.vision/)** å·²ç»å¼€æºå•¦**ï¼Œæ— è®ºåœ¨å·¥ä½œè¿˜æ˜¯ç”Ÿæ´»éƒ½å¯ä»¥éšæ„ä½¿ç”¨ã€‚å¦‚æœä½ è§‰å¾—ä»¥ä¸Šæ–‡ç« å¯¹ä½ è¿˜æœ‰å¸®åŠ©ï¼Œæˆ–è€…æœ‰ä¸€å®šå…´è¶£ï¼Œè¿˜è·ªè¯·è¯»è€…è€çˆ·ä»¬\*\*ä¸€é”®ä¸‰è¿ï¼š \*\*[**AntV/S2 - GitHub**](https://github.com/antvis/S2)ã€‚