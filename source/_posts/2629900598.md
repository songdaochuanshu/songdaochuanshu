---
layout: post
title: "ã€openEulerç³»åˆ—ã€‘éƒ¨ç½²æ–‡ä»¶å…±äº«æœåŠ¡Samba"
date: "2022-12-15T18:18:46.232Z"
---
ã€openEulerç³»åˆ—ã€‘éƒ¨ç½²æ–‡ä»¶å…±äº«æœåŠ¡Samba
==========================

> **ä¸ªäººåç‰‡ï¼š**  
> å¯¹äººé—´çš„çƒ­çˆ±ä¸æ­Œé¢‚ï¼Œå¯æŠµå²æœˆå†—é•¿ğŸŒ  
> GithubğŸ‘¨ğŸ»â€ğŸ’»ï¼š[å¿µèˆ’\_C.ying](https://nianshu2022.github.io/)  
> CSDNä¸»é¡µâœï¸ï¼š[å¿µèˆ’\_C.ying](https://blog.csdn.net/qq_52716296?spm=1011.2415.3001.5343)  
> ä¸ªäººåšå®¢ğŸŒ ï¼š[å¿µèˆ’\_C.ying](https://www.cnblogs.com/nianshu/)

ç›®å½•

*   [1 é…ç½®ç¯å¢ƒ](#1-é…ç½®ç¯å¢ƒ)
*   [2 é…ç½®è½¯ä»¶å®‰è£…æº](#2-é…ç½®è½¯ä»¶å®‰è£…æº)
*   [3 å®‰è£…æ–‡ä»¶å…±äº«æœåŠ¡](#3-å®‰è£…æ–‡ä»¶å…±äº«æœåŠ¡)
*   [4 æ·»åŠ Sambaç”¨æˆ·](#4-æ·»åŠ sambaç”¨æˆ·)
*   [5 åˆ›å»ºå…±äº«æ–‡ä»¶ç›®å½•](#5-åˆ›å»ºå…±äº«æ–‡ä»¶ç›®å½•)
*   [6 ä¿®æ”¹Sambaé…ç½®æ–‡ä»¶](#6-ä¿®æ”¹sambaé…ç½®æ–‡ä»¶)
*   [7 æ·»åŠ ç”¨æˆ·å…±äº«é…ç½®](#7-æ·»åŠ ç”¨æˆ·å…±äº«é…ç½®)

1 é…ç½®ç¯å¢ƒ
------

æŒ‚è½½ç³»ç»ŸISOï¼Œå¹¶é…ç½®å¥½æœ¬åœ°dnfæºã€‚(å‰é¢çš„æ–‡ç« è®²è¿‡ï¼Œè¿™é‡Œå°±ç•¥è¿‡......)

2 é…ç½®è½¯ä»¶å®‰è£…æº
---------

ç¡®è®¤è½¯ä»¶æºæ˜¯å¦å®‰è£…æˆåŠŸ

    dnf search samba
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/eb72d786c5b24850a9a4537ddcad2af5.png)

3 å®‰è£…æ–‡ä»¶å…±äº«æœåŠ¡
----------

è¾“å…¥å¦‚ä¸‹å‘½ä»¤å®‰è£…sambaæœåŠ¡ï¼ŒåŠå…¶ç›¸å…³ç»„ä»¶

     dnf -y install samba samba-common samba-client
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/881136fa514f44a2a3cb1749c2708e74.png)  
å¯åŠ¨sambaæœåŠ¡ï¼Œå¹¶è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨

    systemctl start smb; systemctl enable smb
    

æŸ¥çœ‹æœåŠ¡å™¨ç›‘å¬çŠ¶æ€ï¼Œåœ¨tcp 139,445ç«¯å£ä¸Šç›‘å¬

    netstat -lantp | grep 139
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2d2106dc0af342a898be93e2a1ca2300.png)  
å…³é—­é˜²ç«å¢™

    systemctl stop firealld; systemctl disable firewalld
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/549dddd1ef7a4e2589270a5646249142.png)  
é€šè¿‡smbclientå‘½ä»¤æŸ¥çœ‹æœåŠ¡å…±äº«çŠ¶æ€ï¼Œè¾“å…¥rootå¯†ç çœ‹åˆ°å½“å‰æœåŠ¡æ­£åœ¨è¿è¡Œ  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/e6fcf855751e4151b32673b315bbf33e.png)

4 æ·»åŠ Sambaç”¨æˆ·
-----------

ä½¿ç”¨useraddå‘½ä»¤æ·»åŠ ç”¨æˆ·smb  
è®¾ç½®ç”¨æˆ·smbçš„sambaæœåŠ¡å™¨å¯†ç 

    useradd -s /sbin/nologin -M smb
    smbpasswd -a smb
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/d2524dbb9f2c4b7688228cf94788d9d9.png)

5 åˆ›å»ºå…±äº«æ–‡ä»¶ç›®å½•
----------

åˆ›å»ºä¸€ä¸ªå…±äº«æ–‡ä»¶ç›®å½•shareç”¨äºå…¬å…±å…±äº«ï¼Œåˆ›å»ºä¸€ä¸ªç”¨æˆ·æ–‡ä»¶ç›®å½•smbï¼›  
å°†shareä¸smbç›®å½•æƒé™æ›´æ”¹ä¸º777æƒé™ï¼›

    mkdir /var/share /var/smb
    chmod 777 /var/share/ /var/smb/
    

6 ä¿®æ”¹Sambaé…ç½®æ–‡ä»¶
-------------

    vi /etc/samba/smb.conf
    

åœ¨globalæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

    [global]
            workgroup = SAMBA
            security = user
            map to guest = Bad User			#æ–°å¢æ­¤è¡Œ
            passdb backend = tdbsam
    
            printing = cups
            printcap name = cups
            load printers = yes
            cups options = raw
    

æ·»åŠ å…¬å…±shareç›®å½•ï¼Œå…è®¸åŒ¿åè®¿é—®ç›®å½•

    [share]
            comment = share
            path = /var/share
            guest ok = yes
            writeable = yes
            browseable = yes
    

é…ç½®å®Œæˆåä¿å­˜é€€å‡ºï¼Œç„¶åé‡å¯SambaæœåŠ¡

    systemctl restart smb
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/dc46f30ae2724f7b80f73c252adcf2fa.png)  
ä½¿ç”¨Windowsç”µè„‘è®¿é—®SambaæœåŠ¡å™¨ã€‚åœ¨è®¡ç®—æœºä¸Šæ‰“å¼€ä»»æ„æ–‡ä»¶ï¼Œè¾“å…¥å…±äº«è·¯å¾„\\ipçš„æ–¹å¼è®¿é—®æ–‡ä»¶å…±äº«æœåŠ¡  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/de070027fa3f41679a6cdf9fa17f3bc7.png)  
è¿›å…¥è¯¥æ–‡ä»¶ç›®å½•ï¼Œæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œå¯ä»¥æ­£å¸¸åˆ›å»ºï¼Œå…¬å…±æ–‡ä»¶å…±äº«ç›®å½•è®¾ç½®æˆåŠŸ  
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/dc9af97ee3124102bc07ea7d166360cb.png)

7 æ·»åŠ ç”¨æˆ·å…±äº«é…ç½®
----------

ç”¨æˆ·å…±äº«ç›®å½•smbçš„å±ä¸»

    chown smb:smb /var/smb/
    

ç¼–è¾‘Sambaé…ç½®æ–‡ä»¶/etc/samba/smb.confï¼Œæ·»åŠ ç”¨æˆ·å…±äº«é…ç½®ï¼Œä¿å­˜å¹¶é€€å‡ºç¼–è¾‘ã€‚

    [smb]
            comment = smb
            path = /var/smb
            write list = smb
            browseable = yes
            writeable = yes
            read list = smb
            valid users = smb
            create mask = 0777
            directory mask = 0777
    

é‡å¯SambaæœåŠ¡

    systemctl restart smb
    

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/d2c6f17399d740a8a980916941a020e9.png)  
è¯•ç‚¹å‡»smbè®¿é—®è¯¥ç›®å½•ï¼Œéœ€è¦è¾“å…¥è®¤è¯ä¿¡æ¯ï¼Œè¾“å…¥åœ¨æ­¥éª¤4ä¸­åˆ›å»ºçš„ç”¨æˆ·åŠå¯†ç ã€‚ç™»å½•è¯¥å…±äº«ç›®å½•

> æœŸå¾…ä¸‹æ¬¡çš„åˆ†äº«ï¼Œåˆ«å¿˜äº†ä¸‰è¿æ”¯æŒåšä¸»å‘€~  
> æˆ‘æ˜¯ **[å¿µèˆ’\_C.ying](https://blog.csdn.net/qq_52716296?type=blog)** ï¼ŒæœŸå¾…ä½ çš„å…³æ³¨~ğŸ’ªğŸ’ªğŸ’ª