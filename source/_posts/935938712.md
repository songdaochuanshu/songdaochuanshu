---
layout: post
title: "ã€å·¥å…·-Nginxã€‘ä»å…¥é—¨å®‰è£…åˆ°é«˜å¯ç”¨é›†ç¾¤æ­å»º"
date: "2022-05-19T12:37:53.164Z"
---
ã€å·¥å…·-Nginxã€‘ä»å…¥é—¨å®‰è£…åˆ°é«˜å¯ç”¨é›†ç¾¤æ­å»º
=======================

> æ–‡ç« å·²æ”¶å½•è‡³[https://lichong.work](https://lichong.work)ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ã€‚  
> psï¼šæ¬¢è¿å…³æ³¨å…¬ä¼—å·â€œFunè‚†ç¼–ç¨‹â€æˆ–æ·»åŠ æˆ‘çš„ç§äººå¾®ä¿¡äº¤æµç»éªŒğŸ¤

ä¸€.Nginxå®‰è£…é…ç½®åŠå¸¸ç”¨å‘½ä»¤
----------------

### 1.ç¯å¢ƒæ­å»º

é¦–å…ˆåœ¨linuxç³»ç»Ÿä¸‹å®‰è£…gccç¼–è¯‘ç¯å¢ƒï¼Œæ‰§è¡Œï¼š

    yum install gcc-c++ -y
    

ç¡®ä¿å½“å‰ç³»ç»Ÿå¯ä»¥ç¼–è¯‘nginxåŠå…¶ä¾èµ–åŒ…ã€‚

åŒæ—¶ï¼Œå®‰è£…Nginxè¿˜éœ€è¦ä»¥ä¸‹ä¾èµ–éœ€è¦è¿›è¡Œå®‰è£…ï¼š

    pcre-9.37.tar.gz
    
    openssl-1.0.1t.tar.gz
    
    zlib-1.2.8.tar.gz
    
    nginx-1.11.1.tar.gz
    

ä¸‹é¢é€šè¿‡ä¸¤ç§å®‰è£…æ–¹å¼å®‰è£…è¿™äº›ä¾èµ–ï¼Œå¯çµæ´»é€‰æ‹©å®‰è£…æ–¹å¼

#### (1)è”ç½‘ä¸‹è½½å‹ç¼©åŒ…å®‰è£…ä¾èµ–

##### (1.1)åœ¨linuxæ–‡ä»¶å¤¹ä¸‹ä¸‹è½½å‹ç¼©åŒ…ï¼Œè¿™é‡Œå·²/usr/srcæ–‡ä»¶å¤¹ä¸ºä¾‹

    cd /usr/src
    
    wget http://downloads.sourceforge.net/project/pcre/pcre/8.37/pcre-8.37.tar.gz
    

##### (1.2) è§£å‹å‹ç¼©æ–‡ä»¶åè¿›å…¥åˆ°è¯¥å‹ç¼©æ–‡ä»¶

    tar -xvf pcre-8.37.tar.gz
    
    cd pcre-8.37
    

##### (1.3)å¯¹å½“å‰å®‰è£…åŒ…è¿›è¡Œé…ç½®æ£€æŸ¥

    ./configure 
    

##### (1.4)è¿›è¡Œç¼–è¯‘å®‰è£…

    make && make install
    

##### (1.5)å®‰è£…å®Œæˆï¼Œå¯é€šè¿‡å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸåŠå½“å‰å®‰è£…ç‰ˆæœ¬

    pcre-config --version
    

#### (2)å®‰è£…nginxçš„ä¾èµ–

    yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel
    

### 2.Nginxå®‰è£…

#### (1)åˆ°[nginxå®˜ç½‘](https://nginx.org/en/download.html)ä¸‹è½½å®‰è£…nginxï¼Œæ¨èä¸‹è½½Stable versionï¼ˆç¨³å®šç‰ˆæœ¬ï¼‰ï¼Œæœ¬æ¬¡å®‰è£…ä»¥nginx1.20.2ä¸ºä¾‹ã€‚

![nginxä¸‹è½½](https://img2022.cnblogs.com/other/2550769/202205/2550769-20220519151321943-922549602.png)

#### (2)å°†nginxçš„å‹ç¼©åŒ…æ”¾åˆ°/usr/srcä¸­,è¿›å…¥è¯¥ç›®å½•ä¸‹å¯¹è¯¥å‹ç¼©åŒ…è¿›è¡Œè§£å‹

    cd /usr/src
    
    tar -xvf nginx-1.20.2.tar.gz
    

#### (3) è¿›å…¥åˆ°è§£å‹åçš„nginxæ–‡ä»¶å¤¹

    cd nginx-1.20.2
    

#### (4)å¯¹å½“å‰å®‰è£…åŒ…è¿›è¡Œé…ç½®æ£€æŸ¥

    ./configure
    

#### (5)è¿›è¡Œç¼–è¯‘å®‰è£…

    make && make install
    

#### (6)è¿›åˆ°/usr/local/nginx/sbinæ–‡ä»¶å¤¹ä¸­ï¼ˆå®‰è£…å®Œnginxä¼šåœ¨localæ–‡ä»¶å¤¹ä¸­è‡ªåŠ¨åˆ›å»ºnginxæ–‡ä»¶ï¼‰å¯åŠ¨nginx

    cd /usr/local/nginx/sbin 
    
    ./nginx
    

#### (7)æŸ¥çœ‹å·²å¯åŠ¨çš„nginxè¿›ç¨‹

    ps -ef | grep nginx
    

### 2.Nginxé…ç½®

#### (1) è¿›å…¥nginxçš„é…ç½®æ–‡ä»¶å¤¹

    cd /usr/local/nginx/conf
    

#### (2)æ‰“å¼€nginx.confæ–‡ä»¶

    vi nginx.conf
    

å…¶ä¸­

    server {
     listen    80;
     server_name localhost;
     #charset koi8-r;
     #access_log logs/host.access.log main;
     location / {
       root  html;
       index index.html index.htm;
      }
    }
    

å¦‚æœè¦é…ç½®å›ºå®šç«¯å£å·ï¼Œåˆ™åœ¨serverä¸­çš„listenä¸­ä¿®æ”¹ç«¯å£å·ã€‚æ­¤å¤„é»˜è®¤ä¸æ”¹åŠ¨ã€‚

#### (3) é˜²ç«å¢™å¼€æ”¾nginxçš„ç«¯å£ï¼Œæ­¤å¤„ä»¥80ç«¯å£ä¸ºä¾‹

    sudo firewall-cmd --add-port=80/tcp --permanent
    firewall-cmd --reload
    

#### (4)ä»æµè§ˆå™¨è®¿é—®è¯¥nginxï¼ˆæµè§ˆå™¨è®¿é—®linuxçš„ipåœ°å€ï¼‰

![nginx](https://img2022.cnblogs.com/other/2550769/202205/2550769-20220519151322313-373534580.png)

### 3.Nginxå¸¸ç”¨å‘½ä»¤

ä»¥ä¸‹å‘½ä»¤åŸºäºå·²ç»å®‰è£…æˆåŠŸNginxååœ¨Nginxçš„sbinæ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œã€‚

    cd /usr/local/nginx/sbin/ 
    

#### (1)æŸ¥çœ‹nginxçš„ç‰ˆæœ¬å·

    ./nginx â€“v
    

#### (2)å¯åŠ¨nginx

    ./nginx
    

#### (3) å…³é—­nginx

    ./nginx -s stop
    

#### (4) é‡æ–°åŠ è½½nginxï¼ˆä¸€èˆ¬ç”¨äºæ›´æ”¹å®Œconfä¸­çš„é…ç½®æ–‡ä»¶åï¼Œåœ¨ä¸é‡å¯nginxçš„æƒ…å†µä¸‹ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼‰

    ./nginx -s reload
    

äºŒã€åå‘ä»£ç†
------

è¿™é‡Œä»¥å·²ç»é…ç½®å¥½çš„nginxåå‘ä»£ç†tomcatä¸ºä¾‹ã€‚å®ç°æ•ˆæœåˆ™ä¸ºè®¿é—®nginxåœ°å€å±•ç¤ºtomcaté¡µé¢ã€‚

### 1.åœ¨linuxä¸­å®‰è£…å¹¶å¯åŠ¨å¥½tomcatç”¨äºæµ‹è¯•ï¼Œå¹¶ä¸”å¼€æ”¾tomcatçš„ç«¯å£å·ã€‚

### 2.åœ¨nginxçš„nginx.confé…ç½®æ–‡ä»¶ä¸­é…ç½®åå‘ä»£ç†

    cd /usr/local/nginx/conf
    
    vi nginx.conf
    

### 3.é…ç½®åå‘ä»£ç†

é¦–å…ˆå°†serverå—ä¸­çš„server\_nameä¿®æ”¹ä¸ºè¯¥linuxç³»ç»Ÿçš„ipåœ°å€ã€‚

ç„¶ååœ¨serverå—ä¸­çš„locationå½“ä¸­é…ç½®éœ€è¦è¯·æ±‚è½¬å‘çš„è·¯å¾„ï¼Œå…¶ä¸­proxy\_passåˆ™æ˜¯tomcatçš„åœ°å€ã€‚

    location / {
    	  root    html;
    	  proxy_pass http://127.0.0.1:8080;
    	}
    

### 4.è®¿é—®nginxåœ°å€

ä¸‰ã€è´Ÿè½½å‡è¡¡
------

nginxé…å¤‡å¤šå°æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œå¹³å‡è®¿é—®æ¯å°æœºå™¨ã€‚

æ­¤æ¬¡ä»¥ä¸¤å°tomcatæœåŠ¡å™¨ä¸ºä¾‹ï¼Œä¸€å°ç«¯å£ä¸º8080ï¼Œä¸€å°ç«¯å£ä¸º8081ã€‚

### 1.åœ¨nginxé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè´Ÿè½½å‡è¡¡çš„é…ç½®

é…ç½®æœåŠ¡å™¨åœ°å€

    upstream myserver{
    	server xxx.xx.xx.14:8080;
    	server xxx.xx.xx.14:8081;	
    }
    

    server{
    	listen    80;
    	server_name xxx.xx.xx.14
    	#charset koi8-r;
    	#access_log logs/host.access.log main;
    	location / {
    		proxy_pass  http://myserver; //è¿™é‡Œçš„myserveræ˜¯ä¸Šé¢é…ç½®çš„upstream
    		root  html;
    		index index.html index.htm;
      }
    }
    

### 2.è´Ÿè½½å‡è¡¡åˆ†é…ç­–ç•¥

#### 1.è½®è¯¢

é»˜è®¤æƒ…å†µä¸‹æ˜¯è½®è¯¢ç­–ç•¥ï¼Œåˆ°nginxæœåŠ¡å™¨ä¸­çš„æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨downè°ƒåˆ™è‡ªåŠ¨å‰”é™¤è¯¥æœåŠ¡å™¨

#### 2.æƒé‡weight

weighté»˜è®¤ä¸º1ï¼Œæƒé‡è¶Šé«˜è¢«åˆ†é…çš„å®¢æˆ·ç«¯è¶Šå¤šï¼Œå¯æ ¹æ®æœåŠ¡å™¨æ€§èƒ½æ¥é…ç½®ç›¸åº”çš„æƒé‡ã€‚

å¯åœ¨upstreamä¸­é…ç½®

    upstream myserver{
    
    	server xxx.xx.xx.14:8080  weight=2;//æ•°å€¼è¶Šå¤§åˆ™éœ€è¦å¤„ç†çš„è¯·æ±‚è¶Šå¤š
    	
    	server xxx.xx.xx.14:8081;	
    
    }
    

#### 3.ip\_hash

æ¯ä¸ªè¯·æ±‚æŒ‰ç…§è®¿é—®ipçš„hashç»“æœåˆ†é…ï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€ipè®¿é—®nginxä¼šä¸€ç›´è®²è¯·æ±‚å‘é€ç»™åŒä¸€å°æœåŠ¡å™¨ã€‚

    upstream myserver{
    	ip_hash;
    	server xxx.xx.xx.14:8080 ;
    	server xxx.xx.xx.14:8081;	
    }
    

éœ€è¦æ³¨æ„çš„nginx1.3.1ç‰ˆæœ¬ä¹‹å‰ip\_hashä¸èƒ½å’Œæƒé‡weightå…±åŒä½¿ç”¨ã€‚

å½“æœ‰æœåŠ¡å™¨éœ€è¦å‰”é™¤çš„æ—¶å€™ï¼Œéœ€è¦æ‰‹åŠ¨downæ‰

#### 4.fair

    upstream myserver{
    	ip_hash;
    	server xxx.xx.xx.14:8080 ;
    	server xxx.xx.xx.14:8081;	
        fair;
    }
    

æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…

#### 5.least\_conn

æŠŠè¯·æ±‚è½¬å‘ç»™è¿æ¥æ•°è¾ƒå°‘çš„åç«¯æœåŠ¡å™¨ã€‚åœ¨è¿™ç§æ–¹å¼ä¸‹å¯ä»¥è¾¾åˆ°æ›´å¥½çš„è´Ÿè½½å‡è¡¡æ•ˆæœ

    upstream myserver{
    	least_conn;
    	server xxx.xx.xx.14:8080 ;
    	server xxx.xx.xx.14:8081;	
    }
    

#### 6.url\_hash

æŒ‰è®¿é—®urlçš„hashç»“æœæ¥åˆ†é…è¯·æ±‚ï¼Œä½¿æ¯ä¸ªurlå®šå‘åˆ°åŒä¸€ä¸ªåç«¯æœåŠ¡å™¨ã€‚

    upstream myserver{
    	hash $request_uri;
    	server xxx.xx.xx.14:8080 ;
    	server xxx.xx.xx.14:8081;	
    }
    

å››ã€åŠ¨é™åˆ†ç¦»
------

æˆ‘ä»¬é€šè¿‡ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…è¿‡æ»¤ï¼Œä»¥æ­¤æ¥è¾¾åˆ°åŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢çš„æ“ä½œå¯ä»¥äº¤ç»™ä¸åŒçš„æœåŠ¡å™¨ã€‚

ä»¥ä¸‹é…ç½®å®ç°çš„æ˜¯å½“ä¸ºjpgï¼Œjså’Œcssæ–‡ä»¶çš„æ—¶å€™åˆ™è®¿é—®æœ¬åœ°htmlæ–‡ä»¶é‡Œçš„é™æ€èµ„æºï¼Œå¦‚æœè®¿é—®çš„æ˜¯åŠ¨æ€èµ„æºåˆ™ç”±8080ç«¯å£tomcatæœåŠ¡å™¨å¤„ç†

ä»¥ä¸‹æ˜¯nginx.confæ–‡ä»¶çš„é…ç½®

    server{
    
    listen    80;
    server_name xxx.xx.xx.14
    #charset koi8-r;
    #access_log logs/host.access.log main;
    location ~ \.jpg$ {
    	root  html;
    	expires 30d;
    }
    location ~ \.js$ {
    	root  html;
    	expires 30d;
    }
    location ~ \.css$ {
    	root  html;
    	expires 30d;
    }
    
    location ~ .*$ {
    	proxy_pass http://localhost:8080
    }
    
    }
    

äº”ã€é«˜å¯ç”¨é›†ç¾¤
-------

è¿™é‡Œä»‹ç»ä¸‹åŒæœºé«˜å¯ç”¨ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼š

**(ä¸€).Nginx+keepalivedåŒæœºä¸»ä»æ¨¡å¼**

ä¸€å°ä¸»æœåŠ¡å™¨å’Œä¸€å°çƒ­å¤‡æœåŠ¡å™¨ã€‚æ­£å¸¸æƒ…å†µä¸‹ä¸»æœåŠ¡å™¨æä¾›æœåŠ¡ï¼Œåªæœ‰å½“ä¸»æœåŠ¡å™¨å‘ç”Ÿæ•…éšœçš„æ—¶å€™çƒ­å¤‡æœåŠ¡å™¨æ‰ä¼šæ¥ç®¡ä¸»æœåŠ¡å™¨ã€‚ä½†æ˜¯å½“ä¸»æœåŠ¡å™¨ä¸å‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œåˆ™çƒ­å¤‡æœåŠ¡å™¨å°±ä¼šå¤„äºæµªè´¹çŠ¶æ€

**(äºŒ).Nginx+keepalivedåŒæœºä¸»ä¸»æ¨¡å¼**

ä½¿ç”¨ä¸¤å°è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼Œäº’ä¸ºä¸»å¤‡ï¼Œä¸¤å°æœåŠ¡å™¨éƒ½å±äºæ´»åŠ¨çŠ¶æ€ï¼Œåªæœ‰å½“å…¶ä¸­ä¸€å°å‘ç”Ÿæ•…éšœæ—¶ç”±å¦ä¸€å°æ¥ç®¡æ•…éšœæœåŠ¡å™¨çš„è¯·æ±‚ã€‚è¿™ç§æ–¹æ¡ˆæ¯”è¾ƒç»æµå®æƒ ã€‚

ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸‹è¿™ä¸¤ç§æ¨¡å¼çš„é…ç½®ï¼š

### 1.Nginx+keepalivedåŒæœºä¸»ä»æ¨¡å¼

é…å¤‡ä¸¤å°nginxæœåŠ¡å™¨ï¼Œæ¯å°ä¸­é…ç½®keepalivedã€‚

#### (1)é…å¤‡ä¸¤å°æœåŠ¡å™¨ï¼Œå¹¶ä¸”åœ¨ä¸¤å°æœåŠ¡å™¨ä¸­å®‰è£…nginxï¼ˆå®‰è£…è§ä¸Šï¼‰

#### (2)åœ¨ä¸¤å°æœåŠ¡å™¨ä¸­å®‰è£…keepalived

    yum install keepalived -y
    

#### (3)æ‰“å¼€keepalivedæ‰€åœ¨æ–‡ä»¶å¤¹

    cd /etc/keepalived/
    

#### (3)å¯¹keepalivedè¿›è¡Œé…ç½®

    vi keepalived.conf
    

#### (4)åœ¨keepalived.confå…·ä½“å‚æ•°é…ç½®

ä¸»æœåŠ¡å™¨é…ç½®å¦‚ä¸‹

    vrrp_instance VI_1 {
        state MASTER    //ä¸»ä»åˆ’åˆ†ï¼Œä¸»æœåŠ¡å™¨ä¸ºMASTERä»æœåŠ¡å™¨ä¸ºBACKUP
        interface eth0  //è®¾ç½®ä¸ºå½“å‰ç½‘å¡ï¼ˆé€šè¿‡ifconfigæŸ¥çœ‹ï¼‰
        virtual_router_id 51  //ä¸»ä»æœåŠ¡å™¨è®¾ç½®ç›¸åŒçš„id
        priority 100      //ä¼˜å…ˆçº§ ä¸»æœåŠ¡å™¨çš„ä¼˜å…ˆçº§è®¾ç½®ä¸ºè¾ƒå¤§ï¼Œä»æœåŠ¡å™¨æ¬¡ä¹‹
        advert_int 1
        authentication {
            auth_type PASS
            auth_pass 1111
        }
        virtual_ipaddress {
            xxx.xx.xx.111  //è™šæ‹Ÿåœ°å€ï¼Œæµè§ˆå™¨é€šè¿‡è¯¥åœ°å€è®¿é—®ï¼Œä¸»ä»é…ç½®ç›¸åŒ
        }
    }
    
    
    

ä»æœåŠ¡å™¨é…ç½®å¦‚ä¸‹

    vrrp_instance VI_1 {
        state BACKUP
        interface eth0 //è®¾ç½®ä¸ºå½“å‰ç½‘å¡ï¼ˆé€šè¿‡ifconfigæŸ¥çœ‹ï¼‰
        virtual_router_id 51
        priority 90
        advert_int 1
        authentication {
            auth_type PASS
            auth_pass 1111
        }
        virtual_ipaddress {
            xxx.xx.xx.111
        }
    }
    
    
    

ä¸»ä»æœåŠ¡å™¨éƒ½åœ¨keepalived.confä¸­æ·»åŠ å¦‚ä¸‹æ£€æµ‹è„šæœ¬æ£€æµ‹è„šæœ¬

    vrrp_script chk_http_port {
         script "usr/local/src/nginx_check.sh" //nginx_check.shæ‰€åœ¨ä½ç½®ï¼Œè¯¥æ–‡ä»¶é€šè¿‡ä¸‹ä¸ªæ­¥éª¤ä¸­æ–°å»º
         interval 2
         weight2
    }
    

åœ¨scripté…ç½®è·¯å¾„ä¸‹é…ç½®è¯¥æ£€æµ‹è„šæœ¬

    cd /usr/local/src/
    

å°†ä»¥ä¸‹è„šæœ¬ç”Ÿæˆnginx\_check.shæ–‡ä»¶æ”¾åˆ° usr/local/src/ä¸­

    #!/bin/bash
    A=`ps -C nginx â€“ no-header |wc -l` 
    if [ $A -eq 0 ];then 
    		/usr/local/nginx/sbin/nginx 
    		sleep 2 
    		if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then
    			 killall keepalived 
    		fi 
    fi
    

#### (5)ä¸¤å°æœåŠ¡å™¨ä¸Šå¯åŠ¨nginxå’Œkeepalived

    ./nginx
    
    systemctl start keepalived.service
    

#### (6)æµ‹è¯•

è®¿é—®keepalived.confä¸­é…ç½®çš„è™šæ‹Ÿipåœ°å€ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®æœåŠ¡å™¨ã€‚å°†ä¸»æœåŠ¡å™¨ä¸­çš„nginxä¸­åœæ­¢ï¼Œä»å¯æ­£å¸¸è®¿é—®ï¼Œæ­¤æ—¶è®¿é—®çš„å®é™…ä¸Šæ˜¯ä»æœåŠ¡å™¨ä¸Šçš„èµ„æº

### 2.Nginx+keepalivedåŒæœºä¸»ä¸»æ¨¡å¼

åœ¨ä¸¤å°æœºå™¨ä¸Šéƒ½å®‰è£…nginxå’Œkeepalivedã€‚å…·ä½“å®‰è£…æ–¹å¼è§ä¸Šã€‚

#### (1)ç¬¬ä¸€å°keepalivedé…ç½®

    ! Configuration File for keepalived
     
    global_defs {
       notification_email {
         acassen@firewall.loc
         failover@firewall.loc
         sysadmin@firewall.loc
       }
       notification_email_from Alexandre.Cassen@firewall.loc
       smtp_server 192.168.200.1
       smtp_connect_timeout 30
       router_id LVS_DEVEL
    }
     
    vrrp_script chk_http_port {
     
       script "usr/local/src/nginx_check.sh"
     
       interval 2      #ï¼ˆæ£€æµ‹è„šæœ¬æ‰§è¡Œçš„é—´éš”ï¼‰
     
       weight 2
     
    }
     
    vrrp_instance VI_1 {
        state MASTER
        interface eno16777736
        virtual_router_id 51
        priority 100
        advert_int 1
        authentication {
            auth_type PASS
            auth_pass 1111
        }
        virtual_ipaddress {
            xxx.xx.xx.112
        }
    }
     
    vrrp_instance VI_2 {
        state BACKUP
        interface eno16777736
        virtual_router_id 52
        priority 90
        advert_int 1
        authentication {
            auth_type PASS
            auth_pass 1111
        }
        virtual_ipaddress {
            xxx.xx.xx.113
        }
    }
    
    

#### (2)ç¬¬äºŒå°keepalivedé…ç½®

    ! Configuration File for keepalived
    
    global_defs {
       notification_email {
         acassen@firewall.loc
         failover@firewall.loc
         sysadmin@firewall.loc
       }
       notification_email_from Alexandre.Cassen@firewall.loc
       smtp_server 192.168.200.1
       smtp_connect_timeout 30
       router_id LVS_DEVEL
    }
    
    vrrp_script chk_http_port {
    
       script "usr/local/src/nginx_check.sh"
    
       interval 2      #ï¼ˆæ£€æµ‹è„šæœ¬æ‰§è¡Œçš„é—´éš”ï¼‰
    
       weight 2
    
    }
    
    vrrp_instance VI_1 {
        state BACKUP
        interface eno16777736
        virtual_router_id 51
        priority 90
        advert_int 1
        authentication {
            auth_type PASS
            auth_pass 1111
        }
        virtual_ipaddress {
            xxx.xx.xx.112
        }
    }
    
    vrrp_instance VI_2 {
        state MASTER
        interface eno16777736
        virtual_router_id 52
        priority 100
        advert_int 1
        authentication {
            auth_type PASS
            auth_pass 1111
        }
        virtual_ipaddress {
            xxx.xx.xx.113
        }
    }
    

åœ¨åŒæœºä¸»ä¸»æ¨¡å¼ä¸‹ï¼Œä¸¤å°æœåŠ¡å™¨éƒ½å±äºæ´»åŠ¨çŠ¶æ€ï¼Œåªæœ‰å½“å…¶ä¸­ä¸€å°å‘ç”Ÿæ•…éšœæ—¶ç”±å¦ä¸€å°æ¥ç®¡æ•…éšœæœåŠ¡å™¨çš„è¯·æ±‚ã€‚

å…­ã€æ¨èå‚æ•°é…ç½®
--------

å¯å‚è€ƒæ–‡ç« ï¼š[ã€å·¥å…·-Nginxã€‘Nginxé«˜æ€§èƒ½é€šç”¨é…ç½®æ–‡ä»¶-æ³¨é‡Šç‰ˆ-æ”¯æŒé˜²åˆ·é™æµã€å¯æ§é«˜å¹¶å‘ã€HTTP2ã€é˜²XSSã€Gzipã€OCSP Staplingã€è´Ÿè½½ã€SSL](https://lichong.blog.csdn.net/article/details/121453429)

> æ–‡ç« å·²æ”¶å½•è‡³[https://lichong.work](https://lichong.work)ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ã€‚  
> psï¼šæ¬¢è¿å…³æ³¨å…¬ä¼—å·â€œFunè‚†ç¼–ç¨‹â€æˆ–æ·»åŠ æˆ‘çš„ç§äººå¾®ä¿¡äº¤æµç»éªŒğŸ¤

\~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~**å¾€æœŸç²¾é€‰ğŸª¶**\~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

[ã€å‰ç«¯-å¼€å‘ç¯å¢ƒã€‘ä½¿ç”¨NVMå®ç°ä¸åŒnodejsç‰ˆæœ¬çš„è‡ªç”±åˆ‡æ¢ï¼ˆNVMå®Œæ•´å®‰è£…ä½¿ç”¨æ‰‹å†Œï¼‰](https://lichong.blog.csdn.net/article/details/118756713)  
[ã€å‰ç«¯-NPMç§æœã€‘å†…ç½‘ä½¿ç”¨verdaccioæ­å»ºç§æœ‰npmæœåŠ¡å™¨](https://lichong.blog.csdn.net/article/details/112506155)  
[ã€å‰ç«¯-IEå…¼å®¹ã€‘Win10å’ŒWin11ä½¿ç”¨Edgeè°ƒè¯•å‰ç«¯å…¼å®¹IE6ã€IE7ã€IE8ã€IE9ã€IE10ã€IE11é—®é¢˜](https://lichong.blog.csdn.net/article/details/122081257)  
[ã€å·¥å…·-Shellè„šæœ¬ã€‘javaç¨‹åºäº§å“åŒ…æ¨¡æ¿-linuxå’Œwindowsé€šç”¨shellå¯åŠ¨åœæ­¢è„šæœ¬(æ— éœ€ç³»ç»Ÿå®‰è£…Javaè¿è¡Œç¯å¢ƒ)](https://lichong.blog.csdn.net/article/details/121997601)  
[ã€å·¥å…·-Nginxã€‘Nginxé«˜æ€§èƒ½é€šç”¨é…ç½®æ–‡ä»¶-æ³¨é‡Šç‰ˆ-æ”¯æŒé˜²åˆ·é™æµã€å¯æ§é«˜å¹¶å‘ã€HTTP2ã€é˜²XSSã€Gzipã€OCSP Staplingã€è´Ÿè½½ã€SSL](https://lichong.blog.csdn.net/article/details/121453429)  
[ã€å·¥å…·-WireSharkã€‘ç½‘ç»œHTTPæŠ“åŒ…ä½¿ç”¨æ•™ç¨‹](https://lichong.blog.csdn.net/article/details/120820845)  
[ã€åç«¯-mavenæ‰“åŒ…ã€‘é€šè¿‡profileæ ‡ç­¾è§£å†³åŒæ—¶æ‰“jaråŒ… waråŒ…éœ€æ±‚](https://lichong.blog.csdn.net/article/details/119141750)  
[ã€åç«¯-SpringCacheã€‘åŸºäºSpring Cacheå°è£…ä¸€ä¸ªèƒ½å¤Ÿæ‰¹é‡æ“ä½œçš„Redisç¼“å­˜è®°å½•ä¸‹è¸©å‘å†ç¨‹ï¼ˆpipelineæˆ–mgetå°è£…ï¼‰](https://blog.csdn.net/lc1025082182/article/details/122297793)  
[ã€åç«¯-SkyWalkingã€‘SkyWalkingå‰åç«¯å¼€å‘ç¯å¢ƒæ­å»ºè¯¦ç»†æ•™ç¨‹æ­¥éª¤-6.x/7.x/8.xç‰ˆæœ¬é€šç”¨-æ’ä»¶äºŒæ¬¡å¼€å‘åˆ©å™¨ï¼ˆä¸€ï¼‰](https://lichong.blog.csdn.net/article/details/106214680)

**âœ¨æ¬¢è¿ä¸ºè€¿ç›´å°‘å¹´ç‚¹èµã€å…³æ³¨ã€æ”¶è—ï¼ï¼ï¼**

**ğŸ‘‡ğŸ‘‡ğŸ‘‡**