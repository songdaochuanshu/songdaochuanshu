---
layout: post
title: "Selenium4+Python3ç³»åˆ—ï¼ˆåä¸€ï¼‰ - Page Factoryè®¾è®¡æ¨¡å¼"
date: "2022-12-05T23:17:01.613Z"
---
Selenium4+Python3ç³»åˆ—ï¼ˆåä¸€ï¼‰ - Page Factoryè®¾è®¡æ¨¡å¼
==========================================

### å†™åœ¨å‰é¢ï¼š

`Page Object`æ¨¡å¼ï¼Œç›®çš„æ˜¯**å°†å…ƒç´ å®šä½å’Œå…ƒç´ æ“ä½œåˆ†å±‚ï¼Œåªæ¥è§¦æµ‹è¯•å†…å®¹ï¼Œä¸å†™åŸºç¡€å†…å®¹ï¼Œä¾¿äºåç»­å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ä½“ç³»çš„ç»´æŠ¤**ï¼Œè¿™æ˜¯ä¸­å¿ƒæ€æƒ³ï¼Œä¹Ÿæ˜¯æ ¸å¿ƒã€‚

é‚£ä¹ˆæˆ‘ä»¬ç»§ç»­å°†`ç®€æ´`å»¶ç»­ï¼Œè¿™é‡Œæ²¿ç”¨`Java`çš„`Page Factory`æ¨¡å¼æ€æƒ³ï¼Œæ—¨åœ¨**å‡å°‘ä»£ç å†—ä½™ï¼Œç®€å•æ˜“ç”¨ï¼Œå…·æœ‰é«˜åº¦çš„å¯æ‰©å±•èƒ½åŠ›ã€‚**

æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åŸºäº`Python` çš„`Page Factory`è®¾è®¡æ¨¡å¼

### Page Factoryçš„ä½¿ç”¨

ä½œç”¨ï¼š

*   æ”¯æŒä»¥æ³¨è§£çš„æ–¹å¼å®šä¹‰å…ƒç´ 
*   æ”¯æŒåŒä¸€ä¸ªå…ƒç´ å¤šç§å®šä½æ–¹å¼
*   æ”¯æŒåŠ¨æ€çš„å®šä½æ–¹å¼

#### 1ã€å®‰è£…

`pip install pythium`

#### 2ã€ä½¿ç”¨ Page Factory æ¨¡å¼å°†é¡µé¢å…ƒç´ åˆ†ç¦»

æˆ‘ä»¬å°†ç»§ç»­æ²¿ç”¨`Page Object`æ¨¡å¼çš„é£æ ¼ï¼Œè¿™é‡Œæˆ‘åˆåŠ äº†ä¸€å±‚è‡ªå·±æš‚æ—¶å®šä¹‰å«åŸºç¡€å±‚ï¼Œç°åœ¨å°±å˜æˆäº†å››å±‚ï¼šåŸºç¡€å±‚ã€å¯¹è±¡å±‚ã€æ“ä½œå±‚ã€ä¸šåŠ¡å±‚ã€‚

ä¸‹é¢å°†ä¸¾ä¾‹è¯´æ˜Page Factoryè®¾è®¡æ¨¡å¼ï¼Œä»¥ç™»é™†åŠŸèƒ½ä¸ºä¾‹ï¼Œæ¥åšè¿›ä¸€æ­¥è®²è§£ã€‚

#### 3ã€åŸºç¡€å±‚

ç”¨æ¥å­˜æ”¾`driver`åŠåˆå§‹åŒ–ä½¿ç”¨ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

    # -*- coding: utf-8 -*-
    """
    @Time ï¼š 2022/12/5 21:07
    @Auth ï¼š è½¯ä»¶æµ‹è¯•å›
    @File ï¼šBasePage.py
    @IDE ï¼šPyCharm
    @Mottoï¼šABC(Always Be Coding)
    """
    from selenium import webdriver
    from webdriver_manager.chrome import ChromeDriverManager
    
    from pagefactory.LoginPage import LoginPage
    
    
    class BasePage(object):
        """
        ç”¨æ¥å­˜æ”¾driveråŠåˆå§‹åŒ–ä½¿ç”¨
        """
    
        def __init__(self) -> None:
            """
            åˆå§‹åŒ–driver
            """
            self.driver = webdriver.Chrome(ChromeDriverManager().install())
            self.driver.maximize_window()
    
        def open_url(self, url: str) -> None:
            """
            æ‰“å¼€é¡¹ç›®é¦–é¡µ
            :param url:
            :return:
            """
            self.driver.get(url)
    
        def quit_browser(self) -> None:
            """
            é€€å‡ºæµè§ˆå™¨
            :return:
            """
            self.driver.quit()
    
        def get_LoginPage(self) -> LoginPage:
            # è¿”å›ç™»é™†å®ä½“
            return LoginPage(self.driver)
    

#### 4ã€å¯¹è±¡å±‚

ç”¨äºå­˜æ”¾é¡µé¢å…ƒç´ å®šä½å’Œæ§ä»¶æ“ä½œï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

    # -*- coding: utf-8 -*-
    """
    @Time ï¼š 2022/12/5 21:13
    @Auth ï¼š è½¯ä»¶æµ‹è¯•å›
    @File ï¼šLoginPage.py
    @IDE ï¼šPyCharm
    @Mottoï¼šABC(Always Be Coding)
    """
    import time
    
    from pythium import find_by, Page
    from selenium.webdriver.remote.webelement import WebElement
    
    
    class LoginPage(Page):
        """
        ç”¨äºå­˜æ”¾é¡µé¢å…ƒç´ å®šä½å’Œæ§ä»¶æ“ä½œ
        """
    
        # å®šä½ç”¨æˆ·åå…ƒç´ 
        @find_by(css="input[type='text']")
        def username_el(self) -> WebElement: ...
    
        # å®šä½å¯†ç å…ƒç´ 
        @find_by(css="input[type='password']")
        def password_el(self) -> WebElement: ...
    
        # å®šä½ç™»é™†å…ƒç´ 
        @find_by(name="submit")
        def loginbtn_el(self) -> WebElement: ...
    
        # å®šä½é”™è¯¯ä¿¡æ¯å…ƒç´ 
        @find_by(id_="alert")
        def errormsg_el(self) -> WebElement: ...
    
        # è¾“å…¥ç”¨æˆ·å
        def send_username(self, username: str):
            """
            è¾“å…¥ç”¨æˆ·å
            :param self:
            :param username:
            :return:
            """
            self.username_el().clear()
            self.username_el().send_keys(username)
    
        # è¾“å…¥å¯†ç 
        def send_password(self, password: str):
            """
            è¾“å…¥å¯†ç 
            :param self:
            :param password:
            :return:
            """
            self.password_el().clear()
            self.password_el().send_keys(password)
    
        # ç‚¹å‡»ç™»é™†æŒ‰é’®
        def click_loginbtn(self):
            """
            ç‚¹å‡»ç™»é™†æŒ‰é’®
            :return:
            """
            self.loginbtn_el().click()
    
        # è·å–é”™è¯¯ä¿¡æ¯
        def get_erorMsg(self) -> str:
            """
            è·å–é”™è¯¯ä¿¡æ¯
            :return:
            """
            time.sleep(1)
            return self.errormsg_el().text
    

#### 5ã€æ“ä½œå±‚

åˆ™æ˜¯ä¸€äº›å°è£…å¥½çš„åŠŸèƒ½ç”¨ä¾‹æ¨¡å—ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆæˆ‘ä»¬å†™æµ‹è¯•ç”¨ä¾‹çš„æ­¥éª¤ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

    # -*- coding: utf-8 -*-
    """
    @Time ï¼š 2022/12/5 21:33
    @Auth ï¼š è½¯ä»¶æµ‹è¯•å›
    @File ï¼šLoginAction.py
    @IDE ï¼šPyCharm
    @Mottoï¼šABC(Always Be Coding)
    """
    from pagefactory.BasePage import BasePage
    
    
    class LoginAction(object):
        """
        ç™»é™†æ“ä½œ
        """
    
        def login(self, username: str, password: str):
            """
            ç™»é™†æ“ä½œ
            :param username: ç”¨æˆ·å
            :param password: å¯†ç 
            :return:
            """
            basepage = BasePage()
            basepage.open_url('http://localhost:8080/login')
            basepage.get_LoginPage().send_username(username)
            basepage.get_LoginPage().send_password(password)
            basepage.get_LoginPage().click_loginbtn()
            msg = basepage.get_LoginPage().get_erorMsg()
            basepage.quit_browser()
            return msg
    

#### 6ã€ä¸šåŠ¡å±‚

åˆ™æ˜¯æˆ‘ä»¬çœŸæ­£çš„æµ‹è¯•ç”¨ä¾‹çš„æ“ä½œéƒ¨åˆ†ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š

    # -*- coding: utf-8 -*-
    """
    @Time ï¼š 2022/12/5 21:40
    @Auth ï¼š è½¯ä»¶æµ‹è¯•å›
    @File ï¼šTestLogin.py
    @IDE ï¼šPyCharm
    @Mottoï¼šABC(Always Be Coding)
    """
    import unittest
    
    from pagefactory.LoginAction import LoginAction
    
    
    class TestLogin(unittest.TestCase):
        """
        æµ‹è¯•ç™»é™†åŠŸèƒ½
        """
        def test_login(self):
            msg = LoginAction().login("1", "1")
            self.assertEquals(msg, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼")
    

ä»ä»¥ä¸Šä»£ç çœ‹ï¼Œå¦‚æœé¡µé¢å…ƒç´ å‘ç”Ÿå˜åŒ–ï¼Œæˆ‘ä»¬åœ¨å¯¹åº”ç±»é‡Œä¿®æ”¹å¯¹åº”å…ƒç´ å³å¯ï¼Œè€Œæ“ä½œå’Œä¸šåŠ¡å±‚æµç¨‹ç±»åŠç”¨ä¾‹éƒ½ä¸ç”¨æ”¹ï¼Œå¦‚æœä»…æ˜¯ä¸šåŠ¡æµç¨‹æ›´æ”¹ï¼Œåªéœ€è¦ç»´æŠ¤ä¸šåŠ¡å±‚æµç¨‹ç±»ä¸šåŠ¡è„šæœ¬ï¼Œå…¶ä»–å‡ ä¸ªç±»éƒ½ä¸ç”¨æ”¹ï¼Œä»è€Œåšåˆ°äº†å¾ˆå¥½çš„å°†é¡µé¢ã€å…ƒç´ ã€è„šæœ¬è¿›è¡Œäº†åˆ†ç¦»ã€‚

è‡³æ­¤ï¼Œå…³äº`Page Factory`çš„ä½¿ç”¨åˆ†äº«å®Œæ¯•ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œæ‹“å±•ã€‚

### å†™åœ¨æœ€å

åˆæœ‰å¾ˆä¹…æ²¡æœ‰æ›´æ–‡äº†ï¼Œå› ä¸ºä¸€ç›´éƒ½æ˜¯`996`å·¥ä½œåˆ¶ï¼Œå¾ˆéš¾æœ‰æ—¶é—´å»å†™æ–‡ç« ï¼Œè¿™é‡Œè¿˜è¯·å„ä½ç²‰ä¸æœ‹å‹ç†è§£ï¼Œä¸è¿‡ï¼Œæˆ‘ä¼šåŠªåŠ›æŒç»­æ›´æ–‡ã€‚

æˆ‘æ˜¯å…­å“¥ï¼Œå¦‚æœè§‰å¾—æ–‡ç« å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»§ç»­å…³æ³¨æˆ‘ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œä¸æ±‚æ‰“èµï¼Œåªæ±‚è½¬å‘ï¼ğŸ™

**ä¼˜ç§€ä¸å¤Ÿï¼Œä½ æ˜¯å¦æ— å¯æ›¿ä»£**

**è½¯ä»¶æµ‹è¯•äº¤æµQQç¾¤ï¼š721256703ï¼ŒæœŸå¾…ä½ çš„åŠ å…¥ï¼ï¼**

**æ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼šè½¯ä»¶æµ‹è¯•å›**

![](https://www.cnblogs.com/images/cnblogs_com/longronglang/1061549/o_QQ%E6%88%AA%E5%9B%BE20190728134401.jpg)