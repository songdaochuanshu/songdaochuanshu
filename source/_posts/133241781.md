---
layout: post
title: "ä¼ä¸šè¿ç»´ | MySQLå…³ç³»å‹æ•°æ®åº“åœ¨Dockerä¸Kuberneteså®¹å™¨ç¯å¢ƒä¸­å¿«é€Ÿæ­å»ºéƒ¨ç½²ä¸»ä»å®è·µ"
date: "2022-10-02T05:47:13.142Z"
---
ä¼ä¸šè¿ç»´ | MySQLå…³ç³»å‹æ•°æ®åº“åœ¨Dockerä¸Kuberneteså®¹å™¨ç¯å¢ƒä¸­å¿«é€Ÿæ­å»ºéƒ¨ç½²ä¸»ä»å®è·µ
===================================================

![ä¼ä¸šè¿ç»´ | MySQLå…³ç³»å‹æ•°æ®åº“åœ¨Dockerä¸Kuberneteså®¹å™¨ç¯å¢ƒä¸­å¿«é€Ÿæ­å»ºéƒ¨ç½²ä¸»ä»å®è·µ](https://img2022.cnblogs.com/blog/2176087/202210/2176087-20221001090119602-1518028262.png) MySQL æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¼€æºå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ (RDBMS)ï¼Œå…¶ä¹…ç»è€ƒéªŒçš„æ€§èƒ½ã€å¯é æ€§å’Œæ˜“ç”¨æ€§ï¼ŒMySQL å·²æˆä¸ºåŸºäº Web çš„åº”ç”¨ç¨‹åºçš„é¢†å…ˆæ•°æ®åº“é€‰æ‹©ï¼Œä¼ä¸šè¿ç»´MySQLå…³ç³»å‹æ•°æ®åº“åœ¨Dockerä¸Kuberneteså®¹å™¨ç¯å¢ƒä¸­å¿«é€Ÿæ­å»ºéƒ¨ç½²ä¸»ä»å®è·µ

\[ [ç‚¹å‡» ğŸ‘‰ å…³æ³¨ã€Œ WeiyiGeekã€å…¬ä¼—å·](https://www.weiyigeek.top/wechat.html?key=æ¬¢è¿å…³æ³¨) \]

è®¾ä¸ºã€Œâ­ï¸ **æ˜Ÿæ ‡**ã€æ¯å¤©å¸¦ä½ ç©è½¬ç½‘ç»œå®‰å…¨è¿ç»´ã€åº”ç”¨å¼€å‘ã€ç‰©è”ç½‘IOTå­¦ä¹ ï¼

å¸Œæœ›å„ä½çœ‹å‹ã€å…³æ³¨ã€ç‚¹èµã€è¯„è®ºã€æ”¶è—ã€æŠ•å¸ã€‘ï¼ŒåŠ©åŠ›æ¯ä¸€ä¸ªæ¢¦æƒ³ã€‚

![å¸…å“¥ï¼ˆé“ä»”ï¼‰ã€ç¾å¥³ï¼Œç‚¹ä¸ªå…³æ³¨åç»­ä¸è¿·è·¯](https://img2022.cnblogs.com/blog/2176087/202207/2176087-20220725152944616-1919009969.jpg)

* * *

**æœ¬ç« ç›®å½•**

ç›®å½•

*   [1.Docker å¿«é€Ÿéƒ¨ç½² MySQL æ•°æ®åº“æœåŠ¡å™¨](#1docker-å¿«é€Ÿéƒ¨ç½²-mysql-æ•°æ®åº“æœåŠ¡å™¨)
    *   [å‘½ä»¤æ–¹å¼](#å‘½ä»¤æ–¹å¼)
    *   [é…ç½®æ¸…å•](#é…ç½®æ¸…å•)
*   [2.Kubernetes å¿«é€Ÿéƒ¨ç½² MySQL æ•°æ®åº“æœåŠ¡å™¨](#2kubernetes-å¿«é€Ÿéƒ¨ç½²-mysql-æ•°æ®åº“æœåŠ¡å™¨)
    *   [å•å®ä¾‹æ¨¡å¼](#å•å®ä¾‹æ¨¡å¼)
    *   [ä¸»ä»åŒæ­¥æ¨¡å¼](#ä¸»ä»åŒæ­¥æ¨¡å¼)

* * *

é¦–å‘åœ°å€: [https://mp.weixin.qq.com/s/7mmIsd83QPT65QnQd5CtFQ](https://mp.weixin.qq.com/s/7mmIsd83QPT65QnQd5CtFQ)

æ¸©é¦¨æç¤ºï¼š[å”¯ä¸€æå®¢æŠ€æœ¯åšå®¢](https://blog.weiyigeek.top)æ–‡ç« åœ¨çº¿æµè§ˆã€**æå®¢å…¨æ ˆä¿®ç‚¼**ã€‘å°ç¨‹åºä¸Šçº¿äº†ï¼Œæ¶‰åŠç½‘ç»œå®‰å…¨ã€ç³»ç»Ÿè¿ç»´ã€åº”ç”¨å¼€å‘ã€ç‰©è”ç½‘å®æˆ˜ã€å…¨æ ˆæ–‡ç« ï¼Œå¸Œæœ›å’Œå¤§å®¶ä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼Œæ¬¢è¿æµè§ˆäº¤æµï¼ï¼ˆå¸Œæœ›å¤§å®¶å¤šå¤šæææ„è§ï¼‰

![WeiyiGeek.æå®¢å…¨æ ˆä¿®ç‚¼å°ç¨‹åº](https://img2022.cnblogs.com/blog/2176087/202209/2176087-20220921092441986-429373120.png)

\---

1.Docker å¿«é€Ÿéƒ¨ç½² MySQL æ•°æ®åº“æœåŠ¡å™¨
--------------------------

MySQL æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¼€æºå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ (RDBMS)ï¼Œå…¶ä¹…ç»è€ƒéªŒçš„æ€§èƒ½ã€å¯é æ€§å’Œæ˜“ç”¨æ€§ï¼ŒMySQL å·²æˆä¸ºåŸºäº Web çš„åº”ç”¨ç¨‹åºçš„é¢†å…ˆæ•°æ®åº“é€‰æ‹©ã€‚

MySQL å¸®åŠ©æ–‡æ¡£ï¼š[https://docs.oracle.com/en-us/iaas/mysql-database/doc/getting-started.html](https://docs.oracle.com/en-us/iaas/mysql-database/doc/getting-started.html)  
é•œåƒä»“åº“åœ°å€ï¼š[https://hub.docker.com/\_/mysql](https://hub.docker.com/_/mysql)  
é•œåƒé—®é¢˜ï¼š[https://github.com/docker-library/mysql/issues](https://github.com/docker-library/mysql/issues)

æ¸©é¦¨æç¤ºï¼šæ­¤å¤„å®è·µç¯å¢ƒæ˜¯ä½¿ç”¨Docker,è‹¥ä½ æ²¡æœ‰å®‰è£…Dockerç¯å¢ƒæˆ–è€…ä¸äº†è§£çš„Dockerå®¹å™¨çš„æœ‹å‹ï¼Œå¯ä»¥å‚è€ƒåšä¸»å­¦ä¹ ã€Dockerçš„ç³»åˆ—ç¬”è®°ã€‘æ±‡æ€»:  
[https://blog.weiyigeek.top/2018/1-1-1.html#Dockerå®¹å™¨å­¦ä¹ ä¹‹è·¯æ±‡æ€»](https://blog.weiyigeek.top/2018/1-1-1.html#Docker%E5%AE%B9%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%E6%B1%87%E6%80%BB)

  

### å‘½ä»¤æ–¹å¼

æ­¥éª¤ 01.å¿«é€Ÿéƒ¨ç½²è„šæœ¬å‘½ä»¤ã€‚

    # å‡†å¤‡æ•°æ®æŒä¹…åŒ–ç›®å½•
    mkdir -vp /app/data
    
    # å‡†å¤‡mysql8.xä»“åº“é•œåƒ
    docker pull mysql:8.0.30
    
    # å‡†å¤‡rootå¯†ç ä¸é‡‡ç”¨ç¯å¢ƒå˜é‡ç›´æ¥æ˜¾ç¤ºå¯†ç 
    echo "weiyigeek.top" > /app/my-secret-pw
    
    # ä¸€æ¡å‘½ä»¤åˆ›å»ºè¿è¡Œmysqlæ•°æ®åº“å®¹å™¨
    docker run -d --name mysql8.0 --restart=always \
    -v "/app/data":/var/lib/mysql \
    -v "/app/my-secret-pw":/app/my-secret-pw \
    -e MYSQL_ROOT_PASSWORD_FILE=/app/my-secret-pw \
    -e MYSQL_DATABASE=app \
    -e MYSQL_USER=weiyigeek \
    -e MYSQL_PASSWORD=password \
    -p 3306:3306 \
    mysql:8.0.30 \
    --default-authentication-plugin=mysql_native_password
    # 144e883af1a99901913a986d540382c8aefe3e5bd96730ad76a019b2567159bb
    
    # å¯ä»¥ä¸º mysqld ä½¿ç”¨ç‰¹å®šçš„ UID/GID , ä¾‹å¦‚æ­¤å¤„çš„ 1000 ç”¨æˆ·ã€‚
    --user 1000:1000 
    
    # å¯ä»¥ä¸º mysqld æŒ‡å®šå‘½ä»¤è¡Œå‚æ•°ã€‚
    --character-set-server=utf8mb4 
    --collation-server=utf8mb4_unicode_ci
    

  

æ­¥éª¤ 02.æŸ¥çœ‹éªŒè¯åœ¨Dockerä¸­çš„éƒ¨ç½²æƒ…å†µã€‚

    # å®¹å™¨
    $ docker ps
    CONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS              PORTS                               NAMES
    05c5a0e23e39   mysql:8.0.30   "docker-entrypoint.sâ€¦"   About a minute ago   Up About a minute   0.0.0.0:3306->3306/tcp, 33060/tcp   mysql8.0
    
    # æ—¥å¿—
    $ docker logs mysql8.0
    2022-09-27 14:19:03+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.30-1.el8 started.
    2022-09-27 14:19:03+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
    2022-09-27 14:19:03+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.30-1.el8 started.
    2022-09-27 14:19:03+00:00 [Note] [Entrypoint]: Initializing database files
    
    # è¿æ¥æµ‹è¯•
    $ docker exec -it mysql8.0 sh -c 'mysql -u root -p"weiyigeek.top"'
    mysql: [Warning] Using a password on the command line interface can be insecure.
    mysql> select @@version;
    +-----------+
    | @@version |
    +-----------+
    | 8.0.30    |
    +-----------+
    1 row in set (0.00 sec)
    

  

æ­¥éª¤ 03.éƒ¨ç½² Adminer è¿›è¡Œç®¡ç†è¿æ¥ MySQL æ•°æ®åº“, Adminer æ˜¯ä¸€ä¸ªç±»ä¼¼äº phpMyAdmin çš„ MySQL ç®¡ç†å®¢æˆ·ç«¯ã€‚  
Adminer å¯ç”¨äºè¿æ¥ `MySQL, PostgreSQL, SQLite, MSSQL, Oracle, Firebird, SimpleDB, Elasticsearch and MongoDB` ç­‰æ•°æ®åº“ã€‚

    docker pull adminer:latest
    
    # Standalone
    docker run -d --restart unless-stopped --name db_adminer -p 8080:8080 adminer:latest
    
    # FastCGI
    docker run -d --name db_admine_fastcgi --link some_database:db -p 9000:9000 adminer:fastcgi
    

éšåä½¿ç”¨æµè§ˆå™¨è®¿é—®å®¿ä¸»æœºçš„8080ç«¯å£è¿›è¡Œè¿æ¥:

![WeiyiGeek.db_adminer](https://img2022.cnblogs.com/blog/2176087/202209/2176087-20220930132211144-1915353276.png)

æ¸©é¦¨æç¤ºï¼šMySQLçš„é»˜è®¤é…ç½®å¯ä»¥åœ¨ `/etc/mysql/my.cnf`ï¼Œæˆ–å¯ä»¥è‡ªå®šä¹‰é…ç½®æ–‡ä»¶`/etc/mysql/conf.d/my.cnf`

    tee my.cnf <<'EOF'
    [mysqld]
    # æ‰§è¡Œç”¨æˆ·
    user=mysql
    
    # å¼€æ”¾ç›‘å¬æœåŠ¡ç«¯å£
    port=3306
    bind-address=*
    socket=/var/run/mysqld/mysqld.sock
    
    # æ•°æ®ç›®å½•
    datadir=/var/lib/mysql
    
    # è¿›ç¨‹ pid æ–‡ä»¶
    pid-file=/var/run/mysqld/mysqld.pid
    
    # æ’ä»¶é»˜è®¤è·¯å¾„
    plugin-dir=/usr/lib64/mysql/plugin/
    
    # å®‰å…¨æ–‡ä»¶è·¯å¾„
    secure-file-priv=/var/lib/mysql-files
    
    # å¯ç”¨æ—¥å¿—ä¸è·¯å¾„è®¾ç½®
    general-log=on
    general-log-file=/var/lib/mysql/mysql8x.log
    
    # æœåŠ¡å™¨å­—ç¬¦é›†è®¾ç½®
    character-set-server=utf8mb4 
    collation-server=utf8mb4_unicode_ci
    
    # æ•°æ®åº“å®¹ç¾binlogå¯ç”¨é…ç½®
    log-bin=binlog
    log-bin-index=binlog.index
    
    # è®¤è¯å¯†ç ç­–ç•¥, é»˜è®¤ aching_sha2_password , é’ˆå¯¹äºoldé“¾æ¥è®¤è¯æ–¹å¼ä¸º mysql_native_password
    default-authentication-plugin=mysql_native_password
    
    # è·³è¿‡æŸäº›æ“ä½œ
    skip-host-cache
    skip-name-resolve
    
    [client]
    socket=/var/run/mysqld/mysqld.sock
    EOF
    

æ¸©é¦¨æç¤ºï¼šå¦‚æœæ‚¨æƒ³æŸ¥çœ‹ `mysqld` å¯ç”¨é€‰é¡¹çš„å®Œæ•´åˆ—è¡¨ï¼Œåªéœ€è¿è¡Œ

> $ docker run -it --rm mysql:8.0.30 --verbose --help

    # my.cnf å¯ç”¨é…ç½®
    Variables (--variable-name=value)
    and boolean options {FALSE|TRUE}                             Value (after reading options)
    ------------------------------------------------------------ -------------
    abort-slave-event-count                                      0
    activate-all-roles-on-login                                  FALSE
    admin-address                                                (No default value)
    admin-port                                                   33062
    admin-ssl                                                    TRUE
    admin-ssl-ca                                                 (No default value)
    admin-ssl-capath                                             (No default value)
    admin-ssl-cert                                               (No default value)
    admin-ssl-cipher                                             (No default value)
    admin-ssl-crl                                                (No default value)
    admin-ssl-crlpath                                            (No default value)
    admin-ssl-key                                                (No default value)
    admin-tls-ciphersuites                                       (No default value)
    admin-tls-version                                            TLSv1.2,TLSv1.3
    allow-suspicious-udfs                                        FALSE
    archive                                                      ON
    authentication-policy                                        *,,
    auto-generate-certs                                          TRUE
    auto-increment-increment                                     1
    auto-increment-offset                                        1
    autocommit                                                   TRUE
    automatic-sp-privileges                                      TRUE
    avoid-temporal-upgrade                                       FALSE
    back-log                                                     151
    basedir                                                      /usr/
    big-tables                                                   FALSE
    bind-address                                                 *
    binlog-cache-size                                            32768
    binlog-checksum                                              CRC32
    binlog-direct-non-transactional-updates                      FALSE
    binlog-encryption                                            FALSE
    binlog-error-action                                          ABORT_SERVER
    binlog-expire-logs-auto-purge                                TRUE
    binlog-expire-logs-seconds                                   2592000
    binlog-format                                                ROW
    binlog-group-commit-sync-delay                               0
    binlog-group-commit-sync-no-delay-count                      0
    binlog-gtid-simple-recovery                                  TRUE
    binlog-max-flush-queue-time                                  0
    binlog-order-commits                                         TRUE
    binlog-rotate-encryption-master-key-at-startup               FALSE
    binlog-row-event-max-size                                    8192
    binlog-row-image                                             FULL
    binlog-row-metadata                                          MINIMAL
    binlog-row-value-options
    binlog-rows-query-log-events                                 FALSE
    binlog-stmt-cache-size                                       32768
    binlog-transaction-compression                               FALSE
    binlog-transaction-compression-level-zstd                    3
    binlog-transaction-dependency-history-size                   25000
    binlog-transaction-dependency-tracking                       COMMIT_ORDER
    blackhole                                                    ON
    block-encryption-mode                                        aes-128-ecb
    bulk-insert-buffer-size                                      8388608
    caching-sha2-password-auto-generate-rsa-keys                 TRUE
    caching-sha2-password-digest-rounds                          5000
    caching-sha2-password-private-key-path                       private_key.pem
    caching-sha2-password-public-key-path                        public_key.pem
    character-set-client-handshake                               TRUE
    character-set-filesystem                                     binary
    character-set-server                                         utf8mb4
    character-sets-dir                                           /usr/share/mysql-8.0/charsets/
    check-proxy-users                                            FALSE
    chroot                                                       (No default value)
    collation-server                                             utf8mb4_0900_ai_ci
    completion-type                                              NO_CHAIN
    concurrent-insert                                            AUTO
    connect-timeout                                              10
    connection-memory-chunk-size                                 8912
    connection-memory-limit                                      18446744073709551615
    console                                                      FALSE
    create-admin-listener-thread                                 FALSE
    cte-max-recursion-depth                                      1000
    daemonize                                                    FALSE
    datadir                                                      /var/lib/mysql/
    default-authentication-plugin                                caching_sha2_password
    default-password-lifetime                                    0
    default-storage-engine                                       InnoDB
    default-table-encryption                                     FALSE
    default-time-zone                                            (No default value)
    default-tmp-storage-engine                                   InnoDB
    default-week-format                                          0
    delay-key-write                                              ON
    delayed-insert-limit                                         100
    delayed-insert-timeout                                       300
    delayed-queue-size                                           1000
    disabled-storage-engines
    disconnect-on-expired-password                               TRUE
    disconnect-slave-event-count                                 0
    div-precision-increment                                      4
    end-markers-in-json                                          FALSE
    enforce-gtid-consistency                                     FALSE
    eq-range-index-dive-limit                                    200
    event-scheduler                                              ON
    expire-logs-days                                             0
    explicit-defaults-for-timestamp                              TRUE
    external-locking                                             FALSE
    federated                                                    OFF
    flush                                                        FALSE
    flush-time                                                   0
    ft-boolean-syntax                                            + -><()~*:""&|
    ft-max-word-len                                              84
    ft-min-word-len                                              4
    ft-query-expansion-limit                                     20
    ft-stopword-file                                             (No default value)
    gdb                                                          FALSE
    general-log                                                  FALSE
    general-log-file                                             /var/lib/mysql/a29706ab34c6.log
    generated-random-password-length                             20
    global-connection-memory-limit                               18446744073709551615
    global-connection-memory-tracking                            FALSE
    group-concat-max-len                                         1024
    group-replication-consistency                                EVENTUAL
    gtid-executed-compression-period                             0
    gtid-mode                                                    OFF
    help                                                         TRUE
    histogram-generation-max-mem-size                            20000000
    host-cache-size                                              279
    information-schema-stats-expiry                              86400
    init-connect
    init-file                                                    (No default value)
    init-replica
    init-slave
    initialize                                                   FALSE
    initialize-insecure                                          FALSE
    innodb-adaptive-flushing                                     TRUE
    innodb-adaptive-flushing-lwm                                 10
    innodb-adaptive-hash-index                                   TRUE
    innodb-adaptive-hash-index-parts                             8
    innodb-adaptive-max-sleep-delay                              150000
    innodb-api-bk-commit-interval                                5
    innodb-api-disable-rowlock                                   FALSE
    innodb-api-enable-binlog                                     FALSE
    innodb-api-enable-mdl                                        FALSE
    innodb-api-trx-level                                         0
    innodb-autoextend-increment                                  64
    innodb-autoinc-lock-mode                                     2
    innodb-buffer-pool-chunk-size                                134217728
    innodb-buffer-pool-dump-at-shutdown                          TRUE
    innodb-buffer-pool-dump-now                                  FALSE
    innodb-buffer-pool-dump-pct                                  25
    innodb-buffer-pool-filename                                  ib_buffer_pool
    innodb-buffer-pool-in-core-file                              TRUE
    innodb-buffer-pool-instances                                 0
    innodb-buffer-pool-load-abort                                FALSE
    innodb-buffer-pool-load-at-startup                           TRUE
    innodb-buffer-pool-load-now                                  FALSE
    innodb-buffer-pool-size                                      134217728
    innodb-change-buffer-max-size                                25
    innodb-change-buffering                                      all
    innodb-checksum-algorithm                                    crc32
    innodb-cmp-per-index-enabled                                 FALSE
    innodb-commit-concurrency                                    0
    innodb-compression-failure-threshold-pct                     5
    innodb-compression-level                                     6
    innodb-compression-pad-pct-max                               50
    innodb-concurrency-tickets                                   5000
    innodb-data-file-path                                        ibdata1:12M:autoextend
    innodb-data-home-dir                                         (No default value)
    innodb-ddl-buffer-size                                       1048576
    innodb-ddl-threads                                           4
    innodb-deadlock-detect                                       TRUE
    innodb-dedicated-server                                      FALSE
    innodb-default-row-format                                    dynamic
    innodb-directories                                           (No default value)
    innodb-disable-sort-file-cache                               FALSE
    innodb-doublewrite                                           ON
    innodb-doublewrite-batch-size                                0
    innodb-doublewrite-dir                                       (No default value)
    innodb-doublewrite-files                                     0
    innodb-doublewrite-pages                                     0
    innodb-extend-and-initialize                                 TRUE
    innodb-fast-shutdown                                         1
    innodb-file-per-table                                        TRUE
    innodb-fill-factor                                           100
    innodb-flush-log-at-timeout                                  1
    innodb-flush-log-at-trx-commit                               1
    innodb-flush-method                                          fsync
    innodb-flush-neighbors                                       0
    innodb-flush-sync                                            TRUE
    innodb-flushing-avg-loops                                    30
    innodb-force-load-corrupted                                  FALSE
    innodb-force-recovery                                        0
    innodb-fsync-threshold                                       0
    innodb-ft-aux-table                                          (No default value)
    innodb-ft-cache-size                                         8000000
    innodb-ft-enable-diag-print                                  FALSE
    innodb-ft-enable-stopword                                    TRUE
    innodb-ft-max-token-size                                     84
    innodb-ft-min-token-size                                     3
    innodb-ft-num-word-optimize                                  2000
    innodb-ft-result-cache-limit                                 2000000000
    innodb-ft-server-stopword-table                              (No default value)
    innodb-ft-sort-pll-degree                                    2
    innodb-ft-total-cache-size                                   640000000
    innodb-ft-user-stopword-table                                (No default value)
    innodb-idle-flush-pct                                        100
    innodb-io-capacity                                           200
    innodb-io-capacity-max                                       4294967295
    innodb-lock-wait-timeout                                     50
    innodb-log-buffer-size                                       16777216
    innodb-log-checksums                                         TRUE
    innodb-log-compressed-pages                                  TRUE
    innodb-log-file-size                                         50331648
    innodb-log-files-in-group                                    2
    innodb-log-group-home-dir                                    (No default value)
    innodb-log-spin-cpu-abs-lwm                                  80
    innodb-log-spin-cpu-pct-hwm                                  50
    innodb-log-wait-for-flush-spin-hwm                           400
    innodb-log-write-ahead-size                                  8192
    innodb-log-writer-threads                                    TRUE
    innodb-lru-scan-depth                                        1024
    innodb-max-dirty-pages-pct                                   90
    innodb-max-dirty-pages-pct-lwm                               10
    innodb-max-purge-lag                                         0
    innodb-max-purge-lag-delay                                   0
    innodb-max-undo-log-size                                     1073741824
    innodb-monitor-disable                                       (No default value)
    innodb-monitor-enable                                        (No default value)
    innodb-monitor-reset                                         (No default value)
    innodb-monitor-reset-all                                     (No default value)
    innodb-old-blocks-pct                                        37
    innodb-old-blocks-time                                       1000
    innodb-online-alter-log-max-size                             134217728
    innodb-open-files                                            0
    innodb-optimize-fulltext-only                                FALSE
    innodb-page-cleaners                                         4
    innodb-page-size                                             16384
    innodb-parallel-read-threads                                 4
    innodb-print-all-deadlocks                                   FALSE
    innodb-print-ddl-logs                                        FALSE
    innodb-purge-batch-size                                      300
    innodb-purge-rseg-truncate-frequency                         128
    innodb-purge-threads                                         4
    innodb-random-read-ahead                                     FALSE
    innodb-read-ahead-threshold                                  56
    innodb-read-io-threads                                       4
    innodb-read-only                                             FALSE
    innodb-redo-log-archive-dirs                                 (No default value)
    innodb-redo-log-capacity                                     104857600
    innodb-redo-log-encrypt                                      FALSE
    innodb-replication-delay                                     0
    innodb-rollback-on-timeout                                   FALSE
    innodb-rollback-segments                                     128
    innodb-segment-reserve-factor                                12.5
    innodb-sort-buffer-size                                      1048576
    innodb-spin-wait-delay                                       6
    innodb-spin-wait-pause-multiplier                            50
    innodb-stats-auto-recalc                                     TRUE
    innodb-stats-include-delete-marked                           FALSE
    innodb-stats-method                                          nulls_equal
    innodb-stats-on-metadata                                     FALSE
    innodb-stats-persistent                                      TRUE
    innodb-stats-persistent-sample-pages                         20
    innodb-stats-transient-sample-pages                          8
    innodb-status-file                                           FALSE
    innodb-status-output                                         FALSE
    innodb-status-output-locks                                   FALSE
    innodb-strict-mode                                           TRUE
    innodb-sync-array-size                                       1
    innodb-sync-spin-loops                                       30
    innodb-table-locks                                           TRUE
    innodb-temp-data-file-path                                   ibtmp1:12M:autoextend
    innodb-temp-tablespaces-dir                                  (No default value)
    innodb-thread-concurrency                                    0
    innodb-thread-sleep-delay                                    10000
    innodb-tmpdir                                                (No default value)
    innodb-undo-directory                                        (No default value)
    innodb-undo-log-encrypt                                      FALSE
    innodb-undo-log-truncate                                     TRUE
    innodb-undo-tablespaces                                      2
    innodb-use-fdatasync                                         FALSE
    innodb-use-native-aio                                        TRUE
    innodb-validate-tablespace-paths                             TRUE
    innodb-write-io-threads                                      4
    interactive-timeout                                          28800
    internal-tmp-mem-storage-engine                              TempTable
    join-buffer-size                                             262144
    keep-files-on-create                                         FALSE
    key-buffer-size                                              8388608
    key-cache-age-threshold                                      300
    key-cache-block-size                                         1024
    key-cache-division-limit                                     100
    keyring-migration-destination                                (No default value)
    keyring-migration-host                                       (No default value)
    keyring-migration-port                                       0
    keyring-migration-socket                                     (No default value)
    keyring-migration-source                                     (No default value)
    keyring-migration-to-component                               FALSE
    keyring-migration-user                                       (No default value)
    language                                                     /usr/share/mysql-8.0/
    large-pages                                                  FALSE
    lc-messages                                                  en_US
    lc-messages-dir                                              /usr/share/mysql-8.0/
    lc-time-names                                                en_US
    local-infile                                                 FALSE
    lock-wait-timeout                                            31536000
    log-bin                                                      binlog
    log-bin-index                                                binlog.index
    log-bin-trust-function-creators                              FALSE
    log-bin-use-v1-row-events                                    FALSE
    log-error                                                    stderr
    log-error-services                                           log_filter_internal; log_sink_internal
    log-error-suppression-list
    log-error-verbosity                                          1
    log-isam                                                     myisam.log
    log-output                                                   FILE
    log-queries-not-using-indexes                                FALSE
    log-raw                                                      FALSE
    log-replica-updates                                          TRUE
    log-short-format                                             FALSE
    log-slave-updates                                            TRUE
    log-slow-admin-statements                                    FALSE
    log-slow-extra                                               FALSE
    log-slow-replica-statements                                  FALSE
    log-slow-slave-statements                                    FALSE
    log-statements-unsafe-for-binlog                             TRUE
    log-tc                                                       tc.log
    log-tc-size                                                  24576
    log-throttle-queries-not-using-indexes                       0
    log-timestamps                                               UTC
    long-query-time                                              10
    low-priority-updates                                         FALSE
    lower-case-table-names                                       0
    mandatory-roles
    master-info-file                                             master.info
    master-info-repository                                       TABLE
    master-retry-count                                           86400
    master-verify-checksum                                       FALSE
    max-allowed-packet                                           67108864
    max-binlog-cache-size                                        18446744073709547520
    max-binlog-dump-events                                       0
    max-binlog-size                                              1073741824
    max-binlog-stmt-cache-size                                   18446744073709547520
    max-connect-errors                                           100
    max-connections                                              151
    max-delayed-threads                                          20
    max-digest-length                                            1024
    max-error-count                                              1024
    max-execution-time                                           0
    max-heap-table-size                                          16777216
    max-join-size                                                18446744073709551615
    max-length-for-sort-data                                     4096
    max-points-in-geometry                                       65536
    max-prepared-stmt-count                                      16382
    max-relay-log-size                                           0
    max-seeks-for-key                                            18446744073709551615
    max-sort-length                                              1024
    max-sp-recursion-depth                                       0
    max-user-connections                                         0
    max-write-lock-count                                         18446744073709551615
    memlock                                                      FALSE
    min-examined-row-limit                                       0
    myisam-block-size                                            1024
    myisam-data-pointer-size                                     6
    myisam-max-sort-file-size                                    9223372036853727232
    myisam-mmap-size                                             18446744073709551615
    myisam-recover-options                                       OFF
    myisam-sort-buffer-size                                      8388608
    myisam-stats-method                                          nulls_unequal
    myisam-use-mmap                                              FALSE
    mysql-native-password-proxy-users                            FALSE
    mysqlx                                                       ON
    mysqlx-bind-address                                          *
    mysqlx-cache-cleaner                                         ON
    mysqlx-compression-algorithms                                DEFLATE_STREAM,LZ4_MESSAGE,ZSTD_STREAM
    mysqlx-connect-timeout                                       30
    mysqlx-deflate-default-compression-level                     3
    mysqlx-deflate-max-client-compression-level                  5
    mysqlx-document-id-unique-prefix                             0
    mysqlx-enable-hello-notice                                   TRUE
    mysqlx-idle-worker-thread-timeout                            60
    mysqlx-interactive-timeout                                   28800
    mysqlx-lz4-default-compression-level                         2
    mysqlx-lz4-max-client-compression-level                      8
    mysqlx-max-allowed-packet                                    67108864
    mysqlx-max-connections                                       100
    mysqlx-min-worker-threads                                    2
    mysqlx-port                                                  33060
    mysqlx-port-open-timeout                                     0
    mysqlx-read-timeout                                          30
    mysqlx-socket                                                (No default value)
    mysqlx-ssl-ca                                                (No default value)
    mysqlx-ssl-capath                                            (No default value)
    mysqlx-ssl-cert                                              (No default value)
    mysqlx-ssl-cipher                                            (No default value)
    mysqlx-ssl-crl                                               (No default value)
    mysqlx-ssl-crlpath                                           (No default value)
    mysqlx-ssl-key                                               (No default value)
    mysqlx-wait-timeout                                          28800
    mysqlx-write-timeout                                         60
    mysqlx-zstd-default-compression-level                        3
    mysqlx-zstd-max-client-compression-level                     11
    net-buffer-length                                            16384
    net-read-timeout                                             30
    net-retry-count                                              10
    net-write-timeout                                            60
    new                                                          FALSE
    ngram                                                        ON
    ngram-token-size                                             2
    no-dd-upgrade                                                FALSE
    offline-mode                                                 FALSE
    old                                                          FALSE
    old-alter-table                                              FALSE
    old-style-user-limits                                        FALSE
    open-files-limit                                             1048576
    optimizer-max-subgraph-pairs                                 100000
    optimizer-prune-level                                        1
    optimizer-search-depth                                       62
    optimizer-switch                                             index_merge=on,index_merge_union=on,index_merge_sort_union=on,index_merge_intersection=on,engine_condition_pushdown=on,index_condition_pushdown=on,mrr=on,mrr_cost_based=on,block_nested_loop=on,batched_key_access=off,materialization=on,semijoin=on,loosescan=on,firstmatch=on,duplicateweedout=on,subquery_materialization_cost_based=on,use_index_extensions=on,condition_fanout_filter=on,derived_merge=on,use_invisible_indexes=off,skip_scan=on,hash_join=on,subquery_to_derived=off,prefer_ordering_index=on,hypergraph_optimizer=off,derived_condition_pushdown=on
    optimizer-trace
    optimizer-trace-features                                     greedy_search=on,range_optimizer=on,dynamic_range=on,repeated_subselect=on
    optimizer-trace-limit                                        1
    optimizer-trace-max-mem-size                                 1048576
    optimizer-trace-offset                                       -1
    parser-max-mem-size                                          18446744073709551615
    partial-revokes                                              FALSE
    password-history                                             0
    password-require-current                                     FALSE
    password-reuse-interval                                      0
    performance-schema                                           TRUE
    performance-schema-accounts-size                             -1
    performance-schema-consumer-events-stages-current            FALSE
    performance-schema-consumer-events-stages-history            FALSE
    performance-schema-consumer-events-stages-history-long       FALSE
    performance-schema-consumer-events-statements-cpu            FALSE
    performance-schema-consumer-events-statements-current        TRUE
    performance-schema-consumer-events-statements-history        TRUE
    performance-schema-consumer-events-statements-history-long   FALSE
    performance-schema-consumer-events-transactions-current      TRUE
    performance-schema-consumer-events-transactions-history      TRUE
    performance-schema-consumer-events-transactions-history-long FALSE
    performance-schema-consumer-events-waits-current             FALSE
    performance-schema-consumer-events-waits-history             FALSE
    performance-schema-consumer-events-waits-history-long        FALSE
    performance-schema-consumer-global-instrumentation           TRUE
    performance-schema-consumer-statements-digest                TRUE
    performance-schema-consumer-thread-instrumentation           TRUE
    performance-schema-digests-size                              -1
    performance-schema-error-size                                5153
    performance-schema-events-stages-history-long-size           -1
    performance-schema-events-stages-history-size                -1
    performance-schema-events-statements-history-long-size       -1
    performance-schema-events-statements-history-size            -1
    performance-schema-events-transactions-history-long-size     -1
    performance-schema-events-transactions-history-size          -1
    performance-schema-events-waits-history-long-size            -1
    performance-schema-events-waits-history-size                 -1
    performance-schema-hosts-size                                -1
    performance-schema-instrument
    performance-schema-max-cond-classes                          150
    performance-schema-max-cond-instances                        -1
    performance-schema-max-digest-length                         1024
    performance-schema-max-digest-sample-age                     60
    performance-schema-max-file-classes                          80
    performance-schema-max-file-handles                          32768
    performance-schema-max-file-instances                        -1
    performance-schema-max-index-stat                            -1
    performance-schema-max-memory-classes                        450
    performance-schema-max-metadata-locks                        -1
    performance-schema-max-mutex-classes                         350
    performance-schema-max-mutex-instances                       -1
    performance-schema-max-prepared-statements-instances         -1
    performance-schema-max-program-instances                     -1
    performance-schema-max-rwlock-classes                        60
    performance-schema-max-rwlock-instances                      -1
    performance-schema-max-socket-classes                        10
    performance-schema-max-socket-instances                      -1
    performance-schema-max-sql-text-length                       1024
    performance-schema-max-stage-classes                         175
    performance-schema-max-statement-classes                     219
    performance-schema-max-statement-stack                       10
    performance-schema-max-table-handles                         -1
    performance-schema-max-table-instances                       -1
    performance-schema-max-table-lock-stat                       -1
    performance-schema-max-thread-classes                        100
    performance-schema-max-thread-instances                      -1
    performance-schema-session-connect-attrs-size                -1
    performance-schema-setup-actors-size                         -1
    performance-schema-setup-objects-size                        -1
    performance-schema-show-processlist                          FALSE
    performance-schema-users-size                                -1
    persist-only-admin-x509-subject
    persist-sensitive-variables-in-plaintext                     TRUE
    persisted-globals-load                                       TRUE
    pid-file                                                     /var/run/mysqld/mysqld.pid
    plugin-dir                                                   /usr/lib64/mysql/plugin/
    port                                                         3306
    port-open-timeout                                            0
    preload-buffer-size                                          32768
    print-identified-with-as-hex                                 FALSE
    profiling-history-size                                       15
    protocol-compression-algorithms                              zlib,zstd,uncompressed
    query-alloc-block-size                                       8192
    query-prealloc-size                                          8192
    range-alloc-block-size                                       4096
    range-optimizer-max-mem-size                                 8388608
    read-buffer-size                                             131072
    read-only                                                    FALSE
    read-rnd-buffer-size                                         262144
    regexp-stack-limit                                           8000000
    regexp-time-limit                                            32
    relay-log                                                    a29706ab34c6-relay-bin
    relay-log-index                                              a29706ab34c6-relay-bin.index
    relay-log-info-file                                          relay-log.info
    relay-log-info-repository                                    TABLE
    relay-log-purge                                              TRUE
    relay-log-recovery                                           FALSE
    relay-log-space-limit                                        0
    replica-allow-batching                                       TRUE
    replica-checkpoint-group                                     512
    replica-checkpoint-period                                    300
    replica-compressed-protocol                                  FALSE
    replica-exec-mode                                            STRICT
    replica-load-tmpdir                                          /tmp
    replica-max-allowed-packet                                   1073741824
    replica-net-timeout                                          60
    replica-parallel-type                                        LOGICAL_CLOCK
    replica-parallel-workers                                     4
    replica-pending-jobs-size-max                                134217728
    replica-preserve-commit-order                                TRUE
    replica-skip-errors                                          (No default value)
    replica-sql-verify-checksum                                  TRUE
    replica-transaction-retries                                  10
    replica-type-conversions
    replicate-same-server-id                                     FALSE
    replication-optimize-for-static-plugin-config                FALSE
    replication-sender-observe-commit-only                       FALSE
    report-host                                                  (No default value)
    report-password                                              (No default value)
    report-port                                                  0
    report-user                                                  (No default value)
    require-secure-transport                                     FALSE
    rpl-read-size                                                8192
    rpl-stop-replica-timeout                                     31536000
    rpl-stop-slave-timeout                                       31536000
    safe-user-create                                             FALSE
    schema-definition-cache                                      256
    secondary-engine-cost-threshold                              100000
    secure-file-priv                                             /var/lib/mysql-files
    select-into-buffer-size                                      131072
    select-into-disk-sync                                        FALSE
    select-into-disk-sync-delay                                  0
    server-id                                                    1
    server-id-bits                                               32
    session-track-gtids                                          OFF
    session-track-schema                                         TRUE
    session-track-state-change                                   FALSE
    session-track-system-variables                               time_zone,autocommit,character_set_client,character_set_results,character_set_connection
    session-track-transaction-info                               OFF
    sha256-password-auto-generate-rsa-keys                       TRUE
    sha256-password-private-key-path                             private_key.pem
    sha256-password-proxy-users                                  FALSE
    sha256-password-public-key-path                              public_key.pem
    show-create-table-verbosity                                  FALSE
    show-gipk-in-create-table-and-information-schema             TRUE
    show-old-temporals                                           FALSE
    show-replica-auth-info                                       FALSE
    show-slave-auth-info                                         FALSE
    skip-grant-tables                                            FALSE
    skip-name-resolve                                            TRUE
    skip-networking                                              FALSE
    skip-replica-start                                           FALSE
    skip-show-database                                           FALSE
    skip-slave-start                                             FALSE
    slave-allow-batching                                         TRUE
    slave-checkpoint-group                                       512
    slave-checkpoint-period                                      300
    slave-compressed-protocol                                    FALSE
    slave-exec-mode                                              STRICT
    slave-load-tmpdir                                            /tmp
    slave-max-allowed-packet                                     1073741824
    slave-net-timeout                                            60
    slave-parallel-type                                          LOGICAL_CLOCK
    slave-parallel-workers                                       4
    slave-pending-jobs-size-max                                  134217728
    slave-preserve-commit-order                                  TRUE
    slave-rows-search-algorithms                                 INDEX_SCAN,HASH_SCAN
    slave-skip-errors                                            (No default value)
    slave-sql-verify-checksum                                    TRUE
    slave-transaction-retries                                    10
    slave-type-conversions
    slow-launch-time                                             2
    slow-query-log                                               FALSE
    slow-query-log-file                                          /var/lib/mysql/a29706ab34c6-slow.log
    socket                                                       /var/run/mysqld/mysqld.sock
    sort-buffer-size                                             262144
    source-verify-checksum                                       FALSE
    sporadic-binlog-dump-fail                                    FALSE
    sql-generate-invisible-primary-key                           FALSE
    sql-mode                                                     ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION
    sql-require-primary-key                                      FALSE
    ssl                                                          TRUE
    ssl-ca                                                       (No default value)
    ssl-capath                                                   (No default value)
    ssl-cert                                                     (No default value)
    ssl-cipher                                                   (No default value)
    ssl-crl                                                      (No default value)
    ssl-crlpath                                                  (No default value)
    ssl-fips-mode                                                OFF
    ssl-key                                                      (No default value)
    ssl-session-cache-mode                                       TRUE
    ssl-session-cache-timeout                                    300
    stored-program-cache                                         256
    stored-program-definition-cache                              256
    super-large-pages                                            FALSE
    super-read-only                                              FALSE
    symbolic-links                                               FALSE
    sync-binlog                                                  1
    sync-master-info                                             10000
    sync-relay-log                                               10000
    sync-relay-log-info                                          10000
    sync-source-info                                             10000
    sysdate-is-now                                               FALSE
    table-definition-cache                                       2000
    table-encryption-privilege-check                             FALSE
    table-open-cache                                             4000
    table-open-cache-instances                                   16
    tablespace-definition-cache                                  256
    tc-heuristic-recover                                         OFF
    temptable-max-mmap                                           1073741824
    temptable-max-ram                                            1073741824
    temptable-use-mmap                                           TRUE
    terminology-use-previous                                     NONE
    thread-cache-size                                            9
    thread-handling                                              one-thread-per-connection
    thread-stack                                                 1048576
    tls-ciphersuites                                             (No default value)
    tls-version                                                  TLSv1.2,TLSv1.3
    tmp-table-size                                               16777216
    tmpdir                                                       /tmp
    transaction-alloc-block-size                                 8192
    transaction-isolation                                        REPEATABLE-READ
    transaction-prealloc-size                                    4096
    transaction-read-only                                        FALSE
    transaction-write-set-extraction                             XXHASH64
    updatable-views-with-limit                                   YES
    upgrade                                                      AUTO
    validate-config                                              FALSE
    validate-user-plugins                                        TRUE
    verbose                                                      TRUE
    wait-timeout                                                 28800
    windowing-use-high-precision                                 TRUE
    xa-detach-on-prepare                                         TRUE
    

  

**é»˜è®¤æ”¯æŒç¯å¢ƒå˜é‡**ï¼š

    MYSQL_DATABASE=æ•°æ®åº“åç§°
    MYSQL_USER=åº”ç”¨ç”¨æˆ·
    MYSQL_PASSWORD=åº”ç”¨è´¦å·å¯†ç 
    MYSQL_ROOT_PASSWORD=ROOTè´¦æˆ·å¯†ç 
    MYSQL_RANDOM_ROOT_PASSWORD=yes # å…è®¸ä¸ºä¸º root ç”¨æˆ·ç”Ÿæˆä¸€ä¸ªéšæœºåˆå§‹å¯†ç å¹¶å°†å…¶æ‰“å°åˆ°stdout
    MYSQL_ALLOW_EMPTY_PASSWORD=yes # ä»¥å…è®¸ä½¿ç”¨æ ¹ç”¨æˆ·çš„ç©ºç™½å¯†ç å¯åŠ¨å®¹å™¨,éå¸¸ä¸å»ºè®®åœ¨å®è·µç¯å¢ƒä¸­ä½¿ç”¨è¯¥å˜é‡
    # MYSQL_ONETIME_PASSWORD   # é€šå¸¸ä¸é€‚ç”¨,æ­¤åŠŸèƒ½ä»…åœ¨ MySQL 5.6+ ä¸Šå—æ”¯æŒã€‚ åœ¨ MySQL 5.5 ä¸Šä½¿ç”¨æ­¤é€‰é¡¹å°†åœ¨åˆå§‹åŒ–æœŸé—´å¼•å‘é€‚å½“çš„é”™è¯¯ã€‚ 
    # MYSQL_INITDB_SKIP_TZINFO # é»˜è®¤æƒ…å†µä¸‹,å…¥å£ç‚¹è„šæœ¬ä¼šè‡ªåŠ¨åŠ è½½æ‰€éœ€çš„æ—¶åŒºæ•°æ® CONVERT_TZ()åŠŸèƒ½ã€‚ å¦‚æœä¸éœ€è¦ï¼Œä»»ä½•éç©ºå€¼éƒ½ä¼šç¦ç”¨æ—¶åŒºåŠ è½½ã€‚ 
    

æ¸©é¦¨æç¤º: ä¸ºäº†æ›¿ä»£ç¯å¢ƒå˜é‡ä¼ é€’æ•æ„Ÿä¿¡æ¯ , æˆ‘ä»¬å¯åœ¨ `MYSQL_ROOT_PASSWORD_FILE=/run/secrets/mysql-root` , å¯åœ¨å¦‚ä¸‹å˜é‡ä¸­æ·»åŠ  `_FILE=` ç›®å‰ä»…æ”¯æŒ ,`MYSQL_ROOT_PASSWORD, MYSQL_ROOT_HOST, MYSQL_DATABASE, MYSQL_USER å’Œ MYSQL_PASSWORD` ã€‚

  

**æ•°æ®åº“å¤‡ä»½ã€æ¢å¤**

    # å¤‡ä»½
    $ docker exec mysql8.0 sh -c 'exec mysqldump --all-databases -uroot -p"$MYSQL_ROOT_PASSWORD"' > /some/path/on/your/host/all-databases.sql
    
    # æ¢å¤
    $ docker exec -i mysql8.0 sh -c 'exec mysql -uroot -p"$MYSQL_ROOT_PASSWORD"' < /some/path/on/your/host/all-databases.sql
    

  

### é…ç½®æ¸…å•

æè¿°ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºé…ç½®æ¸…å•æ–‡ä»¶ï¼Œä½¿ç”¨ docker çš„ stack å­å‘½ä»¤æˆ–è€… docker-compose åæ¥éƒ¨ç½² `stack.yml`ã€‚

æ­¥éª¤ 01.å‡†å¤‡ mysql.yaml éƒ¨ç½²æ¸…å•

    version: '3.1'
    services:
      db:
        image: mysql:8.0.30
        container_name: mysql8.x
        # NOTE: use of "mysql_native_password" is not recommended: https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html#upgrade-caching-sha2-password
        # (this is just an example, not intended to be a production configuration)
        command: --default-authentication-plugin=mysql_native_password
        restart: always
        environment:
          # MYSQL_ROOT_PASSWORD: example
          MYSQL_ROOT_PASSWORD_FILE: /app/my-secret-pw
          MYSQL_DATABASE: app
          MYSQL_USER: weiyigeek
          MYSQL_PASSWORD: password
        volumes:
          - "/app/data:/var/lib/mysql"
          - "/app/my-secret-pw:/app/my-secret-pw"
        ports:
          - 3306:3306
      # éƒ¨ç½²adminer è¿›è¡Œå›¾å½¢åŒ–ç®¡ç† mysql æ•°æ®åº“
      adminer:
        image: adminer
        restart: always
        ports:
          - 8080:8080
    

  

æ­¥éª¤ 02.å‡†å¤‡æœ¬åœ°æŒä¹…åŒ–æ•°æ®åº“ä»¥åŠrootè®¤è¯å¯†ç 

    mkdir -vp /app/data
    echo "weiyigeek.top" > /app/my-secret-pw
    

  

æ­¥éª¤ 03.ä½¿ç”¨dockeræˆ–è€…docker-composeè¿›è¡Œéƒ¨ç½²

    docker stack deploy -c mysql.yml mysql 
    docker-compose -f mysql.yml up
    

* * *

2.Kubernetes å¿«é€Ÿéƒ¨ç½² MySQL æ•°æ®åº“æœåŠ¡å™¨
------------------------------

å½“å‰ï¼Œè®¸å¤šä¼ä¸šå¼€å§‹æ„å»ºè‡ªå·±çš„å®¹å™¨åŒ–æ¶æ„ï¼Œè€Œ mysql éƒ¨ç½²åœ¨ k8s ä¸Šçš„ä¼˜åŠ¿ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š

*   èµ„æºéš”ç¦»
*   åŠ¨æ€å¼¹æ€§æ‰©ç¼©å®¹
*   ç¯å¢ƒä¸€è‡´æ€§
*   è¿ç»´æ–¹ä¾¿

æ¸©é¦¨æç¤ºï¼šæ­¤å¤„å®è·µç¯å¢ƒæ˜¯ä½¿ç”¨Kubernetesé›†ç¾¤,è‹¥ä½ æ²¡æœ‰å®‰è£…Kubernetesé›†ç¾¤ç¯å¢ƒæˆ–è€…ä¸äº†è§£çš„Kuberneteså®¹å™¨çš„æœ‹å‹ï¼Œå¯ä»¥å‚è€ƒåšä¸»å­¦ä¹ ã€Kubernetesçš„ç³»åˆ—ç¬”è®°ã€‘æ±‡æ€»:  
[https://blog.weiyigeek.top/2018/1-1-1.html#Kuberneteså­¦ä¹ ä¹‹è·¯æ±‡æ€»](https://blog.weiyigeek.top/2018/1-1-1.html#Kubernetes%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF%E6%B1%87%E6%80%BB)

  

### å•å®ä¾‹æ¨¡å¼

æ­¥éª¤ 01.å‡†å¤‡mysqléƒ¨ç½²èµ„æºæ¸…å•ï¼Œæ­¤å¤„ä½¿ç”¨StatefulSetä¸Serviceèµ„æºæ¸…å•ã€‚

    tee K8s-Standalone-MySQL.yaml <<'EOF'
    kind: Service
    apiVersion: v1
    metadata:
      name: {APP_NAME}
      namespace: {NAMESPACE}
      labels:
        app: {APP_NAME}
        type: standalone
    spec:
      type: NodePort
      ports:
      - name: server
        port: 3306
        protocol: TCP
        targetPort: 3306
        nodePort: {NODEPORT}
      selector:
        app: {APP_NAME}
        type: standalone
    ---
    apiVersion: apps/v1
    kind: StatefulSet
    metadata:
      name: {APP_NAME}
      namespace: {NAMESPACE}
      labels:
        app: {APP_NAME}
        type: standalone
      annotations:
        version: {APP_VERSION}
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: {APP_NAME}
          type: standalone
      serviceName: {APP_NAME}
      template:
        metadata:
          labels:
            app: {APP_NAME}
            type: standalone
        spec:
          # è¿è¡ŒèŠ‚ç‚¹æ ‡ç­¾é€‰æ‹©
          # nodeSelector:
          #   app: database
          containers:
          - name: {APP_NAME}
            image: mysql:{APP_VERSION}
            imagePullPolicy: IfNotPresent
            ports:
            - name: server
              containerPort: 3306
            env:
            - name: MYSQL_ROOT_PASSWORD
              value: "{MYSQL_ROOT_PASSWORD}"
            - name: MYSQL_DATABASE
              value: "{MYSQL_DATABASE}"
            - name: MYSQL_USER
              value: "{MYSQL_USER}"
            - name: MYSQL_PASSWORD
              value: "{MYSQL_PASSWORD}"
            volumeMounts:
            - name: data
              mountPath: /var/lib/mysql
          #  - name: mysql-conf
          #    mountPath: /etc/mysql/my.cnf
          #    subPath: my.cnf
          #  - name: log
          #    mountPath: /var/log/mysqld.log
            resources:
              limits:
                memory: "4Gi"
                cpu: "2"
              requests:
                memory: "512Mi"
                cpu: "1"
          volumes:
          # æ–¹å¼1,æŒä¹…åŒ– hostPath
          - name: mysql-persistent-storage
            hostPath:
              path: {HOSTPATH}
              type: DirectoryOrCreate
          # - name: mysql-conf
          #   configMap:
          #     name: mysql-conf
          #     items:
          #     - key: my.cnf
          #       path: my.cnf
       # æ–¹å¼2,æŒä¹…åŒ–nfså­˜å‚¨å·
      volumeClaimTemplates:
      - metadata:
          name: data
          labels:
            app: {APP_NAME}
            type: standalone
        spec:
          accessModes:
          - ReadWriteOnce
          storageClassName: {storageClassName}
          resources:
            requests:
              storage: 5Gi
    EOF
    

  

æ­¥éª¤ 02.å‡†å¤‡æŒä¹…åŒ–ç›®å½•ä¸æ›¿æ¢éƒ¨ç½²æ¸…å•å…³é”®å­—ã€‚

    # æ³¨æ„,é€šå¸¸æ­¤ç›®å½•ä¸ºæŒ‚åˆ°å„k8sèŠ‚ç‚¹ä¸Šçš„nfsæœåŠ¡å­˜å‚¨
    mkdir -vp /app/data
    
    # æ›¿æ¢å…³é”®é…ç½®
    sed -i -e "s#{APP_NAME}#mysql-weiyigeek#g" -e "s#{NAMESPACE}#database#g" -e "s#{NODEPORT}#31001#g"  -e "s#{APP_VERSION}#8.0.30#g" \
    -e "s#{MYSQL_ROOT_PASSWORD}#weiyigeek.top#g"  -e "s#{MYSQL_DATABASE}#app#g" -e "s#{MYSQL_USER}#weiyigeek#g"  -e "s#{MYSQL_PASSWORD}#password#g" \
    -e "s#{HOSTPATH}#/app/data#g" -e "s#{storageClassName}#nfs-dev#g" \
    K8s-Standalone-MySQL.yaml
    
    # ä¾‹å¦‚ï¼Œå¯ä»¥å°† my.cnf ä½¿ç”¨ configmap æ§åˆ¶å™¨è¿›è¡Œå­˜å‚¨ï¼Œæ­¤å¤–æˆ‘é‡‡ç”¨é•œåƒç¼ºçœçš„æ²¡æœ‰ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ã€‚
    kubectl create configmap mysql-conf --from-file=my.cnf --namespace database
    

  

æ­¥éª¤ 03.åœ¨K8Sä¸­æ‰§è¡Œéƒ¨ç½²mysqlçš„å‘½ä»¤

    # åè¯ç©ºé—´
    kubectl create namespace database
    
    # éƒ¨ç½²mysqlèµ„æºæ¸…å•
    kubectl apply -f K8s-Standalone-MySQL.yaml
      # service/mysql-weiyigeek created
      # statefulset.apps/mysql-weiyigeek created
      
    # æŸ¥çœ‹éƒ¨ç½²æƒ…å†µ
    kubectl get sts,svc,pod -n database
      # NAME                         READY   AGE
      # statefulset.apps/mysql-weiyigeek   1/1     77s
      
      # NAME                TYPE       CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE
      # service/mysql-weiyigeek   NodePort   10.108.74.113    <none>        3306:31001/TCP   77s
      
      # NAME              READY   STATUS    RESTARTS   AGE
      # pod/mysql-weiyigeek-0   1/1     Running   0          77s
    
    # æ—¥å¿—æŸ¥çœ‹
    kubectl logs -f --tail 50 -n database pod/mysql-weiyigeek-0
    
    # æŒä¹…åŒ–æ•°æ®æŸ¥çœ‹
    kubectl get pvc -n database
      # NAME               STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
      # data-mysql-weiyigeek-0   Bound    pvc-37390e64-9401-4b66-8b4f-216d91e2a7fd   5Gi        RWO            nfs-dev        4m55s
    
    cd /storage/dev/pvc/local/database-data-mysql-weiyigeek-0-pvc-37390e64-9401-4b66-8b4f-216d91e2a7fd
    ls 
      # app             binlog.000002   ca.pem           '#ib_16384_0.dblwr'   ibdata1        '#innodb_temp'   mysql.sock           public_key.pem    sys
      # auto.cnf        binlog.index    client-cert.pem  '#ib_16384_1.dblwr'   ibtmp1          mysql           performance_schema   server-cert.pem   undo_001
      # binlog.000001   ca-key.pem      client-key.pem    ib_buffer_pool      '#innodb_redo'   mysql.ibd       private_key.pem      server-key.pem    undo_002
    

  

æ­¥éª¤ 04.ä½¿ç”¨ adminer è¿æ¥ k8s éƒ¨ç½²çš„ MySQL æ•°æ®åº“ï¼ŒéªŒè¯å…¶æœåŠ¡ã€‚

![WeiyiGeek.adminer-connect-k8s-deploy-mysql8.x](https://img2022.cnblogs.com/blog/2176087/202209/2176087-20220930132219570-1151074094.png)

  

### ä¸»ä»åŒæ­¥æ¨¡å¼

æ­¤èŠ‚ï¼Œæˆ‘ä»¬å®è·µåœ¨K8Sé›†ç¾¤ä¸­æ­å»ºä¸€ä¸ª MySQL ä¸»ä»æ•°æ®åº“ï¼Œä¸»ï¼ˆå¯è¯»ã€å¯å†™ï¼‰ï¼Œä»åªè¯»ï¼Œå¦‚ä¸‹æ˜¯MySQLä¸»ä»åŸç†å›¾ä»¥åŠMySQLä¸»ä»æ¨¡å¼åœ¨K8Sé›†ç¾¤ä¸­çš„éƒ¨ç½²æ¶æ„ã€‚

![WeiyiGeek.MySQLä¸»ä»åŸç†å›¾ä»¥åŠMySQLä¸»ä»æ¨¡å¼åœ¨K8Sé›†ç¾¤ä¸­çš„éƒ¨ç½²æ¶æ„å›¾](https://img2022.cnblogs.com/blog/2176087/202209/2176087-20220930132210966-179500101.png)

æ­¥éª¤ 01.æ·»åŠ  helm æºå¹¶åœ¨æºä¸­ä¸‹è½½ mysql éƒ¨ç½²æ¸…å•åˆ°æœ¬åœ°ï¼Œæ­¤å¤„æˆ‘çš„helmç‰ˆæœ¬ä¸ºv3.9.0ã€‚

    # æ¸©é¦¨æç¤ºï¼šmasterèŠ‚ç‚¹ä¸Šéœ€è¦å®‰è£… helm ç„¶åè¿›è¡Œæ‹‰å–éƒ¨ç½²çš„ç›¸å…³èµ„æºéƒ¨ç½²æ¸…å•å›¾è¡¨
    helm3 repo add bitnami https://charts.bitnami.com/bitnami
    helm3 search repo bitnami/mysql -l
      # NAME            CHART VERSION   APP VERSION     DESCRIPTION
      # bitnami/mysql   9.3.4           8.0.30          MySQL is a fast, reliable, scalable, and easy t....
    
    # æ‹‰å–åˆ°æœ¬åœ°ä»¥åŠå…¶éƒ¨ç½²æ¸…å•å›¾è¡¨
    $ helm3 pull bitnami/mysql  --version 9.3.4 --untar
    $ ls mysql/
    Chart.lock  charts  Chart.yaml  README.md  templates  values.schema.json  values.yaml
    

  

æ­¥éª¤ 02.ä¿®æ”¹è¯¥ Chart å›¾è¡¨ values.yaml æ–‡ä»¶ï¼Œå·²ä¸‹é€»è¾‘å‡ºä¸»è¦ä¿®æ”¹ç‚¹ã€‚

    vim mysql/values.yaml
    ....
    # ä¿®æ”¹1.ä½¿ç”¨å†…éƒ¨ä»“åº“é•œåƒåœ°å€ï¼ˆåç»­ä¼šå°†å…¶åŒæ­¥åˆ°å†…éƒ¨harborä¸­æ­¤å¤„å…ˆæ›´æ”¹ï¼‰
    image:
      registry: harbor.weiyigeek.top
      repository: library/mysql
      tag: 8.0.30-debian-11-r15
    ...
    # ä¿®æ”¹2.MySQLéƒ¨ç½²æ¨¡å¼ (`standalone` or `replication`)æ­¤å¤„ä¸ºä¸»ä»å¤åˆ¶ã€‚
    architecture: replication
    
    # ä¿®æ”¹3.æ•°æ®åº“è®¤è¯è´¦å·ï¼ˆrootã€æ™®é€šç”¨æˆ·ã€replicationç”¨æˆ·ï¼‰ç›¸å…³å¯†ç ä»¥åŠåˆ›å»ºçš„æ•°æ®åº“è®¾ç½®ï¼Œå¯†ç ç•™ç©ºåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆ
    auth:
      rootPassword: ""
      createDatabase: true
      database: "app"
      username: "app"
      password: ""
      replicationUser: replicator
      replicationPassword: ""
    
    # ä¿®æ”¹4.MySQL Primary æœåŠ¡ç›¸å…³å‚æ•°é…ç½®
    primary:
      name: primary
      # èµ„æºé™åˆ¶ : æ­¤å¤„ 1000m è¡¨ç¤ºä½¿ç”¨1ä¸ªCPUçš„èµ„æºï¼Œå†…å­˜æœ€å¤§4Gã€‚
      resources:
        limits:
          cpu: 1000m   
          memory: 4Gi
      # ä¿®æ”¹5.ä¸»èµ„æºæŒä¹…åŒ–é…ç½®ï¼Œæ­¤å¤„æˆ‘å·²ç»æ­å»ºäº†åŠ¨æ€é€»è¾‘å·ã€‚
      persistence:
        enabled: true
        storageClass: "nfs-local"
        accessModes:
          - ReadWriteOnce
        size: 10Gi
      # ä¿®æ”¹6.ä¸»æœåŠ¡æŒä¹…åŒ–é…ç½®,æ³¨æ„æ­¤å¤„ä¸secondaryæœåŠ¡èŠ‚ç‚¹é…ç½®ä¸åŒ
      service:
        type: NodePort
        ports:
          mysql: 3306
        nodePorts:
          mysql: "31006"
    
    # ä¿®æ”¹7.MySQL Secondary æœåŠ¡ç›¸å…³å‚æ•°é…ç½®
    secondary:
      name: secondary
      replicaCount: 2
      resources:
      limits:
        cpu: 1000m
        memory: 2048Mi
      # ä¿®æ”¹6.ä»(èŠ‚ç‚¹)èµ„æºæŒä¹…åŒ–é…ç½®ï¼Œæ­¤å¤„æˆ‘å·²ç»æ­å»ºäº†åŠ¨æ€é€»è¾‘å·ã€‚
      persistence:
        enabled: true
        storageClass: "nfs-local"
        accessModes:
          - ReadWriteOnce
        size: 10Gi
      # ä¿®æ”¹8.ä»(èŠ‚ç‚¹)æŒä¹…åŒ–é…ç½®,æ³¨æ„æ­¤å¤„ä¸primaryæœåŠ¡èŠ‚ç‚¹é…ç½®ä¸åŒ
      service:
        type: NodePort
        ports:
          mysql: 3306
        nodePorts:
          mysql: "31008"
    
    # ä¿®æ”¹ç‚¹9.å¯ç”¨ Promethues çš„ mysqld-exporter
    metrics:
      enabled: true
      image:
        registry: harbor.weiyigeek.top
        repository: library/mysqld-exporter
        tag: 0.14.0-debian-11-r33
    

  

æ­¥éª¤ 03.ä¸ºäº†åŠ å¿«æ‹‰å–é€Ÿåº¦ï¼Œæ­¤å¤„å°†é•œåƒæ‹‰å–ä¸Šä¼ åˆ°å†…éƒ¨harborä¸­

    docker pull bitnami/mysqld-exporter:0.14.0-debian-11-r33
    docker tag bitnami/mysqld-exporter:0.14.0-debian-11-r33 harbor.weiyigeek.top/library/mysqld-exporter:0.14.0-debian-11-r33
    docker push harbor.weiyigeek.top/library/mysqld-exporter:0.14.0-debian-11-r33
    
    docker pull bitnami/mysql:8.0.30-debian-11-r15
    docker tag bitnami/mysql:8.0.30-debian-11-r15 harbor.weiyigeek.top/library/mysql:8.0.30-debian-11-r15
    docker push harbor.weiyigeek.top/library/mysql:8.0.30-debian-11-r15
    

  

æ­¥éª¤ 04.ä½¿ç”¨helm3å®‰è£…æˆ‘ä»¬ä¿®æ”¹åçš„MySQLä¸»ä»å›¾è¡¨,ä»¥åŠæ˜¾ç¤ºå®‰è£…æƒ…å†µ

    $ helm3 install mysql ./mysql --namespace database --create-namespace
      # NAME: mysql
      # LAST DEPLOYED: Wed Sep 28 16:33:23 2022
      # NAMESPACE: database
      # STATUS: deployed
      # REVISION: 1
      # TEST SUITE: None
      # NOTES:
      # CHART NAME: mysql
      # CHART VERSION: 9.3.4
      # APP VERSION: 8.0.30
    
    $ helm3 list -n database
      # NAME    NAMESPACE       REVISION        UPDATED                                 STATUS          CHART           APP VERSION
      # mysql   database        1               2022-09-28 16:33:23.01465975 +0800 CST  deployed        mysql-9.3.4     8.0.30
    
    $ kubectl get sts,pod -n database -l app.kubernetes.io/name=mysql
      # NAME                               READY   AGE
      # statefulset.apps/mysql-primary     1/1     2m37s
      # statefulset.apps/mysql-secondary   2/2     2m37s
      
      # NAME                    READY   STATUS    RESTARTS   AGE
      # pod/mysql-primary-0     2/2     Running   0          2m37s
      # pod/mysql-secondary-0   2/2     Running   0          2m37s
      # pod/mysql-secondary-1   2/2     Running   0          95s
    

  

æ­¥éª¤ 05.è·å–è‡ªåŠ¨ç”Ÿæˆçš„MySQL rootã€appä»¥åŠreplicationç”¨æˆ·å¯†ç 

    echo -n "MYSQL_ROOT_PASSWORD=";kubectl get secret --namespace database mysql -o jsonpath="{.data.mysql-root-password}" | base64 -d;echo
    # MYSQL_ROOT_PASSWORD=oX7112Avng
    
    echo -n "MYSQL_PASSWORD=";kubectl get secret --namespace database mysql -o jsonpath="{.data.mysql-password}" | base64 -d;echo
    # MYSQL_PASSWORD=pdtsixSpV28
    
    echo -n "MYSQL_REPLICATION_PASSWORD=";kubectl get secret --namespace database mysql -o jsonpath="{.data.mysql-replication-password}" | base64 -d;echo
    # MYSQL_REPLICATION_PASSWORD=FJRspMupePE
    

  

æ­¥éª¤ 06.ä½¿ç”¨ Adminer è¿æ¥åˆ°ä¸»æœåŠ¡ä¸­è¿›è¡Œè¯»å†™ï¼Œç„¶åéªŒè¯ä»èŠ‚ç‚¹çš„æ˜¯å¦æ­£ç¡®å¯è¯»ã€‚

ä¸»èŠ‚ç‚¹æœåŠ¡ä¸­åˆ›å»ºè¡¨å¹¶æ’å…¥æ•°æ®

    -- To connect to primary service (read/write):
    CREATE TABLE replication (
      id int(11) NOT NULL  PRIMARY KEY AUTO_INCREMENT,
      name VARCHAR(255)  NOT NULL,
      INDEX name_in (name)
    );
    INSERT INTO app.replication(name) VALUES('WeiyiGeek')
    
    -- åˆ›å»ºæ•°æ®åº“ã€ç”¨æˆ·ã€å¹¶å°†åˆ›å»ºçš„æ•°æ®åº“æ‰€æœ‰æƒèµ‹äºˆç»™åˆ›å»ºç”¨æˆ·
    CREATE DATABASE dev;
    CREATE USER 'dev'@'%' IDENTIFIED BY 'dev.weiyigeek.top';  
    GRANT ALL ON dev.* TO 'dev'@"%";
    FLUSH PRIVILEGES;
    

ä»èŠ‚ç‚¹æŸ¥è¯¢æ’å…¥çš„æ•°æ®

    -- To connect to secondary service (read):
    kubectl run mysql-client --rm --tty -i --restart='Never' --image  harbor.weiyigeek.top/library/mysql:8.0.30-debian-11-r15 --namespace database --env MYSQL_ROOT_PASSWORD=oX7xxIovng --command -- bash
    --# mysql -h mysql-primary.database.svc -u app -p"$MYSQL_PASSWORD"
    mysql -h mysql-secondary.database.svc -u app -p"$MYSQL_PASSWORD"
    

![WeiyiGeek.ä¸»ä»éªŒè¯å®è·µå›¾](https://img2022.cnblogs.com/blog/2176087/202209/2176087-20220930132111351-286896272.png)

  

æ­¥éª¤ 07.æŸ¥çœ‹`exporter`ç›‘æ§æ•°æ®, æ­¤å¤„å°±ä¸æ¼”ç¤ºåœ¨Grafanaåœ¨é›†ç¾¤ä¸­MySQLèµ„æºç›‘æ§, å¦‚æœæƒ³å¸è½½å®‰è£…çš„`MySQL`ä¸»ä»ã€‚  
åŸºäº mysqld-exporter çš„ Grafana æ¨¡æ¿ ï¼š[https://grafana.com/grafana/dashboards/7362](https://grafana.com/grafana/dashboards/7362)

    # é€šè¿‡å‘½ä»¤æŸ¥çœ‹é‡‡é›†æ•°æ®.
    kubectl get --raw http://10.66.35.76:9104/metrics
    kubectl get --raw http://10.66.53.95:9104/metrics
    
    # é€šè¿‡helm3å¸è½½å®‰è£…çš„mysqlä¸»ä».
    helm3 uninstall mysql --namespace database
    # kubectl delete pod -n database `kubectl get pod -n database | awk 'NR>1{print $1}'` --force
    
    # åˆ é™¤åˆ›å»ºçš„åç§°ç©ºé—´, æ³¨æ„åˆ é™¤åè¯ç©ºé—´æ—¶, è‹¥æœ‰å…¶ä»–èµ„æºè¯·è°¨æ…æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ã€‚
    kubectl patch ns database -p '{"metadata":{"finalizers":null}}'
    kubectl delete ns database --force
    

è‡³æ­¤ï¼Œåœ¨å®¹å™¨åŒ–ç¯å¢ƒä¸­å®‰è£…MySQLä¸»ä»å®è·µå®Œæ¯•ã€‚

**åŸæ–‡åœ°å€**: [https://blog.weiyigeek.top/2022/3-24-687.html](https://blog.weiyigeek.top/2022/3-24-687.html)

æœ¬æ–‡è‡³æ­¤å®Œæ¯•ï¼Œæ›´å¤šæŠ€æœ¯æ–‡ç« ï¼Œå°½æƒ…æœŸå¾…ä¸‹ä¸€ç« èŠ‚ï¼

* * *

ã€**WeiyiGeek Blog ä¸ªäººåšå®¢ - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘**Â ã€‘

æ¬¢è¿å„ä½å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµã€[ç‚¹å‡»åŠ å…¥äº¤æµç¾¤](https://weiyigeek.top/visit.html)ã€‘ï¼Œå¦‚æ–‡ç« æœ‰è¯¯è¯·åœ¨ä¸‹æ–¹ç•™ä¸‹æ‚¨å®è´µçš„ç»éªŒçŸ¥è¯†!

ä½œè€…ä¸»é¡µ: ã€Â [https://weiyigeek.top](https://weiyigeek.top)ã€‘  
åšå®¢åœ°å€: ã€Â [https://blog.weiyigeek.top](https://blog.weiyigeek.top)Â ã€‘

![WeiyiGeek Blog åšå®¢ - ä¸ºäº†èƒ½åˆ°è¿œæ–¹ï¼Œè„šä¸‹çš„æ¯ä¸€æ­¥éƒ½ä¸èƒ½å°‘](https://img2022.cnblogs.com/blog/2176087/202207/2176087-20220729133413457-663916216.jpg)

ä¸“æ ä¹¦å†™ä¸æ˜“ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªä¸“æ è¿˜ä¸é”™çš„ï¼Œè¯·ç»™è¿™ç¯‡ä¸“æ Â **ã€ç‚¹ä¸ªèµã€æŠ•ä¸ªå¸ã€æ”¶ä¸ªè—ã€å…³ä¸ªæ³¨ï¼Œè½¬ä¸ªå‘ï¼Œç•™ä¸ªè¨€ã€‘(äººé—´å…­å¤§æƒ…)**ï¼Œè¿™å°†å¯¹æˆ‘çš„è‚¯å®šï¼Œè°¢è°¢ï¼ã€‚

*   **echo "ã€ç‚¹ä¸ªèµã€‘ï¼ŒåŠ¨åŠ¨ä½ é‚£ç²—å£®çš„æ‹‡æŒ‡æˆ–è€…èŠŠèŠŠç‰æ‰‹ï¼Œäº²ï¼"**
    
*   **printf("%s", "ã€æŠ•ä¸ªå¸ã€‘ï¼Œä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼ŒæŠ•ä¸ªç¡¬å¸è¡Œä¸è¡Œï¼Œäº²ï¼")**
    
*   **fmt.Printf("ã€æ”¶ä¸ªè—ã€‘ï¼Œé˜…åå³ç„šä¸åƒç°ï¼Œäº²ï¼")**
    
*   **console.info("ã€è½¬ä¸ªå‘ã€‘ï¼Œè®©æ›´å¤šçš„å¿—åŒé“åˆçš„æœ‹å‹ä¸€èµ·å­¦ä¹ äº¤æµï¼Œäº²ï¼")**
    
*   **System.out.println("ã€å…³ä¸ªæ³¨ã€‘ï¼Œåç»­æµè§ˆæŸ¥çœ‹ä¸è¿·è·¯å“Ÿï¼Œäº²ï¼")**
    
*   **cout << "ã€ç•™ä¸ªè¨€ã€‘ï¼Œæ–‡ç« å†™å¾—å¥½ä¸å¥½ã€æœ‰æ²¡æœ‰é”™è¯¯ï¼Œä¸€å®šè¦ç•™è¨€å“Ÿï¼Œäº²! " << endl;**
    

![https://blog.weiyigeek.top](https://img2022.cnblogs.com/blog/2176087/202207/2176087-20220729133413498-184024273.jpg)

æ›´å¤šç½‘ç»œå®‰å…¨ã€ç³»ç»Ÿè¿ç»´ã€åº”ç”¨å¼€å‘ã€ç‰©è”ç½‘å®è·µã€ç½‘ç»œå·¥ç¨‹ã€å…¨æ ˆæ–‡ç« ï¼Œå°½åœ¨ [https://blog.weiyigeek.top](https://blog.weiyigeek.top) ä¹‹ä¸­ï¼Œè°¢è°¢å„ä½çœ‹åˆæ”¯æŒï¼

* * *

æœ¬æ–‡æ¥è‡ªåšå®¢å›­ï¼Œä½œè€…ï¼š[WeiyiGeek](https://www.cnblogs.com/WeiyiGeek/)ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ï¼š[https://www.cnblogs.com/WeiyiGeek/p/16745441.html](https://www.cnblogs.com/WeiyiGeek/p/16745441.html)ã€‚  
æ¬¢è¿å…³æ³¨åšä¸»ã€WeiyiGeekã€‘å…¬ä¼—å·ä»¥åŠã€æå®¢å…¨æ ˆä¿®ç‚¼ã€‘å°ç¨‹åº  
[![å¾®ä¿¡å…¬ä¼—å·ã€WeiyiGeekã€‘](https://weiyigeek.top/img/wechat-search.png)](https://weiyigeek.top/wechat.html?key=æ¬¢è¿å…³æ³¨)