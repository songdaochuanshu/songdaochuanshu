---
layout: post
title: "ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‘æ‰‹æ’•å¹³è¡¡äºŒå‰æ ‘"
date: "2022-03-29T17:19:21.240Z"
---
ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‘æ‰‹æ’•å¹³è¡¡äºŒå‰æ ‘
================

å¹³è¡¡äºŒå‰æ ‘
=====

å®šä¹‰
--

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220327215223465-2531408.png)

*   åŠ¨æœºï¼šäºŒå‰æŸ¥æ‰¾æ ‘çš„æ“ä½œå®è·µå¤æ‚åº¦ç”±æ ‘é«˜åº¦å†³å®šï¼Œæ‰€ä»¥å¸Œæœ›æ§åˆ¶æ ‘é«˜ï¼Œå·¦å³å­æ ‘å°½å¯èƒ½å¹³è¡¡ã€‚
    
*   å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLæ ‘ï¼‰ï¼šç§°ä¸€æ£µäºŒå‰æŸ¥æ‰¾æ ‘ä¸ºé«˜åº¦å¹³è¡¡æ ‘ï¼Œå½“ä¸”ä»…å½“æˆ–ç”±å•ä¸€å¤–ç»“ç‚¹ç»„æˆï¼Œæˆ–ç”±ä¸¤ä¸ªå­æ ‘å½¢ Ta å’Œ Tb ç»„æˆï¼Œå¹¶ä¸”æ»¡è¶³ï¼š
    
    *   |h(Ta) - h(Tb)| <= 1ï¼Œå…¶ä¸­ h(T) è¡¨ç¤ºæ ‘ T çš„é«˜åº¦
    *   Ta å’Œ Tb éƒ½æ˜¯é«˜åº¦å¹³è¡¡æ ‘

å³ï¼šæ¯ä¸ªç»“ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦æœ€å¤šå·® 1 çš„ äºŒå‰æŸ¥æ‰¾æ ‘ã€‚

*   è®¾ T ä¸ºé«˜åº¦å¹³è¡¡æ ‘ä¸­ç»“ç‚¹ q çš„å¹³è¡¡ç³»æ•°ä¸º q çš„å³å­æ ‘é«˜åº¦å‡å»å·¦å­æ ‘é«˜åº¦
    
*   é«˜åº¦å¹³è¡¡æ ‘æ‰€ä»¥ç»“ç‚¹çš„å¹³è¡¡ç³»æ•°åªå¯èƒ½ä¸ºï¼š-1, 0, 1
    

ç»“ç‚¹ç»“æ„
----

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220327215702888-461486712.png)

1ï¸âƒ£ `key`ï¼šå…³é”®å­—çš„å€¼  
2ï¸âƒ£ `value`ï¼šå…³é”®å­—çš„å­˜å‚¨ä¿¡æ¯  
3ï¸âƒ£ `height`ï¼šæ ‘çš„é«˜åº¦ï¼ˆåªæœ‰ä¸€ä¸ªç»“ç‚¹çš„æ ‘çš„é«˜åº¦ä¸º `1`ï¼‰  
4ï¸âƒ£ `left`ï¼šå·¦å­æ ‘æ ¹ç»“ç‚¹çš„çš„å¼•ç”¨  
5ï¸âƒ£ `right`ï¼šå³å­æ ‘æ ¹ç»“ç‚¹çš„å¼•ç”¨

    class AVLNode<K extends Comparable<K>, V> {
        public K key;
        public V value;
        public int height;
        public AVLNode<K, V> left;
        public AVLNode<K, V> right;
    
        public AVLNode(K key, V value, int height) {
            this.key = key;
            this.value = value;
            this.height = height;
        }
    }
    

æŸ¥æ‰¾ç®—æ³•
----

åŒäºŒå‰æŸ¥æ‰¾æ ‘çš„æŸ¥æ‰¾ç®—æ³•ï¼š[ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‘æ‰‹æ’•äºŒå‰æŸ¥æ‰¾æ ‘](https://www.cnblogs.com/gonghr/p/16060017.html#%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95)

æ’å…¥ç®—æ³•
----

AVL æ ‘æ˜¯ä¸€ç§äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ•…å¯ä»¥ä½¿ç”¨äºŒå‰æŸ¥æ‰¾æ ‘çš„æ’å…¥æ–¹æ³•æ’å…¥ç»“ç‚¹ï¼Œä½†æ’å…¥ä¸€ä¸ªæ–°ç»“ç‚¹æ—¶ï¼Œæœ‰å¯èƒ½ç ´å AVL æ ‘çš„å¹³è¡¡æ€§ã€‚

å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå°±éœ€è¦åœ¨æ’å…¥ç»“ç‚¹åå¯¹å¹³è¡¡æ ‘è¿›è¡Œè°ƒæ•´ï¼Œæ¢å¤å¹³è¡¡çš„æ€§è´¨ã€‚å®ç°è¿™ç§è°ƒæ•´çš„æ“ä½œç§°ä¸ºâ€œæ—‹è½¬â€ã€‚

åœ¨æ’å…¥ä¸€ä¸ªæ–°ç»“ç‚¹ X åï¼Œåº”è°ƒæ•´å¤±å»å¹³è¡¡çš„æœ€å°å­æ ‘ï¼Œå³ä»æ’å…¥ç‚¹åˆ°æ ¹çš„è·¯å¾„å‘ä¸Šæ‰¾ç¬¬ä¸€ä¸ªä¸å¹³è¡¡ç»“ç‚¹ Aã€‚

**å¹³è¡¡å› å­**ï¼šè¯¥ç»“ç‚¹çš„å·¦å­æ ‘é«˜åº¦å’Œå³å­æ ‘é«˜åº¦çš„å·®å€¼ã€‚å¦‚æœå·®å€¼çš„ç»å¯¹å€¼å°äºç­‰äº `1`ï¼Œåˆ™è¯´æ˜è¯¥ç»“ç‚¹å¹³è¡¡ï¼Œå¦‚æœå·®å€¼çš„ç»å¯¹å€¼ä¸º `2`ï¼ˆä¸ä¼šå‡ºç°å…¶ä»–æƒ…å†µï¼‰ï¼Œåˆ™è¯´æ˜è¯¥ç»“ç‚¹ä¸å¹³è¡¡ï¼Œéœ€è¦åšå¹³è¡¡å¤„ç†ã€‚

é€ æˆç»“ç‚¹ A ä¸å¹³è¡¡çš„çš„åŸå› ä»¥åŠè°ƒæ•´æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µã€‚

### LL å‹

A ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º `2`ï¼Œè¯´æ˜è¯¥ç»“ç‚¹æ˜¯æœ€å°ä¸å¹³è¡¡ç»“ç‚¹ï¼Œéœ€è¦å¯¹ A ç»“ç‚¹è¿›è¡Œè°ƒæ•´ã€‚é—®é¢˜å‘ç”Ÿåœ¨ A ç»“ç‚¹å·¦å­ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ï¼Œæ‰€ä»¥ä¸º LL å‹ã€‚

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220328154635877-1534447969.png)

**æ‰æ‹…åŸç†**ï¼šå³æ—‹

*   å°† A çš„å·¦å­©å­ B æå‡ä¸ºæ–°çš„æ ¹ç»“ç‚¹ï¼›
    
*   å°†åŸæ¥çš„æ ¹ç»“ç‚¹ A é™ä¸º B çš„å³å­©å­ï¼›
    
*   å„å­æ ‘æŒ‰å¤§å°å…³ç³»è¿æ¥(BL å’Œ AR ä¸å˜ï¼ŒBR è°ƒæ•´ä¸º A çš„å·¦å­æ ‘)ã€‚
    
*   é«˜åº¦è°ƒæ•´ï¼šç”±äºè°ƒæ•´å B çš„é«˜åº¦ä¾èµ–äº A çš„é«˜åº¦ï¼Œæ‰€ä»¥å…ˆæ›´æ–° A çš„é«˜åº¦ï¼Œå†æ›´æ–° B çš„é«˜åº¦ã€‚
    

        private AVLNode<K, V> rightRotate(AVLNode<K, V> a) {
            AVLNode<K, V> b = a.left;
            a.left = b.right;
            b.right = a;
            a.height = Math.max(getHeight(a.left), getHeight(a.right)) + 1;
            b.height = Math.max(getHeight(b.left), getHeight(b.left)) + 1;
            return b;
        }
    

### RR å‹

A ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º `2`ï¼Œè¯´æ˜è¯¥ç»“ç‚¹æ˜¯æœ€å°ä¸å¹³è¡¡ç»“ç‚¹ï¼Œéœ€è¦å¯¹ A ç»“ç‚¹è¿›è¡Œè°ƒæ•´ã€‚é—®é¢˜å‘ç”Ÿåœ¨ A ç»“ç‚¹å³å­ç»“ç‚¹çš„å³å­ç»“ç‚¹ï¼Œæ‰€ä»¥ä¸º RR å‹ã€‚

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220328172259558-2095382174.png)

**æ‰æ‹…åŸç†**ï¼šå·¦æ—‹

*   å°† A çš„å³å­©å­ B æå‡ä¸ºæ–°çš„æ ¹ç»“ç‚¹ï¼›
    
*   å°†åŸæ¥çš„æ ¹ç»“ç‚¹ A é™ä¸º B çš„å·¦å­©å­ï¼›
    
*   å„å­æ ‘æŒ‰å¤§å°å…³ç³»è¿æ¥(AL å’Œ BR ä¸å˜ï¼ŒBL è°ƒæ•´ä¸º A çš„å³å­æ ‘)ã€‚
    
*   é«˜åº¦è°ƒæ•´ï¼šç”±äºè°ƒæ•´å B çš„é«˜åº¦ä¾èµ–äº A çš„é«˜åº¦ï¼Œæ‰€ä»¥å…ˆæ›´æ–° A çš„é«˜åº¦ï¼Œå†æ›´æ–° B çš„é«˜åº¦ã€‚
    

        private AVLNode<K, V> leftRotate(AVLNode<K, V> a) {
            AVLNode<K, V> b = a.right;
            a.right = b.left;
            b.left = a;
            a.height = Math.max(getHeight(a.left), getHeight(a.right)) + 1;
            b.height = Math.max(getHeight(b.left), getHeight(b.left)) + 1;
            return b;
        }
    

### LR å‹

A ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º `2`ï¼Œè¯´æ˜è¯¥ç»“ç‚¹æ˜¯æœ€å°ä¸å¹³è¡¡ç»“ç‚¹ï¼Œéœ€è¦å¯¹ A ç»“ç‚¹è¿›è¡Œè°ƒæ•´ã€‚é—®é¢˜å‘ç”Ÿåœ¨ A ç»“ç‚¹å·¦å­ç»“ç‚¹çš„å³å­ç»“ç‚¹ï¼Œæ‰€ä»¥ä¸º LR å‹ã€‚

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220328173012537-1894530617.png)

*   ä»æ—‹è½¬çš„è§’åº¦ï¼šå¯¹ B å·¦æ—‹ï¼Œç„¶åå¯¹ A å³æ—‹
    
*   å°† B çš„å·¦å­©å­ C æå‡ä¸ºæ–°çš„æ ¹ç»“ç‚¹ï¼›
    
*   å°†åŸæ¥çš„æ ¹ç»“ç‚¹ A é™ä¸º C çš„å³å­©å­ï¼›
    
*   å„å­æ ‘æŒ‰å¤§å°å…³ç³»è¿æ¥(BL å’Œ AR ä¸å˜ï¼ŒCL å’Œ CR åˆ†åˆ«è°ƒæ•´ä¸º B çš„å³å­æ ‘å’Œ A çš„å·¦å­æ ‘)ã€‚
    

        private AVLNode<K, V> leftRightRotate(AVLNode<K, V> a) {
            a.left = leftRotate(a.left);   // å¯¹ B å·¦æ—‹
            return rightRotate(a);         // å¯¹ A å³æ—‹
        }
    

### RL å‹

A ç»“ç‚¹çš„å¹³è¡¡å› å­ä¸º `2`ï¼Œè¯´æ˜è¯¥ç»“ç‚¹æ˜¯æœ€å°ä¸å¹³è¡¡ç»“ç‚¹ï¼Œéœ€è¦å¯¹ A ç»“ç‚¹è¿›è¡Œè°ƒæ•´ã€‚é—®é¢˜å‘ç”Ÿåœ¨ A ç»“ç‚¹å³å­ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ï¼Œæ‰€ä»¥ä¸º RL å‹ã€‚

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220328173140925-290558091.png)

*   ä»æ—‹è½¬çš„è§’åº¦ï¼šå¯¹ B å³æ—‹ï¼Œç„¶åå¯¹ A å·¦æ—‹
    
*   å°† B çš„å·¦å­©å­ C æå‡ä¸ºæ–°çš„æ ¹ç»“ç‚¹ï¼›
    
*   å°†åŸæ¥çš„æ ¹ç»“ç‚¹ A é™ä¸º C çš„å·¦å­©å­ï¼›
    
*   å„å­æ ‘æŒ‰å¤§å°å…³ç³»è¿æ¥(AL å’Œ BR ä¸å˜ï¼ŒCL å’Œ CR åˆ†åˆ«è°ƒæ•´ä¸º A çš„å³å­æ ‘å’Œ B çš„å·¦å­æ ‘)ã€‚
    

        private AVLNode<K, V> rightLeftRotate(AVLNode<K, V> a) {
            a.right = rightRotate(a.right);
            return leftRotate(a);
        }
    

### æ’å…¥æ–¹æ³•

*   æ ¹ç»“ç‚¹é»˜è®¤é«˜åº¦ä¸º `1`
    
*   æŸç»“ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸º `2`ï¼Œåˆ™éœ€è¦è¿›è¡Œå¹³è¡¡å¤„ç†
    
    *   å·¦å­æ ‘é«˜
        
        *   `key` å°äº `root.left.key`ï¼šLLå‹ï¼Œè¿›è¡Œå³æ—‹  
            ![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220328171750180-1801327800.png)
            
        *   `key` å¤§äº `root.left.key`ï¼šLRå‹ï¼Œè¿›è¡Œå·¦å³æ—‹  
            ![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220328171820818-1219823630.png)
            
    *   å³å­æ ‘é«˜
        
        *   `key` å¤§äº `root.right.key`ï¼šRRå‹ï¼Œè¿›è¡Œå·¦æ—‹  
            ![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220328171716154-273484538.png)
            
        *   `key` å°äº `root.right.key`ï¼šRRå‹ï¼Œè¿›è¡Œå³å·¦æ—‹  
            ![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220328171627085-1536081981.png)
            

        public void insert(K key, V value) {
            root = insert(root, key, value);
        }
    
        private AVLNode<K, V> insert(AVLNode<K, V> t, K key, V value) {
            if (t == null) {
                return new AVLNode<>(key, value, 1);
            } else if (key.compareTo(t.key) < 0) {
                t.left = insert(t.left, key, value);
                t.height = Math.max(getHeight(t.left), getHeight(t.right)) + 1;
                // å¹³è¡¡å› å­åˆ¤æ–­
                if (getHeight(t.left) - getHeight(t.right) == 2) {
                    if (key.compareTo(root.left.key) < 0) // å·¦å·¦ï¼šå³æ—‹
                        t = rightRotate(t);
                    else                                 // å·¦å³ï¼šå…ˆå·¦æ—‹ï¼Œå†å³æ—‹
                        t = leftRightRotate(t);
                }
            } else if (key.compareTo(t.key) > 0) {
                t.right = insert(t.right, key, value);
                t.height = Math.max(getHeight(t.left), getHeight(t.right)) + 1;
                // å¹³è¡¡å› å­åˆ¤æ–­
                if (getHeight(t.left) - getHeight(t.right) == -2) {
                    if (key.compareTo(root.right.key) > 0) // å³å³ï¼šå·¦æ—‹
                        t = leftRotate(t);
                    else                                  // å³å·¦ï¼šå…ˆå³æ—‹ï¼Œå†å·¦æ—‹
                        t = rightLeftRotate(t);
                }
            } else {
                t.value = value;
            }
            return t;
        }
    
    

åˆ é™¤ç®—æ³•
----

### æ¦‚è¿°

*   å¯é‡‡ç”¨äºŒå‰æŸ¥æ‰¾æ ‘çš„åˆ é™¤ç®—æ³•è¿›è¡Œåˆ é™¤ã€‚  
    [ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€‘æ‰‹æ’•äºŒå‰æŸ¥æ‰¾æ ‘](https://www.cnblogs.com/gonghr/p/16060017.html#%E5%88%A0%E9%99%A4%E7%AE%97%E6%B3%95)
    
*   åˆ é™¤æŸç»“ç‚¹ X åï¼Œæ²¿ä» X åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¸Šè€ƒå¯Ÿæ²¿é€”ç»“ç‚¹çš„å¹³è¡¡ç³»æ•°ï¼Œè‹¥ç¬¬ä¸€ä¸ªä¸å¹³è¡¡ç‚¹ä¸º Aï¼Œå¹³è¡¡ä»¥ A ä¸ºæ ¹çš„å­æ ‘ã€‚
    
*   å¹³è¡¡åï¼Œå¯èƒ½ä½¿å­æ ‘ A é«˜åº¦å˜å°ã€‚è¿™æ ·å¯èƒ½å¯¼è‡´ A çš„çˆ¶èŠ‚ç‚¹ä¸æ»¡è¶³å¹³è¡¡æ€§ã€‚
    
*   æ‰€ä»¥è¦ç»§ç»­å‘ä¸Šè€ƒå¯Ÿç»“ç‚¹çš„å¹³è¡¡æ€§ï¼Œæœ€è¿œå¯èƒ½è‡³æ ¹ç»“ç‚¹ï¼Œå³æœ€å¤šéœ€è¦åš `O(logn)` æ¬¡æ—‹è½¬ã€‚
    
*   å¯¹æ¯”â€œæ’å…¥â€æ“ä½œï¼šå¹³è¡¡ A åï¼Œå­æ ‘**é«˜åº¦ä¸å˜**ï¼ŒA å­æ ‘ä»¥å¤–çš„ç»“ç‚¹ä¸å—å½±å“ï¼Œå³æ’å…¥æœ€å¤šæ¶‰åŠ `O(1)` æ¬¡æ—‹è½¬ã€‚
    

### å®ä¾‹åˆ†æ

ğŸŒ° ä¸‹é¢ä¸¾ä¸ªåˆ é™¤çš„ä¾‹å­ï¼š

åˆ é™¤ä»¥ä¸‹å¹³è¡¡äºŒå‰æ ‘ä¸­çš„ 16 ç»“ç‚¹

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220329180426168-116875191.png)

1ï¸âƒ£ 16 ä¸ºå¶å­ï¼Œå°†å…¶åˆ é™¤å³å¯ï¼Œå¦‚ä¸‹å›¾ã€‚

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220329180512455-582850875.png)

2ï¸âƒ£ æŒ‡é’ˆ g æŒ‡å‘å®é™…è¢«åˆ é™¤èŠ‚ç‚¹ 16 ä¹‹çˆ¶ 25ï¼Œæ£€æŸ¥æ˜¯å¦å¤±è¡¡ï¼Œ25 èŠ‚ç‚¹å¤±è¡¡ï¼Œç”¨ g ã€u ã€v è®°å½•å¤±è¡¡ä¸‰ä»£èŠ‚ç‚¹ï¼ˆä»å¤±è¡¡èŠ‚ç‚¹æ²¿ç€é«˜åº¦å¤§çš„å­æ ‘å‘ä¸‹æ‰¾ä¸‰ä»£ï¼‰ï¼Œåˆ¤æ–­ä¸º RL å‹ï¼Œè¿›è¡Œ RL æ—‹è½¬è°ƒæ•´å¹³è¡¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220329181120268-2092113272.png)

3ï¸âƒ£ ç»§ç»­å‘ä¸Šæ£€æŸ¥ï¼ŒæŒ‡é’ˆ g æŒ‡å‘ g çš„åŒäº² 69ï¼Œæ£€æŸ¥æ˜¯å¦å¤±è¡¡ï¼Œ69 èŠ‚ç‚¹å¤±è¡¡ï¼Œç”¨ g ã€u ã€v è®°å½•å¤±è¡¡ä¸‰ä»£èŠ‚ç‚¹ï¼Œåˆ¤æ–­ä¸º RR å‹ï¼Œè¿›è¡Œ RR æ—‹è½¬è°ƒæ•´å¹³è¡¡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://img2022.cnblogs.com/blog/2288178/202203/2288178-20220329181727307-2075613832.png)

### ä»£ç 

**ä»£ç æè¿°**ï¼š

*   è‹¥å½“å‰ç»“ç‚¹ä¸ºç©ºï¼Œ åˆ™è¿”å›è¯¥èŠ‚ç‚¹
    
*   è‹¥å…³é”®å€¼å°äºå½“å‰ç»“ç‚¹çš„å…³é”®å€¼ï¼Œåˆ™é€’å½’å¤„ç†è¯¥ç»“ç‚¹çš„å·¦å­æ ‘
    
*   è‹¥å…³é”®å€¼å¤§äºå½“å‰ç»“ç‚¹çš„å…³é”®å€¼ï¼Œåˆ™é€’å½’å¤„ç†è¯¥ç»“ç‚¹çš„å³å­æ ‘
    
*   è‹¥å…³é”®å€¼ç­‰äºå½“å‰ç»“ç‚¹çš„å…³é”®å€¼
    
    *   è‹¥å½“å‰ç»“ç‚¹çš„å·¦å­æ ‘ä¸ºç©ºï¼Œåˆ™è¿”å›è¯¥ç»“ç‚¹çš„å³å­æ ‘æ ¹èŠ‚ç‚¹
        
    *   è‹¥å½“å‰ç»“ç‚¹çš„å³å­æ ‘ä¸ºç©ºï¼Œåˆ™è¿”å›è¯¥ç»“ç‚¹çš„å·¦å­æ ‘æ ¹èŠ‚ç‚¹
        
    *   è‹¥å½“å‰ç»“ç‚¹å·¦å³å­æ ‘éƒ½ä¸ä¸ºç©ºï¼Œåˆ™æ‰¾åˆ°è¯¥ç»“ç‚¹çš„ä¸­åºå‰é©±ç»“ç‚¹ï¼ˆè¯¥ç»“ç‚¹å·¦å­æ ‘çš„æœ€å³ç»“ç‚¹ï¼‰æˆ–ä¸­åºåç»§ç»“ç‚¹ï¼ˆè¯¥ç»“ç‚¹å³å­æ ‘çš„æœ€å·¦ç»“ç‚¹ï¼‰ï¼Œå°†å…¶å€¼èµ‹äºˆè¯¥ç»“ç‚¹ï¼Œç„¶åé€’å½’åˆ é™¤ä¸­åºå‰é©±æˆ–åç»§ç»“ç‚¹ã€‚
        
*   æ›´æ–°ç»“ç‚¹é«˜åº¦
    
*   è‹¥è¯¥ç»“ç‚¹å·¦å­æ ‘é«˜åº¦æ›´é«˜ï¼Œä¸”å¤„äºä¸å¹³è¡¡çŠ¶æ€
    
    *   è‹¥ä¸º LL å‹ï¼Œè¿›è¡Œå³æ—‹
        
    *   è‹¥ä¸º LR å‹ï¼Œå…ˆå·¦æ—‹ï¼Œå†å³æ—‹
        
*   è‹¥è¯¥ç»“ç‚¹å³å­æ ‘é«˜åº¦æ›´é«˜ï¼Œä¸”å¤„äºä¸å¹³è¡¡çŠ¶æ€
    
    *   è‹¥ä¸º RL å‹ï¼Œå…ˆå³æ—‹ï¼Œå†å·¦æ—‹
        
    *   è‹¥æˆ‘ RR å‹ï¼Œè¿›è¡Œå·¦æ—‹
        
*   è¿”å›è¯¥ç»“ç‚¹
    

        public void remove(K key) {
            this.root = delete(root, key);
        }
    
        public AVLNode<K, V> delete(AVLNode<K, V> t, K key) {
            if (t == null) return t;
            if (key.compareTo(t.key) < 0) {
                t.left = delete(t.left, key);
            }
            else if (key.compareTo(t.key) > 0) {
                t.right = delete(t.right, key);
            }
            else {
                if(t.left == null) return t.right;
                else if(t.right == null) return t.left;
                else {         // t.left != null && t.right != null
                    AVLNode<K, V> pre = t.left;
                    while (pre.right != null) {
                        pre = pre.right;
                    }
                    t.key = pre.key;
                    t.value = pre.value;
                    t.left = delete(t.left, t.key);
                }
            }
            if (t == null) return t;
            t.height = Math.max(getHeight(t.left), getHeight(t.right)) + 1;
            if(getHeight(t.left) - getHeight(t.right) >= 2) {
                if(getHeight(t.left.left) > getHeight(t.left.right)) {
                    return rightRotate(t);
                } else {
                    return leftRightRotate(t);
                }
            }
            else if(getHeight(t.left) - getHeight(t.right) <= -2) {
                if(getHeight(t.right.left) > getHeight(t.right.right)) {
                    return rightLeftRotate(t);
                }
                else {
                    return leftRotate(t);
                }
            }
            return t;
        }
    

å®Œæ•´ä»£ç 
----

    class AVLNode<K extends Comparable<K>, V> {
        public K key;
        public V value;
        public int height;
        public AVLNode<K, V> left;
        public AVLNode<K, V> right;
    
        public AVLNode(K key, V value, int height) {
            this.key = key;
            this.value = value;
            this.height = height;
        }
    }
    
    class AVLTree<K extends Comparable<K>, V> {
    
        public AVLNode<K, V> root;
    
        public int getHeight(AVLNode<K, V> t) {
            return t == null ? 0 : t.height;
        }
    
        public void insert(K key, V value) {
            root = insert(root, key, value);
        }
    
        public void remove(K key) {
            this.root = delete(root, key);
        }
    
        public AVLNode<K, V> delete(AVLNode<K, V> t, K key) {
            if (t == null) return t;
            if (key.compareTo(t.key) < 0) {
                t.left = delete(t.left, key);
            }
            else if (key.compareTo(t.key) > 0) {
                t.right = delete(t.right, key);
            }
            else {
                if(t.left == null) return t.right;
                else if(t.right == null) return t.left;
                else {         // t.left != null && t.right != null
                    AVLNode<K, V> pre = t.left;
                    while (pre.right != null) {
                        pre = pre.right;
                    }
                    t.key = pre.key;
                    t.value = pre.value;
                    t.left = delete(t.left, t.key);
                }
            }
            if (t == null) return t;
            t.height = Math.max(getHeight(t.left), getHeight(t.right)) + 1;
            if(getHeight(t.left) - getHeight(t.right) >= 2) {
                if(getHeight(t.left.left) > getHeight(t.left.right)) {
                    return rightRotate(t);
                } else {
                    return leftRightRotate(t);
                }
            }
            else if(getHeight(t.left) - getHeight(t.right) <= -2) {
                if(getHeight(t.right.left) > getHeight(t.right.right)) {
                    return rightLeftRotate(t);
                }
                else {
                    return leftRotate(t);
                }
            }
            return t;
        }
    
    
        private AVLNode<K, V> insert(AVLNode<K, V> t, K key, V value) {
            if (t == null) {
                return new AVLNode<>(key, value, 1);
            }
            if (key.compareTo(t.key) < 0) {
                t.left = insert(t.left, key, value);
                // å¹³è¡¡å› å­åˆ¤æ–­
                if (getHeight(t.left) - getHeight(t.right) == 2) {
                    if (key.compareTo(t.left.key) < 0) // å·¦å·¦ï¼šå³æ—‹
                        t = rightRotate(t);
                    else                                  // å·¦å³ï¼šå…ˆå·¦æ—‹ï¼Œå†å³æ—‹
                        t = leftRightRotate(t);
                }
            } else if (key.compareTo(t.key) > 0) {
                t.right = insert(t.right, key, value);
                // å¹³è¡¡å› å­åˆ¤æ–­
                if (getHeight(t.left) - getHeight(t.right) == -2) {
                    if (key.compareTo(t.right.key) > 0) // å³å³ï¼šå·¦æ—‹
                        t = leftRotate(t);
                    else                                   // å³å·¦ï¼šå…ˆå³æ—‹ï¼Œå†å·¦æ—‹
                        t = rightLeftRotate(t);
                }
            } else {
                t.value = value;
            }
            t.height = Math.max(getHeight(t.left), getHeight(t.right)) + 1;
            return t;
        }
    
        private AVLNode<K, V> rightLeftRotate(AVLNode<K, V> a) {
            a.right = rightRotate(a.right);
            return leftRotate(a);
        }
    
        private AVLNode<K, V> leftRightRotate(AVLNode<K, V> a) {
            a.left = leftRotate(a.left);
            return rightRotate(a);
        }
    
        private AVLNode<K, V> leftRotate(AVLNode<K, V> a) {
            AVLNode<K, V> b = a.right;
            a.right = b.left;
            b.left = a;
            a.height = Math.max(getHeight(a.left), getHeight(a.right)) + 1;
            b.height = Math.max(getHeight(b.left), getHeight(b.right)) + 1;
            return b;
        }
    
        private AVLNode<K, V> rightRotate(AVLNode<K, V> a) {
            AVLNode<K, V> b = a.left;
            a.left = b.right;
            b.right = a;
            a.height = Math.max(getHeight(a.left), getHeight(a.right)) + 1;
            b.height = Math.max(getHeight(b.left), getHeight(b.right)) + 1;
            return b;
        }
    
        private void inorder(AVLNode<K, V> root) {
            if (root != null) {
                inorder(root.left);
                System.out.print("(key: " + root.key + " , value: " + root.value + " , height: " + root.height + ") ");
                inorder(root.right);
            }
        }
    
        private void preorder(AVLNode<K, V> root) {
            if (root != null) {
                System.out.print("(key: " + root.key + " , value: " + root.value + " , height: " + root.height + ") ");
                preorder(root.left);
                preorder(root.right);
            }
        }
    
        private void postorder(AVLNode<K, V> root) {
            if (root != null) {
                postorder(root.left);
                postorder(root.right);
                System.out.print("(key: " + root.key + " , value: " + root.value + " , height: " + root.height + ") ");
            }
        }
    
        public void postorderTraverse() {
            System.out.print("ååºéå†ï¼š");
            postorder(root);
            System.out.println();
        }
    
        public void preorderTraverse() {
            System.out.print("å…ˆåºéå†ï¼š");
            preorder(root);
            System.out.println();
        }
    
        public void inorderTraverse() {
            System.out.print("ä¸­åºéå†ï¼š");
            inorder(root);
            System.out.println();
        }
    }
    

ğŸ› æ–¹æ³•æµ‹è¯•

        public static void main(String[] args) {
            AVLTree<Integer, Integer> tree = new AVLTree<>();
            tree.insert(69, 1);
            tree.insert(25, 1);
            tree.insert(80, 1);
            tree.insert(16, 1);
            tree.insert(56, 1);
            tree.insert(75, 1);
            tree.insert(90, 1);
            tree.insert(30, 1);
            tree.insert(78, 1);
            tree.insert(85, 1);
            tree.insert(98, 1);
            tree.insert(82, 1);
    
            tree.remove(16);
            tree.preorderTraverse();
            tree.inorderTraverse();
            tree.postorderTraverse();
        }
    

è¾“å‡º

    å…ˆåºéå†ï¼š(key: 80 , value: 1 , height: 4) (key: 69 , value: 1 , height: 3) (key: 30 , value: 1 , height: 2) (key: 25 , value: 1 , height: 1) (key: 56 , value: 1 , height: 1) (key: 75 , value: 1 , height: 2) (key: 78 , value: 1 , height: 1) (key: 90 , value: 1 , height: 3) (key: 85 , value: 1 , height: 2) (key: 82 , value: 1 , height: 1) (key: 98 , value: 1 , height: 1) 
    ä¸­åºéå†ï¼š(key: 25 , value: 1 , height: 1) (key: 30 , value: 1 , height: 2) (key: 56 , value: 1 , height: 1) (key: 69 , value: 1 , height: 3) (key: 75 , value: 1 , height: 2) (key: 78 , value: 1 , height: 1) (key: 80 , value: 1 , height: 4) (key: 82 , value: 1 , height: 1) (key: 85 , value: 1 , height: 2) (key: 90 , value: 1 , height: 3) (key: 98 , value: 1 , height: 1) 
    ååºéå†ï¼š(key: 25 , value: 1 , height: 1) (key: 56 , value: 1 , height: 1) (key: 30 , value: 1 , height: 2) (key: 78 , value: 1 , height: 1) (key: 75 , value: 1 , height: 2) (key: 69 , value: 1 , height: 3) (key: 82 , value: 1 , height: 1) (key: 85 , value: 1 , height: 2) (key: 98 , value: 1 , height: 1) (key: 90 , value: 1 , height: 3) (key: 80 , value: 1 , height: 4)