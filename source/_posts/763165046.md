---
layout: post
title: "Vben Admin æºç å­¦ä¹ :çŠ¶æ€ç®¡ç†-è§’è‰²æƒé™"
date: "2022-09-07T04:56:39.786Z"
---
Vben Admin æºç å­¦ä¹ :çŠ¶æ€ç®¡ç†-è§’è‰²æƒé™
-------------------------

2022-09-07 12:02Â  [Anduril](https://www.cnblogs.com/anduril/)Â  é˜…è¯»(10)Â  è¯„è®º(0)Â  [ç¼–è¾‘](https://i.cnblogs.com/EditPosts.aspx?postid=16664946)Â  [æ”¶è—](javascript:void(0))Â  [ä¸¾æŠ¥](javascript:void(0))

![Vben Admin æºç å­¦ä¹ :çŠ¶æ€ç®¡ç†-è§’è‰²æƒé™](https://img2022.cnblogs.com/blog/754488/202209/754488-20220907120107822-381617134.png) æœ¬æ–‡å°†å¯¹ Vue-Vben-Admin æƒé™çš„çŠ¶æ€ç®¡ç†è¿›è¡Œæºç è§£è¯»ï¼Œè€å¿ƒè¯»å®Œï¼Œç›¸ä¿¡æ‚¨ä¸€å®šä¼šæœ‰æ‰€æ”¶è·!

å‰è¨€
--

æœ¬æ–‡å°†å¯¹ [Vue-Vben-Admin](https://vvbin.cn/doc-next/) è§’è‰²æƒé™çš„çŠ¶æ€ç®¡ç†è¿›è¡Œæºç è§£è¯»ï¼Œè€å¿ƒè¯»å®Œï¼Œç›¸ä¿¡æ‚¨ä¸€å®šä¼šæœ‰æ‰€æ”¶è·!

æ›´å¤šç³»åˆ—æ–‡ç« è¯¦è§ä¸“æ  ğŸ‘‰Â [**ğŸ“š Vben Admin é¡¹ç›®åˆ†æ&å®è·µ**](https://juejin.cn/column/7101702283628396551)Â ã€‚

æœ¬æ–‡æ¶‰åŠåˆ°è§’è‰²æƒé™ä¹‹å¤–çš„è¾ƒå¤šå†…å®¹ï¼ˆè·¯ç”±ç›¸å…³ï¼‰ä¼šä¸€ç¬”å¸¦è¿‡ï¼Œå…·ä½“åŠŸèƒ½å®ç°å°†åœ¨åé¢ä¸“é¢˜ä¸­è¯¦ç»†è®¨è®ºã€‚ä¸ºäº†æ›´å¥½çš„ç†è§£æœ¬æ–‡å†…å®¹ï¼Œè¯·å…ˆé˜…è¯»å®˜æ–¹çš„æ–‡æ¡£è¯´æ˜ [\# æƒé™](https://vvbin.cn/doc-next/guide/auth.html)ã€‚

permission.ts è§’è‰²æƒé™
------------------

æ–‡ä»¶Â `src\store\modules\permission.ts`Â å£°æ˜å¯¼å‡ºä¸€ä¸ªstoreå®ä¾‹Â `usePermissionStore`Â ã€ä¸€ä¸ªæ–¹æ³•Â `usePermissionStoreWithOut()`ç”¨äºæ²¡æœ‰ä½¿ç”¨Â `setup`Â ç»„ä»¶æ—¶ä½¿ç”¨ã€‚

    // è§’è‰²æƒé™ä¿¡æ¯å­˜å‚¨
    export const usePermissionStore = defineStore({
      id: 'app-permission',
      state: { /*...*/ },
      getters: { /*...*/ }
      actionsï¼š{ /*...*/ }   
    });
    
    export function usePermissionStoreWithOut() {
      return usePermissionStoreWithOut(store);
    }
    

State/Getter
------------

çŠ¶æ€å¯¹è±¡å®šä¹‰äº†æƒé™ä»£ç åˆ—è¡¨ã€æ˜¯å¦åŠ¨æ€æ·»åŠ è·¯ç”±ã€èœå•æœ€åæ›´æ–°æ—¶é—´ã€åç«¯è§’è‰²æƒé™èœå•åˆ—è¡¨ä»¥åŠå‰ç«¯è§’è‰²æƒé™èœå•åˆ—è¡¨ã€‚åŒæ—¶æä¾›äº†å¯¹åº”`getter`ç”¨äºè·å–çŠ¶æ€å€¼ã€‚

    // æƒé™çŠ¶æ€
    interface PermissionState { 
      permCodeList: string[] | number[]; // æƒé™ä»£ç åˆ—è¡¨ 
      isDynamicAddedRoute: boolean; // æ˜¯å¦åŠ¨æ€æ·»åŠ è·¯ç”± 
      lastBuildMenuTime: number; // èœå•æœ€åæ›´æ–°æ—¶é—´ 
      backMenuList: Menu[]; // åç«¯è§’è‰²æƒé™èœå•åˆ—è¡¨
      frontMenuList: Menu[]; // å‰ç«¯è§’è‰²æƒé™èœå•åˆ—è¡¨
    }
    
    // çŠ¶æ€å®šä¹‰åŠåˆå§‹åŒ–
    state: (): PermissionState => ({
      permCodeList: [], 
      isDynamicAddedRoute: false, 
      lastBuildMenuTime: 0, 
      backMenuList: [], 
      frontMenuList: [],
    }),
    getters: { 
      getPermCodeList(): string[] | number[] {
        return this.permCodeList; // è·å–æƒé™ä»£ç åˆ—è¡¨
      },
      getBackMenuList(): Menu[] {
        return this.backMenuList; // è·å–åç«¯è§’è‰²æƒé™èœå•åˆ—è¡¨
      },
      getFrontMenuList(): Menu[] {
        return this.frontMenuList; // è·å–å‰ç«¯è§’è‰²æƒé™èœå•åˆ—è¡¨
      },
      getLastBuildMenuTime(): number {
        return this.lastBuildMenuTime; // è·å–èœå•æœ€åæ›´æ–°æ—¶é—´
      },
      getIsDynamicAddedRoute(): boolean {
        return this.isDynamicAddedRoute; // è·å–æ˜¯å¦åŠ¨æ€æ·»åŠ è·¯ç”±
      },
    }, 
    

Actions
-------

ä»¥ä¸‹æ–¹æ³•ç”¨äºæ›´æ–°çŠ¶æ€å±æ€§ã€‚

    // æ›´æ–°å±æ€§ permCodeList
    setPermCodeList(codeList: string[]) {
      this.permCodeList = codeList;
    },
    // æ›´æ–°å±æ€§ backMenuList
    setBackMenuList(list: Menu[]) {
      this.backMenuList = list;
      list?.length > 0 && this.setLastBuildMenuTime(); // è®°å½•èœå•æœ€åæ›´æ–°æ—¶é—´
    },
    // æ›´æ–°å±æ€§ frontMenuList
    setFrontMenuList(list: Menu[]) {
      this.frontMenuList = list;
    },
    // æ›´æ–°å±æ€§ lastBuildMenuTime
    setLastBuildMenuTime() {
      this.lastBuildMenuTime = new Date().getTime(); // ä¸€ä¸ªä»£è¡¨æ—¶é—´æ¯«ç§’æ•°çš„æ•°å€¼
    },
    // æ›´æ–°å±æ€§ isDynamicAddedRoute
    setDynamicAddedRoute(added: boolean) {
      this.isDynamicAddedRoute = added;
    },
    // é‡ç½®çŠ¶æ€å±æ€§
    resetState(): void {
      this.isDynamicAddedRoute = false;
      this.permCodeList = [];
      this.backMenuList = [];
      this.lastBuildMenuTime = 0;
    },
    

æ–¹æ³• `changePermissionCode` æ¨¡æ‹Ÿä»åå°è·å¾—ç”¨æˆ·æƒé™ç ,å¸¸ç”¨äºåç«¯æƒé™æ¨¡å¼ä¸‹è·å–ç”¨æˆ·æƒé™ç ã€‚é¡¹ç›®ä¸­ä½¿ç”¨äº†æœ¬åœ° MockæœåŠ¡æ¨¡æ‹Ÿã€‚

    async changePermissionCode() {
      const codeList = await getPermCode();
      this.setPermCodeList(codeList);
    },
    
    // src\api\sys\user.ts
    enum Api { 
      GetPermCode = '/getPermCode', 
    }
    export function getPermCode() {
      return defHttp.get<string[]>({ url: Api.GetPermCode });
    }
    

ä½¿ç”¨åˆ°çš„ mock æ¥å£å’Œæ¨¡æ‹Ÿæ•°æ®ã€‚

    // mock\sys\user.ts
    {
      url: '/basic-api/getPermCode',
      timeout: 200,
      method: 'get',
      response: (request: requestParams) => {
        // ...  
        const checkUser = createFakeUserList().find((item) => item.token === token); 
        const codeList = fakeCodeList[checkUser.userId];
        // ...
        return resultSuccess(codeList);
      },
    },
    
    const fakeCodeList: any = {
      '1': ['1000', '3000', '5000'], 
      '2': ['2000', '4000', '6000'],
    };
    

åŠ¨æ€è·¯ç”±&æƒé™è¿‡æ»¤
---------

æ–¹æ³•`buildRoutesAction`ç”¨äºåŠ¨æ€è·¯ç”±åŠç”¨æˆ·æƒé™è¿‡æ»¤ï¼Œä»£ç é€»è¾‘ç»“æ„å¦‚ä¸‹ï¼š

    async buildRoutesAction(): Promise<AppRouteRecordRaw[]> {
      const { t } = useI18n(); // å›½é™…åŒ–
      const userStore = useUserStore(); // ç”¨æˆ·ä¿¡æ¯å­˜å‚¨
      const appStore = useAppStoreWithOut(); // é¡¹ç›®é…ç½®ä¿¡æ¯å­˜å‚¨
    
      let routes: AppRouteRecordRaw[] = [];
      // ç”¨æˆ·è§’è‰²åˆ—è¡¨
      const roleList = toRaw(userStore.getRoleList) || [];
      // è·å–æƒé™æ¨¡å¼
      const { permissionMode = projectSetting.permissionMode } = appStore.getProjectConfig; 
      
      // åŸºäºè§’è‰²è¿‡æ»¤æ–¹æ³•
      const routeFilter = (route: AppRouteRecordRaw) => { /*...*/ };
      // åŸºäº ignoreRoute å±æ€§è¿‡æ»¤
      const routeRemoveIgnoreFilter = (route: AppRouteRecordRaw) => { /*...*/ }; 
      
      
      // ä¸åŒæƒé™æ¨¡å¼å¤„ç†é€»è¾‘
      switch (permissionMode) {
        // å‰ç«¯æ–¹å¼æ§åˆ¶(èœå•å’Œè·¯ç”±åˆ†å¼€é…ç½®)
        case PermissionModeEnum.ROLE: /*...*/ 
        // å‰ç«¯æ–¹å¼æ§åˆ¶(èœå•ç”±è·¯ç”±é…ç½®è‡ªåŠ¨ç”Ÿæˆ)
        case PermissionModeEnum.ROUTE_MAPPING: /*...*/ 
        // åå°æ–¹å¼æ§åˆ¶
        case PermissionModeEnum.BACK: /*...*/ 
      }
    
      routes.push(ERROR_LOG_ROUTE); // æ·»åŠ `é”™è¯¯æ—¥å¿—åˆ—è¡¨`é¡µé¢è·¯ç”±
      
      // æ ¹æ®è®¾ç½®çš„é¦–é¡µpathï¼Œä¿®æ­£routesä¸­çš„affixæ ‡è®°ï¼ˆå›ºå®šé¦–é¡µï¼‰
      const patchHomeAffix = (routes: AppRouteRecordRaw[]) => { /*...*/ };
      patchHomeAffix(routes);
      
      return routes; // è¿”å›è·¯ç”±åˆ—è¡¨
    },
    

é¡µé¢â€œé”™è¯¯æ—¥å¿—åˆ—è¡¨â€è·¯ç”±åœ°å€`/error-log/list`ï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼š

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aa6bc01997964689a1b6f56372abec7d~tplv-k3u1fbpfcp-watermark.image?)

### æƒé™æ¨¡å¼

æ¡†æ¶æä¾›äº†å®Œå–„çš„å‰åç«¯æƒé™ç®¡ç†æ–¹æ¡ˆï¼Œé›†æˆäº†ä¸‰ç§æƒé™å¤„ç†æ–¹å¼ï¼š

1.  `ROLE` é€šè¿‡ç”¨æˆ·è§’è‰²æ¥è¿‡æ»¤èœå•(å‰ç«¯æ–¹å¼æ§åˆ¶)ï¼Œèœå•å’Œè·¯ç”±åˆ†å¼€é…ç½®ã€‚
2.  `ROUTE_MAPPING`é€šè¿‡ç”¨æˆ·è§’è‰²æ¥è¿‡æ»¤èœå•(å‰ç«¯æ–¹å¼æ§åˆ¶)ï¼Œèœå•ç”±è·¯ç”±é…ç½®è‡ªåŠ¨ç”Ÿæˆã€‚
3.  `BACK` é€šè¿‡åå°æ¥åŠ¨æ€ç”Ÿæˆè·¯ç”±è¡¨(åç«¯æ–¹å¼æ§åˆ¶)ã€‚

    // src\settings\projectSetting.ts
    // é¡¹ç›®é…ç½® 
    const setting: ProjectConfig = { 
      permissionMode: PermissionModeEnum.ROUTE_MAPPING, // æƒé™æ¨¡å¼  é»˜è®¤å‰ç«¯æ¨¡å¼
      permissionCacheType: CacheTypeEnum.LOCAL, // æƒé™ç¼“å­˜å­˜æ”¾ä½ç½® é»˜è®¤å­˜æ”¾äºlocalStorage
      // ...
    }
    
    // src\enums\appEnum.ts
    // æƒé™æ¨¡å¼æšä¸¾
    export enum PermissionModeEnum { 
      ROLE = 'ROLE', // å‰ç«¯æ¨¡å¼ï¼ˆèœå•è·¯ç”±åˆ†å¼€ï¼‰
      ROUTE_MAPPING = 'ROUTE_MAPPING', // å‰ç«¯æ¨¡å¼ï¼ˆèœå•ç”±è·¯ç”±ç”Ÿæˆï¼‰ 
      BACK = 'BACK', // åç«¯æ¨¡å¼  
    }
    

### å‰ç«¯æƒé™æ¨¡å¼

å‰ç«¯æƒé™æ¨¡å¼æä¾›äº† `ROLE` å’Œ `ROUTE_MAPPING`ä¸¤ç§å¤„ç†é€»è¾‘ï¼Œæ¥ä¸‹æ¥å°†ä¸€ä¸€åˆ†æã€‚

åœ¨å‰ç«¯ä¼šå›ºå®šå†™æ­»è·¯ç”±çš„æƒé™ï¼ŒæŒ‡å®šè·¯ç”±æœ‰å“ªäº›æƒé™å¯ä»¥æŸ¥çœ‹ã€‚ç³»ç»Ÿå®šä¹‰è·¯ç”±è®°å½•æ—¶æŒ‡å®šå¯ä»¥è®¿é—®çš„è§’è‰²`RoleEnum.SUPER`ã€‚

    // src\router\routes\modules\demo\permission.ts
    {
      path: 'auth-pageA',
      name: 'FrontAuthPageA',
      component: () => import('/@/views/demo/permission/front/AuthPageA.vue'),
      meta: {
        title: t('routes.demo.permission.frontTestA'),
        roles: [RoleEnum.SUPER],
      },
    },
    

ç³»ç»Ÿä½¿ç”¨`meta`å±æ€§åœ¨è·¯ç”±è®°å½•ä¸Šé™„åŠ è‡ªå®šä¹‰æ•°æ®ï¼Œå®ƒå¯ä»¥åœ¨è·¯ç”±åœ°å€å’Œå¯¼èˆªå®ˆå«ä¸Šéƒ½è¢«è®¿é—®åˆ°ã€‚æœ¬æ–¹æ³•ä¸­ä½¿ç”¨åˆ°çš„é…ç½®å±æ€§å¦‚ä¸‹ï¼š

    export interface RouteMeta {  
      // å¯ä»¥è®¿é—®çš„è§’è‰²ï¼Œåªåœ¨æƒé™æ¨¡å¼ä¸ºRoleçš„æ—¶å€™æœ‰æ•ˆ
      roles?: RoleEnum[]; 
      // æ˜¯å¦å›ºå®šæ ‡ç­¾
      affix?: boolean; 
      // èœå•æ’åºï¼Œåªå¯¹ç¬¬ä¸€çº§æœ‰æ•ˆ
      orderNo?: number;
      // å¿½ç•¥è·¯ç”±ã€‚ç”¨äºåœ¨ROUTE_MAPPINGä»¥åŠBACKæƒé™æ¨¡å¼ä¸‹ï¼Œç”Ÿæˆå¯¹åº”çš„èœå•è€Œå¿½ç•¥è·¯ç”±ã€‚
      ignoreRoute?: boolean; 
      // ...
    } 
    

#### ROLE

åˆå§‹åŒ–é€šç”¨çš„è·¯ç”±è¡¨`asyncRoutes`ï¼Œè·å–ç”¨æˆ·è§’è‰²åï¼Œé€šè¿‡è§’è‰²å»éå†è·¯ç”±è¡¨ï¼Œè·å–è¯¥è§’è‰²å¯ä»¥è®¿é—®çš„è·¯ç”±è¡¨ï¼Œç„¶åå¯¹å…¶æ ¼å¼åŒ–å¤„ç†ï¼Œå°†å¤šçº§è·¯ç”±è½¬æ¢ä¸ºäºŒçº§è·¯ç”±ï¼Œæœ€ç»ˆè¿”å›è·¯ç”±è¡¨ã€‚

    // å‰ç«¯æ–¹å¼æ§åˆ¶(èœå•å’Œè·¯ç”±åˆ†å¼€é…ç½®)
    import { asyncRoutes } from '/@/router/routes';
    
    // ...
    
    case PermissionModeEnum.ROLE:
      // æ ¹æ®è§’è‰²è¿‡æ»¤è·¯ç”±
      routes = filter(asyncRoutes, routeFilter);
      routes = routes.filter(routeFilter);
      // å°†å¤šçº§è·¯ç”±è½¬æ¢ä¸ºäºŒçº§è·¯ç”±
      routes = flatMultiLevelRoutes(routes);
      break;
    
    // src\router\routes\index.ts
    export const asyncRoutes = [PAGE_NOT_FOUND_ROUTE, ...routeModuleList];
    

åœ¨è·¯ç”±é’©å­å†…åŠ¨æ€åˆ¤æ–­ï¼Œè°ƒç”¨æ–¹æ³•è¿”å›ç”Ÿæˆçš„è·¯ç”±è¡¨ï¼Œå†é€šè¿‡Â `router.addRoutes`Â æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ï¼Œå®ç°æƒé™çš„è¿‡æ»¤ã€‚

    // src/router/guard/permissionGuard.ts
    const routes = await permissionStore.buildRoutesAction(); 
    routes.forEach((route) => {
      router.addRoute(route as unknown as RouteRecordRaw);
    }); 
    // ....
    

##### routeFilter

è¿‡æ»¤æ–¹æ³•`routeFilter`é€šè¿‡è§’è‰²å»éå†è·¯ç”±è¡¨ï¼Œè·å–è¯¥è§’è‰²å¯ä»¥è®¿é—®çš„è·¯ç”±è¡¨ã€‚

    const userStore = useUserStore(); // ç”¨æˆ·ä¿¡æ¯å­˜å‚¨  
    const roleList = toRaw(userStore.getRoleList) || []; // ç”¨æˆ·è§’è‰²åˆ—è¡¨
    
    const routeFilter = (route: AppRouteRecordRaw) => {
      const { meta } = route;
      const { roles } = meta || {};
      if (!roles) return true;
      return roleList.some((role) => roles.includes(role));
    };
    

##### flatMultiLevelRoutes

æ–¹æ³•`flatMultiLevelRoutes`å°†å¤šçº§è·¯ç”±è½¬æ¢ä¸ºäºŒçº§è·¯ç”±ï¼Œä¸‹å›¾æ˜¯æœªå¤„ç†å‰è·¯ç”±è¡¨ä¿¡æ¯:

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bfcd59ab253f407ca45ce65a86ee52dd~tplv-k3u1fbpfcp-watermark.image?)

ä¸‹å›¾æ˜¯æ ¼å¼åŒ–åçš„äºŒçº§è·¯ç”±è¡¨ä¿¡æ¯:  
![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae800cd4632b49fd808304e681d87b13~tplv-k3u1fbpfcp-watermark.image?)

#### ROUTE\_MAPPING

`ROUTE_MAPPING`è·Ÿ`ROLE`é€»è¾‘ä¸€æ ·ï¼Œä¸åŒä¹‹å¤„ä¼šæ ¹æ®è·¯ç”±è‡ªåŠ¨ç”Ÿæˆèœå•ã€‚

    // å‰ç«¯æ–¹å¼æ§åˆ¶(èœå•ç”±è·¯ç”±é…ç½®è‡ªåŠ¨ç”Ÿæˆ)
    case PermissionModeEnum.ROUTE_MAPPING:
      // æ ¹æ®è§’è‰²è¿‡æ»¤è·¯ç”±
      routes = filter(asyncRoutes, routeFilter);
      routes = routes.filter(routeFilter);
      // é€šè¿‡è½¬æ¢è·¯ç”±ç”Ÿæˆèœå•
      const menuList = transformRouteToMenu(routes, true);
      // ç§»é™¤å±æ€§ meta.ignoreRoute è·¯ç”±
      routes = filter(routes, routeRemoveIgnoreFilter);
      routes = routes.filter(routeRemoveIgnoreFilter);
      menuList.sort((a, b) => {
        return (a.meta?.orderNo || 0) - (b.meta?.orderNo || 0);
      });
    
      // é€šè¿‡è½¬æ¢è·¯ç”±ç”Ÿæˆèœå•
      this.setFrontMenuList(menuList);
      // å°†å¤šçº§è·¯ç”±è½¬æ¢ä¸ºäºŒçº§è·¯ç”±
      routes = flatMultiLevelRoutes(routes);
      break;
    

è°ƒç”¨æ–¹æ³• `transformRouteToMenu` å°†è·¯ç”±è½¬æ¢æˆèœå•ï¼Œè°ƒç”¨è¿‡æ»¤æ–¹æ³•`routeRemoveIgnoreFilter`å¿½ç•¥è®¾ç½®`ignoreRoute`å±æ€§çš„è·¯ç”±èœå•ã€‚

    const routeRemoveIgnoreFilter = (route: AppRouteRecordRaw) => {
      const { meta } = route;
      const { ignoreRoute } = meta || {};
      return !ignoreRoute;
    };
    

ç³»ç»Ÿç¤ºä¾‹ï¼Œè·¯ç”±ä¸‹ä¸åŒçš„è·¯å¾„å‚æ•°ç”Ÿæˆä¸€ä¸ªèœå•ã€‚

    // src\router\routes\modules\demo\feat.ts
    {
      path: 'testTab/:id',
      name: 'TestTab',
      component: () => import('/@/views/demo/feat/tab-params/index.vue'),
      meta: { 
        hidePathForChildren: true,
      },
      children: [
        {
          path: 'testTab/id1',
          name: 'TestTab1',
          component: () => import('/@/views/demo/feat/tab-params/index.vue'),
          meta: { 
            ignoreRoute: true,
          },
        },
        {
          path: 'testTab/id2',
          name: 'TestTab2',
          component: () => import('/@/views/demo/feat/tab-params/index.vue'),
          meta: { 
            ignoreRoute: true,
          },
        },
      ],
    },
    

### BACK åç«¯æƒé™æ¨¡å¼

è·Ÿ`ROUTE_MAPPING`é€»è¾‘å¤„ç†ç›¸ä¼¼ï¼Œåªä¸è¿‡è·¯ç”±è¡¨æ•°æ®æ¥æºæ˜¯è°ƒç”¨æ¥å£ä»åå°è·å–ã€‚

    // åå°æ–¹å¼æ§åˆ¶
    case PermissionModeEnum.BACK:  
      let routeList: AppRouteRecordRaw[] = []; // è·å–åå°è¿”å›çš„èœå•é…ç½®
      this.changePermissionCode();  // æ¨¡æ‹Ÿä»åå°è·å–æƒé™ç  
      routeList = (await getMenuList()) as AppRouteRecordRaw[]; // æ¨¡æ‹Ÿä»åå°è·å–èœå•ä¿¡æ¯
      // åŸºäºè·¯ç”±åŠ¨æ€åœ°å¼•å…¥ç›¸å…³ç»„ä»¶
      routeList = transformObjToRoute(routeList); 
      // é€šè¿‡è·¯ç”±åˆ—è¡¨è½¬æ¢æˆèœå•
      const backMenuList = transformRouteToMenu(routeList);
      // è®¾ç½®èœå•åˆ—è¡¨
      this.setBackMenuList(backMenuList);
    
      // ç§»é™¤å±æ€§ meta.ignoreRoute è·¯ç”±
      routeList = filter(routeList, routeRemoveIgnoreFilter);
      routeList = routeList.filter(routeRemoveIgnoreFilter);
    
      // å°†å¤šçº§è·¯ç”±è½¬æ¢ä¸ºäºŒçº§è·¯ç”±
      routeList = flatMultiLevelRoutes(routeList);
      routes = [PAGE_NOT_FOUND_ROUTE, ...routeList];
      break;
    

ğŸ“šå‚è€ƒ&å…³è”é˜…è¯»
---------

["routelocationnormalized",vue-router](https://router.vuejs.org/zh/api/index.html#routelocationnormalized)  
["Meta é…ç½®è¯´æ˜",vvbin.cn](https://vvbin.cn/doc-next/guide/router.html#meta-%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E)  
["Date/getTime",MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date/getTime)  
["toraw",vuejs](https://cn.vuejs.org/api/reactivity-advanced.html#toraw)

å…³æ³¨ä¸“æ 
----

å¦‚æœæœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©è¯·å…³æ³¨â•ã€ ç‚¹èµğŸ‘ã€ æ”¶è—â­ï¼æ‚¨çš„è®¤å¯å°±æ˜¯å¯¹æˆ‘çš„æœ€å¤§æ”¯æŒï¼

æ­¤æ–‡ç« å·²æ”¶å½•åˆ°ä¸“æ ä¸­ ğŸ‘‡ï¼Œå¯ä»¥ç›´æ¥å…³æ³¨ã€‚

ä½œè€…ï¼š[Anduril](http://www.cnblogs.com/anduril/)  
  
ç®€ä¹¦ä¼ é€é—¨ï¼š[ç®€ä¹¦/Anduril](https://www.jianshu.com/u/Sw64xD)  
  
æ˜é‡‘ä¼ é€é—¨ï¼š[æ˜é‡‘/Andurils](https://juejin.cn/user/272334612084702)  
  
ä¸ªäººå°ç«™ï¼š[anduril.cn](http://anduril.cn/)  
  
æŠ€æœ¯åªæœ‰ä¸æ²‰æµ¸å…¶ä¸­æ‰èƒ½å¯¹å…¶æ›´åŠ å…¬æ­£çœ‹å¾…ï¼ æ²¡äº†ç‹‚çƒ­å’Œæµ®èºï¼Œå»ä½“ä¼šä¸‹å¼€æºä¸‹çš„è¯­æ³•é­…åŠ›ï¼è¿™é‡Œæ²¡æœ‰æŠ€æœ¯å®—æ•™çš„ç‹‚çƒ­å’Œé„™å¤·ï¼Œæ²¡æœ‰ç–¯ç‹‚çš„ä¸ªäººå´‡æ‹œï¼Œåªæ˜¯ä¸€ä¸ªæŠ€æœ¯äººæ¢ç´¢ä¹‹è·¯ä¸Šå¯¹äºç¾ä¸½ä¸ä¸‘é™‹çš„éšç¬”å’Œæ„Ÿæ‚Ÿï¼  
  
æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚

*   åˆ†ç±» [0x02.FrontEnd](https://www.cnblogs.com/anduril/category/729635.html)
*   æ ‡ç­¾ [vben-admin](https://www.cnblogs.com/anduril/tag/vben-admin/) , [vue](https://www.cnblogs.com/anduril/tag/vue/) , [æºç åˆ†æ](https://www.cnblogs.com/anduril/tag/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/) , [å‰ç«¯](https://www.cnblogs.com/anduril/tag/%E5%89%8D%E7%AB%AF/)