---
layout: post
title: "ChatGPT APIæ¥å£ç¼–ç¨‹åŸºç¡€ä¸ä½¿ç”¨æŠ€å·§"
date: "2023-04-17T01:07:21.207Z"
---
ChatGPT APIæ¥å£ç¼–ç¨‹åŸºç¡€ä¸ä½¿ç”¨æŠ€å·§
======================

æ€»ç»“/æœ±å­£è°¦  
![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416170538111-377189330.png)

è¶ç€è¿™å‘¨æœ«ç©ºé—²æ—¶é—´ï¼Œåœ¨ç ”è¯»å®ŒOpenAiå®˜ç½‘æ–‡æ¡£çš„åŸºç¡€ä¸Šï¼ŒåŠæ—¶æ€»ç»“äº†è¿™ç¯‡**ã€ŠChatGPT APIæ¥å£ç¼–ç¨‹åŸºç¡€ä¸ä½¿ç”¨æŠ€å·§ã€‹**ã€‚

æœ¬æ–‡å¤§éƒ¨åˆ†å†…å®¹æ˜¯å›´ç»•ç¼–ç¨‹æ–¹é¢ï¼ŒåŒ…æ‹¬ChatGPTæ¨¡å‹æ¥å£ã€å›¾åƒç”Ÿæˆæ¥å£ã€æ•æ„Ÿæ•°æ®æ‹¦æˆªç­‰ï¼Œåªæœ‰ä¸€å°éƒ¨åˆ†å†…å®¹å›´ç»•å¦‚ä½•é€šè¿‡temperatureè°ƒå‚ä¼˜åŒ–ä½¿ç”¨æç¤ºæŠ€å·§ã€‚

  

ä¸€ã€OpenAi Apiè°ƒç”¨åº“
---------------

OpenAiå¼€æ”¾äº†ä¸€ç³»åˆ—æ¨¡å‹æ¥å£APIï¼ŒåŒ…æ‹¬ChatGPTã€å›¾åƒç”Ÿæˆã€éŸ³é¢‘ã€æ–‡ä»¶ã€æ•æ„Ÿæ•°æ®æ‹¦æˆªç­‰ã€‚

è‹¥è¦é›†æˆè¿™äº›æ¨¡å‹æ¥å£è°ƒç”¨åˆ°æˆ‘ä»¬å¼€å‘çš„ç³»ç»Ÿé‡Œï¼Œå¯ä»¥é€šè¿‡å¤šç§ç¼–ç¨‹è¯­è¨€çš„HTTPè¯·æ±‚ä¸openai APIäº¤äº’ã€‚ç›®å‰OpenAi APIæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€è°ƒç”¨ï¼Œå„ç±»ç¼–ç¨‹è¯­è¨€å¯¹åº”çš„æ¥å£è°ƒç”¨åº“éƒ½èƒ½åœ¨OpenAiå®˜ç½‘æ‰¾åˆ°å®˜æ–¹æ¨èçš„å¼€æºåº“ã€‚

æˆ‘åœ¨æœ¬æ–‡é‡Œä¸»è¦ä»‹ç»**Javaã€Goã€Pythonã€Node.js**è¿™å››ç§ï¼Œå…¶ä½™å…·ä½“ä¾èµ–æ–¹å¼å’Œä½¿ç”¨ï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹å¯è‡ªè¡Œå»å®˜ç½‘è¿›ä¸€æ­¥ç ”ç©¶ã€‚

### 1.1ã€Java

å®˜æ–¹æ¨èçš„æ˜¯Theo Kanningå¼€æºçš„openai-java ã€‚æˆ‘ç”¨æ¥é›†æˆåˆ°SpringBooté¡¹ç›®çš„ä¾èµ–åº“ï¼Œæ­£å¥½ä¹Ÿæ˜¯ç”¨äº†è¿™æ¬¾openai-javaã€‚

1.1.1ã€é¦–å…ˆï¼Œéœ€è¦åœ¨Mavenå¼•å…¥ä»¥ä¸‹ä¾èµ–â€”â€”

    <dependency>
        <groupId>com.theokanning.openai-gpt3-java</groupId>
        <artifactId>service</artifactId>
        <version>0.11.1</version>
    </dependency>
    

1.1.2ã€å®‰è£…å®Œæˆåï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹çš„ä»£ç æ¡ˆä¾‹ï¼Œé€šè¿‡ç»‘å®šå¯†é’¥æ¥è°ƒç”¨chatGPTæ¨¡å‹â€”â€”

    @GetMapping("/ai")
    public void sendMsg() throws InterruptedException {
        System.out.println("å¼€å§‹æé—®é¢˜ï½");
        //GPT_TOKENå³ä½ çš„ä»£ç å¯†é’¥
        OpenAiService service = new OpenAiService(GPT_TOKEN,Duration.ofSeconds(10000));
        CompletionRequest completionRequest = CompletionRequest.builder()
             //ä½¿ç”¨çš„æ¨¡å‹
                .model("text-davinci-003")
                //è¾“å…¥æç¤ºè¯­
                .prompt("ä½ æ˜¯ä¸€ä¸ªå·¥ä½œåŠ©æ‰‹ï¼Œè¯·å¸®å¿™è®¾è®¡ä¸€ä»½æ´»åŠ¨ç­–åˆ’ä¹¦")
                //è¯¥å€¼è¶Šå¤§æ¯æ¬¡è¿”å›çš„ç»“æœè¶Šéšæœºï¼Œå³ç›¸ä¼¼åº¦è¶Šå°ï¼Œå¯é€‰å‚æ•°ï¼Œé»˜è®¤å€¼ä¸º 1ï¼Œå–å€¼ 0-2
                .temperature(0.5)
                //è¿”å›ç»“æœæœ€å¤§åˆ†è¯æ•°
                .maxTokens(2048)
                //ä¸temperatureç±»ä¼¼
                .topP(1D)
                .build();
        service.createCompletion(completionRequest).getChoices().forEach(System.out::println);
        Thread.sleep(6000);
    }
    

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè‹¥æ˜¯éƒ¨ç½²åœ¨æœ‰"é­”æ³•ä»£ç†"çš„Linuxäº‘æœåŠ¡å•†ï¼Œä»£ç éœ€è¦ç›¸åº”åšä¸€ä¸‹è°ƒæ•´ï¼Œå¦åˆ™æ˜¯æ— æ³•è®¿é—®åˆ°ChatGPTçš„ï¼Œåªä¼šå‡ºç°ä»¥ä¸‹å¼‚å¸¸æç¤ºï¼š

    java.net.ConnectException:Failed to connect to api.openai.com/2a03:2880:f10c:283:face:b00c:0:25de:443]
    

å½“æ—¥æˆ‘åœ¨è¿™ä¸ªé—®é¢˜ä¸Šå°±è¸©äº†ä¸€ä¸ªå‘ã€‚

è§£å†³çš„åŠæ³•å¾ˆç®€å•ï¼Œåªéœ€è¦åšä»¥ä¸‹è°ƒæ•´â€”â€”

    public void send1Msg() throws InterruptedException {
    
            System.out.println("å¼€å§‹æé—®é¢˜ï½");
            //éœ€è¦é¢å¤–è®¾ç½®ä¸€ä¸ªèƒ½è®¿é—®chatGPTçš„é­”æ³•è®¿é—®ä»£ç†
            ObjectMapper mapper = defaultObjectMapper();
            Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("127.0.0.1", 8889));
            OkHttpClient client =  defaultClient(GPT_TOKEN,Duration.ofSeconds(10000))
                    .newBuilder()
                    .proxy(proxy)
                    .build();
            Retrofit retrofit = defaultRetrofit(client, mapper);
            OpenAiApi api = retrofit.create(OpenAiApi.class);
    
        //å°†è®¾ç½®çš„ä»£ç†ä¼ ç»™OpenAiServiceå³å¯
            OpenAiService service = new OpenAiService(api);
            CompletionRequest completionRequest = CompletionRequest.builder()
                    .model("text-davinci-003")
                    .prompt("ä½ æ˜¯ä¸€ä¸ªå·¥ä½œåŠ©æ‰‹ï¼Œæƒ…å¸®å¿™è®¾è®¡ä¸€ä»½æ´»åŠ¨ç­–åˆ’ä¹¦ï¼Œè®¾è®¡ä¸€ä»½æ´»åŠ¨ç­–åˆ’ä¹¦")
                    .temperature(0.5)
                    .maxTokens(2048)
                    .topP(1D)
                    .build();
            service.createCompletion(completionRequest).getChoices().forEach(System.out::println);
            Thread.sleep(6000);
    }
    

### 1.2ã€Go

å®˜æ–¹æ¨èçš„æ˜¯sashabaranovå¼€æºçš„go-gpt3 ã€‚

1.2.1ã€éœ€è¦å…ˆå®‰è£…ä»¥ä¸‹ä¾èµ–åŒ…â€”â€”

    go get github.com/sashabaranov/go-openai
    

1.2.2ã€è¯¥å¼€æºé¡¹ç›®æä¾›çš„å‚è€ƒæ¡ˆä¾‹å¦‚ä¸‹â€”â€”

    package main
    import (
     "context"
     "fmt"
     openai "github.com/sashabaranov/go-openai"
    )
    func main() {
     client := openai.NewClient("your token")
     resp, err := client.CreateChatCompletion(
      context.Background(),
      openai.ChatCompletionRequest{
       Model: openai.GPT3Dot5Turbo,
       Messages: []openai.ChatCompletionMessage{
        {
         Role:    openai.ChatMessageRoleUser,
         Content: "Hello!",
        },
       },
      },
     )
     if err != nil {
      fmt.Printf("ChatCompletion error: %v\n", err)
      return
     }
     fmt.Println(resp.Choices[0].Message.Content)
    }
    

### 1.3ã€Python

å…ˆä¸‹è½½Pythonç‰ˆæœ¬çš„openåº“â€”â€”

    $ pip install openai
    

å®‰è£…å®Œæˆåï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹çš„ä»£ç æ¡ˆä¾‹ï¼Œé€šè¿‡ç»‘å®šå¯†é’¥æ¥è°ƒç”¨chatGPTæ¨¡å‹â€”â€”

    import os
    import openai
    
    # Load your API key from an environment variable or secret management service
    openai.api_key = os.getenv("OPENAI_API_KEY")
    
    response = openai.Completion.create(model="text-davinci-003", prompt="Say this is a test", temperature=0, max_tokens=7)
    

### 1.4ã€Node

å…ˆä¸‹è½½Nodeç‰ˆæœ¬çš„openaiåº“â€”â€”

    $ npm install openai
    

å®‰è£…å®Œæˆåï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹çš„ä»£ç æ¡ˆä¾‹ï¼Œé€šè¿‡ç»‘å®šå¯†é’¥æ¥è°ƒç”¨chatGPTæ¨¡å‹â€”â€”

    const { Configuration, OpenAIApi } = require("openai");
    const configuration = new Configuration({
      apiKey: process.env.OPENAI_API_KEY,
    });
    const openai = new OpenAIApi(configuration);
    const response = await openai.createCompletion({
      model: "text-davinci-003",
      prompt: "Say this is a test",
      temperature: 0,
      max_tokens: 7,
    });
    

  

äºŒã€å¯†é’¥è®¤è¯
------

OpenAi APIæ˜¯éœ€è¦ä½¿ç”¨APIå¯†é’¥è¿›è¡Œè®¤è¯è®¿é—®ã€‚å¯†é’¥è·å–æ–¹å¼ï¼Œéœ€è¦ç™»å½•https://platform.openai.com/account/api-keysé¡µé¢ã€‚

æ¥ç€ç‚¹å‡»ã€**Create new secret key**ã€‘ç”Ÿæˆä¸€ä¸ªæ–°çš„å¯†é’¥ï¼Œéœ€è¦æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œè¯¥å¯†é’¥ç”Ÿæˆæ—¶å°±å¾—ä¿å­˜ä¸‹æ¥ï¼Œå¦åˆ™è¿‡åæ˜¯æ— æ³•å†è¿›è¡ŒæŸ¥çœ‹çš„ï¼Œä¾‹å¦‚ï¼Œæˆ‘çš„å¯†é’¥åº“é‡Œå…ˆå‰å·²æœ‰ä¸€æ¡å¯†é’¥ï¼Œä½†ç°åœ¨æ— æ³•å†å»ç¡®å®šè¿™æ¡å¯†é’¥æ˜¯ä»€ä¹ˆäº†ã€‚  
![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416171212574-1807012819.png)

é¡ºä¾¿æä¸€ç‚¹æ˜¯ï¼ŒchatGPTæ˜¯æœ‰å…è´¹é¢åº¦çš„ï¼Œè°ƒç”¨APIä¼šæ¶ˆè€—æ‰è¿™äº›é¢åº¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç‚¹å‡»å·¦è¾¹èœå•ã€Usageã€‘æŸ¥çœ‹â€”â€”  
![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416171250233-1190098643.png)

åœ¨è°ƒç”¨OpenAiçš„APIè¯·æ±‚æ—¶ï¼Œéœ€è¦åœ¨HTTPè¯·æ±‚æŠ¥å¤´ä¸­åŒ…å«è¯¥APIå¯†é’¥ï¼Œä¾‹å¦‚â€”â€”

    Authorization: Bearer OPENAI_API_KEY
    

  

ä¸‰ã€GPTè¯·æ±‚è®¾ç½®
---------

å®˜æ–¹æä¾›äº†ä¸€ä¸ªcurlé€šè¿‡å¯†é’¥è°ƒç”¨APIçš„è¯·æ±‚æ¡ˆä¾‹ï¼Œéœ€è¦å°†æ¡ˆä¾‹é‡Œçš„$OPENAI\_API\_KEYæ›¿æ¢ä¸ºè‡ªå·±çš„APIå¯†é’¥ï¼Œåœ¨å¼€å¯äº†ä»£ç†çš„æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œå¯ä»¥åŸºäºè¯¥æ¡ˆä¾‹æµ‹è¯•æœåŠ¡å™¨æ˜¯å¦èƒ½æ­£å¸¸è°ƒç”¨åˆ°ChatGPTâ€”â€”

    curl https://api.openai.com/v1/chat/completions \
      -H "Content-Type: application/json" \
      -H "Authorization: Bearer $OPENAI_API_KEY" \
      -d '{
         "model": "gpt-3.5-turbo",
         "messages": [{"role": "user", "content": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è¯·æ±‚!"}],
         "temperature": 0.7
       }'
    

æˆ‘åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šè¿è¡Œäº†ï¼Œè¿”å›ç»“æœå¦‚ä¸‹â€”â€”

![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416171541333-428101597.png)

è¿™ä¸ªè¯·æ±‚è¡¨ç¤ºï¼ŒæŸ¥è¯¢gpt-3.5-turboæ¨¡å‹å®Œæˆæ–‡æœ¬å¤„ç†ï¼Œæç¤ºè¯­ä¸º"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•è¯·æ±‚ï¼"ï¼Œå“åº”ç»“æœå¦‚ä¸‹â€”â€”

    {
     "id": "chatcmpl-75U8z1PVwDb0pA0EPhOMZVC1q7q11",
     "object": "chat.completion",
     "created": 1681541869,
     "model": "gpt-3.5-turbo",
     "usage": {
      "prompt_tokens": 14,
      "completion_tokens": 46,
      "total_tokens": 60
     },
     "choices": [{
      "message": {
       "role": "assistant",
       "content": "æ‚¨å¥½ï¼Œè¿™æ˜¯ä¸€ä¸ªå›å¤æµ‹è¯•è¯·æ±‚çš„ä¿¡æ¯ã€‚è¯·é—®æ‚¨æœ‰ä»€ä¹ˆéœ€è¦æµ‹è¯•çš„å…·ä½“å†…å®¹æˆ–é—®é¢˜å—ï¼Ÿæˆ‘ä¼šå°½åŠ›å¸®åŠ©æ‚¨è§£å†³é—®é¢˜ã€‚"
      },
      "finish_reason": "stop",
      "index": 0
     }]
    }
    

Request bodyå„å­—æ®µè¯´æ˜â€”â€”

![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416171309853-486843441.png)

  

å››ã€å¼€å‘ä¸­æ·»åŠ æ•æ·ä¿¡æ¯å®¡æ ¸å±‚
--------------

é¦–å…ˆå¾—æä¸€ä¸‹2023å¹´4æœˆ11æ—¥ç½‘ä¿¡å‘å¸ƒçš„ä¸€ä»½ã€Šç”Ÿæˆå¼äººå·¥æ™ºèƒ½æœåŠ¡ç®¡ç†åŠæ³•ï¼ˆå¾æ±‚æ„è§ç¨¿ï¼‰ã€‹ï¼Œé‡Œé¢ç¬¬å››æ¡æ˜ç¡®è¡¨ç¤ºï¼Œç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç®—æ³•æˆ–æœåŠ¡åº”å½“éµå®ˆæ³•å¾‹æ³•è§„çš„è¦æ±‚ï¼Œå°Šé‡ç¤¾ä¼šå…¬å¾·ã€å…¬åºè‰¯ä¿—ã€‚è¿™å°±æ„å‘³ç€ï¼Œæœªæ¥åœ¨ä½¿ç”¨è¿™ç±»Aiæ¥å£è¿›è¡Œè¾“å…¥/è¾“å‡ºæ—¶ï¼Œå¿…é¡»é’ˆå¯¹å†…å®¹è¿›è¡Œè¿è§„å†…å®¹ä¿¡æ¯çš„è¿‡æ»¤ã€‚

å…¶å®OpenAiæœ‰é’ˆå¯¹è¿™å—å†…å®¹å®¡æ ¸æä¾›äº†å¼€æ”¾çš„APIæ¥å£ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ã€‚

è‹¥æƒ³åœ¨èŠå¤©APIçš„è¾“å‡ºä¸­æ·»åŠ ä¸€ä¸ªæ•æ·ä¿¡æ¯æ‹¦æˆªå±‚ï¼Œå°±å¯ä»¥åœ¨è¾“å…¥/è¾“å‡ºä¿¡æ¯æ—¶ï¼Œè°ƒç”¨è¯¥æ¥å£ã€‚ä¾‹å¦‚ï¼Œå­˜åœ¨è¿™æ ·ä¸€ä»½APIæ¥å£è°ƒç”¨æ¡ˆä¾‹â€”â€”

    curl https://api.openai.com/v1/moderations \
      -X POST \
      -H "Content-Type: application/json" \
      -H "Authorization: Bearer $OPENAI_API_KEY" \
      -d '{"input": "æµ‹è¯•ä¸€å¥è¯"}'
    

å“åº”è¿”å›å†…å®¹å¦‚ä¸‹â€”â€”

    {
     "id": "modr-75k0nHCOc0SR88t9xCNBHctPDMO8d",
     "model": "text-moderation-004",
     "results": [{
      "flagged": false,
      "categories": {
       "sexual": false,
       "hate": false,
       "violence": false,
       "self-harm": false,
       "sexual/minors": false,
       "hate/threatening": false,
       "violence/graphic": false
      },
      "category_scores": {
       "sexual": 0.00012780998076777905,
       "hate": 0.00013749735080637038,
       "violence": 1.4757171129531343e-07,
       "self-harm": 5.410008441231184e-09,
       "sexual/minors": 1.5541245375061408e-06,
       "hate/threatening": 6.1530336381565576e-09,
       "violence/graphic": 2.9580141003293647e-08
      }
     }]
    }
    

*   flagged:å¦‚æœæ¨¡å‹å°†å†…å®¹å±äºè¿åOpenAIçš„ä½¿ç”¨ç­–ç•¥ï¼Œåˆ™è®¾ç½®ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalseã€‚
*   categories:åŒ…å«æ¯ä¸ªç±»åˆ«äºŒè¿›åˆ¶ä½¿ç”¨ç­–ç•¥è¿åæ ‡å¿—çš„å­—å…¸ã€‚å¯¹äºæ¯ä¸ªå­—æ®µå€¼ï¼Œå¦‚æœæ¨¡å‹å°†ç›¸åº”ç±»åˆ«æ ‡è®°ä¸ºè¿è§„åˆ™è¯¥å€¼ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalseã€‚
*   category\_scores:åŒ…å«æ¨¡å‹è¾“å‡ºçš„æ¯ä¸ªç±»åˆ«åŸå§‹åˆ†æ•°çš„å­—å…¸ï¼Œè¡¨ç¤ºæ¨¡å‹æ˜¯å¦ç›¸ä¿¡è¾“å…¥äº†è¿åOpenAIå¯¹ç±»åˆ«çš„ç­–ç•¥ã€‚è¯¥å€¼ä»‹äº0å’Œ1ä¹‹é—´ï¼Œå…¶ä¸­å€¼è¶Šå¤§è¡¨ç¤ºç½®ä¿¡åº¦è¶Šé«˜ã€‚æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œåˆ†æ•°ä¸åº”è¢«è§£é‡Šä¸ºæ¦‚ç‡ã€‚

categorieså’Œcategory\_scoreså…·ä½“å­—æ®µå€¼å¯¹åº”çš„è¯´æ˜å¦‚ä¸‹è¡¨æ ¼æ‰€ç¤ºâ€”â€”

![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416171322367-847355256.png)

å®˜æ–¹è¡¨ç¤ºç›®å‰è¯¥å®¡æ ¸æ¥å£ä»åœ¨ä¸æ–­åŠªåŠ›æé«˜åˆ†ç±»å™¨çš„å‡†ç¡®æ€§ï¼Œç‰¹åˆ«æ˜¯ä»‡æ¨ã€è‡ªæ®‹å’Œæš´åŠ›ç­‰å†…å®¹çš„åˆ†ç±»ã€‚å€¼å¾—æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œå¯¹éè‹±è¯­è¯­è¨€çš„æ”¯æŒç›®å‰æ˜¯æœ‰é™çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸­æ–‡çš„å®¡æ ¸æ”¯æŒæ¯”è¾ƒæœ‰é™ã€‚

é™¤äº†ä½¿ç”¨OpenAiæä¾›çš„è¾“å…¥/è¾“å‡ºä¿¡æ¯å®¡æ ¸æ¥å£ï¼Œè¿˜å¯ä»¥å¼€å‘æ•æ„Ÿè¯è¿‡æ»¤ç³»ç»Ÿï¼Œå°†ä¼ ç»™ChatGPTä»¥åŠå“åº”è¿”å›çš„æ•°æ®ï¼Œè¿›è¡Œæ•æ„Ÿè¯è¿‡æ»¤ã€‚

å››ã€æ¨¡å‹è°ƒç”¨
------

### 4.1ã€æ¨¡å‹åˆ—è¡¨

OpenAiæä¾›äº†å¤šç§æ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹æŸ¥è¯¢æŒ‡ä»¤ï¼ŒæŸ¥è¯¢å‡ºAPIæ”¯æŒçš„æ¨¡å‹ç±»å‹â€”â€”

    curl https://api.openai.com/v1/models -H "Authorization: Bearer $OPENAI_API_KEY"
    

å‡ºç°å‡ºæ¥çš„ç»“æœå¦‚ä¸‹ï¼Œåº”è¯¥æœ‰æ•°åä¸ªæ¨¡å‹ï¼Œæˆ‘ç”¨çš„æœ€å¤šæ˜¯gpt-3.5-turboï¼Œè¿™æ˜¯ç›®å‰æ¯”è¾ƒæ ‡å‡†çš„å‹å·ç‰ˆæœ¬â€”â€”

    {
      "data": [
         {
          "id": "text-davinci-003",
          "object": "model",
          "created": 1669599635,
          "owned_by": "openai-internal",
          "permission": [...],
          "root": "text-davinci-003",
          "parent": null
        },
    
      {
          "id": "gpt-3.5-turbo",
          "object": "model",
          "created": 1677610602,
          "owned_by": "openai",
          "permission": [...],
          "root": "gpt-3.5-turbo",
          "parent": null
        },
        .....
      ],
      "object": "list"
    }
    

### 4.2ã€æŸ¥è¯¢æŒ‡å®š GPTæ¨¡å‹è¯¦æƒ…

å¯ä»¥åŸºäºä»¥ä¸Šæ¨¡å‹ç±»è¡¨æ¥å£ï¼ŒæŸ¥è¯¢å‡ºå…·ä½“æ¨¡å‹å®ä¾‹çš„è¯¦æƒ…ï¼ŒåŒ…æ‹¬æ¨¡å‹çš„åŸºæœ¬ä¿¡æ¯ã€æ‰€æœ‰è€…åŠæƒé™ç­‰â€”â€”

    curl https://api.openai.com/v1/models/gpt-3.5-turbo \
      -H "Authorization: Bearer $OPENAI_API_KEY"
    

æŸ¥è¯¢å‡ºgpt-3.5-turboçš„æ¨¡å‹è¯¦æƒ…å¦‚ä¸‹â€”â€”

    {
      "id": "gpt-3.5-turbo",
      "object": "model",
      "created": 1677610602,
      "owned_by": "openai",
      "permission": [
        {
          "id": "modelperm-BmdmcAa1aQwToDxri3DFbZw9",
          "object": "model_permission",
          "created": 1681343255,
          "allow_create_engine": false,
          "allow_sampling": true,
          "allow_logprobs": true,
          "allow_search_indices": false,
          "allow_view": true,
          "allow_fine_tuning": false,
          "organization": "*",
          "group": null,
          "is_blocking": false
        }
      ],
      "root": "gpt-3.5-turbo",
      "parent": null
    }
    

GPT-3.5æ¨¡å‹å¯ä»¥ç†è§£å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€æˆ–ä»£ç ï¼Œåœ¨GPT-3.5ç‰ˆæœ¬å½“ä¸­ï¼Œæœ€æœ‰èƒ½åŠ›å’Œæœ€å…·æˆæœ¬æ”¶ç›Šçš„æ¨¡å‹æ˜¯GPT-3.5-turboï¼Œå®ƒæ˜¯åŸºäºåŸæœ‰çš„3.5ç‰ˆæœ¬æ¨¡å‹è¿›è¡Œçš„è¿­ä»£ä¼˜åŒ–ï¼Œå¯ä»¥æ›´å¥½åœ°å®Œæˆä¼ ç»Ÿä»»åŠ¡ã€‚ç›®å‰æœ€æ–°æ¨¡å‹æ˜¯GPT-4ï¼Œå…·æœ‰æ›´å…ˆè¿›çš„å¸¸è¯†å’Œæ¨ç†èƒ½åŠ›ï¼Œä½†è¿˜æ²¡æœ‰å¼€æ”¾å…è´¹APIæ¥å£ã€‚

ä»¥ä¸‹æ˜¯GPT-3.5æ¨¡å‹åˆ—è¡¨ä»‹ç»â€”â€”

![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416171339000-1174582358.png)

å®˜æ–¹æ¨èä½¿ç”¨GPT-3.5-turboè€Œä¸æ˜¯å…¶ä»–GPT-3.5æ¨¡å‹ï¼Œå› ä¸ºå®ƒçš„æˆæœ¬æ›´ä½ã€‚gpt-3.5-turboçš„æ€§èƒ½ä¸text-davinci-003ç›¸ä¼¼ï¼Œä½†æ¯ä¸ªtokençš„ä»·æ ¼æ˜¯å®ƒçš„10%ï¼Œå®˜æ–¹æ¨èåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨gpt-3.5-turboã€‚

äº”ã€å›¾åƒç”Ÿæˆè°ƒç”¨
--------

ç»™å®šä¸€ä¸ªæç¤ºå’Œ/æˆ–ä¸€ä¸ªè¾“å…¥å›¾åƒï¼Œæ¨¡å‹ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å›¾åƒï¼Œä¾‹å¦‚ï¼Œæˆ‘æƒ³è®©å®ƒç”»ä¸€åªèƒ–çŒ«â€”â€”

    curl https://api.openai.com/v1/images/generations \
      -H "Content-Type: application/json" \
      -H "Authorization: Bearer $OPENAI_API_KEY" \
      -d '{
        "prompt": "ç”»ä¸€åªå¯çˆ±çš„å¤§èƒ–çŒ«",
        "n": 2,
        "size": "1024x1024"
      }'
    

ç„¶åï¼Œå®ƒç¡®å®ç»™æˆ‘ç”»äº†ä¸¤å¼ å›¾â€”â€”

    {
      "created": 1681547551,
      "data": [
        {
          "url": "https://oaidalleapiprodscus.blob.core.windows.net/private/org-LqdibnOuIlW8xc7Lfh2REsXo/user-6D0yIziBFiX73mCUwNwOwczJ/img-jKdFuRLINlkCeFL1QCWFZtId.png?st=2023-04-15T07%3A32%3A31Z&se=2023-04-15T09%3A32%3A31Z&sp=r&sv=2021-08-06&sr=b&rscd=inline&rsct=image/png&skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2023-04-15T08%3A28%3A22Z&ske=2023-04-16T08%3A28%3A22Z&sks=b&skv=2021-08-06&sig=Rbe8x3ZdEcoScQOXrkxGAe1G8rGOrO%2B4wzmzZwotP68%3D"
        },
        {
          "url": "https://oaidalleapiprodscus.blob.core.windows.net/private/org-LqdibnOuIlW8xc7Lfh2REsXo/user-6D0yIziBFiX73mCUwNwOwczJ/img-00FKmNWnDm5p21CS89UPm56T.png?st=2023-04-15T07%3A32%3A31Z&se=2023-04-15T09%3A32%3A31Z&sp=r&sv=2021-08-06&sr=b&rscd=inline&rsct=image/png&skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2023-04-15T08%3A28%3A22Z&ske=2023-04-16T08%3A28%3A22Z&sks=b&skv=2021-08-06&sig=KVsxjwPIsJFC0cFEjRqVPrcckGxipp5BiiUmayPmqMM%3D"
        }
      ]
    }
    

é€šè¿‡å›¾urlé“¾æ¥ï¼Œå¯ä»¥æŸ¥çœ‹å›¾ç‰‡ï¼Œè‹¥æ˜¯åœ¨ä»£ç é‡Œï¼Œå¯ä»¥ç›´æ¥ä¸¢ç»™é‡Œæ˜¾ç¤ºå‡ºå›¾ç‰‡ã€‚ä¸è¿‡ï¼Œæˆ‘è®©openaiç»™æˆ‘ç”»çš„æ˜¯ä¸€åªèƒ–çŒ«ï¼Œå›¾ä¸€æˆ‘è¿˜èƒ½ç†è§£ï¼Œä½†æ˜¯ï¼Œå›¾äºŒï¼Œè¿™ä¸ªçŒ«å±è‚¡ç€å®æœ‰äº›ç¦»è°±äº†ï¼ˆè‡ªå¸¦ğŸ¶ï¼‰......  
![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416171348467-1136578282.png)

ä½“éªŒä¸‹æ¥ï¼Œæ„Ÿè§‰ä¸midjourneyè¿˜æ˜¯æœ‰è¾ƒå¤§åŒºåˆ«çš„ï¼Œåªèƒ½è¯´ï¼Œå‹‰å¼ºèƒ½ç”¨å§ã€‚

å›¾åƒç”Ÿæˆæ¥å£å‚æ•°å¦‚ä¸‹â€”â€”  
![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416171354193-1801986264.png)

  

å…­ã€ChatGPTä½¿ç”¨æŠ€å·§å’Œæ³¨æ„äº‹é¡¹
------------------

### 6.1ã€è°ƒæ•´**temperature**å‚æ•°

æˆ‘åœ¨å‰æ–‡è°ƒç”¨APIçš„å‚æ•°å½“ä¸­ï¼Œæœ‰æåŠä¸€ä¸ªtemperatureå‚æ•°ï¼Œç¿»è¯‘è¿‡æ¥å«æ¸©åº¦ã€‚è¯¥å‚æ•°ç”¨äºæŒ‡å®šç”Ÿæˆæ–‡æœ¬æ—¶çš„éšæœºæ€§å’Œå¤šæ ·æ€§ï¼Œé»˜è®¤å€¼ä¸º1ï¼Œä»‹äº 0 å’Œ 2 ä¹‹é—´ï¼Œè¾ƒé«˜çš„æ¸©åº¦å€¼å€¼ï¼ˆå¦‚ 0.8ï¼‰ä¼šå¯¼è‡´GPTè¾“å‡ºå†…å®¹æ›´éšæœºï¼Œè€Œè¾ƒä½çš„æ¸©åº¦å€¼ï¼ˆå¦‚ 0.2ï¼‰ä¼šä½¿å…¶æ›´åŠ å¯ä»¥é¢„æµ‹å’Œå…·å¤‡ç¡®å®šæ€§ã€‚

æ‰“ä¸€ä¸ªæ¯”å–»ï¼ŒChatGPTä¸­çš„æ¸©åº¦å€¼å°±æ¼”å‘˜æ¼”æˆâ€”â€”

è¾ƒä½çš„æ¸©åº¦å€¼å¯ä»¥çœ‹ä½œæ˜¯â€œæŒ‰ç…§å‰§æœ¬è¡¨æ¼”â€ï¼Œæ¼”å‘˜æ˜¯ä»€ä¹ˆæ°´å¹³ï¼Œå°±æ¼”å‡ºä»€ä¹ˆæ ·å­ã€‚æ¸©åº¦å€¼ä½ç”Ÿæˆçš„æ–‡æœ¬æ¯”è¾ƒä¿å®ˆå’Œç¡®å®šï¼Œé€‚åˆéœ€è¦å‡†ç¡®æ€§å’Œè¿è´¯æ€§çš„ä»»åŠ¡ï¼Œæ¯”å¦‚å†…å®¹æ‘˜è¦ã€æœºå™¨ç¿»è¯‘ç­‰ã€‚

è¾ƒé«˜çš„æ¸©åº¦å€¼å¯ä»¥çœ‹æˆâ€œå³å…´è¡¨æ¼”â€ï¼Œç”Ÿæˆçš„æ–‡æœ¬å¯èƒ½æ›´åŠ éšæœºå’Œå¤šæ ·æ€§ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯èƒ½æ›´åŠ ç³Ÿç³•ï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒé€‚åˆç”¨æ¥åˆ›ä½œå’Œæ¢ç´¢æ€§ä»»åŠ¡ï¼Œæ¯”å¦‚ç”Ÿæˆå¯¹è¯ã€åˆ›æ„å†™ä½œç­‰ã€‚

å½“ç„¶ï¼Œè¿™ä¸ªtemperatureå‚æ•°å¹¶éä¸‡èƒ½çš„ï¼Œåœ¨æŸäº›æ–‡æœ¬å†…å®¹å½“ä¸­ï¼Œå¯èƒ½å‡ ä¹æ„Ÿå—ä¸åˆ°å¤ªå¤šå·®åˆ«ã€‚

è‹¥æ¸©åº¦å€¼è®¾ç½®ä¸º0ï¼Œé‚£ä¹ˆï¼Œæ¨¡å‹å°†æ€»ä¼šè¿”å›ç›¸åŒæˆ–éå¸¸ç›¸ä¼¼çš„å†…å®¹ï¼Œå½“æ¸©åº¦é«˜äº0æ—¶ï¼Œæ¯æ¬¡æäº¤ç›¸åŒçš„æç¤ºä¼šå¯¼è‡´ç”Ÿæˆä¸åŒå†…å®¹ã€‚å®˜æ–¹è¡¨ç¤ºï¼Œæ¸©åº¦å€¼åœ¨0ï½1ä¹‹é—´ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ§åˆ¶æ¨¡å‹ç”Ÿæˆæ¯”è¾ƒæ»¡æ„çš„ç­”æ¡ˆã€‚

ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·è¯¢é—®â€œå¦‚ä½•å½¢å®¹ä¸€åªèƒ–çŒ«ï¼Ÿâ€æ—¶ï¼ŒèŠå¤©æœºå™¨äººå¯èƒ½ä¼šç”Ÿæˆä»¥ä¸‹ä¸åŒçš„å›ç­”ï¼š

*   æ¸©åº¦å€¼ä¸º0.5æ—¶ï¼šâ€œè¿™æ˜¯ä¸€åªè‚¥å˜Ÿå˜Ÿçš„çŒ«ã€‚â€
    
*   æ¸©åº¦å€¼ä¸º1.0æ—¶ï¼šâ€œè¿™åªçŒ«éå¸¸èƒ–ï¼Œå®ƒçš„èº«ä½“è‚¥åšä¸”åœ†æ¶¦ï¼Œçœ‹ä¸Šå»å°±åƒä¸€ä¸ªå°çƒä¸€æ ·ã€‚å®ƒçš„è‚šå­å¾ˆå¤§ï¼Œå½“å®ƒèµ°è·¯æ—¶ä¼šæ™ƒæ¥æ™ƒå»ï¼Œè„¸ä¸Šä¹Ÿæœ‰ä¸€åœˆåˆåœ†åˆæ»‘çš„è„‚è‚ªã€‚æ€»ä¹‹ï¼Œè¿™æ˜¯ä¸€åªéå¸¸éå¸¸èƒ–çš„çŒ«ã€‚â€
    
*   æ¸©åº¦å€¼ä¸º1.5æ—¶ï¼šâ€œè¿™åªçŒ«çš„èº«æç®€ç›´åƒæ˜¯ä¸€ä¸ªå°æ²™å‘ï¼Œå®ƒçš„è…¹éƒ¨è‚¥åšå¾—å‡ ä¹æŠ¬ä¸èµ·æ¥ï¼Œå››è‚¢ä¹Ÿå˜å¾—ç‰¹åˆ«çŸ­ã€‚å½“å®ƒèµ°è·¯æ—¶ï¼Œèº«ä½“ä¼šæ™ƒåŠ¨ï¼Œå¥½åƒéšæ—¶éƒ½å¯èƒ½ç¿»å€’ã€‚å®ƒçš„è„¸å®½å¤§è€Œä¸”åœ†æ¶¦ï¼ŒåŒé¢Šä¸Šè¿˜æœ‰ä¸€åœˆåšåšçš„èµ˜è‚‰ï¼Œçœ‹ä¸Šå»ç›¸å½“å¯çˆ±ã€‚æ€»ä¹‹ï¼Œè¿™æ˜¯ä¸€åªæå…¶è‚¥èƒ–çš„çŒ«ã€‚â€
    

åœ¨æé—®å½“ä¸­ï¼Œä½¿ç”¨è¿™ä¸ªå‚æ•°çš„æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨æç¤ºè¯­åé¢è·Ÿä¸Šâ€œUse a temperature of 0.5â€å³å¯â€”â€”

![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230416171404348-165998972.png)

### 6.2ã€ä¼ é€’ç»™APIçš„æ•°æ®æ˜¯å¦ä¼šè¢«å­˜å‚¨

ç”¨æˆ·æ¯”è¾ƒå…³å¿ƒä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬ä¼ ç»™ChatGPTçš„æ•°æ®æ˜¯å¦ä¼šè¢«å­˜å‚¨ã€‚å®˜æ–¹è¡¨ç¤ºï¼Œè‡ª2023å¹´3æœˆ1æ—¥èµ·ï¼Œå°†ä¿ç•™æ‚¨çš„APIæ•°æ®30å¤©ï¼Œä½†ä¸å†ä½¿ç”¨é€šè¿‡APIå‘é€çš„æ•°æ®æ¥æ”¹è¿›æ¨¡å‹ã€‚è¿™å°±æ„å‘³ç€ï¼Œè¯·å‹¿ä¼ è¾“æ¶‰åŠä¸ªäººéšç§æˆ–è€…å®‰å…¨ç›¸å…³çš„ä¿¡æ¯ï¼Œé¿å…æ•°æ®æ³„æ¼ã€‚

æ­£åœ¨å»ºäº†Ai ChatGPTå¾®ä¿¡äº¤æµç¾¤ï¼Œç›®å‰1ç¾¤å·²è¶…200äººæ— æ³•è‡ªåŠ¨åŠ å…¥ï¼Œæ–°å»ºäº†2ç¾¤æ¬¢è¿å°ä¼™ä¼´åŠ å…¥ï¼Œç¾¤æˆå‘˜æä¾›â€”â€”

1ã€æä¾›å…è´¹ ChatGPTè®¿é—®ä½“éªŒï¼›  
2ã€ChatGPTå®é™…åº”ç”¨æ¡ˆä¾‹åˆ†äº«ï¼›  
3ã€Aiå·¥å…·ä½“éªŒåˆ†æåˆ†äº«ï¼›  
![image](https://img2023.cnblogs.com/blog/1545382/202304/1545382-20230417081501357-1485102092.png)

ä½œè€…ï¼š[æœ±å­£è°¦](https://www.cnblogs.com/zhujiqian/)

å‡ºå¤„ï¼š[https://www.cnblogs.com/zhujiqian/](https://www.cnblogs.com/zhujiqian/)

æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…å’Œåšå®¢å›­å…±æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»åœ¨æ–‡ç« é¡µé¢ç»™å‡ºåŸæ–‡é“¾æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚