---
layout: post
title: "Pythonå¸¸ç”¨åŸºç¡€è¯­æ³•çŸ¥è¯†ç‚¹å¤§å…¨"
date: "2022-07-21T08:24:13.635Z"
---
Pythonå¸¸ç”¨åŸºç¡€è¯­æ³•çŸ¥è¯†ç‚¹å¤§å…¨
=================

> è®°å¾—æˆ‘æ˜¯æ•°å­¦ç³»çš„ï¼Œå¤§äºŒæ—¶å€™å› ä¸ºå‚åŠ æ•°å­¦å»ºæ¨¡ï¼Œå­¦ä¹ Pythonçˆ¬è™«ï¼Œå»å›¾ä¹¦é¦†å€Ÿäº†ä¸€æœ¬PythonåŸºç¡€ä¹¦ï¼Œä¸åšï¼Œå› ä¸ºæœ‰`matlab`å’Œ`Cè¯­è¨€`åŸºç¡€ï¼Œè¿™æœ¬ä¹¦ä¸€ä¸ªæ˜ŸæœŸçœ‹å®Œäº†ï¼Œå­¦å®Œåæ„Ÿè§‰Pythonå…¥é—¨å¾ˆå¿«ï¼Œç„¶åè¦å¼€å§‹å­¦çˆ¬è™«å’ŒçŸ©é˜µè®¡ç®—ï¼Œå­¦ä¹ ä¸€ä¸‹å¯¹åº”çš„åŒ…å°±è¡Œäº†ï¼Œæ„Ÿè§‰å¾ˆæ–¹ä¾¿ï¼Œçˆ±ä¸Šäº†è¿™é—¨è¯­è¨€ï¼Œè™½ç„¶æ¯•ä¸šååšäº†Javaï¼Œä½†æ˜¯å¹³æ—¶å·¥ä½œä¸­ä¹Ÿä¼šç”¨ä¸€äº›Pythonã€‚ä¸è¿‡åˆå­¦è€…æœ‰å¾ˆå¤šåŸºç¡€çŸ¥è¯†ç‚¹è®°ä¸ä½ï¼Œå› ä¸ºç”¨å¾—å°‘ï¼Œè¿™é‡Œæ€»ç»“è®°å½•ä¸€ä¸‹ã€‚æ›´å¤šPythonçŸ¥è¯†ï¼Œå¯ä»¥å‰å¾€æˆ‘çš„ä¸ªäººåšå®¢ç½‘ç«™ [ç­‰å¾…ä¸‹ä¸€ä¸ªç§‹-Python](https://www.ikeguang.com/article/category/python)

![](https://ikeguang.oss-cn-shanghai.aliyuncs.com/image/2022-07-21/python-basic.png?versionId=CAEQPxiBgIDwj.z9kBgiIDU2YTAwNWY4NjI3NzRlYmRhNGFkNjBjY2I5NDQ4MTIx)

ä»‹ç»
==

Python æ˜¯ä¸€é—¨ç‹¬ç‰¹çš„è¯­è¨€ï¼Œå¿«é€Ÿæµè§ˆä¸€ä¸‹ä»–çš„è¦ç‚¹ï¼š

*   é¢å‘å¯¹è±¡ï¼šæ¯ä¸€ä¸ªå˜é‡éƒ½æ˜¯ä¸€ä¸ªç±»ï¼Œæœ‰å…¶è‡ªå·±çš„å±æ€§ï¼ˆattributeï¼‰ä¸æ–¹æ³•ï¼ˆmethodï¼‰ã€‚
*   è¯­æ³•å—ï¼šç”¨ç¼©è¿›ï¼ˆå››ä¸ªç©ºæ ¼ï¼‰è€Œä¸æ˜¯åˆ†å·ã€èŠ±æ‹¬å·ç­‰ç¬¦å·æ¥æ ‡è®°ã€‚å› æ­¤ï¼Œè¡Œé¦–çš„ç©ºæ ¼ä¸èƒ½éšæ„ä¹¦å†™ã€‚
*   æ³¨é‡Šï¼šè¡Œå†…ç”¨â€œ#â€å·ï¼Œè¡Œé—´æ³¨é‡Šå†™åœ¨ä¸¤ç»„è¿ç»­ä¸‰å•å¼•å·ä¹‹é—´ï¼šâ€™â€™â€™
*   ç»­è¡Œï¼šè¡Œå°¾è¾“å…¥ä¸€ä¸ªåæ–œæ åŠ ä¸€ä¸ªç©ºæ ¼ï¼ˆâ€™\\ â€˜ï¼‰ï¼Œå†æ¢è¡Œã€‚å¦‚æœè¡Œå°¾è¯­æ³•æ˜æ˜¾æœªå®Œæˆï¼ˆæ¯”å¦‚ä»¥é€—å·ç»“å°¾ï¼‰ï¼Œå¯ä»¥ç›´æ¥ç»­è¡Œã€‚
*   æ‰“å°ä¸è¾“å…¥ï¼š å‡½æ•° print() ä¸ input()ï¼Œæ³¨æ„ print() çš„ sep ä¸ end å‚æ•°ã€‚
*   å˜é‡ï¼šæ— éœ€æŒ‡å®šå˜é‡ç±»å‹ï¼Œä¹Ÿä¸éœ€è¦æå‰å£°æ˜å˜é‡ã€‚
    *   åˆ é™¤å˜é‡ï¼šdel()
    *   å¤åˆ¶å˜é‡ï¼šç›´æ¥å°†å˜é‡aèµ‹å€¼ç»™bï¼Œæœ‰æ—¶ä»…ä»…å¤åˆ¶äº†ä¸€ä¸ªâ€œå¼•ç”¨â€ã€‚æ­¤å b ä¸ a çš„æ”¹åŠ¨ä»ä¼šäº’ç›¸å½±å“ã€‚å¿…è¦æ—¶ä½¿ç”¨ a is b æ¥åˆ¤æ–­æ˜¯å¦åŒå€ã€‚
*   æ¨¡å—ï¼šé€šè¿‡ import pandas çš„æ–¹å¼åŠ è½½æ¨¡å—ï¼ˆæˆ–è€… import pandas as pdï¼‰ï¼Œå¹¶ç”¨å½¢å¦‚ pandas.DataFrameï¼ˆæˆ– pd.DataFrameï¼‰çš„æ–¹å¼è°ƒç”¨æ¨¡å—å†…çš„æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ from pandas import DataFrame çš„æ–¹å¼ï¼Œè¿™æ ·åœ¨ä¸‹æ–‡å¯ä»¥ç›´æ¥ä½¿ç”¨ DataFrame ä½œä¸ºè°ƒç”¨åã€‚
*   å¸®åŠ©ï¼šé…åˆä½¿ç”¨ dir() ä¸ help() å‘½ä»¤ï¼›å…¶ä¸­å‰è€…æ˜¯è¾“å‡ºå˜é‡æ‰€æœ‰çš„æˆå‘˜ã€‚ä»¥åŠæŸ¥é˜… å®˜ç½‘é¡µé¢ã€‚

å˜é‡å¤åˆ¶çš„ä¸€ä¸ªä¾‹å­ã€‚

    a = [1, 2]
    b = a
    print(id(a) - id(b))  # åœ°å€å·®ä¸º 0ï¼Œè¡¨ç¤ºå®è´¨æ˜¯åŒå€çš„
    0
    

    b.append(3)
    print(a)  # åªæ”¹åŠ¨äº† bï¼Œä½† a ä¹Ÿè·Ÿç€å˜åŠ¨äº†
    [1, 2, 3]
    a is b
    True
    

ä½¿ç”¨åˆ‡ç‰‡æ¥é‡æ–°åˆ†é…ç©ºé—´ï¼š

    a is a[:]
    False
    

æ•°æ®ç»“æ„
====

Python åŸç”Ÿçš„æ•°æ®ç»“æ„åŒ…æ‹¬ï¼š

æ•°å­—ï¼ˆnumï¼‰
-------

ç»†åˆ†ä¸ºæ•´æ•°ï¼ˆintï¼‰ä¸æµ®ç‚¹æ•°ï¼ˆfloatï¼‰ä¸¤ç§ã€‚

*   å››åˆ™è¿ç®—ï¼š+ï¼Œ -ï¼Œ \*ï¼Œ / ï¼Œä¹˜æ–¹ï¼š \*\*
*   æ•´é™¤ï¼š 5 // 2 = 2ï¼Œå–ä½™ï¼š5 % 2 = 1
*   è‡ªè¿ç®—ï¼š a += 1 ï¼ˆå››åˆ™ä¸ä¹˜æ–¹å‡å¯ç±»ä¼¼è‡ªè¿ç®—ï¼‰  
    ä»¥åŠä¸€äº›ç»†èŠ‚ï¼š
*   è¿ç®—ä¸¤æ•°ä¸­åªè¦æœ‰ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œç»“æœå°±æ˜¯æµ®ç‚¹æ•°ï¼›
*   æ•´æ•°ç›¸é™¤ï¼Œå³ä½¿èƒ½é™¤å°½ï¼Œç»“æœä¹Ÿæ˜¯æµ®ç‚¹æ•°ï¼›
*   Python å†…éƒ¨çš„æœºåˆ¶è§£å†³äº†æ•´æ•°æº¢å‡ºçš„é—®é¢˜ï¼Œä¸ç”¨æ‹…å¿ƒã€‚

å¸ƒå°”ï¼ˆboolï¼‰ä¸é€»è¾‘
-----------

é¦–å­—æ¯å¤§å†™ True / False.

*   é€»è¾‘è¿ç®—ç¬¦ï¼šä¸ A and Bï¼Œæˆ– A or Bï¼Œé not A
*   é€»è¾‘å…³ç³»ç¬¦ï¼šç­‰äº ==ï¼Œ ä¸ç­‰äº !=. å…¶ä»–ä¸èµ˜è¿°ã€‚
*   å‡ ç§é€»è¾‘åˆ¤æ–­ä¾‹å­ï¼š

å˜é‡ x

x = \[\]

x = 0

x = 2

bool(x)

False

False

True

if x: â€¦

False

False

True

if x is None: â€¦

False

False

False

åºåˆ—ï¼ˆsequenceï¼‰
------------

åºåˆ—ä¸»è¦åŒ…æ‹¬**å­—ç¬¦ä¸²ï¼ˆstrï¼‰ã€åˆ—è¡¨ï¼ˆlistï¼‰ä¸å…ƒç¥–ï¼ˆtupleï¼‰**ä¸‰ç±»ã€‚

*   åºåˆ—ç´¢å¼•è§„åˆ™ï¼š
    *   ç´¢å¼•ä»0å¼€å§‹ï¼Œåˆ° N-1 ç»“æŸã€‚
    *   åˆ‡ç‰‡ï¼šåˆ‡ç‰‡çš„ç´¢å¼•æ˜¯å·¦é—­å³å¼€çš„ã€‚
        *   seq\[0:2\]ï¼ˆä» 0 åˆ° 1ï¼‰
        *   seq\[2:\]ï¼ˆä» 2 åˆ°å°¾ï¼‰
        *   seq\[:3\] ï¼ˆä»å¤´åˆ° 2ï¼‰
        *   seq\[:\]ï¼ˆå…¨éƒ¨ï¼‰
        *   seq\[:10:2\]ï¼ˆä»å¤´åˆ°9ï¼Œæ¯ä¸¤ä¸ªå–ä¸€ä¸ªï¼‰
        *   seq\[::2\]ï¼ˆå…¨éƒ¨ï¼Œæ¯ä¸¤ä¸ªå–ä¸€ä¸ªï¼‰
    *   ç´¢å¼•å…è®¸è´Ÿæ•°ï¼šseq(-1) ä¸ seq(N - 1) ç­‰åŒï¼Œseq(-3:-1)ä¸ seq(N-3:N-1) ç­‰åŒã€‚
*   åºåˆ—é€šç”¨å‡½æ•°ï¼š
    *   len()ï¼šè¿”å›åºåˆ—é•¿åº¦ã€‚
    *   +/\* ï¼šåŠ å·ç”¨äºè¿æ¥ä¸¤ä¸ªåºåˆ—ï¼Œä¹˜å·é‡å¤æ’åˆ—è‹¥å¹²æ¬¡å†è¿æ¥ã€‚
    *   seq1 in seq2ï¼šå¦‚æœ seq1 è¿™ä¸ªç‰‡æ®µå¯ä»¥åœ¨ seq2 ä¸­è¢«æ‰¾åˆ°ï¼Œè¿”å› True.
    *   indexï¼šåœ¨ seq1 in seq2 ä¸º True æ—¶ä½¿ç”¨ï¼Œseq2.index(seq1) è¡¨ç¤º seq1 é¦–æ¬¡å‡ºç°äº seq2 ä¸­çš„ä½ç½®ã€‚
    *   max()/min()ï¼šè¿”å›åºåˆ—ä¸­çš„æœ€å€¼ã€‚å¦‚æœä¸æ˜¯æ•°å­—ï¼Œåˆ™æŒ‰ ASCII ç é¡ºåºè¿”å›ã€‚
    *   cmp(seq1, seq2)ï¼šæ¯”è¾ƒå¤§å°ã€‚ç»“æœä¸ºè´Ÿï¼Œåˆ™è¡¨ç¤º seq1 è¾ƒå°ã€‚

### å­—ç¬¦ä¸²ï¼ˆstrï¼‰

å†™äºä¸€å¯¹åŒå¼•å·æˆ–å•å¼•å·å†…ã€‚ç”¨ str() å¯ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

*   è½¬ä¹‰ï¼šåæ–œæ ã€‚å¦‚æœå¼ºåˆ¶ä¸è§£é‡Šå­—ç¬¦ä¸²ï¼Œåœ¨å·¦å¼•å·å‰åŠ å­—æ¯ r å³å¯ï¼š `r"c:\new"`.
*   åˆ†å‰²ä¸è¿æ¥ï¼š`**.split()` ä¸ `**.join()`.

    s = " I love Python"  # é¦–ä½æ˜¯ç©ºæ ¼
    lst = s.split(' ')
    lst1 = '-'.join(lst)
    
    print(lst, '\n', lst1)
    ['', 'I', 'love', 'Python'] 
     -I-love-Python
    

*   ç´§åˆ‡ï¼š`strip()` å»æ‰å­—ç¬¦ä¸²é¦–å°¾ä¸¤ç«¯çš„ç©ºæ ¼ã€‚æ–¹æ³• `lstrip()/rstrip()` åˆ™åªåˆ‡é™¤é¦–ç«¯/å°¾ç«¯çš„ç©ºæ ¼ã€‚

    s.strip()
    'I love Python'
    

*   å¤§å°å†™è½¬æ¢ï¼šå¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š
    *   é¦–å­—æ¯å¤§å†™ï¼šs.title()
    *   å…¨å¤§å†™ï¼šs.upper()
    *   å…¨å°å†™ï¼šs.lower()
    *   å¥é¦–å¤§å†™ï¼šs.capitalize()
*   æ ¼å¼åŒ–ï¼šå­—ç¬¦ä¸²æ ¼å¼åŒ–æ˜¯ä¸€ç§å®ç”¨åŠŸèƒ½ã€‚é€šè¿‡ .format() æˆå‘˜å‡½æ•°å®Œæˆã€‚

    'I like {} and {}'.format('Python', 'you')
    'I like Python and you'
    '{0} + {2} = {1}'.format (10, 20, 'Python ')  # æŒ‰é¡ºåºå¼•ç”¨
    '10 + Python  = 20'
    '{0} * {1} = {0}'.format (10, 'Python ')  # ç¼–å·åå¤å¼•ç”¨
    '10 * Python  = 10'
    

æ ¼å¼åŒ–æ§åˆ¶ç ï¼š

æ§åˆ¶ç 

å«ä¹‰

æ§åˆ¶ç 

å«ä¹‰

ğŸ˜’

å­—ç¬¦ä¸²

:c

å•ä¸ªå­—ç¬¦

:b/o/x/d

äºŒã€å…«ã€åå…­ã€åè¿›åˆ¶æ•°

:e/f

ç§‘å­¦è®¡æ•°æ³•/æµ®ç‚¹æ•°

ä¸€äº›å¤æ‚æ§åˆ¶çš„ä¾‹å­ï¼š

ä¾‹å­

å«ä¹‰

ä¾‹å­

å«ä¹‰

:.2f/:+.2f

ä¸¤ä½å°æ•°/å¸¦ç¬¦å·ä¸¤ä½å°æ•°

: .2f

æ­£æ•°å‰è¡¥ç©ºæ ¼çš„ä¸¤ä½å°æ•°

:,

é€—å·åˆ†éš”ç¬¦

:.2%

ç™¾åˆ†æ¯”ä¸¤ä½å°æ•°

:.2e

ç§‘å­¦è®¡æ•°æ³•ä¸¤ä½å°æ•°

:^4d

æ€»å®½å››ä½å±…ä¸­å¯¹é½

:>4d/<4d

æ€»å®½å››ä½å·¦/å³å¯¹é½

:0>4d

æ€»å®½å››ä½å·¦ä¾§è¡¥é›¶

ä¸¾ä¾‹ï¼š

    "{:0>7.2f} is an odd number".format(123.4)  # æ€»å®½ 7 ä½å°æ•°ç‚¹å 2 ä½ï¼Œå·¦ä¾§è¡¥é›¶
    '0123.40 is an odd number'
    

å…¶ä»–å®ç”¨çš„å­—ç¬¦ä¸²å‡½æ•°ï¼š

*   str.replace(old, new\[, times\])ï¼šå°†å­—ç¬¦ä¸²ä¸­å‰ times ä¸ª old å­ä¸²æ›¿æ¢ä¸º newã€‚Times ä¸æŒ‡å®šæ—¶é»˜è®¤æ›¿æ¢å…¨éƒ¨ã€‚
*   str.isdigit()ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ¯ä¸€ä½éƒ½æ˜¯æ•°å­—ï¼Œè¿”å› True æˆ–è€… Falseã€‚  
    å­—ç¬¦ä¸²ä¸­æ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹å‚è§æœ¬æ–‡é™„å½•ã€‚

### åˆ—è¡¨ï¼ˆlistï¼‰

ä¸­æ‹¬å·å¼çš„ç»“æ„ã€‚`list()` ç”¨äºå¼ºåˆ¶è½¬æ¢ç±»å‹ã€‚

    lst = [1, 2, 3]
    print(lst)
    [1, 2, 3]
    # ã€åè½¬ã€‘ï¼šå…¶ä¸­ç¬¬äºŒç§æ–¹å¼ä¼šæ›´æ”¹ç°æœ‰çš„åˆ—è¡¨
    lst1 = list(reversed(lst))
    lst.reverse()
    print(lst1, lst)
    [3, 2, 1] [3, 2, 1]
    # ã€è¿½åŠ ã€‘ï¼šå…ƒç´  append()ï¼Œå¦ä¸€ä¸ªåˆ—è¡¨ï¼šextend()
    lst.append(4)
    print(lst)
    [3, 2, 1, 4]
    lst.extend(lst1)
    print(lst)
    [3, 2, 1, 4, 3, 2, 1]
    # ã€æ’å…¥ã€‘ï¼šlst.insert(idx, obj) ä¼šåœ¨ lst[idx] å¤„æ’å…¥ objï¼Œç„¶åä¾æ¬¡åç§»åŸæœ‰é¡¹
    lst.insert(1, 100)
    print(lst)
    [3, 100, 2, 1, 4, 3, 2, 1]
    # ã€åˆ é™¤ã€‘ï¼šlst.remove(obj) ä¼šåˆ é™¤é¦–ä¸ªåŒ¹é…å€¼ï¼Œè‹¥æ— åŒ¹é…ä¼šæŠ¥é”™ï¼›
    #           lst.pop(idx) ä¼šè¿”å› lst[idx]ï¼Œå¹¶å°†å…¶åˆ é™¤ã€‚å¦‚æœä¸æŒ‡å®š idxï¼Œé»˜è®¤ä¸ºåˆ—è¡¨å°¾
    lst.remove(2)
    print(lst)
    [3, 100, 1, 4, 3, 2, 1]
    tmp = lst.pop()
    print(lst, "\n", tmp)
    [3, 100, 1, 4, 3, 2] 
     1
    # ã€æœç´¢ã€‘ï¼šä½¿ç”¨åºåˆ—é€šç”¨å‡½æ•°å³å¯ã€‚ç”¨ count(obj) å¯ä»¥è®¡ç®—é¢‘æ•°ã€‚
    # ã€æ’åºã€‘ï¼šsort() æ–¹æ³•ã€‚å¦‚æœæŒ‡å®š reverse å‚æ•°ï¼Œå¯é™åºæ’åºã€‚
    lst.sort(reverse=True)
    print(lst)
    [100, 4, 3, 3, 2, 1]
    # ã€æ¸…ç©ºã€‘ï¼šclear()
    lst.clear()
    print(lst)
    []
    

### å…ƒç»„ï¼ˆtupleï¼‰

åœ†æ‹¬å·å¼çš„ç»“æ„ï¼Œæ˜¯ä¸€ç§ä¸å¯å˜åºåˆ—ã€‚

    a = (1, 'string ', [1 ,2])
    print(a)
    (1, 'string ', [1, 2])
    

**Note**: å®šä¹‰ä¸€ä¸ªç©ºçš„å…ƒç»„ç”¨`()`ï¼Œå®šä¹‰åªæœ‰ä¸€ä¸ªå…ƒç»„çš„å…ƒç»„ï¼Œéœ€è¦åŠ `,`ï¼Œå¦åˆ™å°±ä¸æ˜¯å…ƒç»„äº†ï¼Œå¦‚ä¸‹ï¼š

    >>> tuple1 = ()
    >>> type(tuple1)
    <type 'tuple'>
    >>> tuple2 = (1)
    >>> type(tuple2)
    <type 'int'>
    >>> tuple3 = (1,)
    >>> type(tuple3)
    <type 'tuple'>
    

å­—å…¸ï¼ˆdictï¼‰
--------

å­—å…¸æ˜¯ä¸€ç§ç±»å“ˆå¸Œè¡¨çš„æ•°æ®ç»“æ„ï¼Œå†…éƒ¨æ— åºï¼Œé€šè¿‡é”®å€¼å¯¹ï¼ˆkey: valueï¼‰çš„å½¢å¼å­˜å‚¨æ•°æ®ã€‚å‡ ç§å­—å…¸åˆå§‹åŒ–çš„æ–¹å¼ï¼š

    # å°å­—å…¸ç›´æ¥èµ‹å€¼
    d1 = {"name": "wklchris", "gender": "male"}
    # åˆ©ç”¨å­—å…¸å¢åŠ é”®å€¼å¯¹çš„æ–¹æ³•
    d2 = {}
    d2['name'] = 'wklchris'
    # ä¸€ä¸ªå€¼èµ‹ç»™å¤šä¸ªé”®
    d3 = {}.fromkeys(("name", "gender"), "NA")
    # å¼ºåˆ¶æ ¼å¼è½¬æ¢
    d4 = dict(name="wklchris", gender="male")
    
    print(d1, d2, d3, d4, sep="\n")
    {'name': 'wklchris', 'gender': 'male'}
    {'name': 'wklchris'}
    {'name': 'NA', 'gender': 'NA'}
    {'name': 'wklchris', 'gender': 'male'}
    

å­—å…¸çš„æ“ä½œæ–¹æ³•ï¼š

    len(d1)
    2
    # ã€å¤åˆ¶ã€‘ï¼š
    dd = d1.copy()
    dd is d1
    False
    # ã€æŸ¥æ‰¾é”®åç§°ã€‘ï¼š
    "name" in dd
    True
    # ã€åˆ é™¤é”®å€¼å¯¹ã€‘
    del(dd["name"])
    # ã€getã€‘
    dd.get("name", "Nothing")  # å¦‚æœé”®ä¸å­˜åœ¨ï¼Œè¿”å›â€œNothingâ€
    'Nothing'
    # ã€setdefaultã€‘
    dd.setdefault("name", "wklchris")  # å¦‚æœé”®ä¸å­˜åœ¨ï¼Œå°±æ–°å»ºè¯¥é”®ï¼Œå¹¶èµ‹å€¼
    'wklchris'
    print(dd)
    {'name': 'wklchris', 'gender': 'male'}
    # ã€è¾“å‡ºé”®å€¼ã€‘ï¼š
    list(dd.items())
    [('name', 'wklchris'), ('gender', 'male')]
    list(dd.keys())
    ['name', 'gender']
    list(dd.values())
    ['wklchris', 'male']
    # ã€å¼¹å‡ºé”®å€¼å¯¹ã€‘ï¼špop(key) / popitem(key)
    # å…¶ä¸­ï¼Œåè€…ä¼šéšæœºå¼¹å‡ºä¸€ä¸ªé”®å€¼å¯¹
    tmp = dd.pop("gender")
    print(dd, tmp)
    {'name': 'wklchris'} male
    # ã€æ›´æ–°ã€‘ï¼šupdate(ref_dict) ä»¥ ref_dict ä¸ºå‡†ï¼Œæ›´æ–°å½“å‰å­—å…¸
    d4 = {"name": "Test", "Age": 3}
    dd.update(d4)
    print(dd)
    {'name': 'Test', 'Age': 3}
    

é›†åˆï¼ˆsetï¼‰
-------

æœ¬æ–‡åªè®¨è®ºå¯å˜é›†åˆï¼Œå…³äºä¸å¯å˜é›†åˆçš„å†…å®¹ï¼Œå‚è€ƒ help(frozenset)ã€‚

é›†åˆæ˜¯ä¸€ç§æ— åºçš„æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œä¸”å†…éƒ¨å…ƒç´ å…·æœ‰å”¯ä¸€æ€§ã€‚é›†åˆä¸å­—å…¸ä¸€æ ·éƒ½å¯ä»¥ç”¨èŠ±æ‹¬å·çš„å½¢å¼åˆ›ç«‹ã€‚ä½†åœ¨ä¹¦å†™ a={} æ—¶ï¼ŒPython ä¼šå°†å…¶è¯†åˆ«ä¸ºå­—å…¸ç±»å‹ã€‚

*   å¢æ·»ï¼šadd() / update()
*   åˆ é™¤ï¼šremove() / discard()ï¼ŒåŒºåˆ«åœ¨äºåè€…æœç´¢æ— ç»“æœä¼šæŠ¥é”™ã€‚
*   ä»å±ï¼ša.issubset(b) é›†åˆ a æ˜¯å¦æ˜¯ b çš„å­é›†ï¼›a.issuperset(b) é›†åˆ a æ˜¯å¦æ˜¯ b çš„çˆ¶é›†ã€‚a == b ä¸¤é›†åˆæ˜¯å¦å…¨ç­‰ã€‚
*   é›†åˆè¿ç®—ï¼šé›†åˆè¿ç®—ä¸ä¼šæ”¹å˜å‚ä¸è¿ç®—çš„é›†åˆæœ¬èº«ã€‚
    *   å¹¶é›†ï¼š a | b æˆ–è€… a.union(b)
    *   äº¤é›†ï¼š a & b æˆ–è€… a.intersection(b)
    *   è¡¥é›†ï¼š a - b æˆ–è€… a.difference(b)  
        **æ³¨æ„**ï¼šåœ¨å­—ç¬¦ä¸²å¼ºåˆ¶è½¬æ¢ä¸ºé›†åˆæ—¶ï¼Œå¿…è¦æ—¶ä½¿ç”¨ä¸­æ‹¬å·å…ˆè½¬ä¸ºåˆ—è¡¨ï¼ˆå¦åˆ™å­—ç¬¦ä¸²ä¼šè¢«æ‹†åˆ†ä¸ºå•ä¸ªå­—ç¬¦åå†è¿›è¡Œè½¬æ¢ï¼‰ã€‚ä¾‹å¦‚ï¼š

    ss = {"a", "b", "c"}
    ss | set("de")
    {'a', 'b', 'c', 'd', 'e'}
    ss | set(["de"])
    {'a', 'b', 'c', 'de'}
    

åŸºæœ¬è¯­å¥
====

åŒå¤§å¤šæ•°ç¨‹åºè¯­è¨€ä¸€æ ·ï¼ŒPython æ‹¥æœ‰ `if, for, while`è¯­å¥ã€‚ä»€ä¹ˆï¼Ÿ`switch` è¯­å¥ï¼Ÿä½¿ç”¨å­—å…¸å°±å¥½ã€‚

if è¯­å¥ä¸ä¸‰å…ƒæ“ä½œ
----------

åœ¨ Python ä¸­ï¼Œ`else if` è¢«ç¼©å†™ä¸ºå•ä¸ªå…³é”®è¯ `elif`.

    if 1.0 > 1:
        a = 1
    elif 1.0 < 1:
        a = 2
    else:
        a = 3
        
    a
    3
    

å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒPython ä¸­çš„ if è¯­å¥æ”¯æŒé“¾å¼æ¯”è¾ƒï¼Œå½¢å¦‚ `a < x < b, a < x >= b` ç­‰ï¼š

    a = 0
    if 1 < 2 > 1.5:
        a = 1
    a
    1
    

ä¸‰å…ƒæ“ä½œå®è´¨æ˜¯é«˜åº¦ç®€åŒ–çš„ if ç¯å¢ƒï¼Œå½¢å¦‚ `X = a if flag else b`ï¼š

    a = 1 if 2 < 1 else 2
    a
    2
    

for è¯­å¥
------

Python çš„å¾ªç¯è¯­å¥ä¸­ï¼Œåƒå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œæœ‰ `break`ï¼ˆè·³å‡ºå¾ªç¯ä½“ï¼‰ ä¸ `continue`ï¼ˆå¾ªç¯æ­¥è¿›ï¼‰ å…³é”®è¯å¯ä»¥ä½¿ç”¨ã€‚

for è¯­å¥å€ŸåŠ©å…³é”®è¯ in ä½¿ç”¨ï¼šï¼ˆå‡½æ•° `range(N, M=0, s=1)` æ˜¯ä¸€ä¸ªç”Ÿæˆç­‰å·®æ•°åˆ—çš„å‡½æ•°ï¼Œä½äºå·¦é—­å³å¼€åŒºé—´`[M,N)`ä¸Šä¸”å…¬å·®ä¸º sï¼‰ã€‚

    for i in range(3):
        print(i)
    0
    1
    2
    

æ³¨æ„åˆ°å­—å…¸çš„ d.items(), d.keys(), d.values() å‘½ä»¤ä¹Ÿå¸¸å¸¸ç”¨äº for è¯­å¥ï¼š

    d = {"a": 1, "b": 2, "c": 3}
    for k, v in d.items():
        print(k, v)
    b 2
    c 3
    a 1
    

ä»¥ä¸Šç­‰ä»·äºï¼š

    for k in d.keys():
        print(k, d[k])
    b 2
    c 3
    a 1
    

Python ä¸­çš„ `for` è¯­å¥å¯é€‰ `else` è¯­æ³•å—ï¼Œè¡¨ç¤º `for` è¯­å¥æ­£å¸¸ç»“æŸåæ‰§è¡Œçš„å†…å®¹ï¼ˆä¸­é€” `break` ä¸å±äºæ­£å¸¸ç»“æŸï¼‰ã€‚è¿™å¯¹äºå¤„ç†ä¸€äº› break æ“ä½œå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼š

    a = 0
    flag = 0
    for i in range(5):
        if i > 2:
            flag = 1
            break
    if flag == 1:
        a = 1
    a
    1
    

è¿™åœ¨ Python ä¸­æ˜¾å¾—å¤ªå¤æ‚äº†ï¼Œç›´æ¥ä½¿ç”¨ `forâ€¦elseâ€¦`å³å¯ï¼š

    a = 1
    for i in range(5):
        if i > 1:
            break
    else:
        a = 0
    a
    1
    

while è¯­å¥
--------

while è¯­å¥çš„ `else` è¯­æ³•å—ï¼ŒæŒ‡æ˜äº†é€€å‡º while å¾ªç¯åç«‹åˆ»æ‰§è¡Œçš„å†…å®¹ï¼›å®ƒä¸æ˜¯å¿…éœ€çš„ã€‚

å¦‚æœä½ æƒ³è¦å°† while è¯­å¥å†…éƒ¨çš„å‚æ•°ä¼ å‡ºï¼ˆæ¯”å¦‚ä¸‹ä¾‹çš„è®¡æ•°å™¨ç»ˆå€¼ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹æ¡ˆã€‚

    count = 1
    while count < 5:
        a = count
        count *= 2
    else:
        b = count
    
    print(a, b)
    4 8
    

åˆ—è¡¨è§£æ
----

åˆ—è¡¨è§£ææ˜¯ä¸€ç§åˆ›å»ºåˆ—è¡¨çš„é«˜åº¦ç¼©å†™æ–¹å¼ï¼š

    lst = [x ** 2 for x in range(4)]
    lst
    [0, 1, 4, 9]
    

ä¹Ÿå¯ä»¥é…åˆ if è¯­å¥ï¼š

    lst = [x ** 2 for x in range(4) if x > 0]
    lst
    [1, 4, 9]
    

ç±»ä¼¼çš„ï¼Œä¹Ÿæœ‰å­—å…¸è§£æï¼Œä»¥åŠä¸‹æ–‡ä¼šä»‹ç»çš„ç”Ÿæˆå™¨ï¼Œä¹Ÿæœ‰ç”Ÿæˆå™¨è§£æï¼ˆæŠŠå¤–å›´çš„æ‹¬å·æ¢æˆåœ†æ‹¬å·å³å¯ï¼‰ï¼š

    {n: n ** 2 for n in range(3)}
    {0: 0, 1: 1, 2: 4}
    

å‡½æ•°
==

æœ¬èŠ‚ä»‹ç» Python å‡½æ•°çš„åŸºç¡€ç‰¹ç‚¹ï¼Œä»¥åŠä¸€äº›å®ç”¨å‡½æ•°ã€‚

å‡½æ•°å®šä¹‰ä¸åˆ¤æ–­
-------

ä½¿ç”¨ `def` å…³é”®å­—ã€‚ä¸‰è¿åŒå¼•å·é—´çš„å†…å®¹è¢«è§†ä¸ºå‡½æ•°çš„å¸®åŠ©å­—ç¬¦ä¸²ï¼Œå¯ä»¥é€šè¿‡ `help()` å‘½ä»¤æŸ¥çœ‹ã€‚

    def func(a, b=0):
        """
        This is a function that can meow.
        """
        return " ".join(["meow"] * (a + b))
    

è°ƒç”¨å‡½æ•°ï¼š

    func(2)  # å•å‚æ•°ï¼Œä»… a 
    'meow meow'
    func(2, 3)  # åŒå‚æ•°ï¼Œ a ä¸ b éƒ½è¢«ä¼ å…¥
    'meow meow meow meow meow'
    help(func)
    Help on function func in module __main__:
    
    func(a, b=0)
        This is a function that can meow.
    

é€šè¿‡ `callable()` å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°ï¼š

    callable(func)
    True
    

ä¸å®šå‚å‡½æ•°
-----

åˆ©ç”¨åºåˆ—ï¼ˆæˆ–å…ƒç»„ï¼‰ä¸å­—å…¸ï¼Œå‘å‡½æ•°ä¼ å‚ã€‚å‰è€…åœ¨ä¼ å…¥æ—¶éœ€è¦åŠ ä¸Šä¸€ä¸ªæ˜Ÿå·ï¼Œåè€…éœ€è¦ä¸¤ä¸ªã€‚

    lst = [1, 3, 4]
    d = {"a": 2, "b": 3, "c": 5}
    print("{}+{}={}".format(*lst), "{a}+{b}={c}".format(**d))
    1+3=4 2+3=5
    

zip å‡½æ•°
------

zip() å‡½æ•°çš„ä½œç”¨æ˜¯â€œåˆå¹¶â€å¤šä¸ªåˆ—è¡¨ä¸ºä¸€ä¸ªã€‚å…¶è¿”å›å€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨å†…çš„å…ƒç´ ç±»å‹æ˜¯å…ƒç»„ã€‚å¦‚æœå¾…åˆå¹¶çš„åˆ—è¡¨é•¿åº¦ä¸åŒï¼Œä»¥æœ€çŸ­çš„ä¸ºå‡†ã€‚

    a = [1, 2, 3, 4]
    b = [5 ,6, 7]
    c = "abcd"
    list(zip(a, b, c))
    [(1, 5, 'a'), (2, 6, 'b'), (3, 7, 'c')]
    

å®ƒæ¯”è¾ƒå¸¸ç”¨äºäº¤æ¢å­—å…¸çš„é”®ä¸å€¼ï¼š

    dict(zip(d.values(), d.keys()))
    {2: 'a', 3: 'b', 5: 'c'}
    

lambda å‡½æ•°
---------

ä¸€ç§åŒ¿åå‡½æ•°çš„å£°æ˜æ–¹å¼ã€‚å¦‚æœä½ ä½¿ç”¨è¿‡ `MATLAB`ï¼Œä½ å¯èƒ½ç†Ÿæ‚‰è¿™ä¸€ç±»æ¦‚å¿µã€‚

    func = lambda x, y: x + y
    func(2, 5)
    7
    

map å‡½æ•°
------

`map()` èƒ½å¤Ÿå¯¹ä¼ å…¥çš„åºåˆ—è¿›è¡Œä¾æ¬¡æ“ä½œï¼Œå¹¶å°†ç»“æœè¿”å›ä¸ºä¸€ä¸ªå¯è½¬æ¢ä¸ºåˆ—è¡¨çš„ `map` å¯¹è±¡ã€‚é€šå¸¸åˆ—è¡¨è§£æï¼ˆæˆ–ç”Ÿæˆå™¨è§£æï¼‰å¯ä»¥å®ç°ä¸å…¶åŒæ ·çš„å·¥ä½œã€‚

    lst = list(map(lambda x: x + 1, range (5)))
    print(lst)
    [1, 2, 3, 4, 5]
    f = lambda x: x + 1
    [f(x) for x in range(5)]
    [1, 2, 3, 4, 5]
    

filter å‡½æ•°
---------

ç»™å®šåºåˆ—ï¼Œå¯¹äºæ»¡è¶³æŸè§„åˆ™çš„éƒ¨åˆ†ï¼ˆå³ Trueï¼‰ï¼Œäºˆä»¥è¿”å›ã€‚

    list(filter(lambda x: x > 0, range(-3, 3)))
    [1, 2]
    

reduce å‡½æ•°
---------

è¯¥å‡½æ•°åœ¨ Python 2 ä¸­æ˜¯å¯ä»¥ç›´æ¥è°ƒç”¨çš„ï¼Œä½†åœ¨ Python 3 ä¸­éœ€è¦ä» `functools` æ¨¡å—è¿›è¡Œè°ƒç”¨ã€‚

    from functools import reduce
    reduce(lambda x, y: x + y, range (5))  # 0+1+2+3+4
    10
    

enumerate å‡½æ•°
------------

å®ƒå…è®¸ä½ åƒ d.items() é‚£æ ·ï¼Œç”¨ç±»ä¼¼çš„æ–¹å¼æ“ä½œåˆ—è¡¨ï¼š

    a = [1, 3, 5]
    for i, v in enumerate(a):
        print("lst[{}] = {}".format(i, v))
    
    lst[0] = 1
    lst[1] = 3
    lst[2] = 5
    

è£…é¥°å™¨ï¼šç®—å­
======

è£…é¥°å™¨æ˜¯å‡½æ•°çš„å‡½æ•°â€”â€”ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›çš„å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ç›¸å½“äºä¸€ä¸ªå‡½æ•°é›†åˆ°å¦ä¸€ä¸ªå‡½æ•°é›†çš„æ˜ å°„ï¼Œå¯ä»¥ç†è§£ä¸ºæ•°å­¦æ„ä¹‰ä¸Šçš„ç®—å­ã€‚

é¦–å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šå‡½æ•°å¯ä»¥è¢«èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚

    def pyrint(data="Python"):
        return data.upper()
    
    f = pyrint
    f()
    'PYTHON'
    

è¿˜å¯ä»¥é€šè¿‡ `__name__` æ¥å¾—åˆ°å½“å‰å‡½æ•°çš„åç§°ï¼š

    f.__name__
    'pyrint'
    

é‚£ä»€ä¹ˆæ—¶å€™éœ€è¦è£…é¥°å™¨å‘¢ï¼Ÿæ¯”å¦‚åœ¨å‡½æ•°éœ€è¦è¢«é‡ç”¨ã€ä½†åˆä¸èƒ½ç›´æ¥æ”¹å†™ `def` çš„åœºåˆï¼ˆåœ¨ç»´æŠ¤ä¸­åº”è¯¥ä¸å°‘è§å§ï¼ï¼‰ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨è¿”å›å€¼ä¹‹å‰ï¼ŒæŠŠå‡½æ•°åä¹Ÿæ‰“å°å‡ºæ¥ï¼š

    def showname(func):
        def subfunc(*args, **kwarg):
            print("FUNCTION {} called.".format(func.__name__))
            return func(*args, **kwarg)
        return subfunc
    

è¿™æ ·å¦‚æœæˆ‘ä»¬é€šè¿‡ `showname(pyrint)` è¿™ç§å½¢å¼ï¼Œå°±èƒ½å¤Ÿåœ¨ `pyrint` å‡½æ•°è¢«è°ƒç”¨ä¹‹å‰ï¼Œé¢å¤–æ‰“å°ä¸€è¡Œå†…å®¹ã€‚

æƒ³è¦æ”¹åŠ¨è¯¥å‡½æ•°ï¼Œä¸éœ€è¦æ”¹åŠ¨ def è¯­å¥ä»¥ä¸‹çš„å†…å®¹ï¼Œåªéœ€è¦ç”¨ `@showname` å‘½ä»¤æ¥åº”ç”¨è¿™ä¸ªè£…é¥°å™¨ï¼š

    @showname
    def pyrint(data="Python"):
        return data.upper()
    pyrint()
    FUNCTION pyrint called.
    
    'PYTHON'
    

å¦‚æœè£…é¥°å™¨éœ€è¦ä¼ é€’å‚æ•°ï¼Œé‚£ä¹ˆï¼Œéœ€è¦åœ¨å®šä¹‰æ—¶ï¼Œå¤–å±‚å†åµŒå¥—ä¸€ä¸ªå‡½æ•°ï¼š

    def showname(num=1):
        def decorator(func):
            def subfunc(*args, **kwarg):
                print("Call time: {}. FUNCTION {} called.".format(num, func.__name__))
                return func(*args, **kwarg)
            return subfunc
        return decorator
    
    @showname(2)
    def pyrint(data="Python"):
        return data.upper()
    
    pyrint()
    Call time: 2. FUNCTION pyrint called.
    
    'PYTHON'
    

ä¸è¿‡è£…é¥°å™¨è¢«åº”ç”¨äºå‡½æ•°å®šä¹‰ä¹‹å‰æ—¶ï¼Œå‡½æ•°çš„ `__name__` å±æ€§ä¼šæ”¹å˜ã€‚æ¯”å¦‚ä¸Šä¾‹ï¼š

    pyrint.__name__
    'subfunc'
    ä½¿ç”¨æ¨¡å— functools æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼š
    
    import functools
    
    def showname(num=1):
        def decorator(func):
            @functools.wraps(func)  # åŠ ä¸Šè¿™ä¸€è¡Œ
            def subfunc(*args, **kwarg):
                print("Call time: {}. FUNCTION {} called.".format(num, func.__name__))
                return func(*args, **kwarg)
            return subfunc
        return decorator
    
    @showname(2)
    def pyrint(data="Python"):
        return data.upper()
    
    pyrint.__name__
    'pyrint'
    

è¿­ä»£å™¨ \[itertools\]
=================

è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨åœ¨å†…å­˜ä¼˜åŒ–ä¸Šå¾ˆæœ‰æ„ä¹‰ã€‚

è¿­ä»£å™¨
---

è¿­ä»£å™¨æœ€æ˜¾è‘—çš„ç‰¹å¾æ˜¯æ‹¥æœ‰ `__iter__()` å’Œ `__next__()` æ–¹æ³•ï¼›å®ƒåƒä¸€ä¸ªé“¾è¡¨ã€‚å¦‚æœå®ƒæŒ‡å‘æœ«å°¾ï¼Œé‚£ä¹ˆå†æ¬¡æ‰§è¡Œ `__next__()` æ—¶ä¼šæŠ¥é”™ã€‚ä¸€ä¸ªä¾‹å­ï¼š

    a = [1, 2, 3]
    b = iter(a)
    print(b.__next__(), b.__next__())  # æˆ–è€…ä½¿ç”¨ next(b)
    1 2
    

å®é™…ä¸Šï¼ŒPython 3 å†…ç½®äº†ä¸€ä¸ª `itertools` çš„åº“ï¼Œé‡Œé¢æœ‰è¯¸å¦‚ `cycle` å’Œ `count` ç­‰é€‚ç”¨äºè¿­ä»£å™¨çš„å‡½æ•°ï¼š

    import itertools
    
    # count: ç»™å®šé¦–é¡¹ä¸å…¬å·®çš„æ— ç©·ç­‰å·®æ•°åˆ—
    p = itertools.count(start = 1, step = 0.5)
    print(p.__next__(), p.__next__())
    
    # cycle: å‘¨æœŸå¾ªç¯çš„æ— ç©·åºåˆ—
    p = itertools.cycle(list("AB"))
    print(next(p), next(p), next(p))
    
    # islice: ä»æ— ç©·åºåˆ—ä¸­åˆ‡ç‰‡
    p = itertools.cycle(list("AB"))
    print(list(itertools.islice(p, 0, 4)))
    1 1.5
    A B A
    ['A', 'B', 'A', 'B']
    

è¯·æ—¶åˆ»æ³¨æ„å½“å‰æŒ‡å‘çš„è¿­ä»£å™¨ä½ç½®â€”â€”å¤±ä¹‹æ¯«å˜ï¼Œè°¬ä»¥åƒé‡Œã€‚

ç”Ÿæˆå™¨
---

ç”Ÿæˆå™¨æ˜¯è¿­ä»£å™¨çš„ä¸€ç§ï¼Œå…¶å®è´¨æ˜¯å®šä¹‰ä¸­å«æœ‰ yield å…³é”®è¯çš„å‡½æ•°ã€‚å®ƒæ²¡æœ‰ return() è¯­å¥ã€‚

ç”Ÿæˆå™¨å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»ä¼¼åˆ—è¡¨è§£æçš„æ–¹å¼ï¼Œç§°ä¸ºç”Ÿæˆå™¨è§£æã€‚ä¾‹å¦‚ï¼š(i for i in range(10)ã€‚

    def Fib(N):  # æ–æ³¢é‚£å¥‘æ•°åˆ—
        n, former, later = 0, 0, 1
        while n < N:
            yield later
            former, later = later, later + former
            n += 1
    
    list(Fib(5))
    [1, 1, 2, 3, 5]
    

ä¸Šä¾‹ä¸æ™®é€šçš„å†™æ³•çœ‹ä¸Šå»å·®åˆ«ä¸å¤§ï¼Œä½†å®é™…ä¸Šå¯ä»¥å°† while è¯­å¥æ”¹å†™ä¸º `while True`ï¼Œåˆ é™¤å˜é‡ nï¼Œåœ¨å¤–éƒ¨å€ŸåŠ© itertools çš„ `islice` å‡½æ•°æ¥æˆªå–ã€‚è¿™åœ¨å‡½æ•°å®šä¹‰æ—¶å¯¹ä»£ç çš„å‹ç¼©æ˜¯æ˜¾ç„¶çš„ã€‚

    def iterFib():
        former, later = 0, 1
        while True:
            yield later
            former, later = later, later + former
    
    list(itertools.islice(iterFib(), 0, 5))
    [1, 1, 2, 3, 5]
    

é”™è¯¯ï¼š`try()` è¯­å¥
=============

å¸¸è§çš„é”™è¯¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š

*   ZeroDivisionError: é™¤æ•°ä¸º 0.
*   SyntaxErrorï¼šè¯­æ³•é”™è¯¯ã€‚
*   IndexErrorï¼šç´¢å¼•è¶…ç•Œã€‚
*   KeyErrorï¼šå­—å…¸é”®ä¸å­˜åœ¨ã€‚
*   IOErrorï¼šè¯»å†™é”™è¯¯ã€‚  
    try() è¯­å¥çš„å¸¸è§å†™æ³•ï¼š

    try:
        a = 1 
    except ZeroDivisionError as e:
        print(e)
        exit()
    else:  # å¦‚æœæ— é”™è¯¯ï¼Œæ‰§è¡Œ
        print(a)
    finally:  # ä¸ç®¡æœ‰æ— é”™è¯¯å‡æ‰§è¡Œ
        print("-- End --")
    1
    -- End --
    

å…¶ä¸­ï¼Œ`else` ä¸ `finally` è¯­å¥éƒ½ä¸æ˜¯å¿…éœ€çš„ã€‚å¦‚æœä¸æƒ³è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€æˆ–ä¸èƒ½é¢„å…ˆåˆ¤æ–­å¯èƒ½çš„é”™è¯¯ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ä»…å« exit() è¯­å¥çš„ `except` å—ã€‚

å¤šä¸ª except å—
-----------

ä¸€ä¸ª try è¯­æ³•å—æ˜¯å¯ä»¥è·Ÿç€å¤šä¸ª `except` çš„ï¼›å¦‚æœé å‰çš„ except æ•è·äº†é”™è¯¯ï¼Œä¹‹åçš„å°±ä¸ä¼šè¿è¡Œã€‚ è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœé”™è¯¯ä¹‹é—´æœ‰ç»§æ‰¿å…³ç³»æ—¶ï¼Œå­é”™è¯¯éœ€è¦æ”¾åœ¨çˆ¶é”™è¯¯ä¹‹å‰å°è¯• exceptï¼Œå¦åˆ™å­é”™è¯¯æ°¸è¿œä¹Ÿä¸å¯èƒ½è¢«æ•è·ã€‚

æ¯”å¦‚ä¸Šä¸€èŠ‚çš„ä¾‹å­ä¸­ï¼Œ`ZeroDivisionError` æ˜¯ `ArithmeticError` ä¸‹çš„å­é”™è¯¯ï¼Œè€Œ `ArithmeticError` åˆæ˜¯ Exception ä¸‹çš„å­é”™è¯¯ï¼ˆå½“ä¸æ¸…æ¥šé”™è¯¯çš„ç±»å‹æ—¶ï¼ŒException å¯ä»¥æ•è·ç»å¤§å¤šæ•°é”™è¯¯ï¼‰ã€‚å…³äºé”™è¯¯çš„ç»§æ‰¿å…³ç³»ï¼Œå‚è€ƒï¼šPython - Exception Hierarchy å®˜æ–¹é¡µé¢ã€‚

ä¸€ä¸ªä¾‹å­ï¼š

    try:
        a = 1 / 0
    except Exception:
        print("Exception")
        exit()
    except ZeroDivisionError:
        print("ZeroDivisionError")
        exit()
    else:
        print("No error.")
    finally:
        print("-- End --")
    è¾“å‡º Exception ä¸ â€“ End â€“ã€‚
    

é”™è¯¯çš„æ•è·
-----

é”™è¯¯åœ¨å¾ˆå¤šåœ°æ–¹éƒ½å¯èƒ½å‘ç”Ÿï¼Œé‚£æ˜¯å¦éœ€è¦åœ¨å¯èƒ½çš„åœ°æ–¹éƒ½åŠ ä¸Š try è¯­å¥å‘¢ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚å»ºè®®åªåœ¨ä¸»ä»£ç ä¸­åŠ å…¥ try è¯­å¥ï¼Œå› ä¸º Python ä¼šè‡ªåŠ¨è·Ÿè¸ªåˆ°é”™è¯¯äº§ç”Ÿçš„æºå¤´ä½•åœ¨ã€‚

é”™è¯¯çš„æŠ›å‡ºåŠä¸ŠæŠ›
--------

æœ‰æ—¶å€™æˆ‘ä»¬æƒ³äººä¸ºæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¿™æ˜¯ä½¿ç”¨ `raise` å³å¯ï¼š

    # raise TypeError("Wrong type.")
    

å¦‚æœåœ¨å‡½æ•°ä¸­æ²¡æœ‰å¤„ç†é”™è¯¯çš„è¯­å¥ï¼Œå¯èƒ½åœ¨æ•è·é”™è¯¯åå°†å…¶ä¸ŠæŠ›ã€‚è®°ä½ï¼Œæ•è·é”™è¯¯åªæ˜¯ä¸ºäº†è®°å½•é”™è¯¯çš„äº§ç”Ÿï¼Œå¹¶ä¸æ„å‘³è€…å¿…é¡»åŸåœ°è§£å†³é”™è¯¯ã€‚

    def makeerror(n):
        if n == 0:
            raise ValueError("Divided by zero.")
        return 1 / n
    
    def callerror():
        try:
            makeerror(0)
        except ValueError as e:
            print("ValueError detected.")
            raise
    
    # è¾“å‡º "ValueError detected." å¹¶æ‰“å°é”™è¯¯æ—¥å¿—
    # callerror()
    

ä¸Šé¢çš„ `raise` å‘½ä»¤æ²¡æœ‰ç´§è·Ÿä»»ä½•å‚æ•°ï¼Œè¡¨ç¤ºå°†é”™è¯¯åŸæ ·ä¸ŠæŠ›ã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šä¸ŠæŠ›çš„é”™è¯¯ç±»å‹ï¼Œå¹¶ä¸éœ€è¦ä¸åŸé”™è¯¯ç±»å‹ä¸€è‡´ã€‚ç”šè‡³ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªé”™è¯¯ï¼ˆç»§æ‰¿æŸä¸€é”™è¯¯ç±»ï¼‰ï¼š

    class MyError(ValueError):
        print("This is MyError.")
    
    # raise MyError
    This is MyError.
    

æ–‡ä»¶è¯»å†™
====

open() å‡½æ•°ç”¨äºæ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚ä¸€èˆ¬æˆ‘ä»¬ä¼šåœ¨æ“ä½œæ–‡ä»¶æ—¶ï¼Œå¼•å…¥ os æ¨¡å—ï¼ˆos æ¨¡å—çš„ç”¨æ³•å‚è€ƒâ€œå¸¸ç”¨æ¨¡å—â€ä¸€èŠ‚çš„å†…å®¹ï¼‰ã€‚

    import os
    

`open()` å‡½æ•°å¸¸å¸¸é…åˆ `with` è¯­æ³•å—è¿›è¡Œä½¿ç”¨ï¼Œå®ƒä¼šåœ¨è¯­æ³•å—ç»“æŸæ—¶è‡ªåŠ¨å…³é—­æ–‡ä»¶ã€‚è¯¥å‡½æ•°ï¼š

    open(file, mode="r", encoding=None)
    

ç¬¬ä¸€å‚æ•°æ˜¯åŒ…å«æ–‡ä»¶åçš„è·¯å¾„ï¼ˆä¼ å…¥åŸºäºå½“å‰ç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œä¼ å…¥æˆ–è€…ç»å¯¹è·¯å¾„ï¼‰ï¼Œmode å‚æ•°æ˜¯è¯»å†™æ“ä½œæ–¹å¼ï¼›`encoding` æ˜¯ç¼–ç ç±»å‹ï¼Œä¸€èˆ¬å–`â€utf8â€`ã€‚å…¶ä¸­ï¼Œè¯»å†™æ“ä½œæ–¹å¼å¸¸ç”¨çš„æœ‰ï¼š

å‚æ•°

å«ä¹‰

â€œrâ€

ï¼ˆé»˜è®¤ï¼‰è¯»ã€‚

â€œwâ€

å†™ã€‚è¯¥æ¨¡å¼ä¼šè¦†ç›–åŸæœ‰å†…å®¹ï¼›å¦‚æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨æ–°å»ºã€‚

â€œxâ€

åˆ›å»ºæ–°æ–‡ä»¶å¹¶å†™å…¥ã€‚

â€œaâ€

åœ¨å·²æœ‰æ–‡ä»¶çš„å°¾éƒ¨è¿½åŠ ã€‚

ä¸€èˆ¬è¯»å†™æ“ä½œï¼š`read() / readlines()`
-----------------------------

å‡½æ•° `read()` å°†æ•´ä¸ªæ–‡ä»¶è¯»ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

    datapath = os.path.join(os.getcwd(), "data", "iris.data.csv")
    with open(datapath, "r", encoding="utf8") as f:
        rawtext = f.read()
    
    rawtext[:200]
    '5.1,3.5,1.4,0.2,Iris-setosa\n4.9,3.0,1.4,0.2,Iris-setosa\n4.7,3.2,1.3,0.2,Iris-setosa\n4.6,3.1,1.5,0.2,Iris-setosa\n5.0,3.6,1.4,0.2,Iris-setosa\n5.4,3.9,1.7,0.4,Iris-setosa\n4.6,3.4,1.4,0.3,Iris-setosa\n5.0,'
    

å‡½æ•° `readlines()` å°†æ•´ä¸ªæ–‡ä»¶è¯»ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼Œæ–‡ä»¶çš„æ¯ä¸€è¡Œå¯¹åº”åˆ—è¡¨çš„ä¸€ä¸ªå…ƒç´ ã€‚

    with open(datapath, "r", encoding="utf8") as f:
        rawtext = f.readlines()
    
    rawtext[:3]
    ['5.1,3.5,1.4,0.2,Iris-setosa\n',
     '4.9,3.0,1.4,0.2,Iris-setosa\n',
     '4.7,3.2,1.3,0.2,Iris-setosa\n']
    

ä¸Šè¿°çš„ `readlines()` å‡½æ•°å®è´¨ç­‰åŒäºåˆ—è¡¨è§£æï¼š

    with open(datapath, "r", encoding="utf8") as f:
        rawtext = [line for line in f]
    
    rawtext[:3]
    ['5.1,3.5,1.4,0.2,Iris-setosa\n',
     '4.9,3.0,1.4,0.2,Iris-setosa\n',
     '4.7,3.2,1.3,0.2,Iris-setosa\n']
    

æ–‡ä»¶å†™å…¥ï¼Œä½¿ç”¨ `write()` å‡½æ•°ã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š

    with open(datapath, "w") as f:
       f.write("Sometimes naive.")
    

å¤§æ–‡ä»¶è¯»å–ï¼š`readline()`
------------------

å¦‚æœæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œä½¿ç”¨ `read()/readlines()` å‡½æ•°ç›´æ¥è¯»å…¥å¯èƒ½ä¼šå ç”¨å¤ªå¤šå†…å­˜ã€‚æ¨èä½¿ç”¨å‡½æ•° `readline()`ï¼Œä¸€ç§è¿­ä»£å™¨å¼çš„è¯»å–æ–¹æ³•ã€‚

    with open(datapath, "r", encoding="utf8") as f:
        print(f.readline().strip())
        print(f.readline().strip())
    5.1,3.5,1.4,0.2,Iris-setosa
    4.9,3.0,1.4,0.2,Iris-setosa
    

ä½ ä¼šå‘ç°ä¸¤æ¬¡ç»“æœæ˜¯ä¸åŒçš„ï¼Œè¿™æ˜¯å› ä¸ºè¿­ä»£å™¨å†…éƒ¨çš„â€œæŒ‡é’ˆâ€å‘åç§»åŠ¨äº†ã€‚

æ€æ ·è·å– / ç§»åŠ¨â€œæŒ‡é’ˆâ€çš„ä½ç½®å‘¢ï¼Ÿä½¿ç”¨ tell() / seek() å‘½ä»¤ã€‚

    with open(datapath, "r", encoding="utf8") as f:
        print(f.tell(), f.readline().strip())
        print(f.tell(), f.readline().strip())
        f.seek(0)  # å›åˆ°æ–‡ä»¶å¤´
        print(f.tell(), f.readline().strip())
    0 5.1,3.5,1.4,0.2,Iris-setosa
    28 4.9,3.0,1.4,0.2,Iris-setosa
    0 5.1,3.5,1.4,0.2,Iris-setosa
    

ç±»
=

ç±»çš„æˆå‘˜åŒ…æ‹¬å±æ€§ï¼ˆ`attribute`ï¼‰ä¸æ–¹æ³•ï¼ˆ`method`ï¼‰ä¸¤ç§ã€‚ä¾‹å­ï¼š

    class MyClass:
        """
        This is a class that can meow!
        """
        animal = "cat"  # An attribute
        def talk(self):  # A method
            return "Meow"
    
    # An instance of the class
    a = MyClass()
    print(a.animal, a.talk())
    cat Meow
    

ä¸Šä¾‹ä¸­çš„ `self` è¡¨ç¤ºç±»çš„å®ä¾‹ï¼Œæ‰€æœ‰ç±»å†…éƒ¨çš„æ–¹æ³•éƒ½éœ€è¦æŠŠè¯¥å‚æ•°æ”¾åœ¨é¦–ä½ï¼ˆä½ ä¹Ÿä¸å¯ä¸ç”¨ self è€Œä½¿ç”¨ this ç­‰ï¼Œä½†æ˜¯ `self` æ˜¯æƒ¯ä¾‹ï¼‰ã€‚ä¾‹å¦‚ï¼Œ`self.animal` å°±è¡¨ç¤ºäº†å®ä¾‹çš„ animal å±æ€§ã€‚è¿™ä¸ C# ç­‰è¯­è¨€ä¸­çš„â€œthis.animalâ€æ˜¯ç±»ä¼¼çš„ã€‚

ä¸‹ä¾‹è¯æ˜äº† `self` ä»£è¡¨çš„å®è´¨æ˜¯ç±»çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯ç±»æœ¬èº«ã€‚

    class EgClass:
        def __init__(self):
            print(self)  # å®ä¾‹ï¼Œæœ‰å¯¹åº”åœ°å€
            print(self.__class__)  # ç±»
    
    a = EgClass()
    <__main__.EgClass object at 0x000002531C0AF860>
    <class '__main__.EgClass'>
    

æ„é€ å‡½æ•°ï¼š`__init__()`
-----------------

ç±»çš„æ„é€ å‡½æ•°æ˜¯ `__init__()` ï¼ˆå·¦å³å‡ä¸ºåŒä¸‹åˆ’çº¿ï¼‰ï¼Œç”¨äºåˆå§‹åŒ–å®ä¾‹ã€‚åœ¨å£°æ˜å®ä¾‹æ—¶ï¼Œè¯¥å‡½æ•°è‡ªåŠ¨è¢«è°ƒç”¨ã€‚

    class MyClass2:
        def __init__(self, animal="cat"):
            self.animal = animal
    
    a = MyClass2("dog")
    a.animal
    'dog'
    

å°è£…
--

ç±»çš„é‡è¦ç‰¹æ€§æ˜¯å°è£…æ€§ï¼Œå³éƒ¨åˆ†å˜é‡åªèƒ½åœ¨å…¶å†…éƒ¨ä¿®æ”¹æˆ–è®¿é—®ï¼Œä¸èƒ½ä»ç±»çš„å¤–éƒ¨è¿›è¡Œå¤„ç†ã€‚Python ä¸­çš„å°è£…éå¸¸ç®€å•ï¼Œåªè¦æŠŠå±æ€§æˆ–æ–¹æ³•çš„åç§°å‰ç¼€è®¾ç½®ä¸ºåŒä¸‹åˆ’çº¿å³å¯ã€‚

ç”±æ­¤å¯è§ï¼Œæ„é€ å‡½æ•° `__init__()` æ˜¯æœ€åŸºæœ¬çš„ä¸€ä¸ªç§æœ‰æ–¹æ³•ã€‚ä¸€ä¸ªä¾‹å­ï¼š

    class MyClass3:
        def __init__(self, animal="cat"):
            self.__animal = animal
            self.__foo()
        def __foo(self):
            self.__animal = "rabbit"
        def show(self):
            print(self.__animal)
    
    a = MyClass3("dog")
    a.show()
    rabbit
    

å¦‚æœæƒ³ç›´æ¥è°ƒç”¨ `__foo() æˆ–è€… __animal`ï¼Œéƒ½ä¼šè¢«ç¦æ­¢ï¼Œäº§ç”Ÿ `AttributeError`ã€‚

    # a.__animal  # AttributeError
    

è¦æ³¨æ„ï¼Œå‰åå‡æ·»åŠ äº†åŒä¸‹åˆ’çº¿çš„å±æ€§ï¼Œå¦‚ **name** ï¼Œè¡¨ç¤ºç‰¹æ®Šå±æ€§è€Œä¸æ˜¯ç§æœ‰å±æ€§ï¼Œæ˜¯å¯ä»¥ä»å¤–éƒ¨è®¿é—®çš„ã€‚

ç»§æ‰¿
--

ä¸‹é¢æ˜¯ä¸€ä¸ªè‘—åçš„çŒ«ä¸ç‹—çš„ä¾‹å­ï¼›ç±» Cat ä¸ Dog éƒ½ç»§æ‰¿è‡ª Animalï¼ŒåŒæ—¶ä¹Ÿéƒ½é‡è½½äº†æ–¹æ³• talk()ã€‚

    class Animal:
        def talk(self):
            pass # è¡¨ç¤ºå®šä¹‰ç•™ç©º
    
    class Cat(Animal): # ä»Animal ç»§æ‰¿
        def talk(self): # é‡å†™talk()
            print('Meow')
    
    class Dog(Animal):
        def talk(self):
            print('Woof')
    
    a, b = Cat(), Dog()
    a.talk() # 'Meow'
    b.talk() # 'Woof'
    Meow
    Woof
    

é€šè¿‡ `isinstance()` å‡½æ•°å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»ï¼ˆæˆ–å…¶å­ç±»ï¼‰çš„å®ä¾‹ï¼š

    print(isinstance(a, Cat), isinstance(a, Animal))
    True True
    æˆ–è€…ï¼š
    
    type(a).__name__
    'Cat'
    

å½“ç„¶ï¼Œç±»ä¹Ÿå¯ä»¥å¤šç»§æ‰¿ã€‚å†™åœ¨å·¦ä¾§çš„ç±»çš„å±æ€§ä¸æ–¹æ³•ï¼Œåœ¨ç»§æ‰¿æ—¶ä¼šè¢«ä¼˜å…ˆé‡‡ç”¨ã€‚ä¾‹å¦‚ï¼š

    class Pet:
        def talk(self):
            print("Pet")
    
    class Cat2(Pet, Cat):
        pass
    
    a = Cat2()
    a.talk()
    Pet
    

@property è£…é¥°å™¨
-------------

è£…é¥°å™¨ `@property` å¯ä»¥è¢«ç”¨äºé™åˆ¶ç±»å±æ€§çš„è¯»å†™è¡Œä¸ºã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œå¦‚æœæƒ³å°è£…ä¸€ä¸ªå±æ€§ï¼Œå´å…è®¸ä»å¤–éƒ¨è¯»å–å®ƒçš„å€¼ï¼Œä¸€èˆ¬æˆ‘ä»¬ç”¨ `getter` å‡½æ•°å®ç°ï¼š

    class Person:
        def __init__(self):
            self.__name = "Py"
        def get_name(self):
            return self.__name
    a = Person()
    a.get_name()
    'Py'
    

ä¸å¾—ä¸è¯´è¿™å®åœ¨æ˜¯éº»çƒ¦äº†ï¼Œä»£ç é‡Œä¸€å † get å‡½æ•°æ»¡å¤©é£å¹¶ä¸ä»¤äººæ„‰å¿«ã€‚è€Œä¸”è¿˜ä¸èƒ½å¿˜è®°å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦åœ¨å°¾éƒ¨åŠ ä¸Šæ‹¬å·ã€‚

è£…é¥°å™¨ `@property` å¯ä»¥å°†ä¸€ä¸ªæ–¹æ³•ä¼ªè£…æˆåŒåçš„å±æ€§ï¼Œå› æ­¤è£…é¥°äº† `getter` å‡½æ•°åï¼Œè°ƒç”¨æ—¶å°±ä¸ç”¨åŠ ä¸Šå°¾éƒ¨çš„æ‹¬å·äº†ï¼š

    class Person:
        def __init__(self):
            self.__name = "Py"
            
        @property
        def name(self):
            return self.__name
    a = Person()
    a.name
    'Py'
    

è€Œä¸”ï¼Œå¦‚æœä½ æƒ³ä»å¤–éƒ¨ä¿®æ”¹è¯¥å±æ€§çš„å€¼ï¼Œä¼šäº§ç”Ÿé”™è¯¯ï¼š

    a.name = 1
    ---------------------------------------------------------------------------
    
    AttributeError                            Traceback (most recent call last)
    
    <ipython-input-97-8c607f2aa25b> in <module>()
    ----> 1 a.name = 1
    
    
    AttributeError: can't set attribute
    

ä½†åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‡å®šå…¶ setter å‡½æ•°ï¼ˆè¯¥è£…é¥°å™¨ @age.setter åœ¨ç”¨ @property è£…é¥° age æ–¹æ³•åä¼šè‡ªåŠ¨ç”Ÿæˆï¼‰ï¼Œè®©å±æ€§ä¿®æ”¹æˆä¸ºå¯èƒ½ï¼Œç”šè‡³é™„åŠ ä¿®æ”¹æ¡ä»¶ï¼š

    class Person:
        def __init__(self):
            self.__age = 20
            
        @property
        def age(self):
            return self.__age
        
        @age.setter
        def age(self, value):
            if not isinstance(value, int):
                raise ValueError("Age should be an integer.")
            else:
                self.__age = value
    a = Person()
    a.age = 30
    a.age
    30
    

ä¸ä¼ å…¥æ•´æ•°ä¼šæŠ¥é”™ï¼š

    a.age = 0.5
    ---------------------------------------------------------------------------
    
    ValueError                                Traceback (most recent call last)
    
    <ipython-input-100-001bfa8fe26b> in <module>()
    ----> 1 a.age = 0.5
    
    
    <ipython-input-98-83364d5faa13> in age(self, value)
         10     def age(self, value):
         11         if not isinstance(value, int):
    ---> 12             raise ValueError("Age should be an integer.")
         13         else:
         14             self.__age = value
    
    
    ValueError: Age should be an integer.
    

ç±»çš„ç‰¹æ®Šå±æ€§ä¸æ–¹æ³•
---------

### å±æ€§ `__dict__`

é¦–å…ˆæ˜¯ `__dict__`å±æ€§ï¼Œç”¨äºæŸ¥çœ‹ç±»çš„å±æ€§ä¸æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå­—å…¸ã€‚

    a = MyClass()
    MyClass.__dict__
    mappingproxy({'__dict__': <attribute '__dict__' of 'MyClass' objects>,
                  '__doc__': '\n    This is a class that can meow!\n    ',
                  '__module__': '__main__',
                  '__weakref__': <attribute '__weakref__' of 'MyClass' objects>,
                  'animal': 'cat',
                  'talk': <function __main__.MyClass.talk>})
    

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ—¶å®ä¾‹ a çš„å±æ€§æ²¡æœ‰è¢«æ›´æ”¹è¿‡ï¼Œå®ä¾‹çš„ **dict** æ˜¯ä¸€ä¸ªç©ºå­—å…¸ï¼š

    print(a.__dict__, a.animal)
    {} cat
    

ç±»çš„ `__dict__` æ–¹æ³•ä¸‹çš„åŒåé”®ï¼Œä¸å®ä¾‹å…·æœ‰ç›¸åŒå€¼ã€‚

    MyClass.__dict__["animal"]
    'cat'
    

ä¸€æ—¦è¢«ä»å¤–éƒ¨æ›´æ”¹ï¼Œå®ä¾‹ a çš„ **dict** å­—å…¸å°±ä¸å†ä¸ºç©ºã€‚

    a.animal = "dog"
    print(a.__dict__, a.animal)
    {'animal': 'dog'} dog
    

### å±æ€§ `__slots__`

ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œéç§æœ‰çš„ç±»å±æ€§å¯ä»¥ä»å¤–éƒ¨æ›´æ”¹å€¼ï¼Œè€Œä¸”å±æ€§è¿˜èƒ½ç›´æ¥ä»å¤–éƒ¨å¢åŠ ã€‚**slots** å±æ€§çš„ä½œç”¨å°±åœ¨äºä½¿ç±»çš„å±æ€§ä¸èƒ½ä»å¤–éƒ¨è¿›è¡Œæ›´æ”¹ã€è¿½åŠ ã€‚å®ƒèƒ½å¤Ÿé™åˆ¶å±æ€§æ»¥ç”¨ï¼Œå¹¶åœ¨ä¼˜åŒ–å†…å­˜ä¸Šä¹Ÿæœ‰æ„ä¹‰ã€‚

    class MySlotClass():
        __slots__ = ("meow", "woof")
        def __init__(self):
            self.meow = "Meow"
            self.woof = "Woof"
        
    a = MySlotClass()
    MySlotClass.__dict__
    mappingproxy({'__doc__': None,
                  '__init__': <function __main__.MySlotClass.__init__>,
                  '__module__': '__main__',
                  '__slots__': ('meow', 'woof'),
                  'meow': <member 'meow' of 'MySlotClass' objects>,
                  'woof': <member 'woof' of 'MySlotClass' objects>})
    

æ­¤æ—¶ï¼Œå¦‚æœä½¿ç”¨ `a.__dict__`ï¼Œç»“æœä¸ä¼šè¿”å›ç©ºå­—å…¸ï¼Œè€Œæ˜¯ä¼šæŠ¥é”™ã€‚

### è¿ç®—ç¬¦é‡è½½

ç‰¹åˆ«åœ°ï¼ŒPython æä¾›äº†è¿ç®—ç¬¦é‡è½½çš„åŠŸèƒ½ã€‚å¸¸ç”¨çš„å¯¹åº”å¦‚ä¸‹ï¼ˆå‚è€ƒ å®˜æ–¹é¡µé¢ï¼‰ï¼š

æ–¹æ³• å«ä¹‰ åº”ç”¨  
ä¸€å…ƒè¿ç®—ç¬¦  
**len** é•¿åº¦ len(a)  
**bool** é€»è¾‘å€¼ bool(a)  
**neg** å–è´Ÿå€¼ -a  
**str** / **repr** å­—ç¬¦ä¸²å½¢å¼ repr(a) / str(a), print(a)  
äºŒå…ƒè¿ç®—ç¬¦  
**add** åŠ  a + b, a += b  
**sub** å‡ a - b, a -= b  
**mul** ä¹˜ a \* b, a \*= b  
**div** é™¤ a / b, a /= b  
**pow** ä¹˜æ–¹ a \*\* b, a \*\*= b  
**radd** å·¦åŠ  â€¦ + a  
äºŒå…ƒå…³ç³»ç¬¦  
**lt** / **le** å°äº / å°äºç­‰äº a < b, a <= b  
**gt** / **ge** å¤§äº / å¤§äºç­‰äº a > b, a >= b  
**eq** / **ne** ç­‰äº / ä¸ç­‰äº a == b, a != b  
æ¯”å¦‚ä¸‹ä¾‹ä¸­ï¼Œå¯¹å¤šä¸ªè¿ç®—è¿›è¡Œäº†é‡è½½ï¼Œå®Œæˆäº†äºŒç»´å‘é‡åœ¨åŠ å‡æ³•ä¸Šä¸å‘é‡ã€ä¸æ•°è¿ç®—çš„åŸºæœ¬å®šä¹‰ã€‚

    class Vector:
        def __init__(self, a, b):
            self.a = a
            self.b = b
       
        def __add__(self, another):
            if isinstance(another, Vector):
                c, d = another.a, another.b
            else:
                c, d = another, another
            return Vector(self.a + c, self.b + d)
        
        def __radd__(self, another):
            return self.__add__(another)
        
        def __neg__(self):
            return Vector(-self.a, -self.b)
        
        def __sub__(self, another):
            return self.__add__(-another)
        
        def __str__(self):
            return "Vector({},{})".format(self.a, self.b)
    
    v1 = Vector(0,3)
    v2 = Vector(5,-2)
    print(v1 - 1, -v2, v1 + v2, v1 - v2)
    Vector(-1,2) Vector(-5,2) Vector(5,1) Vector(-5,5)
    

å…¶ä¸­ï¼Œ`__repr__()` ä¸ `__str__()` çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå‰è€…åœ¨äº¤äº’å¼æ­¥éª¤ä¸­æ˜¾ç¤ºç»“æœï¼Œåè€…åœ¨ print å‡½æ•°ä¸­æ˜¾ç¤ºç»“æœã€‚

ä¾‹å¦‚ä¸Šä¾‹ï¼Œå¦‚æœç›´æ¥è¾“å…¥ v1ï¼Œä¸ä¼šä»¥ â€œVector(0,3)â€çš„å½¢å¼æ˜¾ç¤ºã€‚

    v1  # åœ¨ç±»ä¸­é™„åŠ å®šä¹‰ï¼š __repr__ = __str__ å³å¯è§£å†³é—®é¢˜ã€‚
    <__main__.Vector at 0x2531c129c88>
    

è¿­ä»£è¡Œä¸º
----

åœ¨ç±»ä¸­ä¹Ÿèƒ½å®šä¹‰è¿­ä»£è¡Œä¸ºï¼Œéœ€è¦ **iter**() ä¸ **next**() æ–¹æ³•ã€‚

    # è¯¥ä¾‹æ”¹ç¼–è‡ªå®˜æ–¹æ–‡æ¡£
    class MyClass4:
        def __init__(self, lst):
            self.data = lst
            self.__index = len(lst)
        def __iter__(self):
            return self
        def __next__(self):
            if self.__index == 0:
                raise StopIteration
            self.__index -= 1
            return self.data[self.__index]
    
    a = MyClass4("Meow")
    for char in a:
        print(char)
    w
    o
    e
    M
    

å¸¸ç”¨æ¨¡å—
====

ä¸‹é¢ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„ Python æ ‡å‡†æ¨¡å—ï¼ˆå³éš Python å®‰è£…çš„æ¨¡å—ï¼‰ã€‚æ›´å¤šçš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä¾‹å¦‚ NumPy, pandas, matplotlibï¼Œå¯ä»¥å‚è€ƒæœ¬ç³»åˆ—åšæ–‡çš„å…¶ä»–æ–‡ç« ã€‚

os æ¨¡å—
-----

è¿™ä¸ªæ¨¡å—åº”è¯¥æ˜¯ Python è‡ªå¸¦æ¨¡å—ä¸­ä½¿ç”¨ç‡æœ€é«˜çš„ä¸€ä¸ªäº†ã€‚ä¸€äº›ä¾‹å­ï¼š

    # import os
    #
    # ----- æ–‡ä»¶æ“ä½œ -----
    # os.rename("old.py", "new.py")  # é‡å‘½å
    # os.remove("a.py")  # åˆ é™¤
    # os.stat("b.py")  # æŸ¥çœ‹æ–‡ä»¶å±æ€§
    #
    # ----- è·¯å¾„æ“ä½œ -----
    # os.getcwd()  # è·å–å½“å‰ç›®å½•
    # os.chdir(r"d:\list")  # æ›´æ”¹å½“å‰ç›®å½•ä¸º
    # os.chdir(os.pardir)  # è¿”å›ä¸Šä¸€çº§ç›®å½•
    # os.mkdir('newfolder ')  # åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹
    # os.listdir('c:\list')  # åˆ—å‡ºæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶çš„åˆ—è¡¨
    # os.removedirs('thefolder ')  # åˆ é™¤ç©ºæ–‡ä»¶å¤¹
    # os.path.isfile/ispath("f")  # æ£€æŸ¥è·¯å¾„æ˜¯æ–‡ä»¶æˆ–æ˜¯ç›®å½•
    # os.path.exists("f")  # æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨
    # 
    # ----- æ“ä½œå¹³å°ç›¸å…³ -----
    # os.sep  # å½“å‰æ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦
    # os.linesep  # å½“å‰æ“ä½œç³»ç»Ÿçš„æ¢è¡Œç¬¦
    # os.path.join(r"c:\abc", "d")  # è¿æ¥å­—ä¸²æˆä¸ºè·¯å¾„
    

sys æ¨¡å—
------

ä¸€èˆ¬æˆ‘å¾ˆå°‘ç”¨åˆ°è¿™ä¸ªæ¨¡å—ã€‚å¯èƒ½æœ‰è¿™ä¹ˆå‡ ä¸ªå‘½ä»¤ä¼šç”¨åˆ°ï¼š

*   sys.argvï¼šèƒ½å¤Ÿä¼ é€’ä»å‘½ä»¤è¡Œæ¥å—çš„å‚æ•°åˆ°ä»£ç å†…ã€‚
*   sys.platformï¼šå½“å‰æ“ä½œç³»ç»Ÿå¹³å°ã€‚
*   sys.exit()ï¼šæ— å‚æ•°æ—¶æŠ›å‡º SystemExit é”™è¯¯å¹¶é€€å‡ºï¼›æœ‰å‚æ•°æ—¶ä¼šåœ¨é€€å‡ºå‰è¾“å‡ºå¯¹åº”çš„å­—ç¬¦ä¸²åˆ°å±å¹•ã€‚

    import sys
    sys.platform
    'win32'
    

ä¸€ä¸ª `sys.argv` çš„ä¾‹å­ï¼š

    sys.argv
    ['e:\\python\\lib\\site-packages\\ipykernel_launcher.py',
     '-f',
     'C:\\Users\\wklchris\\AppData\\Roaming\\jupyter\\runtime\\kernel-3724c4c9-2130-485d-b388-7a84379fd043.json']
    

ä»¥ä¸Šä¸æ˜¯å…¸å‹çš„ä¾‹å­ï¼Œå› ä¸ºå¹¶ä¸æ˜¯åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œçš„ã€‚å‘½ä»¤è¡Œä¸‹é€šå¸¸æœ‰å¦‚ä¸‹æ ¼å¼ï¼š

    python test.py hello
    

æ­¤æ—¶ï¼Œsys.argv\[0\] = test.pyï¼Œsys.argv\[1\] = hello.

re æ¨¡å—ï¼šæ­£åˆ™è¡¨è¾¾å¼
-----------

å‚è€ƒæœ¬æ–‡é™„å½•ã€‚

å…¶ä»–æ¨¡å—
----

*   collection æ¨¡å—ï¼š
    *   æä¾›äº†ä¸€ç§åŒç«¯åˆ—è¡¨ dequeï¼Œå¯ä»¥ç”¨ appendleft, extendleft, popleft ç­‰æ–¹æ³•ä» deque çš„å·¦ä¾§ï¼ˆä¹Ÿå°±æ˜¯lst\[0\]ï¼‰è¿›è¡Œæ“ä½œã€‚æ³¨æ„ï¼Œdeque çš„æ›´æ–°æ“ä½œæ¯” list æ›´å¿«ï¼Œä½†è¯»å–æ“ä½œæ¯” list æ…¢ã€‚
    *   æä¾›äº†ä¸€ç§ç¼ºçœå­—å…¸`defaultdict`ï¼Œå¯ä»¥ç›´æ¥æ“ä½œé”®å€¼ï¼ˆå³ä½¿è¿™ä¸ªé”®å…ˆå‰æœªå®šä¹‰ï¼‰ï¼›é¦–æ¬¡æ“ä½œæ—¶ä¼šèµ‹ä¸€ä¸ªåˆç†çš„åˆå€¼ï¼Œæ¯”å¦‚é¦–æ¬¡è°ƒç”¨ d\["a"\] += 1 è€Œå­—å…¸æœ¬èº«æ²¡æœ‰ â€œaâ€ é”®æ—¶ï¼Œä¼šè‡ªåŠ¨åˆå§‹åŒ– â€œaâ€ é”®å¹¶èµ‹åˆå€¼ 0ã€‚
*   calendar æ¨¡å—ï¼šåˆ¤æ–­æ˜ŸæœŸã€é—°å¹´ï¼Œè¾“å‡ºæ—¥å†ç­‰ç­‰ã€‚
*   itertools æ¨¡å—ï¼šåœ¨æœ¬æ–‡â€œè¿­ä»£å™¨â€å°èŠ‚å·²è¿›è¡Œäº†ç®€è¦ä»‹ç»ã€‚
*   logging æ¨¡å—ï¼šåœ¨è°ƒè¯•ä¸­å¯èƒ½ä¼šä½¿ç”¨ã€‚
*   urllib æ¨¡å—ï¼šè¿™æ˜¯ä¸€ä¸ª HTML è¯·æ±‚æ¨¡å—ï¼Œå¸¸ç”¨äºçˆ¬è™«ã€‚

è°ƒè¯•ä¸æµ‹è¯•
=====

Python ä¸­æœ‰ä¸€äº›å†…ç½®çš„åŠæ³•è¿›è¡Œè°ƒè¯•ä¸æµ‹è¯•ã€‚

æ–­è¨€ï¼šassert
---------

æ–­è¨€çš„å«ä¹‰åœ¨äºï¼Œå¦‚æœæ–­è¨€å¤±è´¥ï¼ˆFalseï¼‰ï¼Œé‚£ä¹ˆä»£ç ä¼šè¢«ç»ˆæ­¢ï¼ˆæŠ›å‡ºä¸€ä¸ª`AssertionError`ï¼‰ã€‚æ¯”å¦‚ï¼š

    n = 0
    assert(n != 0)
    1 / n
    ---------------------------------------------------------------------------
    
    AssertionError                            Traceback (most recent call last)
    
    <ipython-input-112-e53f92f6c644> in <module>()
          1 n = 0
    ----> 2 assert(n != 0)
          3 1 / n
    
    
    AssertionError: 
    

ä¸å¤§å®¶ä¸€è´¯å–œæ¬¢ä½¿ç”¨çš„ print è°ƒè¯•æ³•ç›¸æ¯”ï¼Œæ–­è¨€è¯­å¥å¯ä»¥ç”¨å‘½ä»¤è¡Œå‚æ•° -O å¿½ç•¥ã€‚è¿™æ ·æ‰€æœ‰çš„ assert() è¯­å¥éƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚

    $ python -O main.py
    

æ—¥å¿—è°ƒè¯•ï¼šlogging æ¨¡å—
---------------

logging æ¨¡å—æ”¯æŒå°†é”™è¯¯æ—¥å¿—è¾“å‡ºï¼ˆåˆ°æ§åˆ¶å°æˆ–è€…åˆ°æ–‡ä»¶ï¼‰ã€‚

æ­¤ä¹ƒè°ƒè¯•ç¥å™¨ã€‚å»¶ä¼¸é˜…è¯»ï¼š logging å®˜æ–¹åŸºç¡€æ•™ç¨‹ã€‚

    import logging
    # è¯¥è¡Œä¹Ÿå¯èƒ½é€šè¿‡æ§åˆ¶å°ï¼š$ python main.py --log=WARNING çš„æ–¹å¼å®ç°
    logging.basicConfig(level=logging.WARNING)
    n = 0
    logging.warning("n = {}".format(n))
    WARNING:root:n = 0
    

logging æ¨¡å—çš„çµæ´»ä¹‹å¤„åœ¨äºä½ å¯ä»¥è®°å½•ä¿¡æ¯çš„çº§åˆ«ï¼ˆ`DEBUGï¼ŒINFOï¼ŒWARNINGï¼ŒERRORï¼ŒCRITICAL`ï¼‰ï¼Œå„çº§åˆ«çš„ä½œç”¨å¦‚ä¸‹ï¼š

*   DEBUGï¼šæœ€è¯¦ç»†çš„çº§åˆ«ï¼Œæ‰€æœ‰è¯¦ç»†æ—¥å¿—éƒ½ä¼šè¢«è¾“å‡ºã€‚
*   INFOï¼šæ£€æµ‹ä»£ç æ˜¯å¦æŒ‰ç…§é¢„æœŸæ‰§è¡Œã€‚
*   WARNINGï¼šéé¢„æœŸçš„äº‹ä»¶å‘ç”Ÿäº†ï¼Œæˆ–è€…å¯èƒ½åœ¨è¿‘æœŸå‘ç”Ÿï¼ˆä¾‹å¦‚ï¼šä½ç£ç›˜ç©ºé—´ï¼‰ã€‚ä½†ä»£ç ä»ç„¶æ‰§è¡Œã€‚
*   ERRORï¼šå‘ç”Ÿäº†çº§åˆ«æ›´é«˜çš„é—®é¢˜ï¼ŒæŸäº›åŠŸèƒ½æ— æ³•æ­£å¸¸å®ç°ã€‚
*   CRITICALï¼šä¸¥é‡é”™è¯¯ï¼Œä»£ç å¯èƒ½æ— æ³•ç»§ç»­è¿è¡Œã€‚  
    é€šè¿‡ `filename` å‚æ•°ï¼Œå¯ä»¥å°†æ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶ã€‚ä¸€èˆ¬ä½¿ç”¨ `DEBUG` çº§åˆ«ï¼Œå³è¾“å‡ºæ‰€æœ‰ä¿¡æ¯ã€‚

    # logging.basicConfig(filename="log.log", level=logging.DEBUG)
    

é»˜è®¤ä¼šå°†æ—¥å¿—è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼Œå¦‚æœæƒ³è¦è¦†å†™æ–‡ä»¶è€Œä¸æ˜¯è¿½åŠ ï¼Œä½¿ç”¨ filemode å‚æ•°ï¼š

    # logging.basicConfig(filename="log.log", filemode="w", level=logging.DEBUG)
    

æ›´æ”¹æ—¥å¿—æ ¼æ ¼å¼ï¼Œä½¿ç”¨ format å‚æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¸¸ç”¨çš„æ ¼å¼ç ï¼ˆæ ¼å¼ç ååŠ  s è¡¨ç¤ºå­—ç¬¦ä¸²ï¼‰æœ‰ï¼š

*   `%(levelname)`ï¼šå½“å‰æ—¥å¿—å­—ä¸²çº§åˆ«ã€‚
*   `%(message)`ï¼šå½“å‰æ—¥å¿—å­—ä¸²ã€‚
*   `%(asctime)`ï¼šå½“å‰æ—¶é—´ã€‚é»˜è®¤ datefmt å‚æ•°ä¸º `%Y-%m-%d %I:%M:%S`  
    ä¾‹å­ã€‚ä¸‹ä¾‹ä¼šè¾“å‡ºå½¢å¦‚ï¼šâ€01/23/1900 08:05:05 PM is when this event was logged.â€ è¿™æ ·çš„æ ¼å¼ã€‚

    # logging.basicConfig(format='%(asctime)s %(message)s', datefmt='%m/%d/%Y %I:%M:%S %p')
    # logging.warning('is when this event was logged.')
    # å¸¸ç”¨çš„æ ¼å¼ï¼š
    # logging.basicConfig(format="%(levelname)s: %(message)s")
    

è¿˜å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥ä»£æ›¿ basicConfig å‘½ä»¤ï¼Œå¹¶è¿›è¡Œè®¾ç½® logger ç­‰æ›´é«˜çº§çš„é…ç½®ã€‚è¿™éƒ¨åˆ†å¯ä»¥å‚è€ƒï¼šæ­¤å¤„ã€‚

    # import logging.config
    
    # logging.config.fileConfig('logging.conf')
    

é™„å½•ï¼šæ­£åˆ™è¡¨è¾¾å¼
========

æ­£åˆ™è¡¨è¾¾å¼çš„åŸºç¡€å†…å®¹å‚è€ƒæœ¬åšå®¢çš„è¿™ç¯‡åšæ–‡ï¼šæ­£åˆ™è¡¨è¾¾å¼ã€‚æ³¨æ„ï¼šå¦‚æœè¦ä¿å­˜ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¾›å¤šæ¬¡ä½¿ç”¨ï¼Œè¯·å­˜å‚¨å…¶ `compile` åçš„ç»“æœï¼Œé¿å…åå¤ç¼–è¯‘ã€‚

*   re.compile(exp)ï¼šç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ã€‚
*   re.compile(exp).match(str)ï¼šåˆ¤æ–­æ­£åˆ™è¡¨è¾¾å¼èƒ½å¦åŒ¹é…ä¸€ä¸ªå­—ä¸²ã€‚å¯ä»¥ bool() ç»“æœæ¥è·çŸ¥æ˜¯å¦åŒ¹é…ã€‚
    *   re.compile(exp).match(str).groups()ï¼šå°†åŒ¹é…ç»“æœè¿”å›ä¸ºå•ä¸ªå­—ç¬¦ä¸²ï¼ˆæ— å­ç»„æ—¶ï¼‰æˆ–å…ƒç»„ï¼ˆæœ‰å­ç»„æ—¶ï¼‰ã€‚
    *   re.compile(exp).findall(str)ï¼šæ‰¾å‡ºå­—ç¬¦ä¸²ä¸­æ‰€æœ‰åŒ¹é…è¡¨è¾¾å¼çš„å­ä¸²ã€‚è¿”å›åˆ—è¡¨ã€‚
*   re.split(exp, str)ï¼šç”¨è¡¨è¾¾å¼æ¥åˆ†å‰²å­—ç¬¦ä¸²ï¼Œç›¸å½“äº str.split() çš„å¢å¼ºç‰ˆã€‚

    import re
    bool(re.match(r"\d", "1"))
    True
    phone_re = re.compile(r'\d{3,4}-\d{7,8}')
    phone_re.match('010-12345678').group()
    '010-12345678'
    # å¦‚æœåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æ·»åŠ äº†å­ç»„ï¼ˆå°æ‹¬å·ï¼‰ï¼Œé‚£ä¹ˆä¼šè¿”å›å­ç»„ä¾é¡ºåºç»„æˆçš„ä¸€ä¸ªå…ƒç»„
    phone_re = re.compile(r'(\d{3,4})-(\d{7,8})')
    phone_re.match('010-12345678').groups()
    ('010', '12345678')
    phone_re = re.compile(r'\d{3,4}-\d{7,8}')  # å¯»æ‰¾æ‰€æœ‰å­ä¸²
    phone_set = '010-12345678, 021-65439876 '
    phone_re.findall(phone_set)
    ['010-12345678', '021-65439876']
    s = 'a b   c'  # ç”¨ re.split() å¤„ç†è¿ç»­çš„ç©ºæ ¼
    print(s.split(' '), re.split(r"\s+", s))
    ['a', 'b', '', '', 'c'] ['a', 'b', 'c']