---
layout: post
title: "Rustæç®€æ•™ç¨‹"
date: "2022-03-29T03:35:43.662Z"
---
Rustæç®€æ•™ç¨‹
========

ç›®å½•

*   [ç®€ä»‹](#ç®€ä»‹)
    *   [ç‰¹æ€§](#ç‰¹æ€§)
    *   [ç‰¹å¾](#ç‰¹å¾)
    *   [ç”¨é€”](#ç”¨é€”)
*   [å®‰è£…](#å®‰è£…)
*   [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
*   [å¸¸ç”¨å‘½ä»¤](#å¸¸ç”¨å‘½ä»¤)
*   [åŸºç¡€è¯­æ³•](#åŸºç¡€è¯­æ³•)
    *   [æ•°æ®ç±»å‹](#æ•°æ®ç±»å‹)
        *   [æ ‡é‡ç±»å‹](#æ ‡é‡ç±»å‹)
        *   [å¤åˆç±»å‹](#å¤åˆç±»å‹)
        *   [ç¤ºä¾‹](#ç¤ºä¾‹)
    *   [æ¡ä»¶è¯­å¥](#æ¡ä»¶è¯­å¥)
    *   [å¾ªç¯](#å¾ªç¯)
    *   [è¾“å‡º&è¾“å…¥](#è¾“å‡ºè¾“å…¥)
        *   [è¾“å‡º](#è¾“å‡º)
            *   [è¾“å‡ºèŠ±æ‹¬å·](#è¾“å‡ºèŠ±æ‹¬å·)
            *   [è¾“å‡ºéåŸºç¡€ç±»å‹](#è¾“å‡ºéåŸºç¡€ç±»å‹)
        *   [è¾“å…¥](#è¾“å…¥)
*   [æ‰€æœ‰æƒ](#æ‰€æœ‰æƒ)
*   [åˆ‡ç‰‡](#åˆ‡ç‰‡)
*   [ç»“æ„ä½“](#ç»“æ„ä½“)
*   [æšä¸¾](#æšä¸¾)
    *   [Match](#match)
    *   [If-let](#if-let)
    *   [Option](#option)
*   [é›†åˆ](#é›†åˆ)
    *   [vectorå®¹å™¨](#vectorå®¹å™¨)
    *   [String](#string)
*   [ä»£ç ç»„ç»‡](#ä»£ç ç»„ç»‡)
    *   [å‘½åç©ºé—´](#å‘½åç©ºé—´)
    *   [è®¿é—®å…¶ä»–modå’Œcrate](#è®¿é—®å…¶ä»–modå’Œcrate)
        *   [è®¿é—®æƒé™å’Œå…³é”®å­—](#è®¿é—®æƒé™å’Œå…³é”®å­—)
        *   [è®¿é—®å…¶ä»–æ–‡ä»¶ä¸­çš„å¯¹è±¡](#è®¿é—®å…¶ä»–æ–‡ä»¶ä¸­çš„å¯¹è±¡)
    *   [ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“](#ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“)
*   [å¼‚å¸¸å¤„ç†](#å¼‚å¸¸å¤„ç†)
*   [æ³›å‹](#æ³›å‹)
    *   [æ³›å‹æ¦‚å¿µ](#æ³›å‹æ¦‚å¿µ)
*   [ç‰¹æ€§ï¼ˆæ¥å£ï¼‰](#ç‰¹æ€§æ¥å£)
*   [æ–‡ä»¶å’ŒIO](#æ–‡ä»¶å’Œio)
*   [é¢å‘å¯¹è±¡](#é¢å‘å¯¹è±¡)
*   [å¹¶å‘ç¼–ç¨‹](#å¹¶å‘ç¼–ç¨‹)
    *   [çº¿ç¨‹](#çº¿ç¨‹)
    *   [æ¶ˆæ¯ä¼ é€’](#æ¶ˆæ¯ä¼ é€’)
    *   [äº’æ–¥é”](#äº’æ–¥é”)
*   [ä»£ç ](#ä»£ç )
*   [è¯´æ˜](#è¯´æ˜)
*   [å¼•ç”¨](#å¼•ç”¨)

ç®€ä»‹
==

Rustæ˜¯ä¸€é—¨èµ‹äºˆæ¯ä¸ªäººæ„å»ºå¯é ä¸”é«˜æ•ˆè½¯ä»¶èƒ½åŠ›çš„ç¼–ç¨‹è¯­è¨€ã€‚å¯é ä¸»è¦ä½“ç°åœ¨å®‰å…¨æ€§ä¸Šã€‚å…¶é«˜æ•ˆä¸ä»…é™äºå¼€å‘æ•ˆç‡ï¼Œå®ƒçš„æ‰§è¡Œæ•ˆç‡ä¹Ÿæ˜¯ä»¤äººç§°èµçš„ï¼Œæ˜¯ä¸€ç§å°‘æœ‰çš„å…¼é¡¾å¼€å‘æ•ˆç‡å’Œæ‰§è¡Œæ•ˆç‡çš„è¯­è¨€ã€‚Rust è¯­è¨€ç”± Mozilla å¼€å‘ï¼Œæœ€æ—©å‘å¸ƒäº 2014 å¹´ 9 æœˆã€‚Rust çš„ç¼–è¯‘å™¨æ˜¯åœ¨ MIT License å’Œ Apache License 2.0 åŒé‡åè®®å£°æ˜ä¸‹çš„å…è´¹å¼€æºè½¯ä»¶ã€‚

![](https://img2022.cnblogs.com/blog/718864/202203/718864-20220322225451146-1012328002.png)

ç‰¹æ€§
--

*   é«˜æ€§èƒ½ï¼šRust é€Ÿåº¦æƒŠäººä¸”å†…å­˜åˆ©ç”¨ç‡æé«˜ã€‚ç”±äºæ²¡æœ‰è¿è¡Œæ—¶å’Œåƒåœ¾å›æ”¶ï¼Œå®ƒèƒ½å¤Ÿèƒœä»»å¯¹æ€§èƒ½è¦æ±‚ç‰¹åˆ«é«˜çš„æœåŠ¡ï¼Œå¯ä»¥åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šè¿è¡Œï¼Œè¿˜èƒ½è½»æ¾å’Œå…¶ä»–è¯­è¨€é›†æˆã€‚
    
*   å¯é æ€§ï¼šRust ä¸°å¯Œçš„ç±»å‹ç³»ç»Ÿå’Œæ‰€æœ‰æƒæ¨¡å‹ä¿è¯äº†å†…å­˜å®‰å…¨å’Œçº¿ç¨‹å®‰å…¨ï¼Œè®©æ‚¨åœ¨ç¼–è¯‘æœŸå°±èƒ½å¤Ÿæ¶ˆé™¤å„ç§å„æ ·çš„é”™è¯¯ã€‚
    
*   ç”Ÿäº§åŠ›ï¼šRust æ‹¥æœ‰å‡ºè‰²çš„æ–‡æ¡£ã€å‹å¥½çš„ç¼–è¯‘å™¨å’Œæ¸…æ™°çš„é”™è¯¯æç¤ºä¿¡æ¯ï¼Œ è¿˜é›†æˆäº†ä¸€æµçš„å·¥å…·â€”â€”åŒ…ç®¡ç†å™¨å’Œæ„å»ºå·¥å…·ï¼Œ æ™ºèƒ½åœ°è‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€éªŒçš„å¤šç¼–è¾‘å™¨æ”¯æŒï¼Œ ä»¥åŠè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ç­‰ç­‰ã€‚
    
*   Rustaceanï¼šä½¿ç”¨ rust çš„æ”»åŸç‹®ä¸å« ruster è€Œæ˜¯å« Rustacean ï¼Œå’±ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œä¹¦ä¸Šå°±æ˜¯è¿™ä¹ˆè¯´çš„ã€‚
    

ç‰¹å¾
--

*   ä½œä¸ºä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œrustæ—¢å¯ä»¥åˆ†ç±»ä¸ºé¢å‘è¿‡ç¨‹ç¼–ç¨‹è¯­è¨€ï¼Œä¹Ÿå¯ä»¥åˆ†ç±»ä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€
*   rustæ‹¥æœ‰ç²¾ç»†åŒ–çš„åŸºç¡€æ•°æ®ç»“æ„
*   rustä¸­æ”¯æŒæ³›å‹ï¼Œå¹¶ä¸”æ‹¥æœ‰æ³›å‹æšä¸¾
*   rustä¸­æ”¯æŒæ¥å£ï¼Œç”šè‡³æ”¯æŒæ¥å£é»˜è®¤æ–¹æ³•ï¼Œå¹¶ä¸”æ¥å£æ—¢å¯ä»¥ä½œä¸ºæ–¹æ³•å…¥å‚ä¹Ÿå¯ä»¥ä½œä¸ºæ–¹æ³•å‡ºå‚

ç”¨é€”
--

*   ä¼ ç»Ÿå‘½ä»¤è¡Œç¨‹åº
*   åµŒå…¥å¼
*   ç½‘ç»œæœåŠ¡
*   WebAssembly
*   WebæœåŠ¡
*   ......

å®‰è£…
==

> ä»¥ windows 11 ä¸ºä¾‹

ä¸‹è½½ rustup-init.exe ï¼ŒåŒå‡»æ­¤å¯æ‰§è¡Œç¨‹åºä¼šæ‰“å¼€ä¸€ä¸ªå‘½ä»¤è¡Œç¨‹åºï¼Œæ­¤ç¨‹åºå¼•å¯¼å®‰è£…ï¼Œå…·ä½“å®‰è£…è¿‡ç¨‹ï¼š

    Rust Visual C++ prerequisites
    
    Rust requires the Microsoft C++ build tools for Visual Studio 2013 or
    later, but they don't seem to be installed.
    
    The easiest way to acquire the build tools is by installing Microsoft
    Visual C++ Build Tools 2019 which provides just the Visual C++ build
    tools:
    
      https://visualstudio.microsoft.com/visual-cpp-build-tools/
    
    Please ensure the Windows 10 SDK and the English language pack components
    are included when installing the Visual C++ Build Tools.
    
    Alternately, you can install Visual Studio 2019, Visual Studio 2017,
    Visual Studio 2015, or Visual Studio 2013 and during install select
    the "C++ tools":
    
      https://visualstudio.microsoft.com/downloads/
    
    Install the C++ build tools before proceeding.
    
    If you will be targeting the GNU ABI or otherwise know what you are
    doing then it is fine to continue installation without the build
    tools, but otherwise, install the C++ build tools before proceeding.
    
    Continue? (y/N) y
    
    
    Welcome to Rust!
    
    This will download and install the official compiler for the Rust
    programming language, and its package manager, Cargo.
    
    Rustup metadata and toolchains will be installed into the Rustup
    home directory, located at:
    
      C:\Users\cml\.rustup
    
    This can be modified with the RUSTUP_HOME environment variable.
    
    The Cargo home directory located at:
    
      C:\Users\cml\.cargo
    
    This can be modified with the CARGO_HOME environment variable.
    
    The cargo, rustc, rustup and other commands will be added to
    Cargo's bin directory, located at:
    
      C:\Users\cml\.cargo\bin
    
    This path will then be added to your PATH environment variable by
    modifying the HKEY_CURRENT_USER/Environment/PATH registry key.
    
    You can uninstall at any time with rustup self uninstall and
    these changes will be reverted.
    
    Current installation options:
    
    
       default host triple: x86_64-pc-windows-msvc
         default toolchain: stable (default)
                   profile: default
      modify PATH variable: yes
    
    1) Proceed with installation (default)
    2) Customize installation
    3) Cancel installation
    >
    
    info: profile set to 'default'
    info: default host triple is x86_64-pc-windows-msvc
    info: syncing channel updates for 'stable-x86_64-pc-windows-msvc'
    info: latest update on 2022-01-20, rust version 1.58.1 (db9d1b20b 2022-01-20)
    info: downloading component 'cargo'
      3.8 MiB /   3.8 MiB (100 %)   1.7 MiB/s in  2s ETA:  0s
    info: downloading component 'clippy'
      1.6 MiB /   1.6 MiB (100 %)   1.5 MiB/s in  1s ETA:  0s
    info: downloading component 'rust-docs'
     18.8 MiB /  18.8 MiB (100 %)   3.3 MiB/s in  5s ETA:  0s
    info: downloading component 'rust-std'
     22.9 MiB /  22.9 MiB (100 %)   3.2 MiB/s in  7s ETA:  0s
    info: downloading component 'rustc'
     65.2 MiB /  65.2 MiB (100 %) 493.2 KiB/s in  1m 14s ETA:  0s
    info: downloading component 'rustfmt'
      2.2 MiB /   2.2 MiB (100 %) 631.2 KiB/s in  3s ETA:  0s
    info: installing component 'cargo'
    info: installing component 'clippy'
    info: installing component 'rust-docs'
     18.8 MiB /  18.8 MiB (100 %)   1.9 MiB/s in  6s ETA:  0s
    info: installing component 'rust-std'
     22.9 MiB /  22.9 MiB (100 %)  10.5 MiB/s in  2s ETA:  0s
    info: installing component 'rustc'
     65.2 MiB /  65.2 MiB (100 %)  12.2 MiB/s in  5s ETA:  0s
    info: installing component 'rustfmt'
    info: default toolchain set to 'stable-x86_64-pc-windows-msvc'
    
      stable-x86_64-pc-windows-msvc installed - rustc 1.58.1 (db9d1b20b 2022-01-20)
    
    
    Rust is installed now. Great!
    
    To get started you may need to restart your current shell.
    This would reload its PATH environment variable to include
    Cargo's bin directory (%USERPROFILE%\.cargo\bin).
    
    Press the Enter key to continue.
    

æ ¸å¿ƒç»„ä»¶
====

*   rustupï¼šå®‰è£…ã€æ›´æ–°rustç”¨çš„ï¼Œrustup doc å¯æŸ¥çœ‹å®‰è£…åŒ…ä¸­çš„å®˜æ–¹æŒ‡å¯¼æ–‡æ¡£
*   cargoï¼šåŒ…ç®¡ç†å™¨å’Œç¼–è¯‘æºä»£ç å·¥å…·
*   rustcï¼šå°†rustæºæ–‡ä»¶ç¼–è¯‘æˆå¯æ‰§è¡Œç¨‹åº
*   rustdocï¼šä¸ºrusté¡¹ç›®ç”Ÿæˆè¯´æ˜æ–‡æ¡£

å¸¸ç”¨å‘½ä»¤
====

å‘½ä»¤

è¯´æ˜

å¤‡æ³¨

rustup doc

æ‰“å¼€å®˜æ–¹æŒ‡å¯¼æ–‡æ¡£

cargo new projectName

åˆ›å»ºä¸€ä¸ªrustå·¥ç¨‹

ç¤ºä¾‹ï¼šcargo new firstRustProject

cargo run

è¿è¡Œrustå·¥ç¨‹

cargo build

ç¼–è¯‘rustå·¥ç¨‹

è‹¥å¢åŠ äº†ä¾èµ–ï¼Œå³ä¿®æ”¹äº†tomlæ–‡ä»¶ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘

åŸºç¡€è¯­æ³•
====

*   fn å£°æ˜å‡½æ•°
*   let å£°æ˜å˜é‡ï¼Œå˜é‡é»˜è®¤ä¸å¯å˜ï¼ŒåŠ  mut çš„å˜é‡ä¸ºå¯å˜å˜é‡
*   è™½ç„¶æ‰€æœ‰å˜é‡å£°æ˜éƒ½ç”¨letå…³é”®å­—ï¼Œä½†æ˜¯rustæ˜¯å¼ºç±»å‹çš„è¯­è¨€ï¼Œå†…ç½®äº†å¼ºå¤§çš„ç±»å‹æ¨å¯¼
*   å‡½æ•°å‚æ•°ï¼šå‚æ•°å:å‚æ•°æ•°æ®ç±»å‹
*   å˜é‡é‡å½±æ€§è´¨ï¼šåŒä¸€ä¸ªåç§°å¯ä»¥è¢«å¤šä¸ªå˜é‡ä½¿ç”¨ï¼Œåé¢çš„å˜é‡ä¼šè¦†ç›–å‰é¢çš„å˜é‡
*   const å£°æ˜å¸¸é‡
*   //æ³¨é‡Šä¸€è¡Œï¼Œ/\*\*/æ³¨é‡Šå¤šè¡Œ
*   ä½¿ç”¨è‹±æ–‡åˆ†å·æ¢è¡Œ

ç¤ºä¾‹ï¼š

    
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  Â  Â //å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼ŒåŠ ä¸Š mut å…³é”®å­—å°±å¯ä»¥é‡æ–°èµ‹å€¼ã€‚
    Â  Â  Â  Â let mut Â x=5;
    Â  Â  Â  Â println!("The value of x is Â  {} Â ",x);
    Â  Â 
    Â  Â  Â  Â x=6;
    Â  Â  Â  Â println!("The value of x is Â  {} Â ",x);
    Â  Â 
    Â  Â 
    Â  Â  Â  Â //å˜é‡çš„éšè—
    Â  Â  Â  Â let Â money=100;
    Â  Â  Â  Â println!("money is {}",money);
    Â  Â  Â  Â let money =money+8;
    Â  Â  Â  Â println!("money is {}",money);
    Â  Â  Â  Â let money="ä¸€ç™¾å…ƒ";
    Â  Â  Â  Â println!("money is {}",money);
    Â  Â 
    Â  Â  Â  Â //å¸¸é‡ä½¿ç”¨ const å…³é”®å­—å£°æ˜ï¼Œå£°æ˜çš„æ—¶å€™å¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ï¼Œå¸¸é‡åå…¨å¤§å†™ã€‚
    Â  Â  Â  Â //ä¸éœ€è¦let ï¼Œ ä¸å¯ä½¿ç”¨mut ä¿®é¥°
    Â  Â  Â  Â const MAX_PIONTS: u32=888;
    Â  Â  Â  Â println!("The constant is {}",MAX_PIONTS);
    Â  Â  Â  Â 
    Â  Â  let Â result:char= a_function(88, 'M', false);
    Â  Â  println!("result is {}",result);
    }
    fn a_function(a:u64,b:char,c:bool)-> char{
    Â  Â  println!("a is {}",a);
    Â  Â  println!("b is {}",b);
    Â  Â  println!("c is {}",c);
    Â  Â  return Â 'N';
    }
    
    
    

è¾“å‡ºï¼š

    Hello, world!
    The value of x is   5
    The value of x is   6
    money is 100
    money is 108
    money is ä¸€ç™¾å…ƒ
    The constant is 888
    a is 88
    b is M
    c is false
    result is N
    

æ•°æ®ç±»å‹
----

### æ ‡é‡ç±»å‹

æ•´æ•°ï¼Œæµ®ç‚¹ï¼Œå¸ƒå°”ï¼Œå­—ç¬¦

*   æ•´æ•°ï¼ši8,u8,i16,u16,i32,u32,i64,u64,i128,u128,isize,usize
    *   iè¡¨ç¤ºæœ‰ç¬¦å·
    *   uè¡¨ç¤ºæ— ç¬¦å·
    *   isize å’Œ usize ä¸¤ç§æ•´æ•°ç±»å‹æ˜¯ç”¨æ¥è¡¡é‡æ•°æ®å¤§å°çš„ï¼Œå®ƒä»¬çš„ä½é•¿åº¦å–å†³äºæ‰€è¿è¡Œçš„ç›®æ ‡å¹³å°ï¼Œå¦‚æœæ˜¯ 32 ä½æ¶æ„çš„å¤„ç†å™¨å°†ä½¿ç”¨ 32 ä½ä½é•¿åº¦æ•´å‹ã€‚
*   æµ®ç‚¹ï¼šf32,f64

### å¤åˆç±»å‹

å¯ä»¥å°†å¤šä¸ªå€¼æ”¾åˆ°ä¸€ä¸ªæ•°æ®ç±»å‹ä¸­ã€‚

*   å…ƒç»„-tupleã€‚é•¿åº¦å›ºå®šï¼Œå…ƒç´ çš„æ•°æ®ç±»å‹å¯ä»¥ä¸åŒ
*   æ•°ç»„ï¼Œé•¿åº¦å›ºå®šï¼Œå…ƒç´ çš„æ•°æ®ç±»å‹å¿…é¡»ç›¸åŒ
*   Vectorï¼šä¸æ˜¯æ ‡å‡†åº“æä¾›çš„ã€‚å’Œæ•°ç»„ç±»ä¼¼ï¼Œé•¿åº¦å¯å˜

### ç¤ºä¾‹

    
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  let q=3.0;
    Â  Â  let q:f32=5.00;
    Â  Â  let w=true;
    Â  Â  let r:bool =false;
    Â 
    Â  Â  let t='ğŸ”£';
    Â  Â  let tup :(i32,u64,bool) =(88,99,false);
    Â  Â  println!("å…ƒç´ 1ï¼š{},å…ƒç´ 2ï¼š{},å…ƒç´ 3ï¼š{}",tup.0 , tup.1, tup.2);
    Â  Â  let arr:[u64;5]=[1,2,3,5,5];
    Â  Â  let arr2=['E';9];
    Â  Â  println!("arr piont 2 Â is :{}",arr[1]);
    Â  Â  println!("arr2 piont 2 Â is :{}",arr2[1]);
    Â  Â  //Vectorï¼štodo
    }
    
    
    

æ¡ä»¶è¯­å¥
----

å’Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œ if - else if - else è¡¨ç¤ºæ¡ä»¶è¯­å¥ï¼Œåœ¨ if åé¢ä¸ç”¨åŠ æ‹¬å·ã€‚

    
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  //æ¡ä»¶è¯­å¥
    Â  Â  let a = 12;
    Â  Â  let b;
    Â  Â  if a > 0 {
    Â  Â  Â  Â  b = 1;
    Â  Â  } else if a < 0 {
    Â  Â  Â  Â  b = -1;
    Â  Â  } else {
    Â  Â  Â  Â  b = 0;
    Â  Â  }
    Â  Â  println!("b is {}", b);
    Â  Â  //ä¸‰å…ƒè¿ç®—ç¬¦
    Â  Â  let x = 3;
    Â  Â  let number = if x > 0 { 1 } else { -1 };
    Â  Â  println!("number ä¸º {}", number);
    }
    
    
    

å¾ªç¯
--

*   while
*   for
*   loopï¼šç»ˆæ­¢å¾ªç¯ï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼

    
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  //å¾ªç¯
    Â  Â  //while
    Â  Â  let mut number = 1;
    Â  Â  while number != 4 {
    Â  Â  Â  Â  println!("{}", number);
    Â  Â  Â  Â  number += 1;
    Â  Â  }
    Â  Â  println!("while cycle Â EXIT");
    Â  Â  //for - è¿­ä»£å™¨
    Â  Â  let a = [10, 20, 30, 40, 50];
    Â  Â  for i in a.iter() {
    Â  Â  Â  Â  println!("å…ƒç´ å€¼ä¸º : {}", i);
    Â  Â  }
    Â  Â  println!("for-iter cycle Â EXIT");
    Â  Â  //for - ä¸‹æ ‡
    Â  Â  let b = [10, 20, 30, 40, 50];
    Â  Â  let mut length = b.len();
    Â  Â  println!("b æ•°ç»„çš„é•¿åº¦æ˜¯:{}", length);
    Â  Â  for i in 0..length {
    Â  Â  Â  Â  println!("b[{}] = {}", i, b[i]);
    Â  Â  }
    Â  Â  println!("for-index cycle Â EXIT");
    Â  Â  //loop ç»ˆæ­¢å¾ªç¯ï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼
    Â  Â  let s = ['R', 'U', 'N', Â 'O', 'B'];
    Â  Â  let mut i = 0;
    Â  Â  let location = loop {
    Â  Â  Â  Â  let ch = s[i];
    Â  Â  Â  Â  if ch == 'B' {
    Â  Â  Â  Â  Â  Â  break i;
    Â  Â  Â  Â  }
    Â  Â  Â  Â  i += 1;
    Â  Â  };
    Â  Â  println!(" \'B\' çš„ç´¢å¼•ä¸º {}", location);
    }
    
    
    

è¾“å‡º&è¾“å…¥
-----

### è¾“å‡º

    
    println!("print a Â small =_=*");
    
    

#### è¾“å‡ºèŠ±æ‹¬å·

èŠ±æ‹¬å·ä¸­å¥—èŠ±æ‹¬å·å°±å¯ä»¥è¾“å‡ºèŠ±æ‹¬å·  
ç¤ºä¾‹ä»£ç ï¼š

    
    Â let mut name = String::from("cml");
    Â  Â  println!("è¾“å‡ºä¸­å¸¦èŠ±æ‹¬å·:{{ Â {} Â }}", name);
    
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    è¾“å‡ºä¸­å¸¦èŠ±æ‹¬å·:{  cml  }
    

#### è¾“å‡ºéåŸºç¡€ç±»å‹

    Â  println!("è¾“å‡ºä¸€ä¸ªç»“æ„ä½“ï¼Œa={:?}", a);
    

### è¾“å…¥

    
    Â let mut guess = String::new();
     io::stdin().read_line(&mut guess).expect("æ— æ³•è¯»å–è¡Œ");
    
    

æ‰€æœ‰æƒ
===

æ‰€æœ‰æƒå¯ä»¥ç†è§£ä¸ºå‘½åç©ºé—´+ä½œç”¨åŸŸ+æŒ‡é’ˆã€‚

*   åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå€¼ç±»å‹ï¼‰å˜é‡åœ¨æ ˆç©ºé—´ä¸­å¯ä»¥å¤åˆ¶ã€‚å…ˆç»™xèµ‹å€¼9(let x = 9)ï¼Œå°†xèµ‹å€¼ç»™yç­‰åŒäºç›´æ¥ç»™yèµ‹å€¼9ï¼ˆlet y = x ç­‰åŒäºlet y = 9ï¼‰
    
*   å¼•ç”¨ç±»å‹å˜é‡åœ¨å †ç©ºé—´ä¸­çš„â€œå€¼å¼•ç”¨â€å¯ä»¥å¤åˆ¶ï¼Œä½†æ˜¯å­˜å‚¨åœ¨æ ˆç©ºé—´çš„â€œå€¼â€ä¸å¯å¤åˆ¶ã€‚å› æ­¤ï¼Œå¼•ç”¨ç±»å‹å˜é‡ä»…å¯è¢«æ¶ˆè´¹ä¸€æ¬¡
    
*   å¼•ç”¨ç±»å‹å˜é‡å¯ä»¥é€šè¿‡â€œå…‹éš†â€çš„æ–¹å¼å¤åˆ¶
    
*   ç‰¹æ®Šçš„æ•°æ®ç±»å‹--->ç±»å‹çš„å¼•ç”¨ï¼ˆå³æŒ‡é’ˆï¼‰ï¼Œä½¿ç”¨ & å…³é”®å­—è¡¨ç¤º
    
    *   æŒ‡é’ˆå­˜æ”¾åœ¨æ ˆä¸­ï¼Œä¾¿äºç†è§£å¯ä»¥å°†æŒ‡é’ˆçœ‹ä½œâ€œç‰¹æ®Šçš„å€¼ç±»å‹â€
    *   è¢«å€Ÿç”¨çš„ä¸å¯å˜å˜é‡ï¼Œä¸å¯å†å€Ÿç”¨ç»™å…¶ä»–äºº
    *   æŒ‡é’ˆç±»å‹çš„ä¸å¯å˜å˜é‡ï¼Œä¸å¯è¢«ä¿®æ”¹
    *   å€¼ç±»å‹ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ï¼‰å˜é‡ä¹Ÿå¯ä»¥ä½¿ç”¨æŒ‡é’ˆï¼Œä½†æ˜¯ä¸€èˆ¬ä¸å»ºè®®è¿™æ ·ä½¿ç”¨
*   å¯å˜å˜é‡ä¹Ÿå¯ä»¥æœ‰æŒ‡é’ˆ
    
*   rustä¸­ä¸å…è®¸å‡ºç°ç©ºæŒ‡é’ˆ
    

ç¤ºä¾‹ä»£ç ï¼š

    
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  //01.åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå€¼ç±»å‹ï¼‰å˜é‡åœ¨æ ˆç©ºé—´ä¸­å¯ä»¥å¤åˆ¶ã€‚å…ˆç»™xèµ‹å€¼9(let x = 9)ï¼Œå°†xèµ‹å€¼ç»™yç­‰åŒäºç›´æ¥ç»™yèµ‹å€¼9ï¼ˆlet y = x ç­‰åŒäºlet y = 9ï¼‰
    Â  Â  let x = 9;
    Â  Â  let y = x;
    Â  Â  //x is :9 , y is :9
    Â  Â  println!("x is :{0} , y is :{1}", x, y);
    Â  Â  let c1 = 'M';
    Â  Â  let c2 = c1;
    Â  Â  //c1 is :M , c2 is :M
    Â  Â  println!("c1 is :{0} , c2 is :{1}", c1, c2);
    Â  Â  //02.å¼•ç”¨ç±»å‹å˜é‡åœ¨å †ç©ºé—´ä¸­çš„â€œå€¼å¼•ç”¨â€å¯ä»¥å¤åˆ¶ï¼Œä½†æ˜¯å­˜å‚¨åœ¨æ ˆç©ºé—´çš„â€œå€¼â€ä¸å¯å¤åˆ¶ã€‚å› æ­¤ï¼Œå¼•ç”¨ç±»å‹å˜é‡ä»…å¯è¢«æ¶ˆè´¹ä¸€æ¬¡ã€‚
    Â  Â  let s1 = String::from("hello");
    Â  Â  let s2 = s1;
    Â  Â  //ç¼–è¯‘é”™è¯¯ï¼šuse of moved value: `s1`
    Â  Â  //let s3 = s1;
    Â  Â  //ç¼–è¯‘é”™è¯¯ï¼šborrow of moved value: `s1`
    Â  Â  //println!("s1 is :{0} , s2 is :{1}", s1, s2);
    Â  Â  //03.å¼•ç”¨ç±»å‹å˜é‡å¯ä»¥é€šè¿‡â€œå…‹éš†â€çš„æ–¹å¼å¤åˆ¶ã€‚
    Â  Â  let h1 = String::from("hello");
    Â  Â  let h2 = h1.clone();
    Â  Â  let h3 = h1.clone();
    Â  Â  //h1 = hello, h2 = hello , h3 is :hello
    Â  Â  println!("h1 = {}, h2 = {} , h3 is :{}", h1, h2, h3);
    Â  Â  //04.ç‰¹æ®Šçš„æ•°æ®ç±»å‹--->ç±»å‹çš„å¼•ç”¨ï¼ˆå³æŒ‡é’ˆï¼‰ï¼Œä½¿ç”¨ & å…³é”®å­—è¡¨ç¤º
    Â  Â  let k1 = String::from("hello");
    Â  Â  //k1ä¸ºStringç±»å‹ï¼šstd::String::String ; k2 ä¸ºå¸¦Stringç±»å‹çš„æŒ‡é’ˆç±»å‹ï¼š&std::String:String
    Â  Â  let k2 = &k1;
    Â  Â  let k3 = k2;
    Â  Â  //æŒ‡é’ˆå­˜æ”¾åœ¨æ ˆä¸­ï¼Œä¾¿äºç†è§£å¯ä»¥å°†æŒ‡é’ˆçœ‹ä½œâ€œç‰¹æ®Šçš„å€¼ç±»å‹â€ã€‚æ‰€ä»¥è™½ç„¶k2å·²ç»èµ‹å€¼ç»™äº†k3ï¼Œä»»ç„¶å¯ä»¥èµ‹å€¼ç»™k4ã€‚
    Â  Â  let k4 = k2;
    Â  Â  //k1æ— æ³•èµ‹å€¼ç»™k5ï¼Œå› ä¸ºk1å·²ç»è¢«å€Ÿç”¨äº†ã€‚è¿™æ˜¯å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œè¯•æƒ³å¦‚æœå¤šä¸ªäººéƒ½å¯ä»¥å€Ÿç”¨k1ï¼Œæ„å‘³ç€å¤šä¸ªäººå¯ä»¥ä¿®æ”¹k1ï¼Œé‚£åŠ¿å¿…å¯¹æ­£åœ¨ä½¿ç”¨å®ƒçš„äººæ­£åœ¨è¿›è¡Œçš„å·¥ä½œäº§ç”Ÿå½±å“
    Â  Â  // let k5 = k1;
    Â  Â  //ç¼–è¯‘é”™è¯¯ï¼š`k2` is a `&` reference, so the data it refers to cannot be borrowed as mutable
    Â  Â  //æ—¢ç„¶k2æ˜¯æŒ‡é’ˆç±»å‹ï¼Œé‚£ä¹ˆå°±ä¸å…è®¸è¢«ä¿®æ”¹ï¼Œå› ä¸ºk2çš„â€œå€¼â€æœ¬èº«æ˜¯å€Ÿæ¥çš„ï¼Œå¦‚æœä¿®æ”¹äº†ï¼Œé‚£ä¹ˆåŠ¿å¿…å¯¹æ­£åœ¨ä½¿ç”¨å®ƒçš„äººæ­£åœ¨è¿›è¡Œçš„å·¥ä½œäº§ç”Ÿå½±å“
    Â  Â  //k2.push_str("world");
    Â  Â  println!("k1 is {}, k2 is {}, k3 is :{} , k4 is : {}", k1, k2, k3, k4);
    Â  Â  //å€¼ç±»å‹ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ï¼‰å˜é‡ä¹Ÿå¯ä»¥ä½¿ç”¨æŒ‡é’ˆï¼Œä½†æ˜¯ä¸€èˆ¬ä¸å»ºè®®è¿™æ ·ä½¿ç”¨
    Â  Â  //n1ä¸ºi32ç±»å‹ï¼›n2ä¸º&i32ç±»å‹
    Â  Â  let n1 = 8;
    Â  Â  let n2 = &n1;
    Â  Â  println!("n1 is :{} , n2 is :{}", n1, n2);
    Â  Â  //05.å¯å˜å˜é‡çš„æŒ‡é’ˆã€‚
    Â  Â  let mut m1 = String::from("run");
    Â  Â  let m2 = &mut m1;
    Â  Â  m2.push_str(",world");
    Â  Â  println!("m2 is :{}", m2);
    Â  Â  //ç¼–è¯‘é”™è¯¯ï¼šcannot borrow `m1` as immutable because it is also borrowed as mutable
    Â  Â  //å€Ÿå‡ºå»åï¼Œæ‰€æœ‰æƒå·²ä¸åœ¨æ‹¥æœ‰ï¼Œæ‰€ä»¥æ— æ³•è¢«æ¶ˆè´¹
    Â  Â  // println!("m1 is :{} , m2 is :{}", m1, m2);
    Â  Â  //ç¼–è¯‘é”™è¯¯ï¼šcannot borrow `m2` as mutable, as it is not declared as mutableã€‚cannot borrow as mutable
    Â  Â  //ä¸å¯å°†å€Ÿæ¥çš„ä¸œè¥¿å†å€Ÿç»™åˆ«äºº
    Â  Â  // let m3 = &mut m2;
    Â  Â  //06.rustä¸­ä¸å…è®¸å‡ºç°ç©ºæŒ‡é’ˆ
    }
    
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!
    x is :9 , y is :9
    c1 is :M , c2 is :M
    h1 = hello, h2 = hello , h3 is :hello
    k1 is hello, k2 is hello, k3 is :hello , k4 is : hello
    n1 is :8 , n2 is :8
    m2 is :run,world
    

åˆ‡ç‰‡
==

åˆ‡ç‰‡æ˜¯æŒ‡å‘æ•°æ®ç»“æ„ï¼ˆå­—ç¬¦ä¸²ã€é›†åˆï¼‰ä¸€éƒ¨åˆ†å†…å®¹çš„å¼•ç”¨ã€‚

ä¸æ„¿æ„å°†rustä¸­çš„åˆ‡ç‰‡ç†è§£ä¸ºä¸€ç§â€œç±»å‹â€ï¼Œå®é™…ä¸Šä¹Ÿä¸æ˜¯ï¼›æ›´ä¸æ„¿å°†rustä¸­çš„åˆ‡ç‰‡ç†è§£ä¸ºä¸€ç§â€œé›†åˆâ€ã€‚æš‚ä¸”å°†åˆ‡ç‰‡ç†è§£æˆä¸€ç§å¯¹è±¡å§ã€‚ä¾‹å¦‚ &s\[0..5\] å°±æ˜¯è·å–åˆ°äº†å­—ç¬¦ä¸² s ç´¢å¼•ä»0åˆ°5ä½ç½®çš„å…ƒç´ ï¼ŒåŒ…å«0ä¸åŒ…å«5ã€‚

rustä¸­çš„åˆ‡ç‰‡éƒ¨åˆ†ä¸»è¦æ˜¯è¦ç†è§£ç´¢å¼•å’Œä¸‹æ ‡çš„æ¦‚å¿µã€‚

ç¤ºä¾‹ä»£ç ï¼š

    
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  let s = String::from("hello,world.");
    Â  Â  //ss çš„æ•°æ®ç±»å‹ä¸ºï¼š&str
    Â  Â  let ss = &s[0..5];
    Â  Â  println!("s is : {} , ss is : {}", s, ss);
    Â  Â  let arr = [1, 3, 5, 7, 9];
    Â  Â  //start_part çš„æ•°æ®ç±»å‹ä¸ºï¼š&[i32]
    Â  Â  let start_part = &arr[0..3];
    Â  Â  let end_part = &arr[3..];
    Â  Â  let full_part = &arr[..];
    Â  Â  println!(
    Â  Â  Â  Â  "arr is : {:?} , start_part Â is : {:?} , end_part is : {:?} , full_part is : {:?}",
    Â  Â  Â  Â  arr, start_part, end_part, full_part
    Â  Â  );
    }
    
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!
    s is : hello,world. , ss is : hello
    arr is : [1, 3, 5, 7, 9] , start_part  is : [1, 3, 5] , end_part is : [7, 9] , full_part is : [1, 3, 5, 7, 9]
    

ç»“æ„ä½“
===

struct ç±»ä¼¼ java ä¸­çš„ç±»ï¼Œç”¨æ¥è‡ªå®šä¹‰ä¸€ç§æ•°æ®ç»“æ„ï¼Œè¿™ç§æ•°æ®ç»“æ„ä¸€èˆ¬ç”¨æ¥æè¿°ç”Ÿæ´»ä¸­çš„æŸä¸€ä¸ªå¯¹è±¡ã€‚struct ä¸­å¯ä»¥åŒ…å«å±æ€§å’Œæ–¹æ³•ã€‚ä½¿ç”¨ç»“æ„ä½“åˆ†ä¸ºä¸¤æ­¥ï¼šé¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œç„¶åéœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªç»“æ„ä½“ï¼Œå†ç„¶åæ‰å¯ä»¥ä½¿ç”¨ã€‚

ä¸€æ—¦ç»“æ„ä½“å®ä¾‹åŒ–çš„æ—¶å€™æ˜¯å¯å˜çš„ï¼Œå³ä½¿ç”¨ mut ä¿®é¥°ï¼Œ é‚£ä¹ˆç»“æ„ä½“ä¸­æ‰€æœ‰çš„å±æ€§éƒ½å°†æ˜¯å¯å˜çš„ã€‚

ç»“æ„ä½“å±æ€§ï¼š

*   å£°æ˜æ–¹å¼ï¼Œå±æ€§å:æ•°æ®ç±»å‹ï¼›
*   å³ä½¿æ˜¯æœ€åä¸€ä¸ªå±æ€§ï¼Œæœ«å°¾ä¹Ÿè¦åŠ è‹±æ–‡é€—å·ï¼›
*   å±æ€§å¯ä»¥æ˜¯å¦å¤–ä¸€ä¸ªç»“æ„ä½“ï¼Œä½†ä¸èƒ½æ˜¯æœ¬èº«ï¼›
*   å±æ€§å¯ä»¥æ˜¯ä¸€ä¸ªå…ƒç»„
*   å±æ€§å¯ä»¥æ˜¯ä¸€ä¸ªæšä¸¾

ç¤ºä¾‹ä»£ç ï¼š

    
    /**
    Â * äºº
    Â */
    #[derive(Debug)]
    struct Person {
    Â  Â  //ç»“æ„ä½“å±æ€§ï¼šå£°æ˜æ–¹å¼ï¼Œå±æ€§å:æ•°æ®ç±»å‹ï¼›å³ä½¿æ˜¯æœ€åä¸€ä¸ªå±æ€§ï¼Œæœ«å°¾ä¹Ÿè¦åŠ è‹±æ–‡é€—å·ï¼›å±æ€§å¯ä»¥æ˜¯å¦å¤–ä¸€ä¸ªç»“æ„ä½“ï¼Œä½†ä¸èƒ½æ˜¯æœ¬èº«ï¼›å±æ€§å¯ä»¥æ˜¯ä¸€ä¸ªå…ƒç»„
    Â  Â  active: bool,
    Â  Â  name: String,
    Â  Â  email: String,
    Â  Â  sign_in_count: u64,
    Â  Â  nation: Nation,
    Â  Â  parent: Parent,
    Â  Â  empty: Empty,
    Â  Â  tuple: (u32, u32),
    }
    /**
    Â * å›½å®¶ç»“æ„ä½“
    Â */
    #[derive(Debug)]
    struct Nation {
    Â  Â  name: String,
    Â  Â  area: String,
    Â  Â  time_zone: u64,
    }
    /**
    Â * çˆ¶æ¯ç»“æ„ä½“
    Â * ç‰¹æ®Šçš„ç»“æ„ä½“ï¼Œå…ƒç»„ç»“æ„ä½“ã€‚
    Â */
    #[derive(Debug)]
    struct Parent(String, String);
    /**
    Â * ç©ºç»“æ„ä½“
    Â */
    #[derive(Debug)]
    struct Empty;
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  //å®ä¾‹åŒ–ä¸€ä¸ªç»“æ„ä½“
    Â  Â  let p1 = Person {
    Â  Â  Â  Â  active: true,
    Â  Â  Â  Â  name: String::from("cml"),
    Â  Â  Â  Â  email: String::from("cnaylor@163.com"),
    Â  Â  Â  Â  sign_in_count: 99,
    Â  Â  Â  Â  nation: Nation {
    Â  Â  Â  Â  Â  Â  name: String::from("xm"),
    Â  Â  Â  Â  Â  Â  area: String::from("north"),
    Â  Â  Â  Â  Â  Â  time_zone: 8,
    Â  Â  Â  Â  },
    Â  Â  Â  Â  parent: Parent(String::from("baba"), String::from("mama")),
    Â  Â  Â  Â  empty: Empty,
    Â  Â  Â  Â  tuple: (8, 8),
    Â  Â  };
    Â  Â  //å®ä¾‹åŒ–ä¸€ä¸ªå¯å˜ç»“æ„ä½“
    Â  Â  let mut p2 = Person {
    Â  Â  Â  Â  active: true,
    Â  Â  Â  Â  name: String::from("cml"),
    Â  Â  Â  Â  email: String::from("cnaylor@163.com"),
    Â  Â  Â  Â  sign_in_count: 99,
    Â  Â  Â  Â  nation: Nation {
    Â  Â  Â  Â  Â  Â  name: String::from("xm"),
    Â  Â  Â  Â  Â  Â  area: String::from("north"),
    Â  Â  Â  Â  Â  Â  time_zone: 8,
    Â  Â  Â  Â  },
    Â  Â  Â  Â  parent: Parent(String::from("baba"), String::from("mama")),
    Â  Â  Â  Â  empty: Empty,
    Â  Â  Â  Â  tuple: (8, 8),
    Â  Â  };
    Â  Â  //ç»™ç»“æ„ä½“å®ä¾‹é‡æ–°èµ‹å€¼
    Â  Â  p2.email = String::from("c@163.com");
    Â  Â  let email = &p2.email;
    Â  Â  println!("p1 is : {:#?} , p2 is : {:#?} , email is :{}", p1, p2, email);
    Â  Â  #[derive(Debug)]
    Â  Â  struct User {
    Â  Â  Â  Â  active: bool,
    Â  Â  Â  Â  username: String,
    Â  Â  Â  Â  email: String,
    Â  Â  Â  Â  sign_in_count: u64,
    Â  Â  }
    Â  Â  fn build_user(email: String, username: String) -> User {
    Â  Â  Â  Â  let u = User {
    Â  Â  Â  Â  Â  Â  email: email,
    Â  Â  Â  Â  Â  Â  //ç®€å†™ã€‚å‡½æ•°å‚æ•°å’Œç»“æ„ä½“å±æ€§åç›¸åŒï¼Œå¯ç®€å†™
    Â  Â  Â  Â  Â  Â  // email,
    Â  Â  Â  Â  Â  Â  username,
    Â  Â  Â  Â  Â  Â  active: true,
    Â  Â  Â  Â  Â  Â  sign_in_count: 1,
    Â  Â  Â  Â  };
    Â  Â  Â  Â  //ä»å·²åˆ›å»ºçš„ç»“æ„ä½“å®ä¾‹åˆ›å»ºå®ä¾‹
    Â  Â  Â  Â  // let u2 = User { ..u };
    Â  Â  Â  Â  let u3 = User {
    Â  Â  Â  Â  Â  Â  email: String::from("o@163.com"),
    Â  Â  Â  Â  Â  Â  ..u
    Â  Â  Â  Â  };
    Â  Â  Â  Â  return u3;
    Â  Â  }
    Â  Â  let u = build_user(String::from("a@163.com"), String::from("tom"));
    Â  Â  println!("u is : {:?}", u);
    }
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!
    p1 is : Person {
        active: true,
        name: "cml",
        email: "cnaylor@163.com",
        sign_in_count: 99,
        nation: Nation {
            time_zone: 8,
        },
        parent: Parent(
            "baba",
            "mama",
        ),
        empty: Empty,
        tuple: (
            8,
            8,
        ),
    } , email is :c@163.com
    u is : User { active: true, username: "tom", email: "o@163.com", sign_in_count: 1 }
    

æšä¸¾
==

æšä¸¾è¡¨ç¤ºæŸä¸€ä¸ªå¯¹è±¡å¯èƒ½çš„å€¼ï¼Œå®é™…ä½¿ç”¨ä¸­å¸¸ç”¨æ¥è¡¨è¾¾ï¼šipåœ°å€ç±»å‹ï¼Œè®¢å•çŠ¶æ€ï¼Œäººå‘˜æ€§åˆ«ï¼Œå®åè®¤è¯æ–¹å¼ç­‰æŸä¸€äº‹ç‰©ç®€çŸ­åˆä¸ç»å¸¸å˜åŒ–çš„â€œå¯é€‰å€¼â€ã€‚

æšä¸¾æˆå‘˜ï¼š

*   è‹±æ–‡é€—å·åˆ†å‰²
*   å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œæ•°å­—ç±»å‹æˆ–è€…ç»“æ„ä½“ã€‚ç”šè‡³å¯ä»¥åŒ…å«å¦ä¸€ä¸ªæšä¸¾
*   è¦åˆç†ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„æšä¸¾ï¼Œé¿å…é‡å¤å®šä¹‰
*   å¯ä»¥ä½¿ç”¨matchæ¯”å¯¹æšä¸¾æˆå‘˜ï¼Œç±»ä¼¼javaä¸­çš„switch-case
*   å¯ä»¥ç”¨ if - let ---> else æ¯”å¯¹æšä¸¾æˆå‘˜

Match
-----

    use std::fs::File;
    
    fn main() {
        let f = File::open("hello.txt");
        match f {
            Ok(file) => {
                println!("File opened successfully.");
            },
            Err(err) => {
                println!("Failed to open the file.");
            }
        }
    }
    

If-let
------

    fn main() {
        enum Book {
            Papery(u32),
            Electronic(String)
        }
        let book = Book::Electronic(String::from("url"));
        if let Book::Papery(index) = book {
            println!("Papery {}", index);
        } else {
            println!("Not papery book");
        }
    }
    

Option
------

Option æ˜¯ä¸€ä¸ªæ ‡å‡†åº“ä¸­çš„æšä¸¾ï¼Œç”¨æ¥å¤„ç†ç©ºå€¼ï¼ˆnullï¼‰ çš„æƒ…å†µã€‚Optionæ˜¯ä¸€ä¸ªæ³›å‹æšä¸¾ï¼Œæ¥å—ç±»å‹ T ã€‚Option è¦å¹²çš„äº‹æƒ…å’Œjava ä¸­çš„ optionalï¼ˆjava8æ–°ç‰¹æ€§ï¼‰ ç±»ä¼¼ã€‚

ç®€è¨€ä¹‹ï¼š

*   æˆ‘ä»¬åœ¨è®¾è®¡èµ„æºæä¾›è€…æ—¶å€™ï¼Œå¦‚æœä¸ç¡®å®šèµ„æºæä¾›è€…æ˜¯å¦ä¼šè¾“å‡ºnullï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†è¿”å›å€¼å®šä¹‰ä¸º Optionã€‚è‹¥ä¸€åˆ‡æ­£å¸¸ï¼Œèµ„æºæ¶ˆè´¹è€…ç›´æ¥æ¶ˆè´¹è¿”å›å€¼Tå°±è¡Œï¼›è‹¥å‡ºäº†é—®é¢˜ï¼Œèµ„æºæ¶ˆè´¹è€…å¾—åˆ°çš„è¿”å›å€¼å°†ä¸ºOption.None ã€‚
*   åŒç†ï¼Œä½œä¸ºè°ƒç”¨æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªOptionçš„å˜é‡æ¥æ¥æ”¶èµ„æºæä¾›è€…çš„è¾“å‡ºå€¼ï¼Œè€Œåæ ¹æ®è¿”å›å€¼æ˜¯å¦ä¸ºnoneå¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚

Option æºç ï¼š

    enum Option<T> {
        Some(T),
        None,}
    

ä½¿ç”¨ä¸¾ä¾‹ï¼š

    
    // æ•´æ•°é™¤æ³•ã€‚
    fn checked_division(dividend: i32, divisor: i32) -> Option<i32> {
    Â  Â  if divisor == 0 {
    Â  Â  Â  Â  // å¤±è´¥è¡¨ç¤ºæˆ `None` å–å€¼
    Â  Â  Â  Â  None
    Â  Â  } else {
    Â  Â  Â  Â  // ç»“æœ Result è¢«åŒ…è£…åˆ° `Some` å–å€¼ä¸­
    Â  Â  Â  Â  Some(dividend / divisor)
    Â  Â  }
    }
    // æ­¤å‡½æ•°å¤„ç†å¯èƒ½å¤±è´¥çš„é™¤æ³•
    fn try_division(dividend: i32, divisor: i32) {
    Â  Â  // `Option` å€¼å¯ä»¥è¿›è¡Œæ¨¡å¼åŒ¹é…ï¼Œå°±å’Œå…¶ä»–æšä¸¾ç±»å‹ä¸€æ ·
    Â  Â  let result = checked_division(dividend, divisor);
    Â  Â  if result!=Option::None
    Â  Â  {
    Â  Â  Â  Â  //è·å–è¿”å›å€¼
    Â  Â  Â  Â  println!("Nice, result is :{:?}", result.unwrap());
    Â  Â  }
    Â 
    Â  Â  match checked_division(dividend, divisor) {
    Â  Â  Â  Â  None => println!("{} / {} failed!", dividend, divisor),
    Â  Â  Â  Â  Some(quotient) => {
    Â  Â  Â  Â  Â  Â  println!("{} / {} = {}", dividend, divisor, quotient)
    Â  Â  Â  Â  }
    Â  Â  }
    }
    fn main() {
    Â  Â  try_division(4, 2);
    Â  Â  try_division(1, 0);
    }
    
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Nice, result is :2
    4 / 2 = 2
    1 / 0 failed!
    

é›†åˆ
==

Rust æ ‡å‡†åº“ä¸­åŒ…å«ä¸€ç³»åˆ—è¢«ç§°ä¸ºÂ é›†åˆï¼ˆcollectionsï¼‰çš„éå¸¸æœ‰ç”¨çš„æ•°æ®ç»“æ„ã€‚å¤§éƒ¨åˆ†å…¶ä»–æ•°æ®ç±»å‹éƒ½ä»£è¡¨ä¸€ä¸ªç‰¹å®šçš„å€¼ï¼Œä¸è¿‡é›†åˆå¯ä»¥åŒ…å«å¤šä¸ªå€¼ã€‚ä¸åŒäºå†…å»ºçš„æ•°ç»„å’Œå…ƒç»„ç±»å‹ï¼Œé›†åˆæŒ‡å‘çš„æ•°æ®æ˜¯å‚¨å­˜åœ¨å †ä¸Šçš„ï¼Œè¿™æ„å‘³ç€æ•°æ®çš„æ•°é‡ä¸å¿…åœ¨ç¼–è¯‘æ—¶å°±å·²çŸ¥ï¼Œå¹¶ä¸”è¿˜å¯ä»¥éšç€ç¨‹åºçš„è¿è¡Œå¢é•¿æˆ–ç¼©å°ã€‚

vectorå®¹å™¨
--------

vector å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªå•ç‹¬çš„æ•°æ®ç»“æ„ä¸­å‚¨å­˜å¤šä¸ªå€¼ï¼Œæ‰€æœ‰å€¼åœ¨å†…å­˜ä¸­å½¼æ­¤ç›¸é‚»æ’åˆ—ã€‚vector åªèƒ½å‚¨å­˜ç›¸åŒç±»å‹çš„å€¼ã€‚

å¦‚æœå€ŸåŠ©æšä¸¾ï¼Œæœ‰æ—¶å€™ vector ä¹Ÿå¯ä»¥å˜ç›¸å­˜å‚¨ä¸åŒç±»å‹çš„å€¼ã€‚

ç¤ºä¾‹ä»£ç ï¼š

    
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  //æ–°å»ºä¸€ä¸ª vector
    Â  Â  let mut v: Vec<i32> = Vec::new();
    Â  Â  let v2 = vec![1, 2, 3];
    Â  Â  println!("v is : {:?} , v2 is : {:?}", v, v2);
    Â  Â  //æ›´æ–°
    Â  Â  v.push(888);
    Â  Â  v.push(111);
    Â  Â  v.push(222);
    Â  Â  v.push(333);
    Â  Â  //åˆ é™¤
    Â  Â  v.remove(0);
    Â  Â  //æŸ¥è¯¢
    Â  Â  let two = v[1];
    Â  Â  let two2 = &v[1];
    Â  Â  //getæ–¹æ³•è¿”å›çš„æ˜¯Option
    Â  Â  let three = v.get(2);
    Â  Â  println!("two is : {} , three is Â : {:?}", two, three);
    Â  Â  //éå†
    Â  Â  let arr = vec![100, 32, 57];
    Â  Â  for i in &arr {
    Â  Â  Â  Â  println!("arr item for --> {}", i);
    Â  Â  }
    Â  Â  //å€ŸåŠ©æšä¸¾ï¼Œvectorä¸­å¯ä»¥å­˜å‚¨ä¸åŒçš„æ•°æ®ç±»å‹
    Â  Â  let row = vec![
    Â  Â  Â  Â  SpreadsheetCell::Int(3),
    Â  Â  Â  Â  SpreadsheetCell::Text(String::from("blue")),
    Â  Â  Â  Â  SpreadsheetCell::Float(10.12),
    Â  Â  ];
    Â  Â  let Â s = &row[1];
    Â  Â  println!("row is : {:?} , s is : {:?} ", row, s);
    }
    #[derive(Debug)]
    enum SpreadsheetCell {
    Â  Â  Int(i32),
    Â  Â  Float(f64),
    Â  Â  Text(String),
    }
    
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!
    v is : [] , v2 is : [1, 2, 3]
    two is : 222 , three is  : Some(333)
    arr item for --> 100
    arr item for --> 32
    arr item for --> 57
    row is : [Int(3), Text("blue"), Float(10.12)] , s is : Text("blue")
    

String
------

ä½ æ²¡æœ‰çœ‹é”™ï¼Œrust ä¸­ï¼Œå­—ç¬¦ä¸²ä¹Ÿæ˜¯é›†åˆï¼Œæ˜¯ä»€ä¹ˆé›†åˆå‘¢ï¼Ÿ æ˜¯â€œå­—ç¬¦â€çš„é›†åˆã€‚æ³¨æ„ï¼šä¸Šé¢æåˆ°è¿‡å­—ç¬¦æ˜¯ rust çš„åŸºç¡€æ ‡é‡ç±»å‹ï¼Œä½†æ˜¯å­—ç¬¦ä¸²ä¸æ˜¯æ ‡é‡ç±»å‹ï¼Œè€Œæ˜¯é›†åˆç±»å‹ã€‚

*   å­—ç¬¦ä¸²æ˜¯UTF-8ç¼–ç ï¼Œä¸­æ–‡ä¸ä¼šä¹±ç ï¼Œä¸€ä¸ªè‹±æ–‡å­—ç¬¦å 1å­—èŠ‚ï¼Œä¸€ä¸ªæ±‰å­—å 2å­—èŠ‚ã€‚
*   å­—ç¬¦ä¸²åº•å±‚å®é™…æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œæ•°æ®å­˜å‚¨åœ¨ç»“æ„ä½“ä¸­çš„ Vec ï¼ˆvectorå®¹å™¨ï¼‰é‡Œé¢ ã€‚
*   rustä¸­ä¸å»ºè®®ç”¨ä¸‹æ ‡è®¿é—®å­—ç¬¦ä¸²å…ƒç´ ï¼šrustä¸­çš„å­—ç¬¦ä¸²å¤§éƒ¨åˆ†æ—¶å€™å’Œ java ä¸­çš„ä¸å¤ªä¸€æ ·ï¼Œç›¸æ¯”è¾ƒè€Œè¨€æ›´ä½çº§ï¼ˆå¯¹éƒ¨åˆ†ä½¿ç”¨è€…æ¥è¯´ï¼‰ï¼Œä½†æ˜¯rustä¸­çš„å­—ç¬¦ä¸²æ›´èƒ½çœŸå®çš„ååº”æ–‡å­—æœ¬æ¥çš„æ ·å­ã€‚

æ›´æ–°å­—ç¬¦ä¸²çš„æ–¹å¼ï¼š

*   push\_str
*   push
*   åŠ å·
*   format!

ç¤ºä¾‹ä»£ç ï¼š

    
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  //åˆ›å»º
    Â  Â  let mut s = String::new();
    Â  Â  let data = "initial contents";
    Â  Â  let ss = data.to_string();
    Â  Â  let sss = String::from("ä½ å¥½ï¼");
    Â  Â  println!("s is : {} , ss is Â : {} , sss is Â : {}", s, ss, sss);
    Â  Â  //æ›´æ–°
    Â  Â  let mut word = String::from("Aa");
    Â  Â  word.push_str("Bb");
    Â  Â  word.push('C');
    Â  Â  word += "cDd";
    Â  Â  word = format!("{}{}-{}", word, "Ee", "Ff");
    Â  Â  println!("final Â word is : {} ", word);
    Â  Â  //ä¸è¦ä½¿ç”¨ä¸‹æ ‡è®¿é—®
    Â  Â  let p = String::from("hello");
    Â  Â  let p1 = &p[0..3];
    Â  Â  let k = String::from("ä½ å¥½æˆ‘æ˜¯é™ˆæ˜äº®");
    Â  Â  let k1 = &k[0..3];
    Â  Â  //è¾“å‡ºç»“æœå¯èƒ½ä¸æ˜¯å¤§å¤šæ•°äººé¢„æœŸï¼šp1 is : hel , k1 is : ä½ 
    Â  Â  println!("p1 is : {} , k1 is : {}", p1, k1);
    Â  Â  //éå†
    Â  Â  word+="åŒ—äº¬";
    Â  Â  for i in word.chars() {
    Â  Â  Â  Â  println!("word ---> item is :{}", i);
    Â  Â  }
    }
    
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    
    Hello, world!
    s is :  , ss is  : initial contents , sss is  : ä½ å¥½ï¼
    final  word is : AaBbCcDdEe-Ff
    p1 is : hel , k1 is : ä½ 
    word ---> item is :A
    word ---> item is :a
    word ---> item is :B
    word ---> item is :b
    word ---> item is :C
    word ---> item is :c
    word ---> item is :D
    word ---> item is :d
    word ---> item is :E
    word ---> item is :e
    word ---> item is :-
    word ---> item is :F
    word ---> item is :f
    word ---> item is :b
    word ---> item is :C
    word ---> item is :c
    word ---> item is :D
    word ---> item is :d
    word ---> item is :E
    word ---> item is :e
    word ---> item is :-
    word ---> item is :F
    word ---> item is :f
    word ---> item is :åŒ—
    word ---> item is :äº¬
    
    

ä»£ç ç»„ç»‡
====

è®²é“ç†ï¼Œrust ä¸­çš„ä»£ç ç»„ç»‡ç›¸æ¯” java ã€CSharp è¿™äº›æ‰€è°“é«˜çº§è¯­è¨€ï¼Œè¦å¤æ‚çš„å¤šã€‚å¤§æ¦‚åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šå‘½åç©ºé—´å’Œè®¿é—®æƒé™ã€‚

å‘½åç©ºé—´
----

rust ä¸­é’ˆå¯¹åŒ…ç®¡ç†ä¸»è¦æœ‰ä¸‰ä¸ªæ¦‚å¿µï¼šåŒ…ï¼ˆpackageï¼‰ï¼Œç®±ï¼ˆcrateï¼‰ï¼Œæ¨¡å—ï¼ˆmoduleï¼‰ã€‚ä¸‰ä¸ªæ¦‚å¿µå½¢æˆä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼ŒåŒ…ä¸­åŒ…å«ç®±ï¼Œç®±ä¸­åŒ…å«æ¨¡å—ã€‚

*   åŒ…ï¼šcargo new å‡ºæ¥çš„å·¥ç¨‹å°±æ˜¯ä¸€ä¸ªåŒ…ï¼ŒåŒ…ä¸­åŒ…å«ç®±ã€‚ä¸€ä¸ªåŒ…ä¼šåŒ…å«æœ‰ä¸€ä¸ªÂ Cargo.tomlÂ æ–‡ä»¶ï¼Œé˜è¿°å¦‚ä½•å»æ„å»ºé‡Œé¢çš„ crate
*   ç®±ï¼šç®±æ˜¯äºŒè¿›åˆ¶ç¨‹åºæ–‡ä»¶æˆ–è€…åº“æ–‡ä»¶ï¼Œç®±ä¸­åŒ…å«æ¨¡å—ã€‚åœ¨ [https://crates.io](https://crates.io) è¿™ä¸ªç½‘ç«™ä¸­æœ‰å¾ˆå¤šåˆ«äººå¼€å‘å¥½çš„ç®±ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥è¿™äº›ç®±æå‡æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚
*   æ¨¡å—ï¼šåŸºäºä¸šåŠ¡åŠŸèƒ½çš„å®ç°å’Œä»£ç ç»„ç»‡çš„è€ƒé‡ï¼Œæˆ‘ä»¬å°†åŠŸèƒ½ç›¸ä¼¼æˆ–å…±åŒå®Œæˆä¸€ä¸ªåŠŸèƒ½çš„ä»£ç åˆ†åˆ°ä¸€ä¸ªç»„é‡Œé¢ï¼Œè¿™ä¸ªç»„å°±æ˜¯æ¨¡å—äº†ï¼Œä¸€ä¸ªç®±ä¸­å¾€å¾€åŒ…å«å¤šä¸ªæ¨¡å—ã€‚å½“ç„¶ï¼Œæ¨¡å—ä¸­å¯ä»¥åŒ…å«å­æ¨¡å—ã€‚

è®¿é—®å…¶ä»–modå’Œcrate
-------------

### è®¿é—®æƒé™å’Œå…³é”®å­—

Rust ä¸­é»˜è®¤æ‰€æœ‰é¡¹ï¼ˆå‡½æ•°ã€æ–¹æ³•ã€ç»“æ„ä½“ã€æšä¸¾ã€æ¨¡å—å’Œå¸¸é‡ï¼‰éƒ½æ˜¯ç§æœ‰çš„ã€‚çˆ¶æ¨¡å—ä¸­çš„é¡¹ä¸èƒ½ä½¿ç”¨å­æ¨¡å—ä¸­çš„ç§æœ‰é¡¹ï¼Œä½†æ˜¯å­æ¨¡å—ä¸­çš„é¡¹å¯ä»¥ä½¿ç”¨ä»–ä»¬çˆ¶æ¨¡å—ä¸­çš„é¡¹ã€‚

å…³é”®å­—ï¼š

*   pubï¼šæ·»åŠ  pub è®¿é—®ä¿®é¥°ç¬¦çš„é¡¹å°†è¢«å…¬å¼€ï¼Œæ‰€æœ‰äººå¯ä»¥è®¿é—®
*   useï¼šå°†å…¶ä»–å‘½åç©ºé—´å¼•å…¥å½“å‰ä½œç”¨åŸŸ
*   as ï¼šä½¿ç”¨ as å¯å°†useè¿›æ¥çš„å‘½åç©ºé—´å–ä¸€ä¸ªåˆ«åï¼Œä¸€èˆ¬ç”¨æ¥è§£å†³å½“ä¸¤ä¸ªéœ€ use å¯¹è±¡çš„åç§°ç›¸åŒæ—¶å€™åŒºåˆ†ä»–ä»¬
*   mod ï¼šå®šä¹‰ä¸€ä¸ª module æˆ–è€…å¯¼å…¥ä¸€ä¸ª moduleã€‚

### è®¿é—®å…¶ä»–æ–‡ä»¶ä¸­çš„å¯¹è±¡

*   ä¸€ä¸ªæ–‡ä»¶é»˜è®¤å°±æ˜¯ module ï¼Œæ‰€ä»¥ other\_rs\_file.rs å°±æ˜¯ä¸€ä¸ªåä¸º other\_rs\_file çš„ module
    
*   main.rs ä¸­å¦‚æœè¦ä½¿ç”¨ other\_rs\_file ä¸­çš„å¯¹è±¡éœ€è¦å…ˆå¯¼å…¥è¿™ä¸ª moduleï¼š mod other\_rs\_file ï¼Œä½¿ç”¨ mod::å¯¹è±¡å è®¿é—®å…¶ä¸­å¯¹è±¡
    
*   å¦‚æœ other\_rs\_file.rs ä¸­å®šä¹‰äº†å­ module ï¼Œ main.rs ä»…éœ€å¯¼å…¥é¡¶å±‚ module ï¼ˆå³ mod other\_rs\_fileï¼‰ ï¼Œä½¿ç”¨ mod::å­mod::å¯¹è±¡å è®¿é—®å…¶ä¸­å¯¹è±¡
    
*   rust é»˜è®¤å°†rsæ–‡ä»¶è¯†åˆ«ä¸ºä¸€ä¸ª module å¤„ç†ï¼Œ ä½†æ˜¯æ— æ³•å°†æ–‡ä»¶å¤¹è¯†åˆ«ä¸ºä¸€ä¸ª Â module ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦è®¿é—®entityæ–‡ä»¶å¤¹ä¸­dept.rsæ–‡ä»¶ä¸­çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨entiryæ–‡ä»¶å¤¹ä¸­æ–°å¢ä¸€ä¸ªmod.rs å¹¶åœ¨å…¶ä¸­å®šä¹‰ dept module ï¼Œè®¿é—®å…¶ä¸­å¯¹è±¡çš„æ—¶å€™åŒæ ·ä»…éœ€å¯¼å…¥é¡¶å±‚ mod ï¼Œç„¶åé€šè¿‡ entity::dept::Dept æ–¹å¼è®¿é—® dept å¯¹è±¡ã€‚
    

å·¥ç¨‹ç›®å½•æ–‡ä»¶ç»“æ„ï¼š

    â”‚  main.rs
    â”‚  other_rs_file.rs
    â””â”€entity
            dept.rs
            mod.rs
    

ç¤ºä¾‹ä»£ç ï¼š  
other\_rs\_file.rsï¼š

    
    pub mod other {
    Â  Â  #[derive(Debug)]
    Â  Â  pub struct User {
    Â  Â  Â  Â  //ç»“æ„ä½“å±æ€§é»˜è®¤æ˜¯ç§æœ‰çš„ï¼Œè‹¥å¤–éƒ¨éœ€è¦è®¿é—®éœ€æ·»åŠ pubå…³é”®å­—
    Â  Â  Â  Â  pub name: String,
    Â  Â  Â  Â  pub age: i32,
    Â  Â  }
    Â  Â  fn init_user(n: String) -> User {
    Â  Â  Â  Â  let u = User {
    Â  Â  Â  Â  Â  Â  name: String::from(n),
    Â  Â  Â  Â  Â  Â  age: 100,
    Â  Â  Â  Â  };
    Â  Â  Â  Â  return u;
    Â  Â  }
    Â  Â  pub fn add_user(n: String, a: i32) -> bool {
    Â  Â  Â  Â  return false;
    Â  Â  }
    Â  Â  //æšä¸¾ä¸ç”¨ç»™å…ƒç´ æ·»åŠ  pub ï¼Œåªè¦æšä¸¾æ˜¯å…¬å¼€çš„ï¼Œé‡Œé¢å…ƒç´ å°±æ˜¯å…¬å¼€çš„
    Â  Â  #[derive(Debug)]
    Â  Â  pub enum IpAddrKind {
    Â  Â  Â  Â  IPV4,
    Â  Â  Â  Â  IPV6,
    Â  Â  }
    }
    
    
    

dept.rsï¼š

    #[derive(Debug)]
    pub struct Dept {
    Â  Â  pub name: String,
    Â  Â  pub no: i32,
    }
    

mod.rsï¼š

    pub mod dept;
    

main.rsï¼š

    
    mod other_rs_file;
    mod Â entity;
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  /*
    Â  Â  Â * main.rs åŒçº§ rsæ–‡ä»¶
    Â  Â  Â * å¼•å…¥å…¶ä»–rsæ–‡ä»¶ï¼Œéœ€å…ˆå¯¼å…¥module ï¼Œé€šè¿‡modåç§°ï¼ˆå³æ–‡ä»¶åç§°ï¼‰::å¯¹è±¡åç§° è®¿é—®å…¶å†…éƒ¨å¯¹è±¡
    Â  Â  Â * å¦‚æœåœ¨å…¶ä»–æ–‡ä»¶å†…éƒ¨å®šä¹‰äº†å­ module ï¼Œ å¯¼å…¥æ–¹å¼ä¸å˜ï¼Œè®¿é—®æ–¹å¼ï¼šmodåç§°::å­modåç§°::å¯¹è±¡åç§°
    Â  Â  Â * å¯¼å…¥æ—¶å€™åªå¯¼å…¥é¡¶å±‚mod
    Â  Â  Â */
    Â  Â  let u = other_rs_file::other::User {
    Â  Â  Â  Â  name: String::from("cml"),
    Â  Â  Â  Â  age: 9,
    Â  Â  };
    Â  Â  println!("å®ä¾‹åŒ–å¦å¤–ä¸€ä¸ªrsæ–‡ä»¶ä¸­å®šä¹‰çš„ç»“æ„ä½“ï¼Œu isï¼š {:?}", u);
    Â  Â  /*
    Â  Â  * main.rs ä¸Šçº§æ–‡ä»¶å¤¹ rs æ–‡ä»¶
    Â  Â  * rust é»˜è®¤å°†rsæ–‡ä»¶è¯†åˆ«ä¸ºä¸€ä¸ª module å¤„ç†ï¼Œ ä½†æ˜¯æ— æ³•å°†æ–‡ä»¶å¤¹è¯†åˆ«ä¸ºä¸€ä¸ª Â module ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬è¦è®¿é—®entityæ–‡ä»¶å¤¹ä¸­dept.rsæ–‡ä»¶ä¸­çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨entiryæ–‡ä»¶å¤¹ä¸­æ–°å¢ä¸€ä¸ªmod.rs å¹¶åœ¨å…¶ä¸­å®šä¹‰ dept moduleã€‚
    Â  Â  */
    Â  Â  let d=entity::dept::Dept{
    Â  Â  Â  Â  name:String::from("æŠ€æœ¯éƒ¨é—¨"),
    Â  Â  Â  Â  no:5,
    Â  Â  };
    Â  Â 
    Â  Â  println!("å®ä¾‹åŒ–å¦å¤–ä¸€ä¸ªrsæ–‡ä»¶ä¸­å®šä¹‰çš„ç»“æ„ä½“ï¼Œd isï¼š {:?}", d);
    }
    

mainè¾“å‡ºï¼š

    Hello, world!
    å®ä¾‹åŒ–å¦å¤–ä¸€ä¸ªrsæ–‡ä»¶ä¸­å®šä¹‰çš„ç»“æ„ä½“ï¼Œu isï¼š User { name: "cml", age: 9 }
    å®ä¾‹åŒ–å¦å¤–ä¸€ä¸ªrsæ–‡ä»¶ä¸­å®šä¹‰çš„ç»“æ„ä½“ï¼Œd isï¼š Dept { name: "æŠ€æœ¯éƒ¨é—¨", no: 5 }
    

ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“
------

*   ä½¿ç”¨ use å¯¼å…¥å…¶ä»–çš„ crate
*   é»˜è®¤çš„ crate æºæ˜¯ crate.io è¿™ä¸ªç½‘ç«™
*   å¯¼å…¥å…¶ä»– crate éœ€è¦åœ¨ Cargo.toml ä¸­å®šä¹‰ç›¸å…³ dependenciesã€‚æ ‡å‡†åº“é™¤å¤–ï¼Œæ ‡å‡†åº“ä¸­çš„ crate å¯ä»¥ç›´æ¥å¯¼å…¥ä½¿ç”¨
*   ä½¿ç”¨èŠ±æ‹¬å·å¯¼å…¥ä¸€ä¸ª crate ä¸‹å¤šä¸ª module ï¼šuse std::{self,io,cmp::Ordering}
*   ä½¿ç”¨ \* å·å¯¼å…¥ä¸€ä¸ª crate ä¸‹æ‰€æœ‰ moduleï¼šuse std:ğŸ˜—;

ç¤ºä¾‹ä»£ç ï¼š  
Cargo.tomlï¼š

    [package]
    name = "Crate"
    version = "0.1.0"
    edition = "2021"
    
    
    [dependencies]
    rand = "0.5.5"
    

main.rsï¼š

    
    /*
    * å¯¼å…¥æ ‡å‡†åº“
    */
    use std::fmt::Result as FmtResult;
    use std::io::Result as IoResult;
    // use std::cmp::Ordering
    use std::*;
    use std::{self, cmp::Ordering, io};
    /*
    * å¯¼å…¥å¤–éƒ¨ç¬¬ä¸‰æ–¹åº“
    */
    use rand::{thread_rng, Rng};
    fn main() {
    Â  Â  println!("Hello, world!");
    Â  Â  let fmtr = FmtResult::Ok;
    Â  Â  let ior = IoResult::Ok("æˆåŠŸ");
    Â  Â  println!("fmtr æ— æ³•æ‰“å° , ior is : {:?}", ior);
    Â  Â  //ç”Ÿæˆéšæœºæ•°
    Â  Â  let mut rng = thread_rng();
    Â  Â  let x: u32 = rng.gen();
    Â  Â  println!("x is :{}", x);
    }
    
    
    

å¼‚å¸¸å¤„ç†
====

*   rustä¸­çš„å¼‚å¸¸ä¸å« exception ï¼Œ è€Œæ˜¯å«åš panic ï¼ˆææ…Œï¼‰ï¼Œæ„æ€æ˜¯ç¼–è¯‘å™¨æ‰§è¡Œåˆ°è¿™é‡Œçš„ä»£ç å®³æ€•äº†ï¼Œä¸æ•¢ç»§ç»­æ‰§è¡Œäº†ï¼Œå°±ææ…Œäº†ï¼Œç›¸å½“äºç¨‹åºå°±ç»ˆæ­¢äº†ã€‚
*   rustå®˜æ–¹å¯¹äºé”™è¯¯å¤„ç†æœ‰ä¸¤ä¸ªç±»åˆ«ï¼šå¯æ¢å¤é”™è¯¯ï¼ˆå¦‚æ‰“å¼€æ–‡ä»¶å¤±è´¥ç®—æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œä½†æ˜¯è¿™ç§é”™è¯¯å¯ä»¥é‡è¯•ï¼‰ï¼›ä¸å¯æ¢å¤é”™è¯¯ï¼ˆå¦‚ç´¢å¼•è¶Šç•Œï¼Œè¿™å°±æ˜¯å®æ‰“å®çš„bugäº†ï¼Œç¨‹åºå°†å´©æºƒï¼‰
*   å¯¹äºä¸å¯æ¢å¤çš„é”™è¯¯ï¼Œå®˜æ–¹çš„åšæ³•æ˜¯æä¾›ä¸€ä¸ªResult<T, E> æšä¸¾ç±»æ¥å¤„ç†ï¼Œå¦‚ std::fs::File--->Result ã€‚è‹¥ç¨‹åºè¿è¡ŒæˆåŠŸè¿”å› Ok(T) ï¼Œå³å“åº”ç»“æœï¼Œè‹¥ç¨‹åºè¿è¡Œå‡ºç°é”™è¯¯è¿”å› Err(E) ï¼Œå³é”™è¯¯ä¿¡æ¯ã€‚

å·¥ç¨‹ç»“æ„ï¼š

    â”‚  Cargo.lock
    â”‚  Cargo.toml
    â”‚  hello.txt
    â”œâ”€src
    â”‚      main.rs
    

ç¤ºä¾‹ä»£ç ï¼š

    use std::fs;
    use std::fs::File;
    use std::io;
    use std::io::Read;
    
    fn main() {
        println!("Hello, world!");
    
        let mut f = File::open("hello.txt");
        match f {
            Ok(file) => {
                println!("File opened successfully.");
            }
            Err(err) => {
                //æ‰“å¼€å¤±è´¥
                println!("Failed to open the file.");
                match err.kind() {
                    //æ‰“å¼€å¤±è´¥åŸå› ï¼Œä¸å­˜åœ¨æƒ…å†µåˆ›å»º
                    io::ErrorKind::NotFound => {
                        println!("File Not Found. soon create . ");
                        File::create("hello.txt");
                        fs::write("hello.txt", "I am  hello.txt");
                    }
                    _ => {
                        //å…¶ä»–åŸå› ç›´æ¥æŠ› panic
                        panic!("Failed to open the file.");
                    }
                }
            }
        }
    
        //æ‰“å° txtå†…å®¹
        let mut file = std::fs::File::open("hello.txt").unwrap();
        let mut contents = String::new();
        file.read_to_string(&mut contents).unwrap();
        print!("txt çš„å†…å®¹æ˜¯ï¼š{}", contents);
    }
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!
    Failed to open the file.
    File Not Found. soon create .
    txt çš„å†…å®¹æ˜¯ï¼šI am  hello.txt
    

æ³›å‹
==

æ³›å‹æ¦‚å¿µ
----

æ³›å‹è¿™ç§ç¼–ç¨‹è¯­è¨€å¾—è®¾è®¡ç»é rust ç‹¬æœ‰çš„ï¼Œå®é™…ä¸Šåœ¨C# ï¼Œ Java è¿™äº›è¯­è¨€ä¸­æ—©å°±å¼•å…¥äº†æ³›å‹çš„è®¾è®¡æ€æƒ³ã€‚æ³›å‹å³ç±»å‹çš„æ³›åŒ–ï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™å¹¶ä¸çŸ¥é“å…·ä½“çš„æ•°æ®ç±»å‹æˆ–è€…æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œè€Œæ˜¯å®šä¹‰ä¸€ä¸ªæ ‡è¯†ï¼Œåœ¨è¿è¡Œæ—¶æ­¤æ ‡è¯†å¯åŠ¨æ€æ›¿æ¢ä¸ºå®é™…çš„æ•°æ®ç±»å‹ã€‚å¾ˆæ˜¾ç„¶è¿™ç§è®¾è®¡èƒ½å¤Ÿè®©å¼€å‘äººå‘˜é¿å…ç¼–å†™å¾ˆå¤šç›¸ä¼¼çš„é‡å¤çš„ä»£ç ã€‚

åœ¨ rust ä¸­ï¼Œå¯ä»¥åœ¨å¦‚ä¸‹ä½ç½®ç¼–å†™æ³›å‹ä»£ç ï¼š

*   æ³›å‹å‡½æ•°
*   æ³›å‹ç»“æ„ä½“
*   æ³›å‹æšä¸¾

ç¤ºä¾‹ä»£ç ï¼š

    
    fn main() {
    Â  Â  println!("Hello, world!-->æ³›å‹");
    Â  Â  /*
    Â  Â  Â * æ³›å‹å‡½æ•°
    Â  Â  Â */
    Â  Â  let a = [2, 4, 6, 3, 1];
    Â  Â  println!("æ•°å­—æ•°ç»„ä¸­æœ€å¤§å…ƒç´ æ˜¯ = {}", max(&a));
    Â  Â  let b = ["A", "B", "C"];
    Â  Â  println!("å­—ç¬¦æ•°ç»„ä¸­æœ€å¤§å…ƒç´ æ˜¯ = {}", max(&b));
    Â  Â  /*
    Â  Â  Â * æ³›å‹ç»“æ„ä½“
    Â  Â  Â */
    Â  Â  // i32
    Â  Â  let p1 = Point { x: 1, y: 2 };
    Â  Â  //f64
    Â  Â  let p2 = Point { x: 1.0, y: 2.0 };
    Â  Â  println!("p1 Â ={:?} , p2 = {:?}", p1, p2);
    }
    //æ±‚æœ€å¤§å…ƒç´ 
    fn max<T: std::cmp::PartialOrd>(array: &[T]) -> &T {
    Â  Â  let mut max_index = 0;
    Â  Â  let mut i = 1;
    Â  Â  while i < array.len() {
    Â  Â  Â  Â  if array[i] > array[max_index] {
    Â  Â  Â  Â  Â  Â  max_index = i;
    Â  Â  Â  Â  }
    Â  Â  Â  Â  i += 1;
    Â  Â  }
    Â  Â  return &array[max_index];
    }
    //æ³›å‹ç»“æ„ä½“
    #[derive(Debug)]
    struct Point<T> {
    Â  Â  x: T,
    Â  Â  y: T,
    }
    
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!-->æ³›å‹
    æ•°å­—æ•°ç»„ä¸­æœ€å¤§å…ƒç´ æ˜¯ = 6
    å­—ç¬¦æ•°ç»„ä¸­æœ€å¤§å…ƒç´ æ˜¯ = C
    p1  =Point { x: 1, y: 2 } , p2 = Point { x: 1.0, y: 2.0 }
    

ç‰¹æ€§ï¼ˆæ¥å£ï¼‰
======

ç‰¹æ€§ï¼ˆtraitï¼‰æ¦‚å¿µæ¥è¿‘äº Java ä¸­çš„æ¥å£ï¼ˆInterfaceï¼‰ï¼Œä½†ä¸¤è€…ä¸å®Œå…¨ç›¸åŒã€‚ç‰¹æ€§ä¸æ¥å£ç›¸åŒçš„åœ°æ–¹åœ¨äºå®ƒä»¬éƒ½æ˜¯ä¸€ç§è¡Œä¸ºè§„èŒƒï¼Œå¯ä»¥ç”¨äºæ ‡è¯†å“ªäº›ç±»æœ‰å“ªäº›æ–¹æ³•

ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºç”±å…¶å¯ä¾›è°ƒç”¨çš„æ–¹æ³•æ„æˆã€‚å¦‚æœå¯ä»¥å¯¹ä¸åŒç±»å‹è°ƒç”¨ç›¸åŒçš„æ–¹æ³•çš„è¯ï¼Œè¿™äº›ç±»å‹å°±å¯ä»¥å…±äº«ç›¸åŒçš„è¡Œä¸ºäº†ã€‚trait å®šä¹‰æ˜¯ä¸€ç§å°†æ–¹æ³•ç­¾åç»„åˆèµ·æ¥çš„æ–¹æ³•ï¼Œç›®çš„æ˜¯å®šä¹‰ä¸€ä¸ªå®ç°æŸäº›ç›®çš„æ‰€å¿…éœ€çš„è¡Œä¸ºçš„é›†åˆã€‚

*   ä¸€ä¸ªç»“æ„ä½“å¯ä»¥åŒæ—¶å®ç°å¤šä¸ªæ¥å£ï¼Œä½†æ˜¯ä¸€ä¸ªç»“æ„ä½“çš„ç»§æ‰¿è€…ç±»ï¼ˆå³ impl ï¼Œ rust ä¸­å®ç°ç±»æ— è‡ªå·±çš„ç±»åï¼‰ä»…å¯å®ç°ä¸€ä¸ªæ¥å£
*   trait æ¥å£å¯ä»¥æœ‰é»˜è®¤å®ç°æ–¹æ³•ï¼Œè¿™ä¸ªå°±å’Œjava8ä¸€æ ·ï¼Œæ¥å£å¯ä»¥æœ‰é»˜è®¤çš„å·²å®ç°æ–¹æ³•

ç¤ºä¾‹ä»£ç ï¼š

    
    use std::time::{SystemTime, UNIX_EPOCH};
    fn main() {
    Â  Â  println!("Hello, world!--->ç‰¹æ€§ï¼ˆæ¥å£ï¼‰");
    Â  Â  //å®ä¾‹åŒ–Person
    Â  Â  let p = Person {
    Â  Â  Â  Â  name: String::from("cml"),
    Â  Â  Â  Â  age: 100,
    Â  Â  };
    Â  Â  let d = p.describe();
    Â  Â  println!("d = {}", d);
    Â  Â  let s = p.tostring();
    Â  Â  println!("s={}", s);
    Â  Â  let t = p.nowTime();
    Â  Â  println!("t ={:?}", t);
    }
    //å®šä¹‰ä¸€ä¸ªæè¿°æ¥å£
    trait Descriptive {
    Â  Â  fn describe(&self) -> String;
    Â  Â  //æ¥å£é»˜è®¤æ–¹æ³•
    Â  Â  fn nowTime(&self) -> SystemTime {
    Â  Â  Â  Â  let start = SystemTime::now();
    Â  Â  Â  Â  return start;
    Â  Â  }
    }
    //å®šä¹‰ä¸€ä¸ª tostring æ¥å£
    trait ToString {
    Â  Â  fn tostring(&self) -> String;
    }
    //å®šä¹‰ä¸€ä¸ªç»“æ„ä½“
    #[derive(Debug)]
    struct Person {
    Â  Â  name: String,
    Â  Â  age: u8,
    }
    //ç»“æ„ä½“çš„ä¸€ä¸ªç»§æ‰¿ç±»å®ç°äº† Descriptive æ¥å£
    impl Descriptive for Person {
    Â  Â  fn describe(&self) -> String {
    Â  Â  Â  Â  format!(
    Â  Â  Â  Â  Â  Â  "I am Â  Person , name is : {} , age is : {}",
    Â  Â  Â  Â  Â  Â  self.name, self.age
    Â  Â  Â  Â  )
    Â  Â  }
    }
    impl ToString for Person {
    Â  Â  fn tostring(&self) -> String {
    Â  Â  Â  Â  format!("Person:{{name:{},age:{}}}", self.name, self.age)
    Â  Â  }
    }
    
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!--->ç‰¹æ€§ï¼ˆæ¥å£ï¼‰
    d = I am   Person , name is : cml , age is : 100
    s=Person:{name:cml,age:100}
    t =SystemTime { intervals: 132914629768805244 }
    

æ–‡ä»¶å’ŒIO
=====

rust æ ‡å‡†åº“ä¸­çš„ std::fs å¯ä»¥ç”¨æ¥æ“ä½œæ–‡ä»¶

ç¤ºä¾‹ä»£ç ï¼š

    
    use std::fs;
    use std::fs::OpenOptions;
    use std::io::prelude::*;
    fn main() {
    Â  Â  println!("Hello, world!--->æ–‡ä»¶io");
    Â  Â  //è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¸€æ¬¡æ€§è¯»å–
    Â  Â  //æ–‡ä»¶å†…å®¹ï¼šThis is a text file.
    Â  Â  let text = fs::read_to_string("text.txt").unwrap();
    Â  Â  println!("txtæ–‡ä»¶çš„å†…å®¹æ˜¯ï¼š{}", text);
    Â  Â  //å†™å…¥æ–‡ä»¶ï¼Œè¿½åŠ 
    Â  Â  //è¿½åŠ å®Œæˆæ–‡ä»¶å†…å®¹ï¼š
    Â  Â  append();
    Â  Â  println!("è¿½åŠ åï¼Œtxtæ–‡ä»¶çš„å†…å®¹æ˜¯ï¼š{}", text);
    Â  Â  //å†™å…¥æ–‡ä»¶ï¼Œä¼šè¦†ç›–
    Â  Â  //è¦†ç›–ä¹‹åæ–‡ä»¶å†…å®¹ï¼š
    Â  Â  fs::write("text.txt", "FROM RUST PROGRAM").unwrap();
    Â  Â  println!("è¦†ç›–å†™å…¥åï¼Œtxtæ–‡ä»¶çš„å†…å®¹æ˜¯ï¼š{}", text);
    }
    //è¿½åŠ 
    fn append() -> std::io::Result<()> {
    Â  Â  let mut file = OpenOptions::new().append(true).open("text.txt")?;
    Â  Â  file.write(b" APPEND WORD")?;
    Â  Â  Ok(())
    }
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!--->æ–‡ä»¶io
    txtæ–‡ä»¶çš„å†…å®¹æ˜¯ï¼šThis is a text file.
    è¿½åŠ åï¼Œtxtæ–‡ä»¶çš„å†…å®¹æ˜¯ï¼šThis is a text file.
    è¦†ç›–å†™å…¥åï¼Œtxtæ–‡ä»¶çš„å†…å®¹æ˜¯ï¼šThis is a text file.
    

é¢å‘å¯¹è±¡
====

é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰æ€æƒ³æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œæ˜¯ä¸€ç§æ€æƒ³æŒ‡å¯¼ï¼Œå›´ç»•â€œå¯¹è±¡â€å±•å¼€ï¼Œä»ä¸‡ç‰©çš†æ˜¯å¯¹è±¡çš„è§’åº¦å‡ºå‘ï¼Œä¸€ä¸ª crate ï¼Œ ä¸€ä¸ª module ï¼Œä¸€ä¸ª struct ï¼Œä¸€ä¸ªæšä¸¾ç­‰ç­‰éƒ½æ˜¯ä¸€ä¸ªä¸ªç‹¬ç«‹çš„å¯¹è±¡ï¼Œèƒ½è‡ªä¸»è¡¨è¾¾ä¸€ä¸ªäº‹ç‰©ã€æŸç§ç‰¹å¾ã€‚è€Œè¿ç”¨å°è£…ã€ç»§æ‰¿ã€å¤šæ€ç­‰æ‰‹æ®µå¯ä»¥è®©å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´äº§ç”ŸæŸç§è”ç³»ï¼Œè¿›è€Œè¡¨è¾¾æ›´å¤šçš„äº‹ç‰©ï¼Œè§£å†³æ›´å¤šçš„é—®é¢˜ã€‚

é¢å‘å¯¹è±¡æ€æƒ³æ˜¯æ„å»ºå¤§å‹åº”ç”¨è½¯ä»¶ç³»ç»Ÿçš„åŸºçŸ³ã€‚

rust è¯­è¨€ä¸­ å¯ä»¥é€šè¿‡ ç»“æ„ä½“ï¼Œæšä¸¾ï¼Œç‰¹æ€§ï¼ˆtraitï¼‰ç­‰æ¥å®ç°oopæ€æƒ³ã€‚

å¹¶å‘ç¼–ç¨‹
====

rust ä¸­çš„å¹¶å‘ç¼–ç¨‹ä¸»è¦å¾—ç›Šä¸ çº¿ç¨‹ ã€ æ¶ˆæ¯ä¼ é€’å’Œäº’æ–¥é”ã€‚  
Rust è¯­è¨€æ˜¯æ»¡è¶³å¤šçº¿ç¨‹ç‰¹æ€§çš„ï¼Œæ‰€ä»¥ rust å¯ä»¥æ»¡è¶³ ä¸»-->å­ å¤šä»»åŠ¡åº”ç”¨åœºæ™¯ã€‚

æ¶ˆæ¯ä¼ é€’æœ‰ç‚¹ç±»ä¼¼ä¸æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä½†æ¶ˆæ¯é˜Ÿåˆ—ä¸€èˆ¬è·¨è¿›ç¨‹æˆ–çº¿ç¨‹ï¼Œè€Œ rust ä¸­çš„æ¶ˆæ¯ä¼ é€’ä¸»è¦æ˜¯ä¸»å­çº¿ç¨‹ä¸­æ•°æ®çš„ä¼ é€’ã€‚

çº¿ç¨‹
--

*   rust æ ‡å‡†åº“ std::thread ä¸­çš„ spawn å‡½æ•°ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹
*   é€šè¿‡åœ¨ä¸»çº¿ç¨‹ä¸­ join å­çº¿ç¨‹ï¼Œè®©ä¸»çº¿ç¨‹é˜»å¡ï¼Œç¡®ä¿æ‰€æœ‰å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å†ç»§ç»­æ‰§è¡Œå­çº¿ç¨‹ã€‚è¿™ç§æƒ…å†µåœ¨å®é™…å¼€å‘ä¸­éå¸¸å¸¸è§ï¼Œæ¯”å¦‚åœ¨è·å–ç”¨æˆ·ä¸ªäººä¸­å¿ƒä¿¡æ¯æ¥å£ä¸­ï¼Œæˆ‘ä»¬å°†è·å–åŸºæœ¬ä¿¡æ¯ã€è®¢å•ä¿¡æ¯ã€ç§¯åˆ†ä¿¡æ¯ã€ç”¨æˆ·æ¶ˆæ¯ä¿¡æ¯åˆ†åˆ«æ”¾åœ¨4ä¸ªå­çº¿ç¨‹ä¸­å¹¶å‘æ‰§è¡Œï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­ç­‰å¾…æ‰€æœ‰å­çº¿ç¨‹éƒ½å“åº”äº†å†å°†ç»“æœæ±‡æ€»è¿”å›ç»™è°ƒç”¨æ–¹ã€‚

ç¤ºä¾‹ä»£ç ï¼š

    
    use std::thread;
    use std::time::Duration;
    fn main() {
    Â  Â  println!("[ä¸»çº¿ç¨‹] Hello, world!--->çº¿ç¨‹");
    Â  Â  //åˆ›å»ºå­çº¿ç¨‹
    Â  Â  for item in 0..5 {
    Â  Â  Â  Â  println!("[ä¸»çº¿ç¨‹] å³å°†åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ï¼Œå½“å‰å¾ªç¯å˜é‡:{}", item);
    Â  Â  Â  Â  let child_thread = thread::spawn(|| {
    Â  Â  Â  Â  Â  Â  for i in 0..2 {
    Â  Â  Â  Â  Â  Â  Â  Â  println!("[å­çº¿ç¨‹] hi number {} from the spawned thread!", i);
    Â  Â  Â  Â  Â  Â  Â  Â  thread::sleep(Duration::from_millis(1));
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  });
    Â  Â  }
    Â  Â  for i in 0..3 {
    Â  Â  Â  Â  println!("[ä¸»çº¿ç¨‹] hi number {} from the main thread!", i);
    Â  Â  Â  Â  thread::sleep(Duration::from_millis(1));
    Â  Â  }
    Â  Â  //çº¿ç¨‹join
    Â  Â  let child1 = thread::spawn(|| {
    Â  Â  Â  Â  println!("[child-1]hi I am spawned thread!");
    Â  Â  Â  Â  thread::sleep(Duration::from_millis(1));
    Â  Â  });
    Â  Â  let child2 = thread::spawn(|| {
    Â  Â  Â  Â  println!("[child-2]hi I am spawned thread!");
    Â  Â  Â  Â  thread::sleep(Duration::from_millis(1));
    Â  Â  });
    Â  Â  child1.join().unwrap();
    Â  Â  child2.join().unwrap();
    Â  Â  println!("[main]hi I am main thread!");
    }
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    [ä¸»çº¿ç¨‹] Hello, world!--->çº¿ç¨‹
    [ä¸»çº¿ç¨‹] å³å°†åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ï¼Œå½“å‰å¾ªç¯å˜é‡:0
    [ä¸»çº¿ç¨‹] å³å°†åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ï¼Œå½“å‰å¾ªç¯å˜é‡:1
    [å­çº¿ç¨‹] hi number 0 from the spawned thread!
    [ä¸»çº¿ç¨‹] å³å°†åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ï¼Œå½“å‰å¾ªç¯å˜é‡:2
    [å­çº¿ç¨‹] hi number 0 from the spawned thread!
    [ä¸»çº¿ç¨‹] å³å°†åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ï¼Œå½“å‰å¾ªç¯å˜é‡:3
    [å­çº¿ç¨‹] hi number 0 from the spawned thread!
    [ä¸»çº¿ç¨‹] å³å°†åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ï¼Œå½“å‰å¾ªç¯å˜é‡:4
    [å­çº¿ç¨‹] hi number 0 from the spawned thread!
    [ä¸»çº¿ç¨‹] hi number 0 from the main thread!
    [å­çº¿ç¨‹] hi number 0 from the spawned thread!
    [å­çº¿ç¨‹] hi number 1 from the spawned thread!
    [å­çº¿ç¨‹] hi number 1 from the spawned thread!
    [å­çº¿ç¨‹] hi number 1 from the spawned thread!
    [å­çº¿ç¨‹] hi number 1 from the spawned thread!
    [ä¸»çº¿ç¨‹] hi number 1 from the main thread!
    [å­çº¿ç¨‹] hi number 1 from the spawned thread!
    [ä¸»çº¿ç¨‹] hi number 2 from the main thread!
    [child-1]hi I am spawned thread!
    [child-2]hi I am spawned thread!
    [main]hi I am main thread!
    

æ¶ˆæ¯ä¼ é€’
----

ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†å­çº¿ç¨‹è·å¾—äº†ä¸»çº¿ç¨‹çš„å‘é€è€… txï¼Œå¹¶è°ƒç”¨äº†å®ƒçš„ send æ–¹æ³•å‘é€æ•°æ®ï¼Œç„¶åä¸»çº¿ç¨‹å°±é€šè¿‡å¯¹åº”çš„æ¥æ”¶è€… rx æ¥æ”¶åˆ°äº†å‘é€çš„æ•°æ®ã€‚

æ— æ³•åœ¨å­çº¿ç¨‹ä¸­å‘é€è€Œåœ¨å¦å¤–ä¸€ä¸ªå­çº¿ç¨‹ä¸­æ¥æ”¶

ç¤ºä¾‹ä»£ç ï¼š

    use std::sync::mpsc;
    use std::thread;
    fn main() {
    Â  Â  println!("Hello, world!--->æ¶ˆæ¯ä¼ é€’");
    Â  Â  let p1 = Person {
    Â  Â  Â  Â  active: true,
    Â  Â  Â  Â  name: String::from("cml"),
    Â  Â  Â  Â  email: String::from("cnaylor@163.com"),
    Â  Â  Â  Â  sign_in_count: 99,
    Â  Â  Â  Â  tuple: (8, 8),
    Â  Â  };
    Â  Â  let (tx, rx) = mpsc::channel();
    Â  Â  thread::spawn(move || {
    Â  Â  Â  Â  tx.send(p1).unwrap();
    Â  Â  });
    Â  Â  let received = rx.recv().unwrap();
    Â  Â  println!("Got: {:?}", received);
    }
    #[derive(Debug)]
    struct Person {
    Â  Â  active: bool,
    Â  Â  name: String,
    Â  Â  email: String,
    Â  Â  sign_in_count: u64,
    Â  Â  tuple: (u32, u32),
    }
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!--->æ¶ˆæ¯ä¼ é€’
    Got: Person { active: true, name: "cml", email: "cnaylor@163.com", sign_in_count: 99, tuple: (8, 8) }
    

äº’æ–¥é”
---

äº’æ–¥é”ï¼ˆmutexï¼‰æ˜¯Â mutual exclusionÂ çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»»æ„æ—¶åˆ»ï¼Œå…¶åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®æŸäº›æ•°æ®ã€‚ä¸ºäº†è®¿é—®äº’æ–¥å™¨ä¸­çš„æ•°æ®ï¼Œçº¿ç¨‹é¦–å…ˆéœ€è¦é€šè¿‡è·å–äº’æ–¥å™¨çš„Â é”ï¼ˆlockï¼‰æ¥è¡¨æ˜å…¶å¸Œæœ›è®¿é—®æ•°æ®ã€‚é”æ˜¯ä¸€ä¸ªä½œä¸ºäº’æ–¥å™¨ä¸€éƒ¨åˆ†çš„æ•°æ®ç»“æ„ï¼Œå®ƒè®°å½•è°æœ‰æ•°æ®çš„æ’ä»–è®¿é—®æƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬æè¿°äº’æ–¥å™¨ä¸ºé€šè¿‡é”ç³»ç»ŸÂ ä¿æŠ¤ï¼ˆguardingï¼‰å…¶æ•°æ®ã€‚

ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªå€¼ï¼Œå¹¶åœ¨å¤šä¸ªå­çº¿ç¨‹ä¸­ä¿®æ”¹æ­¤å€¼ï¼Œæœ€ç»ˆç­‰æ‰€æœ‰å­çº¿ç¨‹å¤„ç†å®Œæ¯•ï¼Œä¸»çº¿ç¨‹æ‰“å°æœ€ç»ˆå€¼ã€‚ä¸ºäº†è®©å˜é‡èƒ½å¤Ÿè·¨çº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œå¼•å…¥äº†std::sync::Arc è¿™ä¸ªç»“æ„ä½“ã€‚

ç¤ºä¾‹ä»£ç ï¼š

    
    use std::sync::{Arc, Mutex};
    use std::thread;
    fn main() {
    Â  Â  println!("Hello, world!--->äº’æ–¥é”");
    Â  Â  //Arc åŸå­å¼•ç”¨è®¡æ•°å™¨ï¼Œç¡®ä¿åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å…±äº«æ•°æ®ï¼›counteråˆå§‹å€¼ä¸º0 Â  Â 
    Â  Â  let counter = Arc::new(Mutex::new(0));
    Â  Â  println!("counter åˆå§‹å€¼ä¸ºï¼š0");
    Â  Â  //å®šä¹‰ä¸€ä¸ªå­çº¿ç¨‹é›†åˆ
    Â  Â  let mut handles = vec![];
    Â  Â  for _ in 0..10 {
    Â  Â  Â  Â  //å°†counterå€¼ä»ä¸»çº¿ç¨‹ä¸­å…‹éš†ï¼Œå¹¶èµ‹å€¼ç»™ç§æœ‰å˜é‡ counter
    Â  Â  Â  Â  let counter = Arc::clone(&counter);
    Â  Â  Â  Â  let handle = thread::spawn(move || {
    Â  Â  Â  Â  Â  Â  //è·å–äº’æ–¥é”ï¼Œå¹¶å°†counterå€¼åŠ ä¸€
    Â  Â  Â  Â  Â  Â  let mut num = counter.lock().unwrap();
    Â  Â  Â  Â  Â  Â  *num += 1;
    Â  Â  Â  Â  Â  Â  let thread_id = thread::current().id();
    Â  Â  Â  Â  Â  Â  println!("[å­çº¿ç¨‹ï¼š{:?}]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š{}", thread_id, num);
    Â  Â  Â  Â  });
    Â  Â  Â  Â  //å°†åˆ›å»ºçš„å­çº¿ç¨‹å­˜å‚¨åˆ°å­çº¿ç¨‹é›†åˆä¸­
    Â  Â  Â  Â  handles.push(handle);
    Â  Â  }
    Â  Â  //å°†æ‰€æœ‰çš„å­çº¿ç¨‹joinåˆ°ä¸»çº¿ç¨‹ï¼Œç¡®ä¿ä¸»çº¿ç¨‹ç­‰å¾…æ‰€æœ‰å­çº¿ç¨‹æ‰§è¡ŒæˆåŠŸ
    Â  Â  for handle in handles {
    Â  Â  Â  Â  handle.join().unwrap();
    Â  Â  }
    Â  Â  let result = *counter.lock().unwrap();
    Â  Â  println!("Result: {}", result);
    }
    
    

ä»¥ä¸Šä»£ç è¾“å‡ºï¼š

    Hello, world!--->äº’æ–¥é”
    counter åˆå§‹å€¼ä¸ºï¼š0
    [å­çº¿ç¨‹ï¼šThreadId(2)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š1
    [å­çº¿ç¨‹ï¼šThreadId(4)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š2
    [å­çº¿ç¨‹ï¼šThreadId(3)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š3
    [å­çº¿ç¨‹ï¼šThreadId(5)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š4
    [å­çº¿ç¨‹ï¼šThreadId(8)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š5
    [å­çº¿ç¨‹ï¼šThreadId(6)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š6
    [å­çº¿ç¨‹ï¼šThreadId(7)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š7
    [å­çº¿ç¨‹ï¼šThreadId(9)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š8
    [å­çº¿ç¨‹ï¼šThreadId(10)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š9
    [å­çº¿ç¨‹ï¼šThreadId(11)]ä¸­å°† counter çš„å€¼ä¿®æ”¹ä¸ºï¼š10
    Result: 10
    

ä»£ç 
==

æœ¬æ–‡ç¤ºä¾‹ä»£ç ç»´æŠ¤åœ¨giteeä¸Šé¢ï¼š[https://gitee.com/naylor\_personal/rust-hello-world](https://gitee.com/naylor_personal/rust-hello-world)

**æ‰“å¼€ä»£ç ä»“åº“ä¸­çš„ Sport æ–‡ä»¶å¤¹ï¼Œæœ‰æƒŠå–œï¼ï¼ï¼**

è¯´æ˜
==

*   å‹˜è¯¯ï¼šæœ¬æ–‡ç¯‡å¹…è¾ƒé•¿ã€æ¶‰åŠå†…å®¹è¾ƒå¤šï¼Œè‹¥é˜…è¯»è¿‡ç¨‹ç§å‘ç°é”™è¯¯ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£
*   ç›®çš„ï¼šæœ¬æ–‡ç»éä¼ ç»Ÿæ„ä¹‰ä¸Šé¢çš„æŠ€æœ¯åšæ–‡ï¼Œä»…ä½œä¸ºå­¦ä¹ rustçš„ç¬”è®°ï¼Œæˆ–è€…è¯´æ˜¯å­¦ä¹ rustçš„ä¸€ä¸ªæ•™ç¨‹ã€‚æ–‡ä¸­æ¶µç›–rustå¤§éƒ¨åˆ†åŸºç¡€çŸ¥è¯†ï¼Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥ä½œä¸ºæ‰‹å†Œç¿»é˜…
*   å¿ƒå¾—ï¼šæœ¬æ–‡ä¸»è¦ä½¿ç”¨ä¸‹ç­å’Œå‘¨æœ«æ—¶é—´æ–­æ–­ç»­ç»­ç¼–å†™ï¼Œå†æ—¶è¶…è¿‡ä¸€ä¸ªæœˆã€‚çºµè§‚æ•´ä¸ªè¿‡ç¨‹ï¼Œå¼€å¤´å’Œç»“å°¾æ˜¯å–œæ‚¦çš„ï¼Œä¸­é—´çš„è¿‡ç¨‹æ˜¯ç›¸å½“çš„æ¯ç‡¥ã€‚å¼€å¤´ä¸ºå³å°†æŒæ¡ä¸€é—¨æ–°è¯­è¨€çš„ helloï¼Œworld ç¼–å†™æ–¹å¼è€Œæ„Ÿåˆ°å…´å¥‹ã€‚ç»“æŸåå›é¡¾äº†æ•´ä¸ªè¿‡ç¨‹ï¼Œå‘ç°é™¤äº†å­¦ä¼šäº†rust çš„hello,world ä¹‹å¤–ï¼Œå…¶å®ä¹ŸåŒæ­¥å›é¡¾äº†ä¸€äº›å·²ç»ä½¿ç”¨è¿‡çš„å…¶ä»–è¯­è¨€çš„åŸºç¡€çŸ¥è¯†ï¼Œå°¤å…¶æ˜¯javaã€‚ä¸­é—´è¿‡ç¨‹æ˜¯å¯¹æœªçŸ¥äº‹ç‰©çš„æ¢ç´¢å’Œå¯¹è‡ªæˆ‘ç†è§£çš„æ±‚è¯ï¼Œç®€å•æ¥è¯´å°±æ˜¯å…ˆå¾—æƒ³åŠæ³•ç´¢å–rustä¸­æœ‰å“ªäº›å†…å®¹ï¼Œç„¶åå½¢æˆè‡ªå·±çš„ç†è§£ï¼Œæœ€ååœ¨æ•´ç†æ–‡ç« å’Œç¼–å†™ç¤ºä¾‹ä»£ç çš„æ—¶å€™ä¸æ–­æ¨å¯¼å’ŒéªŒè¯è‡ªå·±çš„ç†è§£æ˜¯å¦æ­£ç¡®ã€‚

å¼•ç”¨
==

*   ä¸‹è½½ï¼š[https://www.rust-lang.org/zh-CN/tools/install](https://www.rust-lang.org/zh-CN/tools/install)
*   Bç«™æ•™ç¨‹ï¼š[https://www.bilibili.com/video/BV1hp4y1k7SV?spm\_id\_from=333.999.0.0](https://www.bilibili.com/video/BV1hp4y1k7SV?spm_id_from=333.999.0.0)
*   runoobæ•™ç¨‹ï¼š[https://www.runoob.com/rust/rust-tutorial.html](https://www.runoob.com/rust/rust-tutorial.html)
*   Rustç¨‹åºè®¾è®¡ä¸­æ–‡ç‰ˆï¼š[https://rust.bootcss.com/title-page.html](https://rust.bootcss.com/title-page.html)
*   [https://kaisery.github.io/trpl-zh-cn/](https://kaisery.github.io/trpl-zh-cn/)
*   createï¼š[https://crates.io/](https://crates.io/)

é‚®ç®±ï¼šcnaylor@163.com  
æŠ€æœ¯äº¤æµQQç¾¤ï¼š1158377441