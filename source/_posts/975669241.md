---
layout: post
title: "DVWAç³»åˆ—1ï¼šæ­å»º DVWA ç¯å¢ƒ"
date: "2023-01-18T05:15:08.373Z"
---
DVWAç³»åˆ—1ï¼šæ­å»º DVWA ç¯å¢ƒ
==================

DVWAç³»åˆ—1ï¼šæ­å»º DVWA ç¯å¢ƒ
==================

DVWA æ˜¯ä¸€ä¸ªåˆæ³•çš„æ¼æ´æµ‹è¯•ã€å­¦ä¹ ç¯å¢ƒï¼Œå…ˆå¼•ç”¨ä¸€æ®µå®˜æ–¹çš„ä»‹ç»ï¼š

> Damn Vulnerable Web Application (DVWA) is a PHP/MySQL web application that is damn vulnerable. Its main goal is to be an aid for security professionals to test their skills and tools in a legal environment, help web developers better understand the processes of securing web applications and to aid both students & teachers to learn about web application security in a controlled class room environment.

ä¸€ç›´ä»äº‹ Web ç«¯çš„åº”ç”¨å¼€å‘ï¼Œå¯¹äºä¸€äº›æ¼æ´æœ‰æ‰€è€³é—»ã€‚ç»ˆç©¶æ˜¯çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç¼ºä¹å®é™…æ“ä½œæ€»æ„Ÿè§‰ç†è§£ä¸æ·±åˆ»ï¼Œå› æ­¤æƒ³åˆ©ç”¨ DVWA å¥½å¥½å­¦ä¹ å®è·µä¸€ä¸‹ï¼Œä¹Ÿè®°å½•ä¸‹è‡ªå·±çš„ç†è§£å’Œå­¦ä¹ è¿‡ç¨‹ã€‚æœ¬æ¬¡å°±å…ˆä»å®‰è£…ç¯å¢ƒå¼€å§‹å§XDã€‚

DVWA è¿è¡Œåœ¨ **LAMP ç¯å¢ƒ**ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å®‰è£…ä¸‹ Linuxï¼ŒApacheï¼ŒMySQLï¼ŒPHPã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ—¶çš„å®‰è£…ä¸æ˜¯æˆ‘ä»¬æå¼€å‘æ—¶ç¯å¢ƒçš„å®‰è£…ï¼Œä¸æ˜¯ç‰ˆæœ¬æ¯”è¾ƒæ–°çš„å°±æ˜¯å¥½çš„ã€‚å³ä½¿ç‰ˆæœ¬è€ä¸€äº›ï¼Œèƒ½ç”¨å°±å¯ä»¥äº†ã€‚æ¯•ç«Ÿæˆ‘ä»¬çš„ç›®çš„æ˜¯ä½¿ç”¨ DVWA æ¥å­¦ä¹ ï¼Œä¸æ˜¯å¼€å‘ DVWA ğŸ˜ƒã€‚ä¹‹å‰ä¸€ç›´æƒ³é…ç½® MySQL 5.7 å’Œ PHP7ï¼Œç»“æœè¸©äº†ä¸å°‘å‘ä¹Ÿæ²¡æœ‰é…å¥½ã€‚å› æ­¤æœ¬æ–‡ç¯å¢ƒçš„æ­å»ºä¸»è¦ç›®æ ‡æ˜¯å¿«é€Ÿå’Œæ–¹ä¾¿ï¼Œå°½é‡**é‡‡ç”¨ yum å®‰è£…çš„æ–¹å¼**ã€‚

_**å„ä¸ªç»„ä»¶çš„ç‰ˆæœ¬å·ä¸º CentOS 7.9ï¼ŒApahce 2.4.6ï¼ŒMySQL 5.5.62ï¼ŒPHP 5.4ã€‚**_

> Damn Vulnerable Web Application is damn vulnerable! Do not upload it to your hosting provider's public html folder or any Internet facing servers, as they will be compromised. It is recommended using a virtual machine (such as VirtualBox or VMware), which is set to NAT networking mode.

_**ï¼ï¼ï¼åº”å°½é‡åœ¨è™šæ‹Ÿæœºä¸­è¿›è¡Œï¼Œä¸è¦æ”¾åœ¨ å…¬ç½‘æœåŠ¡å™¨ä¸Š æˆ– å¯¹å¤–æš´éœ²ï¼Œä»¥å…é€ æˆä¸å¿…è¦çš„é£é™©ã€‚ï¼ï¼ï¼**_

### 0\. å‰ç½®å‡†å¤‡

_è™šæ‹Ÿæœºå®‰è£… CentOS å’Œ æ›´æ¢è½¯ä»¶æºæœ‰è¾ƒå¤šæ–‡ç« ï¼Œå°±ä¸åœ¨æ­¤å±•å¼€äº†ã€‚_

æ–°è£…çš„ CentOS 7.9 ä¸­ï¼Œ**é˜²ç«å¢™ å’Œ SELinux é»˜è®¤æ˜¯å¼€å¯çš„**ï¼Œè¿™ä¸ªä¼šé€ æˆåç»­æ“ä½œçš„ä¸ä¾¿ï¼Œå¦‚ _é˜»æ­¢ä»å¤–éƒ¨è¿æ¥ Apache å’Œ MySQLï¼Œé˜»æ­¢ PHP è¿æ¥æ•°æ®åº“_ï¼Œå› æ­¤éœ€è¦å…ˆå…³é—­è¿™ä¸¤ä¸ªï¼š

    // å…³é—­é˜²ç«å¢™
    > systemctl stop firewalld.service
    // ç¦ç”¨é˜²ç«å¢™è‡ªå¯åŠ¨
    > systemctl disable firewalld.service
    
    // ä¸´æ—¶å…³é—­ SELinux
    > setenforce 0
    // æ°¸ä¹…å…³é—­
    > vi /etc/selinux/config
    SELINUX=enforcing æ”¹ä¸º SELINUX=disabled
    

### 1\. å®‰è£… Apache

è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œç›´æ¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯ï¼š

    // å®‰è£…
    > yum install -y httpd
    
    // å¯åŠ¨
    > systemctl start httpd
    

### 2\. å®‰è£… MySQL 5.5

#### A. å®‰è£…ä¸‹è½½å·¥å…· **wget**

    > yum install -y wget
    

#### B. åˆ é™¤åŸæœ‰çš„ MariaDB ç›¸å…³å†…å®¹

    > yum -y remove maria*
    

#### C. å¼€å§‹å®‰è£…

å…ˆæ‰¾åˆ°å®‰è£…åŒ…çš„é“¾æ¥ï¼Œæ‰“å¼€ [MySQL çš„ç½‘ç«™](https://dev.mysql.com/downloads/)ã€‚ç”±äºæˆ‘ä»¬ä¸‹è½½çš„æ˜¯æ—©å·²è¿‡æ—¶çš„ç‰ˆæœ¬ï¼Œå› æ­¤ç‚¹å‡»å³ä¸‹è§’çš„ **Download Archives**ï¼Œç‚¹å‡» **MySQL Community Server**ã€‚

![](https://img2023.cnblogs.com/blog/1611896/202301/1611896-20230117214556745-859982848.png)

é€‰æ‹©ç‰ˆæœ¬å’Œæ“ä½œç³»ç»Ÿåä¼šè‡ªåŠ¨ç­›é€‰ï¼Œæˆ‘ä»¬ä¸‹è½½ _MySQL Server_ å’Œ _Client Utilities_ å³å¯ï¼Œå‘½ä»¤ä¸ºï¼š

    // ä¸‹è½½
    > wget https://downloads.mysql.com/archives/get/p/23/file/MySQL-server-5.5.62-1.el7.x86_64.rpm
    > wget https://downloads.mysql.com/archives/get/p/23/file/MySQL-client-5.5.62-1.el7.x86_64.rpm
    
    // å®‰è£…
    > yum install -y MySQL-server-5.5.62-1.el7.x86_64.rpm
    > yum install -y MySQL-client-5.5.62-1.el7.x86_64.rpm
    

#### D. å¯åŠ¨ä¸é…ç½®

    // å¯åŠ¨ MySQL
    > systemctl start mysql
    // å¼€æœºè‡ªå¯åŠ¨ MySQL
    > systemctl enable mysql
    

ä¹‹åè¾“å…¥å‘½ä»¤ `mysql -u root` å¹¶å›è½¦ï¼Œè¿›å…¥ mysql shell è®¾ç½®å¯†ç ï¼š

    # mysql shell ä¸­
    
    // è®¾ç½®å¯†ç ä¸º 123456
    > set password=password('123456');
    
    // è®¾ç½®å¯ä»¥ä»ä»»æ„ ip ä»¥ root èº«ä»½è®¿é—®(æ³¨æ„å¯†ç è¦ä¸ä¹‹å‰çš„ä¸€è‡´)
    > grant all privileges on *.* to 'root'@'%' identified by '123456';
    // åˆ·æ–°æƒé™
    > flush privileges;
    

ä½¿ç”¨ `exit` é€€å‡º mysql shellï¼Œå¹¶é‡å¯ mysql æœåŠ¡ï¼š

    > systemctl restart mysql
    

æ­¤æ—¶å°è¯•ä¸€ä¸‹ï¼Œå°±å¯ä»¥åœ¨å¤–éƒ¨è®¿é—®äº†ã€‚

_**ï¼ï¼ï¼åªé’ˆå¯¹ MySQL 5.5ï¼Œæ›´é«˜çš„ç‰ˆæœ¬æ“ä½œæ­¥éª¤ä¸å®Œå…¨ç›¸åŒï¼ï¼ï¼**_

#### One More Thing

å¦‚æœæŸä¸€å¤©è¿™ä¸ªåŒ…ä¸æƒ³è¦äº†ï¼Œæƒ³è¦**å¸è½½**ã€‚å¯ä»¥å…ˆæ‰§è¡Œå‘½ä»¤æŸ¥æ‰¾è¦å¸è½½çš„åŒ…ï¼š

    > rpm -qa | grep -i mysql
    
    // å‘½ä»¤ç»“æœï¼š
    // MySQL-server-5.5.62-1.el7.x86_64
    // MySQL-client-5.5.62-1.el7.x86_64
    

æ­¤æ—¶å¦‚æœå‚»å‚»åœ°è¾“å…¥ yum erase MySQL-server-5.5.62-1.el7.x86\_64 å¯å°±å¤§é”™ç‰¹å¤šäº†ã€‚å› ä¸ºåé¢æ˜¯ç‰ˆæœ¬å·ï¼ŒçœŸæ­£çš„åŒ…åæ˜¯ **MySQL-server**ï¼Œå› æ­¤è¦ä½¿ç”¨å‘½ä»¤**å¸è½½**ï¼š

    > yum erase MySQL-server
    > yum erase MySQL-client
    

### 3\. å®‰è£… PHP 5.4

ä½¿ç”¨å‘½ä»¤å®‰è£…å³å¯ï¼š

    > yum install -y php php-pdo php-mysqlnd php-cli php-gd
    

### 4\. è®¾ç½® DVWA é¡¹ç›®

ä½¿ç”¨è‡ªå·±å–œæ¬¢çš„æ–¹å¼ï¼Œä¸‹è½½ [**DVWA é¡¹ç›®**](https://github.com/digininja/DVWA/) å¹¶æ‹·è´åˆ° Apache çš„ç›®å½• **/var/www/html** ä¸‹ï¼Œç±»ä¼¼ä¸æ‹·è´ç½‘é¡µåˆ° WEB æœåŠ¡å™¨ã€‚ä¹‹åæ‹·è´ä¸€ä»½é…ç½®æ¨¡æ¿ï¼š

    // æ‹·è´é…ç½®æ¨¡æ¿
    > cp /var/www/html/config/config.inc.php.dist /var/www/html/config/config.inc.php
    

ä½¿ç”¨ vim ä¿®æ”¹å¯¹åº”çš„æ•°æ®åº“é…ç½®ï¼š

![](https://img2023.cnblogs.com/blog/1611896/202301/1611896-20230117214619803-887716043.png)

æ­¤æ—¶è®¿é—®ä¸‹ DVWA é¦–é¡µï¼Œå¯ä»¥çœ‹åˆ°ç½‘ç«™å·²ç»åŸºæœ¬å¯ä»¥è¿è¡Œäº†ã€‚

ç‚¹å‡»å·¦ä¾§çš„ **Setup/Reset DB**ï¼Œè¿›è¡Œæ•°æ®åº“çš„åˆå§‹åŒ–æ“ä½œã€‚å‘ç°è¿˜æœ‰å¾ˆå¤šæ ‡æ³¨ä¸ºçº¢è‰²çš„è­¦å‘Šéœ€è¦å¯¹åº”å¤„ç†ä¸‹ï¼š

![](https://img2023.cnblogs.com/blog/1611896/202301/1611896-20230117214635132-1958199885.png)

å¯ä»¥çœ‹åˆ°é—®é¢˜æœ‰ï¼š  
a. ç¦ç”¨äº† PHP çš„ allow\_url\_include å‡½æ•°  
b. reCAPTCHA key æœªé…ç½®ï¼ˆè°·æ­Œçš„éªŒè¯ç æœåŠ¡ï¼Œæš‚æ—¶ä¸é…ç½®ï¼‰  
c. ç›®å½• /var/www/html/hackable/uploads å’Œ /var/www/html/config æ²¡æœ‰å†™å…¥æƒé™ï¼Œæ–‡ä»¶ /var/www/html/external/phpids/0.6/lib/IDS/tmp/phpids\_log.txt æ²¡æœ‰å†™å…¥æƒé™

#### A. å†é…ç½® PHP

ä½¿ç”¨ vim ä¿®æ”¹ **/etc/php.ini**ï¼ŒæŸ¥æ‰¾ _allow\_url\_include_ å¹¶ä¿®æ”¹ä¸º _On_ã€‚

![](https://img2023.cnblogs.com/blog/1611896/202301/1611896-20230117214649046-624114175.png)

#### B. å†é…ç½®æ–‡ä»¶ç³»ç»Ÿ

    // æ·»åŠ å†™å…¥æƒé™
    > chmod a+w /var/www/html/hackable/uploads
    > chmod a+w /var/www/html/config
    > chmod a+w /var/www/html/external/phpids/0.6/lib/IDS/tmp/phpids_log.txt
    
    // é…ç½®å®Œæˆåéœ€è¦é‡å¯ httpd
    > systemctl restart httpd
    

åˆ·æ–°é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ï¼ˆé™¤äº†äºŒç»´ç ï¼‰é…ç½®éƒ½å·²ç»æ²¡æœ‰é—®é¢˜äº†ã€‚

![](https://img2023.cnblogs.com/blog/1611896/202301/1611896-20230117214704970-711338805.png)

ç‚¹å‡»ä¸‹æ–¹ **Create / Reset Database** æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°æç¤ºæˆåŠŸäº†ã€‚

![](https://img2023.cnblogs.com/blog/1611896/202301/1611896-20230117214715604-1689210371.png)

å·¦ä¾§æœ‰å¾ˆå¤šå…¸å‹çš„æ¼æ´é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨é¡µé¢ä¸Šæ–¹æç¤ºçš„ **ç”¨æˆ·åï¼šadminï¼Œå¯†ç  password** æ„‰å¿«deç©è€äº†XDã€‚å¦‚æœè¦è°ƒæ•´éš¾åº¦ï¼Œå¯ä»¥é€šè¿‡å·¦ä¾§çš„ **DVWA Security** æ“ä½œã€‚

### 5\. åè®°

å¼€å§‹çš„æ—¶å€™å®‰è£… PHP å’Œ Apache é‡åˆ°äº†å¾ˆå¤šå‘ï¼Œåœ¨è¿™é‡Œç®€å•æï¼ˆtuï¼‰è¿°ï¼ˆcaoï¼‰ä¸€ä¸‹å§ã€‚ä¸€å¼€å§‹æ˜¯ä½¿ç”¨ yum å®‰è£…çš„ httpdï¼Œä¹‹åå®‰è£… PHP7 æ—¶ï¼Œä¹Ÿæ˜¯æ·»åŠ è½¯ä»¶æºåä½¿ç”¨ yum å®‰è£…çš„ï¼Œä½†æ˜¯å¥½åƒåªå®‰è£…äº† Apache httpd çš„ä¸€ä¸ªæ¨¡å—ã€‚php -v å‘½ä»¤æ— æ³•è¿è¡Œï¼Œè€Œä¸”æ— æ³•è¿æ¥æ•°æ®åº“ã€‚ä¹‹åæŸ¥åˆ°çš„éƒ½æ˜¯ä½¿ç”¨æºç ç¼–è¯‘å®‰è£…ï¼Œè€Œä¸”ç¼–è¯‘æ—¶ php çš„é…ç½®ä¹Ÿå„ä¸ç›¸åŒï¼Œä¼¼ä¹è¿˜éœ€è¦ä»¥æºç ç¼–è¯‘çš„æ–¹å¼å®‰è£… Apache httpdã€‚æ„Ÿè§‰è¿‡äºå¤æ‚ï¼Œåæ¥çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œé‡Œé¢ä½¿ç”¨ PHP5 ä¹Ÿå¯ä»¥è¿è¡Œ DVWAï¼Œå› æ­¤è½¬å˜æ€è·¯ï¼Œä½¿ç”¨ä½ç‰ˆæœ¬è½¯ä»¶ã€‚

### å‚è€ƒï¼š

[DVWA GitHub](https://github.com/digininja/DVWA/)  
[å…³é—­ SELinux](https://cloud.tencent.com/developer/article/2064145)  
[CentOS7é˜²ç«å¢™å…³é—­](https://blog.csdn.net/shuikanshui/article/details/124661400)  
[CentOS7å®‰è£…mysql5.5](https://blog.csdn.net/m0_67392010/article/details/123867669)  
[mysql è¿œç¨‹ error 2002,è¿œç¨‹æœåŠ¡å™¨çš„phpmyadmin 2002é”™è¯¯](https://blog.csdn.net/weixin_36216860/article/details/118814989)  
[1 Way To Install DVWA On CentOS 7](https://blog.eldernode.com/install-dvwa-on-centos-7/)  
[DVWAé¶åœºæ­å»º](https://blog.csdn.net/m0_65712192/article/details/127940215)  
[Centos7æºç å®‰è£…mysql55+apache+php7(php-fpm)](https://www.ngui.cc/el/1233049.html?action=onClick)  
[Linuxä¸‹PHP7å®‰è£…ä¸Apacheé…ç½®](https://zhuanlan.zhihu.com/p/111724786)  
[linux yumæŸ¥çœ‹å·²å®‰è£…åŒ…,æŸ¥çœ‹yumå·²å®‰è£…çš„åŒ…](https://blog.csdn.net/weixin_33881426/article/details/116875068)  
[Webå®‰å…¨â€”LAMPæ­å»ºPHPç½‘ç«™(æŒç»­å®Œå–„ï¼‰](https://blog.csdn.net/weixin_44431280/article/details/123781657)  
[yum httpd php7\_Centos 7åˆ©ç”¨yumå®‰è£…apache+mysql 8+php7 ä¸€ç¯‡æå®šï¼](https://blog.csdn.net/weixin_32937021/article/details/115096885)