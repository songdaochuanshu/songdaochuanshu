---
layout: post
title: "Git 小技巧：忽略某些文件的更改"
date: "2023-03-09T01:18:02.721Z"
---
Git 小技巧：忽略某些文件的更改
=================

![Git 小技巧：忽略某些文件的更改](https://img2023.cnblogs.com/blog/2962155/202303/2962155-20230309011750595-1777441200.png) 作为一枚合格的代码贡献者，时常需要跟踪自己或者团队代码的变更，那么就很有必要了解并掌握一些软件代码版本管理工具或者系统，比如 Git、SVN、CVS、VSS等。

\*以下内容为本人的学习笔记，如需要转载，请声明原文链接 [微信公众号「ENG八戒」](https://mp.weixin.qq.com/s/dp9Mwq7vf0ASF_FftBN8Ww)[https://mp.weixin.qq.com/s/dp9Mwq7vf0ASF\_FftBN8Ww](https://mp.weixin.qq.com/s/dp9Mwq7vf0ASF_FftBN8Ww)

![](https://img2023.cnblogs.com/blog/2962155/202303/2962155-20230309011635995-646771224.jpg)

作为一枚合格的代码贡献者，时常需要跟踪自己或者团队代码的变更，那么就很有必要了解并掌握一些软件代码版本管理工具或者系统，比如 Git、SVN、CVS、VSS等。

版本管理工具比较多，都有存在的理由，虽然现在大型的软件工程都流行使用 git，不过大部分的工程也需要小而美的工具，比如 VSS。我还记得当年新入职的技术经理就带着我们没几个人的小团队上手了第一款软件版本管理工具 VSS，它的特点就是非常简单，每个文件只能同时由一个成员修改，改完释放权限等待其它成员继续使用。

不过，这里主要介绍主流的版本管理工具 Git，有一些使用 Git 过程中的小技巧想要分享给大家。

![](https://img2023.cnblogs.com/blog/2962155/202303/2962155-20230309011636012-1542101723.jpg)

很多时候，由于偶然的原因，把一些不需要共享给团队其他人的文件也提交到了代码仓库，那么当这类文件有更改的时候，怎么让 git 自动忽略掉这些文件而避免被提交上去呢？

方法就是，为工程添加文件 gitignore。

文件介绍
====

在 Git 管理的工程下，文件有几种划分：

1.  tracked – 这种是被 Git 最新所追踪到的并且已经暂存和提交到仓库的所有文件。
2.  untracked – 这种是在 Git 管理的工程目录下创建的但还没有被暂存文件或提交到仓库的文件。
3.  ignored – 这种是被 Git 管理工具可以忽略的文件。

Git 会对工程文件夹内的 gitignore 文件做检索，如果找到该文件，则根据 gitignore 指定的文件、文件夹，执行忽略并放弃跟踪范围内的文件。gitignore 指定的文件就是 ignored 文件。

创建 gitignore
============

一般是在 Git 管理的工程根目录创建文件 gitignore，并且在文件名前添加点号(.)，这是为了让文件管理器识别这个文件为默认隐藏。所以在类 unix 系统下，直接输入 ls 是看不到这个文件的，需要添加选项 -a。

    ls -a
    

其实 gitignore 文件的存放位置没有固定，这就意味着在同一个工程下可以存在多个 gitignore 文件。

在类 unix 系统下，都可以这样创建 gitignore 文件

    touch .gitignore
    

git 如何忽略文件或者文件夹
===============

一般，日常开发中，我们认为提交到仓库的工程文件应该是最简化的。只要文件或者文件夹可以通过工程构建过程自动重新生成的，那么它们都可以不需要被版本管理工具 git 追踪到。如何利用好 gitignore 文件呢？

gitignore 内可以指定单个或者多个文件，甚至是文件夹。每一行填一个范式(pattern)，范式可以是文件名或者文件夹名字，其中还可包含通配符 \*。通配符的使用可以增强指定文件范围的灵活性。填写的文件名或者文件夹可以是相对路径或者绝对路径，相对路径是以 gitignore 文件所在目录开始。

我们来看一个简单的 gitignore 文件长什么样子

![](https://img2023.cnblogs.com/blog/2962155/202303/2962155-20230309011635990-2107136466.jpg)

第一行，直接指定了一个文件名 notice.txt，意思就是相对路径下 notice.txt 将会被 git 忽略追踪。

第二行，指定的是一个文件夹名字 project，后边还带上了 / 以标明是文件夹，意思就是相对路径下 project 文件夹内所有文件以及子文件都将会被 git 忽略追踪。

第三行，指定了 app 开头的所有文件名，意思就是相对路径下 app 开头的所有文件将会被 git 忽略追踪。

第四行，是的，把 gitignore 文件自己也指定为忽略追踪。

在 gitignore 文件里添加好范式后，就可以查看一下 git 管理的工程目录是否还在追踪那些应该被忽略掉的文件了

    git status
    

如果文件已经被提交？
==========

在使用 gitignore 文件来添加忽略文件的时候，经常会碰到有些文件或者文件夹明明已经被添加到 gitignore 文件里了，但就是还会被 git 追踪到有更新的内容。

这是因为，这些文件或者文件夹在之前的提交记录里，已经被暂存和提交到仓库了。那么怎么办？

第一步，先把这些文件从仓库中移除，比如我有个构建的中间文件 xxx 曾经被错误提交上去了

    git rm xxx
    

但是，上面的操作会把本地工程目录中的 xxx 文件也删除掉，如果不需要在本地也删除，可以在 rm 指令后边添加选项 --cached

    git rm --cached xxx
    

* * *

今天就先介绍这么多，如果你有更好的技巧，期待和你的交流！

微信公众号 **ENG八戒**