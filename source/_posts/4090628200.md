---
layout: post
title: "Java8æ–°ç‰¹æ€§â€”å››å¤§å†…ç½®å‡½æ•°å¼æ¥å£"
date: "2022-11-10T12:42:39.563Z"
---
Java8æ–°ç‰¹æ€§â€”å››å¤§å†…ç½®å‡½æ•°å¼æ¥å£
==================

ğŸ’£ Java8æ–°ç‰¹æ€§â€”â€”å››å¤§å†…ç½®å‡½æ•°å¼æ¥å£
======================

* * *

é¢„å¤‡çŸ¥è¯†
----

### èƒŒæ™¯

Lambda çš„è®¾è®¡è€…ä»¬ä¸ºäº†è®©ç°æœ‰çš„åŠŸèƒ½ä¸ Lambda è¡¨è¾¾å¼è‰¯å¥½å…¼å®¹ï¼Œè€ƒè™‘äº†å¾ˆå¤šæ–¹æ³•ï¼Œäºæ˜¯äº§ç”Ÿäº†å‡½æ•°æ¥å£è¿™ä¸ªæ¦‚å¿µã€‚

### ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£ï¼Ÿ

`å‡½æ•°å¼æ¥å£`æŒ‡çš„æ˜¯ä¸€ä¸ª**æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•**ï¼Œä½†æ˜¯**å¯ä»¥æœ‰å¤šä¸ªéæŠ½è±¡æ–¹æ³•**çš„æ¥å£ï¼Œè¿™æ ·çš„æ¥å£å¯ä»¥éšå¼è½¬æ¢ä¸º Lambda è¡¨è¾¾å¼ã€‚

ä½†æ˜¯åœ¨å®è·µä¸­ï¼Œå‡½æ•°å¼æ¥å£éå¸¸è„†å¼±ï¼Œåªè¦æŸä¸ªå¼€å‘è€…åœ¨è¯¥æ¥å£ä¸­æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è¯¥æ¥å£å°±ä¸å†æ˜¯å‡½æ•°å¼æ¥å£è¿›è€Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚ä¸ºäº†å…‹æœè¿™ç§ä»£ç å±‚é¢çš„è„†å¼±æ€§ï¼Œå¹¶æ˜¾å¼è¯´æ˜æŸä¸ªæ¥å£æ˜¯å‡½æ•°å¼æ¥å£ï¼ŒJava 8 æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ³¨è§£`@FunctionalInterface`ï¼Œä¸¾ä¸ªç®€å•çš„å‡½æ•°å¼æ¥å£çš„å®šä¹‰ï¼š

    @FunctionalInterfaceÂ 
    publicÂ interfaceÂ GreetingServiceÂ {Â 
    Â Â Â Â voidÂ sayMessage(StringÂ message);Â 
    }Â 
    

Java7 åªèƒ½é€šè¿‡åŒ¿åå†…éƒ¨ç±»è¿›è¡Œç¼–ç¨‹ï¼Œä¾‹å¦‚ï¼š

    GreetingServiceÂ greetServiceÂ =Â newÂ GreetingService()Â {Â 
    Â 
    Â Â Â Â @OverrideÂ 
    Â Â Â Â publicÂ voidÂ sayMessage(StringÂ message)Â {Â 
    Â Â Â Â Â Â Â Â System.out.println("HelloÂ "Â +Â message);Â 
    Â Â Â Â }Â 
    };Â 
    greetService.sayMessage("world");Â 
    

Java8 å¯ä»¥é‡‡ç”¨ Lambda è¡¨è¾¾æ–¹è¿›è¡Œç¼–ç¨‹ï¼Œä¾‹å¦‚ï¼š

    GreetingServiceÂ greetServiceÂ =Â messageÂ ->Â System.out.println("HelloÂ "Â +Â message);Â 
    greetService.sayMessage("world");Â 
    

ç›®å‰ Java åº“ä¸­çš„æ‰€æœ‰ç›¸å…³æ¥å£éƒ½å·²ç»å¸¦æœ‰è¿™ä¸ªæ³¨è§£äº†ï¼Œå®è·µä¸Š**java.lang.Runnable**å’Œ**java.util.concurrent.Callable**æ˜¯å‡½æ•°å¼æ¥å£çš„æœ€ä½³ä¾‹å­!

### @FunctionalInterfaceæ³¨è§£

Java 8ä¸ºå‡½æ•°å¼æ¥å£å¼•å…¥äº†ä¸€ä¸ªæ–°æ³¨è§£`@FunctionalInterface`ï¼Œä¸»è¦ç”¨äº**ç¼–è¯‘çº§é”™è¯¯æ£€æŸ¥**ï¼ŒåŠ ä¸Šè¯¥æ³¨è§£ï¼Œå½“ä½ å†™çš„æ¥å£ä¸ç¬¦åˆå‡½æ•°å¼æ¥å£å®šä¹‰çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚

**æ­£ç¡®ä¾‹å­**ï¼Œæ²¡æœ‰æŠ¥é”™ï¼š

    /**
     * @Description FunctionalInterface
     * @Author vchicken
     * @Date 2022/9/24 14:46
     */
    @FunctionalInterface
    public interface TestFunctionalInterface {
    
        void sayMessage(String message);
        
    }
    

**é”™è¯¯ä¾‹å­**ï¼Œæ¥å£ä¸­åŒ…å«äº†ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œè¿åäº†å‡½æ•°å¼æ¥å£çš„å®šä¹‰ï¼ŒEclipseæŠ¥é”™æç¤ºå…¶ä¸æ˜¯å‡½æ•°å¼æ¥å£ã€‚

![img](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-09-24/2a3bad8c-4775-456f-8112-b63188436c4b_%E6%B3%A8%E8%A7%A3@FunctionalInterface%E5%8F%8D%E4%BE%8B.png)

**æé†’ï¼šåŠ ä¸åŠ @FunctionalInterfaceå¯¹äºæ¥å£æ˜¯ä¸æ˜¯å‡½æ•°å¼æ¥å£æ²¡æœ‰å½±å“ï¼Œè¯¥æ³¨è§£çŸ¥è¯†æé†’ç¼–è¯‘å™¨å»æ£€æŸ¥è¯¥æ¥å£æ˜¯å¦ä»…åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚**

å››å¤§å‡½æ•°å¼æ¥å£
-------

### 1.Functionæ¥å£

#### ä»€ä¹ˆæ˜¯Functionæ¥å£ï¼Ÿ

![image-20221110115452820](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-11-10/94b1fbc4-86b4-424d-8fbc-c07367d41b3b_Function%E5%87%BD%E6%95%B0.png)

ä»Functionæ¥å£çš„æºä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒJDK1.8ä¹‹åæ‰åŠ å…¥è¿™ä¸ªæ¥å£ã€‚Functionalæ¥å£ç±»ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•å¾…å®ç°ï¼Œç¬¦åˆå‡½æ•°å¼æ¥å£(æŒ‡çš„æ˜¯ä¸€ä¸ª**æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•**ï¼Œä½†æ˜¯**å¯ä»¥æœ‰å¤šä¸ªéæŠ½è±¡æ–¹æ³•**çš„æ¥å£)ï¼Œå› æ­¤Functionæ¥å£å¯ä»¥ç”¨Lambdaè¡¨è¾¾å¼â€”â€”è¿™ä¸ªæ–¹æ³•å°±æ˜¯applyã€‚

ä»æºç å¯ä»¥çœ‹å‡ºï¼Œ**å…¥å‚å’Œå‡ºå‚ç±»å‹ï¼Œç”¨æ³›å‹åŠ¨æ€æŒ‡å®šã€‚applyçš„å…·ä½“é€»è¾‘å°±ç›¸å½“äºæ˜¯å…¥å‚è½¬åŒ–ä¸ºå‡ºå‚çš„å…·ä½“é€»è¾‘ã€‚ä¹Ÿå°±ç›¸å½“äºæ˜¯y = f(x)è¿™ä¸ªé‡Œé¢çš„ï¼Œæ˜ å°„æ³•åˆ™fã€‚å…·ä½“é€»è¾‘éœ€è¦æˆ‘ä»¬ç”¨åŒ¿åå†…éƒ¨ç±»æˆ–è€…Lambdaï¼Œå†™æ–¹æ³•ä½“æ¥å®ç°**ã€‚å› æ­¤è¿™ä¸ªæ¥å£åˆå«`å‡½æ•°å‹æ¥å£`ã€‚

ä¸‹é¢æˆ‘ä»¬æ¥ç”¨ä»£ç ä¸¾æ —å¦‚ä½•ä½¿ç”¨Functionæ¥å£ï¼š

    public class FunctionTest {
    
        public static void main(String[] args) {
    
            // å¦‚æœå…¥å‚ä¸ºnullï¼Œåˆ™å›å‚ä¸º0ï¼Œå¦åˆ™è¿”å›å…¥å‚çš„å€¼ä½œä¸ºå‡ºå‚
            Function<Integer, Integer> function1 = s -> s == null ? 0 : s;
    
            // å°†å…¥å‚çš„å€¼+1åä½œä¸ºå›å‚è¿”å›
            Function<Integer, Integer> function2 = s -> s + 1;
    
            // å¦‚æœå…¥å‚ä¸ºnullï¼Œåˆ™å›å‚ä¸º""ï¼Œå¦åˆ™è¿”å›å…¥å‚çš„å€¼ä½œä¸ºå‡ºå‚
            Function<String, String> function3 = s -> s == null ? "ç©ºçš„" : s;
    
            System.out.println(function1.apply(null));
            System.out.println(function1.apply(100));
    
            System.out.println(function2.apply(10));
    
            System.out.println(function3.apply(null));
            System.out.println(function3.apply("hello world!"));
            
            // andThenæ˜¯å…ˆæ‰§è¡Œå‰é¢çš„æ“ä½œï¼Œç„¶åæ‰§è¡ŒandThenä¹‹åçš„æ“ä½œ
            Function<Integer, Integer> first = x -> x * x;
            Function<Integer, Integer> after = y -> y * 2;
    
            System.out.println(first.apply(3));
            System.out.println(after.apply(3));
            int res = first.andThen(after).apply(4);
            System.out.println(res);
        }
    }
    

æ‰§è¡Œç»“æœ

    0
    100
    11
    ç©ºçš„
    hello world!
    9
    6
    32
    

ä»ä¸Šé¢çš„æ —å­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š

**JavaæŠŠè¿™äº›æ˜ å°„è§„åˆ™ï¼Œä¹Ÿå°±æ˜¯y = f(x)ä¸­çš„ã€fã€‘æŠ½è±¡æˆäº†è¿™ä¸ªFunctionæ¥å£çš„applyé€»è¾‘ã€‚ç„¶åxå’Œyï¼Œè‡ªå˜é‡å’Œå› å˜é‡ï¼Œä¹Ÿå°±æ˜¯å…¥å‚å‡ºå‚ï¼ŒJavaä½¿ç”¨äº†æ‰©å±•æ€§æ›´å¼ºçš„æ³›å‹å‚æ•°ç±»å‹ï¼Œè€Œä¸æ˜¯å›ºå®šObjectå…¥å‚å‡ºå‚ã€‚å› ä¸ºå›ºå®šObjectçš„è¯è¿˜è¦æ¶‰åŠåˆ°ç±»å‹è½¬æ¢ï¼Œè¿˜æœ‰å¯èƒ½æŠ¥ClassCastå¼‚å¸¸ï¼Œå¾ˆéº»çƒ¦**

å†çœ‹ä¸€ä¸ªæ —å­ï¼š

    /**
     * @author vchicken
     * @version 1.0
     * @description FunctionTest
     * @date 2022/11/10 12:10:06
     */
    public class FunctionTest<T,R> {
    
        public static void main(String[] args) {
            FunctionTest<Integer, Integer> functionTest1 = new FunctionTest<>();
            System.out.println(functionTest1.functionTest(null, s -> s == null ? 0 : s));
            System.out.println(functionTest1.functionTest(100, s -> s == null ? 0 : s));
    
            System.out.println(functionTest1.functionTest(10, s -> s + 1));
    
            FunctionTest<String, String> functionTest2 = new FunctionTest<>();
            System.out.println(functionTest2.functionTest(null, s -> s == null ? "ç©ºçš„" : s));
            System.out.println(functionTest2.functionTest("hello world!", s -> s == null ? "ç©ºçš„" : s));
        }
    
        public R functionTest(T in,Function<T,R> function){
            return function.apply(in);
        }
    }
    

æ‰§è¡Œç»“æœï¼š

    0
    100
    11
    ç©ºçš„
    hello world!
    

ç»“åˆä¸¤ä¸ªæ —å­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼š

> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Functionæ¥å£æ¥å°†åŒä¸€ä¸ªæ–¹æ³•çš„å¤„ç†é€»è¾‘æŠ½è±¡å‡ºæ¥ï¼Œåœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå°†å¤„ç†é€»è¾‘ä»¥Lambdaè¡¨è¾¾å¼çš„å½¢å¼ä¼ å…¥ï¼Œå®ç°åŒä¸€ä¸ªæ–¹æ³•å¯ä»¥å¤„ç†ä¸åŒçš„ä»£ç é€»è¾‘ï¼Œè€Œä¸”ä½¿ç”¨æ³›å‹æ¥è¡¨ç¤ºæ–¹æ³•çš„å‡ºå…¥å‚ï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„ç±»å‹è½¬æ¢å’Œå¼‚å¸¸å‘ç”Ÿã€‚@vchicken

#### Functionæ¥å£åœ¨JDKä¸­çš„åº”ç”¨

åœ¨JDK1.8ä¸­çš„æ–°å±æ€§Streamä¸­ï¼Œå°±ä½¿ç”¨åˆ°äº†Functionæ¥å£ï¼Œçœ‹ä¸‹é¢çš„æºç ï¼š

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-11-10/a8569888-e829-4461-8c0e-7239637e0f35_Stream-function.png)

é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹çœ‹æ€æ ·ä½¿ç”¨mapè¿™ä¸ªæ¥å£

    public static void main(String[] args) {
            Stream<Integer> stream = Stream.of(-1,0,1,2,3,4);
            Stream<Integer> stream1 = stream.map(integer -> integer + 1);
            stream1.forEach(System.out::println);
        }
    

æ‰§è¡Œç»“æœï¼š

    0
    1
    2
    3
    4
    5
    

æ¡ˆä¾‹ï¼šå°†æ•°ç»„ä¸­çš„æ•°ï¼Œä¾æ¬¡å¹³æ–¹ï¼Œç­‰åˆ°ä¸€ä¸ªä¸€ä¸ªæ–°çš„æ•°ç»„

    List<Integer> myList = new ArrayList<>();
            myList.add(-2);
            myList.add(0);
            myList.add(1);
            myList.add(3);
            myList.add(5);
            myList.add(7);
            List<Integer> collect = myList.stream().map(integer -> integer*integer).collect(Collectors.toList());
            collect.forEach(System.out::println);
    

æ‰§è¡Œç»“æœï¼š

    4
    0
    1
    9
    25
    49
    

### 2.Consumeræ¥å£

#### ä»€ä¹ˆæ˜¯Consumeræ¥å£ï¼Ÿ

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-11-10/5a4efb87-740c-4d9c-85d7-def23ff56a4a_consumer.png)

ä»æºç å¯ä»¥çœ‹å‡ºï¼ŒConsumerä¸Functionç±»ä¼¼ï¼Œåªæœ‰ä¸€ä¸ªacceptæŠ½è±¡æ–¹æ³•å¾…å®ç°ï¼Œåªä¸è¿‡å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼ŒConsumerçš„acceptä½¿ç”¨voidä¿®é¥°ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œè€ŒFunctionæœ‰è¿”å›å€¼ã€‚

Consumeræ¥å£åˆç§°ä¸º`æ¶ˆè´¹å‹æ¥å£`ï¼Œé¡¾åæ€ä¹‰ï¼Œå…¥å‚ä¼ å…¥åï¼Œè¢«acceptæ–¹æ³•æ¶ˆè´¹æ‰äº†ï¼Œä»€ä¹ˆéƒ½æ²¡å¾—åˆ°ã€‚

ä¸¾ä¸ªæ —å­ï¼š

        public static void main(String[] args) {
            Consumer<Object> consumer1 = new Consumer<Object>() {
                @Override
                public void accept(Object o) {
                    System.out.println("è¿™æ¬¡æ¶ˆè´¹äº†:" + o.toString());
                }
            };
    
            consumer1.accept("100wå…ƒåœ¨åŒåä¸€ï¼è¿™ä¸‹ç©·æ­»äº†ï¼");
    
            Consumer<String> consumer2 = s -> System.out.println("è¿™æ¬¡æ¶ˆè´¹äº†:" + s);
    
            consumer2.accept("120wå…ƒåœ¨åŒåäºŒï¼åˆç©·æ­»äº†ï¼");
        }
    

æ‰§è¡Œç»“æœï¼š

    è¿™æ¬¡æ¶ˆè´¹äº†:100wå…ƒåœ¨åŒåä¸€ï¼è¿™ä¸‹ç©·æ­»äº†ï¼
    è¿™æ¬¡æ¶ˆè´¹äº†:120wå…ƒåœ¨åŒåäºŒï¼åˆç©·æ­»äº†ï¼
    

åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥æå–å…¬å…±æ–¹æ³•ä¸ºï¼š

    /**
     * @author vchicken
     * @version 1.0
     * @description ComsumerTest
     * @date 2022/11/10 17:14:11
     */
    public class ConsumerTest<T> {
    
        public static void main(String[] args) {
    
            ConsumerTest<String> consumerTest = new ConsumerTest<>();
            consumerTest.accept("100wå…ƒåœ¨åŒåä¸€ï¼è¿™ä¸‹ç©·æ­»äº†ï¼", s -> System.out.println("è¿™æ¬¡æ¶ˆè´¹äº†:" + s));
            consumerTest.accept("120wå…ƒåœ¨åŒåäºŒï¼åˆç©·æ­»äº†ï¼", s -> System.out.println("è¿™æ¬¡æ¶ˆè´¹äº†:" + s));
    
        }
    
        public void accept(T in, Consumer<? super T> consumer) {
            consumer.accept(in);
        }
    }
    
    

æ‰§è¡Œç»“æœï¼š

    è¿™æ¬¡æ¶ˆè´¹äº†:100wå…ƒåœ¨åŒåä¸€ï¼è¿™ä¸‹ç©·æ­»äº†ï¼
    è¿™æ¬¡æ¶ˆè´¹äº†:120wå…ƒåœ¨åŒåäºŒï¼åˆç©·æ­»äº†ï¼
    

#### Consumeræ¥å£åœ¨JDKä¸­çš„åº”ç”¨

![image-20221110174025534](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-11-10/4f9753c3-7365-4b13-82b6-7cf46936813e_Stream-consumer.png)

åŒæ ·çš„ï¼Œæˆ‘ä»¬ä»¥Streamä¸­çš„forEachä¸ºä¾‹ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š

     Stream<Integer> stream = Stream.of(-1,0,1,2,3,4);
     stream.forEach(s-> System.out.println(s));
    

æ‰§è¡Œç»“æœï¼š

    -1
    0
    1
    2
    3
    4
    

åŒæ ·çš„æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨æ¥æ‰“å°ï¼Œæ•ˆæœä¸€è‡´

    stream.forEach(System.out::println);
    

> å¯¹äºæ–¹æ³•å¼•ç”¨ä¸äº†è§£çš„äº²ï¼Œä¹Ÿå¯ä»¥é˜…è¯»è¿™ç¯‡æ–‡ç« [Java8 æ–°ç‰¹æ€§ - æ–¹æ³•å¼•ç”¨](https://www.cnblogs.com/wtao0730/p/16877925.html) @vchicken

### 3.Suppileræ¥å£

#### ä»€ä¹ˆæ˜¯Suppileræ¥å£ï¼Ÿ

æ—¢ç„¶æˆ‘ä»¬ä¸Šé¢è¯´åˆ°äº†Consumerä¸º`æ¶ˆè´¹å‹æ¥å£`ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œé‚£è‚¯å®šæœ‰`ç”Ÿäº§å‹æ¥å£`æˆ–è€…ä¹Ÿå¯ä»¥æˆä¸º`ä¾›ç»™å‹æ¥å£`â€”â€”Supplieræ¥å£ï¼Œçœ‹ä¸‹å›¾æºç ï¼š

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-11-10/a23b5092-1bdf-4e46-8d62-4b448c7aed81_supplier.png)

ç”±æºç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒSupplieræ¥å£åªæœ‰ä¸€ä¸ªå¾…å®çš„getæ–¹æ³•ï¼Œå±äºæ— å‚æœ‰è¿”å›å€¼çš„æŠ½è±¡æ–¹æ³•ã€‚ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š

     public static void main(String[] args) {
    
            // ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²
            Supplier<String> supplier1 = () -> "abcde";
    
            // ç”Ÿæˆä¸€ä¸ªéšæœºæ•°
            Supplier<Integer> supplier2 = () -> new Random().nextInt(10);
    
            // äº§ç”Ÿä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸
            Supplier<RuntimeException> supplier3 = () -> new RuntimeException();
    
            System.out.println(supplier1.get());
            System.out.println(supplier2.get().intValue());
            System.out.println(supplier3.get());
        }
    

æ‰§è¡Œç»“æœï¼š

    abcde
    2
    java.lang.RuntimeException
    

#### Supplieræ¥å£åœ¨JDKä¸­çš„åº”ç”¨

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-11-10/3af23929-5890-4f28-848d-6aaaec88162b_Stream-supplier.png)

`generate`æ–¹æ³•è¿”å›ä¸€ä¸ªæ— é™è¿ç»­çš„æ— åºæµï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ ç”±æä¾›çš„ä¾›åº”å•†(`Supplier`)ç”Ÿæˆã€‚`generate`æ–¹æ³•ç”¨äºç”Ÿæˆå¸¸é‡æµå’Œéšæœºå…ƒç´ æµã€‚çœ‹ä¸‹é¢ä¾‹å­ï¼š

    public static void main(String[] args) {
    
            // ç”Ÿæˆéšæœºæ•°
            Stream.generate(() -> new Random().nextInt(10));
            stream.forEach(System.out::println);
    
            // ç”Ÿæˆéšæœºå¸ƒå°”æµ
            Stream.generate(() -> new Random().nextBoolean())
                    .forEach(System.out::println);
    
            // ç”Ÿæˆå¸¸é‡æµ
            Stream.generate(() -> "Hello World!")
                    .forEach(System.out::println);
    
        }
    

æ‰§è¡Œç»“æœï¼š

    2
    5
    1
    --- #ç•¥
    
    true
    false
    true
    --- #ç•¥
    
    Hello World!
    Hello World!
    Hello World!
    --- #ç•¥
    

ç”±äº`generate`è¿”å›æ— é™è¿ç»­æµï¼Œä¸ºäº†é™åˆ¶æµä¸­å…ƒç´ çš„æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`Stream.limit`æ–¹æ³•

     public static void main(String[] args) {
    	Stream.generate(() -> new Random().nextInt(10)).limit(3)
    	   .forEach(e -> System.out.println(e));
    	
    	Stream.generate(() -> new Random().nextBoolean()).limit(3)
    	   .forEach(e -> System.out.println(e));
    	
    	Stream.generate(() -> "Hello World!").limit(3)
    	   .forEach(e -> System.out.println(e));
      }
    

æ‰§è¡Œç»“æœï¼š

    3
    6
    3
    true
    false
    false
    Hello World!
    Hello World!
    Hello World!
    

### 4.Predicateæ¥å£

#### ä»€ä¹ˆæ˜¯Predicateæ¥å£ï¼Ÿ

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-11-10/865c7007-2648-4c7e-850d-cee33a3324ea_Predicate.png)

Predicateæ¥å£åˆç§°ä¸º`æ–­è¨€å‹æ¥å£`ï¼Œtest()æ–¹æ³•æœ‰å‚ä½†æ˜¯è¿”å›å€¼ç±»å‹æ˜¯å›ºå®šçš„booleanï¼Œçœ‹ä¸‹é¢ä¾‹å­ï¼š

    public static void main(String[] args) {
            Predicate<String> predicate = (s) -> s.length() > 0;
            
            // æµ‹è¯•å­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯å¦>0
            System.out.println(predicate.test("hello"));
    
            // ç»“æœå–å
            System.out.println(predicate.negate().test("hello"));
    
    
            System.out.println("=====or / and======");
            System.out.println(predicate.test(""));
            // å¢åŠ æˆ–åˆ¤æ–­ï¼ŒäºŒè€…æ»¡è¶³å…¶ä¸€åˆ™ä¸ºtrue
            System.out.println(predicate.or(s -> s.equals("")).test(""));
            // å¢åŠ ä¸åˆ¤æ–­ï¼ŒäºŒè€…éƒ½æ»¡è¶³åˆ™ä¸ºtrue
            System.out.println(predicate.and(s -> s.equals("hello")).test(""));
            System.out.println(predicate.and(s -> s.equals("hello")).test("hello"));
    
            System.out.println("=====isEqual======");
            // åˆ¤æ–­æ˜¯å¦ç›¸ç­‰
            System.out.println(Predicate.isEqual("hello").test(""));
            System.out.println(Predicate.isEqual("hello").test("hello"));
    
            Predicate<Boolean> nonNull = Objects::nonNull;
            Predicate<Boolean> isNull = Objects::isNull;
    
            Predicate<String> isEmpty = String::isEmpty;
            Predicate<String> isNotEmpty = isEmpty.negate();
    
        }
    

æ‰§è¡Œç»“æœï¼š

    true
    false
    =====or / and======
    false
    true
    false
    true
    =====isEqual======
    false
    true
    

#### Predicateæ¥å£åœ¨JDKä¸­çš„åº”ç”¨

![](https://vue-admin-imgages.oss-cn-hangzhou.aliyuncs.com/2022-11-10/e5a1ee35-04e5-4273-81df-596db10d56e6_Stream-Predicate.png)

Streamä¸­çš„filteræ–¹æ³•ï¼Œç”¨æ¥è¿‡æ»¤ä¸æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œä½¿ç”¨Predicateä¼ å…¥è¿‡æ»¤æ¡ä»¶ã€‚çœ‹ä¸‹é¢ä¾‹å­ï¼š

    Stream<Integer> stream = Stream.of(-1, 0, 1, 2, 3, 4);
    stream.filter(s -> s > 0).forEach(System.out::println);
    

æ‰§è¡Œç»“æœï¼š

    1
    2
    3
    4
    

### æ€»ç»“

å…³äºJDK1.8ä¸ºä»€ä¹ˆè¦æ–°å¢è¿™å››å¤§å†…ç½®å‡½æ•°å¼æ¥å£ï¼Œå…¶å®å°±æ˜¯Javaçš„å¼€å‘è€…å°†å¸¸ç”¨äºä»£ç çš„ä¸€äº›æ™®éåœºæ™¯æŠ½è±¡å‡ºæ¥æˆä¸ºæ¥å£ï¼Œè€Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚ï¼Œå®ç°è¿™äº›æ¥å£çš„å…·ä½“é€»è¾‘ã€‚é€šè¿‡lambdaè¡¨è¾¾å¼çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ã€‚JDKä¸­çš„å‡½æ•°å¼æ¥å£è¿˜æœ‰å¾ˆå¤šï¼Œä½†åŸºæœ¬éƒ½æ˜¯åœ¨å››å¤§å‡½æ•°å¼æ¥å£çš„åŸºç¡€ä¹‹ä¸ŠåŠ ä»¥æ‹“å±•ï¼Œæœ‰å…´è¶£çš„ç«¥é‹å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚

**å››å¤§å‡½æ•°å¼æ¥å£çš„æ¯”è¾ƒ**

å‡½æ•°å¼æ¥å£

å¯¹åº”ç¨‹åºé€»è¾‘çš„æŠ½è±¡

å…·ä½“åœºæ™¯

Function

ç¨‹åºä¸­æ˜ å°„é€»è¾‘çš„æŠ½è±¡

æ¯”å¦‚æˆ‘ä»¬å†™å¾—å¾ˆå¤šçš„å‡½æ•°ï¼šæ¥æ”¶å…¥å‚ï¼Œè¿”å›å‡ºå‚ï¼Œæ–¹æ³•ä»£ç å—å°±æ˜¯ä¸€ä¸ªæ˜ å°„çš„å…·ä½“é€»è¾‘ã€‚

Predicate

ç¨‹åºä¸­åˆ¤æ–­é€»è¾‘çš„æŠ½è±¡

æ¯”å¦‚å„ç§ifåˆ¤æ–­ï¼Œå¯¹äºä¸€ä¸ªå‚æ•°è¿›è¡Œå„ç§å…·ä½“é€»è¾‘çš„åˆ¤å®šï¼Œæœ€åè¿”å›ä¸€ä¸ªif elseèƒ½ä½¿ç”¨çš„å¸ƒå°”å€¼

Consumer

ç¨‹åºä¸­çš„æ¶ˆè´¹å‹é€»è¾‘çš„æŠ½è±¡

å°±æ¯”å¦‚Collectionä½“ç³»çš„ForEachæ–¹æ³•ï¼Œå°†æ¯ä¸€ä¸ªå…ƒç´ å–å‡ºï¼Œäº¤ç»™ConsumeræŒ‡å®šçš„æ¶ˆè´¹é€»è¾‘è¿›è¡Œæ¶ˆè´¹

Suppiler

ç¨‹åºä¸­çš„ç”Ÿäº§é€»è¾‘çš„æŠ½è±¡

å°±æ¯”å¦‚æœ€å¸¸ç”¨çš„ï¼Œnewå¯¹è±¡ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå¾ˆç»å…¸çš„ç”Ÿäº§è€…é€»è¾‘ï¼Œè‡³äºnewä»€ä¹ˆï¼Œæ€ä¹ˆnewï¼Œè¿™å°±æ˜¯Suppilerä¸­å…·ä½“é€»è¾‘çš„å†™æ³•äº†

å‚è€ƒèµ„æ–™
----

*   [JDK8æ–°ç‰¹æ€§ç¬¬äºŒç¯‡ï¼šå››å¤§å‡½æ•°å¼æ¥å£ã€Function/Consumer/Supplier/Perdicateã€‘ã€æ¥å£çš„æ‰©å±•æ–¹æ³•ã€default/staticã€‘](https://zhuanlan.zhihu.com/p/531651771)