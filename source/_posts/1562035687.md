---
layout: post
title: "ç®€å•æ€§èƒ½æµ‹è¯•:springboot-2.x vs actix-web-4.x benchmark"
date: "2022-06-28T23:17:48.268Z"
---
ç®€å•æ€§èƒ½æµ‹è¯•:springboot-2.x vs actix-web-4.x benchmark
================================================

æ€§èƒ½æµ‹è¯•:springboot-2.x vs actix-web-4.x benchmark
==============================================

è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ [https://www.cnblogs.com/funnyzpc/p/15956465.html](https://www.cnblogs.com/funnyzpc/p/15956465.html)

å‰é¢
--

æœ¬æ¬¡æ˜¯å¯¹ä¸¤æ¬¾webæ¡†æ¶åšä¸€æ¬¡æ€§èƒ½æµ‹è¯•ï¼Œè¿™ä¸ªæµ‹è¯•åšçš„å¾ˆæ—©ï¼Œçº¦åœ¨ä¸¤ä¸ªæœˆå‰ï¼ˆä¹Ÿæ˜¯actix-web4.0åˆšåˆšå‘å¸ƒä¹‹åï¼‰ï¼Œç›®çš„æ˜¯ æ¯”è¾ƒæœ‰gcç±»webæ¡†æ¶(`springboot`)ä¸æ— gcç±»webæ¡†æ¶(`actix-web`)çš„æ€§èƒ½ï¼Œåˆ†ä¸º`å¸¦dbæŸ¥è¯¢`ä¸`ä¸å¸¦dbæŸ¥è¯¢`è¿™ä¸¤ç§æƒ…å†µï¼Œç®€å•æ¢ç©¶ä¸‹webæ¡†æ¶çš„æ€§èƒ½ç“¶é¢ˆåœ¨å“ªå„¿ï¼Œä»…æ­¤è€Œå·²ã€‚  
é¡ºå¸¦è¯´ä¸‹ï¼Œ`apache JMeter`å®åœ¨å¤ªåƒåœ¾...ï¼Œè¿™é‡Œä¸ç»†è¯´äº†è¯¶ï½ ğŸ™„ï¸

å‡†å¤‡æµ‹è¯•
----

*   æµ‹è¯•å·¥å…·
    
    *   ä¸‹è½½: [https://github.com/link1st/go-stress-testing](https://github.com/link1st/go-stress-testing)
    *   æµ‹è¯•å‚æ•°
    
        -c è¡¨ç¤ºå¹¶å‘æ•°
        -n æ¯ä¸ªå¹¶å‘æ‰§è¡Œè¯·æ±‚çš„æ¬¡æ•°ï¼Œæ€»è¯·æ±‚çš„æ¬¡æ•° = å¹¶å‘æ•° * æ¯ä¸ªå¹¶å‘æ‰§è¡Œè¯·æ±‚çš„æ¬¡æ•°
        -u éœ€è¦å‹æµ‹çš„åœ°å€
        
    
*   æµ‹è¯•æœºå™¨
    
    *   `window 10`ç³»ç»Ÿ 8æ ¸32GB
*   æµ‹è¯•é¡¹ç›®åœ°å€(springbootéœ€è‡ªè¡Œæ·»åŠ ä»£ç )
    
    *   springbootå‚è€ƒ[https://github.com/funnyzpc/mee-api](https://github.com/funnyzpc/mee-api)
    *   actix-webå‚è€ƒ[https://github.com/funnyzpc/actix-web4\_test](https://github.com/funnyzpc/actix-web4_test)

å‡†å¤‡æµ‹è¯•ä»£ç åŠæ•°æ®
---------

*   springboot2(java)
    
          @RestController
          public class Echo2Controller {
            @Autowired
            public DB1SQLDao db1SQLDao;
            // å¸¦dbèµ„æºçš„
            @GetMapping("/echo2")
            public Map<String,Object> echo(){
                /*
                    <select id="findList2" resultType="java.util.Map">
                        SELECT id,name,show_flag,create_date,code,parent_code from sys_menu limit 2
                    </select>
                 */
                List result = db1SQLDao.query("com.mee.xml1.tmp.findList2");
                Map<String, Object> res = ResultBuild.success("success");
                res.put("data",result);
                return res;
            }
        
            // ä¸å¸¦DBèµ„æºçš„
            @GetMapping("/echo3")
            public Map<String,Object> echo3(){
                /*
                    public static final Map<String,Object> SUCCESS =  new HashMap<String,Object>(2,1){{
                        put("status",1);
                        put("msg","æˆåŠŸ");
                    }};
                 */
                return ResultBuild.SUCCESS;
            }
        
        }
        
    
*   actix-web4(rust)
    
            // ä»…jsonèµ„æºè¯·æ±‚
        pub async fn echo() -> HttpResponse{
            return HttpResponse::Ok().json(ResultBuild::<&str>::success());
        }
        
          // å¸¦dbçš„èµ„æºè¯·æ±‚
        pub async fn sys_menu_list(/*req_body: String,*/db: web::Data<Pool>) -> HttpResponse{
        // async fn echo(/*req_body: String*/db: web::Data<Pool>) ->impl Responder {
            // let mut conn=db.get().await.unwrap();
            // let rows=conn.query("select * from sys_menu ",&[]).await.unwrap();
            // // getå‚æ•°å¯ä»¥æ˜¯str,ä¹Ÿå¯ä»¥æ˜¯i32ï¼Œè·å–ç¬¬å‡ ä¸ªã€‚ä½†æ˜¯å¿…é¡»è¦æŒ‡æ˜è·å–çš„ç±»å‹
            // let sys_menus = menu_list(&db).await.expect("---error---");
            let sys_menu_list = menu_list(&db).await;
            // HttpResponse::Ok().json(sys_menus)
            return HttpResponse::Ok().json(ResultBuild::success_with_data(sys_menu_list));
        
        }
        
        async fn menu_list(pool: &Pool) -> Vec<SysMenu> {
            let client: Client = pool.get().await.expect("---error---");
            let stmt = client.prepare_cached("SELECT id,name,show_flag,create_date,code,parent_code from sys_menu limit 2").await.expect("--error2--");
            let rows = client.query(&stmt, &[]).await.expect("--error3");
            rows
                .into_iter()
                .map(|row| SysMenu {
                    id: row.get(0),
                    name: row.get(1),
                    show_flag: row.get(2),
                    create_date: row.get(3),
                    code: row.get(4),
                    parent_code: row.get(5),
                })
                .collect()
        }
        
    
*   æµ‹è¯•æ•°æ®
    
        CREATE TABLE "sys_menu" (
          "id" numeric(24) primary key,
          "name" varchar(100) COLLATE "pg_catalog"."default" NOT NULL,
          "show_flag" int2 NOT NULL,
          "create_date" timestamp(6) NOT NULL,
          "create_by" varchar(64) COLLATE "pg_catalog"."default" NOT NULL,
          "code" varchar(8) COLLATE "pg_catalog"."default",
          "parent_code" varchar(8) COLLATE "pg_catalog"."default"
        );
        COMMENT ON TABLE "public"."sys_menu" IS 'ç³»ç»Ÿ::èœå•è¡¨';
        
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20010616453200802', 'ä¸»é¡µ', 1, '2020-11-27 03:09:21.714105', 'sys', '01', NULL);
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20010616513800803', 'åŠŸèƒ½2', 1, '2020-11-27 03:09:24.25396', 'sys', '02', NULL);
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20010616525500804', 'åŠŸèƒ½1', 1, '2020-12-09 11:44:04.478717', 'sys', '03', NULL);
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20010616545400805', 'ç³»ç»Ÿé…ç½®', 1, '2020-11-27 03:09:29.581216', 'sys', '04', NULL);
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20082918550500800', 'ç³»ç»Ÿé…ç½®', 1, '2020-11-27 03:09:40.177621', 'sys', '0401', '04');
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20082918561500801', 'åŸºç¡€ç®¡ç†', 1, '2020-11-27 03:09:36.788131', 'sys', '0402', '04');
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20082918572200802', 'ç”¨æˆ·é…ç½®', 1, '2020-11-27 03:09:42.242687', 'sys', '040101', '0401');
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20082918574400803', 'èœå•é…ç½®', 1, '2020-11-27 03:09:44.198666', 'sys', '040103', '0401');
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20082918574400813', 'è§’è‰²åˆ†é…', 1, '2020-11-27 03:09:47.713889', 'sys', '040102', '0401');
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20082918581000804', 'å­—å…¸é…ç½®', 1, '2020-11-27 03:09:49.643454', 'sys', '040201', '0402');
        INSERT INTO "public"."sys_menu"("id", "name", "show_flag", "create_date", "create_by", "code", "parent_code") VALUES ('20082918584500805', 'æ—¥å¿—é…ç½®', 1, '2020-11-27 03:09:52.519771', 'sys', '040202', '0402');
        
    

1.1å¸¦DBèµ„æºçš„è¯·æ±‚ (8c-8w)
-------------------

`ç›®æ ‡èµ„æºé€šè¿‡æ•°æ®åº“æŸ¥è¯¢å¹¶åºåˆ—åŒ–ä¸ºjsonè¿”å›`

*   æµ‹è¯•å‘½ä»¤
    
        go-stress-testing-win -c 8 -n 80000 -u http://127.0.0.1:8011/mee_auto/echo2
        go-stress-testing-win -c 8 -n 80000 -u http://127.0.0.1:8080/echo
        
    

### springboot (8c)

     â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€
     è€—æ—¶ â”‚ å¹¶å‘æ•° â”‚ æˆåŠŸæ•° â”‚ å¤±è´¥æ•° â”‚   qps  â”‚ æœ€é•¿è€—æ—¶ â”‚ æœ€çŸ­è€—æ—¶ â”‚ å¹³å‡è€—æ—¶ â”‚ ä¸‹è½½å­—èŠ‚ â”‚ å­—èŠ‚æ¯ç§’  â”‚ é”™è¯¯ç 
     â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
      163sâ”‚      8â”‚  79453â”‚      0â”‚  505.33 â”‚  454.05 â”‚    6.45 â”‚   15.83 â”‚         â”‚         â”‚200:79453
      164sâ”‚      8â”‚  79911â”‚      0â”‚  505.41 â”‚  454.05 â”‚    6.45 â”‚   15.83 â”‚         â”‚         â”‚200:79911
     164sâ”‚      8â”‚  80000â”‚      0â”‚  505.43 â”‚  454.05 â”‚    6.45 â”‚   15.83 â”‚         â”‚         â”‚200:80000
    
    *************************  ç»“æœ stat  ****************************
    å¤„ç†åç¨‹æ•°é‡: 8
    è¯·æ±‚æ€»æ•°ï¼ˆå¹¶å‘æ•°*è¯·æ±‚æ•° -c * -nï¼‰: 80000 æ€»è¯·æ±‚æ—¶é—´: 164.398 ç§’ successNum: 80000 failureNum: 0
    *************************  ç»“æœ end   ****************************
    

### actix-web (8c)

    â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€
     è€—æ—¶ â”‚ å¹¶å‘æ•°â”‚ æˆåŠŸæ•° â”‚ å¤±è´¥æ•°â”‚  qps  â”‚ æœ€é•¿è€—æ—¶â”‚ æœ€çŸ­è€—æ—¶ â”‚ å¹³å‡è€—æ—¶ â”‚ ä¸‹è½½å­—èŠ‚â”‚ å­—èŠ‚æ¯ç§’  â”‚ é”™è¯¯ç 
    â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
     135sâ”‚      8â”‚  79025â”‚      0â”‚  610.44â”‚  112.56â”‚    5.30â”‚   13.11 â”‚22,601,150â”‚ 167,412â”‚200:79025
     136sâ”‚      8â”‚  79617â”‚      0â”‚  610.49â”‚  112.56â”‚    5.30â”‚   13.10 â”‚22,770,462â”‚ 167,428â”‚200:79617
     137sâ”‚      8â”‚  80000â”‚      0â”‚  610.67â”‚  112.56â”‚    5.30â”‚   13.10 â”‚22,880,000â”‚ 167,155â”‚200:80000
    *************************  ç»“æœ stat  ****************************
    å¤„ç†åç¨‹æ•°é‡: 8
    è¯·æ±‚æ€»æ•°ï¼ˆå¹¶å‘æ•°*è¯·æ±‚æ•° -c * -nï¼‰: 80000 æ€»è¯·æ±‚æ—¶é—´: 136.878 ç§’ successNum: 80000 failureNum: 0
    *************************  ç»“æœ end   ****************************
    

1.2å¸¦DBèµ„æºçš„è¯·æ±‚ (16c-8w)
--------------------

`ç›®æ ‡èµ„æºé€šè¿‡æ•°æ®åº“æŸ¥è¯¢å¹¶åºåˆ—åŒ–ä¸ºjsonè¿”å›`

*   æµ‹è¯•å‘½ä»¤
    
        go-stress-testing-win -c 16 -n 80000 -u http://127.0.0.1:8011/mee_auto/echo2
        go-stress-testing-win -c 16 -n 80000 -u http://127.0.0.1:8080/echo
        
    

### springboot (16c)

    â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€
     è€—æ—¶ â”‚ å¹¶å‘æ•° â”‚ æˆåŠŸæ•° â”‚ å¤±è´¥æ•° â”‚ qps    â”‚ æœ€é•¿è€—æ—¶â”‚ æœ€çŸ­è€—æ—¶â”‚ å¹³å‡è€—æ—¶â”‚ ä¸‹è½½å­—èŠ‚â”‚ å­—èŠ‚æ¯ç§’â”‚ é”™è¯¯ç 
    â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
     146sâ”‚     16â”‚  79294â”‚      0â”‚  558.06â”‚  553.22â”‚    8.20â”‚   28.67â”‚        â”‚        â”‚200:79294
     147sâ”‚     16â”‚  79861â”‚      0â”‚  558.22â”‚  553.22â”‚    8.20â”‚   28.66â”‚        â”‚        â”‚200:79861
     147sâ”‚     16â”‚  80000â”‚      0â”‚  558.07â”‚  553.22â”‚    8.20â”‚   28.67â”‚        â”‚        â”‚200:80000
    *************************  ç»“æœ stat  ****************************
    å¤„ç†åç¨‹æ•°é‡: 16
    è¯·æ±‚æ€»æ•°ï¼ˆå¹¶å‘æ•°*è¯·æ±‚æ•° -c * -nï¼‰: 80000 æ€»è¯·æ±‚æ—¶é—´: 147.496 ç§’ successNum: 80000 failureNum: 0
    *************************  ç»“æœ end   ****************************
    

### actix-web (16c)

    â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€
     è€—æ—¶â”‚ å¹¶å‘æ•° â”‚ æˆåŠŸæ•° â”‚ å¤±è´¥æ•°â”‚   qps  â”‚ æœ€é•¿è€—æ—¶ â”‚æœ€çŸ­è€—æ—¶ â”‚ å¹³å‡è€—æ—¶ â”‚ ä¸‹è½½å­—èŠ‚ â”‚ å­—èŠ‚æ¯ç§’ â”‚ é”™è¯¯ç 
    â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
     139sâ”‚     16â”‚  79468â”‚      0â”‚  584.20â”‚  259.02 â”‚    9.46 â”‚   27.39â”‚22,727,848â”‚ 163,508 â”‚200:79468
     140sâ”‚     16â”‚  79991â”‚      0â”‚  584.31â”‚  259.02 â”‚    8.97 â”‚   27.38â”‚22,877,426â”‚ 163,408 â”‚200:79991
     140sâ”‚     16â”‚  80000â”‚      0â”‚  584.33â”‚  259.02 â”‚    8.97 â”‚   27.38â”‚22,880,000â”‚ 163,248 â”‚200:80000
    
    *************************  ç»“æœ stat  ****************************
    å¤„ç†åç¨‹æ•°é‡: 16
    è¯·æ±‚æ€»æ•°ï¼ˆå¹¶å‘æ•°*è¯·æ±‚æ•° -c * -nï¼‰: 80000 æ€»è¯·æ±‚æ—¶é—´: 140.155 ç§’ successNum: 80000 failureNum: 0
    *************************  ç»“æœ end   ****************************
    

2.1ä¸å¸¦DBèµ„æºçš„è¯·æ±‚ (16c-16w)
----------------------

`ç›®æ ‡èµ„æºä»…ä»…ä¸ºå¯¹è±¡åºåˆ—åŒ–ä¸ºjsonè¿”å›`

*   æµ‹è¯•å‘½ä»¤
    
        go-stress-testing-win -c 16 -n 160000 -u http://127.0.0.1:8011/mee_auto/echo3
        go-stress-testing-win -c 16 -n 160000 -u http://127.0.0.1:8080/echo3
        
    

### springboot (16c)

    â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€
     è€—æ—¶â”‚ å¹¶å‘æ•° â”‚ æˆåŠŸæ•° â”‚ å¤±è´¥æ•° â”‚ qps    â”‚ æœ€é•¿è€—æ—¶â”‚ æœ€çŸ­è€—æ—¶â”‚ å¹³å‡è€—æ—¶â”‚ ä¸‹è½½å­—èŠ‚ â”‚ å­—èŠ‚æ¯ç§’ â”‚ é”™è¯¯ç 
    â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
      74sâ”‚     16â”‚ 157047â”‚      0 â”‚ 2705.19â”‚  283.33â”‚    0.50â”‚    5.91 â”‚        â”‚        â”‚200:157047
      75sâ”‚     16â”‚ 158698â”‚      0 â”‚ 2696.52â”‚  283.33â”‚    0.50â”‚    5.93 â”‚        â”‚        â”‚200:158698
      76sâ”‚     16â”‚ 160000â”‚      0 â”‚ 2693.35â”‚  283.33â”‚    0.50â”‚    5.94 â”‚        â”‚        â”‚200:160000
    *************************  ç»“æœ stat  ****************************
    å¤„ç†åç¨‹æ•°é‡: 16
    è¯·æ±‚æ€»æ•°ï¼ˆå¹¶å‘æ•°*è¯·æ±‚æ•° -c * -nï¼‰: 160000 æ€»è¯·æ±‚æ—¶é—´: 75.811 ç§’ successNum: 160000 failureNum: 0
    *************************  ç»“æœ end   ****************************
    

### actix-web (16c)

    â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€
     è€—æ—¶â”‚ å¹¶å‘æ•° â”‚ æˆåŠŸæ•° â”‚ å¤±è´¥æ•°â”‚   qps â”‚ æœ€é•¿è€—æ—¶â”‚ æœ€çŸ­è€—æ—¶ â”‚ å¹³å‡è€—æ—¶â”‚ ä¸‹è½½å­—èŠ‚ â”‚ å­—èŠ‚æ¯ç§’â”‚ é”™è¯¯ç 
    â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
      43sâ”‚     16â”‚ 155741â”‚      0â”‚ 4620.61â”‚  113.40â”‚    0.64 â”‚    3.46â”‚9,811,683 â”‚ 228,177â”‚200:155741
      44sâ”‚     16â”‚ 158948â”‚      0â”‚ 4608.00â”‚  113.40â”‚    0.64 â”‚    3.47â”‚10,013,724â”‚ 227,583â”‚200:158948
      44sâ”‚     16â”‚ 160000â”‚      0â”‚ 4609.79â”‚  113.40â”‚    0.89 â”‚    3.47â”‚10,080,000â”‚ 227,478â”‚200:160000
    *************************  ç»“æœ stat  ****************************
    å¤„ç†åç¨‹æ•°é‡: 16
    è¯·æ±‚æ€»æ•°ï¼ˆå¹¶å‘æ•°*è¯·æ±‚æ•° -c * -nï¼‰: 160000 æ€»è¯·æ±‚æ—¶é—´: 44.312 ç§’ successNum: 160000 failureNum: 0
    *************************  ç»“æœ end   ****************************
    

2.2ä¸å¸¦DBèµ„æºçš„è¯·æ±‚ (8c-8w)
--------------------

`ç›®æ ‡èµ„æºä»…ä»…ä¸ºå¯¹è±¡åºåˆ—åŒ–ä¸ºjsonè¿”å›`

*   æµ‹è¯•å‘½ä»¤
    
        go-stress-testing-win -c 8 -n 80000 -u http://127.0.0.1:8011/mee_auto/echo3
        go-stress-testing-win -c 8 -n 80000 -u http://127.0.0.1:8080/echo3
        
    

### springboot (8c)

    â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€
     è€—æ—¶ â”‚ å¹¶å‘æ•° â”‚ æˆåŠŸæ•° â”‚å¤±è´¥æ•°  â”‚   qps â”‚æœ€é•¿è€—æ—¶â”‚æœ€çŸ­è€—æ—¶ â”‚å¹³å‡è€—æ—¶ â”‚ä¸‹è½½å­—èŠ‚â”‚å­—èŠ‚æ¯ç§’ â”‚ é”™è¯¯ç 
    â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
      52sâ”‚      8â”‚  76730â”‚      0â”‚ 1820.31â”‚  253.83â”‚    0.30â”‚    4.39 â”‚        â”‚        â”‚200:76730
      53sâ”‚      8â”‚  78467â”‚      0â”‚ 1826.48â”‚  253.83â”‚    0.30â”‚    4.38 â”‚        â”‚        â”‚200:78467
      54sâ”‚      8â”‚  80000â”‚      0â”‚ 1834.15â”‚  253.83â”‚    0.30â”‚    4.36 â”‚        â”‚        â”‚200:80000
    *************************  ç»“æœ stat  ****************************
    å¤„ç†åç¨‹æ•°é‡: 8
    è¯·æ±‚æ€»æ•°ï¼ˆå¹¶å‘æ•°*è¯·æ±‚æ•° -c * -nï¼‰: 80000 æ€»è¯·æ±‚æ—¶é—´: 53.885 ç§’ successNum: 80000 failureNum: 0
    *************************  ç»“æœ end   ****************************
    

### actix-web (8c)

    â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€
     è€—æ—¶ â”‚å¹¶å‘æ•° â”‚ æˆåŠŸæ•°  â”‚ å¤±è´¥æ•° â”‚   qps â”‚ æœ€é•¿è€—æ—¶â”‚ æœ€çŸ­è€—æ—¶â”‚ å¹³å‡è€—æ—¶â”‚ ä¸‹è½½å­—èŠ‚ â”‚ å­—èŠ‚æ¯ç§’ â”‚ é”™è¯¯ç 
    â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
      12sâ”‚      8â”‚  69187â”‚      0 â”‚ 7257.03â”‚    5.98 â”‚    1.00â”‚    1.10 â”‚4,358,781 â”‚ 363,207â”‚200:69187
      13sâ”‚      8â”‚  74735â”‚      0 â”‚ 7232.76â”‚    5.98 â”‚    0.99â”‚    1.11 â”‚4,708,305 â”‚ 362,149â”‚200:74735
      14sâ”‚      8â”‚  80000â”‚      0 â”‚ 7229.78â”‚    5.98 â”‚    0.00â”‚    1.11 â”‚5,040,000 â”‚ 361,557â”‚200:80000
    
    *************************  ç»“æœ stat  ****************************
    å¤„ç†åç¨‹æ•°é‡: 8
    è¯·æ±‚æ€»æ•°ï¼ˆå¹¶å‘æ•°*è¯·æ±‚æ•° -c * -nï¼‰: 80000 æ€»è¯·æ±‚æ—¶é—´: 13.940 ç§’ successNum: 80000 failureNum: 0
    *************************  ç»“æœ end   ****************************
    

### è¯·æ±‚ä¸€è§ˆã€å¸¦DBæ•°æ®è¯·æ±‚ã€‘

å¹¶å‘æ•°

å¹¶å‘è¯·æ±‚æ•°

æ¡†æ¶

qps

å¹³å‡è€—æ—¶

8

80000

springboot

505

15.83

8

80000

actix-web

610

13.10

16

80000

springboot

558

28.66

16

80000

actix-web

584

27.38

### è¯·æ±‚ä¸€è§ˆã€ä¸å¸¦DBæ•°æ®è¯·æ±‚ï¼ˆçº¯ä»£ç json)ã€‘

å¹¶å‘æ•°

å¹¶å‘è¯·æ±‚æ•°

æ¡†æ¶

qps

å¹³å‡è€—æ—¶

8

80000

springboot

1826

4.38

8

80000

actix-web

7232

1.11

16

160000

springboot

2696

5.93

16

160000

actix-web

4609

3.47

ç®€å•æ€»ç»“
----

é¦–å…ˆä¸€ä¸ªé‡è¦çš„å‰ææ˜¯æˆ‘çš„ç”µè„‘æ˜¯ i5 8æ ¸32GB çš„é…ç½®

*   1.åœ¨å¸¦DBæ•°æ®è¯·æ±‚çš„ä¸‹ï¼Œä¸ç®¡æ˜¯8ä¸ªå¹¶å‘è¿˜æ˜¯16ä¸ªå¹¶å‘ `springboot`ä¸`actix-web`ä¸¤è€…çš„`qps`ç›¸è·å¹¶ä¸å¤§ï¼Œåœ¨cpuè¶…è½½(16c)ä¸‹å¹³å‡è€—æ—¶æ›´å¤šï¼Œæ®æ­¤å¯ä»¥å¾—å‡º å¹¶å‘æ•°ä¸æ‰€åœ¨çš„æœºå™¨é…ç½®æ˜¯æˆæ­£æ¯”çš„ï¼šç¡¬ä»¶é…ç½®åœ¨å…¶åˆç†çš„å¹¶å‘ä¸‹æ€§èƒ½ä»¥åŠå»¶è¿Ÿæ˜¯æœ€ä¼˜çš„
    
*   2.åœ¨ä¸å¸¦DBçš„æ•°æ®è¯·æ±‚ä¸‹ï¼Œä¹Ÿæ˜¾ç¤ºäº†`1`çš„ç»“è®ºï¼ŒåŒæ—¶ä¹Ÿèƒ½çœ‹åˆ°éšç€cpuè¶…è½½ `å»¶è¿Ÿ`ä»¥åŠ`qps`ä¹Ÿä¼šé€æ¸å˜å¾—`ç³Ÿç³•`
    
*   3.å¯¹äºspringbootã€actix-webè¿™ä¸¤æ¬¾æ¡†æ¶ï¼Œæ— gcç±»è¯­è¨€åœ¨åˆé€‚çš„å¹¶å‘&ç¡¬ä»¶é…ç½®ä¸‹ æ€§èƒ½(`å»¶è¿Ÿ`ã€`qps` ã€`å†…å­˜` ã€`cpuåˆ©ç”¨ç‡`)ç›¸å¯¹ä¸ `gc`ç±»æ¡†æ¶æ˜¯å­˜åœ¨ä¼˜åŠ¿çš„
    
*   4.å¯¹äºwebç±»æ¡†æ¶ï¼ˆä¸ç®¡æ˜¯gcç±»çš„è¿˜æ˜¯égcç±»çš„æ¡†æ¶ï¼‰ä»–ä»¬çš„æ€§èƒ½é™¤äº†å¹¶å‘&ç¡¬ä»¶é…ç½®å¤– ä¹Ÿå–å†³äºæ•´ä¸ªè¯·æ±‚é“¾è·¯ä¸­æ€§èƒ½æœ€ä½çš„é‚£ä¸€ç¯ï¼šé€šè¿‡ä»¥ä¸Šå¯ä»¥å¤§è‡´åˆ†æå‡ºæ€§èƒ½ä¸€èˆ¬æ˜¯å‡ºåœ¨DBæ•°æ®æŸ¥è¯¢è¿™ä¸€å—å„¿ï¼Œæ‰€ä»¥è‰¯å¥½çš„DBæ¶æ„åŠç¼“å­˜é…ç½®å¯ä»¥æœ‰æ•ˆæé«˜åº”ç”¨çš„æ€§èƒ½åŠç¡¬ä»¶çš„åˆ©ç”¨ç‡
    
    ä»¥ä¸Šä»…ä¸ºä¸ªäººæµ‹è¯•æ‰€å¾—ç»“æœï¼Œå¦‚æœ‰è°¬è¯¯æ³è¯·æŒ‡æ­£ï½ ğŸ˜Š
    

funnyzpc@gmail.com