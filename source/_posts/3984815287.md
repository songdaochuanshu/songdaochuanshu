---
layout: post
title: "ç°ä»£ CSS æŒ‡å— -- at-rule è§„åˆ™æ‰«ç›²"
date: "2022-11-03T04:40:16.214Z"
---
ç°ä»£ CSS æŒ‡å— -- at-rule è§„åˆ™æ‰«ç›²
=========================

å¤§éƒ¨åˆ†åŒå­¦éƒ½ç”¨è¿‡ CSS çš„å±å¹•å®½åº¦åª’ä½“æŸ¥è¯¢ï¼Œåƒæ˜¯è¿™æ ·ï¼š

    @media screen and (min-width: 900px) {
      div {
        padding: 1rem 3rem;
      }
    }
    

è¿™é‡Œè¡¨ç¤ºçš„æ˜¯ä¸å±å¹•å®½åº¦ç›¸å…³çš„æ ·å¼è®¾ç½®ï¼Œä¸Šé¢çš„ä»£ç è¡¨ç¤ºå½“å±å¹•å®½åº¦å¤§äº 900px æ—¶ï¼Œå†…éƒ¨çš„æ ·å¼ä»£ç å—æ‰èƒ½ç”Ÿæ•ˆã€‚

å…¶å®ä¸ä»…ä»…æ˜¯ä¸Šé¢çš„å±å¹•å®½åº¦åª’ä½“æŸ¥è¯¢ï¼Œåœ¨ CSS ä¸­ï¼Œå­˜åœ¨å¤§é‡çš„ä»¥ `@` ç¬¦å·å¼€å¤´çš„è§„åˆ™ã€‚ç§°ä¹‹ä¸º `@è§„åˆ™`(**at-rule**)ã€‚æœ¬æ–‡å°±å°†ä»‹ç»ä¸€ä¸‹é™¤å»åª’ä½“æŸ¥è¯¢ä¹‹å¤–ï¼Œå…¶ä»–æœ‰æ„æ€çš„ä¸”åœ¨æœªæ¥ä¼šè¶Šæ¥è¶Šé‡è¦çš„ `@è§„åˆ™` è§„åˆ™ã€‚

at-rule @è§„åˆ™
-----------

OKï¼Œä»€ä¹ˆæ˜¯ @è§„åˆ™ï¼ˆat-rule ï¼‰å‘¢ï¼Ÿ

ä¸€ä¸ªÂ **at-rule**Â æ˜¯ä¸€ä¸ª [CSS è¯­å¥](https://developer.mozilla.org/zh-CN/docs/Web/CSS/Syntax#css_statements)ï¼Œä»¥ at ç¬¦å·å¼€å¤´ï¼Œ '`@`' (`U+0040 COMMERCIAL AT`), åè·Ÿä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¹¶åŒ…æ‹¬ç›´åˆ°ä¸‹ä¸€ä¸ªåˆ†å·çš„æ‰€æœ‰å†…å®¹ï¼Œ '`;`' (`U+003B SEMICOLON`), æˆ–ä¸‹ä¸€ä¸ª CSS å—ï¼Œä»¥å…ˆåˆ°è€…ä¸ºå‡†ã€‚

é™¤å»æˆ‘ä»¬æœ€ä¸ºç†Ÿæ‚‰çš„ `@media` ä¹‹å¤–ï¼ŒCSS è¿˜æœ‰å“ªäº› @è§„åˆ™ å‘¢ï¼Ÿ

ä¸‹é¢æ˜¯ä¸€äº› @è§„åˆ™ï¼Œç”±å®ƒä»¬çš„æ ‡ç¤ºç¬¦æŒ‡å®šï¼Œæ¯ç§è§„åˆ™éƒ½æœ‰ä¸åŒçš„è¯­æ³•ï¼š

*   [`@charset`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@charset), å®šä¹‰æ ·å¼è¡¨ä½¿ç”¨çš„å­—ç¬¦é›†ã€‚
*   [`@import`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@import), å‘Šè¯‰ CSS å¼•æ“å¼•å…¥ä¸€ä¸ªå¤–éƒ¨æ ·å¼è¡¨ã€‚
*   [`@namespace`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@namespace), å‘Šè¯‰ CSS å¼•æ“å¿…é¡»è€ƒè™‘ XML å‘½åç©ºé—´ã€‚

ä¸‹é¢æ˜¯ä¸€äº›åµŒå¥— @ è§„åˆ™ï¼Œæ˜¯åµŒå¥—è¯­å¥çš„å­é›†ï¼Œä¸ä»…å¯ä»¥ä½œä¸ºæ ·å¼è¡¨é‡Œçš„ä¸€ä¸ªè¯­å¥ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨æ¡ä»¶è§„åˆ™ç»„é‡Œï¼š

*   [`@media`](https://developer.mozilla.org/en-US/docs/Web/CSS/@media)ï¼Œå¦‚æœæ»¡è¶³åª’ä»‹æŸ¥è¯¢çš„æ¡ä»¶åˆ™æ¡ä»¶è§„åˆ™ç»„é‡Œçš„è§„åˆ™ç”Ÿæ•ˆã€‚
    
*   [`@page`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@page)ï¼Œæè¿°æ‰“å°æ–‡æ¡£æ—¶å¸ƒå±€çš„å˜åŒ–ã€‚
    
*   [`@font-face`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@font-face)ï¼Œæè¿°å°†ä¸‹è½½çš„å¤–éƒ¨çš„å­—ä½“ã€‚
    
*   [`@keyframes`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@keyframes)ï¼Œæè¿° CSS åŠ¨ç”»çš„ä¸­é—´æ­¥éª¤ã€‚
    
*   [`@supports`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@supports), å¦‚æœæ»¡è¶³ç»™å®šæ¡ä»¶åˆ™æ¡ä»¶è§„åˆ™ç»„é‡Œçš„è§„åˆ™ç”Ÿæ•ˆã€‚
    
*   [`@document`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@document)ï¼Œå¦‚æœæ–‡æ¡£æ ·å¼è¡¨æ»¡è¶³ç»™å®šæ¡ä»¶åˆ™æ¡ä»¶è§„åˆ™ç»„é‡Œçš„è§„åˆ™ç”Ÿæ•ˆã€‚ _(æ¨å»¶è‡³ CSS Level 4 è§„èŒƒ)_
    
*   [`@viewport`](https://developer.mozilla.org/en-US/docs/Web/CSS/@viewport)Â ï¼ˆ**å·²åºŸå¼ƒ**ï¼‰ï¼Œè§„åˆ™è®©æˆ‘ä»¬å¯ä»¥å¯¹æ–‡æ¡£çš„å¤§å°è¿›è¡Œè®¾ç½®ã€‚è¿™ä¸ªç‰¹æ€§ä¸»è¦è¢«ç”¨äºç§»åŠ¨è®¾å¤‡ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨åœ¨æ”¯æŒç±»ä¼¼â€œå›ºå®šåˆ°è¾¹ç¼˜â€ç­‰ç‰¹æ€§çš„æ¡Œé¢æµè§ˆå™¨ï¼Œå¦‚å¾®è½¯çš„ Edgeã€‚
    
*   [`@counter-style`](https://developer.mozilla.org/en-US/docs/Web/CSS/@counter-style)Â â€” ä¸€ä¸ª `@counter-style` è§„åˆ™å®šä¹‰äº†å¦‚ä½•æŠŠä¸€ä¸ªè®¡æ•°å™¨çš„å€¼è½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºã€‚
    
*   [`@font-feature-values`](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-feature-values)Â (plusÂ `@swash`,Â `@ornaments`,Â `@annotation`,Â `@stylistic`,Â `@styleset`Â andÂ `@character-variant`)ï¼Œ å…è®¸ä½œè€…åœ¨[font-variant-alternates](https://developer.mozilla.org/zh-CN/docs/Web/CSS/font-variant-alternates) ä¸­ä½¿ç”¨é€šç”¨åç§°ï¼Œç”¨äºåœ¨ OpenType ä¸­ä»¥ä¸åŒæ–¹å¼æ¿€æ´»åŠŸèƒ½ã€‚å®ƒå…è®¸åœ¨ä½¿ç”¨å‡ ç§å­—ä½“æ—¶ç®€åŒ– CSSã€‚
    
*   [`@property`](https://developer.mozilla.org/en-US/docs/Web/CSS/@property)Â ï¼ˆ**å®éªŒæ€§**ï¼‰ï¼Œæ˜¯[CSS Houdini](https://developer.mozilla.org/zh-CN/docs/Web/Guide/Houdini) API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå…è®¸å¼€å‘è€…æ˜¾å¼åœ°å®šä¹‰ä»–ä»¬çš„[css è‡ªå®šä¹‰å±æ€§](https://developer.mozilla.org/zh-CN/docs/Web/CSS/--*), å…è®¸è¿›è¡Œå±æ€§ç±»å‹æ£€æŸ¥ã€è®¾å®šé»˜è®¤å€¼ä»¥åŠå®šä¹‰è¯¥è‡ªå®šä¹‰å±æ€§æ˜¯å¦å¯ä»¥è¢«ç»§æ‰¿ã€‚
    
*   [`@layer`](https://developer.mozilla.org/en-US/docs/Web/CSS/@layer)ï¼Œ å£°æ˜äº†ä¸€ä¸ª çº§è”å±‚ï¼ŒåŒä¸€å±‚å†…çš„è§„åˆ™å°†çº§è”åœ¨ä¸€èµ·ï¼Œè¿™ç»™äºˆäº†å¼€å‘è€…å¯¹å±‚å æœºåˆ¶çš„æ›´å¤šæ§åˆ¶ã€‚
    

é™¤å»æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„ `@media`ã€`keyframes` ä»¥åŠ `@font-face`ï¼Œåƒæ˜¯ `@supports`ã€`@counter-style`ã€`@property`ã€`@layer` ç­‰éƒ½å·²ç»æˆ–å°†åœ¨æœªæ¥ Web åº”ç”¨ä¸­æ‰®æ¼”ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚

ä¸‹é¢ï¼Œå°±è·Ÿéšæœ¬æ–‡ï¼Œä¸€èµ·å¯¹å®ƒä»¬ä¸€æ¢ç©¶ç«Ÿã€‚ä½ ä¹Ÿå¯ä»¥è·³è¿‡ä½ å·²ç»æŒæ¡çš„ï¼Œç¿»åˆ°å¯¹åº”ä½ è¿˜ä¸å¤ªäº†è§£çš„ @ è§„åˆ™ä¸‹ï¼Œè¿…é€Ÿäº†è§£å®ƒä»¬ã€‚

@charsetã€@importã€@namespace
---------------------------

è¿™ä¸‰ä¸ªå¯ä»¥æ”¾åœ¨ä¸€èµ·è®²è§£ï¼Œä»–ä»¬çš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œä¹Ÿç›¸å¯¹å¥½ç†è§£ã€‚å…¶ä¸­ï¼š

1.  `@charset`ï¼šæŒ‡å®šæ ·å¼è¡¨ä¸­ä½¿ç”¨çš„å­—ç¬¦ç¼–ç ã€‚å®ƒå¿…é¡»æ˜¯æ ·å¼è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œè€Œå‰é¢ä¸å¾—æœ‰ä»»ä½•å­—ç¬¦ã€‚

åƒæ˜¯è¿™æ ·ï¼š

    // style.css
    @charset "UTF-8";
    

æ³¨æ„ï¼Œå¦‚æœæœ‰å¤šä¸ª @charset @è§„åˆ™è¢«å£°æ˜ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªä¼šè¢«ä½¿ç”¨ã€‚

å¾ˆå¤šäººä¼šæœ‰ç–‘æƒ‘ï¼Œè¿™ä¸ªå£°æ˜åˆ°åº•æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ

äº‹å®ä¸Šï¼Œå¦‚æœ CSS æ–‡ä»¶ä¸­æœ‰ä»»ä½•é ASCII æ–‡æœ¬ï¼Œä¾‹å¦‚å­—ä½“åç§°ï¼Œä¼ªå…ƒç´ çš„ content å±æ€§å€¼ã€é€‰æ‹©å™¨ç­‰ä¸­çš„é ASCII å­—ç¬¦ï¼Œéƒ½éœ€è¦ç¡®ä¿ CSS è§£æå™¨çŸ¥é“å¦‚ä½•è½¬æ¢å­—èŠ‚æ­£ç¡®è½¬æ¢ä¸ºå­—ç¬¦ï¼Œä»¥ä¾¿å®ƒç†è§£ CSS ä»£ç ã€‚

æ‰€ä»¥å¦‚æœå½“ä½ å‘ç°ä½ çš„ä¼ªå…ƒç´  content ä¸­æ’å…¥äº†ä¸€äº›å†…å®¹ï¼Œä½†æ˜¯ç»è¿‡æ‰“åŒ…ç¼–è¯‘åå®ƒä¹±ç äº†ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯å› ä¸ºä½ å¿˜äº†å£°æ˜è¿™ä¸ªå­—ç¬¦é›†ã€‚

2.  `@import`ï¼šç”¨äºä»å…¶ä»–æ ·å¼è¡¨å¯¼å…¥æ ·å¼è§„åˆ™ã€‚è¿™äº›è§„åˆ™å¿…é¡»å…ˆäºæ‰€æœ‰å…¶ä»–ç±»å‹çš„è§„åˆ™ï¼Œ`@charset` è§„åˆ™é™¤å¤–

@import æœ‰ä¸¤ç§è¯­æ³•ï¼š

1.  url() å†…åŒ…å« style sheet çš„ URI
2.  ç›´æ¥å†™ style sheet çš„ URI çš„å­—ç¬¦ä¸²

è¿˜å¯ä»¥ç›´æ¥åœ¨åé¢å®šä¹‰åª’ä½“æŸ¥è¯¢è§„åˆ™ï¼Œåƒæ˜¯è¿™æ ·ï¼š

    @import 'custom.css';
    @import url('landscape.css');
    @import url('landscape.css') screen and (orientation:landscape);
    

åˆç†çš„ä½¿ç”¨ `@import` å…¶å®ä¹Ÿæ˜¯æœ‰å¥½å¤„çš„ï¼š

1.  å¯ä»¥åˆç†çš„æ§åˆ¶ CSS æ–‡ä»¶çš„å¤§å°
2.  æ›´å¥½çš„åˆ†æ²»ä¸å¤ç”¨

å¾ˆå¤šäººå¯èƒ½ä¼šç»å¸¸çœ‹åˆ°ï¼Œç½‘ç»œä¸Šä¼šæœ‰å„ç§**æŠµåˆ¶ @import**çš„æ–‡ç« ï¼Œä¸è¿‡æ—¢ç„¶è®¾è®¡äº† @importï¼Œæ€»æœ‰å®ƒçš„æœ‰ç”¨ä¹‹å¤„ï¼Œä¸èƒ½è¿‡äºç»å¯¹ã€‚ä½¿ç”¨ `@import` å½±å“é¡µé¢æ€§èƒ½çš„åœ°æ–¹ä¸»è¦ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š

1.  å½±å“æµè§ˆå™¨çš„å¹¶è¡Œä¸‹è½½
2.  ä¼˜å…ˆçº§é—®é¢˜ï¼Œæ ·å¼äº’ç›¸è¦†ç›–
3.  å¯¼è‡´é¡µé¢é—ªçƒ

è¿™é‡Œå¯ä»¥ç®€å•è§£é‡Šä¸€ä¸‹ã€‚é¦–å…ˆæˆ‘ä»¬å¾—çŸ¥é“ï¼ŒåŠ è½½é¡µé¢æ—¶ï¼Œlink æ ‡ç­¾å¼•å…¥çš„ CSS è¢«åŒæ—¶åŠ è½½ï¼Œè€Œ @import å¼•å…¥çš„ CSS å°†åœ¨é¡µé¢åŠ è½½å®Œæ¯•åè¢«åŠ è½½ã€‚

CSS è§£æå¼•æ“åœ¨å¯¹ä¸€ä¸ª CSS æ–‡ä»¶è¿›è¡Œè§£ææ—¶ï¼Œå¦‚åœ¨æ–‡ä»¶é¡¶éƒ¨é‡åˆ° `@import` è§„åˆ™ï¼Œå°†è¢«æ›¿æ¢ä¸ºè¯¥ @import å¯¼å…¥çš„ CSS æ–‡ä»¶ä¸­çš„å…¨éƒ¨æ ·å¼ã€‚è€Œ `@import` å†…çš„è§„åˆ™å…¶åè¢«åŠ è½½ï¼Œå´ä¼šåœ¨åŠ è½½å®Œæ¯•åç½®äºæ ·å¼è¡¨é¡¶éƒ¨ï¼Œæœ€ç»ˆæ¸²æŸ“æ—¶ï¼Œå¦‚æœå­˜åœ¨åŒååŒä¼˜å…ˆçº§æ ·å¼ï¼Œä¼šè¢«ä¸‹é¢çš„åŒåæ ·å¼å±‚å ï¼Œå¯¼è‡´æ‰€è°“çš„ä¼˜å…ˆçº§å†²çªã€‚

å®é™…ä¸Šï¼Œæµè§ˆå™¨æ¸²æŸ“çš„åŠ¨ä½œä¸€èˆ¬ä¼šæ‰§è¡Œå¤šæ¬¡çš„ã€‚æœ€åä¸€æ¬¡æ¸²æŸ“ï¼Œä¸€å®šæ˜¯åŸºäºä¹‹å‰åŠ è½½è¿‡çš„æ‰€æœ‰æ ·å¼æ•´åˆåæ¸²æŸ“æ ‘è¿›è¡Œç»˜åˆ¶é¡µé¢çš„ï¼Œ  
è€Œç”±äº `@import` å†…çš„è§„åˆ™çš„åŠ è½½æ—¶æœºé—®é¢˜ï¼Œä¼šåœ¨é¡µé¢å†…å®¹åŠ è½½å®Œåå†åŠ è½½ã€‚ç›¸å½“äºæŠŠ CSS æ”¾åœ¨äº† body åº•éƒ¨ï¼Œä»è€Œé€ æˆäº†é¡µé¢çš„é—ªçƒã€‚å½“ç½‘ç»œè¾ƒå·®æ—¶ï¼Œé—ªçƒä½“éªŒæ›´ä¸ºæ˜æ˜¾ã€‚

3.  `@namespace` ï¼š`@namespace` æ˜¯ç”¨æ¥å®šä¹‰ä½¿ç”¨åœ¨ CSS æ ·å¼è¡¨ä¸­çš„ XML å‘½åç©ºé—´çš„ @è§„åˆ™ã€‚å®šä¹‰çš„å‘½åç©ºé—´å¯ä»¥æŠŠé€šé…ã€å…ƒç´ å’Œå±æ€§é€‰æ‹©å™¨é™åˆ¶åœ¨æŒ‡å®šå‘½åç©ºé—´é‡Œçš„å…ƒç´ ã€‚

å¹¶ä¸”ï¼Œä»»ä½• @namespace è§„åˆ™éƒ½å¿…é¡»åœ¨æ‰€æœ‰çš„ `@charset` å’Œ `@import`è§„åˆ™ä¹‹åï¼Œå¹¶ä¸”åœ¨æ ·å¼è¡¨ä¸­ï¼Œä½äºå…¶ä»–ä»»ä½•æ ·å¼å£°æ˜ä¹‹å‰ã€‚

æ€»çš„æ¥è¯´ï¼Œ`@namespace` åœ¨ç°å¦‚ä»Šçš„ CSS ç”Ÿæ€ä¸­ï¼Œå±äºéå¸¸å†·é—¨çš„ä¸€ä¸ªè§„åˆ™ã€‚åŸºæœ¬ä¸Šæˆ‘ä»ä¸šè¿™ä¹ˆä¹…ï¼Œæ²¡æ€ä¹ˆè§è¿‡è¿™ä¸ªå±æ€§çš„å…·ä½“ä½¿ç”¨ã€‚

å¦‚æœä½ å¯¹å®ƒç¡®å®æ„Ÿå…´è¶£ï¼Œå¯ä»¥çœ‹çœ‹è¿™ç¯‡è¯¦è§£ -- [spacing-out-on-css-namespaces.](http://nimbupani.com/spacing-out-on-css-namespaces.html)

`@media`ã€`@keyframes`ã€`@font-face`
----------------------------------

è¿™ä¸‰ä¸ª @ è§„åˆ™ï¼Œå¤§å®¶åº”è¯¥éå¸¸ç†Ÿæ‚‰ã€‚

*   `@media`ï¼šå¦‚æœæ»¡è¶³åª’ä»‹æŸ¥è¯¢çš„æ¡ä»¶åˆ™æ¡ä»¶è§„åˆ™ç»„é‡Œçš„è§„åˆ™ç”Ÿæ•ˆ
*   `@keyframes`ï¼šå®šä¹‰ CSS åŠ¨ç”»çš„ä¸­é—´æ­¥éª¤
*   `@font-face`ï¼šæè¿°å°†ä¸‹è½½çš„å¤–éƒ¨çš„å­—ä½“

`@keyframes` å’Œ `@font-face` è¿™ä¸¤ä¸ªå¤§å®¶è‚¯å®šéå¸¸ç†Ÿæ‚‰ã€‚

ä½†æ˜¯ `@media` å…¶å®å†…æœ‰ä¹¾å¤ï¼é™¤äº†å±å¹•å®½åº¦åª’ä½“æŸ¥è¯¢å¤–ï¼Œå…¶å®è¿˜å­˜åœ¨éå¸¸å¤šä¸åŒåŠŸèƒ½çš„åª’ä½“æŸ¥è¯¢ï¼

ä¸‹é¢æˆ‘ä¼šåˆ—å‡ºä¸€äº›åœ¨æœªæ¥ï¼Œæˆ‘è®¤ä¸ºä¼šè¶Šæ¥è¶Šè¢«æåŠä½¿ç”¨åˆ°çš„ `@media` è§„åˆ™ã€‚

### prefers-reduced-motion å‡å¼±åŠ¨ç”»æ•ˆæœ

prefers-reduced-motion è§„åˆ™æŸ¥è¯¢ç”¨äºå‡å¼±åŠ¨ç”»æ•ˆæœï¼Œé™¤äº†é»˜è®¤è§„åˆ™ï¼Œåªæœ‰ä¸€ç§è¯­æ³•å–å€¼ `prefers-reduced-motion: reduce`ï¼Œå¼€å¯äº†è¯¥è§„åˆ™åï¼Œç›¸å½“äºå‘Šè¯‰ç”¨æˆ·ä»£ç†ï¼Œå¸Œæœ›ä»–çœ‹åˆ°çš„é¡µé¢ï¼Œå¯ä»¥åˆ é™¤æˆ–æ›¿æ¢æ‰ä¸€äº›ä¼šè®©éƒ¨åˆ†è§†è§‰è¿åŠ¨éšœç¢è€…ä¸é€‚çš„åŠ¨ç”»ç±»å‹ã€‚

> è§„èŒƒåŸæ–‡ï¼šIndicates that user has notified the system that they prefer an interface that removes or replaces the types of motion-based animation that trigger discomfort for those with vestibular motion disorders.

> vestibular motion disorders æ˜¯ä¸€ç§è§†è§‰è¿åŠ¨éšœç¢æ‚£è€…ï¼Œä¸­æ–‡æˆ‘åªèƒ½è°·æ­Œç¿»è¯‘ï¼Œç¿»è¯‘å‡ºæ¥æ˜¯**å‰åº­è¿åŠ¨éšœç¢**ï¼Œæˆ‘æ„Ÿè§‰ä¸å¤ªå¯¹ï¼Œè°·æ­Œäº†ä¸€ä¸‹æ˜¯ä¸€ç§ä¼šå¯¼è‡´çœ©æ™•çš„ä¸€ç±»ç—…ç—‡ï¼Œè­¬å¦‚ä¸€ä¸ªåŠ¨ç”»ä¸€ç§’é—ªçƒå¤šæ¬¡ï¼Œå°±ä¼šå¯¼è‡´æ‚£è€…çš„ä¸é€‚ã€‚

ä½¿ç”¨æ–¹æ³•ï¼Œè¿˜æ˜¯ä¸Šé¢é‚£æ®µä»£ç ï¼š

    .ele {
        animation: aniName 5s infinite linear;
    }
    
    @media (prefers-reduced-motion: reduce) {
        .ele {
            animation: none;
        }
    }
    

å¦‚æœæˆ‘ä»¬æœ‰ä¸€äº›ç±»ä¼¼è¿™æ ·çš„åŠ¨ç”»ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d64b25316e6447a9902dd15c1bc7460f~tplv-k3u1fbpfcp-zoom-1.image)

åœ¨ç”¨æˆ·å¼€å¯äº† `prefers-reduced-motion: reduce` æ—¶ï¼Œå°±åº”è¯¥æŠŠå®ƒå»æ‰ã€‚é‚£ä¹ˆè¯¥å¦‚ä½•å¼€å¯è¿™ä¸ªé€‰é¡¹å‘¢ï¼Ÿ[MDN -- prefers-reduced-motion](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/prefers-reduced-motion) ç»™å‡ºçš„æ˜¯ï¼š

*   åœ¨ GTK/Gnome ä¸­ï¼Œå¯ä»¥é€šè¿‡ GNOME Tweaks ï¼ˆåœ¨â€œé€šç”¨â€æˆ–â€œå¤–è§‚â€èœå•ä¸­ï¼Œå–å†³äºå…·ä½“ç‰ˆæœ¬ï¼‰ çš„é…ç½®ï¼Œè®¾ç½® gtk-enable-animations çš„å€¼ä¸º false
*   å¯ä»¥åœ¨ GTK 3 çš„é…ç½®æ–‡ä»¶ä¸­çš„ \[Settings\] æ¨¡å—ä¸‹è®¾ç½® gtk-enable-animations = false
*   åœ¨ Windows 10 ä¸­ï¼šè®¾ç½® > è½»æ¾è·å– > æ˜¾ç¤º > åœ¨ Windows ä¸­æ˜¾ç¤ºåŠ¨ç”»
*   åœ¨ Windows 7 ä¸­ï¼šæ§åˆ¶é¢æ¿ > è½»æ¾è·å– > ?æ˜¯è®¡ç®—æœºæ›´æ˜“äºæŸ¥çœ‹ > å…³é—­ä¸å¿…è¦åŠ¨ç”»
*   åœ¨ MacOS ä¸­ï¼šç³»ç»Ÿåå¥½ > è¾…åŠ©ä½¿ç”¨ > æ˜¾ç¤º > å‡å°‘è¿åŠ¨
*   åœ¨ iOS ä¸Šï¼šè®¾ç½® > é€šç”¨ > è¾…åŠ©æ€§ > å‡å°‘è¿åŠ¨
*   åœ¨ Android 9+ ä¸Šï¼šè®¾ç½® > è¾…åŠ©æ€§ > ç§»é™¤åŠ¨ç”»

### prefers-color-scheme é€‚é…æ˜æš—ä¸»é¢˜

`prefers-color-scheme` è¿˜æ˜¯éå¸¸å¥½ç†è§£çš„ï¼Œå®ƒç”¨äºåŒ¹é…ç”¨æˆ·é€šè¿‡æ“ä½œç³»ç»Ÿè®¾ç½®çš„æ˜äº®æˆ–å¤œé—´ï¼ˆæš—ï¼‰æ¨¡å¼ã€‚å®ƒæœ‰ä¸¤ä¸ªä¸åŒçš„å–å€¼ï¼š

*   `prefers-color-scheme: light`ï¼š æ˜äº®æ¨¡å¼
*   `prefers-color-scheme: dark`ï¼š å¤œé—´ï¼ˆæš—ï¼‰æ¨¡å¼

è¯­æ³•å¦‚ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬é»˜è®¤çš„æ˜¯æ˜äº®æ¨¡å¼ï¼Œåªéœ€è¦é€‚é…å¤œé—´æ¨¡å¼å³å¯ï¼š

    body {
        background: white;
        color: black;
    }
    
    @media (prefers-color-scheme: dark) {
        body {
            background: black;
            color: white;
        }
    }
    

å½“ç„¶ï¼Œä¸Šè¿°åªæ˜¯ CSS ä»£ç ç¤ºæ„ï¼Œè¦åšåˆ°ä¸¤å¥—ä¸»é¢˜çš„åˆ‡æ¢è‚¯å®šä¸æ˜¯è¿™ä¹ˆç®€å•ï¼Œæ–¹æ³•ä¹Ÿå¾ˆå¤šï¼Œæœ¬æ–‡ä¸èµ˜è¿°ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œäº†è§£å„ç§å®ç°ä¸»é¢˜åˆ‡æ¢ï¼Œæˆ–è€…æ˜¯æ˜æš—åˆ‡æ¢çš„æ–¹æ¡ˆã€‚

### prefers-contrast è°ƒæ•´å†…å®¹è‰²å½©å¯¹æ¯”åº¦

`prefers-contrast` è¯¥ CSS åª’ä½“åŠŸèƒ½æ˜¯ç”¨æ¥æ£€æµ‹ç”¨æˆ·æ˜¯å¦è¦æ±‚å°†ç½‘é¡µå†…å®¹ä»¥æ›´é«˜æˆ–è€…æ›´ä½çš„å¯¹æ¯”åº¦è¿›è¡Œå‘ˆç°ã€‚å…¶ä¸­ï¼š

*   `prefers-contrast: no-preference`ï¼šé»˜è®¤å€¼ï¼Œä¸ä½œä»»ä½•å˜åŒ–
*   `prefers-contrast: less`ï¼šå¸Œæœ›ä½¿ç”¨å¯¹æ¯”åº¦æ›´ä½çš„ç•Œé¢
*   `prefers-contrast: more`ï¼šå¸Œæœ›ä½¿ç”¨å¯¹æ¯”åº¦æ›´é«˜çš„ç•Œé¢

ä»¥ `prefers-contrast: less` ä¸ºä¾‹å­ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

    body {
        background: #fff; // æ–‡å­—ä¸èƒŒæ™¯å¯¹æ¯”åº¦ä¸º 5.74
        color: #666;
    }
    
    // æå‡å¯¹æ¯”åº¦
    @media (prefers-contrast: more) {
        body {
            background: #fff; // æ–‡å­—ä¸èƒŒæ™¯å¯¹æ¯”åº¦ä¸º 21
            color: #000;
        }
    }
    

ä¸Šé¢åªæ˜¯ä¼ª CSS ä»£ç ï¼Œå…·ä½“å¯èƒ½éœ€è¦å¯¹å…·ä½“çš„ä¸€äº›å…ƒç´ è¿›è¡Œå¤„ç†ï¼Œæˆ–è€…ä½¿ç”¨ `filter: contrast()` å…¨å±€ç»Ÿä¸€å¤„ç†ï¼Œå½“å¼€å¯é…ç½®æ—¶ï¼Œç”¨äºå®ç°ç±»ä¼¼è¿™æ ·çš„åŠŸèƒ½ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/617eaeaef5464c0da93efcc80cef51f4~tplv-k3u1fbpfcp-zoom-1.image)

#### ä»€ä¹ˆæ˜¯è‰²å½©å¯¹æ¯”åº¦

æ˜¯å¦æ›¾å…³å¿ƒè¿‡é¡µé¢å†…å®¹çš„å±•ç¤ºï¼Œä½¿ç”¨çš„é¢œè‰²æ˜¯å¦æ°å½“ï¼Ÿè‰²å¼±ã€è‰²ç›²ç”¨æˆ·èƒ½å¦æ­£å¸¸çœ‹æ¸…å†…å®¹ï¼Ÿè‰¯å¥½çš„è‰²å½©ä½¿ç”¨ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½æ˜¯æœ‰ç›Šçš„ï¼Œè€Œä¸”ä¸ä»…ä»…å±€é™äºå¯¹äºè‰²å¼±ã€è‰²ç›²ç”¨æˆ·ã€‚åœ¨æˆ·å¤–ç”¨æ‰‹æœºã€é˜³å…‰å¾ˆå¼ºçœ‹ä¸æ¸…ï¼Œç¬¦åˆæ— éšœç¢æ ‡å‡†çš„é«˜æ¸…æ™°åº¦ã€é«˜å¯¹æ¯”åº¦æ–‡å­—å°±æ›´å®¹æ˜“é˜…è¯»ã€‚

è¿™é‡Œå°±æœ‰ä¸€ä¸ªæ¦‚å¿µ -- **é¢œè‰²å¯¹æ¯”åº¦**ï¼Œç®€å•åœ°è¯´ï¼Œæè¿°å°±æ˜¯ä¸¤ç§é¢œè‰²åœ¨äº®åº¦ï¼ˆBrightnessï¼‰ä¸Šçš„å·®åˆ«ã€‚è¿ç”¨åˆ°æˆ‘ä»¬çš„é¡µé¢ä¸Šï¼Œå¤§å¤šæ•°çš„æƒ…å†µå°±æ˜¯èƒŒæ™¯è‰²ï¼ˆbackground-colorï¼‰ä¸å†…å®¹é¢œè‰²ï¼ˆcolorï¼‰çš„å¯¹æ¯”å·®å¼‚ã€‚

æœ€æƒå¨çš„äº’è”ç½‘æ— éšœç¢è§„èŒƒ â€”â€” [WCAG AA](https://www.w3.org/Translations/WCAG21-zh/)è§„èŒƒè§„å®šï¼Œæ‰€æœ‰é‡è¦å†…å®¹çš„è‰²å½©å¯¹æ¯”åº¦éœ€è¦è¾¾åˆ° 4.5:1 æˆ–ä»¥ä¸Šï¼ˆå­—å·å¤§äº18å·æ—¶è¾¾åˆ° 3:1 æˆ–ä»¥ä¸Šï¼‰ï¼Œæ‰ç®—æ‹¥æœ‰è¾ƒå¥½çš„å¯è¯»æ€§ã€‚

### prefers-reduced-transparency å‡å°‘é€æ˜å…ƒç´ 

`prefers-reduced-transparency` è¯¥ CSS åª’ä½“åŠŸèƒ½æ˜¯ç”¨æ¥æ£€æµ‹ç”¨æˆ·æ˜¯å¦è¦æ±‚å‡å°‘ç½‘é¡µä¸­çš„é€æ˜å…ƒç´ ï¼š

*   `prefers-contrast: no-preference`ï¼šé»˜è®¤å€¼ï¼Œä¸ä½œä»»ä½•å˜åŒ–
*   `prefers-contrast: reduce`ï¼šå¸Œæœ›ç•Œé¢å…ƒç´ å­˜åœ¨å°½å¯èƒ½å°‘çš„é€æ˜å…ƒç´ 

ä»¥ `prefers-contrast: reduce` ä¸ºä¾‹å­ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

    .ele {
        opacity: 0.5;
    }
    
    // å‡å°‘é€æ˜å…ƒç´ 
    @media (prefers-contrast: reduce) {
        .ele {
            opacity: 1;
        }
    }
    

æˆ‘åœ¨ä¸Šä¸€æ¬¡ï¼Œä»‹ç»è¿™ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼Œå®ƒè¿˜æ˜¯ä¸€ç‰‡çº¢è‰²ï¼Œä½†æ˜¯çŸ­çŸ­åŠå¹´ï¼Œæ•´ä¸ªå…¼å®¹æ€§å·²ç»æœ‰äº†å¾ˆå¤§çš„æå‡ï¼

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e8f99dcbb064470adc88f3b50418585~tplv-k3u1fbpfcp-zoom-1.image)

### prefers-reduced-data å‡å°‘æ•°æ®ä¼ è¾“

å¯¹äºéƒ¨åˆ†ç½‘é€Ÿè¾ƒå·®çš„åœ°åŒºï¼Œæˆ–è€…æµé‡å¾ˆè´µçš„æƒ…å†µï¼Œç”¨æˆ·ä¼šå¸Œæœ›å‡å°‘é¡µé¢ä¸­çš„æµé‡è¯·æ±‚ï¼ŒåŸºäºæ­¤æœ‰äº† `prefers-reduced-data`ã€‚

`prefers-reduced-data` è¯¥ CSS åª’ä½“æŸ¥è¯¢åŠŸèƒ½æ˜¯ç”¨äºå‘ŠçŸ¥ç”¨æˆ·ä»£ç†ï¼Œå¸Œæœ›å‡å°‘é¡µé¢çš„æµé‡è¯·æ±‚ã€‚

*   `prefers-reduced-data: no-preference`ï¼šé»˜è®¤å€¼ï¼Œä¸ä½œä»»ä½•å˜åŒ–
*   `prefers-reduced-data: reduce`ï¼šå¸Œæœ›ç•Œé¢å…ƒç´ æ¶ˆè€—æ›´å°‘çš„äº’è”ç½‘æµé‡

ä»¥ `prefers-reduced-data: reduce` ä¸ºä¾‹å­ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

    .ele {
        background-image: url(image-1800w.jpg);
    }
    
    // é™ä½å›¾ç‰‡è´¨é‡
    @media (prefers-reduced-data: reduce) {
        .ele {
            background-image: url(image-600w.jpg);
        }
    }
    

å½“æ£€æµ‹åˆ°ç”¨æˆ·å¼€å¯äº† `prefers-reduced-data: reduce`ï¼Œæˆ‘ä»¬å°†æä¾›å‹ç¼©åº¦æ›´é«˜ï¼Œå°ºå¯¸æ›´å°ï¼Œæ¶ˆè€—æµé‡æ›´å°‘çš„å›¾ç‰‡ã€‚

å½“ç„¶ï¼Œä¸Šè¿°ä»£ç åªæ˜¯ä¸ªç¤ºæ„ï¼Œæˆ‘ä»¬å¯ä»¥åšçš„å…¶å®æœ‰æ›´å¤šã€‚

ä¸è¿‡ï¼Œè¿™æ˜¯ä»å¤„äºå®éªŒå®¤çš„åŠŸèƒ½ï¼Œæš‚æ—¶æ²¡æœ‰ä»»ä½•æµè§ˆå™¨æ”¯æŒè¯¥åª’ä½“æŸ¥è¯¢~ ğŸ˜¢

å½“ç„¶ï¼Œä» Chrome 85+ å¼€å§‹ï¼Œå¯ä»¥é€šè¿‡å¼€å¯ `#enable-experimental-web-platform-features` å®éªŒå®¤é€‰é¡¹å¼€å¯è¯¥åŠŸèƒ½ï¼

`@supports` ç‰¹æ€§æ£€æµ‹
----------------

å¥½ï¼Œä»‹ç»å®Œä¸€äº›åç»­ä¼šéå¸¸é‡è¦ä» `@media` è§„åˆ™åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ `@supports`ã€‚

ä¼ ç»Ÿçš„ CSS ç‰¹æ€§æ£€æµ‹éƒ½æ˜¯é€šè¿‡ javascript å®ç°çš„ï¼Œä½†æ˜¯å¦‚ä»Šï¼ŒåŸç”Ÿ CSS å³å¯å®ç°ç‰¹æ€§æ£€æµ‹çš„åŠŸèƒ½ã€‚

CSS `@supports` é€šè¿‡ CSS è¯­æ³•æ¥å®ç°ç‰¹æ€§æ£€æµ‹ï¼Œå¹¶åœ¨å†…éƒ¨ CSS åŒºå—ä¸­å†™å…¥å¦‚æœç‰¹æ€§æ£€æµ‹é€šè¿‡å¸Œæœ›å®ç°çš„ CSS è¯­å¥ã€‚

#### è¯­æ³•ï¼š

    @supports <supports_condition> {
        /* specific rules */
    }
    

ä¸¾ä¸ªä¾‹å­ï¼š

    div {
        position: fixed;
    }
    
    @supports (position:sticky) {
        div {
            position:sticky;
        }
    }
    

ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`position: sticky` æ˜¯ position çš„ä¸€ä¸ªæ¯”è¾ƒæ–°çš„å±æ€§ï¼Œç”¨äºå®ç°é»æ€§å¸ƒå±€ï¼Œå¯ä»¥è½»æ¾å®ç°ä¸€äº›ä»¥å¾€éœ€è¦ Javascript æ‰èƒ½å®ç°çš„å¸ƒå±€ï¼Œä½†æ˜¯ä¸ä¸€å®šåœ¨ä¸€äº›ä½ç«¯æœºå‹ä¸Šå…¼å®¹ã€‚

ä¸Šé¢çš„å†™æ³•ï¼Œé¦–å…ˆå®šä¹‰äº† div çš„ `position: fixed` ï¼Œç´§æ¥ç€ä¸‹é¢ä¸€å¥ `@supports (position:sticky)` åˆ™æ˜¯ç‰¹æ€§æ£€æµ‹æ‹¬å·å†…çš„å†…å®¹ï¼Œå¦‚æœå½“å‰æµè§ˆå™¨æ”¯æŒ `@supports` è¯­æ³•ï¼Œå¹¶ä¸”æ”¯æŒ `position:sticky` è¯­æ³•ï¼Œé‚£ä¹ˆ div çš„ åˆ™ä¼šè¢«è®¾ç½®ä¸º `position:sticky` ã€‚

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ`@supports` è¯­æ³•çš„æ ¸å¿ƒå°±åœ¨äºè¿™ä¸€å¥ï¼š`@supports (...) { }` ï¼Œæ‹¬å·å†…æ˜¯ä¸€ä¸ª CSS è¡¨è¾¾å¼ï¼Œå¦‚æœæµè§ˆå™¨åˆ¤æ–­æ‹¬å·å†…çš„è¡¨è¾¾å¼åˆæ³•ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±ä¼šå»æ¸²æŸ“æ‹¬å·å†…çš„ CSS è¡¨è¾¾å¼ã€‚é™¤äº†è¿™ç§æœ€å¸¸è§„çš„ç”¨æ³•ï¼Œè¿˜å¯ä»¥é…åˆå…¶ä»–å‡ ä¸ªå…³é”®å­—ï¼š

### `@supports not` && `@supports and` && `@supports or`

#### `@supports not` -- é

not æ“ä½œç¬¦å¯ä»¥æ”¾åœ¨ä»»ä½•è¡¨è¾¾å¼çš„å‰é¢æ¥äº§ç”Ÿä¸€ä¸ªæ–°çš„è¡¨è¾¾å¼ï¼Œæ–°çš„è¡¨è¾¾å¼ä¸ºåŸè¡¨è¾¾å¼çš„å€¼çš„å¦å®šã€‚çœ‹ä¸ªä¾‹å­ï¼š

    .container {
      translate: 50% 10%;
      rotate: 80deg;
      scale: 1.5;
    }
    
    // å¦‚æœä¸æ”¯æŒä¸Šè¿°çš„è¯­æ³•ï¼Œåˆ™ supports å†…çš„è¯­æ³•ç”Ÿæ•ˆ
    @supports not (scale: 1) {
      .container {
        transform: translate(50%, 10%) rotate(80deg) scale(1.5);
      }
    }
    

å› ä¸ºæ·»åŠ äº† not å…³é”®å­—ï¼Œæ‰€ä»¥ä¸ä¸Šé¢ç¬¬ä¸€ä¸ªä¾‹å­ç›¸åï¼Œè¿™é‡Œå¦‚æœæ£€æµ‹åˆ°æµè§ˆå™¨ä¸æ”¯æŒ transform è¿™ç§åˆ†å¼€å•ç‹¬çš„å†™æ³• -- `scale: 1` ï¼Œåˆ™å°† `.container` çš„ transform å±æ€§åˆåœ¨ä¸€èµ·å†™ï¼Œå†™æˆ `transform: translate(50%, 10%) rotate(80deg) scale(1.5)`ã€‚

> å…³äº transform çš„åˆ†å¼€å†™æ³•ï¼Œå¦‚æœä½ è¿˜ä¸å¤ªäº†è§£ï¼Œå¯ä»¥æˆ³ï¼š[è§£æ”¾ç”Ÿäº§åŠ›ï¼transform æ”¯æŒå•ç‹¬èµ‹å€¼æ”¹å˜](https://juejin.cn/post/7152331836578856967)

#### `@supports and` -- ä¸

è¿™ä¸ªä¹Ÿå¥½ç†è§£ï¼Œå¤šé‡åˆ¤æ–­ï¼Œç±»ä¼¼ javascript çš„ `&&` è¿ç®—ç¬¦ç¬¦ã€‚ç”¨ and æ“ä½œç¬¦è¿æ¥ä¸¤ä¸ªåŸå§‹çš„è¡¨è¾¾å¼ã€‚åªæœ‰ä¸¤ä¸ªåŸå§‹è¡¨è¾¾å¼çš„å€¼éƒ½ä¸ºçœŸï¼Œç”Ÿæˆçš„è¡¨è¾¾å¼æ‰ä¸ºçœŸï¼Œåä¹‹ä¸ºå‡ã€‚

å½“ç„¶ï¼Œand å¯ä»¥è¿æ¥ä»»æ„å¤šä¸ªè¡¨è¾¾å¼çœ‹ä¸ªä¾‹å­ï¼š

    p {
        overflow: hidden;
        text-overflow: ellipsis;
    }
    @supports (display:-webkit-box) and (-webkit-line-clamp:2) and (-webkit-box-orient:vertical) {
        p {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
    }
    

ä¸Šé¢åŒæ—¶ï¼Œæ£€æµ‹ `@supports (display:-webkit-box) and (-webkit-line-clamp:2) and (-webkit-box-orient:vertical)` äº†ä¸‰ä¸ªè¯­æ³•ï¼Œå¦‚æœåŒæ—¶æ”¯æŒï¼Œåˆ™è®¾å®šä¸‰ä¸ª CSS è§„åˆ™ã€‚è¿™ä¸‰ä¸ªè¯­æ³•å¿…é¡»åŒæ—¶å¾—åˆ°æµè§ˆå™¨çš„æ”¯æŒï¼Œå¦‚æœè¡¨è¾¾å¼ä¸ºçœŸï¼Œåˆ™å¯ä»¥ç”¨äºå®ç°å¤šè¡Œçœç•¥æ•ˆæœï¼š

[CodePen Demo - @supportAnd](http://codepen.io/Chokcoco/pen/EWjbpv?editors=1100)

#### `@supports or` -- æˆ–

ç†è§£äº† `@supports and`ï¼Œå°±å¾ˆå¥½ç†è§£ `@supports or` äº†ï¼Œä¸ javascript çš„ `||` è¿ç®—ç¬¦ç±»ä¼¼ï¼Œè¡¨è¾¾å¼ä¸­åªè¦æœ‰ä¸€ä¸ªä¸ºçœŸï¼Œåˆ™ç”Ÿæˆè¡¨è¾¾å¼è¡¨è¾¾å¼ä¸ºçœŸã€‚

çœ‹ä¾‹å­ï¼š

    @supports (background:-webkit-linear-gradient(0deg, yellow, red)) or (background:linear-gradient(90deg, yellow, red)){
        div {
            background:-webkit-linear-gradient(0deg, yellow, red);
            background:linear-gradient(90deg, yellow, red)
        }
    }
    

ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåªæœ‰æ£€æµ‹åˆ°æµè§ˆå™¨æ”¯æŒ `background:-webkit-linear-gradient(0deg, yellow, red)` æˆ–è€…ï¼ˆorï¼‰ `background:linear-gradient(90deg, yellow, red)` å…¶ä¸­ä¸€ä¸ªï¼Œåˆ™ç»™ div å…ƒç´ æ·»åŠ æ¸å˜ã€‚

[CodePen Demo -- @supports or](http://codepen.io/Chokcoco/pen/yMNvvZ)

å½“ç„¶ï¼Œå…³é”®å­— `not` è¿˜å¯ä»¥å’Œ `and` æˆ–è€… `or` æ··åˆä½¿ç”¨ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥å°è¯•ä¸€ä¸‹ã€‚

### Can i useï¼Ÿ

å…¼å®¹æ€§æ¥çœ‹ï¼Œå…ˆçœ‹çœ‹ [Can i use(æ›´æ–°è‡³ 2022/10/13)](http://caniuse.com/#search=%40supports) å§ï¼š

![image](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c02ad6820af44f20bf11cc92477f18ea~tplv-k3u1fbpfcp-zoom-1.image)

å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½å·²ç»æ”¯æŒäº†ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å¼€å§‹ä½¿ç”¨èµ·æ¥äº†ï¼Œä½¿ç”¨ `@supports` å®ç°æ¸è¿›å¢å¼ºçš„æ•ˆæœã€‚

`@counter-style` CSS è®¡æ•°å™¨
------------------------

`@counter-style`ï¼šæ˜¯ä¸€ä¸ª CSS at-ruleï¼Œå®ƒè®©å¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰ counter çš„æ ·å¼ã€‚ä¸€ä¸ª @counter-style è§„åˆ™å®šä¹‰äº†å¦‚ä½•æŠŠä¸€ä¸ªè®¡æ•°å™¨çš„å€¼è½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¡¨ç¤ºã€‚

åˆ©ç”¨ `@counter-style`ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºè‡ªå®šä¹‰çš„è®¡æ•°å™¨æ ·å¼ã€‚

å½“ç„¶ï¼Œåœ¨ `@counter-style` ä¹‹å‰ï¼ŒCSS è¿˜æœ‰ä¸€ç§å®ç°ç®€å•è®¡æ•°å™¨çš„è§„èŒƒï¼Œå®ƒç”±å¦‚ä¸‹å‡ ä¸ªå±æ€§å…±åŒæ„æˆï¼š

*   `counter-reset`ï¼š åˆå§‹åŒ–è®¡æ•°å™¨çš„å€¼
*   `counter-increment`ï¼šåœ¨åˆå§‹åŒ–ä¹‹åï¼Œè®¡æ•°å™¨çš„å€¼å°±å¯ä»¥ä½¿ç”¨ counter-increment æ¥æŒ‡å®šå…¶ä¸ºé€’å¢æˆ–é€’å‡
*   `counter()`ï¼šè®¡æ•°å™¨çš„å€¼å¯ä»¥ä½¿ç”¨ counter() æˆ– counters() å‡½æ•°ä»¥åœ¨ CSS ä¼ªå…ƒç´ çš„ content å±æ€§ä¸­æ˜¾ç¤º

æˆ‘ä»¬æ¥çœ‹æœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æƒ³å®ç°ä¸€ä¸ª ul å¸ƒå±€ï¼Œå…¶ä¸­çš„ li ä¸ªæ•°ä¸å®šï¼Œä½†æ˜¯å‡åˆ†æ¯è¡Œçš„ç©ºé—´ï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨å¸¦ä¸Šåºå·ï¼Œåƒæ˜¯è¿™æ ·ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0e7594e20ec4b3687cc0f84639f728f~tplv-k3u1fbpfcp-zoom-1.image)

ä½¿ç”¨ `counter-reset`ã€`counter-increment`ã€`counter()` è¿™ä¸€å¥—ï¼Œéå¸¸çš„ç®€å•å°±èƒ½å®ç°ï¼Œåƒæ˜¯è¿™æ ·ï¼š

    <ul>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
    
    <ul>
      // ... <li> ä¸ªæ•°ä¸å®š
    </ul>
    
    <ul>
      // ... <li> ä¸ªæ•°ä¸å®š
    </ul>
    

ç»™æ¯ä¸ª li å…ƒç´ æ ‡åºå·è¿™ä¸ªäº‹æƒ…å°±å¯ä»¥äº¤ç»™ CSS è®¡æ•°å™¨ï¼š

    ul {
      display: flex;
      justify-content: space-around;
      counter-reset: stepCount;
    }
    li {
      position: relative;
    }
    li::before {
      position: absolute;
      counter-increment: stepCount 1;
      content: counter(stepCount); 
    }
    

ç®€å•è§£é‡Šä¸€ä¸‹ï¼š

1.  åœ¨ `ul` çš„æ ·å¼ä¸­ï¼Œæ¯æ¬¡éƒ½ä¼šåˆå§‹åŒ–ä¸€ä¸ª CSS è®¡æ•°å™¨ `stepCount`ï¼Œé»˜è®¤å€¼ä¸º 0
2.  åœ¨ `li::before` ä¸­çš„ `counter-increment: stepCount 1` è¡¨ç¤ºæ¯æ¬¡è°ƒç”¨åˆ°è¿™é‡Œï¼ŒstepCount çš„å€¼åŠ  1
3.  æœ€åé€šè¿‡ `counter(stepCount)` å°†å½“å‰å…·ä½“çš„è®¡æ•°å€¼é€šè¿‡ä¼ªå…ƒç´ çš„ content æ˜¾ç°å‡ºæ¥

OKï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæœ‰äº†ä¸Šè¿°çš„ CSS è®¡æ•°å™¨è§„èŒƒåï¼Œåˆæ–°å¢äº† `@counter-style` CSS è®¡æ•°å™¨è§„èŒƒå‘¢ï¼Ÿ

### `@counter-style` çš„æ„ä¹‰

è¿™æ˜¯å› ä¸ºï¼Œä¸Šè¿°çš„ `counter-reset`ã€`counter-increment`ã€`counter()` è¿™ä¸€å¥—æ›´å¤šçš„ç”Ÿæˆçš„æ•°å­—ç±»å‹çš„è®¡æ•°å™¨ã€‚

ä½†æ˜¯ï¼Œæ•°å­—ç±»å‹çš„è®¡æ•°å™¨æ— æ³•æ»¡è¶³å½“å‰å…¨çƒåŒ–çš„æ’ç‰ˆçš„è¯‰æ±‚ã€‚åŸºäºæ­¤ï¼Œ`@counter-style` è§„åˆ™ç”¨ä¸€ç§å¼€æ”¾çš„æ–¹å¼å¼¥è¡¥äº†è¿™ä¸€ç¼ºç‚¹ï¼Œåœ¨é¢„å®šä¹‰çš„æ ·å¼ä¸èƒ½æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå®ƒå¯ä»¥ä½¿å¼€å‘è€…è‡ªå®šä¹‰ä»–ä»¬è‡ªå·±çš„è®¡æ•°å™¨æ ·å¼ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨ MDN ä¸Šçš„ä¾‹å­ä½œä¸ºç¤ºä¾‹ï¼š

    <ul>
        <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. </li>
        <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. </li>
        <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. </li>
        <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit. </li>
    </ul>
    

    @counter-style circled-alpha {
      system: fixed;
      symbols: â’¶ â’· â’¸ â’¹ â’º â’» â’¼ â’½ â’¾ â’¿ â“€ â“ â“‚ â“ƒ â“„ â“… â“† â“‡ â“ˆ â“‰ â“Š â“‹ â“Œ â“ â“ â“;
      suffix: " ";
    }
    li {
       list-style: circled-alpha;
    }
    

è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°è‡ªå®šä¹‰çš„è®¡æ•°å‰ç¼€ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/70ec5cc8651c4877896e9ffa7202058e~tplv-k3u1fbpfcp-zoom-1.image)

æœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ä¸Šè¿°çš„ `symbols` æ›¿æ¢æˆå…¶ä»–æˆ‘ä»¬å–œæ¬¢æˆ‘è®¡æ•°å›¾å½¢ï¼Œè­¬å¦‚ emoji å›¾å½¢ï¼š

    @counter-style circled-alpha {
      system: fixed;
      symbols: ğŸ˜€ ğŸ˜„ ğŸ˜ ğŸ˜† ğŸ˜… ğŸ˜‚ ğŸ¤£ ğŸ˜Š ğŸ˜‡ ğŸ™‚ ğŸ™ƒ ğŸ˜‰ ğŸ˜Œ ğŸ˜ ğŸ¥° ğŸ˜˜ ğŸ˜— ğŸ˜™ ğŸ˜š ğŸ˜‹ ğŸ˜› ğŸ˜ ğŸ˜œ ğŸ¤ª ğŸ¤¨;
      suffix: " ";
    }
    li {
       list-style: circled-alpha;
    }
    

çœ‹çœ‹æ•ˆæœï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/181cccf667b343e4bc860f1698e52c60~tplv-k3u1fbpfcp-zoom-1.image)

[CodePen Demo -- @counter-style](https://codepen.io/pen?template=rNvoJYE)

å½“ç„¶ï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œ`@counter-style` çš„è¯­æ³•ä¼šæœ‰ä¸€ç‚¹ç‚¹å¤æ‚ï¼Œå¯é€‰çš„å±æ€§ä¹Ÿæœ‰å¾ˆå¤šï¼Œæ›´ä¸ºå…·ä½“çš„å¯ä»¥ä»”ç»†å­¦ä¹ ä¸‹æ–‡æ¡£ -- [MDN -- @counter-style](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@counter-style)

`@property` CSS è‡ªå®šä¹‰å±æ€§
---------------------

@property CSS at-rule æ˜¯ CSS Houdini API çš„ä¸€éƒ¨åˆ†, å®ƒå…è®¸å¼€å‘è€…æ˜¾å¼åœ°å®šä¹‰ä»–ä»¬çš„ CSS è‡ªå®šä¹‰å±æ€§ï¼Œå…è®¸è¿›è¡Œå±æ€§ç±»å‹æ£€æŸ¥ã€è®¾å®šé»˜è®¤å€¼ä»¥åŠå®šä¹‰è¯¥è‡ªå®šä¹‰å±æ€§æ˜¯å¦å¯ä»¥è¢«ç»§æ‰¿ã€‚

æ­£å¸¸è€Œè¨€ï¼Œæˆ‘ä»¬å®šä¹‰å’Œä½¿ç”¨ä¸€ä¸ª CSS è‡ªå®šä¹‰å±æ€§çš„æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼š

    :root {
        --whiteColor: #fff;
    }
    
    p {
        color: (--whiteColor);
    }
    

è€Œæœ‰äº† `@property` è§„åˆ™ä¹‹åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åƒä¸‹è¿°ä»£ç è¿™æ ·å»å®šä¹‰ä¸ª CSS è‡ªå®šä¹‰å±æ€§ï¼š

    <style>
    @property --property-name {
      syntax: '<color>';
      inherits: false;
      initial-value: #fff;
    }
    
    p {
        color: var(--property-name);
    }
    </style>
    

ç®€å•è§£è¯»ä¸‹ï¼š

*   `@property --property-name` ä¸­çš„ `--property-name` å°±æ˜¯è‡ªå®šä¹‰å±æ€§çš„åç§°ï¼Œå®šä¹‰åå¯åœ¨ CSS ä¸­é€šè¿‡ `var(--property-name)` è¿›è¡Œå¼•ç”¨
*   syntaxï¼šè¯¥è‡ªå®šä¹‰å±æ€§çš„è¯­æ³•è§„åˆ™ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè¡¨ç¤ºå®šä¹‰çš„è‡ªå®šä¹‰å±æ€§çš„ç±»å‹
*   inheritsï¼šæ˜¯å¦å…è®¸ç»§æ‰¿
*   initial-valueï¼šåˆå§‹å€¼

å…¶ä¸­ï¼Œ`@property` è§„åˆ™ä¸­çš„ syntax å’Œ inherits æè¿°ç¬¦æ˜¯å¿…éœ€çš„ã€‚

å½“ç„¶ï¼Œåœ¨ JavaScript å†…å®šä¹‰çš„å†™æ³•ä¹Ÿå¾ˆç®€å•ï¼Œé¡ºä¾¿ä¸€æï¼š

    <script>
    CSS.registerProperty({
      name: "--property-name",
      syntax: "<color>",
      inherits: false,
      initialValue: "#c0ffee"
    });
    </script>
    

### CSS @property çš„ä¼˜åŠ¿

ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿™ä¹ˆéº»çƒ¦çš„è¯­æ³•å®šä¹‰ CSS è‡ªå®šä¹‰å±æ€§å‘¢ï¼ŸCSS Houdini å®šä¹‰çš„è‡ªå®šä¹‰å˜é‡çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ

æˆ‘ä»¬æ¥çœ‹è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªæ¸å˜çš„å›¾æ¡ˆï¼š

    <div></div>
    

    div {
        background: linear-gradient(45deg, #fff, #000);
    }
    

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21227e8b94004fd9a77eee68e25d4e97~tplv-k3u1fbpfcp-zoom-1.image)

æˆ‘ä»¬æ”¹é€ ä¸‹ä¸Šè¿°ä»£ç ï¼Œæ”¹ä¸ºä½¿ç”¨ CSS è‡ªå®šä¹‰å±æ€§ï¼š

    :root {
        --colorA: #fff;
        --colorB: #000;
    }
    div {
        background: linear-gradient(45deg, var(--colorA), var(--colorB));
    }
    

å¾—åˆ°çš„è¿˜æ˜¯åŒæ ·çš„ä¸€ä¸ªæ¸å˜å›¾ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/167bda5601c24ed6b2434593391db152~tplv-k3u1fbpfcp-zoom-1.image)

æˆ‘ä»¬å†åŠ ä¸Šä¸€ä¸ªè¿‡æ¸¡æ•ˆæœï¼š

    :root {
        --colorA: #fff;
        --colorB: #000;
    }
    div {
        background: linear-gradient(45deg, var(--colorA), var(--colorB));
        transition: 1s background;
        
        &:hover {
            --colorA: yellowgreen;
            --colorB: deeppink;
        }
    }
    

çœ‹çœ‹é¼ æ ‡ Hover çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/347ee190ed8d40758681b8cb4100ddff~tplv-k3u1fbpfcp-zoom-1.image)

è™½ç„¶æˆ‘ä»¬è®¾å®šäº† 1s çš„è¿‡æ¸¡åŠ¨ç”» `transition: 1s background`ï¼Œä½†æ˜¯å¾ˆå¯æƒœï¼ŒCSS æ˜¯ä¸æ”¯æŒèƒŒæ™¯æ¸å˜è‰²çš„ç›´æ¥è¿‡æ¸¡å˜åŒ–çš„ï¼Œæˆ‘ä»¬å¾—åˆ°çš„åªæ˜¯ä¸¤å¸§ä¹‹é—´çš„ç›´æ¥å˜åŒ–ã€‚

### ä½¿ç”¨ CSS @property è¿›è¡Œæ”¹é€ 

OKï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä½¿ç”¨æœ¬æ–‡çš„ä¸»è§’ï¼Œä½¿ç”¨ Houdini API ä¸­çš„ CSS è‡ªå®šä¹‰å±æ€§æ›¿æ¢åŸæœ¬çš„ CSS è‡ªå®šä¹‰å±æ€§ã€‚

ç®€å•è¿›è¡Œæ”¹é€ ä¸€ä¸‹ï¼Œä½¿ç”¨ `color` syntax è¯­æ³•ç±»å‹ï¼š

    @property --houdini-colorA {
      syntax: '<color>';
      inherits: false;
      initial-value: #fff;
    }
    @property --houdini-colorB {
      syntax: '<color>';
      inherits: false;
      initial-value: #000;
    }
    .property {
        background: linear-gradient(45deg, var(--houdini-colorA), var(--houdini-colorB));
        transition: 1s --houdini-colorA, 1s --houdini-colorB;
        
        &:hover {
            --houdini-colorA: yellowgreen;
            --houdini-colorB: deeppink;
        }
    }
    

æˆ‘ä»¬ä½¿ç”¨äº† `@property` è¯­æ³•ï¼Œå®šä¹‰äº†ä¸¤ä¸ª CSS Houdini è‡ªå®šä¹‰å˜é‡ `--houdini-colorA` å’Œ `--houdini-colorB`ï¼Œåœ¨ hover å˜åŒ–çš„æ—¶å€™ï¼Œæ”¹å˜è¿™ä¸¤ä¸ªé¢œè‰²ã€‚

éœ€è¦å…³æ³¨çš„æ˜¯ï¼Œæˆ‘ä»¬è®¾å®šçš„è¿‡æ¸¡è¯­å¥ `transition: 1s --houdini-colorA, 1s --houdini-colorB`ï¼Œåœ¨è¿™é‡Œï¼Œ**æˆ‘ä»¬æ˜¯é’ˆå¯¹ CSS Houdini è‡ªå®šä¹‰å˜é‡è®¾å®šè¿‡æ¸¡ï¼Œè€Œä¸æ˜¯é’ˆå¯¹ `background` è®¾å®šè¿‡æ¸¡åŠ¨ç”»**ï¼Œå†çœ‹çœ‹è¿™æ¬¡çš„æ•ˆæœï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16d9426ccef847b4a0a52c7a15f7cb15~tplv-k3u1fbpfcp-zoom-1.image)

Wowï¼ŒæˆåŠŸäº†ï¼Œæ¸å˜è‰²çš„å˜åŒ–ä»ä¸¤å¸§çš„é€å¸§åŠ¨ç”»å˜æˆäº†è¡¥é—´åŠ¨ç”»ï¼Œå®ç°äº†ä»ä¸€ä¸ªæ¸å˜è‰²è¿‡æ¸¡åˆ°å¦å¤–ä¸€ä¸ªæ¸å˜è‰²çš„æ•ˆæœï¼è€Œè¿™ï¼Œéƒ½å¾—ç›Šäº CSS Houdini è‡ªå®šä¹‰å˜é‡çš„å¼ºå¤§èƒ½åŠ›ï¼

[CodePen Demo -- CSS Houdini è‡ªå®šä¹‰å˜é‡å®ç°æ¸å˜è‰²è¿‡æ¸¡åŠ¨ç”»](https://codepen.io/Chokcoco/pen/eYgyWLB?editors=1100)

CSS @property è§„åˆ™çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œå¾ˆå¤šä»¥å¾€æ— æ³•ä½¿ç”¨ CSS è¿›è¡ŒåŠ¨ç”»çš„æ•ˆæœï¼Œå¦‚ä»Šï¼Œå€ŸåŠ©å®ƒéƒ½å¯ä»¥å®ç°ï¼

> æ›´å¤š CSS @property çš„ç”¨æ³•ï¼Œä½ å¯ä»¥æˆ³ [CSS @propertyï¼Œè®©ä¸å¯èƒ½å˜å¯èƒ½](https://github.com/chokcoco/iCSS/issues/109)

`@layer`
--------

`@layer` å¯è°“æ˜¯ CSS åœˆ 2022 å¹´æœ€å—ç©ç›®çš„æ–°ç‰¹æ€§ã€‚

å®ƒçš„å‡ºç°ï¼Œç›®çš„åœ¨äºè®©å¤§å‹é¡¹ç›®ä¸­çš„ CSS æ–‡ä»¶åŠå†…å®¹ï¼Œå¯ä»¥å¾—åˆ°æ›´å¥½çš„æ§åˆ¶å’Œç®¡ç†ã€‚

CSS @layer ä» [CSS Cascading and Inheritance Level 5](https://www.w3.org/TR/css-cascade-5/#at-layer) è¢«è§„èŒƒå®šä¹‰ã€‚

ä½•ä¸º CSS @layerï¼Ÿç®€å•è€Œè¨€ï¼Œ[CSS](https://developer.mozilla.org/en-US/docs/Web/CSS) [@è§„åˆ™](https://developer.mozilla.org/en-US/docs/Web/CSS/At-rule) ä¸­çš„@layerå£°æ˜äº†ä¸€ä¸ª çº§è”å±‚ï¼Œ åŒä¸€å±‚å†…çš„è§„åˆ™å°†çº§è”åœ¨ä¸€èµ·ï¼Œ è¿™ç»™äºˆäº†å¼€å‘è€…å¯¹å±‚å æœºåˆ¶çš„æ›´å¤šæ§åˆ¶ã€‚

è¯­æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œçœ‹è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼š

    @layer utilities {
      /* åˆ›å»ºä¸€ä¸ªåä¸º utilities çš„çº§è”å±‚ */
    }
    

è¿™æ ·ï¼Œæˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªåä¸º utilities çš„ @layer çº§è”å±‚ã€‚

@layer çº§è”å±‚å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ

### é€šè¿‡ @layer çº§è”å±‚ç®¡ç†æ ·å¼ä¼˜å…ˆçº§

**@layer çº§è”å±‚æœ€å¤§çš„åŠŸèƒ½ï¼Œå°±æ˜¯ç”¨äºæ§åˆ¶ä¸åŒæ ·å¼ä¹‹é—´çš„ä¼˜å…ˆçº§**ã€‚

çœ‹ä¸‹é¢è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ª @layer çº§è”å±‚ A å’Œ Bï¼š

    <div></div>
    

    div {
        width: 200px;
        height: 200px;
    }
    @layer A {
        div {
            background: blue;
        }
    }
    @layer B {
        div {
            background: green;
        }
    }
    

ç”±äº `@layer B` çš„é¡ºåºæ’åœ¨ `@layer A` ä¹‹åï¼Œæ‰€ä»¥ `@layer B` å†…çš„æ‰€æœ‰æ ·å¼ä¼˜å…ˆçº§éƒ½ä¼šæ¯” `@layer A` é«˜ï¼Œæœ€ç»ˆ div çš„é¢œè‰²ä¸º `green`ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b79b4790c064a67b89a02b9665f30ce~tplv-k3u1fbpfcp-zoom-1.image)

å½“ç„¶ï¼Œå¦‚æœé¡µé¢å†…çš„ @layer å¤ªå¤šï¼Œå¯èƒ½ä¸å¤ªå¥½è®°ä½æ‰€æœ‰ @layer çš„é¡ºåºï¼Œå› æ­¤ï¼Œè¿˜æœ‰è¿™æ ·ä¸€ç§å†™æ³•ã€‚

æˆ‘ä»¬å¯ä»¥åŒæ—¶å‘½åå¤šä¸ª @layer å±‚ï¼Œå…¶åå†è¡¥å……å…¶ä¸­çš„æ ·å¼è§„åˆ™ã€‚

    <div></div>
    

    @layer B, C, A;
    div {
        width: 200px;
        height: 200px;
    }
    @layer A {
        div {
            background: blue;
        }
    }
    @layer B {
        div {
            background: green;
        }
    }
    @layer C {
        div {
            background: orange;
        }
    }
    

ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬é¦–å…ˆå®šä¹‰äº† `@layer B, C, A` ä¸‰ä¸ª @layer çº§è”å±‚ã€‚è€Œåå†åé¢çš„ CSS ä»£ç ä¸­è¡¥å……äº†æ¯ä¸ªçº§è”å±‚çš„ CSS ä»£ç ï¼Œä½†æ˜¯æ ·å¼çš„ä¼˜å…ˆçº§ä¸ºï¼š

**A** > **C** > **B**

å› æ­¤ï¼Œæœ€ç»ˆçš„ div çš„é¢œè‰²å€¼ä¸º @layer A ä¸­å®šä¹‰çš„é¢œè‰²ï¼Œä¸º `blue`ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb9ec6f527534a5d9b444cefae0c0525~tplv-k3u1fbpfcp-zoom-1.image)

åˆ°è¿™é‡Œï¼ŒCSS @layer çš„ä½œç”¨å¯ä»¥æ¸…æ™°çš„è¢«çª¥è§ã€‚

**åˆ©ç”¨ CSS @layerï¼Œæˆ‘ä»¬å¯ä»¥å°† CSS ä¸åŒæ¨¡å—åˆ’å…¥ä¸åŒçš„ @layer ä¸­ï¼Œåˆ©ç”¨å…ˆåé¡ºåºï¼Œéå¸¸å¥½çš„å»æ§åˆ¶å…¨å±€çš„æ ·å¼ä¼˜å…ˆçº§**ã€‚

CSS @layer çš„è¯ç”Ÿï¼Œè®©æˆ‘ä»¬æœ‰èƒ½åŠ›æ›´å¥½çš„åˆ’åˆ†é¡µé¢çš„æ ·å¼å±‚çº§ï¼Œæ›´å¥½çš„å¤„ç†å†…éƒ¨æ ·å¼ä¸å¤–éƒ¨å¼•ç”¨æ ·å¼çš„ä¼˜å…ˆçº§é¡ºåºï¼Œå±äºæ¯”è¾ƒé‡å¤§çš„ä¸€æ¬¡é©æ–°ã€‚

> è¿™é‡Œåªæ˜¯éå¸¸ç®€å•çš„ä»‹ç»äº† @layer è§„åˆ™ï¼Œæ›´è¯¦ç»†çš„ï¼Œä½ å¯ä»¥æˆ³è¿™é‡Œï¼š[2022 å¹´æœ€å—ç©ç›®çš„æ–°ç‰¹æ€§ CSS @layer åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿ](https://github.com/chokcoco/iCSS/issues/171)

`@container` å®¹å™¨æŸ¥è¯¢
-----------------

`@container`ï¼šæä¾›äº†ä¸€ç§ï¼ŒåŸºäºå®¹å™¨çš„å¯ç”¨å®½åº¦æ¥æ”¹å˜å¸ƒå±€çš„æ–¹å¼ã€‚

å®¹å™¨æŸ¥è¯¢ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸æ–°ä¸”é‡è¦çš„ç‰¹æ€§ï¼Œå¼¥è¡¥äº†è¿‡å¾€åª’ä½“æŸ¥è¯¢çš„ä¸è¶³ã€‚

åœ¨ä¹‹å‰ï¼Œå“åº”å¼æœ‰è¿™ä¹ˆä¸ªæ£è‚˜ã€‚åŒä¸€ DOM çš„ä¸åŒå¸ƒå±€å½¢æ€å¦‚æœæƒ³è¦å˜åŒ–ï¼Œéœ€è¦ä¾èµ–è¯¸å¦‚**åª’ä½“æŸ¥è¯¢**æ¥å®ç°ã€‚

åƒæ˜¯è¿™æ ·ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eceb8d2adc3a4fad95ace6d70a602985~tplv-k3u1fbpfcp-zoom-1.image)

é€šè¿‡æµè§ˆå™¨è§†çª—å¤§å°çš„å˜åŒ–ï¼Œå€ŸåŠ©åª’ä½“æŸ¥è¯¢ï¼Œå®ç°ä¸ä¸€æ ·çš„å¸ƒå±€ã€‚

ä½†æ˜¯ï¼Œåœ¨ç°å¦‚ä»Šï¼Œå¤§éƒ¨åˆ† PC ç«¯é¡µé¢ä½¿ç”¨çš„æ˜¯åŸºäº Flex/Grid çš„å¼¹æ€§å¸ƒå±€ã€‚

å¾ˆå¤šæ—¶å€™ï¼Œå½“å†…å®¹æ•°ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå³ä¾¿æ˜¯ç›¸åŒçš„æµè§ˆå™¨è§†çª—å®½åº¦ä¸‹ï¼Œå…ƒç´ çš„å¸ƒå±€åŠå®½åº¦å¯èƒ½ä¹Ÿæ˜¯ä¸ä¸€è‡´çš„ã€‚

è€ƒè™‘ä¸‹é¢è¿™ç§æƒ…å†µï¼š

    <!-- æƒ…å†µä¸€  -->
    <ul class="wrap">
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <!-- æƒ…å†µäºŒ  -->
    <ul class="wrap">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    

    
    .wrap {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }
    li {
        width: 190px;
        height: 100px;
        flex-grow: 1;
        flex-shrink: 0;
    }
    

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5aabd7a470764a928fc2007312078007~tplv-k3u1fbpfcp-zoom-1.image)

è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœéœ€è¦åœ¨ä¸åŒå®½åº¦ä¸‹å¯¹æœ€åä¸€ä¸ªå…ƒç´ åšä¸€ä¸‹å¤„ç†ï¼Œä¼ ç»Ÿæ–¹å¼è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®¹å™¨æŸ¥è¯¢ï¼ˆCSS Container Queriesï¼‰å°±åº”è¿è€Œç”Ÿäº†ï¼

### å®¹å™¨æŸ¥è¯¢çš„èƒ½åŠ›

å®¹å™¨æŸ¥è¯¢å®ƒç»™äºˆäº† CSSï¼Œåœ¨ä¸æ”¹å˜æµè§ˆå™¨è§†å£å®½åº¦çš„å‰æä¸‹ï¼Œåªæ˜¯æ ¹æ®å®¹å™¨çš„å®½åº¦å˜åŒ–ï¼Œå¯¹å¸ƒå±€åšæˆè°ƒæ•´çš„èƒ½åŠ›ã€‚

è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œç®€å•çš„ä»£ç ç¤ºæ„ï¼š

    <div class="wrap">
        <div class="g-container">
            <div class="child">Title</div>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Necessitatibus vel eligendi, esse illum similique sint!!</p>
        </div>
    </div>
    

    .wrap {
        width: 500px;
        resize: horizontal;
        overflow: auto;
    }
    .g-container {
        display: flex;
        flex-wrap: nowrap;
    }
    .wrap {
        /* CSS CONTAINER */
        container-name: wrap;
        container-type: inline-size;
    }
    @container wrap (max-width: 400px) {
        .g-container {
            flex-wrap: wrap;
            flex-direction: column;
        }
    }
    

åƒæ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬é€šè¿‡ `resize: horizontal` æ¥æ¨¡æ‹Ÿå•ä¸ªå®¹å™¨çš„å®½åº¦å˜åŒ–ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®¹å™¨æŸ¥è¯¢èƒ½å¤Ÿåšåˆ°åœ¨ä¸åŒå®½åº¦ä¸‹ï¼Œæ”¹å˜å®¹å™¨å†…éƒ¨çš„å¸ƒå±€ã€‚

è¿™æ ·ï¼Œå°±ç®€å•å®ç°äº†ä¸€ä¸ªå®¹å™¨æŸ¥è¯¢åŠŸèƒ½ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f879a3463bd441bbf2799abdd0f9215~tplv-k3u1fbpfcp-zoom-1.image)

æ³¨æ„ï¼Œä»”ç»†å’Œä¸Šé¢çš„ä¾‹å­ä½œå¯¹æ¯”ï¼Œè¿™é‡Œï¼Œ**æµè§ˆå™¨çš„è§†å£å®½åº¦æ˜¯æ²¡æœ‰å˜åŒ–çš„ï¼Œå˜åŒ–çš„åªæ˜¯å®¹å™¨çš„å®½åº¦ï¼**

åª’ä½“æŸ¥è¯¢ä¸å®¹å™¨æŸ¥è¯¢çš„å¼‚åŒï¼Œé€šè¿‡ä¸€å¼ ç®€å•çš„å›¾çœ‹çœ‹ï¼Œæ ¸å¿ƒçš„ç‚¹åœ¨äºå®¹å™¨çš„å®½åº¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§†å£çš„å®½åº¦ä¸ä¸€å®šä¼šå‘ç”Ÿå˜åŒ–ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b83c2b32344484986260f7f659bbec1~tplv-k3u1fbpfcp-zoom-1.image)

æˆ‘ä»¬ç®€å•æ‹†è§£ä¸‹ä¸Šè¿°çš„ä»£ç ï¼Œéå¸¸å¥½ç†è§£ã€‚

1.  åœ¨ `.warp` çš„æ ·å¼ä¸­ï¼Œé€šè¿‡ `container-name: wrap` æ³¨å†Œä¸€ä¸ªå®¹å™¨
2.  æ³¨å†Œå®Œå®¹å™¨ä¹‹åï¼Œä¾¿å¯ä»¥é€šè¿‡ `@container wrap ()` å®¹å™¨æŸ¥è¯¢è¯­æ³•ï¼Œåœ¨å†…éƒ¨å†™å…¥ä¸åŒæƒ…å†µä¸‹çš„å¦å¤–ä¸€å¥—æ ·å¼
3.  è¿™é‡Œ `@container wrap (max-width: 400px) {}` çš„æ„æ€ä¾¿æ˜¯ï¼Œå½“ `.wrap` å®¹å™¨çš„å®½åº¦å°äº 400 px æ—¶ï¼Œé‡‡ç”¨å†…éƒ¨å®šä¹‰çš„æ ·å¼ï¼Œå¦åˆ™ï¼Œä½¿ç”¨å¤–éƒ¨é»˜è®¤çš„æ ·å¼

å…³äºå®¹å™¨æŸ¥è¯¢æ›´ä¸ºå…·ä½“çš„è¯­æ³•ï¼Œæˆ‘å»ºè®®è¿˜æ˜¯ä¸Š MDN æˆ–è€…è§„èŒƒè¯¦ç»†çœ‹çœ‹ -- [MDN -- CSS Container Queries](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Container_Queries)

`@scroll-timeline`
------------------

åœ¨ä¹‹å‰ï¼Œæˆ‘ä»‹ç»äº† CSS æœ€æ–°çš„ç‰¹æ€§ `@scroll-timeline`ï¼Œè­¬å¦‚è¿™ä¸¤ç¯‡æ–‡ç« ï¼š

*   [é©å‘½æ€§åˆ›æ–°ï¼ŒåŠ¨ç”»æ€æ‰‹é” @scroll-timeline](https://github.com/chokcoco/iCSS/issues/166)
*   [è¶…é…·ç‚«çš„è½¬åœºåŠ¨ç”»ï¼ŸCSS è½»æ¾æ‹¿ä¸‹ï¼](https://github.com/chokcoco/iCSS/issues/191)

`@scroll-timeline` èƒ½å¤Ÿè®¾å®šä¸€ä¸ªåŠ¨ç”»çš„å¼€å§‹å’Œç»“æŸç”±æ»šåŠ¨å®¹å™¨å†…çš„æ»šåŠ¨è¿›åº¦å†³å®šï¼Œè€Œä¸æ˜¯ç”±æ—¶é—´å†³å®šã€‚

æ„æ€æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåŠ¨ç”»æ•ˆæœï¼Œè¯¥åŠ¨ç”»çš„å¼€å§‹å’Œç»“æŸå¯ä»¥é€šè¿‡å®¹å™¨çš„æ»šåŠ¨æ¥è¿›è¡Œæ§åˆ¶ã€‚

åˆ©ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨çº¯ CSS å®ç°é¡µé¢æ»šåŠ¨ä¸ CSS åŠ¨ç”»çš„ç»“åˆï¼Œåƒæ˜¯è¿™æ ·ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a02d2eb85e7f40439ead5852a6872aed~tplv-k3u1fbpfcp-zoom-1.image)

é—æ†¾çš„æ˜¯ï¼Œè¿™ä¸ªå¦‚æ­¤å¥½çš„ç‰¹æ€§ï¼Œæœ€è¿‘å·²ç»è¢«è§„èŒƒåºŸå¼ƒï¼Œå·²ç»ä¸å†æ¨èä½¿ç”¨äº†ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d51baab34a474014b8fbeaae64e13d48~tplv-k3u1fbpfcp-zoom-1.image)

æ„æ€æ˜¯ï¼Œå³ä¾¿ç›®å‰æœ‰ä¸€äº›æµè§ˆå™¨å·²ç»æ”¯æŒäº† `@scroll-timeline`ï¼Œä½†æ˜¯å®ƒå¾ˆå¿«åˆå°†è¦é€€å‡ºå†å²èˆå°ã€‚ä¸å†å»ºè®®å†ä½¿ç”¨è¿™ä¸ª at-rule è§„åˆ™ã€‚

> è¿™é‡Œï¼Œ`@scroll-timeline` è™½ç„¶è¢«åºŸå¼ƒäº†ï¼Œä½†æ˜¯ CSS å°†ä¼šæ¢ä¸€ç§å®ç°æ–¹å¼å·åœŸé‡æ¥ã€‚

æ€»ç»“ä¸€ä¸‹
----

åˆ°è¿™é‡Œï¼Œå…¶å®è¿˜æœ‰å‡ ä¸ªéå¸¸å†·é—¨ä¸”ä¸å¤ªå®ç”¨çš„ at-rule è§„åˆ™ï¼Œè­¬å¦‚ï¼š

*   `@color-profile`ï¼šå…è®¸å®šä¹‰å¹¶å‘½åä¸€ä¸ªé¢œè‰²é…ç½®æ–‡ä»¶
*   `@font-feature-values`ï¼šä¸»è¦æ˜¯ç›¸å¯¹å­—ä½“åŠŸèƒ½çš„æ‹“å±•

èƒ½å¤Ÿæœé›†åˆ°èµ„æ–™å¤ªå°‘ï¼Œæ–‡æ¡£ä¹Ÿç›¸å¯¹ç®€é™‹ï¼Œç›®å‰å®ç”¨çš„åœºæ™¯å¤ªå°‘ï¼Œå°±ä¸è¯¦ç»†å±•å¼€ã€‚

ç»¼ä¸Šï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ•´ä¸ª at-rule å®¶æ—è¿˜æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œå¼•å…¥äº†éå¸¸å¤šæ–°çš„ç‰¹æ€§åŠåŠŸèƒ½ï¼Œè®© CSS ç”Ÿæ€æ„ˆå‘å¼ºå¤§ã€‚è®© CSS å¯ä»¥åšåˆ°çš„äº‹æƒ…è¶Šæ¥è¶Šå¤šï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ç†ç”±æœŸå¾…æœªæ¥ CSS ä¼šåœ¨ Web é¢†åŸŸæ‰®æ¼”æ„ˆå‘é‡è¦çš„è§’è‰²ã€‚

å¥½äº†ï¼Œæœ¬æ–‡åˆ°æ­¤ç»“æŸï¼Œå¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ© ğŸ˜ƒ

å¦‚æœè¿˜æœ‰ä»€ä¹ˆç–‘é—®æˆ–è€…å»ºè®®ï¼Œå¯ä»¥å¤šå¤šäº¤æµï¼ŒåŸåˆ›æ–‡ç« ï¼Œæ–‡ç¬”æœ‰é™ï¼Œæ‰ç–å­¦æµ…ï¼Œæ–‡ä¸­è‹¥æœ‰ä¸æ­£ä¹‹å¤„ï¼Œä¸‡æœ›å‘ŠçŸ¥ã€‚