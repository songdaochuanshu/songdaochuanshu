---
layout: post
title: "é«˜é˜¶åˆ‡å›¾æŠ€å·§ï¼åŸºäºå•å¼ å›¾ç‰‡çš„ä»»æ„é¢œè‰²è½¬æ¢"
date: "2022-07-11T03:39:18.010Z"
---
é«˜é˜¶åˆ‡å›¾æŠ€å·§ï¼åŸºäºå•å¼ å›¾ç‰‡çš„ä»»æ„é¢œè‰²è½¬æ¢
====================

ä»Šå¤©ï¼Œè¦ä»‹ç»ä¸€ç§åŸºäº CSS `mask-composite` çš„é«˜çº§æŠ€å·§ã€‚

é€šè¿‡æŒæ¡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€å¼  å›¾ç‰‡ï¼Œå¾—åˆ°å…³äºå®ƒçš„å„ç§å˜æ¢ï¼Œç”šè‡³ä¹ï¼Œå¾—åˆ°å„ç§ä¸åŒé¢œè‰²çš„å˜æ¢ã€‚

é€šè¿‡å•å¼  PNG/SVG å¾—åˆ°å®ƒçš„åå‘åˆ‡å›¾
---------------------

äº‹æƒ…çš„ç»è¿‡æ˜¯è¿™æ ·çš„ï¼ŒæŸå¤©ï¼Œæˆ‘ä»¬æ‹¿åˆ°äº†è¿™æ ·ä¸€å¼  PNG/SVG å›¾ç‰‡ï¼š

![è¿™æ˜¯ä¸€å¼ PNGå›¾ï¼Œç™½è‰²éƒ¨åˆ†é€æ˜](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf95201703144778962b47fd99d4c75a~tplv-k3u1fbpfcp-zoom-1.image)

å°±è¿™å¼ å›¾ç‰‡è€Œè¨€ï¼Œå®ƒæ˜¯ä¸€å¼  PNG å›¾ï¼Œç°è‰²éƒ¨åˆ†é€æ˜ã€‚

éšç€éœ€æ±‚çš„è¿›è¡Œï¼Œåœ¨æŸä¸€å¤„ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¼ åŸºäºä¸Šè¿°å›¾å½¢çš„åå‘é•‚ç©ºå›¾å½¢ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f5a82dd86c21417fbd5955baf671bbd9~tplv-k3u1fbpfcp-zoom-1.image)

emmmï¼Œè¦æ³¨æ„ï¼Œè¿™é‡Œç™½è‰²å¤„æ˜¯éœ€è¦é€æ˜çš„ï¼Œè¦èƒ½é€å‡ºä¸åŒçš„èƒŒæ™¯è‰²ï¼Œåƒæ˜¯è¿™æ ·ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6605e6d1c7dd40128977c9aea334f943~tplv-k3u1fbpfcp-zoom-1.image)

æ€ä¹ˆåŠå‘¢ï¼Œé€šå¸¸è€Œè¨€ï¼Œåªèƒ½æ˜¯æ‰¾ UI å†å‡ºä¸€å¼ é•‚ç©ºå›¾ã€‚

å½“ç„¶ï¼Œåœ¨ä»Šå¤©ï¼Œåªéœ€è¦ä¸€å¼  PNG/SVGï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ CSS è½»æ¾å®Œæˆä¸Šè¿°çš„è½¬æ¢ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° `mask-composite`ã€‚

ä½•ä¸º `mask-composite`ï¼Ÿ
--------------------

é‚£ä¹ˆï¼Œä½•ä¸º `mask-composite`ï¼Œå½“ç„¶ï¼Œç°é˜¶æ®µè¿˜éœ€è¦åŠ ä¸Šæµè§ˆå™¨å‰ç¼€ï¼Œ`-webkit-mask-composite`ã€‚

é¦–å…ˆï¼Œè¦å­¦ä¼šä½¿ç”¨ `mask-composite`ï¼Œå¾—å…ˆçŸ¥é“ CSS ä¸­å¦å¤–ä¸€ä¸ªéå¸¸é‡è¦ä¸”æœ‰ç”¨çš„å±æ€§ -- `mask`ã€‚

> å¦‚æœï¼Œä½ å¯¹ `mask` è¿˜æ¯”è¾ƒé™Œç”Ÿï¼Œå»ºè®®ä½ å…ˆçœ‹çœ‹è¿™ç¯‡ -- [å¥‡å¦™çš„ CSS MASK](https://github.com/chokcoco/iCSS/issues/80)

åœ¨è¿ç”¨ mask å¯¹å›¾ç‰‡è¿›è¡Œé®ç½©åˆ‡å‰²å¤„ç†çš„åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶å†è¿ç”¨åˆ° `mask-composite` å±æ€§ã€‚è¿™ä¸ªæ˜¯éå¸¸æœ‰æ„æ€çš„å…ƒç´ ã€‚

[\-webkit-mask-composite](https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-mask-composite): å±æ€§æŒ‡å®šäº†å°†åº”ç”¨äºåŒä¸€å…ƒç´ çš„å¤šä¸ªè’™ç‰ˆå›¾åƒç›¸äº’åˆæˆçš„æ–¹å¼ã€‚

é€šä¿—ç‚¹æ¥è¯´ï¼Œä»–çš„ä½œç”¨å°±æ˜¯ï¼Œå½“ä¸€ä¸ªå…ƒç´ å­˜åœ¨å¤šé‡ mask æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿ç”¨ -webkit-mask-composite è¿›è¡Œæ•ˆæœå åŠ ã€‚

ä¸¾ä¸ªæ —å­ï¼š

    <div class="original"></div>
    

    .original {
        background: #000;
        mask: radial-gradient(circle at 0 0, #000, #000 200px, transparent 200px);
    }
    

æˆ‘ä»¬ç”¨ä¸€ä¸ª `radial-gradient` ä½œä¸º maskï¼Œåˆ‡å‰²åŸæœ¬çš„çŸ©å½¢ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°çš„å›¾å½¢ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/294f241b370047b2a9b5fae6a84b90cc~tplv-k3u1fbpfcp-zoom-1.image)

å¦‚æœå†æ¢ä¸€ä¸ªæ–¹å‘ï¼š

    <div class="original"></div>
    

    .original {
        background: #000;
        mask: radial-gradient(circle at 100% 0, #000, #000 200px, transparent 200px);
    }
    

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a3536863d8c421f82e11011bb0102f6~tplv-k3u1fbpfcp-zoom-1.image)

å¦‚æœæˆ‘æƒ³å¾—åˆ°è¿™æ ·ä¸€ä¸ªæ•ˆæœï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a6fd7db1e49453d8849a8bd5f36070c~tplv-k3u1fbpfcp-zoom-1.image)

è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ

æˆ‘ä»¬å°è¯•åˆå¹¶ä¸Šè¿°ä¸¤ä¸ª mask çš„æ•ˆæœï¼š

    .mask {
        background: #000;
        mask: radial-gradient(circle at 100% 0, #000, #000 200px, transparent 200px),
            radial-gradient(circle at 0 0, #000, #000 200px, transparent 200px);
    }
    

æ•ˆæœå¦‚ä¸‹ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/df2c921a08e942fe88dcc7f7b035cec6~tplv-k3u1fbpfcp-zoom-1.image)

ä¸æˆ‘ä»¬æƒ³è±¡çš„ä¸å¤ªä¸€æ ·ï¼Œè¿™æ˜¯å› ä¸ºï¼Œä¸¤ä¸ª mask çš„å›¾å½¢å åŠ ï¼Œå°±æ˜¯ä¸Šè¿°å›¾å½¢çš„æ•ˆæœï¼Œæ‰€ä»¥ä¸Šè¿°æ•ˆæœæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚

åªæ˜¯ï¼Œæˆ‘ä»¬æƒ³å¾—åˆ°çš„æ˜¯ä¸¤ä¸ª mask å›¾å½¢çš„é‡å éƒ¨åˆ†ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23e0a2272fda47ae9d8f16ea463b0214~tplv-k3u1fbpfcp-zoom-1.image)

è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ `mask-composite`ï¼š

    .mask {
        background: #000;
        mask: radial-gradient(circle at 100% 0, #000, #000 200px, transparent 200px),
            radial-gradient(circle at 0 0, #000, #000 200px, transparent 200px);
        -webkit-mask-composite: source-in;
    }
    

æ·»åŠ äº† `-webkit-mask-composite: source-in` åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°ä¸¤ä¸ª mask å›¾å½¢çš„é‡å éƒ¨åˆ†ï¼Œå†åŸºäºè¿™ä¸ªé‡å éƒ¨åˆ†ä½œç”¨åˆ°æ•´ä¸ª mask é®ç½©ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/03471ff5138b48a9be532b67606559cb~tplv-k3u1fbpfcp-zoom-1.image)

`-webkit-mask-composite` è¿˜å¯ä»¥å®ç°éå¸¸å¤šä¸åŒçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

    -webkit-mask-composite: clear; /*æ¸…é™¤ï¼Œä¸æ˜¾ç¤ºä»»ä½•é®ç½©*/
    -webkit-mask-composite: copy; /*åªæ˜¾ç¤ºä¸Šæ–¹é®ç½©ï¼Œä¸æ˜¾ç¤ºä¸‹æ–¹é®ç½©*/
    -webkit-mask-composite: source-over; 
    -webkit-mask-composite: source-in; /*åªæ˜¾ç¤ºé‡åˆçš„åœ°æ–¹*/
    -webkit-mask-composite: source-out; /*åªæ˜¾ç¤ºä¸Šæ–¹é®ç½©ï¼Œé‡åˆçš„åœ°æ–¹ä¸æ˜¾ç¤º*/
    -webkit-mask-composite: source-atop;
    -webkit-mask-composite: destination-over;
    -webkit-mask-composite: destination-in; /*åªæ˜¾ç¤ºé‡åˆçš„åœ°æ–¹*/
    -webkit-mask-composite: destination-out;/*åªæ˜¾ç¤ºä¸‹æ–¹é®ç½©ï¼Œé‡åˆçš„åœ°æ–¹ä¸æ˜¾ç¤º*/
    -webkit-mask-composite: destination-atop;
    -webkit-mask-composite: xor; /*åªæ˜¾ç¤ºä¸é‡åˆçš„åœ°æ–¹*/
    

çœ‹çœ‹è¿™å¼ å›¾ï¼Œå°±ä¸€ç›®äº†ç„¶ï¼ˆå›¾ç‰‡æºè‡ª [CSS mask å®ç°é¼ æ ‡è·Ÿéšé•‚ç©ºæ•ˆæœ](https://segmentfault.com/a/1190000040996523)ï¼‰

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01f5e1c54f0b47469eeeed5102fd6e7a~tplv-k3u1fbpfcp-zoom-1.image)

ä½¿ç”¨ `-webkit-mask-composite` å®ç°å›¾ç‰‡çš„æ‰©å±•
-----------------------------------

åŸºäºä¸Šè¿°çš„çŸ¥è¯†é“ºå«ï¼Œå›åˆ°æˆ‘ä»¬çš„ä¸»é¢˜ï¼Œåœ¨æˆ‘ä»¬æœ‰äº†ä¸€å¼ é€æ˜å›¾ç‰‡ï¼ˆPNG/SVGï¼‰ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾çš„åˆ©ç”¨ `-webkit-mask-composite` å¾—åˆ°å®ƒçš„åå‘é•‚ç©ºå›¾ï¼š

    .mask {
        background: #000;
        mask: 
            url($img),
            linear-gradient(#fff, #000);
        mask-composite: exclude;
    }
    

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8f8424a542b4c1aafe5343d267b51fa~tplv-k3u1fbpfcp-zoom-1.image)

ä¸ä»…å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨è¿™ä¸ªæŠ€å·§ï¼Œä½¿ç”¨å›¾ç‰‡æœ¬èº«ä½œä¸º mask é®ç½©ï¼Œé…åˆ `-webkit-mask-composite`ï¼Œä»è€Œå°†ä¸€å¼ çº¯è‰²å›¾ç‰‡ï¼Œæ‰©å±•åˆ°å„ç±»ä¸åŒé¢œè‰²ï¼Œç”šè‡³æ˜¯æ¸å˜è‰²ï¼

    <div class="original"></div>
    <div class="mask"></div>
    <div class="mask-color"></div>
    <div class="mask-gradient"></div>
    

    
    .original {
        background: url($img);
        background-size: cover;
    }
    .mask {
        background: #000;
        mask: 
            url($img),
            linear-gradient(#fff, #000);
        mask-composite: exclude;
    }
    .mask-color {
        background: green;
        mask: 
            url($img),
            linear-gradient(#fff, #000);
        mask-composite: source-in;
    }
    .mask-gradient {
        background: linear-gradient(blue, yellowgreen);
        mask: 
            url($img),
            linear-gradient(#fff, #000);
        mask-composite: source-in;
    }
    

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ec9a677df934b7fbddf405d98820b7d~tplv-k3u1fbpfcp-zoom-1.image)

è¿™æ ·ï¼Œä»…ä»…æ˜¯åˆ©ç”¨ä¸€å¼  PNG/SVG åŸå›¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°å®ƒçš„

1.  åå‘é•‚ç©ºå›¾
2.  å…¶ä»–çº¯è‰²å›¾
3.  æ¸å˜è‰²å›¾

å¯ä»¥æœ‰æ•ˆçš„èŠ‚çœå›¾ç‰‡èµ„æºï¼Œèµ·åˆ°ä¸€å®šçš„ä¼˜åŒ–æ•ˆæœï¼

åœ¨ä¹‹å‰ï¼Œæˆ‘ä¹Ÿå†™è¿‡ä¸€ç§åŸºäºç™½åº•é»‘å›¾çš„ä»»æ„é¢œè‰²è½¬æ¢ï¼Œä½†æ˜¯å­˜åœ¨éå¸¸å¤§çš„å±€é™æ€§ï¼š[ä¸¤è¡Œ CSS ä»£ç å®ç°å›¾ç‰‡ä»»æ„é¢œè‰²èµ‹è‰²æŠ€æœ¯](https://github.com/chokcoco/iCSS/issues/32)ï¼Œ**ä½†æ˜¯ä»Šå¤©è¿™ä¸ªæŠ€å·§æ˜¯çº¯ç²¹çš„ï¼Œå¯¹åŸå›¾æ²¡æœ‰è¦æ±‚çš„ä»»æ„è‰²å½©è½¬æ¢**ï¼

å½“ç„¶ï¼Œå”¯ä¸€çš„ç¼ºç‚¹ï¼Œç›®å‰ä¼šå—é™äº `mask-composite` å’Œ `-webkit-mask-composite` çš„å…¼å®¹æ€§ï¼Œè€Œä¸”ä¸¤è€…çš„è¯­æ³•å­˜åœ¨ä¸€å®šçš„å·®å¼‚ï¼Œå®é™…ä½¿ç”¨çš„è¯éœ€è¦æ³¨æ„ã€‚æ ¹æ®ä¸šåŠ¡åœºæ™¯çµæ´»é€‰æ‹©ã€‚

æœ€å
--

éå¸¸æœ‰æ„æ€çš„ä¸€ä¸ªæŠ€å·§ï¼Œä½ å­¦ä¼šäº†å—ï¼Ÿæœ¬æ–‡åˆ°æ­¤ç»“æŸï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ© ğŸ˜ƒ

æ›´å¤šç²¾å½© CSS æŠ€æœ¯æ–‡ç« æ±‡æ€»åœ¨æˆ‘çš„ [Github -- iCSS](https://github.com/chokcoco/iCSS) ï¼ŒæŒç»­æ›´æ–°ï¼Œæ¬¢è¿ç‚¹ä¸ª star è®¢é˜…æ”¶è—ã€‚

å¦‚æœè¿˜æœ‰ä»€ä¹ˆç–‘é—®æˆ–è€…å»ºè®®ï¼Œå¯ä»¥å¤šå¤šäº¤æµï¼ŒåŸåˆ›æ–‡ç« ï¼Œæ–‡ç¬”æœ‰é™ï¼Œæ‰ç–å­¦æµ…ï¼Œæ–‡ä¸­è‹¥æœ‰ä¸æ­£ä¹‹å¤„ï¼Œä¸‡æœ›å‘ŠçŸ¥ã€‚