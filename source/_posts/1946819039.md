---
layout: post
title: "C++STL ä¸­çš„æ•°å€¼ç®—æ³•(iotaã€accumulateã€adjacent_differenceã€inner_productã€partial_sumï¼‰"
date: "2022-04-07T14:17:43.578Z"
---
C++STL ä¸­çš„æ•°å€¼ç®—æ³•(iotaã€accumulateã€adjacent\_differenceã€inner\_productã€partial\_sumï¼‰
===============================================================================

ä»¥ä¸‹ç®—æ³•å‡åŒ…å«åœ¨å¤´æ–‡ä»¶ numeric ä¸­

1.iota
------

è¯¥å‡½æ•°å¯ä»¥æŠŠä¸€ä¸ªèŒƒå›´å†…çš„åºåˆ—ä»ç»™å®šçš„**åˆå§‹å€¼**å¼€å§‹ç´¯åŠ   
å…ˆçœ‹ç”¨æ³•ã€‚  
ä¾‹ï¼š  
**å‡è®¾æˆ‘éœ€è¦ä¸€ä¸ªé•¿åº¦ä¸º10ï¼Œä»5å¼€å§‹é€’å¢çš„åºåˆ—**

        vector<int> a(10);
        iota(begin(a), end(a), 5);
    
        for (auto x : a) {
            cout << x << " ";
        }
    

**è¾“å‡º**ï¼š  
`5 6 7 8 9 10 11 12 13 14`  
è¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„åˆ›å»ºä¸€ä¸ªé€’å¢çš„åºåˆ—ï¼Œè€Œä¸ç”¨ä½¿ç”¨forå¾ªç¯  
æ­¤å¤–ï¼Œè¯¥å‡½æ•°æ˜¯ä½¿ç”¨è¿ç»­çš„æ”¯æŒ operator++()çš„ T ç±»å‹å€¼å¡«å……åºåˆ—  
ä¹Ÿå°±æ˜¯è¯´doubleç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œstringç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚  
åªè¦æ˜¯é‡è½½äº†++è¿ç®—ç¬¦çš„ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨ã€‚

2.accumulate
------------

æ›¾ç»åœ¨ç®—æ³•æ¯”èµ›ä¸­çœ‹è§åˆ«äººä½¿ç”¨accumulateå‡½æ•°è®¡ç®—å‡ºäº†ä¸€ä¸ªæ•°ç»„çš„å’Œã€‚  
è§‰å¾—ç‰¹åˆ«çš„ä¼˜é›…ï¼Œåƒè¿™æ ·ï¼š

        vector<int> a(10);
        iota(begin(a), end(a), 1);
    
        cout << accumulate(begin(a), end(a), 0) << "\n";  // è®¡ç®—ä»1åŠ åˆ°10çš„å’Œï¼Œä»0å¼€å§‹åŠ 
    

**è¾“å‡º**ï¼š  
`55`  
ä»é‚£å¤©èµ·ï¼Œæ¯å½“æˆ‘è¦æ±‚ä¸€ä¸ªåºåˆ—çš„å’Œçš„æ—¶å€™ï¼Œæˆ‘éƒ½ä¼šä½¿ç”¨è¿™ä¸ªæ–¹æ³•...  
ä½†æ˜¯ä»Šå¤©ï¼Œå½“æˆ‘çœ‹åˆ°accumulateçš„æºç ä¹‹åï¼š

    template <class InputIterator, class T>
       T accumulate (InputIterator first, InputIterator last, T init)
    {
      while (first!=last) {
        init = init + *first;  // or: init=binary_op(init,*first) for the binary_op version
        ++first;
      }
      return init;
    }
    

æ³¨æ„çœ‹è¿™é‡Œï¼š  
![](https://img2022.cnblogs.com/blog/2211063/202204/2211063-20220407170113369-286539556.png)  
å“‡å“¦ï¼Œå®ƒç«Ÿç„¶è¿˜æ”¯æŒäºŒå…ƒä»¿å‡½æ•°ï¼Œ[C++ functionalåº“ä¸­çš„ä»¿å‡½æ•°](https://www.cnblogs.com/Aatrowen-Blog/p/16112067.html)  
äºæ˜¯ï¼Œæˆ‘æœ‰äº†ä¸€ä¸ªå¤§èƒ†çš„æƒ³æ³•ã€‚  
**æ±‚ä¸€ä¸ªæ•°ç»„çš„ä¹˜ç§¯**

        vector<int> a(10);
        iota(begin(a), end(a), 1);
    
        cout << accumulate(begin(a), end(a), 1, multiplies<int>()) << "\n";  // è®¡ç®—ä»1åŠ åˆ°10çš„ä¹˜ç§¯ï¼Œä»1å¼€å§‹ä¹˜
    

**è¾“å‡º**ï¼š  
`3628800`  
åŒç†ï¼Œè¿˜å¯ä»¥æ±‚æ•°ç»„çš„å‡ï¼Œæ•°ç»„çš„é™¤ï¼Œæ•°ç»„çš„æ¨¡ğŸ˜

3.partial\_sum
--------------

è¿™ä¸ªå‡½æ•°å¯ä»¥ç”¨æ¥æ±‚å‰ç¼€å’Œï¼Œå‰ç¼€å’ŒæŒ‡ä¸€ä¸ªæ•°ç»„çš„æŸä¸‹æ ‡ä¹‹å‰çš„æ‰€æœ‰æ•°ç»„å…ƒç´ çš„å’Œï¼ˆåŒ…å«å…¶è‡ªèº«ï¼‰ã€‚  
ä¾‹å¦‚ï¼Œ1ã€2ã€3ã€4ã€5çš„å‰ç¼€å’Œæ•°ç»„ä¸º `1 3 6 10 15`

        vector<int> a(5);
        iota(begin(a), end(a), 1);
    
        partial_sum(begin(a), end(a), begin(a)); // æ±‚açš„å‰ç¼€å’Œï¼Œèµ‹å€¼ç»™aæ•°ç»„ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰
    
        for (auto x : a) {
            cout << x << " ";
        }
    

**è¾“å‡º**ï¼š  
`1 3 6 10 15`  
æœ‰äº†ä¸Šä¸€ä¸ªå‡½æ•°çš„ç»éªŒï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ±‚ä¸€ä¸ªæ•°ç»„çš„å‰ç¼€ä¹˜ã€é™¤ç­‰  
**ä¾‹**ï¼š

        partial_sum(begin(a), end(a), begin(a), multiplies<int>());
    

**è¾“å‡º**ï¼š  
`1 2 6 24 120`

4.adjacent\_difference
----------------------

è¿™ä¸ªå‡½æ•°å¯ä»¥å¯¹ä¸€ä¸ªåºåˆ—é‡Œç›¸é‚»ä¸¤ä¸ªå…ƒç´ è¿›è¡Œè¿ç®—ï¼Œé€šè¿‡differerceè¿™ä¸ªè¯å¯ä»¥çœ‹å‡ºæ¥ï¼Œé»˜è®¤æ˜¯è®¡ç®—ç›¸é‚»ä¸¤å…ƒç´ çš„å·®

    vector<int> a{1, 4, 5, 100, 40};
    
    adjacent_difference(begin(a), end(a), begin(a)); // æ±‚aæ•°ç»„ç›¸é‚»å…ƒç´ çš„å·®ï¼Œèµ‹å€¼ç»™aæ•°ç»„ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰
    
    for (auto x : a) {
        cout << x << " ";
    }
    

**è¾“å‡º**ï¼š  
`1 3 1 95 -60`

ä»Šå¤©æˆ‘æƒ³è®¡ç®—ç›¸é‚»ä¸¤å…ƒç´ çš„**ä¹˜ç§¯**

    adjacent_difference(begin(a), end(a), begin(a), multiplies<int>());
    

**è¾“å‡º**ï¼š  
`1 4 20 500 4000`

5.inner\_product
----------------

*   è¿™ä¸ªå‡½æ•°é»˜è®¤æƒ…å†µä¸‹å¯ä»¥æ±‚åºåˆ—ä¸­æ¯ä¸ªå…ƒç´ çš„å†…ç§¯ä¹‹å’Œï¼š

        vector<int> a(3);
        iota(begin(a), end(a), 1);
    
        cout << inner_product(begin(a), end(a), begin(a), 10) << "\n"; // ä»åˆå€¼10å¼€å§‹åŠ ä¸Šåºåˆ—å„å…ƒç´ çš„å†…ç§¯
    

**è¾“å‡º**ï¼š  
`24`

*   è¿˜å¯ä»¥ç”¨æ¥æ±‚ä¸¤ä¸ªåºåˆ—å…ƒç´ ä¸¤ä¸¤ç›¸ä¹˜å†ç›¸åŠ çš„ç»“æœ

        vector<int> a{1, 2, 3};
        vector<int> b{2, 3, 4};
    
        // 1 * 2 + 2 * 3 + 3 * 4
        cout << inner_product(begin(a), end(a), begin(b), 0) << "\n";
    

**è¾“å‡º**ï¼š  
`20`

*   æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ä»¿å‡½æ•°æ¥æ›¿ä»£ä¸Šè¿°çš„ä¸¤ä¸ªæ“ä½œç¬¦ + å’Œ \*

        vector<int> a{1, 2, 3};
        vector<int> b{2, 3, 4};
    
        cout << inner_product(begin(a), end(a), begin(b), 1
                            , multiplies<int>(), minus<int>()) << "\n";
                                // åŸæ¥çš„åŠ æ³• +  // åŸæ¥çš„ä¹˜æ³• *
                                // è®¡ç®— (1 - 2) * (2 - 3) * (3 - 4) = -1
    

**è¾“å‡º**ï¼š  
`-1`