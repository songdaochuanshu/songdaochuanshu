---
layout: post
title: "dolphinscheduleræ·»åŠ hanaæ”¯æŒ"
date: "2022-07-11T11:24:51.115Z"
---
dolphinscheduleræ·»åŠ hanaæ”¯æŒ
========================

dolphinscheduleræ·»åŠ hanaæ”¯æŒ
------------------------

è½¬è½½è¯·æ³¨æ˜å‡ºå¤„: [https://www.cnblogs.com/funnyzpc/p/16395092.html](https://www.cnblogs.com/funnyzpc/p/16395092.html)

### å‰é¢

ä¸Šä¸€èŠ‚æœ‰è®²`datax`å¯¹`hana`çš„æ”¯æŒï¼ŒåŒæ—¶ä¹Ÿè®²äº†`dolphinscheduler`ä¸‹çš„`datax`çš„é…ç½®ï¼ˆ [](https://www.cnblogs.com/funnyzpc/p/16395104.html)ï¼‰ï¼Œå”¯ä¸€çš„ç¼ºé™·æ˜¯`dolphinscheduler`é»˜è®¤åªå¯¹å¸¸è§„æ•°æ®åº“å‚å•†çš„`db`åšäº†æ”¯æŒï¼Œæ¯”å¦‚:`mysql`ã€`oracle`ã€`sqlserver`ã€`postgresql`...ç­‰ç­‰,æ‰€ä»¥å¿…é¡»è¦æ‰©å±•ï¼Œä»¥æä¾›`hana`é€‰é¡¹ï¼Œä¸ç„¶ä»…ä»…`datax`æ”¯æŒäº†`hana`ä»æ—§æ— æ³•åœ¨`dolphinscheduler`ä¸­ä½¿ç”¨å“ˆ(ï½ï¿£(OO)ï¿£)ãƒ–  
æœ¬ç¯‡åšå®¢ä»…è®²ä¸ªäººå¯¹`hana`æ·»åŠ æ”¯æŒçš„æ”¹é€ è¿‡ç¨‹ï¼Œå…·ä½“ä»£ç ä¸å¤§ä¼šæåˆ°ï¼Œæœ‰éœ€è¦å‚è€ƒçš„ï¼Œå¯ä»¥è®¿é—®[https://github.com/funnyzpc/dolphinscheduler-2.0.5](https://github.com/funnyzpc/dolphinscheduler-2.0.5)ä»¥è·å–æºç ,åŒæ—¶ï¼Œè‹¥æ‚¨æœ‰å•¥å»ºè®®è¯·åº•ä¸‹ç•™è¨€å“ˆğŸ˜,å¥½äº†ï¼Œç°åœ¨å¼€å§‹~

### ä¸€.æ•´ä½“çš„é¡¹ç›®ç»“æ„

ï¼ˆé¡¹ç›®ç»“æ„ï¼‰  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711141803720-368216068.png)

ä¸Šå›¾æ˜¯`dolphinscheduler`æ•´ä½“ä»£ç ç»“æ„ï¼Œé‡Œé¢`dolphinscheduler-ui`æ˜¯å‰ç«¯é¡µé¢æ¨¡å—ï¼Œå…¶ä¸‹æ–¹å‡ä¸ºè„šæœ¬æˆ–æ–‡æ¡£ä¹‹ç±»ï¼Œå…¶ä¸Šæ–¹æœ‰`dao`ã€`common`éç‹¬ç«‹éƒ¨ç½²æ¨¡å—ï¼Œä»¥åŠ`standalone`ä»¥åŠ`service`ç­‰ç‹¬ç«‹éƒ¨ç½²æ¨¡å—ï¼Œæœ¬æ¬¡éœ€è¦æ”¹é€ çš„éƒ¨åˆ†åŸºæœ¬å‡ä»¥é«˜äº®è‰²æ˜¾ç¤º  
åŒæ—¶æœ¬äººä¹Ÿè¡¥å……äº†ä¸‹æ–‡æ¡£ï¼Œä¸»è¦æ¶‰åŠåˆ°ç‹¬ç«‹æ‰“åŒ…ä»¥åŠå¯åŠ¨ç­‰å‘½ä»¤,å…·ä½“è¯·è§é¡¹ç›®å†…çš„ `MY.md` ï¼Œokï¼Œä¸‹é¢å…ˆä»`ui`å¼€å§‹è¯´èµ·~

### äºŒ.uiéƒ¨åˆ†ä¿®æ”¹

ï¼ˆæ•°æ®æºï¼‰  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711142648403-73996225.png)  
ï¼ˆdataxä»»åŠ¡ï¼‰  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711142655018-1108882929.png)  
ï¼ˆprocedureä»»åŠ¡ï¼‰  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711142700068-519101721.png)  
ï¼ˆsqlä»»åŠ¡ï¼‰  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711142704956-1083142944.png)  
ï¼ˆsqoopä»»åŠ¡ï¼‰  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711142711475-299603742.png)

`sqoopä»»åŠ¡`è¿™ä¸ªä»»åŠ¡ç±»å‹å¦‚æœæ²¡ç”¨åˆ°ç€å®æ²¡å¾—æ”¹é€ çš„å¿…è¦ï¼Œæ¯•ç«Ÿæ¯”è¾ƒåé—¨ï¼Œå½“ç„¶å•¦ï¼Œå¦‚æœçœŸçš„ç”¨å¤§æ•°æ®ç›¸å…³çš„ä¸œä¸œè¿˜æ˜¯å»ºè®®çš„ï¼Œæœ¬äººå°±æ²¡æœ‰æ”¹å“ˆğŸ˜…ğŸ˜…  
ä»¥ä¸Šåªæ˜¯å‘ˆç°å‡ºæ¥çš„é¡µé¢ï¼Œå…·ä½“ä»£ç åœ¨`dolphinscheduler-ui`è¿™ä¸ªæ¨¡å—å†…(å»ºè®®ä½¿ç”¨`webstorm`ã€`vscode`ç­‰å‰ç«¯`ide`æ‰“å¼€å¹¶ç¼–è¾‘)ï¼Œå…·ä½“å¯¹åº”çš„ä»£ç æœ‰è¿™å‡ ä¸ªï¼š  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711143337359-1609163308.png)  
å› ä¸ºåªéœ€è¦åœ¨é€‰é¡¹å†…æ·»åŠ `hana`æ”¯æŒï¼Œæ‰€ä»¥å°±å¾ˆç®€å•ï¼Œè¿™é‡Œè‹¥å‚è€ƒï¼Œè¯·å‚è€ƒæˆ‘çš„`github`ä¸Šçš„(å¼€å¤´æœ‰æ)ä»£ç å“ˆğŸ˜‚

å¦‚æœä¿®æ”¹å®Œæˆï¼Œé€šè¿‡ä¸‹é¢ä»£ç ç¼–è¯‘`dolphinscheduler-ui`æ¨¡å—ï¼Œå°†ç”Ÿæˆçš„`dist`å†…çš„æ–‡ä»¶æ‹·è´åˆ°æœåŠ¡å™¨çš„`dolphinscheduler`ç›®å½•ä¸‹`ui`ç›®å½•ä¸­ï¼Œè¦†ç›–å³å¯,ä¸è¿‡å»ºè®®è¿˜æ˜¯å…ˆå¤‡ä»½å“ˆ~

    npm run build:release
    

å…·ä½“å‘½ä»¤ä¹Ÿåœ¨ä»£ç çš„`MY.md`æ–‡æ¡£å†…ã€‚

### ä¸‰.åç«¯éƒ¨åˆ†ä¿®æ”¹

å…ˆæ€»ç»“ä¸‹ï¼Œå¯¹åç«¯çš„ä¿®æ”¹æ— éå°±æ˜¯æ·»åŠ `hana`çš„`jdbc`åŒ…ä»¥åŠ `hana`æ•°æ®æºæ¨¡å—åŠç›¸å…³çš„å‚æ•°é…ç½®ï¼Œå…¶å®ƒçš„çœŸçš„å°±æ²¡å•¥äº†ã€‚

#### 3.1 æ·»åŠ `hana`çš„`jdbc`ä¾èµ–

æ·»åŠ ä¾èµ–å¤§æ¦‚æœ‰ä¸‰ä¸ªåœ°æ–¹ï¼š

*   1.`dolphinscheduler-2.0.5`ä¸­ä¸»ç›®å½•ä¸‹`pom`æ–‡ä»¶ï¼Œå»ºè®®æ·»åŠ ç‰ˆæœ¬ä»¥åŠä¾èµ–
*   2.`dolphinscheduler-dao`æ¨¡å—ä¸‹çš„`pom`æ–‡ä»¶
*   3.`dolphinscheduler-datasource-plugin/dolphinscheduler-datasource-saphana`æ¨¡å—ä¸‹çš„`pom`æ–‡ä»¶(è¿™ä¸ªæ¨¡å—éœ€è¦åˆ›å»º)

å…·ä½“ä½ç½®å¦‚ä¸‹æ–¹æˆªå›¾ï¼š  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711145015342-1522518135.png)

#### 3.2ä¿®æ”¹`dolphinscheduler-spi`

è¿™ä¸ªåœ°æ–¹ä¸»è¦æ·»åŠ `hana`çš„`driver`åœ°å€ä»¥åŠ`éªŒè¯è¯­å¥`ã€`jdbcå‰ç¼€`è¿™äº›ï¼Œå¦‚æœæœ‰å…¶å®ƒçš„è¿˜æ˜¯æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œæ·»åŠ å³å¯~  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711145318575-1245546690.png)

#### 3.3ä¿®æ”¹`dolphinscheduler-datasource-plugin/dolphinscheduler-datasource-api`

æ­¤å¤„å»ºè®®æ˜¯åŠ ä¸€ä¸ªåŒ…ï¼Œåœ¨åŒ…å†…æ·»åŠ è¿™ä¸‰ä¸ªæ–‡ä»¶: SapHanaConnectionParamã€SapHanaDatasourceParamDTOã€SapHanaDatasourceProcessor ï¼Œå½“ç„¶å•¦ï¼Œå¦‚æœéœ€è¦æ‰©å±•å…¶å®ƒå‚å•†çš„dbï¼Œä¹Ÿå¯å¯ä»¥æ‰¾æ‰¾ç›¸é‚»åŒ…å†…çš„ä»£ç å‚è€ƒå³å¯~  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711145609318-256011161.png)

#### 3.4åˆ›å»º`dolphinscheduler-datasource-saphana`æ¨¡å—

æ¨¡å—çš„å…·ä½“ä½ç½®åœ¨ `dolphinscheduler-datasource-plugin/dolphinscheduler-datasource-saphana` ,ä»…åŒ…å«ä¸‰ä¸ªæ–‡ä»¶: `SapHanaDataSourceChannelã€SapHanaDataSourceChannelFactoryã€SapHanaDataSourceClient` å¦‚æœ‰ä¸å¤§å¦¥å½“çš„åœ°æ–¹ï¼Œå»ºè®®æ ¹æ®æ‚¨çš„å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼Œä¸æ˜¯å¾ˆéš¾~  
![](https://img2022.cnblogs.com/blog/1161789/202207/1161789-20220711145922087-1365324571.png)

### å››.æ‰“åŒ…ä¸Šä¼ 

å› ä¸ºé¡¹ç›®ä½¿ç”¨çš„æ˜¯`maven`ï¼Œæ‰€ä»¥æ‰“åŒ…è¾ƒæ…¢ï¼Œæ‰€ä»¥æœ¬äººé‡‡ç”¨ä»¥ä¸‹è¯­å¥æ‰“åŒ…ï¼š

    mvn clean -Dmaven.test.skip=true package -Prelease -pl dolphinscheduler-datasource-plugin/dolphinscheduler-datasource-api -am
    mvn clean -Dmaven.test.skip=true package -Prelease -pl dolphinscheduler-api -am
    

å°†æ‰“åŒ…å¥½çš„ä¸¤ä¸ªæ–‡ä»¶ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼ŒåŒæ—¶åˆ«å¿˜äº†è¿˜æœ‰æ·»åŠ çš„`jdbc`ä¾èµ–:`ngdbc-2.12.7.jar` ä¹Ÿä¸€åŒä¸Šä¼ è‡³æœåŠ¡å™¨ä¸Šçš„`dolphinscheduler`ä¸‹çš„`lib`ç›®å½•ï¼Œä¸Šä¼ å®Œæˆéœ€è¦é‡å¯æ‰å¯ç”Ÿæ•ˆï¼

### æœ€å

å¥½äº†ï¼Œæœ¬ç« å³åˆ°æ­¤ï¼Œå› ä¸º`dolphinscheduler`æ¨¡å—æ•°é‡è¿‡äºç¹å¤šï¼Œè€Œå…·ä½“ä½¿ç”¨ ä¸å°‘ä¹Ÿæ˜¯å•æœºä½¿ç”¨ï¼Œæ‰€ä»¥æœ‰åšå•æœºåŒ–æ”¹é€ ï¼Œå…·ä½“åˆ™æ˜¯å›´ç»•ç€ `standalone-server` åšä»£ç ç®€åŒ–åŠè°ƒæ•´,æœŸå¾…å“Ÿ~ ğŸ˜

funnyzpc@gmail.com