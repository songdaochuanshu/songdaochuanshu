---
layout: post
title: "ä½¿ç”¨ LoRA è¿›è¡Œ Stable Diffusion çš„é«˜æ•ˆå‚æ•°å¾®è°ƒ"
date: "2023-02-10T09:16:51.657Z"
---
ä½¿ç”¨ LoRA è¿›è¡Œ Stable Diffusion çš„é«˜æ•ˆå‚æ•°å¾®è°ƒ
===================================

[LoRA: Low-Rank Adaptation of Large Language Models](https://arxiv.org/abs/2106.09685) æ˜¯å¾®è½¯ç ”ç©¶å‘˜å¼•å…¥çš„ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œä¸»è¦ç”¨äºŽå¤„ç†å¤§æ¨¡åž‹å¾®è°ƒçš„é—®é¢˜ã€‚ç›®å‰è¶…è¿‡æ•°åäº¿ä»¥ä¸Šå‚æ•°çš„å…·æœ‰å¼ºèƒ½åŠ›çš„å¤§æ¨¡åž‹ (ä¾‹å¦‚ GPT-3) é€šå¸¸åœ¨ä¸ºäº†é€‚åº”å…¶ä¸‹æ¸¸ä»»åŠ¡çš„å¾®è°ƒä¸­ä¼šå‘ˆçŽ°å‡ºå·¨å¤§å¼€é”€ã€‚ LoRA å»ºè®®å†»ç»“é¢„è®­ç»ƒæ¨¡åž‹çš„æƒé‡å¹¶åœ¨æ¯ä¸ª Transformer å—ä¸­æ³¨å…¥å¯è®­ç»ƒå±‚ (ç§©-åˆ†è§£çŸ©é˜µ)ã€‚å› ä¸ºä¸éœ€è¦ä¸ºå¤§å¤šæ•°æ¨¡åž‹æƒé‡è®¡ç®—æ¢¯åº¦ï¼Œæ‰€ä»¥å¤§å¤§å‡å°‘äº†éœ€è¦è®­ç»ƒå‚æ•°çš„æ•°é‡å¹¶ä¸”é™ä½Žäº† GPU çš„å†…å­˜è¦æ±‚ã€‚ç ”ç©¶äººå‘˜å‘çŽ°ï¼Œé€šè¿‡èšç„¦å¤§æ¨¡åž‹çš„ Transformer æ³¨æ„åŠ›å—ï¼Œä½¿ç”¨ LoRA è¿›è¡Œçš„å¾®è°ƒè´¨é‡ä¸Žå…¨æ¨¡åž‹å¾®è°ƒç›¸å½“ï¼ŒåŒæ—¶é€Ÿåº¦æ›´å¿«ä¸”éœ€è¦æ›´å°‘çš„è®¡ç®—ã€‚

ç”¨äºŽ Diffusers çš„ LoRA ðŸ§¨
----------------------

å°½ç®¡ LoRA æœ€åˆæ˜¯ä¸ºå¤§æ¨¡åž‹æå‡ºçš„ï¼Œå¹¶åœ¨ transformer å—ä¸Šè¿›è¡Œäº†æ¼”ç¤ºï¼Œä½†è¯¥æŠ€æœ¯ä¹Ÿå¯ä»¥åº”ç”¨äºŽå…¶ä»–åœ°æ–¹ã€‚åœ¨å¾®è°ƒ Stable Diffusion çš„æƒ…å†µä¸‹ï¼ŒLoRA å¯ä»¥åº”ç”¨äºŽå°†å›¾åƒè¡¨ç¤ºä¸Žæè¿°å®ƒä»¬çš„æç¤ºç›¸å…³è”çš„äº¤å‰æ³¨æ„å±‚ã€‚ä¸‹å›¾çš„ç»†èŠ‚ (æ‘˜è‡ª [Stable Diffusion è®ºæ–‡](https://arxiv.org/abs/2112.10752)) å¹¶ä¸é‡è¦ï¼Œåªéœ€è¦æ³¨æ„é»„è‰²å—æ˜¯è´Ÿè´£å»ºç«‹å›¾æ–‡ä¹‹é—´çš„å…³ç³»è¡¨ç¤ºå°±è¡Œã€‚

![æ½œåœ¨æ‰©æ•£æž¶æž„](https://man-archives.oss-cn-hangzhou.aliyuncs.com/goofan/latent-diffusion.png)

æ®æˆ‘ä»¬æ‰€çŸ¥ï¼ŒSimo Ryu (GitHub ç”¨æˆ·å `@cloneofsimo`) æ˜¯ç¬¬ä¸€ä¸ªæå‡ºé€‚ç”¨äºŽ Stable Diffusion çš„ LoRA å®žçŽ°çš„äººã€‚å¦‚æžœæƒ³æŸ¥çœ‹ç›¸å…³ç¤ºä¾‹å’Œè®¸å¤šå…¶ä»–æœ‰è¶£çš„è®¨è®ºå’Œè§è§£ã€‚è¯·ä¸€å®šè¦çœ‹çœ‹ [ä»–ä»¬çš„ GitHub é¡¹ç›®](https://github.com/cloneofsimo/lora)ã€‚

ä¸ºäº†å°† LoRA çš„å¯è®­ç»ƒçŸ©é˜µæ³¨å…¥åˆ°ä¸Žäº¤å‰æ³¨æ„åŠ›å±‚ä¸€æ ·æ·±çš„æ¨¡åž‹ä¸­ï¼Œè¿‡åŽ»äººä»¬éœ€è¦ä»¥å¯Œæœ‰æƒ³è±¡åŠ› (ä½†è„†å¼±) çš„æ–¹å¼ç ´è§£ [diffusers](https://github.com/huggingface/diffusers) çš„æºä»£ç ã€‚å¦‚æžœ Stable Diffusion å‘æˆ‘ä»¬å±•ç¤ºäº†ä¸€ä»¶äº‹ï¼Œé‚£å°±æ˜¯ç¤¾åŒºæ€»æ˜¯ä¼šæƒ³å‡ºåŠžæ³•æ¥æ”¹å˜å’Œè°ƒæ•´æ¨¡åž‹ä»¥è¾¾åˆ°åˆ›é€ æ€§ç›®çš„ï¼Œæˆ‘ä»¬å–œæ¬¢è¿™æ ·ï¼ç”±äºŽè®¸å¤šå…¶ä»–åŽŸå› ï¼Œæä¾›æ“çºµäº¤å‰æ³¨æ„åŠ›å±‚çš„çµæ´»æ€§å¯èƒ½æ˜¯æœ‰ç›Šçš„ï¼Œä¾‹å¦‚æ›´å®¹æ˜“é‡‡ç”¨ [xFormers](https://github.com/facebookresearch/xformers) ç­‰ä¼˜åŒ–æŠ€æœ¯ã€‚ [Prompt-to-Prompt](https://arxiv.org/abs/2208.01626) ç­‰å…¶ä»–åˆ›æ„é¡¹ç›®å¯ä»¥ä½¿ç”¨ä¸€äº›ç®€å•çš„æ–¹æ³•æ¥è®¿é—®è¿™äº›å±‚ï¼Œå› æ­¤æˆ‘ä»¬å†³å®š [ä¸ºç”¨æˆ·æä¾›ä¸€ç§é€šç”¨çš„æ–¹æ³•æ¥åšåˆ°è¿™ä¸€ç‚¹](https://github.com/huggingface/diffusers/pull/1639)ã€‚è‡ª 12 æœˆä¸‹æ—¬ä»¥æ¥ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨æµ‹è¯•ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„ [diffusers](https://github.com/huggingface/diffusers/releases/tag/v0.12.0) ä¸­æ­£å¼å‘å¸ƒã€‚

æˆ‘ä»¬ä¸€ç›´åœ¨ä¸Ž `@cloneofsimo` åˆä½œï¼Œä¸º Dreambooth å’Œå…¨å¾®è°ƒæ–¹æ³•æä¾› Diffusions ä¸­çš„ LoRA è®­ç»ƒæ”¯æŒï¼è¿™äº›æŠ€æœ¯æä¾›äº†ä»¥ä¸‹å¥½å¤„ï¼š

*   æ›´å¿«çš„è®­ç»ƒé€Ÿåº¦
*   è®¡ç®—è¦æ±‚è¾ƒä½Žã€‚æˆ‘ä»¬å¯ä»¥åœ¨å…·æœ‰ 11 GB VRAM çš„ 2080 Ti ä¸­åˆ›å»ºä¸€ä¸ªå…¨å¾®è°ƒæ¨¡åž‹ï¼
*   **å°äº†å¾ˆå¤šçš„è®­ç»ƒæ¨¡åž‹**ã€‚ç”±äºŽåŽŸå§‹æ¨¡åž‹å·²å†»ç»“ï¼Œæˆ‘ä»¬æ³¨å…¥äº†æ–°å±‚è¿›è¡Œè®­ç»ƒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æ–°å±‚çš„æƒé‡ä¿å­˜ä¸ºå¤§å°çº¦ä¸º 3 MB çš„å•ä¸ªæ–‡ä»¶ã€‚è¿™æ¯” UNet æ¨¡åž‹çš„åŽŸå§‹å¤§å°å°ä¸€åƒå€

æˆ‘ä»¬å¯¹æœ€åŽä¸€ç‚¹ç‰¹åˆ«å…´å¥‹ã€‚ä¸ºäº†è®©ç”¨æˆ·åˆ†äº«ä»–ä»¬å‡ºè‰²çš„å¾®è°ƒæˆ– **dreamboothed** æ¨¡åž‹ï¼Œä»–ä»¬å¿…é¡»åˆ†äº«æœ€ç»ˆæ¨¡åž‹çš„å®Œæ•´å‰¯æœ¬ã€‚å…¶ä»–æƒ³è¦è¯•ç”¨å®ƒä»¬çš„ç”¨æˆ·å¿…é¡»åœ¨ä»–ä»¬æœ€å–œæ¬¢çš„ UI ä¸­ä¸‹è½½ç»è¿‡å¾®è°ƒçš„æƒé‡ï¼Œè¿™ä¼šå¢žåŠ å¤§é‡å­˜å‚¨å’Œä¸‹è½½æˆæœ¬ã€‚æˆªè‡³ä»Šå¤©ï¼Œå¤§çº¦æœ‰ [1,000 ä¸ª Dreambooth æ¨¡åž‹åœ¨ Dreambooth æ¦‚å¿µåº“ä¸­æ³¨å†Œ](https://huggingface.co/sd-dreambooth-library)ï¼Œå¯èƒ½è¿˜æœ‰æ›´å¤šæœªåœ¨åº“ä¸­æ³¨å†Œã€‚

ä½¿ç”¨ LoRAï¼ŒçŽ°åœ¨å¯ä»¥å‘å¸ƒ [å•ä¸ª 3.29 MB æ–‡ä»¶](https://huggingface.co/sayakpaul/sd-model-finetuned-lora-t4/blob/main/pytorch_lora_weights.bin) ä»¥å…è®¸å…¶ä»–äººä½¿ç”¨ä½ çš„å¾®è°ƒæ¨¡åž‹ã€‚

(æ„Ÿè°¢ GitHub ç”¨æˆ· `@mishig25`ï¼Œä»–æ˜¯æˆ‘äº†è§£åˆ°çš„é¦–ä¸ªåœ¨å¹³å¸¸å¯¹è¯ä¸­å°† **dreamboothing** ä½œä¸ºåŠ¨è¯çš„äºº)ã€‚

LoRA å¾®è°ƒ
-------

Stable Diffusion çš„å…¨æ¨¡åž‹å¾®è°ƒè¿‡åŽ»æ—¢ç¼“æ…¢åˆå›°éš¾ï¼Œè¿™ä¹Ÿæ˜¯ Dreambooth æˆ– Textual Inversion ç­‰è½»é‡çº§æ–¹æ³•å˜å¾—å¦‚æ­¤æµè¡Œçš„éƒ¨åˆ†åŽŸå› ã€‚ä½¿ç”¨ LoRAï¼Œåœ¨è‡ªå®šä¹‰æ•°æ®é›†ä¸Šå¾®è°ƒæ¨¡åž‹è¦å®¹æ˜“å¾—å¤šã€‚

Diffusers çŽ°åœ¨æä¾›äº†ä¸€ä¸ª [LoRA å¾®è°ƒè„šæœ¬](https://github.com/huggingface/diffusers/blob/main/examples/text_to_image/train_text_to_image_lora.py)ï¼Œå¯ä»¥åœ¨ä½Žè‡³ 11 GB çš„ GPU RAM ä¸­è¿è¡Œè€Œæ— éœ€å€ŸåŠ©åˆ°è¯¸å¦‚ 8-bit ä¼˜åŒ–å™¨ä¹‹ç±»çš„æŠ€å·§ã€‚è¿™é‡Œå±•ç¤ºäº†æ‚¨å¦‚ä½•å€ŸåŠ©å®ƒæ¥ä½¿ç”¨ [Lambda Labs PokÃ©mon æ•°æ®é›†](https://huggingface.co/datasets/lambdalabs/pokemon-blip-captions) å¾®è°ƒæ¨¡åž‹ï¼š

    export MODEL_NAME="runwayml/stable-diffusion-v1-5"
    export OUTPUT_DIR="/sddata/finetune/lora/pokemon"
    export HUB_MODEL_ID="pokemon-lora"
    export DATASET_NAME="lambdalabs/pokemon-blip-captions"
    
    accelerate launch --mixed_precision="fp16"  train_text_to_image_lora.py \
      --pretrained_model_name_or_path=$MODEL_NAME \
      --dataset_name=$DATASET_NAME \
      --dataloader_num_workers=8 \
      --resolution=512 --center_crop --random_flip \
      --train_batch_size=1 \
      --gradient_accumulation_steps=4 \
      --max_train_steps=15000 \
      --learning_rate=1e-04 \
      --max_grad_norm=1 \
      --lr_scheduler="cosine" --lr_warmup_steps=0 \
      --output_dir=${OUTPUT_DIR} \
      --push_to_hub \
      --hub_model_id=${HUB_MODEL_ID} \
      --report_to=wandb \
      --checkpointing_steps=500 \
      --validation_prompt="Totoro" \
      --seed=1337
    

è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ä»¶äº‹æ˜¯å­¦ä¹ çŽ‡ä¸ºâ€œ1e-4â€ï¼Œè¿œå¤§äºŽå¸¸è§„å¾®è°ƒçš„é€šå¸¸å­¦ä¹ çŽ‡ï¼ˆé€šå¸¸ä¸ºâ€œ~1e-6â€çš„æ•°é‡çº§ï¼‰ã€‚è¿™æ˜¯ä¸Šæ¬¡è¿è¡Œçš„ [W&B dashboard](https://wandb.ai/pcuenq/text2image-fine-tune/runs/b4k1w0tn?workspace=user-pcuenq)ï¼Œåœ¨ 2080 Ti GPU (11 GB å†…å­˜)ã€‚æˆ‘æ²¡æœ‰å°è¯•ä¼˜åŒ–è¶…å‚æ•°ï¼Œæ‰€ä»¥è¯·è‡ªè¡Œå°è¯•ï¼[Sayak](https://huggingface.co/sayakpaul) åœ¨ T4 (16 GB å†…å­˜) ä¸Šåˆè·‘äº†ä¸€æ¬¡ï¼Œè¿™æ˜¯ [ä»–çš„æœ€ç»ˆæ¨¡åž‹](https://huggingface.co/sayakpaul/sd-model-finetuned-lora-t4)ï¼Œè¿™é‡Œæ˜¯ [ä½¿ç”¨å®ƒçš„æ¼”ç¤ºç©ºé—´](https://huggingface.co/spaces/pcuenq/lora-pokemon)ã€‚

![Sayak çš„ LoRA æ¨¡åž‹è¾“å‡ºç¤ºä¾‹](https://man-archives.oss-cn-hangzhou.aliyuncs.com/goofan/sayak-pokemon-collage.png)

æœ‰å…³ diffusers ä¸­ LoRA æ”¯æŒçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [æˆ‘ä»¬çš„æ–‡æ¡£](https://huggingface.co/docs/diffusers/main/en/training/lora)â€”â€”å®ƒå°†å§‹ç»ˆä¸Žå®žçŽ°ä¿æŒåŒæ­¥ã€‚

æŽ¨ç†
--

æ­£å¦‚æˆ‘ä»¬æ‰€è®¨è®ºçš„ï¼ŒLoRA çš„ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€æ˜¯æ‚¨å¯ä»¥é€šè¿‡è®­ç»ƒæ¯”åŽŸå§‹æ¨¡åž‹å¤§å°å°‘å‡ ä¸ªæ•°é‡çº§çš„æƒé‡æ¥èŽ·å¾—å‡ºè‰²çš„ç»“æžœã€‚æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªæŽ¨ç†è¿‡ç¨‹ï¼Œå…è®¸åœ¨æœªä¿®æ”¹çš„ Stable Diffusion æ¨¡åž‹æƒé‡ä¹‹ä¸ŠåŠ è½½é¢å¤–çš„æƒé‡ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Hub API è‡ªåŠ¨ç¡®å®šç”¨äºŽå¾®è°ƒ LoRA æ¨¡åž‹çš„åŸºæœ¬æ¨¡åž‹æ˜¯ä»€ä¹ˆã€‚ä»Ž [Sayakçš„æ¨¡åž‹](https://huggingface.co/sayakpaul/sd-model-finetuned-lora-t4) å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™æ®µä»£ç ï¼š

    from huggingface_hub import model_info
    
    # LoRA weights ~3 MB
    model_path = "sayakpaul/sd-model-finetuned-lora-t4"
    
    info = model_info(model_path)
    model_base = info.cardData["base_model"]
    print(model_base)   # CompVis/stable-diffusion-v1-4
    

æ­¤ä»£ç æ®µå°†æ‰“å°ä»–ç”¨äºŽå¾®è°ƒçš„æ¨¡åž‹ï¼Œå³â€œCompVis/stable-diffusion-v1-4â€ã€‚å°±æˆ‘è€Œè¨€ï¼Œæˆ‘ä»Ž Stable Diffusion 1.5 ç‰ˆå¼€å§‹è®­ç»ƒæˆ‘çš„æ¨¡åž‹ï¼Œå› æ­¤å¦‚æžœæ‚¨ä½¿ç”¨ [æˆ‘çš„ LoRA æ¨¡åž‹](https://huggingface.co/pcuenq/pokemon-lora) è¿è¡Œç›¸åŒçš„ä»£ç ï¼Œæ‚¨ä¼šçœ‹åˆ°è¾“å‡ºæ˜¯ `runwayml/stable-diffusion-v1-5`ã€‚

å¦‚æžœæ‚¨ä½¿ç”¨ `--push_to_hub` é€‰é¡¹ï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­çœ‹åˆ°çš„å¾®è°ƒè„šæœ¬ä¼šè‡ªåŠ¨å¡«å……æœ‰å…³åŸºæœ¬æ¨¡åž‹çš„ä¿¡æ¯ã€‚æ­£å¦‚æ‚¨åœ¨ [pokemon-lora çš„ä»‹ç»æ–‡æ¡£](https://huggingface.co/pcuenq/pokemon-lora/blob/main/README.md) ä¸­æ‰€è§ï¼Œè¿™è¢«è®°å½•ä¸ºæ¨¡åž‹å­˜å‚¨åº“çš„â€œè‡ªè¿°æ–‡ä»¶â€æ–‡ä»¶ä¸­çš„å…ƒæ•°æ®æ ‡ç­¾ã€‚

åœ¨æˆ‘ä»¬ç¡®å®šäº†ç”¨äºŽä½¿ç”¨ LoRA è¿›è¡Œå¾®è°ƒçš„åŸºç¡€æ¨¡åž‹ä¹‹åŽï¼Œæˆ‘ä»¬åŠ è½½äº†ä¸€ä¸ªæ­£å¸¸çš„ç¨³å®šæ‰©æ•£ç®¡é“ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ `DPMSolverMultistepScheduler` å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ï¼Œä»¥å®žçŽ°éžå¸¸å¿«é€Ÿçš„æŽ¨ç†ï¼š

    import torch
    from diffusers import StableDiffusionPipeline, DPMSolverMultistepScheduler
    
    pipe = StableDiffusionPipeline.from_pretrained(model_base, torch_dtype=torch.float16)
    pipe.scheduler = DPMSolverMultistepScheduler.from_config(pipe.scheduler.config)
    

**ç¥žå¥‡çš„åœ°æ–¹æ¥äº†**ã€‚æˆ‘ä»¬ä»Ž hub åŠ è½½ LoRA æƒé‡ **åœ¨å¸¸è§„æ¨¡åž‹æƒé‡ä¹‹ä¸Š**ï¼Œå°† pipline ç§»åŠ¨åˆ° cuda è®¾å¤‡å¹¶è¿è¡ŒæŽ¨ç†ï¼š

    pipe.unet.load_attn_procs(model_path)
    pipe.to("cuda")
    
    image = pipe("Green pokemon with menacing face", num_inference_steps=25).images[0]
    image.save("green_pokemon.png")
    

ç”¨ LoRA è¿›è¡Œ Dreamboothing
-----------------------

Dreambooth å…è®¸æ‚¨å‘ Stable Diffusion æ¨¡åž‹â€œæ•™æŽˆâ€æ–°æ¦‚å¿µã€‚ LoRA ä¸Ž Dreambooth å…¼å®¹ï¼Œè¿‡ç¨‹ç±»ä¼¼äºŽå¾®è°ƒï¼Œæœ‰å‡ ä¸ªä¼˜ç‚¹ï¼š

*   è®­ç»ƒæ›´å¿«ã€‚
*   æˆ‘ä»¬åªéœ€è¦å‡ å¼ æˆ‘ä»¬æƒ³è¦è®­ç»ƒçš„ä¸»é¢˜çš„å›¾åƒ (é€šå¸¸ 5 æˆ– 10 å¼ å°±è¶³å¤Ÿäº†)ã€‚
*   å¦‚æžœéœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒæ•´æ–‡æœ¬ç¼–ç å™¨ï¼Œä»¥æé«˜å¯¹è®­ç»ƒä¸»ä½“çš„ä¿çœŸåº¦ã€‚

è¦ä½¿ç”¨ LoRA è®­ç»ƒ Dreamboothï¼Œæ‚¨éœ€è¦ä½¿ç”¨ [æ­¤ diffusers è„šæœ¬](https://github.com/huggingface/diffusers/blob/main/examples/dreambooth/train_dreambooth_lora.py)ã€‚è¯·çœ‹ä¸€ä¸‹ [README](https://github.com/huggingface/diffusers/tree/main/examples/dreambooth#training-with-low-rank-adaptation-of-large-language-models-lora)ã€[æ–‡æ¡£](https://huggingface.co/docs/diffusers/main/en/training/lora) å’Œ [æˆ‘ä»¬çš„è¶…å‚æ•°æŽ¢ç´¢åšæ–‡](https://huggingface.co/blog/dreambooth) äº†è§£è¯¦ç»†ä¿¡æ¯.

å…¶ä»–æ–¹æ³•
----

å¯¹è½»æ¾å¾®è°ƒçš„è¿½æ±‚å¹¶ä¸æ–°é²œã€‚é™¤äº† Dreambooth ä¹‹å¤–ï¼Œ[textual inversion](https://huggingface.co/docs/diffusers/main/en/training/text_inversion) æ˜¯å¦ä¸€ç§æµè¡Œçš„æ–¹æ³•ï¼Œå®ƒè¯•å›¾å‘è®­ç»ƒæœ‰ç´ çš„ç¨³å®šæ‰©æ•£æ¨¡åž‹æ•™æŽˆæ–°æ¦‚å¿µã€‚ä½¿ç”¨ Textual Inversion çš„ä¸»è¦åŽŸå› ä¹‹ä¸€æ˜¯ç»è¿‡è®­ç»ƒçš„æƒé‡ä¹Ÿå¾ˆå°ä¸”æ˜“äºŽå…±äº«ã€‚ç„¶è€Œï¼Œå®ƒä»¬åªé€‚ç”¨äºŽå•ä¸ªä¸»é¢˜ (æˆ–ä¸€å°éƒ¨åˆ†ä¸»é¢˜)ï¼Œè€Œ LoRA å¯ç”¨äºŽé€šç”¨å¾®è°ƒï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥é€‚åº”æ–°çš„é¢†åŸŸæˆ–æ•°æ®é›†ã€‚

[Pivotal Tuning](https://arxiv.org/abs/2106.05744) æ˜¯ä¸€ç§å°è¯•å°† Textual Inversion ä¸Ž LoRA ç›¸ç»“åˆçš„æ–¹æ³•ã€‚é¦–å…ˆï¼Œæ‚¨ä½¿ç”¨ textual inversion æŠ€æœ¯å‘æ¨¡åž‹æ•™æŽˆä¸€ä¸ªæ–°æ¦‚å¿µï¼ŒèŽ·å¾—ä¸€ä¸ªæ–°çš„æ ‡è®°åµŒå…¥æ¥è¡¨ç¤ºå®ƒã€‚ç„¶åŽï¼Œæ‚¨ä½¿ç”¨ LoRA è®­ç»ƒè¯¥ token åµŒå…¥ä»¥èŽ·å¾—ä¸¤å…¨å…¶ç¾Žã€‚

æˆ‘ä»¬è¿˜æ²¡æœ‰ä½¿ç”¨ LoRA æŽ¢ç´¢è¿‡ Pivotal Tuningã€‚æ¬¢è¿ŽæŒ‘æˆ˜ï¼Ÿ ðŸ¤—

* * *

> è‹±æ–‡åŽŸæ–‡: [https://huggingface.co/blog/lora](https://huggingface.co/blog/lora)
> 
> åŽŸæ–‡ä½œè€…: Pedro Cuenca, Sayak Paul
> 
> ä¸­æ–‡è¯‘è€…: innovation64 (æŽæ´‹)
> 
> å®¡æ ¡: zhongdongy (å¿ ä¸œ)