---
layout: post
title: "面试官：RabbitMQ有哪些工作模式？"
date: "2022-04-10T05:16:20.534Z"
---
面试官：RabbitMQ有哪些工作模式？
====================

> 哈喽！大家好，我是小奇，一位不靠谱的程序员  
> 小奇打算以轻松幽默的对话方式来分享一些技术，如果你觉得通过小奇的文章学到了东西，那就给小奇一个赞吧  
> 文章持续更新

一、前言
====

> 今天又、又、又来面试了，还是老规矩，上来先做两张面试题，然后填**半斤**表，什么血型、什么星座的，话说我不知道自己什么血型，只能空着了。。。

![在这里插入图片描述](https://img-blog.csdnimg.cn/b959e6a6df1c4e3796db79589b150e0e.png#pic_center)

> 今天这公司环境还可以，大厅可以看到外面的世界，我已经想好了以后该去哪里摸鱼了（前提是能够面试上）。。。

![在这里插入图片描述](https://img-blog.csdnimg.cn/9d9d1729ee1e49dcb38dbca0070f839a.png#pic_center)

> 在用完了两根签字笔后，重要填写完了这**半斤**表，然后交给面试官，等待面试。。。

二、面试
====

> **面试官：小奇是吧，过来路上远吗**

> 我：不远，也就二里地吧。。。

> **面试官：行，那咱们直接进入主题，我看你这简历上写着对RabbitMQ非常有了解是吗**

> 我：何止是非常了解啊，那是相当的了解。。。

三、RabbitMQ工作模式
==============

> **面试官：哦~，那你先说一下RabbitMQ有哪些工作模式吧**

> 我：RabbitMQ一般有五种工作模式。  
> 1：简单模式  
> 2：work工作模式  
> 3：pub/sub发布订阅模式  
> 4：Routing路由模式  
> 5：Topics主题模式

> **面试官：那你能说一下这些模式的原理与区别吗**

> 简单模式：就是一个生产者一个消费者，中间通过一个队列直接连接。

![在这里插入图片描述](https://img-blog.csdnimg.cn/95dc3c525bd14357a11070604adcaef7.png)

> work工作模式：就是有多个消费者消费队列里的消息，队列里的消息只能被一个消费者消费，这样多部署几个消费者，就可以缓解压力，比如过年的时候抢票，抢票成功后会给你发短信，这个时候就可以把发短信的任务放入队列里，然后有多个发短信的服务来处理队列里的任务。

![在这里插入图片描述](https://img-blog.csdnimg.cn/fed088e4d1e645adabac5cb19b7cbb3c.png)

> pub/sub发布订阅模式：上面两种模式生产者的消息只能被一个消费者消费，不符合某些实际场景。

> 假如我们有一个国家气象局天气预报系统，这个时候他发送消息，其他的服务商，比如百度、网易、腾讯等公司都要从国家天气预报系统那里获取天气怎么办呢？

> 总不能百度获取了今天的天气其他公司就获取不了天气了吧，或者让国家天气预报系统给每个服务商都发送一次消息，那样显然是很麻烦的。

> 所以我们需要用到一个Exchange交换机角色来帮助我们把消息发给所有订阅我们的服务商。

![在这里插入图片描述](https://img-blog.csdnimg.cn/1529486a16204109a15c6195516a53d9.png)

> Routing路由模式：路由模式就是交换机并不是给所有订阅他的队列发送消息了，而是根据路由键来确定应该给哪个队列发送消息，队列和交换机绑定的时候需要通过路由键，而生产者发送消息的时候也需要指定路由键，这样就可以确定给哪个队列发送消息了。

> 这里我们可以看到是给张三发送消息，所以只会给路由键为张三的那个队列发送消息。

![在这里插入图片描述](https://img-blog.csdnimg.cn/f907a1677881463db3eeebe50c2b24a2.png)

> Topics主题模式：主题模式就相当于模糊匹配，假如我想给姓张的发送消息，那么我就可以通过主题模式给所有姓张的发送消息。

![在这里插入图片描述](https://img-blog.csdnimg.cn/940fffaeea8f4fbfb94e22db5a2d46a0.png)

> **面试官：你说的非常的全面，但是我记不住， 能用一个生活中的例子来描述一下吗**

> 我：记不住就背，八股文哪有那么容易就记住的。。。

> 假如我今天去公司的会议室办公了，公司的会议室只有一根网线，那我自己一个人是不是就可以连接这根网线使用了呢，这个就是简单模式，一对一。

> 到了下午了张三也来会议室工作了，就一个网线怎么办，这时我想到了一个方法，我们两个一人插一会网线，比如我写邮件的时候不需要插网线，但是我发邮件的时候你就把网线让给我让我发出去，就这样我和张三每人用五分钟网线，这就是work工作模式，一根网线两个人用，其中一个人用了，另一个人就用不到了。

> 又过了一会李四也特么的来会议室了，这咋整，三个人用一根网线也太难了吧，但是聪明的我又想到了一个方法，我们找来了一个路由器，将网线接入路由器，然后我们每个人的笔记本电脑都连接路由器的无线网，这样我们都可以上网了，这就是pub/sub发布订阅模式，所有订阅路由器的笔记本电脑都可以收到流量，都可以上网哈。

> 过了一会网越来越卡了，我特么一看后台有8个人连接我们的无线网，原来我们没有设置密码，隔壁摸鱼的小姐姐连接无线逛淘宝呢，我一想不行啊，得设置一个密码吧，然后就设置了一个密码，所有知道密码的人才能连接路由器。这里就相当于Routing路由模式。

> 但是有人说密码太长了记不住，我特么说请把记住密码打上对勾谢谢，但是偏偏有人不打对勾天天问，我没办法了，我说不然就设置一个模糊密码吧，你们前三位都输入123，后面的数字随便输入，我这里判断前面是123的密码我都算正确，都让你们上网。这就相当于主题模式，这里的主题就是123。

> **面试官：哇塞，听你这么一讲，我有点永生难忘啊**

> 我：请你不要迷恋哥，哥只是一个传说。。。

> **面试官：小伙子真厉害啊，一下子就把这几种模式讲的栩栩如生，你面试通过了，明天上岗吧**

> 我：啊，这么急吗，我后面还有好多东西没有讲呢。

> **面试官：不着急，进来了以后慢慢听你讲，你不都已经找好摸鱼的地方了吗，到时候咱们一块去那里聊天**

> 我：这都被你发现了啊。。。

四、总结
====

> 这里关于RabbitMQ还没有整理完毕，文章后面持续更新，建议收藏。

> 文章中涉及到的命令大家一定要像我一样每个都敲几遍，只有在敲的过程中才能发现自己对命令是否真正的掌握了。

> 如果觉得我的文章还不错的话就点个赞吧