---
layout: post
title: ".net core å’Œ WPF å¼€å‘å‡è®¯å¨åœ¨çº¿å®¢æœç³»ç»Ÿï¼šè°ƒç”¨ç™¾åº¦ç¿»è¯‘æ¥å£å®ç°å®æ—¶è‡ªåŠ¨ç¿»è¯‘"
date: "2022-05-30T13:42:01.439Z"
---
.net core å’Œ WPF å¼€å‘å‡è®¯å¨åœ¨çº¿å®¢æœç³»ç»Ÿï¼šè°ƒç”¨ç™¾åº¦ç¿»è¯‘æ¥å£å®ç°å®æ—¶è‡ªåŠ¨ç¿»è¯‘
============================================

2021å¹´ä¸‹åŠå¹´ï¼Œé™†ç»­æœ‰æœ‹å‹è”ç³»æˆ‘ï¼Œè¡¨ç¤ºä»äº‹å¤–è´¸è¡Œä¸šï¼Œå¸Œæœ›å®¢æœç³»ç»Ÿèƒ½å¤Ÿå®ç°å®¢æœä¸è®¿å®¢ä¹‹é—´åŒå‘çš„å®æ—¶è‡ªåŠ¨ç¿»è¯‘ã€‚ä¸€å¼€å§‹æˆ‘æƒ³çš„æ¯”è¾ƒå¤æ‚ï¼Œæ‹–ç€æ²¡åšè¿™ä¸ªåŠŸèƒ½ï¼Œåæ¥è¯¢é—®çš„æœ‹å‹è¶Šæ¥è¶Šå¤šï¼Œæˆ‘ä»”ç»†è°ƒç ”äº†ä¸€ä¸‹è¿™ä¸ªéœ€æ±‚ï¼Œå‘ç°é€šè¿‡å…¬æœ‰äº‘ä¸Šçš„æ¥å£å®ç°èµ·æ¥ï¼Œéå¸¸çš„ç®€å•ï¼æ•´ä¸ªå¯¹æ¥å®ç°è¿‡ç¨‹ä¸å¤¸å¼ çš„è¯´ï¼Œ10 åˆ†é’Ÿå°±å®Œæˆäº†ã€‚æœ¬æ–‡å°†è¯¦ç»†çš„ä»‹ç»ç™¾åº¦ç¿»è¯‘æ¥å£çš„æ³¨å†Œã€å¼€é€šã€å¯¹æ¥å…¨è¿‡ç¨‹ï¼Œä»¥åŠ æºä»£ç  ï¼Œå¸Œæœ›å¯¹ä½ æœ‰ç”¨ã€‚

ä¸šä½™æ—¶é—´ç”¨ .net core å†™äº†ä¸€ä¸ªåœ¨çº¿å®¢æœç³»ç»Ÿã€‚å¹¶åœ¨åšå®¢å›­å†™äº†ä¸€ä¸ªç³»åˆ—çš„æ–‡ç« ï¼Œå†™ä»‹ç»è¿™ä¸ªå¼€å‘è¿‡ç¨‹ã€‚

æˆ‘æŠŠè¿™æ¬¾ä¸šä½™æ—¶é—´å†™çš„å°ç³»ç»Ÿä¸¢åœ¨ç½‘ä¸Šï¼Œé™†ç»­æœ‰äººæ‰¾æˆ‘è¦ç§æœ‰åŒ–ç‰ˆæœ¬ï¼Œæˆ‘éƒ½ç»™äº†ï¼Œæ¯•ç«Ÿè½¯ä»¶ä¸šçš„åˆè¡·å°±æ˜¯å…è´¹å’Œåˆ†äº«ï¼Œåæ¥æˆ‘ç´¢æ€§å°±å®˜æ–¹å‘äº†ä¸€ä¸ªç§æœ‰åŒ–ç‰ˆç›´æ¥ç»™åˆ«äººä¸‹è½½ã€‚å¸Œæœ›èƒ½å¤Ÿæ‰“é€ ï¼š å¼€æ”¾ã€å¼€æºã€å…±äº«ã€‚åŠªåŠ›æ‰“é€  .net ç¤¾åŒºçš„ä¸€æ¬¾ä¼˜ç§€å¼€æºäº§å“ã€‚

**2021å¹´ä¸‹åŠå¹´ï¼Œé™†ç»­æœ‰æœ‹å‹è”ç³»æˆ‘ï¼Œè¡¨ç¤ºä»äº‹å¤–è´¸è¡Œä¸šï¼Œå¸Œæœ›å®¢æœç³»ç»Ÿèƒ½å¤Ÿå®ç°å®¢æœä¸è®¿å®¢ä¹‹é—´åŒå‘çš„å®æ—¶è‡ªåŠ¨ç¿»è¯‘ã€‚**

ä¸€å¼€å§‹æˆ‘æƒ³çš„æ¯”è¾ƒå¤æ‚ï¼Œæ‹–ç€æ²¡åšè¿™ä¸ªåŠŸèƒ½ï¼Œåæ¥è¯¢é—®çš„æœ‹å‹è¶Šæ¥è¶Šå¤šï¼Œæˆ‘ä»”ç»†è°ƒç ”äº†ä¸€ä¸‹è¿™ä¸ªéœ€æ±‚ï¼Œå‘ç°é€šè¿‡å…¬æœ‰äº‘ä¸Šçš„æ¥å£å®ç°èµ·æ¥ï¼Œéå¸¸çš„ç®€å•ï¼æ•´ä¸ªå¯¹æ¥å®ç°è¿‡ç¨‹ä¸å¤¸å¼ çš„è¯´ï¼Œ10 åˆ†é’Ÿå°±å®Œæˆäº†ã€‚

æœ¬æ–‡å°†è¯¦ç»†çš„ä»‹ç»ç™¾åº¦ç¿»è¯‘æ¥å£çš„æ³¨å†Œã€å¼€é€šã€å¯¹æ¥å…¨è¿‡ç¨‹ï¼Œä»¥åŠ æºä»£ç  ï¼Œå¸Œæœ›å¯¹ä½ æœ‰ç”¨ã€‚

å…ˆçœ‹å®ç°æ•ˆæœ
------

å®¢æœç«¯ç¨‹åºä»¥åŸæ–‡å’Œè¯‘æ–‡å¯¹ç…§çš„æ–¹å¼æ˜¾ç¤ºã€‚

![](https://docs-api.shengxunwei.com/StaticFiles/Upload/5c448fc1-d287-4952-9d55-6be25eb86ab3.JPG)

è®¿å®¢ç«¯ä»¥è®¿å®¢è¯­è¨€æ˜¾ç¤ºã€‚

![](https://docs-api.shengxunwei.com/StaticFiles/Upload/25294080-7fc3-4728-94ea-7276c5d29637.JPG)

ä»¥è®¾ç½®é»˜è®¤ç¿»è¯‘æ‰€æœ‰è®¿å®¢çš„æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥ç”±å®¢æœæ ¹æ®ä¸åŒè®¿å®¢è‡ªè¡Œå†³å®šæ˜¯å¦ç¿»è¯‘ã€‚

![](https://docs-api.shengxunwei.com/StaticFiles/Upload/75a5072f-c9e8-49fd-b346-4b6fb225ad24.JPG)

* * *

ç®€ä»‹
--

å‡è®¯å¨åœ¨çº¿å®¢æœä¸è¥é”€ç³»ç»Ÿæ˜¯åŸºäº .net core / WPF å¼€å‘çš„ä¸€æ¬¾åœ¨çº¿å®¢æœè½¯ä»¶ï¼Œå®—æ—¨æ˜¯ï¼š **å¼€æ”¾ã€å¼€æºã€å…±äº«ã€‚åŠªåŠ›æ‰“é€  .net ç¤¾åŒºçš„ä¸€æ¬¾ä¼˜ç§€å¼€æºäº§å“ã€‚**

### å®Œæ•´ç§æœ‰åŒ–åŒ…ä¸‹è½½åœ°å€

> ğŸ’¾ [https://kf.shengxunwei.com](https://kf.shengxunwei.com)

#### é’Ÿæ„çš„è¯è¯·ç»™ä¸ªèµæ”¯æŒä¸€ä¸‹å§ï¼Œè°¢è°¢~

### å®‰è£…éƒ¨ç½²è¯´æ˜ä¹¦

> ğŸ“• [https://docs.shengxunwei.com/Post/f7bc8496-14ee-4a53-07b4-08d8e3da6269](https://docs.shengxunwei.com/Post/f7bc8496-14ee-4a53-07b4-08d8e3da6269)

* * *

ç™¾åº¦ç¿»è¯‘çš„å¯¹æ¥ä½¿ç”¨
=========

è®¿é—®ç™¾åº¦ç¿»è¯‘å¼€æ”¾å¹³å°ï¼Œæ³¨å†Œè´¦æˆ·å¹¶è®¤è¯ã€‚

> [https://fanyi-api.baidu.com](https://fanyi-api.baidu.com)

å¼€é€šé€šç”¨ç¿»è¯‘ API
----------

æ³¨æ„ï¼š

*   éå¸¸è§è¯­ç§ï¼ˆå¦‚ï¼šä¹Œå…‹å…°ã€è²å¾‹å®¾ã€å°å°¼ï¼‰ï¼Œä»…ä¼ä¸šè®¤è¯å°Šäº«ç‰ˆå¯è°ƒç”¨ï¼Œæœªè®¤è¯çš„éå°Šäº«ç‰ˆæ¥å£å°†è¿”å› 58001 é”™è¯¯ã€‚
*   è¯·é€‰æ‹©å¼€é€šâ€œå°Šäº«ç‰ˆâ€ã€‚â€œæ ‡å‡†ç‰ˆâ€ QPS åªæœ‰ 1ï¼Œæ¯ç§’åªå…è®¸è°ƒç”¨ 1 æ¬¡ç¿»è¯‘æ¥å£ï¼Œæ— æ³•æ»¡è¶³å®¢æœç³»ç»Ÿæ­£å¸¸ä½¿ç”¨éœ€è¦ã€‚

![](https://docs-api.shengxunwei.com/StaticFiles/Upload/2db415d2-d8c1-41f9-9667-a723f0fcb80c.PNG)

åˆ›å»ºåº”ç”¨
----

â€œæœåŠ¡å™¨å›è°ƒåœ°å€â€ ç•™ç©ºä¸å¡«ã€‚  
â€œæœåŠ¡å™¨åœ°å€â€å¯ç•™ç©ºä¸å¡«ï¼Œä¹Ÿå¯å¡«å†™éƒ¨ç½²å®¢æœç³»ç»Ÿçš„æœåŠ¡å™¨ IP åœ°å€ã€‚

![](https://docs-api.shengxunwei.com/StaticFiles/Upload/9488559f-8062-4fe3-8d65-acd02f340886.PNG)

è·å– APP ID å’Œ å¯†é’¥
--------------

è¿›å…¥â€œå¼€å‘è€…ä¿¡æ¯â€ç”»é¢ï¼ŒæŸ¥çœ‹â€œç”³è¯·ä¿¡æ¯â€ä¸­çš„ `APP ID` å’Œ `å¯†é’¥`ï¼Œå°†å…¶ä¿å­˜å¤‡ç”¨ï¼Œåœ¨éšåçš„å®¢æœç³»ç»Ÿä¸»ç¨‹åºé…ç½®ä¸­ä½¿ç”¨ã€‚

![](https://docs-api.shengxunwei.com/StaticFiles/Upload/67785e2e-632a-41e3-a077-31b676570137.JPG)

ä½¿ç”¨ C# è°ƒç”¨ç¿»è¯‘æ¥å£
------------

æ¥å…¥æ–¹å¼  
ç¿»è¯‘APIé€šè¿‡ HTTP æ¥å£å¯¹å¤–æä¾›å¤šè¯­ç§äº’è¯‘æœåŠ¡ã€‚åªéœ€è¦é€šè¿‡è°ƒç”¨é€šç”¨ç¿»è¯‘APIï¼Œä¼ å…¥å¾…ç¿»è¯‘çš„å†…å®¹ï¼Œå¹¶æŒ‡å®šè¦ç¿»è¯‘çš„æºè¯­è¨€ï¼ˆæ”¯æŒæºè¯­è¨€è¯­ç§è‡ªåŠ¨æ£€æµ‹ï¼‰å’Œç›®æ ‡è¯­è¨€ç§ç±»ï¼Œå°±å¯ä»¥å¾—åˆ°ç›¸åº”çš„ç¿»è¯‘ç»“æœã€‚

é€šç”¨ç¿»è¯‘API HTTPS åœ°å€ï¼š  
[https://fanyi-api.baidu.com/api/trans/vip/translate](https://fanyi-api.baidu.com/api/trans/vip/translate)

ç­¾åç”Ÿæˆæ–¹æ³•  
ç­¾åæ˜¯ä¸ºäº†ä¿è¯è°ƒç”¨å®‰å…¨ï¼Œä½¿ç”¨ MD5 ç®—æ³•ç”Ÿæˆçš„ä¸€æ®µå­—ç¬¦ä¸²ï¼Œç”Ÿæˆçš„ç­¾åé•¿åº¦ä¸º 32 ä½ï¼Œç­¾åä¸­çš„è‹±æ–‡å­—ç¬¦å‡ä¸ºå°å†™æ ¼å¼ã€‚

ç”Ÿæˆæ–¹æ³•ï¼š  
Step1. å°†è¯·æ±‚å‚æ•°ä¸­çš„ APPID(appid)ï¼Œ ç¿»è¯‘ query(qï¼Œæ³¨æ„ä¸ºUTF-8ç¼–ç )ï¼Œéšæœºæ•°(salt)ï¼Œä»¥åŠå¹³å°åˆ†é…çš„å¯†é’¥(å¯åœ¨ç®¡ç†æ§åˆ¶å°æŸ¥çœ‹) æŒ‰ç…§ appid+q+salt+å¯†é’¥çš„é¡ºåºæ‹¼æ¥å¾—åˆ°å­—ç¬¦ä¸² 1ã€‚  
Step2. å¯¹å­—ç¬¦ä¸² 1 åš md5 ï¼Œå¾—åˆ° 32 ä½å°å†™çš„ signã€‚  
æ³¨ï¼š

1.  å¾…ç¿»è¯‘æ–‡æœ¬ï¼ˆqï¼‰éœ€ä¸º UTF-8 ç¼–ç ï¼›
2.  åœ¨ç”Ÿæˆç­¾åæ‹¼æ¥ appid+q+salt+å¯†é’¥ å­—ç¬¦ä¸²æ—¶ï¼Œq ä¸éœ€è¦åš URL encodeï¼Œåœ¨ç”Ÿæˆç­¾åä¹‹åï¼Œå‘é€ HTTP è¯·æ±‚ä¹‹å‰æ‰éœ€è¦å¯¹è¦å‘é€çš„å¾…ç¿»è¯‘æ–‡æœ¬å­—æ®µ q åš URL encodeï¼›  
    3.å¦‚é‡åˆ°æŠ¥ 54001 ç­¾åé”™è¯¯ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç­¾åç”Ÿæˆæ–¹æ³•æ˜¯å¦æ­£ç¡®ï¼Œåœ¨å¯¹ sign è¿›è¡Œæ‹¼æ¥å’ŒåŠ å¯†æ—¶ï¼Œq ä¸éœ€è¦åš URL encodeï¼Œå¾ˆå¤šå¼€å‘è€…é‡åˆ°ç­¾åæŠ¥é”™å‡æ˜¯ç”±äºæ‹¼æ¥ sign å‰å°±åšäº† URL encodeï¼›  
    4.åœ¨ç”Ÿæˆç­¾ååï¼Œå‘é€ HTTP è¯·æ±‚æ—¶ï¼Œå¦‚æœå°† query æ‹¼æ¥åœ¨ url ä¸Šï¼Œéœ€è¦å¯¹ query åš URL encodeã€‚

è¾“å…¥å‚æ•°  
è¯·æ±‚æ–¹å¼ï¼š å¯ä½¿ç”¨ GET æˆ– POST æ–¹å¼ï¼Œå¦‚ä½¿ç”¨ POST æ–¹å¼ï¼ŒContent-Type è¯·æŒ‡å®šä¸ºï¼šapplication/x-www-form-urlencoded  
å­—ç¬¦ç¼–ç ï¼šç»Ÿä¸€é‡‡ç”¨ UTF-8 ç¼–ç æ ¼å¼  
query é•¿åº¦ï¼šä¸ºä¿è¯ç¿»è¯‘è´¨é‡ï¼Œè¯·å°†å•æ¬¡è¯·æ±‚é•¿åº¦æ§åˆ¶åœ¨ 6000 bytesä»¥å†…ï¼ˆæ±‰å­—çº¦ä¸ºè¾“å…¥å‚æ•° 2000 ä¸ªï¼‰

ä»£ç 
--

    using System;
    using System.Text;
    using System.Net;
    using System.IO;
    using System.Security.Cryptography;
    using System.Web;
    
    namespace TransAPICSharpDemo
    {
        class Program
        {
            static void Main(string[] args)
            {
                // åŸæ–‡
                string q = "apple";
                // æºè¯­è¨€
                string from = "en";
                // ç›®æ ‡è¯­è¨€
                string to = "zh";
                // æ”¹æˆæ‚¨çš„APP ID
                string appId = "2015063000000001";
                Random rd = new Random();
                string salt = rd.Next(100000).ToString();
                // æ”¹æˆæ‚¨çš„å¯†é’¥
                string secretKey = "12345678";
                string sign = EncryptString(appId + q + salt + secretKey);
                string url = "http://api.fanyi.baidu.com/api/trans/vip/translate?";
                url += "q=" + HttpUtility.UrlEncode(q);
                url += "&from=" + from;
                url += "&to=" + to;
                url += "&appid=" + appId;
                url += "&salt=" + salt;
                url += "&sign=" + sign;
                HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
                request.Method = "GET";
                request.ContentType = "text/html;charset=UTF-8";
                request.UserAgent = null;
                request.Timeout = 6000;
                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                Stream myResponseStream = response.GetResponseStream();
                StreamReader myStreamReader = new StreamReader(myResponseStream, Encoding.GetEncoding("utf-8"));
                string retString = myStreamReader.ReadToEnd();
                myStreamReader.Close();
                myResponseStream.Close();
                Console.WriteLine(retString);
                Console.ReadLine();
            }
            // è®¡ç®—MD5å€¼
            public static string EncryptString(string str)
            {
                MD5 md5 = MD5.Create();
                // å°†å­—ç¬¦ä¸²è½¬æ¢æˆå­—èŠ‚æ•°ç»„
                byte[] byteOld = Encoding.UTF8.GetBytes(str);
                // è°ƒç”¨åŠ å¯†æ–¹æ³•
                byte[] byteNew = md5.ComputeHash(byteOld);
                // å°†åŠ å¯†ç»“æœè½¬æ¢ä¸ºå­—ç¬¦ä¸²
                StringBuilder sb = new StringBuilder();
                foreach (byte b in byteNew)
                {
                    // å°†å­—èŠ‚è½¬æ¢æˆ16è¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²ï¼Œ
                    sb.Append(b.ToString("x2"));
                }
                // è¿”å›åŠ å¯†çš„å­—ç¬¦ä¸²
                return sb.ToString();
            }
        }
    }
    
    

åœ¨ç¼–å†™ä½ çš„ä»£ç æ—¶ï¼ŒæŠŠä»¥ä¸Šç¤ºä¾‹ä»£ç ä¸­çš„ APP ID å’Œ å¯†é’¥ æ›´æ¢æˆä½ æ³¨å†Œå¼€é€šç™¾åº¦ç¿»è¯‘æ—¶å¾—åˆ°çš„å³å¯ï¼

å¸Œæœ›èƒ½å¤Ÿæ‰“é€ ï¼š **å¼€æ”¾ã€å¼€æºã€å…±äº«ã€‚åŠªåŠ›æ‰“é€  .net ç¤¾åŒºçš„ä¸€æ¬¾ä¼˜ç§€å¼€æºäº§å“ã€‚**

### é’Ÿæ„çš„è¯è¯·ç»™ä¸ªèµæ”¯æŒä¸€ä¸‹å§ï¼Œè°¢è°¢~