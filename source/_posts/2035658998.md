---
layout: post
title: "涂鸦智能物联网平台初探"
date: "2022-05-06T05:17:56.692Z"
---
涂鸦智能物联网平台初探
===========

![涂鸦智能物联网平台初探](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114816676-1141924042.png) “涂鸦”在国内做智能家居类的物联网智能平台比一般人想象的要早，远早于后来的同类平台诸如阿里云飞燕物联网平台和腾讯物联网平台。在2014年国内掀起智能硬件开发大潮的时候，就已经开始了。

“涂鸦”在国内做智能家居类的物联网智能平台比一般人想象的要早，远早于后来的同类平台诸如阿里云飞燕物联网平台和腾讯物联网平台。在2014年国内掀起智能硬件开发大潮的时候，就已经开始了。

知道“涂鸦”比较偶然。因为追溯历史，更早一些的物联网平台，其实是2012年左右，发迹于青岛的一家创业公司推出的“YeeLink”物联网平台，其开始的定位，和现在的“涂鸦”物联网平台很像。也许是做平台对一个创业公司太难，“YeeLink”物联网平台没有一两年就废弃了，而是转身融入小米智能生态体系，推出“YeeLight”（易来）品牌，立足于物联网平台顺势转型做垂直领域的智能灯了。本打算是购买一个“YeeLight”的智能彩控灯，没有想到买回来，却让安装“涂鸦”智能APP。也就是从那个时候开始，知道有一家叫“涂鸦”的公司，为国内各种智能小家电配套做智能平台和手机APP。

“涂鸦”的崛起让人感觉有些不可思议，因为前有小米智能生态的崛起，让以前高高在上的“智能家居”近乎了白菜价，已经进入了寻常百姓家。后有国内巨头公司推出的阿里云飞燕平台、腾讯物联网平台、此外还有京东的“小京鱼”智能平台，更不要说白色家电起家的海尔一直大力推广的U-Home全屋智能系统，都是此领域颇有号召力的佼佼者。但即便如此，“涂鸦”却硬是从近似红海的厮杀中脱颖而出。

早几年有一个做投资的朋友问我“涂鸦”公司如何，想投资入股“涂鸦”，现在想想颇佩服朋友的眼光。做投资的是最敏感的，是最早闻到“血腥味”的人，这也从侧面可以看出“涂鸦”的价值所在。前段时间，雷锋网和天极网创始人，《沸腾十五年》和《沸腾新十年》的作者林军林老师也向我询问关于阿里云“飞燕”和“涂鸦”相关的历史。一时激起了我研究“涂鸦”平台的兴致。

我比较关注是工业或者泛工业的物联网平台，所以阿里的飞燕平台和“涂鸦”智能平台，虽然知道的比较早，但是早先一直没有兴趣去深入研究。

不过今天的“涂鸦”智能平台，远非我早期头脑印象中，仅仅为做智能硬件、小家电厂商提供PaaS平台的“涂鸦”，而是全方位、全领域发展的“涂鸦”，AIoT领域领军的企业。用“涂鸦”公司自己的话来说，公司提供的物联网平台覆盖物联网感知层、网络层、平台层、应用层全产业链，通过提供产品全生命周期解决方案，为企业数智化转型提供规模化开发技术资源、降低企业运营成本、加快企业产品商业化上市时间，帮助客户与终端用户建立长期紧密联系等颠覆性价值服务。

从技术角度来说，“涂鸦”在硬件层面提供了各种可以上云的智能硬件模组，软件层面，云端平台支持低代码/无代码开发，可以为众多的终端用户提供跨产品和品牌的一致性用户体验。按照赋能的设备规模，涂鸦智能IoT PaaS平台已经超越亚马逊AWS成为全球最大的物联网云平台。

书归正传，既然升起了研究“涂鸦”物联网平台的兴致，就要深入了解涂鸦IoT开发平台能做什么。无论是从网上相关文章的介绍，还是看官方发布的平台升级信息，可以了解到涂鸦智能不仅仅立足于IoT PaaS平台，还在行业SaaS领域推出了自己的解决方案。比如行业SaaS应用解决方案囊括了智能硬件解决方案、智慧商业解决方案、行业解决方案、通信解决方案、人工智能解决方案。

(1)智能硬件解决方案：包括了电工、照明、传感、大家电、小家电、厨房电器、清洁机器人、智能锁等。

(2)智慧商业解决方案：包括涂鸦酒店、涂鸦公寓、涂鸦安防、智慧运维、智慧工程等。

(3)行业解决方案：包括智慧地产、智慧工业、智慧农业、智慧教育、智慧医疗健康、智慧养老、智慧零售等。

(4)通信解决方案：包括蓝牙、WI-FI、Zigbee、NB-IoT等。

(5)人工智能解决方案：包括智能语音、视觉智能、全屋智能等。

以上，我最感兴趣是两个领域的解决方案，比如智慧商业解决方案中的涂鸦安防和智慧工程，行业解决方案中的智慧工业和智慧农业。**相对于其他友商的物联网平台，涂鸦的方案更侧重于“落地”，提供一条龙式的产品全生命周期服务。**当然如果你要是开拓海外业务，涂鸦更是有先天的优势。

我们以一个环境物联网监控的实际例子，结合我们公司推出的六方塔®环境综合检测仪物联网产品，从技术层面入手，看看如何基于“涂鸦”智能物联网平台快速去构建一个环境监控的物联网项目。

查看平台开发文档可知，涂鸦IoT开发平台提供了五大产品与服务，可以一站式完成智能产品云、联网模块和APP控制端的基础构建，最快可以一天完成智能产品的升级。所谓的五大产品与服务，分别是：历经六代更新、面向全球的信号强、功耗低、尺寸小的云模组，可以全球部署、加速和可弹性扩容的云服务，涂鸦公版和品牌专属的APP，全方位数据驱动的数据运营和提供从产品智能化到销售的全链路的增值服务。

所以对接涂鸦IoT平台，使用涂鸦平台服务最快的方式，就是采用涂鸦公司提供的云模组（如图1所示）。

 ![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114326764-1145165388.png)

图1 涂鸦云模组

这样可以近乎零代码的方式，简单配置即可入云，小代价就可以尝试和体验涂鸦物联网平台的服务。

不过为了更深入地了解和学习涂鸦IoT开发平台，体验涂鸦IoT平台的生态性和开放性，我们选择了一条相对较难的路，直接通过学习TuyaLink MQTT标准协议（链接：[https://developer.tuya.com/cn/docs/iot/MQTT-protocol?id=Kb65nphxrj8f1](https://developer.tuya.com/cn/docs/iot/MQTT-protocol?id=Kb65nphxrj8f1) ），自行开发一套代码，来对接涂鸦IoT平台。

我们选择的一款硬件是自带4G Cat1模组的六方塔®环境综合检测仪（注意，不是涂鸦平台最常用的WiFi或蓝牙模组）。该系列产品主要适用于室内外环境数据采集，由四大部分组成，一、电源板块：220V电源板、9～24V电源板和太阳能供电板；二、主控板（含一路RS485）：标准主控板、低功耗主控板；三、通信板：4G通信板、NB-IoT通信板、LoRa通信板、LoRaWAN通信板和Powerbus通信板；四、传感板：综合传感器板（温湿度、大气压、二氧化碳和光照强度）、PM2.5传感板和噪音板（如图2所示）。

 ![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114347858-1643954775.png)

图2 六方塔模块板

六方塔®环境综合检测仪既可以通过RS-485、PowerBus或LoRa等通信链路连接到物联网智能网关，然后上云，也可以通过4G或NB-IoT等通信模块直接上云。

我们采用YFIOs数据组态，通过4G上云，所以需要采用C#开发基于MQTT协议的系统通信策略来对接涂鸦IoT开发平台。参考对接文档，最为核心的就是构建MQTT连接参数（如图3所示）。

 ![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114359346-1168379871.png)

图3 MQTT连接参数

涂鸦通信策略中对接涂鸦云的相关代码如下：

mqttClientId = "tuyalink\_" + config.sDeviceName;
string mqttUsername = config.sDeviceName + "|signMethod=hmacSha256,timestamp=" + timestamp + ",secureMode=1,accessType=1";
string content = "deviceId=" + config.sDeviceName + ",timestamp=" + timestamp + ",secureMode=1,accessType=1";
HMACSHA256 hmacsha256 = new HMACSHA256();
byte\[\] key = Encoding.UTF8.GetBytes(config.sDeviceSecret);
byte\[\] dataBuffer = Encoding.UTF8.GetBytes(content);
byte\[\] hashBytes = hmacsha256.ComputeHash(key, dataBuffer);
string mqttPassword = "";
for (int i = 0; i < hashBytes.Length; i++)
{
   mqttPassword += hashBytes\[i\].ToString("X2").ToLower();
}

开发通信策略完毕后，接下来，我们进入[涂鸦IoT平台](https://auth.tuya.com/?_source=74f71860277abaab35cb681a1c3d7f2a)，登录成功后，单击页面上的“创建产品”蓝色按钮，开始创建六方塔产品（如图4所示）。

![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114421768-1421935449.png)

图4 涂鸦IoT平台

单击“行业解决方案”，然后再单击“智慧工业”，由于六方塔是网关+传感器一体的设备，所以我们选择的品类是“工业网关”，继续单击下一步，在创建产品网页继续完善产品信息，填入或者选择产品的名称、型号、设备类型和通信协议等信息（如图5所示）。

 ![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114441023-269548770.png)

图5 创建六方塔产品

下一步就可以为“六方塔”产品添加对应的属性了，比如温度、湿度、二氧化碳、PM2.5和光照等等。

产品创建完毕，接下来开始创建该产品下的设备了。涂鸦IoT物联网平台可以免费申请2个设备授权码，申请后即可使用。和阿里云物联网平台一样，授权后，会为设备分配类似“三元组”的内容，比如ProductID（产品ID）、DeviceID（设备ID）和DeviceSecret（设备秘钥）。记下这三个信息，后续我们设备对接涂鸦IoT平台的时候会用到。

打开YFIOs管理软件，添加六方塔用户设备，添加完毕后，会自动创建该设备下的所有属性（如图6所示）。

 ![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114552037-1587755526.png)

图6 创建六方塔用户设备

需要注意的是，由于涂鸦IoT平台产品的属性标识只允许小写字母，所以把需要上云的属性，由原来的大写字母改写为小写字母。

接下来就需要添加我们以上用C#编写好的涂鸦云对接策略了。单击“策略列表”，双击“新建…”,选择系统策略为“涂鸦云MQTT客户端(最小版)”（如图7所示）

 ![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114609960-2101771523.png)

图7 选择涂鸦云MQTT客户端上云策略

在“服务器配置”页面填写我们上文记下的设备信息，然后在“IO配置”页面勾选需要上云的属性变量即可（如图8所示）。

 ![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114641921-1659420198.png)

图8 选择涂鸦云MQTT客户端上云策略

配置完毕后，单击“部署”按钮，把相关驱动和策略下载到六方塔设备，重启设备后，相关数据即可上云。上云后，我们打开涂鸦IoT平台上的设备调试页面，选择上云的设备，单击“获取全部”按钮，可查看当前设备上传到云端的数据（如图9所示）。

 ![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114720082-610118748.png)

图9 六方塔成功对接涂鸦IoT平台

为了便于远程移动监管，涂鸦还贴心地提供了“IoT设备管理”手机APP程序，该程序可以在手机应用市场或者扫描如下的二维码进行下载。

![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114728781-1296172596.png)

图10 涂鸦IoT设备管理程序下载安装或绑定设备

为了让IoT设备管理APP可以监管如上创建的六方塔设备，我们需要在“云开发”创建一个云项目，把这个设备关联进来。操作完毕后，单击“添加设备”按钮在弹出菜单中选择“使用IoT设备管理APP添加设备”，则会弹出如图10所示的对话框。打开IoT设备管理APP扫描上图的二维码则会成功绑定该设备，在设备列表中点击“六方塔综合检测仪”，则可以查看设备的所有实时数据信息（如图11所示）。

 ![](https://img2022.cnblogs.com/blog/11611/202205/11611-20220506114736523-1508564349.png)

图11 IoT设备管理APP

以上种种操作，加上用C#开发上云策略的时间，不过一个多小时，就实现了六方塔环境综合检测仪上云的操作。上云策略一旦开发完毕，后续就可以直接使用，类似的设备对接涂鸦IoT云平台操作分分钟钟就可以完成了。

一旦设备成功对接到涂鸦IoT平台，就可以充分利用涂鸦IoT平台的资源和各种增值服务，让自己的产品无论是海外上市，还是批量生产、设备管理都有了支撑，无后顾之忧地去耕耘客户、开拓市场。

_作者简介：_

_刘洪峰（__微信__:yefanqiu__），_[_叶帆科技_](http://www.yfiot.com/)_创始人兼CEO__。阿里云MVP、华为云MVP、多届微软全球最有价值专家(MVP)，CSDN十大MVB，拥有十几项技术专利及软著。硬件层面研发了近百种YF系列的物联网网关、智能终端和传感模块；软件层面研发了YFIOs数据组态和YFHMI画面组态等物联网软硬中间件平台。_

_参考文章：_

_1\._ _涂鸦IoT开发平台官方文档_

_2.__《涂鸦智能-AIoT领军企业，物联网蓝海扬帆起航》_

[![](http://service.t.sina.com.cn/widget/qmd/1804832611/0cef0e67/1.png)](http://weibo.com/u/1804832611?s=6uyXnP)