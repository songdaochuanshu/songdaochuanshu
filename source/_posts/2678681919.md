---
layout: post
title: "SpringBootæ€ä¹ˆè‡ªå®šä¹‰ä¸€ä¸ªStarter ï¼Ÿ"
date: "2022-11-16T04:26:05.268Z"
---
SpringBootæ€ä¹ˆè‡ªå®šä¹‰ä¸€ä¸ªStarter ï¼Ÿ
==========================

springBoot å¦‚ä½•è‡ªå®šä¹‰starterï¼Ÿä¸€åªå°Coder

> å°ä¼™ä¼´ä»¬æ›¾ç»å¯èƒ½éƒ½ç»å†è¿‡æ•´å¤©å†™ç€CURDçš„ä¸šåŠ¡ï¼Œéƒ½æ²¡å†™è¿‡ä¸€äº›ç»„ä»¶ç›¸å…³çš„ä¸œè¥¿ï¼Œè¿™ç¯‡æ–‡ç« è®°å½•ä¸€ä¸‹SpringBootå¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªStarterã€‚  
> åŸç†å’Œç†è®ºå°±ä¸ç”¨å¤šè¯´äº†ï¼Œå¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°å¾ˆå¤šå…³äºè¯¥æ–¹é¢çš„èµ„æ–™ï¼Œè¿™é‡Œä¸»è¦åˆ†äº«å¦‚ä½•è‡ªå®šä¹‰ã€‚

åŸæ–‡é“¾æ¥ï¼š[SpringBootæ€ä¹ˆè‡ªå®šä¹‰ä¸€ä¸ªStarter ï¼Ÿä¸€åªå°Coder](http://blog.qiyuan.run/archives/springboot%E6%80%8E%E4%B9%88%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AAstarter)

### éœ€æ±‚

åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œç”¨æˆ·éœ€è¦å‘é€æ¶ˆæ¯ï¼Œå¯ä»¥é€šè¿‡é‚®ä»¶ï¼ŒQQï¼Œå¾®ä¿¡ï¼Œé’‰é’‰ï¼Œé£ä¹¦ç­‰ï¼Œç›®å‰è¿™äº›å‘é€æ¶ˆæ¯çš„æ–¹å¼éƒ½å·²ç»æä¾›äº†å…¬å¼€çš„APIï¼Œæƒ³è¦å®ç°åœ¨é¡¹ç›®ä¸­é€šè¿‡ç®€å•çš„é…ç½®å„ä¸ªå‘å‘é€æ–¹çš„å‘é€æ–¹ä¿¡æ¯ï¼Œç„¶åç›´æ¥è°ƒç”¨å‘é€çš„APIï¼Œå‘é€ä¿¡æ¯å³å¯ï¼Œä¸‹é¢ä¸¾ä¸ªğŸŒ°ï¼š  
**é…ç½®**

    message:
      email:
        username: Aden
        password: 123456
        key: HJFHADJSFBDASFHUADSINF
        api-url: http://blog.qiyuan.run
      feishu:
        user-name: Aden
        pass-word: 654321
        key: HFJKADSBFJKADSJFKADSNFAD
        api-url: http://blog.qiyuan.run
    

**è°ƒç”¨**

        @Autowired
        SendEmailMessageServiceImpl emailMessageService;
        
        @Autowired
        SendFeishuMessageServiceImpl feishuMessageService;
    
        public boolean sendEmail(String msg) {
            return emailMessageService.sendMessage(msg);
        }
        
        public boolean sendFeishu(String msg){
            return feishuMessageService.sendMessage(msg);
        }
    

æ•ˆæœçš„å°±æ˜¯ä»¥ä¸Šè¿™æ ·ï¼Œåªè¦é€šè¿‡é…ç½®éœ€è¦å‘é€æ¶ˆæ¯çš„é…ç½®ï¼Œè‡ªåŠ¨æ³¨å…¥å‘é€æ¶ˆæ¯çš„APIï¼Œå°±å¯ä»¥å®ç°å‘é€æ¶ˆæ¯äº†ï¼Œä»¥ä¸‹æ˜¯å®ç°è¿‡ç¨‹ã€‚

### starteråˆ›å»º

ç¬¬ä¸€æ­¥ï¼Œéœ€è¦ä¸ºä½ çš„starterå–ä¸€ä¸ªå“äº®çš„åå­—ï¼Œspringçš„å®˜æ–¹æ–‡æ¡£ä¸­è¯´æ˜ï¼Œå®˜æ–¹çš„ starter çš„å‘½åæ ¼å¼ä¸º `spring-boot-starter-{xxxx}` æ¯”å¦‚`spring-boot-starter-activemq`  
ç¬¬ä¸‰æ–¹æˆ‘ä»¬è‡ªå·±çš„å‘½åæ ¼å¼ä¸º `{xxxx}-spring-boot-starter`ã€‚æ¯”å¦‚`mybatis-spring-boot-starter`ï¼Œæ­¤å¤„ï¼Œæˆ‘å‘½åä¸º`message-spring-boot-starter`

### è‡ªå®šä¹‰é…ç½®ä¿¡æ¯ç±»

å› ä¸ºè¦åœ¨é¡¹ç›®ä¸­çš„é…ç½®æ–‡ä»¶ä¸­å†™é…ç½®ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªstarterä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªé…ç½®ä¿¡æ¯ç±»æ¥æ¥æ”¶é…ç½®çš„ä¿¡æ¯ã€‚

    @ConfigurationProperties(prefix = "message")
    @Data
    public class MessageProperties {
        /**
         * é‚®ç®±æ¶ˆæ¯
         */
        private MessageConfigInfo email = new MessageConfigInfo();
        /**
         * é£ä¹¦æ¶ˆæ¯
         */
        private MessageConfigInfo feishu = new MessageConfigInfo();
    
        @Data
        public static class MessageConfigInfo {
            /**
             * ç”¨æˆ·å
             */
            private String userName;
            /**
             * å¯†ç 
             */
            private String passWord;
            /**
             * ç§˜é’¥
             */
            private String key;
            /**
             * æ¶ˆæ¯å‘é€API
             */
            private String apiUrl;
        }
    }
    

### å‘é€æ¶ˆæ¯çš„å®ç°

ç”±äºéœ€è¦é€šè¿‡è¿™ä¸ªstarterå®ç°å‘é€æ¶ˆæ¯ï¼Œæ‰€ä»¥è¿™é‡Œå¯èƒ½å¾—è¦å¼•å…¥å‘é€é‚®ä»¶ï¼Œå‘é€é£ä¹¦çš„å®˜æ–¹APIï¼Œè¿™é‡Œå°±ä¸æè¿™ä¹ˆå¤æ‚äº†ï¼Œä¸»è¦è¿˜æ˜¯çœ‹è¿‡ç¨‹ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªæ¥å£æ¨¡æ‹Ÿä¸€ä¸‹å³å¯ã€‚  
**æ¨¡æ‹Ÿæ¥å£å®šä¹‰**

    public interface SendMessageService {
        Boolean sendMessage(String message);
    }
    

**æ¨¡æ‹Ÿæ¥å£å®ç°**

    public class SendEmailMessageServiceImpl implements SendMessageService {
    
        private MessageProperties messageProperties;
    
        public SendEmailMessageServiceImpl(MessageProperties messageProperties) {
            this.messageProperties = messageProperties;
        }
    
        @Override
        public Boolean sendMessage(String message) {
            System.out.println(messageProperties.toString() + "  å¼€å‘å‘é€é‚®ä»¶ï¼Œå‘é€å†…å®¹ä¸ºï¼š" + message);
            return true;
        }
    }
    

    public class SendFeishuMessageServiceImpl implements SendMessageService {
    
        private MessageProperties messageProperties;
    
        public SendFeishuMessageServiceImpl(MessageProperties messageProperties) {
            this.messageProperties = messageProperties;
        }
    
        @Override
        public Boolean sendMessage(String message) {
            System.out.println(messageProperties.toString() + "  å¼€å‘å‘é€é‚®ä»¶ï¼Œå‘é€å†…å®¹ä¸ºï¼š" + message);
            return true;
        }
    }
    

### è‡ªåŠ¨é…ç½®ç±»

    @EnableConfigurationProperties(value = MessageProperties.class)
    @Configuration
    public class MessageAutoConfiguration {
        /**
         * ç»™å‘é€é‚®ä»¶çš„å®ç°ç±»ï¼Œæ³¨å…¥é…ç½®ä¿¡æ¯
         * @param messageProperties
         * @return
         */
        @Bean
        public SendEmailMessageServiceImpl emailMessageConfig(MessageProperties messageProperties){
            return new SendEmailMessageServiceImpl(messageProperties);
        }
    
    
        /**
         * ç»™å‘é€é£ä¹¦çš„å®ç°ç±»ï¼Œæ³¨å…¥é…ç½®ä¿¡æ¯
         * @param messageProperties
         * @return
         */
        @Bean
        public SendFeishuMessageServiceImpl feishuMessageConfig(MessageProperties messageProperties){
            return new SendFeishuMessageServiceImpl(messageProperties);
        }
    }
    

### spring.factories

    org.springframework.boot.autoconfigure.EnableAutoConfiguration=run.qiyuan.message.config.MessageAutoConfiguration
    

### é¡¹ç›®ç»“æ„

![image-1668519771251](http://image.qiyuan.run/halo/image-1668519771251.png)

ç¼–å†™å®Œä¹‹åï¼Œ`mvn install`å³å¯ã€‚

### å¦‚ä½•ä½¿ç”¨è¯¥starter

åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œå¼•å…¥è‡ªå®šä¹‰starterçš„åæ ‡

            <dependency>
                <groupId>run.qiyuan</groupId>
                <artifactId>message-spring-boot-starter</artifactId>
                <version>0.0.1-SNAPSHOT</version>
            </dependency>
    

ç„¶ååœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ç›¸å…³çš„ä¿¡æ¯

    message:
      email:
        username: Aden
        password: 123456
        key: HJFHADJSFBDASFHUADSINF
        api-url: http://blog.qiyuan.run
      feishu:
        user-name: Aden
        pass-word: 654321
        key: HFJKADSBFJKADSJFKADSNFAD
        api-url: http://blog.qiyuan.run
    

æµ‹è¯•

    @SpringBootApplication
    public class TeachApplication {
    
        public static void main(String[] args) {
            ConfigurableApplicationContext context = SpringApplication.run(TeachApplication.class, args);
            SendEmailMessageServiceImpl emailMessageService = context.getBean(SendEmailMessageServiceImpl.class);
            emailMessageService.sendMessage("ä½ å¥½ï¼ŒStarter!ï¼Œè¿™æ˜¯ä¸€å°é‚®ä»¶ä¿¡æ¯ï¼\n\n");
            SendFeishuMessageServiceImpl feishuMessageService = context.getBean(SendFeishuMessageServiceImpl.class);
            feishuMessageService.sendMessage("ä½ å¥½ï¼ŒStarter!ï¼Œè¿™æ˜¯ä¸€å°é£ä¹¦ä¿¡æ¯ï¼");
        }
    }
    

ç»“æœ  
![image-1668520760099](http://image.qiyuan.run/halo/image-1668520760099.png)