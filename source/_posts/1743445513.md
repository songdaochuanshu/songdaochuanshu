---
layout: post
title: "Tomcatæ·±å…¥æµ…å‡ºâ€”â€”Servlet(ä¸‰)"
date: "2022-07-07T16:31:24.607Z"
---
Tomcatæ·±å…¥æµ…å‡ºâ€”â€”Servlet(ä¸‰)
======================

æœ¬æ–‡ç®€å•ä»‹ç»äº†å››å¤§ä½œç”¨åŸŸã€è½¬å‘é‡å®šå‘è§„åˆ™æ–¹æ³•ä»¥åŠå„ç§çŠ¶æ€ç é—®é¢˜ã€‚åŒæ—¶åŒ…å«äº†æ–‡ä»¶çš„ä¸Šä¼ ä¸ä¸‹è½½ï¼Œå¾ˆç»†èŠ‚ï¼Œä¹Ÿä»‹ç»äº†Servletçš„æ³¨è§£å¼å¼€å‘ã€‚æè¿°äº†å¦‚ä½•è§£å†³Servletç±»çˆ†ç‚¸çš„é—®é¢˜......

é›¶ã€HttpServletRequest
====================

*   ä¸Šä¸€ç¯‡å·²ç»ä»‹ç»äº†è¿™ä¸ªæ¥å£ï¼Œç°åœ¨è¡¥å……äº›å†…å®¹  
    **é¦–å…ˆä»‹ç»ä¸€ä¸‹ä½œç”¨åŸŸï¼š**
*   jakarta.servlet.jsp.PageContext pageContext é¡µé¢ä½œç”¨åŸŸ
*   jakarta.servlet.http.HttpServletRequest request è¯·æ±‚åŸŸ
*   jakarta.servlet.http.HttpSession session ä¼šè¯åŸŸ
*   jakarta.servlet.ServletContext application åº”ç”¨åŸŸ
*   ä½œç”¨åŸŸä»å°åˆ°å¤§ pageContext-> request -> session -> application
*   å£°æ˜ä¸€ä¸‹è¿™é‡Œçš„jakartaæ˜¯Tomcat10çš„è¯´æ³•ï¼Œå·²ç»è¢«æ”¶è´­äº†ã€‚

**å¦‚ä½•è·å–å‰ç«¯ä¼ æ¥çš„æ•°æ®ï¼š**

    String getParameter(String name) // è·å–valueä¸­ç¬¬ä¸€ä¸ªå…ƒç´ (æœ€å¸¸ç”¨)
    Map<String,String[]> getParameterMap() // è·å–é”®å€¼å¯¹çš„æ•´ä¸ªé›†åˆ
    Enumeration<String> getParameterNames() // è·å–æ‰€æœ‰é”®key
    String[] getParameterValues(java.lang.String name) // é€šè¿‡keyè·å–å€¼
    

**è½¬å‘å’Œé‡å®šå‘ï¼š**

*   è½¬å‘
    
    *       //è½¬å‘éƒ½æ˜¯ä¸€æ¬¡è¯·æ±‚
            //å› ä¸ºä»–ä»¬ç”¨çš„éƒ½æ˜¯å½“å‰çš„Servlet
            //è½¬å‘ä»¥åå®ƒçš„åœ°å€ä»ç„¶ä¸å˜
            //æˆ‘ä»¬æ¯æ¬¡è½¬å‘ä¹Ÿå¯ä»¥æŠŠé¡µé¢çš„æ•°æ®å¸¦è¿‡å»æ”¾åˆ°ä½œç”¨åŸŸé‡Œ
            request.setAttribute("user",user);
            //è¿™æ ·æˆ‘ä»¬åœ¨å¦å¤–ä¸€ä¸ªé¡µé¢ä¸­ï¼Œä¹Ÿå¯ä»¥è·å¾—è¿™ä¸ªuserå¯¹è±¡çš„ä¿¡æ¯
            request.getAttribute("user");
            
            request.getRequestDispatcher("/list").forward(request,response);
            
            //è¿™é‡Œå†ä»‹ç»ä¸€ä¸ªæ–¹æ³•
            //è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯è½¬å‘ï¼Œåªä¸è¿‡æ˜¯æˆ‘ä»¬è½¬å‘åˆ°listè¿™ä¸ªé¡µé¢ä»¥åï¼Œæ‹¿åˆ°è¿™ä¸ªé¡µé¢çš„æ•°æ®ï¼Œç„¶åå†è¿”å›åˆ°å½“å‰é¡µé¢
             req.getRequestDispatcher("/list").include(req,resp);
            
        
*   é‡å®šå‘
    
    *   é‡å®šå‘ä»¥ååœ°å€æ ä¼šæ”¹å˜
    *   é‡å®šå‘ä¸€æ¬¡ï¼Œä¸¤æ¬¡è¯·æ±‚
    *   æ˜¯æµè§ˆå™¨å®Œæˆçš„
    *       //é‡å®šå‘è¦å†™ç»å¯¹è·¯å¾„
            resp.sendRedirect("req.getContextPath() + /list");
            
        
*   é€‰æ‹©å“ªä¸ª
    
    *   å¦‚æœåœ¨ä¸Šä¸€ä¸ªServletå½“ä¸­å‘requeståŸŸå½“ä¸­ç»‘å®šäº†æ•°æ®ï¼Œå¸Œæœ›ä»ä¸‹ä¸€ä¸ªServletå½“ä¸­æŠŠrequeståŸŸé‡Œçš„æ•°æ®å–å‡ºæ¥ï¼Œ**ç”¨è½¬å‘**
    *   **å…¶ä½™çš„éƒ½ç”¨é‡å®šå‘**

ä¸€ã€HttpServletResponse
=====================

![](https://img2022.cnblogs.com/blog/2816773/202207/2816773-20220707184518542-121272392.png)  
é€šè¿‡è§‚å¯ŸHttpServletResponseè¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å®ƒé‡Œé¢å®šä¹‰äº†å¾ˆå¤šçŠ¶æ€ç ã€‚  
**ä¸€èˆ¬ 200 å°±æ˜¯ okäº†**

**ä»¥ 4xxè¿™ç§ ä¸€èˆ¬éƒ½æ˜¯è·¯å¾„å†™é”™äº†ï¼Œæ²¡æœ‰æ‰¾åˆ°èµ„æº**

**ä»¥ 5xx è¿™ç§éƒ½æ˜¯åç«¯ä»£ç æœ‰é—®é¢˜ï¼Œæˆ–è€…å†™é”™äº†ã€‚**

çŠ¶æ€

ç±»åˆ«

åŸå› 

1xx

Informationalï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰

æ¥å—çš„è¯·æ±‚æ­£åœ¨å¤„ç†

2xx

Successï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰

è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯•

3xx

Redirectionï¼ˆé‡å®šå‘ï¼‰

éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚

4xx

Client errorï¼ˆå®¢æˆ·ç«¯é”™è¯¯ï¼‰

å®¢æˆ·ç«¯è¯·æ±‚å‡ºé”™ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚

5xx

Server Errorï¼ˆæœåŠ¡å™¨é”™è¯¯ï¼‰

æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™

*   æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡`void setContentType(String var1);`è¿™ä¸ªæ–¹æ³•æ¥è®¾ç½®æ•°æ®çš„å“åº”ç±»å‹ä»¥åŠç¼–ç æ ¼å¼
*   å…·ä½“çš„å„ç§å“åº”æ ¼å¼è¿™é‡Œæœ‰ä¸ªé“¾æ¥ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics\_of\_HTTP/MIME\_types

**è¿™é‡Œæ¼”ç¤ºä¸€ä¸ªåˆ©ç”¨ajaxä»æœåŠ¡å™¨æ‹¿åˆ°jsonæ•°æ®è¿›è¡Œè§£æçš„å°æ¡ˆä¾‹ï¼š**

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            response.setContentType("application/json;charset=utf-8");
            PrintWriter out = response.getWriter();
            //3.å“åº”ä¸€æ®µJSONæ•°æ®
            out.println("[{\"name\":\"lx\"},{\"age\":123}]");
    
    

    <script type="text/javascript">
            function onJson() {
                //1.å‘é€ajaxè¯·æ±‚è·å–JSONæ•°æ®
                var xhr = new XMLHttpRequest();
                xhr.open("GET","/outServlet");//ç»å¯¹è·¯å¾„
                xhr.send();
                xhr.onload = function () {
                    //JSON.stringify()æ˜¯å°†ä¸€ä¸ªå¯¹è±¡æ ¼å¼åŒ–æˆJSONæ•°æ®
                    //JSON.parse()æ˜¯ç”¨æ¥è§£æJSONæ•°æ®
                    var arr = JSON.parse(xhr.responseText);
                    arr.forEach((k,v) => {
                        console.log(k,v);
                    });
                    //è¿™æ ·æˆ‘ä»¬å°±èƒ½æ‹¿åˆ°æœåŠ¡å™¨è¿”å›çš„jsonæ•°æ®ï¼Œå¯ä»¥åˆ©ç”¨ajaxè¿›è¡Œé¡µé¢çš„æ¸²æŸ“ã€‚
                }
            }
        </script>
    

äºŒã€æ–‡ä»¶çš„ä¸Šä¼ ä¸‹è½½
=========

![](https://img2022.cnblogs.com/blog/2816773/202207/2816773-20220707192042197-1513852136.png)

2.1 æ–‡ä»¶çš„ä¸‹è½½
---------

> multipart/form-data å¯ç”¨äºHTML è¡¨å•ä»æµè§ˆå™¨å‘é€ä¿¡æ¯ç»™æœåŠ¡å™¨ã€‚ä½œä¸ºå¤šéƒ¨åˆ†æ–‡æ¡£æ ¼å¼ï¼Œå®ƒç”±è¾¹ç•Œçº¿ï¼ˆä¸€ä¸ªç”±'--'å¼€å§‹çš„å­—ç¬¦ä¸²ï¼‰åˆ’åˆ†å‡ºçš„ä¸åŒéƒ¨åˆ†ç»„æˆã€‚æ¯ä¸€éƒ¨åˆ†æœ‰è‡ªå·±çš„å®ä½“ï¼Œä»¥åŠè‡ªå·±çš„ HTTP è¯·æ±‚å¤´ï¼ŒContent-Dispositionå’Œ Content-Type ç”¨äºæ–‡ä»¶ä¸Šä¼ é¢†åŸŸï¼Œæœ€å¸¸ç”¨çš„ (Content-Length å› ä¸ºè¾¹ç•Œçº¿ä½œä¸ºåˆ†éš”ç¬¦è€Œè¢«å¿½ç•¥ï¼‰ã€‚

1.é¦–å…ˆäº†è§£`response.setContentType("application/force-download");`è¿™ä¸ªæ–¹æ³•æ˜¯å¼ºåˆ¶ä¸‹è½½ã€‚å½“æˆ‘ä»¬çš„æµè§ˆå™¨ä¸€æ—¦æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚å°±ä¼šé—®æˆ‘ä»¬æ˜¯å¦è¿›è¡Œæ–‡ä»¶çš„ä¸‹è½½ã€‚  
2.æˆ‘ä»¬å¯ä»¥é€šè¿‡`response.setHeader("Content-Length","æ–‡ä»¶å¤§å°");`çš„æ–¹æ³•æ¥è®¾ç½®æˆ‘ä»¬çš„æ–‡ä»¶ä¸‹è½½å¤§å°ã€‚  
3.æ ¹æ®è§„èŒƒï¼Œæˆ‘ä»¬è¿›è¡Œè®¾ç½®`response.setHeader("Content-Disposition","attachment;filename=test.txt");`

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            //å“åº”æ–‡ä»¶
            String str = "æˆ‘é æ€ä¹ˆå›äº‹I'm lx,Hello!~~å“ˆå“ˆå“ˆ";
            //è®¾ç½®å¼ºåˆ¶æç¤ºä¸‹è½½
            response.setContentType("application/force-download");
            //è®¾ç½®æ–‡ä»¶çš„å¤§å°
            response.setHeader("Content-Length","" + str.length());
            //æ ¹æ®multipart/form-dataè§„èŒƒ
            response.setHeader("Content-Disposition","attachment;filename=test.txt");
            ServletOutputStream out = response.getOutputStream();
            //getBytes()é»˜è®¤ä½¿ç”¨utf-8
            //æˆ‘ä»¬è¿™é‡Œçš„getBytesæ–¹æ³•å·²ç»é»˜è®¤ä½¿ç”¨äº†utf-8ç¼–ç æ ¼å¼ï¼Œå¤§å®¶å¯ä»¥å»çœ‹ä¸€ä¸‹æºç 
            out.write(str.getBytes());
        }
    

2.2 æ–‡ä»¶çš„ä¸Šä¼ 
---------

    <form action="http://localhost:8000/" method="post" enctype="multipart/form-data">
      <!-- è¿™ä¸ªenctype="multipart/form-data" ä¸€å®šè¦è®¾ç½®ï¼-->
      <!--ä¸æ­¤åŒæ—¶æˆ‘ä»¬ä¹Ÿä¸€å®šè¦åœ¨web.xmlä¸­çš„<Servlet>ä¸­é…ç½®<multipart-config>æ¥å‘Šè¯‰å®ƒ
          å› ä¸ºServletæ˜¯ä¸€ç§æ‡’åŠ è½½æœºåˆ¶ï¼Œéå¸¸çš„æ‡’ï¼Œå¦‚æœæˆ‘ä»¬ä¸å»é…ç½®ï¼Œå®ƒæ˜¯ä¸ä¼šè‡ªå·±æ‹¥æœ‰è¿™ä¸ªåŠŸèƒ½çš„ï¼Œä¹Ÿæ˜¯ä¸ºäº†èŠ‚çœèµ„æºå§
      -->
      <input type="text" name="myTextField">
      <input type="checkbox" name="myCheckBox">Check</input>
      <input type="file" name="myFile">
      <button>Send the file</button>
    </form>
    

    POST / HTTP/1.1
    Host: localhost:8000
    User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.9; rv:50.0) Gecko/20100101 Firefox/50.0
    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
    Accept-Language: en-US,en;q=0.5
    Accept-Encoding: gzip, deflate
    Connection: keep-alive
    Upgrade-Insecure-Requests: 1
    Content-Type: multipart/form-data; boundary=---------------------------8721656041911415653955004498
    Content-Length: 465
    //è¿™ä¸ªè¯·æ±‚å¤´ä¹Ÿå£°æ˜äº†ä½¿ç”¨boundaryè¾¹ç•Œï¼š-- + å­—ç¬¦ä¸²çš„å½¢å¼ï¼ŒåŒæ—¶ä¹Ÿå£°æ˜äº†æ–‡ä»¶çš„å¤§å°ï¼Œä¸‹é¢æ˜¯è¯·æ±‚ä½“çš„å†…å®¹
    
    -----------------------------8721656041911415653955004498
    Content-Disposition: form-data; name="myTextField"
    //ä½ ä¼šå‘ç°è¿™æ˜¯å››ä¸ªè¾¹ç•Œï¼Œåˆ†æˆäº†ä¸‰ä¸ªæ¨¡å—
    //ä¸‰ä¸ªæ¨¡å—å½“ä¸­ä»‹ç»äº†ä¸‰éƒ¨åˆ†ä¿¡æ¯ï¼Œåˆ†åˆ«å¯¹åº”ç€æˆ‘ä»¬çš„formè¡¨å•
    //myTextFieldä¿¡æ¯
    
    Test
    -----------------------------8721656041911415653955004498
    Content-Disposition: form-data; name="myCheckBox"
    //myCheckBoxçš„ä¿¡æ¯
    
    on
    -----------------------------8721656041911415653955004498
    Content-Disposition: form-data; name="myFile"; filename="test.txt"
    Content-Type: text/plain
    //myFile æˆ‘ä»¬çš„æ–‡ä»¶
    
    Simple file.
    -----------------------------8721656041911415653955004498--
    

*   å¦‚æœè¯´æˆ‘ä»¬æƒ³è¦å®ç°æ–‡ä»¶çš„ä¸Šä¼ è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»å‰ç«¯è·å–åˆ°çš„æ•°æ®å¤§å®¶ä¹Ÿçœ‹åˆ°äº†ï¼Œå°±æ˜¯ä¸Šé¢è¿™äº›ï¼Œå¾ˆæ˜¾ç„¶æˆ‘ä»¬éœ€è¦è‡ªå·±å»è§£æï¼šé‚£ä¹ˆè§£æä¹Ÿæœ‰ä¸¤ç§åŠæ³•ï¼Œä¸€ç§å°±æ˜¯æˆ‘ä»¬è‡ªå·±å»é€ è½®å­ğŸ¤£ï¼Œå¦ä¸€ç§å°±æ˜¯ç”¨ç°æˆçš„è½®å­ğŸš€
*   ä¸ºäº†æ˜¾ç¤ºæˆ‘ä»¬çš„å·¥åŒ ç²¾ç¥ï¼Œæˆ‘ä»¬å¿…é¡»è‡ªå·±é€ ä¸€ä¸ªè½®å­ğŸ˜ï¼Œç”¨åŸç”Ÿçš„Servletæ¥è§£æä¸€ä¸‹

    public interface Part {
        //æˆ‘ä»¬é¦–å…ˆæ¥äº†è§£ä¸€ä¸‹Partè¿™ä¸ªæ¥å£
        InputStream getInputStream() throws IOException;
    
        //è·å–è¯·æ±‚ç±»å‹
        String getContentType();
    
        //è·å–è¯·æ±‚çš„åå­—
        String getName();
    
        //è·å–æˆ‘ä»¬æäº¤çš„æ–‡ä»¶åå­—
        String getSubmittedFileName();
    
        long getSize();
    
        //å°†æˆ‘ä»¬çš„æ–‡ä»¶ä¿¡æ¯ï¼Œå†™å…¥åˆ°æˆ‘ä»¬ä¼ è¿›æ¥çš„è·¯å¾„ä¸­çš„æ–‡ä»¶é‡Œã€‚
        void write(String var1) throws IOException;
    
        void delete() throws IOException;
    
        //è·å¾—è¯·æ±‚å¤´ä¿¡æ¯
        String getHeader(String var1);
    
        //éå†æ‹¿åˆ°æ‰€æœ‰è¯·æ±‚å¤´çš„ä¿¡æ¯
        Collection<String> getHeaders(String var1);
    
        Collection<String> getHeaderNames();
    }
    

**ç¬¬ä¸€ç§å®ç°æ–¹å¼ï¼š**

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            request.setCharacterEncoding("utf-8");
            for(Part part:request.getParts()) {
                String name = part.getName();
                System.out.println("name = " + name);
                String value = request.getParameter(name);
                System.out.println(value);
                //æ–‡ä»¶å¤„ç†
                if(part.getContentType() != null) {
                    String path = "D:/uploads/" + part.getSubmittedFileName();
                    File file = new File(path);
                    //å¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ file.createNewFile() é‚£ä¹ˆå¦‚æœæ­¤æ—¶çˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™ä¹Ÿä¼šæŠ¥é”™ã€‚æ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡çˆ¶ç›®å½•æ˜¯å¦å­˜åœ¨è¿›è¡Œåˆ¤æ–­
                    File parentFile = file.getParentFile();
                    if(!parentFile.exists()) {
                        //å°†æ‰€æœ‰çš„çˆ¶çº§ç›®å½•éƒ½åˆ›å»ºå‡ºæ¥
                        parentFile.mkdirs();
                    }
                    //å°†æˆ‘ä»¬æ‹¿åˆ°çš„æ–‡ä»¶ä¿¡æ¯ï¼Œå†™å…¥åˆ°è¿™ä¸ªè·¯å¾„ä¸­çš„æ–‡ä»¶é‡Œ
                    part.write("path");
                }
            }
        }
    

**ç¬¬äºŒç§å®ç°æ–¹å¼ï¼š**

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            request.setCharacterEncoding("utf-8");
            String myTextField = request.getParameter("myTextField");
            String myCheckBox = request.getParameter("myCheckBox");
    
            //æ‹¿åˆ°æ–‡ä»¶ä¿¡æ¯
            Part myFile = request.getPart("myFile");
            //æ‹¿åˆ°æˆ‘ä»¬çš„æ–‡ä»¶åç§°
            String fileName = myFile.getSubmittedFileName();
            //è¿™é‡Œå°±æ˜¯ä¸ºäº†å®¹é”™å¤„ç†ã€‚æˆ‘ä»¬å°†æ–‡ä»¶ä»¥ . åˆ†å‰²æˆä¸¤éƒ¨åˆ†
            String[] fs = fileName.split("[.]");
            //æˆ‘ä»¬éšæœºç”Ÿæˆä¸€ä¸²å­—ç¬¦
            String uuid = UUID.randomUUID().toString();
            //æˆ‘ä»¬çš„æ–‡ä»¶è·¯å¾„ä»¥ çˆ¶ç›®å½•/æ–‡ä»¶å.å‰ç¼€/å½“å‰æ—¶é—´æˆ³/uuidéšæœºå­—ç¬¦ä¸²/ .åç¼€æ„æˆ
            String filePath = "D:/uploads/"+ fs[0] + "/" + System.currentTimeMillis() + "/" + uuid + fs[1];
    
            File file = new File(filePath);
            //å¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ file.createNewFile() é‚£ä¹ˆå¦‚æœæ­¤æ—¶çˆ¶ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™ä¹Ÿä¼šæŠ¥é”™ã€‚æ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡çˆ¶ç›®å½•æ˜¯å¦å­˜åœ¨è¿›è¡Œåˆ¤æ–­
            File parentFile = file.getParentFile();
            if(!parentFile.exists()) {
                //å°†æ‰€æœ‰çš„çˆ¶çº§ç›®å½•éƒ½åˆ›å»ºå‡ºæ¥
                parentFile.mkdirs();
            }
            //å°†æˆ‘ä»¬æ‹¿åˆ°çš„æ–‡ä»¶ä¿¡æ¯ï¼Œå†™å…¥åˆ°è¿™ä¸ªè·¯å¾„ä¸­çš„æ–‡ä»¶é‡Œ
            myFile.write("path");
        }
    

ä¸‰ã€Servletæ³¨è§£å¼€å‘
=============

*   è°ˆåˆ°æ³¨è§£ï¼Œå¦‚æœåšè¿‡é¡¹ç›®å¿…ç„¶ä¸ä¼šé™Œç”Ÿï¼Œå› ä¸ºæˆ‘ä»¬åŸºæœ¬ä¸Šéƒ½æ˜¯æ³¨è§£å¼å¼€å‘äº†ï¼Œä¸ºäº†ä½¿ä»£ç æ›´åŠ ç®€æ´é«˜æ•ˆï¼Œå‡å°‘é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚

    //è¿™æ˜¯åœ¨æˆ‘ä»¬çš„Servletä¸­ç”¨çš„æ³¨è§£ï¼Œå°±ä¸è¿‡å¤šçš„è§£é‡Šäº†ã€‚
    jakarta.servlet.annotation.WebServlet
    @WebServlet({"/list" , "/add" , "/detail" , "/del"})
    
    @WebFilter({"/a.do","/b.do"})
    public class MyFilter implements Filter {
    

**è¿™é‡Œæåˆ°ä¸€ä¸ªè§£å†³Servletç±»çˆ†ç‚¸çš„é—®é¢˜ï¼š**

*   å¦‚æœæˆ‘ä»¬ç”¨JavaWebè¿™å—æŠ€æœ¯åšé¡¹ç›®ï¼Œå¿…ç„¶ä¼šç”¨åˆ°å¾ˆå¤šä¸ªServletï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åˆ›å»ºå¾ˆå¤šä¸ªServletä¼šä½¿ä¸šåŠ¡çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚
*   æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†ä¸€ä¸ªä¸šåŠ¡æ”¾åˆ°ä¸€ä¸ªServletç±»ä¸­

    //æ¨¡æ¿ç±»
    //ç›®å½•é“¾æ¥
    @WebServlet({"/list" , "/add" , "/detail" , "/del"})
    public class ServletFinally extends HttpServlet {
        @Override
        protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
            String servletPath = req.getServletPath();
            if(servletPath.equals("/list")) {
                //æ ¹æ®è¯·æ±‚è¿›å…¥ç›¸åº”çš„æ–¹æ³•å½“ä¸­
                doList(req,resp);
            } else if(servletPath.equals("/add")) {
                doAdd(req,resp);
            }
        }
        private void doList(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
            //ç„¶åå°†æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç æ”¾é‡Œé¢
        }
        private void doAdd(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
            //ç„¶åå°†æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç æ”¾é‡Œé¢
        }
    }
    

å››ã€ç»“å°¾

*   å¯¹äº**Tomcatçš„Servlet**å†…å®¹å°±æ€»ç»“è¿™ä¹ˆå¤šï¼Œè‹¥æƒ³æ·±å…¥å­¦ä¹ ç­‰å¾…åç»­æ›´æ–°ã€‚
*   æˆ‘å°†ä¼šç»§ç»­æ›´æ–°å…³äº**Javaæ–¹å‘**çš„å­¦ä¹ çŸ¥è¯†ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å…³æ³¨ä¸€ä¸‹ã€‚
*   æ–‡ç« å†™å¾—æ¯”è¾ƒèµ°å¿ƒï¼Œç”¨äº†å¾ˆé•¿æ—¶é—´ï¼Œç»å¯¹**ä¸æ˜¯copy**è¿‡æ¥çš„ï¼
*   **å°Šé‡**æ¯ä¸€ä½å­¦ä¹ çŸ¥è¯†çš„äººï¼ŒåŒæ—¶ä¹Ÿ**å°Šé‡**æ¯ä¸€ä½åˆ†äº«çŸ¥è¯†çš„äººã€‚
*   ğŸ˜ä½ çš„**ç‚¹èµä¸å…³æ³¨**ï¼Œæ˜¯æˆ‘åŠªåŠ›å‰è¡Œçš„æ— é™åŠ¨åŠ›ã€‚ğŸ¤©