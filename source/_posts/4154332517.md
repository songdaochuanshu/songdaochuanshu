---
layout: post
title: "å‰ç«¯å›¾å½¢:SVGä¸Canvas"
date: "2022-10-20T15:27:25.071Z"
---
å‰ç«¯å›¾å½¢:SVGä¸Canvas
===============

00ã€å‰ç«¯å›¾å½¢
=======

å‰ç«¯ä»£ç å®ç°å›¾å½¢çš„å‡ ç§æ–¹å¼ï¼šCSSã€SVGã€Canvasï¼ˆä¸»è¦æ˜¯JavaScriptç¼–ç ï¼‰  
![](https://cdn.nlark.com/yuque/0/2022/jpeg/393451/1662086595452-bc4bacd7-a094-42de-9789-e47d9e1ce7d0.jpeg)

CSSä¹Ÿæ˜¯å¯ä»¥ç”»å›¾çš„ï¼Œéœ€è¦å€ŸåŠ©äºé«˜å®½ã€è¾¹æ¡†`border`ã€`clip-path`è£å‰ªã€æ¸å˜è‰²èƒŒæ™¯ç­‰å±æ€§æ¥æ¨¡æ‹Ÿå®ç°å„ç§å›¾å½¢ï¼Œå½“ç„¶åªèƒ½å®ç°ä¸€äº›ç®€å•çš„å›¾å½¢ã€‚

**borderï¼š**ç”¨å››æ¡è¾¹æ¡†æ ·å¼å±æ€§çš„å„ç§ç»„åˆå˜æ¢ï¼Œå®ç°ä¸€äº›ç®€å•çš„å›¾å½¢ã€‚ç½‘ä¸Šä¹Ÿæœ‰ç”»ä¸€äº›ç¨å¾®å¤æ‚çš„å›¾å½¢ï¼Œå¦‚å“†å•¦Aæ¢¦ï¼Œä½†ä»£ç é‡ç¨å¤šï¼Œå¯è¯»æ€§ä¸å¥½ï¼Œå¹¶ä¸æ¨èã€‚

    <div class="gcss">
      <p class="border">border</p>
      <p class="rborder">åœ†è§’æŒ‰é’®</p>
      <p class="radio"></p>radio
      <p class="triangle1"></p>ä¸‰è§’å½¢
      <p class="triangle2"></p>ä¸‰è§’å½¢
    </div>
    <style>
      .gcss p {
        display: inline-block;
        text-align: center; vertical-align: middle;
      }
      .border {
        border: 30px solid;
        border-color: aqua tan violet peru;
        border-radius: 20px;
      }        
      .rborder {
        background-color: #b1ccf3;
        width: 100px; height: 40px; line-height: 40px;
        border-radius: 20px;
      }
      .radio {
        width: 40px; height: 40px;
        border-radius: 50%;
        border: 10px solid;
      }
      .triangle1 {
        border: 50px solid #0001;
        border-left-color: red;
      }
      .triangle2 {
        border-left: 50px solid #0001;
        border-right: 50px solid #0001;
        border-bottom: 50px solid red;
      }
    </style>
    

![image.png](https://cdn.nlark.com/yuque/0/2022/png/393451/1666185742102-828f1ad6-cc0f-4e4b-9dd4-966184dcb4dd.png#clientId=ufacd6738-718e-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=117&id=u8e25ec48&margin=%5Bobject%20Object%5D&name=image.png&originHeight=117&originWidth=624&originalType=binary&ratio=1&rotation=0&showTitle=false&size=8367&status=done&style=stroke&taskId=u4b09681a-0116-418c-9ee7-244775e553c&title=&width=624)

* * *

01ã€< svg>çŸ¢é‡å›¾å½¢
=============

[< svg>](https://developer.mozilla.org/zh-CN/docs/Web/SVG)å¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼ˆScalable Vector Graphicsï¼ŒSVGï¼‰ï¼Œæ˜¯ä¸€ç§åŸºäº XMLï¼ˆæ•°å­¦ï¼‰æè¿°çš„äºŒç»´çš„çŸ¢é‡å›¾å½¢ï¼Œå†…å®¹å¯ä»¥ç›´æ¥æ’å…¥ç½‘é¡µï¼Œæˆä¸ºDOMçš„ä¸€éƒ¨åˆ†ï¼Œç„¶åç”¨ JavaScript å’Œ CSS è¿›è¡Œæ“ä½œã€‚SVG å†…å®¹ä¹Ÿå¯ä»¥å†™åœ¨ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶ä¸­ï¼Œç„¶åç”¨CSSï¼ˆbackground-urlï¼‰ã€`<img>`ã€`<object>`ã€`<embed>`ã€`<iframe>`æ¥å¼•ç”¨ã€‚

å¤§å¤šæ•°ç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒSVG å›¾å½¢ï¼Œè¶Šæ¥è¶Šå¤šçš„é¡¹ç›®åœ¨ä½¿ç”¨SVGå›¾å½¢ï¼Œç®€å•çš„åƒå›¾æ ‡ï¼Œå¤æ‚çš„ä¸€äº›å›¾è¡¨Chartä¹Ÿæœ‰ä¸å°‘æ˜¯åŸºäºSVGå®ç°çš„ã€‚ç›¸æ¯”äºä½å›¾ï¼Œä½“ç§¯æ›´å°ï¼Œå¯æ— çº¿ç¼©æ”¾è€Œä¸å¤±çœŸã€‚

**æ¯”è¾ƒ**

**çŸ¢é‡å›¾å½¢**

**ä½å›¾**

**å­˜å‚¨çš„æ•°æ®**

å­˜å‚¨å…ƒç´ ã€ç®—æ³•æ•°æ®

å­˜å‚¨åƒç´ æ•°æ®

**å­˜å‚¨å¤§å°**

å°

å¤§

**ç¼©æ”¾æ•ˆæœ**

æ— çº¿ç¼©æ”¾ï¼Œä¸å¤±çœŸ

å›ºå®šå¤§å°ï¼Œæ”¾å¤§ä¼šå¤±çœŸ

**å¯ç»´æŠ¤æ€§**

å¾ˆå®¹æ˜“ä¿®æ”¹

ä¿®æ”¹éº»çƒ¦

**æ‰©å±•æ€§**

æ”¯æŒCSSã€JS

ä¸æ”¯æŒ

**æ–‡ä»¶æ ¼å¼**

`.svg`ï¼Œç›´æ¥åµŒå…¥æ•°æ®åˆ°é¡µé¢

`.bmp`/`.png`/`.jpg`/`.gif`ï¼Œ< img>å¯åµŒå…¥svgæ–‡ä»¶

**æ”¯æŒçš„å…ƒç´ **

`<svg>`ã€`<img>`ã€`<iframe>`ã€`<object>`

`<img>`ã€`<iframe>`

**å…¼å®¹æ€§**

IE9å¼€å§‹æ”¯æŒ

è¾ƒå¥½

**æ¸²æŸ“æ€§èƒ½**

å¤æ‚çš„SVGä¼šå ç”¨å¾ˆå¤šæ—¶é—´

ç¨³å®š

**ç½‘ç»œä¼ è¾“æ€§èƒ½**

å’Œé¡µé¢æ•°æ®ä¸€èµ·ï¼Œä½“ç§¯å°ï¼Œé€Ÿåº¦å¿«

éœ€å•ç‹¬è¯·æ±‚å›¾ç‰‡èµ„æº

**ç¼“å­˜**

éšç½‘é¡µå†…å®¹ä¸€èµ·ï¼Œä¸å¯å•ç‹¬ç¼“å­˜

å›¾ç‰‡å¯å•ç‹¬ç¼“å­˜

1.1ã€< svg>å…ƒç´ 
------------

`<svg>`å†…éƒ¨æ”¯æŒå¤šç§å›¾å½¢ç®—æ³•ï¼ŒåŸºç¡€çš„å¦‚çº¿`line`ã€åœ†å½¢`<circle>`ã€çŸ©å½¢`rect`ã€æ–‡æœ¬`text`ï¼Œå¤æ‚çš„æœ‰æŠ˜çº¿`polyline`ã€å¤šè¾¹å½¢`polygon`ã€è·¯å¾„æ•°æ®`path`ç­‰ã€‚è¿™äº›å›¾å½¢éƒ½ä»¥å­å…ƒç´ çš„å½¢å¼ç»„åˆï¼Œå› æ­¤ä¹Ÿå°±éƒ½æ”¯æŒCSSã€JSçš„æ“ä½œäº†ã€‚[iconfont-é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“](https://www.iconfont.cn/)ä¸Šæœ‰éå¸¸ä¸°å¯Œçš„< svg>çŸ¢é‡å›¾å½¢ã€‚

**å…ƒç´ /å±æ€§**

**æè¿°**

**å€¼/ç¤ºä¾‹**

[**< `svg`\>**](https://developer.mozilla.org/zh-CN/docs/Web/SVG)

çŸ¢é‡å›¾å½¢å…ƒç´ 

viewBox

SVG ç”»å¸ƒæ˜¾ç¤ºåŒºåŸŸï¼Œè¿™é‡Œ 1 å•ä½ç­‰åŒäº 1 å±å¹•å•ä½ï¼ŒSVGé‡Œçš„åæ ‡ã€å°ºå¯¸éƒ½æ˜¯åŸºäºæ­¤ç”»å¸ƒåŒºåŸŸ

`viewBox="0 0 300 200"`

widthã€height

å®½åº¦ã€é«˜åº¦

`width="300" height="200"`

xmlns

xmlæ ‡ç­¾çš„å‘½åç©ºé—´ï¼Œä¸ºäº†åŒºåˆ†htmlã€svgï¼Œå¯ä»¥çœç•¥

**< line>**

çº¿æ®µ

x1ã€y1

èµ·ç‚¹xã€yåæ ‡

`<line x1="0" y1="100" />`

x2ã€y2

ç»ˆç‚¹xã€yåæ ‡

`x2="300" y2="100"`

**< rect>**

çŸ©å½¢ï¼š`<rect x="5" y="50" height="100" width="290"/>`

xã€y

èµ·ç‚¹åæ ‡

widthã€height

çŸ©å½¢çš„å®½ã€é«˜

rxã€ry

xã€yæ–¹å‘çš„åœ†è§’åŠå¾„ã€‚r=radius åŠå¾„

`rx="50" ry="50"`

**<circle/ellipse>**

åœ†å’Œæ¤­åœ†ï¼š`<circle cx="150" cy="100" r="80"/>`

cxã€cy

åœ†å¿ƒçš„xã€yåæ ‡

r

åœ†çš„åŠå¾„é•¿åº¦

rxã€ry

æ¤­åœ†çš„xã€yåŠå¾„

<[polyline](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/polyline)/[polygon](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/polygon)\>

æŠ˜çº¿ã€å¤šè¾¹å½¢ï¼Œä¸¤è€…æ•°æ®ç»“æ„ç›¸ä¼¼ï¼Œå¤šè¾¹å½¢æ˜¯è‡ªåŠ¨é¦–å°¾è¿æ¥å°é—­æˆä¸€ä¸ªåŒºåŸŸï¼ˆPolygon /ËˆpÉ’lÉªÉ¡É™n/ å¤šè¾¹å½¢ï¼‰

points

xã€yåæ ‡çš„é›†åˆï¼Œå¤šä¸ªåæ ‡é€—å·`,`åˆ†å‰²

`points="0 0, 20 40, 70 80/>`

[**< path>**](https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/path)

è·¯å¾„ï¼Œå¾ˆå¸¸ç”¨ã€å¾ˆå¼ºå¤§çš„å›¾å½¢ç»˜åˆ¶ï¼Œæ•°æ®åœ¨å±æ€§`d`ä¸­

**< d>**

**è·¯å¾„æ•°æ®**ï¼Œ`&lt; path&gt;`æœ€é‡è¦çš„å±æ€§ï¼Œç”±å¤šç»„**å‘½ä»¤+ åæ ‡ç‚¹**ç»„æˆ

`d="M 50 5 H250 V195 H50 Z"`

**M** x y

ç§»åŠ¨ç”»ç¬”åˆ°åæ ‡ç‚¹xã€y

`M50 5`

**L** x y

åˆ’çº¿åˆ°åæ ‡xã€y

`L 250 0`

**H** x

ç»˜åˆ¶æ°´å¹³çº¿ï¼Œåˆ°åæ ‡xï¼›å°å†™`h`çš„åæ ‡ä¸ºç›¸å¯¹ä½ç½®

`H 250`

**V** y

ç»˜åˆ¶å‚ç›´çº¿ï¼Œåˆ°åæ ‡yï¼›å°å†™`v`çš„åæ ‡ä¸ºç›¸å¯¹ä½ç½®

`V195`

**Z**

é—­åˆè·¯å¾„ï¼ˆclosepathï¼‰ï¼Œæ”¾åˆ°æœ€åç”¨äºé—­åˆè·¯å¾„

C\*

ç»˜åˆ¶æ›²çº¿ï¼ŒåŒ…æ‹¬è´å¡å°”æ›²çº¿ã€åœ†å¼§ã€‚

**<**[**text**](https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/text)**\>**

æ–‡æœ¬æ ‡ç­¾ï¼Œæ”¯æŒCSSæ ·å¼ä¸­çš„æ–‡æœ¬æ ·å¼

xã€y

æ–‡æœ¬å¼€å§‹ä½ç½®

font-size

å­—ä½“å¤§å°

< textPath>

æ–‡å­—ç»˜åˆ¶çš„è·¯å¾„ï¼Œè¿™ä¸ªå°±æ¯”è¾ƒæœ‰è¶£äº†

`<textPath xlink:href="#path1">`

**å…¬å…±å±æ€§**

éƒ¨åˆ†å±æ€§å¯ä»¥ç”¨CSSè®¾ç½®ï¼Œæ”¯æŒhoverä¼ªç±»

stroke

ç¬”ç”»é¢œè‰²(stroke /stroÊŠk/ ç¬”ç”») ï¼ŒåŒ…æ‹¬çº¿æ®µã€å½¢çŠ¶çº¿æ¡ã€‚

`stroke="red"`

stroke-width

ç”»ç¬”çº¿å®½

`stroke-width="10"`

fill

å¡«å……é¢œè‰²ï¼Œå¡«å……ä¸€ä¸ªåŒºåŸŸï¼ˆçŸ©å½¢ã€åœ†å½¢ç­‰ï¼‰

`fill="#0001"`

> **â—å°æç¤º**ï¼šæ³¨æ„æœåŠ¡å™¨æ·»åŠ å¯¹svgçš„æ”¯æŒï¼ŒåŠgzipå‹ç¼©ã€‚

    <svg version="1.1" baseProfile="full" width="300" height="200" xmlns="http://www.w3.org/2000/svg">
    	<circle cx="150" cy="100" r="80" fill="green" />
    	<circle cx="150" cy="100" r="70" fill="#fff" />                
    	<text x="150" y="125" font-size="60" text-anchor="middle" fill="orange">SVG</text>
    	<line x1="0" y1="100" x2="300" y2="100" stroke="white" stroke-width="8"/>
    </svg>
    <svg class="icon" height="200" viewBox="0 0 300 200" version="1.1">
    	<rect x="5" y="50" rx="50" ry="50" height="100" width="290" fill="white" stroke="blue" stroke-width="10"/>
    	<path d="M 50 5 H250 V195 H50 Z" stroke="red" stroke-width="10" fill="#00000001" />
    	<text x="145" y="125" font-size="60" text-anchor="middle" fill="#fab">Path</text>
    </svg>
    <style>
    	svg:hover{
    		background-color: aliceblue;
    		stroke: red;
    		stroke-width: 1px;
    		fill: red;
    	}
    </style>
    

![image.png](https://cdn.nlark.com/yuque/0/2022/png/393451/1659263010393-50dd084f-124b-4a2c-af82-19469529a29e.png#clientId=u365cd893-e140-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=219&id=uec48dff4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=219&originWidth=623&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20357&status=done&style=none&taskId=u10d7f5ca-4ef7-4c86-952a-e0d36892baa&title=&width=623)

1.2ã€åŠ¨ç”»
------

SVG æœ¬èº«å°±æ˜¯ä¸€ä¸ªHTMLå…ƒç´ ï¼Œå› æ­¤åŠ¨ç”»å¯ä»¥ç”¨CSSçš„åŠ¨ç”»æ¥å®ç°ï¼ˆå‚è€ƒ [CSSåŠ¨ç”»](https://www.yuque.com/kanding/ktech/ekbgai)ï¼‰ï¼ŒSVGä¸­ä¹Ÿæœ‰ä¸“é—¨ç”¨äºå®ç°åŠ¨ç”»çš„`<animate>`å­å…ƒç´ ã€‚è¿™é‡Œç¤ºä¾‹é‡‡ç”¨JavaScript+`transform`å˜æ¢å®ç°æ—‹è½¬æ•ˆæœã€‚

    <svg version="1.1" baseProfile="full" width="300" height="200" xmlns="http://www.w3.org/2000/svg">
    	<circle cx="150" cy="100" r="80" fill="green" />
    	<circle cx="150" cy="100" r="70" fill="#fff" />
    	<text class="svgc" x="150" y="125" font-size="60" text-anchor="middle" fill="orange" >SVG</text>
    	<line class="svgc" x1="0" y1="100" x2="300" y2="100" stroke="white" stroke-width="8" />
    </svg>
    <script>
    	let svgcs = document.querySelectorAll(".svgc");
    	//è®¾ç½®ä¸­å¿ƒç‚¹
    	svgcs.forEach(element => {
    		element.setAttribute("transform-origin", '150 100');
    	});
    	let deg = 0;
    	setInterval(() => {
    		deg = deg > 360 ? 0 : deg+4;
    		svgcs.forEach(element => {
    			element.setAttribute("transform", `rotate(${deg})`);
    		});
    	}, 100);
    </script>
    <!-- ç”¨CSSåŠ¨ç”»å®ç°çš„ç‰ˆæœ¬ -->
    <style>
    	.svgc {
    		transform-origin: 150px 100px;
    		animation: svgc-routate 2s linear 1s infinite;
    	}
    	@keyframes svgc-routate {
    		from {
    			transform: rotate(0deg);
    		}
    		to {
    			transform: rotate(360deg);
    		}
    	}
    </style>
    

![1.gif](https://cdn.nlark.com/yuque/0/2022/gif/393451/1662014637639-bac1a2a0-639c-4fd5-bf6e-affdd83f817f.gif#clientId=u2499904c-692c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=183&id=u3af792dd&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=183&originWidth=294&originalType=binary&ratio=1&rotation=0&showTitle=false&size=86865&status=done&style=none&taskId=u5c9b51bd-e58c-4825-9520-172bf59cc3d&title=&width=294)

1.3ã€svgå·¥å…·/èµ„æº/åº“
--------------

### ğŸ”¸çŸ¢é‡å›¾æ ‡èµ„æº

*   [Iconfont](https://www.iconfont.cn/)\-é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼ŒåŠå…¶æä¾›ä¸°å¯Œçš„çŸ¢é‡å›¾æ ‡åº“ï¼Œæä¾›çŸ¢é‡å›¾æ ‡ä¸‹è½½ã€åœ¨çº¿å­˜å‚¨ã€æ ¼å¼è½¬æ¢ç­‰åŠŸèƒ½ã€‚åº”è¯¥å°±è¿™ä¸ªå°±å¤Ÿäº†ï¼
*   [flaticon](https://www.flaticon.com/)ï¼Œå›½å¤–çš„çŸ¢é‡å›¾æ ‡åº“

### ğŸ”¸SVGå·¥å…·

è·¯å¾„< path>å¯ä»¥ç»˜åˆ¶ä»»æ„çš„å›¾å½¢ï¼Œç›´æ¥ç¼–ç æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œç‰¹åˆ«æ˜¯`C`è´å¡å°”æ›²çº¿ã€‚æ‰€ä»¥ä¸€èˆ¬éƒ½æ˜¯ç”¨ä¸“ä¸šå·¥å…·æ¥ç»˜åˆ¶`&lt; svg&gt;`å›¾å½¢çš„ï¼Œä¹Ÿæœ‰åœ¨çº¿å·¥å…·ã€‚

*   ä¸“ä¸šå·¥å…·AIï¼šAdobe Illustrator
*   [åœ¨çº¿SVGç¼–è¾‘å™¨](https://svg.hwcha.com/)ï¼Œ[Method Draw](https://editor.method.ac/)
*   [SVGator](https://www.svgator.com/)ï¼Œä¸€ä¸ªåœ¨çº¿SVGåŠ¨ç”»åˆ¶ä½œå·¥å…·ï¼Œå¯¼å…¥SVGæ–‡ä»¶ï¼Œè¿›è¡Œå¯è§†åŒ–çš„åŠ¨ç”»åˆ¶ä½œã€‚

### ğŸ”¸åŠ¨ç”»åº“

*   ç¬¬ä¸‰æ–¹åº“GSAPï¼Œæ¥è‡ª[GreenSock](https://greensock.com/)ï¼Œå¯ä»¥æ›´ç®€å•çš„å®ç°æ›´ä¸°å¯Œçš„åŠ¨ç”»æ•ˆæœï¼Œä¸å…‰æ”¯æŒSVGï¼ŒåŒ…æ‹¬é¡µé¢ä¸­ä»»æ„å¯ä»¥é€šè¿‡JSè®¿é—®çš„å…ƒç´ ã€å±æ€§ï¼Œéƒ½å¯ä»¥å®ç°åŠ¨ç”»ã€‚
*   [anime.js](https://github.com/juliangarnier/anime)ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œéå¸¸è½»é‡ï¼Œå‹ç¼©åå¤§å°9Kã€‚
*   SVGåŠ¨ç”»åº“ï¼š[mo.js](https://mojs.github.io/)ã€[SVG.js](https://svgjs.dev/docs/3.0/)

* * *

02ã€< canvas>åŸºç¡€
==============

**< canvas>**åªæ˜¯ä¸€å—å¹³å¹³æ— å¥‡çš„ç”»å¸ƒè€Œå·²ï¼ˆåœ¨HTMLä¸­å°±ä¸€ä¸ª`<canvas>`å…ƒç´ ï¼‰ï¼Œæä¾›äº†ä¸€ç‚¹ç‚¹APIï¼Œç”±JSè¿›è¡Œç»˜åˆ¶å„ç§å›¾å½¢ã€‚2Dçš„canvasç»˜åˆ¶å’Œ`<SVG>`æŒºåƒï¼Œéƒ½æ˜¯ä¸€äº›çº¿ã€çŸ©å½¢ã€åœ†ã€pathè·¯å¾„æ•°æ®ã€‚è¿™é‡Œå°±å…ˆç®€å•äº†è§£ä¸€ä¸‹ï¼Œ`<canvas>åŠŸèƒ½`æ˜¯å¾ˆå¼ºå¤§çš„ï¼Œå¾ˆå¤šå¯è§†åŒ–å›¾è¡¨éƒ½æ˜¯åŸºäº`<canvas>`å®ç°çš„ã€‚

**ğŸ”¸åŸºæœ¬ç‰¹ç‚¹**ï¼š

*   åŒæ ‡ç­¾ï¼Œå¿…é¡»åŒ…å«é—­åˆæ ‡ç­¾ã€‚æ ‡ç­¾å†…å¯ä»¥æ”¾æç¤ºæ–‡å­—ï¼Œå½“æµè§ˆå™¨ä¸æ”¯æŒ`<canvas>`ä¼šæ˜¾ç¤ºã€‚
*   åæ ‡ç³»ä»¥å·¦ä¸Šè§’ä¸ºä¸­å¿ƒç‚¹ï¼Œå’ŒSVGä¸€æ ·ã€‚

![](https://cdn.nlark.com/yuque/0/2022/png/393451/1661950357698-9407ae56-7bbb-45dd-a5a7-58db3b244d35.png#clientId=ua46a1a63-7ed4-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=eX3yk&margin=%5Bobject%20Object%5D&originHeight=144&originWidth=254&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=udde9724f-5235-4028-9b78-d6577b9a785&title=)

*   [MDNï¼šCanvas æ•™ç¨‹](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial)

2.1ã€canvas API
--------------

**canvas å±æ€§/æ–¹æ³•**

**æè¿°**

heightã€width

å…ƒç´ é«˜åº¦ã€å®½åº¦ï¼š`<canvas width="400" height="400"></canvas>`

**getContext**(contextType)

è·å–ç”¨äºç»˜åˆ¶çš„æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ŒcontextTypeï¼š  
"2d"ï¼š[CanvasRenderingContext2D](https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D) äºŒç»´æ¸²æŸ“ä¸Šä¸‹æ–‡  
"webgl"ï¼š [WebGLRenderingContext](https://developer.mozilla.org/zh-CN/docs/Web/API/WebGLRenderingContext) ä¸‰ç»´æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ŒOpenGL ES 2.0  
"webgl2"ï¼šWebGL2RenderingContext ä¸‰ç»´æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼ŒOpenGL ES 3.0

[**CanvasRenderingContext2D**](https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D)

**fillStyle**

å¡«å……ï¼ˆå†…éƒ¨ï¼‰é¢œè‰² `ctx.fillStyle='rgba(250,0,0,0.6)'`

**strokeStyle**

ç”»ç¬”ï¼ˆè¾¹æ¡†ï¼‰é¢œè‰² `ctx.strokeStyle='red'`ï¼ŒåŒä¸Šï¼Œæ”¯æŒcolorã€æ¸å˜è‰²ç”»åˆ·ã€å›¾ç‰‡ç”»åˆ·

**font**

å­—ä½“è®¾ç½® `ctx.font = "bold 48px serif"`

**lineWidth**

çº¿å®½ `ctx.lineWidth = 15;`

toDataURL(type, quality)

å¯ä»¥å°†canvasç»˜åˆ¶çš„å›¾å½¢è½¬æ¢ä¸ºData URI æ ¼å¼çš„å›¾åƒï¼Œä»è€Œå¯¼å‡ºä¸ºä½å›¾æ–‡ä»¶

**åŸºç¡€å›¾å½¢ç»˜åˆ¶**

**fillRect**(x, y, width, height)

å¡«å……ä¸€ä¸ªçŸ©å½¢

**strokeRect**(x, y, width, height)

ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢æ¡†

**clearRect**(x, y, width, height)

æ¸…é™¤æŒ‡å®šåŒºåŸŸçš„çš„åƒç´ 

**fillText**(text, x, y, \[maxWidth\])

å¡«å……æ–‡æœ¬

**strokeText**(text, x, y \[, maxWidth\])

ç»˜åˆ¶æ–‡æœ¬ï¼ˆè½®å»“ï¼‰

drawImage()

ç»˜åˆ¶ä½å›¾

**è·¯å¾„ç»˜åˆ¶**

**â‘ **åˆ›å»ºè·¯å¾„ >\*\* â‘¡**åˆ›å»ºè·¯å¾„ >** â‘¢\*\*æ¸²æŸ“è·¯å¾„

**beginPath**()

å¼€å§‹ä¸€ä¸ªæ–°çš„è·¯å¾„ï¼Œæ¸…é™¤å·²æœ‰è·¯å¾„åˆ—è¡¨

**closePath**()

é—­åˆä¸€ä¸ªè·¯å¾„

**moveTo**(x, y)

ç§»åŠ¨ç”»ç¬”åˆ°åæ ‡xã€y

**lineTo**(x, y)

ç”»çº¿åˆ°åæ ‡xã€y

[**ellipse**](https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/ellipse)(x, y, radiusX, radiusY,r,sa,ea)

æ¤­åœ†è·¯å¾„ `ellipse(x, y, radiusX, radiusY, rotation, startAngle, endAngle)`

**rect**(x, y, width, height)

çŸ©å½¢è·¯å¾„

**arc**(x, y, radius, startAngle, endAngle)

ç»˜åˆ¶åœ†å¼§**è·¯å¾„**

quadraticCurveTo(cp1x, cp1y, x, y)

äºŒæ¬¡è´å¡å°”æ›²çº¿

**fill**(\[path\], \[fillRule\])

å¡«å……å½“å‰ã€å·²å­˜åœ¨çš„è·¯å¾„

**stroke**(\[path\])

æè¾¹å­è·¯å¾„

[Path2D](https://developer.mozilla.org/zh-CN/docs/Web/API/Path2D)

å¯ä»¥å•ç‹¬ç”³æ˜ä¸€ä¸ªè·¯å¾„å¯¹è±¡ï¼Œæ”¯æŒä¸Šé¢çš„ç»˜åˆ¶ï¼Œè¿˜æ”¯æŒSVGçš„pathæ•°æ®ã€‚

    <canvas id="canvas" width="400" height="400"></canvas>
    <script>
    	ctx = document.getElementById('canvas').getContext('2d');
    	// ctx.alpha = false;
    	ctx.fillStyle = 'rgba(250,0,0,0.6)';
    	ctx.fillRect(10, 10, 40, 40);
    	ctx.fillRect(30, 30, 40, 40);
    	ctx.strokeStyle = 'red';
    	ctx.lineWidth = 3;
    	ctx.strokeRect(90, 10, 150, 50);
    	ctx.fillStyle = 'rgba(0,0,250,0.5)';
    	ctx.font = '20px å¾®è½¯é›…é»‘';
    	ctx.fillText("æ–‡æœ¬Text", 120, 40)
    	//path
    	ctx.beginPath();
    	ctx.moveTo(90, 80);
    	ctx.lineTo(90, 200);
    	ctx.lineTo(190, 200);
    	ctx.closePath();
    	ctx.arc(120, 120, 50, 0, 360);
    	ctx.fill();
    </script>
    

![image.png](https://cdn.nlark.com/yuque/0/2022/png/393451/1662006768190-29baa11f-c82a-43dc-8c0a-f56e9612b900.png#clientId=u2499904c-692c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=211&id=ud2800527&margin=%5Bobject%20Object%5D&name=image.png&originHeight=211&originWidth=261&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4896&status=done&style=none&taskId=u1e416943-8b58-47f8-a5a8-546809c353f&title=&width=261)

*   [äºŒæ¬¡è´å¡å°”æ›²çº¿è°ƒè¯•å™¨](http://blogs.sitepointstatic.com/examples/tech/canvas-curves/quadratic-curve.html)
*   [ä¸‰æ¬¡è´å¡å°”æ›²çº¿è°ƒè¯•å™¨](http://blogs.sitepointstatic.com/examples/tech/canvas-curves/bezier-curve.html)

> **å¼§åº¦** = ( Math.PI / 180 ) \* è§’åº¦ï¼Œ360åº¦çš„å¼§åº¦= Math.PI\*2

2.2ã€åŠ¨ç”»
------

**Canvasçš„åŠ¨ç”»**å°±æ˜¯ä¸åœçš„é‡ç»˜ï¼Œå…¶å®ä»»ä½•åŠ¨ç”»éƒ½æ˜¯è¿™æ ·ï¼Œå‰ç«¯å®ç°åŠ¨ç”»æœ‰ä»¥ä¸‹å‡ ç§å§¿åŠ¿ï¼š

1.  **setInterval**(function, delay)ï¼šå®šæ—¶é‡ç»˜ï¼Œé€‚åˆä¸éœ€è¦äº¤äº’çš„åœºæ™¯ã€‚
2.  **setTimeout**(function, delay)ï¼šå®šæ—¶é‡ç»˜ï¼Œé€‚åˆé€šè¿‡é”®ç›˜æˆ–è€…é¼ æ ‡äº‹ä»¶æ¥æ•æ‰ç”¨æˆ·çš„äº¤äº’ï¼Œå†ç”¨ `setTimeout` æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œã€‚
3.  **requestAnimationFrame**(callback)ï¼šåŠ¨ç”»ä¸“ç”¨APIï¼Œè¿™ä¸ªæ–¹æ³•æ›´åŠ å¹³ç¼“å¹¶æ›´åŠ æœ‰æ•ˆç‡ï¼Œå½“ç³»ç»Ÿå‡†å¤‡å¥½äº†é‡ç»˜æ¡ä»¶çš„æ—¶å€™ï¼Œæ‰è°ƒç”¨ç»˜åˆ¶åŠ¨ç”»å¸§ã€‚

> `requestAnimationFrame (render)`æ˜¯HTML5æä¾›çš„åŠ¨ç”»APIï¼Œä»–å‘æµè§ˆå™¨ç”³è¯·æ‰§è¡Œä¸€ä¸ªåŠ¨ç”»å¸§æ¸²æŸ“å‡½æ•°ï¼Œæµè§ˆå™¨åœ¨ä¸‹æ¬¡é‡ç»˜ï¼ˆåˆ·æ–°ï¼‰ä¹‹å‰è°ƒç”¨è¿™ä¸ª`render`å›è°ƒå‡½æ•°ã€‚`requestAnimationFrame`è¿˜åšäº†å¾ˆå¤šä¼˜åŒ–ä»¥æå‡æ€§èƒ½å’Œæµç•…åº¦ã€‚

*   **ç¨³å®š60å¸§**ï¼šæµè§ˆå™¨çš„åˆ·æ–°å‘¨æœŸå¤§å¤šå’Œå±å¹•åˆ·æ–°ç‡åŒ¹é…ï¼Œä¸ºæ¯ç§’60æ¬¡ï¼Œéå¸¸ç¨³å®šé«˜æ•ˆã€‚ä¸åƒ`setInterval`ã€`setTimeout`è¿˜è¦åœ¨ä»»åŠ¡é˜Ÿåˆ—é‡Œæ’é˜Ÿç­‰å¾…ï¼Œå°±å¯èƒ½å‘ç”Ÿä¸¢å¸§å’Œå¡é¡¿ç°è±¡ã€‚
*   **åˆå¹¶ä¼˜åŒ–**ï¼šæµè§ˆå™¨ä¼šä¼˜åŒ–åŠ¨ç”»çš„æ‰§è¡Œï¼ŒæŠŠæ¯ä¸€å¸§çš„æ‰€æœ‰DOMæ“ä½œé›†ä¸­èµ·æ¥ï¼Œåœ¨ä¸€ä¸ªæ¸²æŸ“å‘¨æœŸå†…æ‰§è¡Œã€‚
*   **éšè—ä¼˜åŒ–**ï¼šå½“å‰çª—å£æˆ–è€…æ ‡ç­¾é¡µä¸å¯è§æ—¶åœæ­¢è¿è¡Œ`requestAnimationFrame`ã€‚

    <canvas id="canvas" width="400" height="400"></canvas>
    	<script>
    	ctx = document.getElementById('canvas').getContext('2d');
    	//åŠ¨ç”»æ—‹è½¬
    	let eangle = 0;
    	function drawEllipse() {
    		ctx.clearRect(255, 150, 140, 140);
    		ctx.beginPath();
    		ctx.fillStyle = 'rgba(0,250,0,0.3)';
    		eangle = eangle > 360 ? 0 : eangle + 1;
    		ctx.ellipse(320, 230, 60, 30, eangle * Math.PI / 180, 0, 2 * Math.PI);
    		ctx.stroke();
    		ctx.fill();
    		ctx.beginPath();
    		ctx.ellipse(320, 230, 30, 60, eangle * Math.PI / 180, 0, 2 * Math.PI);
    		ctx.fillStyle = 'rgba(0,0,250,0.3)';
    		ctx.stroke();
    		ctx.fill();
    	}
    	setInterval(drawEllipse, 20);
    	//æ°´å¹³ç§»åŠ¨
    	let lx = 40;
    	let ltr = true;
    	function drawRect() {
    		if (lx > 300) ltr = false;
    		if (lx < 40) ltr = true;
    		// ctx.clearRect(lx, 220, 40, 40);
    		ctx.fillStyle = 'rgb(255,255,255,0.4)';
    		ctx.fillRect(20, 290, 340, 60);
    		lx = ltr ? lx + 2 : lx - 2;
    		ctx.fillStyle = 'rgb(110,22,250)';
    		ctx.fillRect(lx, 300, 40, 40);
    		ctx.strokeRect(lx, 300, 40, 40);
    		requestAnimationFrame(drawRect);  //æ°¸è¿œä¸åœçš„æäº¤æ¸²æŸ“ç”³è¯·ï¼Œé€’å½’è‡ªå·±
    	}
    	requestAnimationFrame(drawRect);
    	</script>
    

![1.gif](https://cdn.nlark.com/yuque/0/2022/gif/393451/1662006972018-28a30096-97c6-43ff-9bd0-105cd5746ddc.gif#clientId=u2499904c-692c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=210&id=uc845b3af&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=210&originWidth=395&originalType=binary&ratio=1&rotation=0&showTitle=false&size=68313&status=done&style=none&taskId=u842b2b40-9303-4f18-a5de-e5d16ef3fe4&title=&width=395)

ç”¨canvaså®ç°çš„ä¸€ä¸ªå½©çƒå¤§æˆ˜ï¼š[codepen](https://codepen.io/kanding/full/oNdvzRR)

* * *

03ã€WebGL
========

WebGL ä½œä¸ºä¸€ç§WEB 3Dç»˜å›¾æŠ€æœ¯ï¼Œä¾æ‰˜äº`<canvas>`å…ƒç´ ã€‚WebGLæ˜¯è¿è¡Œåœ¨GPUä¸Šçš„ï¼Œå¯é¢å‘åº•å±‚æ˜¾å¡ç¼–ç¨‹ï¼Œå¯è°ƒç”¨åº•å±‚çš„æ¥å£ï¼Œå®ç°ç¡¬ä»¶åŠ é€Ÿï¼Œåœ¨2Då›¾å½¢ç»˜åˆ¶ä¸Šæ€§èƒ½ä¼šä¼˜äºCanvas2Dã€‚  
ä¼ è¯´åŸç”Ÿçš„WebGLæ¯”è¾ƒéš¾å­¦ï¼Œå¯è€ƒè™‘ä½¿ç”¨ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„WebGLåº“ï¼Œå¦‚Three.jsã€Cesium.jsï¼ˆ3Dåœ°å›¾ï¼‰ã€Babylon.js

[MDNï¼šWebGL æ•™ç¨‹](https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API/Tutorial)

* * *

> **Â©ï¸ç‰ˆæƒç”³æ˜**ï¼šç‰ˆæƒæ‰€æœ‰@å®‰æœ¨å¤•ï¼Œæœ¬æ–‡å†…å®¹ä»…ä¾›å­¦ä¹ ï¼Œæ¬¢è¿æŒ‡æ­£ã€äº¤æµï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼[_åŸæ–‡ç¼–è¾‘åœ°å€_](https://www.yuque.com/kanding)